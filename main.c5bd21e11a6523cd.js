"use strict";var wI=Object.defineProperty,CI=Object.defineProperties,II=Object.getOwnPropertyDescriptors,kw=Object.getOwnPropertySymbols,TI=Object.prototype.hasOwnProperty,bI=Object.prototype.propertyIsEnumerable,Fw=(hn,ct,U)=>ct in hn?wI(hn,ct,{enumerable:!0,configurable:!0,writable:!0,value:U}):hn[ct]=U,b_=(hn,ct)=>{for(var U in ct||(ct={}))TI.call(ct,U)&&Fw(hn,U,ct[U]);if(kw)for(var U of kw(ct))bI.call(ct,U)&&Fw(hn,U,ct[U]);return hn},D_=(hn,ct)=>CI(hn,II(ct));(self.webpackChunkdrasti_teacher_dashboard=self.webpackChunkdrasti_teacher_dashboard||[]).push([[179],{6215:(hn,ct,U)=>{U.d(ct,{nm:()=>Kr});var y=U(4976),ke=(U(5e3),U(3692),U(259),U(5861)),je=U(6881),Xe=U(4859),He=U(2090),nt=U(1877);const Ie=new Map,ve={activated:!1,tokenObservers:[]},Qe={initialized:!1,enabled:!1};function St(lt){return Ie.get(lt)||Object.assign({},ve)}function _t(){return Qe}class De{constructor(Ze,ut,Et,kt,Dn){if(this.operation=Ze,this.retryPolicy=ut,this.getWaitDuration=Et,this.lowerBound=kt,this.upperBound=Dn,this.pending=null,this.nextErrorWaitInterval=kt,kt>Dn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ze){var ut=this;return(0,ke.Z)(function*(){ut.stop();try{ut.pending=new He.BH,yield function Je(lt){return new Promise(Ze=>{setTimeout(Ze,lt)})}(ut.getNextRun(Ze)),ut.pending.resolve(),yield ut.pending.promise,ut.pending=new He.BH,yield ut.operation(),ut.pending.resolve(),yield ut.pending.promise,ut.process(!0).catch(()=>{})}catch(Et){ut.retryPolicy(Et)?ut.process(!1).catch(()=>{}):ut.stop()}})()}getNextRun(Ze){if(Ze)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ut=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ut}}}const bt=new He.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ht(lt){if(!St(lt).activated)throw bt.create("use-before-activation",{appName:lt.name})}function En(lt,Ze){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,ke.Z)(function*({url:lt,body:Ze},ut){const Et={"Content-Type":"application/json"},kt=ut.getImmediate({optional:!0});if(kt){const ci=yield kt.getHeartbeatsHeader();ci&&(Et["X-Firebase-Client"]=ci)}const Dn={method:"POST",body:JSON.stringify(Ze),headers:Et};let Ir,Nn;try{Ir=yield fetch(lt,Dn)}catch(ci){throw bt.create("fetch-network-error",{originalErrorMessage:null==ci?void 0:ci.message})}if(200!==Ir.status)throw bt.create("fetch-status-error",{httpStatus:Ir.status});try{Nn=yield Ir.json()}catch(ci){throw bt.create("fetch-parse-error",{originalErrorMessage:null==ci?void 0:ci.message})}const hr=Nn.ttl.match(/^([\d.]+)(s)$/);if(!hr||!hr[2]||isNaN(Number(hr[1])))throw bt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Nn.ttl}`});const Di=1e3*Number(hr[1]),ms=Date.now();return{token:Nn.token,expireTimeMillis:ms+Di,issuedAtTimeMillis:ms}})).apply(this,arguments)}function Ot(lt,Ze){const{projectId:ut,appId:Et,apiKey:kt}=lt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${ut}/apps/${Et}:exchangeDebugToken?key=${kt}`,body:{debug_token:Ze}}}const cn="firebase-app-check-store";let tt=null;function Ce(){return tt||(tt=new Promise((lt,Ze)=>{try{const ut=indexedDB.open("firebase-app-check-database",1);ut.onsuccess=Et=>{lt(Et.target.result)},ut.onerror=Et=>{var kt;Ze(bt.create("storage-open",{originalErrorMessage:null===(kt=Et.target.error)||void 0===kt?void 0:kt.message}))},ut.onupgradeneeded=Et=>{0===Et.oldVersion&&Et.target.result.createObjectStore(cn,{keyPath:"compositeKey"})}}catch(ut){Ze(bt.create("storage-open",{originalErrorMessage:null==ut?void 0:ut.message}))}}),tt)}function pn(){return(pn=(0,ke.Z)(function*(lt,Ze){const Et=(yield Ce()).transaction(cn,"readwrite"),Dn=Et.objectStore(cn).put({compositeKey:lt,value:Ze});return new Promise((Ir,Nn)=>{Dn.onsuccess=hr=>{Ir()},Et.onerror=hr=>{var Di;Nn(bt.create("storage-set",{originalErrorMessage:null===(Di=hr.target.error)||void 0===Di?void 0:Di.message}))}})})).apply(this,arguments)}const _r=new nt.Yd("@firebase/app-check");function yn(lt,Ze){return(0,He.hl)()?function Ee(lt,Ze){return function Zt(lt,Ze){return pn.apply(this,arguments)}(function ur(lt){return`${lt.options.appId}-${lt.name}`}(lt),Ze)}(lt,Ze).catch(ut=>{_r.warn(`Failed to write token to IndexedDB. Error: ${ut}`)}):Promise.resolve()}function Vn(){return _t().enabled}function ti(){return Li.apply(this,arguments)}function Li(){return(Li=(0,ke.Z)(function*(){const lt=_t();if(lt.enabled&&lt.token)return lt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const We={error:"UNKNOWN_ERROR"};function ze(lt){return He.US.encodeString(JSON.stringify(lt),!1)}function ft(lt){return At.apply(this,arguments)}function At(){return(At=(0,ke.Z)(function*(lt,Ze=!1){const ut=lt.app;Ht(ut);const Et=St(ut);let Dn,kt=Et.token;if(kt&&!mr(kt)&&(Et.token=void 0,kt=void 0),!kt){const hr=yield Et.cachedTokenPromise;hr&&(mr(hr)?kt=hr:yield yn(ut,void 0))}if(!Ze&&kt&&mr(kt))return{token:kt.token};let Nn,Ir=!1;if(Vn()){Et.exchangeTokenPromise||(Et.exchangeTokenPromise=En(Ot(ut,yield ti()),lt.heartbeatServiceProvider).finally(()=>{Et.exchangeTokenPromise=void 0}),Ir=!0);const hr=yield Et.exchangeTokenPromise;return yield yn(ut,hr),Et.token=hr,{token:hr.token}}try{Et.exchangeTokenPromise||(Et.exchangeTokenPromise=Et.provider.getToken().finally(()=>{Et.exchangeTokenPromise=void 0}),Ir=!0),kt=yield St(ut).exchangeTokenPromise}catch(hr){"appCheck/throttled"===hr.code?_r.warn(hr.message):_r.error(hr),Dn=hr}return kt?Dn?Nn=mr(kt)?{token:kt.token,internalError:Dn}:rn(Dn):(Nn={token:kt.token},Et.token=kt,yield yn(ut,kt)):Nn=rn(Dn),Ir&&ar(ut,Nn),Nn})).apply(this,arguments)}function on(){return(on=(0,ke.Z)(function*(lt){const Ze=lt.app;Ht(Ze);const{provider:ut}=St(Ze);if(Vn()){const Et=yield ti(),{token:kt}=yield En(Ot(Ze,Et),lt.heartbeatServiceProvider);return{token:kt}}{const{token:Et}=yield ut.getToken();return{token:Et}}})).apply(this,arguments)}function Kn(lt,Ze){const ut=St(lt),Et=ut.tokenObservers.filter(kt=>kt.next!==Ze);0===Et.length&&ut.tokenRefresher&&ut.tokenRefresher.isRunning()&&ut.tokenRefresher.stop(),ut.tokenObservers=Et}function Un(lt){const{app:Ze}=lt,ut=St(Ze);let Et=ut.tokenRefresher;Et||(Et=function vi(lt){const{app:Ze}=lt;return new De((0,ke.Z)(function*(){let Et;if(Et=St(Ze).token?yield ft(lt,!0):yield ft(lt),Et.error)throw Et.error;if(Et.internalError)throw Et.internalError}),()=>!0,()=>{const ut=St(Ze);if(ut.token){let Et=ut.token.issuedAtTimeMillis+.5*(ut.token.expireTimeMillis-ut.token.issuedAtTimeMillis)+3e5;return Et=Math.min(Et,ut.token.expireTimeMillis-3e5),Math.max(0,Et-Date.now())}return 0},3e4,96e4)}(lt),ut.tokenRefresher=Et),!Et.isRunning()&&ut.isTokenAutoRefreshEnabled&&Et.start()}function ar(lt,Ze){const ut=St(lt).tokenObservers;for(const Et of ut)try{"EXTERNAL"===Et.type&&null!=Ze.error?Et.error(Ze.error):Et.next(Ze)}catch(kt){}}function mr(lt){return lt.expireTimeMillis-Date.now()>0}function rn(lt){return{token:ze(We),error:lt}}class Mr{constructor(Ze,ut){this.app=Ze,this.heartbeatServiceProvider=ut}_delete(){const{tokenObservers:Ze}=St(this.app);for(const ut of Ze)Kn(this.app,ut.next);return Promise.resolve()}}const Rt="app-check-internal";!function ln(){(0,je._registerComponent)(new Xe.wA("app-check",lt=>function Xn(lt,Ze){return new Mr(lt,Ze)}(lt.getProvider("app").getImmediate(),lt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((lt,Ze,ut)=>{lt.getProvider(Rt).initialize()})),(0,je._registerComponent)(new Xe.wA(Rt,lt=>function cr(lt){return{getToken:Ze=>ft(lt,Ze),getLimitedUseToken:()=>function Yt(lt){return on.apply(this,arguments)}(lt),addTokenListener:Ze=>function Dr(lt,Ze,ut,Et){const{app:kt}=lt,Dn=St(kt);if(Dn.tokenObservers=[...Dn.tokenObservers,{next:ut,error:Et,type:Ze}],Dn.token&&mr(Dn.token)){const Nn=Dn.token;Promise.resolve().then(()=>{ut({token:Nn.token}),Un(lt)}).catch(()=>{})}Dn.cachedTokenPromise.then(()=>Un(lt))}(lt,"INTERNAL",Ze),removeTokenListener:Ze=>Kn(lt.app,Ze)}}(lt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,je.registerVersion)("@firebase/app-check","0.8.0")}();class Kr{constructor(){return(0,y.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(hn,ct,U)=>{U.d(ct,{Ot:()=>ee,z6:()=>ie});var y=U(259);U(5e3);class ee{constructor(at){return at}}class ie{constructor(){return(0,y.C6)()}}},1205:(hn,ct,U)=>{U.d(ct,{zQ:()=>un,ww:()=>sn,rT:()=>Nt,f7:()=>En,L6:()=>Se,_Q:()=>Ht,lh:()=>Rn,Qv:()=>bt,nw:()=>Ln});var y=U(5e3),V=U(7579),ee=U(9646),ie=U(8306),ke=U(8996),je=U(6451),Xe=U(5363),He=U(3900),nt=U(4004),Ie=U(6063);class ve extends V.x{constructor(or=1/0,Mn=1/0,cn=Ie.l){super(),this._bufferSize=or,this._windowTime=Mn,this._timestampProvider=cn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Mn===1/0,this._bufferSize=Math.max(1,or),this._windowTime=Math.max(1,Mn)}next(or){const{isStopped:Mn,_buffer:cn,_infiniteTimeWindow:it,_timestampProvider:tt,_windowTime:Ce}=this;Mn||(cn.push(or),!it&&cn.push(tt.now()+Ce)),this._trimBuffer(),super.next(or)}_subscribe(or){this._throwIfClosed(),this._trimBuffer();const Mn=this._innerSubscribe(or),{_infiniteTimeWindow:cn,_buffer:it}=this,tt=it.slice();for(let Ce=0;Ce<tt.length&&!or.closed;Ce+=cn?1:2)or.next(tt[Ce]);return this._checkFinalizedStatuses(or),Mn}_trimBuffer(){const{_bufferSize:or,_timestampProvider:Mn,_buffer:cn,_infiniteTimeWindow:it}=this,tt=(it?1:2)*or;if(or<1/0&&tt<cn.length&&cn.splice(0,cn.length-tt),!it){const Ce=Mn.now();let Me=0;for(let Ee=1;Ee<cn.length&&cn[Ee]<=Ce;Ee+=2)Me=Ee;Me&&cn.splice(0,Me+1)}}}var Qe=U(3099);function St(Ot,or,Mn){let cn,it=!1;return Ot&&"object"==typeof Ot?({bufferSize:cn=1/0,windowTime:or=1/0,refCount:it=!1,scheduler:Mn}=Ot):cn=null!=Ot?Ot:1/0,(0,Qe.B)({connector:()=>new ve(cn,or,Mn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:it})}var vt=U(590),_t=U(576);function Vt(Ot,or){return(0,_t.m)(or)?(0,He.w)(()=>Ot,or):(0,He.w)(()=>Ot)}var dt=U(9468),ot=U(9300),Ge=U(4976),qt=U(2011),at=U(9808),De=U(6215),Je=U(9260);const bt=new y.OlP("angularfire2.auth.use-emulator"),Se=new y.OlP("angularfire2.auth.settings"),Ht=new y.OlP("angularfire2.auth.tenant-id"),Nt=new y.OlP("angularfire2.auth.langugage-code"),Rn=new y.OlP("angularfire2.auth.use-device-language"),En=new y.OlP("angularfire.auth.persistence"),Ln=(Ot,or,Mn,cn,it,tt,Ce,Me)=>(0,qt.cc)(`${Ot.name}.auth`,"AngularFireAuth",Ot.name,()=>{const Ee=or.runOutsideAngular(()=>Ot.auth());if(Mn&&Ee.useEmulator(...Mn),cn&&(Ee.tenantId=cn),Ee.languageCode=it,tt&&Ee.useDeviceLanguage(),Ce)for(const[Ne,st]of Object.entries(Ce))Ee.settings[Ne]=st;return Me&&Ee.setPersistence(Me),Ee},[Mn,cn,it,tt,Ce,Me]);let un=(()=>{class Ot{constructor(Mn,cn,it,tt,Ce,Me,Ee,Ne,st,Zt,pn,wn){const kn=new V.x,ur=(0,ee.of)(void 0).pipe((0,Xe.Q)(Ce.outsideAngular),(0,He.w)(()=>tt.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,nt.U)(()=>(0,qt.on)(Mn,tt,cn)),(0,nt.U)(_r=>Ln(_r,tt,Me,Ne,st,Zt,Ee,pn)),St({bufferSize:1,refCount:!1}));if((0,at.PM)(it))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{ur.pipe((0,vt.P)()).subscribe();const jn=ur.pipe((0,He.w)(nr=>nr.getRedirectResult().then(On=>On,()=>null)),Ge.iC,St({bufferSize:1,refCount:!1})),Jn=ur.pipe((0,He.w)(nr=>new ie.y(On=>({unsubscribe:tt.runOutsideAngular(()=>nr.onAuthStateChanged(Vn=>On.next(Vn),Vn=>On.error(Vn),()=>On.complete()))})))),yn=ur.pipe((0,He.w)(nr=>new ie.y(On=>({unsubscribe:tt.runOutsideAngular(()=>nr.onIdTokenChanged(Vn=>On.next(Vn),Vn=>On.error(Vn),()=>On.complete()))}))));this.authState=jn.pipe(Vt(Jn),(0,dt.R)(Ce.outsideAngular),(0,Xe.Q)(Ce.insideAngular)),this.user=jn.pipe(Vt(yn),(0,dt.R)(Ce.outsideAngular),(0,Xe.Q)(Ce.insideAngular)),this.idToken=this.user.pipe((0,He.w)(nr=>nr?(0,ke.D)(nr.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,He.w)(nr=>nr?(0,ke.D)(nr.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,je.T)(jn,kn,this.authState.pipe((0,ot.h)(nr=>!nr))).pipe((0,nt.U)(nr=>(null==nr?void 0:nr.user)?nr:null),(0,dt.R)(Ce.outsideAngular),(0,Xe.Q)(Ce.insideAngular))}return(0,qt.pX)(this,ur,tt,{spy:{apply:(_r,jn,Jn)=>{(_r.startsWith("signIn")||_r.startsWith("createUser"))&&Jn.then(yn=>kn.next(yn))}}})}}return Ot.\u0275fac=function(Mn){return new(Mn||Ot)(y.LFG(qt.Dh),y.LFG(qt.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Ge.HU),y.LFG(bt,8),y.LFG(Se,8),y.LFG(Ht,8),y.LFG(Nt,8),y.LFG(Rn,8),y.LFG(En,8),y.LFG(De.nm,8))},Ot.\u0275prov=y.Yz7({token:Ot,factory:Ot.\u0275fac,providedIn:"any"}),Ot})(),sn=(()=>{class Ot{constructor(){Je.Z.registerVersion("angularfire",Ge.q4.full,"auth-compat")}}return Ot.\u0275fac=function(Mn){return new(Mn||Ot)},Ot.\u0275mod=y.oAB({type:Ot}),Ot.\u0275inj=y.cJS({providers:[un]}),Ot})()},1762:(hn,ct,U)=>{U.d(ct,{ST:()=>y_,yb:()=>w0});var y=U(5e3),V=U(4986),ee=U(8306),ie=U(8996),ke=U(9646),je=U(4976),Xe=U(8675),He=U(4482),nt=U(5403);function Ie(){return(0,He.e)((r,e)=>{let t,s=!1;r.subscribe((0,nt.x)(e,a=>{const d=t;t=a,s&&e.next([d,a]),s=!0}))})}var Se,ve=U(4004),Qe=U(5026),St=U(1884),vt=U(9300),_t=U(2011),Vt=U(9808),ot=(U(9568),U(3942)),Ge=U(5861),qt=U(6881),at=U(4859),De=U(1877),Je=U(2090),Ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bt={},Ht=Ht||{},Nt=Ct||self;function Rn(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function En(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var un="closure_uid_"+(1e9*Math.random()>>>0),sn=0;function Ot(r,e,t){return r.call.apply(r.bind,arguments)}function or(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function Mn(r,e,t){return(Mn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ot:or).apply(null,arguments)}function cn(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function it(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,d){for(var g=Array(arguments.length-2),R=2;R<arguments.length;R++)g[R-2]=arguments[R];return e.prototype[a].apply(s,g)}}function tt(){this.s=this.s,this.o=this.o}tt.prototype.s=!1,tt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ln(r){Object.prototype.hasOwnProperty.call(r,un)&&r[un]||(r[un]=++sn)}(this)},tt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Me=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Ee(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function Ne(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Rn(s)){const a=r.length||0,d=s.length||0;r.length=a+d;for(let g=0;g<d;g++)r[a+g]=s[g]}else r.push(s)}}function st(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Nt.addEventListener("test",()=>{},e),Nt.removeEventListener("test",()=>{},e)}catch(t){}return r}();function pn(r){return/^[\s\xa0]*$/.test(r)}function wn(){var r=Nt.navigator;return r&&(r=r.userAgent)?r:""}function kn(r){return-1!=wn().indexOf(r)}function ur(r){return ur[" "](r),r}ur[" "]=function(){};var Li,r,jn=kn("Opera"),Jn=kn("Trident")||kn("MSIE"),yn=kn("Edge"),nr=yn||Jn,On=kn("Gecko")&&!(-1!=wn().toLowerCase().indexOf("webkit")&&!kn("Edge"))&&!(kn("Trident")||kn("MSIE"))&&!kn("Edge"),Vn=-1!=wn().toLowerCase().indexOf("webkit")&&!kn("Edge");function ti(){var r=Nt.document;return r?r.documentMode:void 0}e:{var xt="",We=(r=wn(),On?/rv:([^\);]+)(\)|;)/.exec(r):yn?/Edge\/([\d\.]+)/.exec(r):Jn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Vn?/WebKit\/(\S+)/.exec(r):jn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(We&&(xt=We?We[1]:""),Jn){var ze=ti();if(null!=ze&&ze>parseFloat(xt)){Li=String(ze);break e}}Li=xt}var Yt=Nt.document&&Jn&&(ti()||parseInt(Li,10))||void 0;function on(r,e){if(st.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(On){e:{try{ur(e.nodeName);var a=!0;break e}catch(d){}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Dr[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&on.$.h.call(this)}}it(on,st);var Dr={2:"touch",3:"pen",4:"mouse"};on.prototype.h=function(){on.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Kn="closure_listenable_"+(1e6*Math.random()|0),Un=0;function vi(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Un,this.fa=this.ia=!1}function ar(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function mr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Mr(r){const e={};for(const t in r)e[t]=r[t];return e}const Xn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cr(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let d=0;d<Xn.length;d++)t=Xn[d],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Qn(r){this.src=r,this.g={},this.h=0}function Nr(r,e){var t=e.type;if(t in r.g){var d,s=r.g[t],a=Me(s,e);(d=0<=a)&&Array.prototype.splice.call(s,a,1),d&&(ar(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function jr(r,e,t,s){for(var a=0;a<r.length;++a){var d=r[a];if(!d.fa&&d.listener==e&&d.capture==!!t&&d.la==s)return a}return-1}Qn.prototype.add=function(r,e,t,s,a){var d=r.toString();(r=this.g[d])||(r=this.g[d]=[],this.h++);var g=jr(r,e,s,a);return-1<g?(e=r[g],t||(e.ia=!1)):((e=new vi(e,this.src,d,!!s,a)).ia=t,r.push(e)),e};var ni="closure_lm_"+(1e6*Math.random()|0),Vi={};function Mi(r,e,t,s,a){if(s&&s.once)return Pe(r,e,t,s,a);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Mi(r,e[d],t,s,a);return null}return t=pt(t),r&&r[Kn]?r.O(e,t,En(s)?!!s.capture:!!s,a):Br(r,e,t,!1,s,a)}function Br(r,e,t,s,a,d){if(!e)throw Error("Invalid event type");var g=En(a)?!!a.capture:!!a,R=se(r);if(R||(r[ni]=R=new Qn(r)),(t=R.add(e,t,s,g,d)).proxy)return t;if(s=function Ue(){const e=te;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Zt||(a=g),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(z(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function Pe(r,e,t,s,a){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Pe(r,e[d],t,s,a);return null}return t=pt(t),r&&r[Kn]?r.P(e,t,En(s)?!!s.capture:!!s,a):Br(r,e,t,!0,s,a)}function me(r,e,t,s,a){if(Array.isArray(e))for(var d=0;d<e.length;d++)me(r,e[d],t,s,a);else s=En(s)?!!s.capture:!!s,t=pt(t),r&&r[Kn]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=jr(d=r.g[e],t,s,a))&&(ar(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete r.g[e],r.h--))):r&&(r=se(r))&&(e=r.g[e.toString()],r=-1,e&&(r=jr(e,t,s,a)),(t=-1<r?e[r]:null)&&ye(t))}function ye(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[Kn])Nr(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(z(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=se(e))?(Nr(t,r),0==t.h&&(t.src=null,e[ni]=null)):ar(r)}}}function z(r){return r in Vi?Vi[r]:Vi[r]="on"+r}function te(r,e){if(r.fa)r=!0;else{e=new on(e,this);var t=r.listener,s=r.la||r.src;r.ia&&ye(r),r=t.call(s,e)}return r}function se(r){return(r=r[ni])instanceof Qn?r:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function pt(r){return"function"==typeof r?r:(r[xe]||(r[xe]=function(e){return r.handleEvent(e)}),r[xe])}function Bt(){tt.call(this),this.i=new Qn(this),this.S=this,this.J=null}function an(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new st(e,r);else if(e instanceof st)e.target=e.target||r;else{var a=e;cr(e=new st(s,r),a)}if(a=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];a=Sn(g,s,!0,e)&&a}if(a=Sn(g=e.g=r,s,!0,e)&&a,a=Sn(g,s,!1,e)&&a,t)for(d=0;d<t.length;d++)a=Sn(g=e.g=t[d],s,!1,e)&&a}function Sn(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.fa&&g.capture==t){var R=g.listener,G=g.la||g.src;g.ia&&Nr(r.i,g),a=!1!==R.call(G,s)&&a}}return a&&!s.defaultPrevented}it(Bt,tt),Bt.prototype[Kn]=!0,Bt.prototype.removeEventListener=function(r,e,t,s){me(this,r,e,t,s)},Bt.prototype.N=function(){if(Bt.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)ar(t[s]);delete r.g[e],r.h--}}this.J=null},Bt.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Bt.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var gr=Nt.JSON.stringify;function ai(){var r=rr;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Tt=new class tr{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mt,r=>r.reset());class mt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ut(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function Rt(r){Nt.setTimeout(()=>{throw r},0)}let ln,bn=!1,rr=new class Ci{constructor(){this.h=this.g=null}add(e,t){const s=Tt.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Kr=()=>{const r=Nt.Promise.resolve(void 0);ln=()=>{r.then(yr)}};var yr=()=>{for(var r;r=ai();){try{r.h.call(r.g)}catch(t){Rt(t)}var e=Tt;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}bn=!1};function ri(r,e){Bt.call(this),this.h=r||1,this.g=e||Nt,this.j=Mn(this.qb,this),this.l=Date.now()}function Hr(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function gs(r,e,t){if("function"==typeof r)t&&(r=Mn(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Mn(r.handleEvent,r)}return 2147483647<Number(e)?-1:Nt.setTimeout(r,e||0)}function Ps(r){r.g=gs(()=>{r.g=null,r.i&&(r.i=!1,Ps(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}it(ri,Bt),(Se=ri.prototype).ga=!1,Se.T=null,Se.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),an(this,"tick"),this.ga&&(Hr(this),this.start()))}},Se.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Se.N=function(){ri.$.N.call(this),Hr(this),delete this.g};class lr extends tt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ps(this)}N(){super.N(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(r){tt.call(this),this.h=r,this.g={}}it(bi,tt);var os=[];function Ys(r,e,t,s){Array.isArray(t)||(t&&(os[0]=t.toString()),t=os);for(var a=0;a<t.length;a++){var d=Mi(e,t[a],s||r.handleEvent,!1,r.h||r);if(!d)break;r.g[d.key]=d}}function Cr(r){mr(r.g,function(e,t){this.g.hasOwnProperty(t)&&ye(e)},r),r.g={}}function _n(){this.g=!0}function dr(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lt(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var d=a[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<a.length;g++)a[g]=""}}}return gr(t)}catch(R){return e}}(r,t)+(s?" "+s:"")})}bi.prototype.N=function(){bi.$.N.call(this),Cr(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_n.prototype.Ea=function(){this.g=!1},_n.prototype.info=function(){};var Ze={},ut=null;function Et(){return ut=ut||new Bt}function kt(r){st.call(this,Ze.Ta,r)}function Dn(r){const e=Et();an(e,new kt(e))}function Ir(r,e){st.call(this,Ze.STAT_EVENT,r),this.stat=e}function Nn(r){const e=Et();an(e,new Ir(e,r))}function hr(r,e){st.call(this,Ze.Ua,r),this.size=e}function Di(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){r()},e)}Ze.Ta="serverreachability",it(kt,st),Ze.STAT_EVENT="statevent",it(Ir,st),Ze.Ua="timingevent",it(hr,st);var ms={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ci={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ei(){}function js(){}ei.prototype.h=null;var yo,Ui={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mo(){st.call(this,"d")}function Ro(){st.call(this,"c")}function na(){}function ys(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new bi(this),this.P=Os,this.V=new ri(r=nr?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Wo}function Wo(){this.i=null,this.g="",this.h=!1}it(mo,st),it(Ro,st),it(na,ei),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},yo=new na;var Os=45e3,Tr={},Ss={};function oo(r,e,t){r.L=1,r.v=Oi($r(e)),r.s=t,r.S=!0,ra(r,null)}function ra(r,e){r.G=Date.now(),Oo(r),r.A=$r(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),gn(t.i,"t",s),r.C=0,t=r.l.J,r.h=new Wo,r.g=Ia(r.l,t?e:null,!r.s),0<r.O&&(r.M=new lr(Mn(r.Pa,r,r.g),r.O)),Ys(r.U,r.g,"readystatechange",r.nb),e=r.I?Mr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Dn(),function er(r,e,t,s,a,d){r.info(function(){if(r.g)if(d)for(var g="",R=d.split("&"),G=0;G<R.length;G++){var X=R[G].split("=");if(1<X.length){var ge=X[0];X=X[1];var $e=ge.split("_");g=2<=$e.length&&"type"==$e[1]?g+(ge+"=")+X+"&":g+(ge+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+g})}(r.j,r.u,r.A,r.m,r.W,r.s)}function xi(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function As(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=Bi(r,t),a==Ss){4==e&&(r.o=4,Nn(14),s=!1),dr(r.j,r.m,null,"[Incomplete Response]");break}if(a==Tr){r.o=4,Nn(15),dr(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}dr(r.j,r.m,a,null),_s(r,a)}xi(r)&&a!=Ss&&a!=Tr&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Nn(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),ca(e),e.M=!0,Nn(11))):(dr(r.j,r.m,t,"[Invalid Chunked Response]"),ji(r),as(r))}function Bi(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Ss:(t=Number(e.substring(t,s)),isNaN(t)?Tr:(s+=1)+t>e.length?Ss:(e=e.slice(s,s+t),r.C=s+t,e))}function Oo(r){r.Y=Date.now()+r.P,qr(r,r.P)}function qr(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Di(Mn(r.lb,r),e)}function _o(r){r.B&&(Nt.clearTimeout(r.B),r.B=null)}function as(r){0==r.l.H||r.J||eo(r.l,r)}function ji(r){_o(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,Hr(r.V),Cr(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function _s(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||ao(t.i,r)))if(!r.K&&ao(t.i,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch(X){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Di(Mn(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<r.G))break e;Ei(t),Ni(t)}lo(t),Nn(18)}if(1>=li(t.i)&&t.oa){try{t.oa()}catch(X){}t.oa=void 0}}else Is(t,11)}else if((r.K||t.g==r)&&Ei(t),!pn(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let X=a[e];if(t.V=X[0],X=X[1],2==t.H)if("c"==X[0]){t.K=X[1],t.pa=X[2];const ge=X[3];null!=ge&&(t.ra=ge,t.l.info("VER="+t.ra));const $e=X[4];null!=$e&&(t.Ga=$e,t.l.info("SVER="+t.Ga));const It=X[5];null!=It&&"number"==typeof It&&0<It&&(t.L=s=1.5*It,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const Gt=r.g;if(Gt){const In=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(In){var d=s.i;d.g||-1==In.indexOf("spdy")&&-1==In.indexOf("quic")&&-1==In.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(di(d,d.h),d.h=null))}if(s.F){const Hn=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hn&&(s.Da=Hn,ii(s.I,s.F,Hn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var g=r;if((s=t).wa=da(s,s.J?s.pa:null,s.Y),g.K){ir(s.i,g);var R=g,G=s.L;G&&R.setTimeout(G),R.B&&(_o(R),Oo(R)),s.g=g}else il(s);0<t.j.length&&Mo(t)}else"stop"!=X[0]&&"close"!=X[0]||Is(t,7);else 3==t.H&&("stop"==X[0]||"close"==X[0]?"stop"==X[0]?Is(t,7):qi(t):"noop"!=X[0]&&t.h&&t.h.Aa(X),t.A=0)}Dn()}catch(X){}}function Cs(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Rn(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function ws(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if("undefined"!=typeof Map&&r instanceof Map)return Array.from(r.keys());if(!("undefined"!=typeof Set&&r instanceof Set)){if(Rn(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function zo(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if("undefined"!=typeof Map&&r instanceof Map||"undefined"!=typeof Set&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Rn(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,d=0;d<a;d++)e.call(void 0,s[d],t&&t[d],r)}(Se=ys.prototype).setTimeout=function(r){this.P=r},Se.nb=function(r){r=r.target;const e=this.M;e&&3==Gr(r)?e.l():this.Pa(r)},Se.Pa=function(r){try{if(r==this.g)e:{const ge=Gr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ge)&&(3!=ge||nr||this.g&&(this.h.h||this.g.ja()||hi(this.g)))){this.J||4!=ge||7==e||Dn(),_o(this);var t=this.g.da();this.ca=t;t:if(xi(this)){var s=hi(this.g);r="";var a=s.length,d=4==Gr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ji(this),as(this);var g="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:d&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==t,function Xi(r,e,t,s,a,d,g){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.W,ge,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pn(R)){var X=R;break t}}X=null}if(!(t=X)){this.i=!1,this.o=3,Nn(12),ji(this),as(this);break e}dr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_s(this,t)}this.S?(As(this,ge,g),nr&&this.i&&3==ge&&(Ys(this.U,this.V,"tick",this.mb),this.V.start())):(dr(this.j,this.m,g,null),_s(this,g)),4==ge&&ji(this),this.i&&!this.J&&(4==ge?eo(this.l,this):(this.i=!1,Oo(this)))}else(function Qr(r){const e={};r=(r.g&&2<=Gr(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<r.length;s++){if(pn(r[s]))continue;var t=Ut(r[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const d=e[a]||[];e[a]=d,d.push(t)}!function rn(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<g.indexOf("Unknown SID")?(this.o=3,Nn(12)):(this.o=0,Nn(13)),ji(this),as(this)}}}catch(ge){}},Se.mb=function(){if(this.g){var r=Gr(this.g),e=this.g.ja();this.C<e.length&&(_o(this),As(this,r,e),this.i&&4!=r&&Oo(this))}},Se.cancel=function(){this.J=!0,ji(this)},Se.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Xr(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Dn(),Nn(17)),ji(this),this.o=2,as(this)):qr(this,this.Y-r)};var Qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ns(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof ns){this.h=r.h,Js(this,r.j),this.s=r.s,this.g=r.g,ls(this,r.m),this.l=r.l;var e=r.i,t=new he;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Zr(this,t),this.o=r.o}else r&&(e=String(r).match(Qs))?(this.h=!1,Js(this,e[1]||"",!0),this.s=Si(e[2]||""),this.g=Si(e[3]||"",!0),ls(this,e[4]),this.l=Si(e[5]||"",!0),Zr(this,e[6]||"",!0),this.o=Si(e[7]||"")):(this.h=!1,this.i=new he(null,this.h))}function $r(r){return new ns(r)}function Js(r,e,t){r.j=t?Si(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function ls(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Zr(r,e,t){e instanceof he?(r.i=e,function br(r,e){e&&!r.j&&(Fe(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Pt(this,s),gn(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Pi(e,le)),r.i=new he(e,r.h))}function ii(r,e,t){r.i.set(e,t)}function Oi(r){return ii(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Si(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Pi(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Hs),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Hs(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}ns.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Pi(e,$s,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Pi(e,$s,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Pi(t,"/"==t.charAt(0)?L:si,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Pi(t,$)),r.join("")};var $s=/[#\/\?@]/g,si=/[#\?:]/g,L=/[#\?]/g,le=/[#\?@]/g,$=/#/g;function he(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Fe(r){r.g||(r.g=new Map,r.h=0,r.i&&function vo(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var d=r[t].substring(0,s);a=r[t].substring(s+1)}else d=r[t];e(d,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Pt(r,e){Fe(r),e=vr(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function Kt(r,e){return Fe(r),e=vr(r,e),r.g.has(e)}function gn(r,e,t){Pt(r,e),0<t.length&&(r.i=null,r.g.set(vr(r,e),Ee(t)),r.h+=t.length)}function vr(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Sr(r){this.l=r||wi,r=Nt.PerformanceNavigationTiming?0<(r=Nt.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ka&&Nt.g.Ka()&&Nt.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Se=he.prototype).add=function(r,e){Fe(this),this.i=null,r=vr(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Se.forEach=function(r,e){Fe(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},Se.ta=function(){Fe(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let d=0;d<a.length;d++)t.push(e[s])}return t},Se.Z=function(r){Fe(this);let e=[];if("string"==typeof r)Kt(this,r)&&(e=e.concat(this.g.get(vr(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},Se.set=function(r,e){return Fe(this),this.i=null,Kt(this,r=vr(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Se.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},Se.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const d=encodeURIComponent(String(s)),g=this.Z(s);for(s=0;s<g.length;s++){var a=d;""!==g[s]&&(a+="="+encodeURIComponent(String(g[s]))),r.push(a)}}return this.i=r.join("&")};var wi=10;function _i(r){return!!r.h||!!r.g&&r.g.size>=r.j}function li(r){return r.h?1:r.g?r.g.size:0}function ao(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function di(r,e){r.g?r.g.add(e):r.h=e}function ir(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Rs(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Ee(r.i)}function ks(){this.g=new class{stringify(r){return Nt.JSON.stringify(r,void 0)}parse(r){return Nt.JSON.parse(r,void 0)}}}function Eo(r,e,t){const s=t||"";try{Cs(r,function(a,d){let g=a;En(a)&&(g=gr(a)),e.push(s+d+"="+encodeURIComponent(g))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function j(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(d){}}function F(r){this.l=r.fc||null,this.j=r.ob||!1}function ue(r,e){Bt.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=Be,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sr.prototype.cancel=function(){if(this.i=Rs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},it(F,ei),F.prototype.g=function(){return new ue(this.l,this.j)},F.prototype.i=function(r){return function(){return r}}({}),it(ue,Bt);var Be=0;function Xt(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function Yr(r){r.readyState=4,r.l=null,r.j=null,r.A=null,W(r)}function W(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Se=ue.prototype).open=function(r,e){if(this.readyState!=Be)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,W(this)},Se.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Nt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yr(this)),this.readyState=Be},Se.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,W(this)),this.g&&(this.readyState=3,W(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xt(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},Se.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?Yr(this):W(this),3==this.readyState&&Xt(this)}},Se.Za=function(r){this.g&&(this.response=this.responseText=r,Yr(this))},Se.Ya=function(r){this.g&&(this.response=r,Yr(this))},Se.ka=function(){this.g&&Yr(this)},Se.setRequestHeader=function(r,e){this.v.append(r,e)},Se.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Se.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(ue.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var K=Nt.JSON.parse;function pe(r){Bt.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=be,this.L=this.M=!1}it(pe,Bt);var be="",Ke=/^https?$/i,yt=["POST","PUT"];function Fn(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,xn(r),Bn(r)}function xn(r){r.F||(r.F=!0,an(r,"complete"),an(r,"error"))}function sr(r){if(r.h&&void 0!==Ht&&(!r.C[1]||4!=Gr(r)||2!=r.da()))if(r.v&&4==Gr(r))gs(r.La,0,r);else if(an(r,"readystatechange"),4==Gr(r)){r.h=!1;try{const g=r.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===g){var a=String(r.I).match(Qs)[1]||null;!a&&Nt.self&&Nt.self.location&&(a=Nt.self.location.protocol.slice(0,-1)),s=!Ke.test(a?a.toLowerCase():"")}t=s}if(t)an(r,"complete"),an(r,"success");else{r.m=6;try{var d=2<Gr(r)?r.g.statusText:""}catch(R){d=""}r.j=d+" ["+r.da()+"]",xn(r)}}finally{Bn(r)}}}function Bn(r,e){if(r.g){oi(r);const t=r.g,s=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||an(r,"ready");try{t.onreadystatechange=s}catch(a){}}}function oi(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Nt.clearTimeout(r.A),r.A=null)}function Gr(r){return r.g?r.g.readyState:0}function hi(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case be:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hi(r){let e="";return mr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Jr(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Hi(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ii(r,e,t))}function es(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Ki(r){this.Ga=0,this.j=[],this.l=new _n,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=es("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=es("baseRetryDelayMs",5e3,r),this.hb=es("retryDelaySeedMs",1e4,r),this.eb=es("forwardChannelMaxRetries",2,r),this.xa=es("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new Sr(r&&r.concurrentRequestLimit),this.Ja=new ks,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qi(r){if(Gs(r),3==r.H){var e=r.W++,t=$r(r.I);if(ii(t,"SID",r.K),ii(t,"RID",e),ii(t,"TYPE","terminate"),Xs(r,t),(e=new ys(r,r.l,e)).L=2,e.v=Oi($r(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon)try{t=Nt.navigator.sendBeacon(e.v.toString(),"")}catch(s){}!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ia(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Oo(e)}Ai(r)}function Ni(r){r.g&&(ca(r),r.g.cancel(),r.g=null)}function Gs(r){Ni(r),r.u&&(Nt.clearTimeout(r.u),r.u=null),Ei(r),r.i.cancel(),r.m&&("number"==typeof r.m&&Nt.clearTimeout(r.m),r.m=null)}function Mo(r){if(!_i(r.i)&&!r.m){r.m=!0;var e=r.Na;ln||Kr(),bn||(ln(),bn=!0),rr.add(e,r),r.C=0}}function wo(r,e){var t;t=e?e.m:r.W++;const s=$r(r.I);ii(s,"SID",r.K),ii(s,"RID",t),ii(s,"AID",r.V),Xs(r,s),r.o&&r.s&&Jr(s,r.o,r.s),t=new ys(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=us(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),di(r.i,t),oo(t,s,e)}function Xs(r,e){r.na&&mr(r.na,function(t,s){ii(e,s,t)}),r.h&&Cs({},function(t,s){ii(e,s,t)})}function us(r,e,t){t=Math.min(r.j.length,t);var s=r.h?Mn(r.h.Va,r.h,r):null;e:{var a=r.j;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=a[0].g,g.push("ofs="+d)):d=0:g.push("ofs="+d);let R=!0;for(let G=0;G<t;G++){let X=a[G].g;const ge=a[G].map;if(X-=d,0>X)d=Math.max(0,a[G].g-100),R=!1;else try{Eo(ge,g,"req"+X+"_")}catch($e){s&&s(ge)}}if(R){s=g.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,s}function il(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;ln||Kr(),bn||(ln(),bn=!0),rr.add(e,r),r.A=0}}function lo(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Di(Mn(r.Ma,r),cs(r,r.A)),r.A++,0))}function ca(r){null!=r.B&&(Nt.clearTimeout(r.B),r.B=null)}function ia(r){r.g=new ys(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=$r(r.wa);ii(e,"RID","rpc"),ii(e,"SID",r.K),ii(e,"AID",r.V),ii(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&ii(e,"TO",r.qa),ii(e,"TYPE","xmlhttp"),Xs(r,e),r.o&&r.s&&Jr(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.v=Oi($r(e)),t.s=null,t.S=!0,ra(t,r)}function Ei(r){null!=r.v&&(Nt.clearTimeout(r.v),r.v=null)}function eo(r,e){var t=null;if(r.g==e){Ei(r),ca(r),r.g=null;var s=2}else{if(!ao(r.i,e))return;t=e.F,ir(r.i,e),s=1}if(0!=r.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;an(s=Et(),new hr(s,t)),Mo(r)}else il(r);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function Fo(r,e){return!(li(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Di(Mn(r.Na,r,e),cs(r,r.C)),r.C++,0)))}(r,e)||2==s&&lo(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),a){case 1:Is(r,5);break;case 4:Is(r,10);break;case 3:Is(r,6);break;default:Is(r,2)}}function cs(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function Is(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var s=Mn(r.pb,r);t||(t=new ns("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Js(t,"https"),Oi(t)),function q(r,e){const t=new _n;if(Nt.Image){const s=new Image;s.onload=cn(j,t,s,"TestLoadImage: loaded",!0,e),s.onerror=cn(j,t,s,"TestLoadImage: error",!1,e),s.onabort=cn(j,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=cn(j,t,s,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else Nn(2);r.H=0,r.h&&r.h.za(e),Ai(r),Gs(r)}function Ai(r){if(r.H=0,r.ma=[],r.h){const e=Rs(r.i);(0!=e.length||0!=r.j.length)&&(Ne(r.ma,e),Ne(r.ma,r.j),r.i.i.length=0,Ee(r.j),r.j.length=0),r.h.ya()}}function da(r,e,t){var s=t instanceof ns?$r(t):new ns(t);if(""!=s.g)e&&(s.g=e+"."+s.g),ls(s,s.m);else{var a=Nt.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var d=new ns(null);s&&Js(d,s),e&&(d.g=e),a&&ls(d,a),t&&(d.l=t),s=d}return e=r.Da,(t=r.F)&&e&&ii(s,t,e),ii(s,"VER",r.ra),Xs(r,s),s}function Ia(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pe(t&&r.Ha&&!r.va?new F({ob:!0}):r.va)).Oa(r.J),e}function El(){}function Co(){if(Jn&&!(10<=Number(Yt)))throw Error("Environmental error: no available transport.")}function to(r,e){Bt.call(this),this.g=new Ki(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!pn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Io(this)}function xo(r){mo.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Ta(){Ro.call(this),this.status=1}function Io(r){this.g=r}function no(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function sl(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var d=r.g[3],g=(e=r.g[0])+(d^(t=r.g[1])&((a=r.g[2])^d))+s[0]+3614090360&4294967295;g=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=t+(g<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(a^d&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(t^a^d)+s[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(a^(t|~d))+s[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(a^(t|~d))+s[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(a^(t|~d))+s[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((d=(e=t+((g=e+(a^(t|~d))+s[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((a=d+((g=a+(e^(d|~t))+s[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(g<<21&4294967295|g>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+d&4294967295}function fi(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var d=0|r[a];s&&d==e||(t[a]=d,s=!1)}this.g=t}(Se=pe.prototype).Oa=function(r){this.M=r},Se.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yo.g(),this.C=function Ns(r){return r.h||(r.h=r.i())}(this.u?this.u:yo),this.g.onreadystatechange=Mn(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(d){return void Fn(this,d)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const d of s.keys())t.set(d,s.get(d))}s=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),a=Nt.FormData&&r instanceof Nt.FormData,!(0<=Me(yt,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,g]of t)this.g.setRequestHeader(d,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{oi(this),0<this.B&&((this.L=function en(r){return Jn&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mn(this.ua,this)):this.A=gs(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(d){Fn(this,d)}},Se.ua=function(){void 0!==Ht&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,an(this,"timeout"),this.abort(8))},Se.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,an(this,"complete"),an(this,"abort"),Bn(this))},Se.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bn(this,!0)),pe.$.N.call(this)},Se.La=function(){this.s||(this.G||this.v||this.l?sr(this):this.kb())},Se.kb=function(){sr(this)},Se.isActive=function(){return!!this.g},Se.da=function(){try{return 2<Gr(this)?this.g.status:-1}catch(r){return-1}},Se.ja=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},Se.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),K(e)}},Se.Ia=function(){return this.m},Se.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Se=Ki.prototype).ra=8,Se.H=1,Se.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new ys(this,this.l,r);let d=this.s;if(this.U&&(d?(d=Mr(d),cr(d,this.U)):d=this.U),null!==this.o||this.O||(a.I=d,d=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=us(this,a,e),ii(t=$r(this.I),"RID",r),ii(t,"CVER",22),this.F&&ii(t,"X-HTTP-Session-Id",this.F),Xs(this,t),d&&(this.O?e="headers="+encodeURIComponent(String(Hi(d)))+"&"+e:this.o&&Jr(t,this.o,d)),di(this.i,a),this.bb&&ii(t,"TYPE","init"),this.P?(ii(t,"$req",e),ii(t,"SID","null"),a.aa=!0,oo(a,t,null)):oo(a,t,e),this.H=2}}else 3==this.H&&(r?wo(this,r):0==this.j.length||_i(this.i)||wo(this))},Se.Ma=function(){if(this.u=null,ia(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=Di(Mn(this.jb,this),r)}},Se.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nn(10),Ni(this),ia(this))},Se.ib=function(){null!=this.v&&(this.v=null,Ni(this),lo(this),Nn(19))},Se.pb=function(r){r?(this.l.info("Successfully pinged google.com"),Nn(2)):(this.l.info("Failed to ping google.com"),Nn(1))},Se.isActive=function(){return!!this.h&&this.h.isActive(this)},(Se=El.prototype).Ba=function(){},Se.Aa=function(){},Se.za=function(){},Se.ya=function(){},Se.isActive=function(){return!0},Se.Va=function(){},Co.prototype.g=function(r,e){return new to(r,e)},it(to,Bt),to.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;Nn(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=da(r,null,r.Y),Mo(r)},to.prototype.close=function(){qi(this.g)},to.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=gr(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&Mo(e)},to.prototype.N=function(){this.g.h=null,delete this.j,qi(this.g),delete this.g,to.$.N.call(this)},it(xo,mo),it(Ta,Ro),it(Io,El),Io.prototype.Ba=function(){an(this.g,"a")},Io.prototype.Aa=function(r){an(this.g,new xo(r))},Io.prototype.za=function(r){an(this.g,new Ta)},Io.prototype.ya=function(){an(this.g,"b")},it(no,function rs(){this.blockSize=-1}),no.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},no.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,d=0;d<e;){if(0==a)for(;d<=t;)sl(this,r,d),d+=this.blockSize;if("string"==typeof r){for(;d<e;)if(s[a++]=r.charCodeAt(d++),a==this.blockSize){sl(this,s),a=0;break}}else for(;d<e;)if(s[a++]=r[d++],a==this.blockSize){sl(this,s),a=0;break}}this.h=a,this.i+=e},no.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var ds={};function uo(r){return-128<=r&&128>r?function _r(r,e){var t=ds;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new fi([0|e],0>e?-1:0)}):new fi([0|r],0>r?-1:0)}function To(r){if(isNaN(r)||!isFinite(r))return Da;if(0>r)return $i(To(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=ba;return new fi(e,0)}var ba=4294967296,Da=uo(0),Wa=uo(1),au=uo(16777216);function Ko(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Lo(r){return-1==r.h}function $i(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new fi(t,~r.h).add(Wa)}function qo(r,e){return r.add($i(e))}function Zo(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Fs(r,e){this.g=r,this.h=e}function vs(r,e){if(Ko(e))throw Error("division by zero");if(Ko(r))return new Fs(Da,Da);if(Lo(r))return e=vs($i(r),e),new Fs($i(e.g),$i(e.h));if(Lo(e))return e=vs(r,$i(e)),new Fs($i(e.g),e.h);if(30<r.g.length){if(Lo(r)||Lo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Wa,s=e;0>=s.X(r);)t=sa(t),s=sa(s);var a=bo(t,1),d=bo(s,1);for(s=bo(s,2),t=bo(t,2);!Ko(s);){var g=d.add(s);0>=g.X(r)&&(a=a.add(t),d=g),s=bo(s,1),t=bo(t,1)}return e=qo(r,a.R(e)),new Fs(a,e)}for(a=Da;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),g=(d=To(t)).R(e);Lo(g)||0<g.X(r);)g=(d=To(t-=s)).R(e);Ko(d)&&(d=Wa),a=a.add(d),r=qo(r,g)}return new Fs(a,r)}function sa(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new fi(t,r.h)}function bo(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],d=0;d<s;d++)a[d]=0<e?r.D(d+t)>>>e|r.D(d+t+1)<<32-e:r.D(d+t);return new fi(a,r.h)}(Se=fi.prototype).ea=function(){if(Lo(this))return-$i(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:ba+s)*e,e*=ba}return r},Se.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Ko(this))return"0";if(Lo(this))return"-"+$i(this).toString(r);for(var e=To(Math.pow(r,6)),t=this,s="";;){var a=vs(t,e).g,d=((0<(t=qo(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Ko(t=a))return d+s;for(;6>d.length;)d="0"+d;s=d+s}},Se.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},Se.X=function(r){return Lo(r=qo(this,r))?-1:Ko(r)?0:1},Se.abs=function(){return Lo(this)?$i(this):this},Se.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var d=s+(65535&this.D(a))+(65535&r.D(a)),g=(d>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=g>>>16,t[a]=(g&=65535)<<16|(d&=65535)}return new fi(t,-2147483648&t[t.length-1]?-1:0)},Se.R=function(r){if(Ko(this)||Ko(r))return Da;if(Lo(this))return Lo(r)?$i(this).R($i(r)):$i($i(this).R(r));if(Lo(r))return $i(this.R($i(r)));if(0>this.X(au)&&0>r.X(au))return To(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var d=this.D(s)>>>16,g=65535&this.D(s),R=r.D(a)>>>16,G=65535&r.D(a);t[2*s+2*a]+=g*G,Zo(t,2*s+2*a),t[2*s+2*a+1]+=d*G,Zo(t,2*s+2*a+1),t[2*s+2*a+1]+=g*R,Zo(t,2*s+2*a+1),t[2*s+2*a+2]+=d*R,Zo(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new fi(t,0)},Se.gb=function(r){return vs(this,r).h},Se.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new fi(t,this.h&r.h)},Se.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new fi(t,this.h|r.h)},Se.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new fi(t,this.h^r.h)},Co.prototype.createWebChannel=Co.prototype.g,to.prototype.send=to.prototype.u,to.prototype.open=to.prototype.m,to.prototype.close=to.prototype.close,ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,ci.COMPLETE="complete",js.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",Bt.prototype.listen=Bt.prototype.O,pe.prototype.listenOnce=pe.prototype.P,pe.prototype.getLastError=pe.prototype.Sa,pe.prototype.getLastErrorCode=pe.prototype.Ia,pe.prototype.getStatus=pe.prototype.da,pe.prototype.getResponseJson=pe.prototype.Wa,pe.prototype.getResponseText=pe.prototype.ja,pe.prototype.send=pe.prototype.ha,pe.prototype.setWithCredentials=pe.prototype.Oa,no.prototype.digest=no.prototype.l,no.prototype.reset=no.prototype.reset,no.prototype.update=no.prototype.j,fi.prototype.add=fi.prototype.add,fi.prototype.multiply=fi.prototype.R,fi.prototype.modulo=fi.prototype.gb,fi.prototype.compare=fi.prototype.X,fi.prototype.toNumber=fi.prototype.ea,fi.prototype.toString=fi.prototype.toString,fi.prototype.getBits=fi.prototype.D,fi.fromNumber=To,fi.fromString=function Nl(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return $i(Nl(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=To(Math.pow(e,8)),s=Da,a=0;a<r.length;a+=8){var d=Math.min(8,r.length-a),g=parseInt(r.substring(a,a+d),e);8>d?(d=To(Math.pow(e,d)),s=s.R(d).add(To(g))):s=(s=s.R(t)).add(To(g))}return s};var Ol=bt.createWebChannelTransport=function(){return new Co},Sa=bt.getStatEventTarget=function(){return Et()},za=bt.ErrorCode=ms,wl=bt.EventType=ci,ol=bt.Event=Ze,Yo=bt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zl=bt.FetchXmlHttpFactory=F,oa=bt.WebChannel=js,Kl=bt.XhrIo=pe,al=bt.Md5=no,Aa=bt.Integer=fi;const P="@firebase/firestore";class D{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}D.UNAUTHENTICATED=new D(null),D.GOOGLE_CREDENTIALS=new D("google-credentials-uid"),D.FIRST_PARTY=new D("first-party-uid"),D.MOCK_USER=new D("mock-user");let T="9.23.0";const H=new De.Yd("@firebase/firestore");function Q(){return H.logLevel}function fe(r,...e){if(H.logLevel<=De.in.DEBUG){const t=e.map(vn);H.debug(`Firestore (${T}): ${r}`,...t)}}function Le(r,...e){if(H.logLevel<=De.in.ERROR){const t=e.map(vn);H.error(`Firestore (${T}): ${r}`,...t)}}function Ft(r,...e){if(H.logLevel<=De.in.WARN){const t=e.map(vn);H.warn(`Firestore (${T}): ${r}`,...t)}}function vn(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function Jt(r="Unexpected state"){const e=`FIRESTORE (${T}) INTERNAL ASSERTION FAILED: `+r;throw Le(e),new Error(e)}function Wt(r,e){r||Jt()}function tn(r,e){return r}const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jt extends Je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(D.UNAUTHENTICATED))}shutdown(){}}class ha{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aa{constructor(e){this.t=e,this.currentUser=D.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const d=X=>this.i!==a?(a=this.i,t(X)):Promise.resolve();let g=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Fr,e.enqueueRetryable(()=>d(this.currentUser))};const R=()=>{const X=g;e.enqueueRetryable((0,Ge.Z)(function*(){yield X.promise,yield d(s.currentUser)}))},G=X=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(X=>G(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?G(X):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Fr)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Wt("string"==typeof s.accessToken),new Cl(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Wt(null===e||"string"==typeof e),new D(e)}}class Ra{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=D.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Fu{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ra(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(D.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ka{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=d=>{null!=d.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.T;return this.T=d.token,fe("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const a=d=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.I.onInit(d=>a(d)),setTimeout(()=>{if(!this.appCheck){const d=this.I.getImmediate({optional:!0});d?a(d):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Wt("string"==typeof t.token),this.T=t.token,new kl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nc(r){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Yi{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=nc(40);for(let d=0;d<a.length;++d)s.length<20&&a[d]<t&&(s+=e.charAt(a[d]%e.length))}return s}}function Ar(r,e){return r<e?-1:r>e?1:0}function fa(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function rc(r){return r+"\0"}class hs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hs.fromMillis(Date.now())}static fromDate(e){return hs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new hs(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ar(this.nanoseconds,e.nanoseconds):Ar(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new hs(0,0))}static max(){return new Gn(new hs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ll{constructor(e,t,s){void 0===t?t=0:t>e.length&&Jt(),void 0===s?s=e.length-t:s>e.length-t&&Jt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===ll.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ll?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const d=e.get(a),g=t.get(a);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pi extends ll{construct(e,t,s){return new pi(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new jt(Dt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new pi(t)}static emptyPath(){return new pi([])}}const Il=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ms extends ll{construct(e,t,s){return new Ms(e,t,s)}static isValidIdentifier(e){return Il.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ms(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const d=()=>{if(0===s.length)throw new jt(Dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let g=!1;for(;a<e.length;){const R=e[a];if("\\"===R){if(a+1===e.length)throw new jt(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[a+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new jt(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=G,a+=2}else"`"===R?(g=!g,a++):"."!==R||g?(s+=R,a++):(d(),a++)}if(d(),g)throw new jt(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ms(t)}static emptyPath(){return new Ms([])}}class fn{constructor(e){this.path=e}static fromPath(e){return new fn(pi.fromString(e))}static fromName(e){return new fn(pi.fromString(e).popFirst(5))}static empty(){return new fn(pi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fn(new pi(e.slice()))}}class qa{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Ma(r){return r.fields.find(e=>2===e.kind)}function Tl(r){return r.fields.filter(e=>2!==e.kind)}qa.UNKNOWN_ID=-1;class Ls{constructor(e,t){this.fieldPath=e,this.kind=t}}class ql{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ql(0,Do.min())}}function Fl(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Gn.fromTimestamp(1e9===s?new hs(t+1,0):new hs(t,s));return new Do(a,fn.empty(),e)}function ul(r){return new Do(r.readTime,r.key,-1)}class Do{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Do(Gn.min(),fn.empty(),-1)}static max(){return new Do(Gn.max(),fn.empty(),-1)}}function Au(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=fn.comparator(r.documentKey,e.documentKey),0!==t?t:Ar(r.largestBatchId,e.largestBatchId))}const Zl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ru{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function cl(r){return xa.apply(this,arguments)}function xa(){return xa=(0,Ge.Z)(function*(r){if(r.code!==Dt.FAILED_PRECONDITION||r.message!==Zl)throw r;fe("LocalStore","Unexpectedly lost primary lease")}),xa.apply(this,arguments)}class gt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gt((s,a)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,a)},this.catchCallback=d=>{this.wrapFailure(t,d).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof gt?t:gt.resolve(t)}catch(t){return gt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):gt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):gt.reject(t)}static resolve(e){return new gt((t,s)=>{t(e)})}static reject(e){return new gt((t,s)=>{s(e)})}static waitFor(e){return new gt((t,s)=>{let a=0,d=0,g=!1;e.forEach(R=>{++a,R.next(()=>{++d,g&&d===a&&t()},G=>s(G))}),g=!0,d===a&&t()})}static or(e){let t=gt.resolve(!1);for(const s of e)t=t.next(a=>a?gt.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,d)=>{s.push(t.call(this,a,d))}),this.waitFor(s)}static mapArray(e,t){return new gt((s,a)=>{const d=e.length,g=new Array(d);let R=0;for(let G=0;G<d;G++){const X=G;t(e[X]).next(ge=>{g[X]=ge,++R,R===d&&s(g)},ge=>a(ge))}})}static doWhile(e,t){return new gt((s,a)=>{const d=()=>{!0===e()?t().next(()=>{d()},a):s()};d()})}}class dl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Fr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Pa(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=Na(s.target.error);this.v.reject(new Pa(e,a))}}static open(e,t,s,a){try{return new dl(t,e.transaction(a,s))}catch(d){throw new Pa(t,d)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ll(t)}}class ro{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===ro.S((0,Je.z$)())&&Le("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),pa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Je.hl)())return!1;if(ro.C())return!0;const e=(0,Je.z$)(),t=ro.S(e),s=0<t&&t<10,a=ro.N(e),d=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,Ge.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{a(new Pa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const R=g.target.error;a("VersionError"===R.name?new jt(Dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new jt(Dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Pa(e,R))},d.onupgradeneeded=g=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.V.O(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var d=this;return(0,Ge.Z)(function*(){const g="readonly"===t;let R=0;for(;;){++R;try{d.db=yield d.$(e);const G=dl.open(d.db,e,g?"readonly":"readwrite",s),X=a(G).next(ge=>(G.P(),ge)).catch(ge=>(G.abort(ge),gt.reject(ge))).toPromise();return X.catch(()=>{}),yield G.R,X}catch(G){const X=G,ge="FirebaseError"!==X.name&&R<3;if(fe("SimpleDb","Transaction failed with error:",X.message,"Retrying:",ge),d.close(),!ge)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Yl{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return pa(this.L.delete())}}class Pa extends jt{constructor(e,t){super(Dt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qo(r){return"IndexedDbTransactionError"===r.name}class Ll{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),pa(s)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),pa(this.store.add(e))}get(e){return pa(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),pa(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),pa(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),d=[];return this.W(a,(g,R)=>{d.push(R)}).next(()=>d)}{const a=this.store.getAll(s.range);return new gt((d,g)=>{a.onerror=R=>{g(R.target.error)},a.onsuccess=R=>{d(R.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new gt((a,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{a(g.target.result)}})}J(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(d,g,R)=>R.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new gt((s,a)=>{t.onerror=d=>{const g=Na(d.target.error);a(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(R=>{R?g.continue():s()}):s()}})}W(e,t){const s=[];return new gt((a,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const R=g.target.result;if(!R)return void a();const G=new Yl(R),X=t(R.primaryKey,R.value,G);if(X instanceof gt){const ge=X.catch($e=>(G.done(),gt.reject($e)));s.push(ge)}G.isDone?a():null===G.K?R.continue():R.continue(G.K)}}).next(()=>gt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pa(r){return new gt((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=Na(s.target.error);t(a)}})}let ic=!1;function Na(r){const e=ro.S((0,Je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ic||(ic=!0,setTimeout(()=>{throw s},0)),s}}return r}class sc{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ge.Z)(function*(){t.task=null;try{fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Qo(s)?fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield cl(s)}yield t.et(6e4)}))}}class Oa{constructor(e,t){this.localStore=e,this.persistence=t}nt(){var e=this;return(0,Ge.Z)(function*(t=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>e.st(s,t))}).apply(this,arguments)}st(e,t){const s=new Set;let a=t,d=!0;return gt.doWhile(()=>!0===d&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return fe("IndexBackiller",`Processing collection: ${g}`),this.it(e,g,a).next(R=>{a-=R,s.add(g)});d=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.rt(a,d)).next(R=>(fe("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>g.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,d)=>{const g=ul(d);Au(g,s)>0&&(s=g)}),new Do(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let co=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Vo(r){return null==r}function ga(r){return 0===r&&1/r==-1/0}function uu(r){return"number"==typeof r&&Number.isInteger(r)&&!ga(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function fs(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Vu(e)),e=Lu(r.get(t),e);return Vu(e)}function Lu(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const d=r.charAt(a);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function Vu(r){return r+"\x01\x01"}function Ws(r){const e=r.length;if(Wt(e>=2),2===e)return Wt("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),pi.emptyPath();const t=e-2,s=[];let a="";for(let d=0;d<e;){const g=r.indexOf("\x01",d);switch((g<0||g>t)&&Jt(),r.charAt(g+1)){case"\x01":const R=r.substring(d,g);let G;0===a.length?G=R:(a+=R,G=a,a=""),s.push(G);break;case"\x10":a+=r.substring(d,g),a+="\0";break;case"\x11":a+=r.substring(d,g+1);break;default:Jt()}d=g+2}return new pi(s)}const hl=["userId","batchId"];function cu(r,e){return[r,fs(e)]}function Qa(r,e,t){return[r,fs(e),t]}const du={},bl=["prefixPath","collectionGroup","readTime","documentId"],Vs=["prefixPath","collectionGroup","documentId"],Uu=["collectionGroup","readTime","prefixPath","documentId"],Vl=["canonicalId","targetId"],hu=["targetId","path"],fu=["path","targetId"],pu=["collectionId","parent"],Ql=["indexId","uid"],Mu=["uid","sequenceNumber"],Bu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gu=["indexId","uid","orderedDocumentKey"],ju=["userId","collectionPath","documentId"],Ul=["userId","collectionPath","largestBatchId"],mu=["userId","collectionGroup","largestBatchId"],yu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_u=[...yu,"documentOverlays"],fl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ma=fl,Bl=[...ma,"indexConfiguration","indexState","indexEntries"];class Jl extends Ru{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function is(r,e){const t=tn(r);return ro.M(t.ht,e)}function Ja(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ya(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Xa(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ki{constructor(e,t){this.comparator=e,this.root=t||zs.EMPTY}insert(e,t){return new ki(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zs.BLACK,null,null))}remove(e){return new ki(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new io(this.root,e,this.comparator,!1)}getReverseIterator(){return new io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new io(this.root,e,this.comparator,!0)}}class io{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?s(e.key,t):1,t&&a&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zs{constructor(e,t,s,a,d){this.key=e,this.value=t,this.color=null!=s?s:zs.RED,this.left=null!=a?a:zs.EMPTY,this.right=null!=d?d:zs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,d){return new zs(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const d=s(e,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===d?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return zs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return zs.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Jt();const e=this.left.check();if(e!==this.right.check())throw Jt();return e+(this.isRed()?0:1)}}zs.EMPTY=null,zs.RED=!0,zs.BLACK=!1,zs.EMPTY=new class{constructor(){this.size=0}get key(){throw Jt()}get value(){throw Jt()}get color(){throw Jt()}get left(){throw Jt()}get right(){throw Jt()}copy(r,e,t,s,a){return this}insert(r,e,t){return new zs(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qi{constructor(e){this.comparator=e,this.data=new ki(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dl(this.data.getIterator())}getIteratorFrom(e){return new Dl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Qi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(0!==this.comparator(a,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qi(this.comparator);return t.data=e,t}}class Dl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ka(r){return r.hasNext()?r.getNext():void 0}class Gi{constructor(e){this.fields=e,e.sort(Ms.comparator)}static empty(){return new Gi([])}unionWith(e){let t=new Qi(Ms.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Gi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class vu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ts{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw"undefined"!=typeof DOMException&&a instanceof DOMException?new vu("Invalid base64 string: "+a):a}}(e);return new Ts(t)}static fromUint8Array(e){const t=function(s){let a="";for(let d=0;d<s.length;++d)a+=String.fromCharCode(s[d]);return a}(e);return new Ts(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ar(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const Eu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jl(r){if(Wt(!!r),"string"==typeof r){let e=0;const t=Eu.exec(r);if(Wt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:xs(r.seconds),nanos:xs(r.nanos)}}function xs(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function bs(r){return"string"==typeof r?Ts.fromBase64String(r):Ts.fromUint8Array(r)}function va(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xl(r){const e=r.mapValue.fields.__previous_value__;return va(e)?Xl(e):e}function Ea(r){const e=jl(r.mapValue.fields.__local_write_time__.timestampValue);return new hs(e.seconds,e.nanos)}class ho{constructor(e,t,s,a,d,g,R,G,X){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=R,this.longPollingOptions=G,this.useFetchStreams=X}}class Jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}const Po={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},el={nullValue:"NULL_VALUE"};function tl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?va(r)?4:Cn(r)?9007199254740991:10:Jt()}function So(r,e){if(r===e)return!0;const t=tl(r);if(t!==tl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ea(r).isEqual(Ea(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const d=jl(s.timestampValue),g=jl(a.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,bs(r.bytesValue).isEqual(bs(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return xs(s.geoPointValue.latitude)===xs(a.geoPointValue.latitude)&&xs(s.geoPointValue.longitude)===xs(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return xs(s.integerValue)===xs(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const d=xs(s.doubleValue),g=xs(a.doubleValue);return d===g?ga(d)===ga(g):isNaN(d)&&isNaN(g)}return!1}(r,e);case 9:return fa(r.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(s,a){const d=s.mapValue.fields||{},g=a.mapValue.fields||{};if(Ja(d)!==Ja(g))return!1;for(const R in d)if(d.hasOwnProperty(R)&&(void 0===g[R]||!So(d[R],g[R])))return!1;return!0}(r,e);default:return Jt()}var a}function eu(r,e){return void 0!==(r.values||[]).find(t=>So(t,e))}function Sl(r,e){if(r===e)return 0;const t=tl(r),s=tl(e);if(t!==s)return Ar(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ar(r.booleanValue,e.booleanValue);case 2:return function(a,d){const g=xs(a.integerValue||a.doubleValue),R=xs(d.integerValue||d.doubleValue);return g<R?-1:g>R?1:g===R?0:isNaN(g)?isNaN(R)?0:-1:1}(r,e);case 3:return xu(r.timestampValue,e.timestampValue);case 4:return xu(Ea(r),Ea(e));case 5:return Ar(r.stringValue,e.stringValue);case 6:return function(a,d){const g=bs(a),R=bs(d);return g.compareTo(R)}(r.bytesValue,e.bytesValue);case 7:return function(a,d){const g=a.split("/"),R=d.split("/");for(let G=0;G<g.length&&G<R.length;G++){const X=Ar(g[G],R[G]);if(0!==X)return X}return Ar(g.length,R.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,d){const g=Ar(xs(a.latitude),xs(d.latitude));return 0!==g?g:Ar(xs(a.longitude),xs(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,d){const g=a.values||[],R=d.values||[];for(let G=0;G<g.length&&G<R.length;++G){const X=Sl(g[G],R[G]);if(X)return X}return Ar(g.length,R.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,d){if(a===Po.mapValue&&d===Po.mapValue)return 0;if(a===Po.mapValue)return 1;if(d===Po.mapValue)return-1;const g=a.fields||{},R=Object.keys(g),G=d.fields||{},X=Object.keys(G);R.sort(),X.sort();for(let ge=0;ge<R.length&&ge<X.length;++ge){const $e=Ar(R[ge],X[ge]);if(0!==$e)return $e;const It=Sl(g[R[ge]],G[X[ge]]);if(0!==It)return It}return Ar(R.length,X.length)}(r.mapValue,e.mapValue);default:throw Jt()}}function xu(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Ar(r,e);const t=jl(r),s=jl(e),a=Ar(t.seconds,s.seconds);return 0!==a?a:Ar(t.nanos,s.nanos)}function Hl(r){return Hu(r)}function Hu(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=jl(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?bs(r.bytesValue).toBase64():"referenceValue"in r?fn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",d=!0;for(const g of s.values||[])d?d=!1:a+=",",a+=Hu(g);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let d="{",g=!0;for(const R of a)g?g=!1:d+=",",d+=`${R}:${Hu(s.fields[R])}`;return d+"}"}(r.mapValue):Jt();var e}function A(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function O(r){return!!r&&"integerValue"in r}function ne(r){return!!r&&"arrayValue"in r}function we(r){return!!r&&"nullValue"in r}function qe(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ht(r){return!!r&&"mapValue"in r}function Lt(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ya(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Lt(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lt(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Cn(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Tn(r){return"nullValue"in r?el:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?A(Jo.empty(),fn.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Jt()}function zn(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?A(Jo.empty(),fn.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Po:Jt()}function Or(r,e){const t=Sl(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Er(r,e){const t=Sl(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ht(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lt(t)}setAll(e){let t=Ms.emptyPath(),s={},a=[];e.forEach((g,R)=>{if(!t.isImmediateParentOf(R)){const G=this.getFieldsMap(t);this.applyChanges(G,s,a),s={},a=[],t=R.popLast()}g?s[R.lastSegment()]=Lt(g):a.push(R.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,s,a)}delete(e){const t=this.field(e.popLast());ht(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ht(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ya(t,(a,d)=>e[a]=d);for(const a of s)delete e[a]}clone(){return new Ii(Lt(this.value))}}function Ks(r){const e=[];return ya(r.fields,(t,s)=>{const a=new Ms([t]);if(ht(s)){const d=Ks(s.mapValue).fields;if(0===d.length)e.push(a);else for(const g of d)e.push(a.child(g))}else e.push(a)}),new Gi(e)}class Ti{constructor(e,t,s,a,d,g,R){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=d,this.data=g,this.documentState=R}static newInvalidDocument(e){return new Ti(e,0,Gn.min(),Gn.min(),Gn.min(),Ii.empty(),0)}static newFoundDocument(e,t,s,a){return new Ti(e,1,t,Gn.min(),s,a,0)}static newNoDocument(e,t){return new Ti(e,2,t,Gn.min(),Gn.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new Ti(e,3,t,Gn.min(),Gn.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xo{constructor(e,t){this.position=e,this.inclusive=t}}function pl(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const d=e[a],g=r.position[a];if(s=d.field.isKeyField()?fn.comparator(fn.fromName(g.referenceValue),t.key):Sl(g,t.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function wa(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!So(r.position[t],e.position[t]))return!1;return!0}class Uo{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pu(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class pd{}class gi extends pd{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new oe(e,t,s):"array-contains"===t?new p(e,s):"in"===t?new _(e,s):"not-in"===t?new b(e,s):"array-contains-any"===t?new Y(e,s):new gi(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Te(e,s):new Re(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Sl(t,this.value)):null!==t&&tl(this.value)===tl(t)&&this.matchesComparison(Sl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Wi extends pd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Wi(e,t)}matches(e){return nl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function nl(r){return"and"===r.op}function wu(r){return"or"===r.op}function $l(r){return N(r)&&nl(r)}function N(r){for(const e of r.filters)if(e instanceof Wi)return!1;return!0}function E(r){if(r instanceof gi)return r.field.canonicalString()+r.op.toString()+Hl(r.value);if($l(r))return r.filters.map(e=>E(e)).join(",");{const e=r.filters.map(t=>E(t)).join(",");return`${r.op}(${e})`}}function w(r,e){return r instanceof gi?(t=r,(s=e)instanceof gi&&t.op===s.op&&t.field.isEqual(s.field)&&So(t.value,s.value)):r instanceof Wi?function(t,s){return s instanceof Wi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,d,g)=>a&&w(d,s.filters[g]),!0)}(r,e):void Jt();var t,s}function x(r,e){const t=r.filters.concat(e);return Wi.create(t,r.op)}function Z(r){return r instanceof gi?`${(e=r).field.canonicalString()} ${e.op} ${Hl(e.value)}`:r instanceof Wi?function(e){return e.op.toString()+" {"+e.getFilters().map(Z).join(" ,")+"}"}(r):"Filter";var e}class oe extends gi{constructor(e,t,s){super(e,t,s),this.key=fn.fromName(s.referenceValue)}matches(e){const t=fn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Te extends gi{constructor(e,t){super(e,"in",t),this.keys=C(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Re extends gi{constructor(e,t){super(e,"not-in",t),this.keys=C(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function C(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>fn.fromName(s.referenceValue))}class p extends gi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ne(t)&&eu(t.arrayValue,this.value)}}class _ extends gi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&eu(this.value.arrayValue,t)}}class b extends gi{constructor(e,t){super(e,"not-in",t)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!eu(this.value.arrayValue,t)}}class Y extends gi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ne(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>eu(this.value.arrayValue,s))}}class ce{constructor(e,t=null,s=[],a=[],d=null,g=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=d,this.startAt=g,this.endAt=R,this.dt=null}}function Ve(r,e=null,t=[],s=[],a=null,d=null,g=null){return new ce(r,e,t,s,a,d,g)}function rt(r){const e=tn(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>E(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Vo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Hl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Hl(s)).join(",")),e.dt=t}return e.dt}function $t(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Pu(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!w(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!wa(r.startAt,e.startAt)&&wa(r.endAt,e.endAt)}function mn(r){return fn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Pn(r,e){return r.filters.filter(t=>t instanceof gi&&t.field.isEqual(e))}function Wn(r,e,t){let s=el,a=!0;for(const d of Pn(r,e)){let g=el,R=!0;switch(d.op){case"<":case"<=":g=Tn(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,R=!1;break;case"!=":case"not-in":g=el}Or({value:s,inclusive:a},{value:g,inclusive:R})<0&&(s=g,a=R)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const g=t.position[d];Or({value:s,inclusive:a},{value:g,inclusive:t.inclusive})<0&&(s=g,a=t.inclusive);break}return{value:s,inclusive:a}}function xr(r,e,t){let s=Po,a=!0;for(const d of Pn(r,e)){let g=Po,R=!0;switch(d.op){case">=":case">":g=zn(d.value),R=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,R=!1;break;case"!=":case"not-in":g=Po}Er({value:s,inclusive:a},{value:g,inclusive:R})>0&&(s=g,a=R)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const g=t.position[d];Er({value:s,inclusive:a},{value:g,inclusive:t.inclusive})>0&&(s=g,a=t.inclusive);break}return{value:s,inclusive:a}}class ts{constructor(e,t=null,s=[],a=[],d=null,g="F",R=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=d,this.limitType=g,this.startAt=R,this.endAt=G,this.wt=null,this._t=null}}function Bo(r,e,t,s,a,d,g,R){return new ts(r,e,t,s,a,d,g,R)}function ps(r){return new ts(r)}function Fa(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function La(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function la(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ao(r){return null!==r.collectionGroup}function jo(r){const e=tn(r);if(null===e.wt){e.wt=[];const t=la(e),s=La(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Uo(t)),e.wt.push(new Uo(Ms.keyField(),"asc"));else{let a=!1;for(const d of e.explicitOrderBy)e.wt.push(d),d.field.isKeyField()&&(a=!0);if(!a){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Uo(Ms.keyField(),d))}}}return e.wt}function Ds(r){const e=tn(r);if(!e._t)if("F"===e.limitType)e._t=Ve(e.path,e.collectionGroup,jo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of jo(e))t.push(new Uo(d.field,"desc"===d.dir?"asc":"desc"));const s=e.endAt?new Xo(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Xo(e.startAt.position,e.startAt.inclusive):null;e._t=Ve(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function Va(r,e){e.getFirstInequalityField(),la(r);const t=r.filters.concat([e]);return new ts(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Cu(r,e,t){return new ts(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Yn(r,e){return $t(Ds(r),Ds(e))&&r.limitType===e.limitType}function wr(r){return`${rt(Ds(r))}|lt:${r.limitType}`}function Pr(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Z(s)).join(", ")}]`),Vo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Hl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Hl(s)).join(",")),`Target(${t})`}(Ds(r))}; limitType=${r.limitType})`}function mi(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):fn.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of jo(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,d,g){const R=pl(a,d,g);return a.inclusive?R<=0:R<0}(t.startAt,jo(t),s)||t.endAt&&!function(a,d,g){const R=pl(a,d,g);return a.inclusive?R>=0:R>0}(t.endAt,jo(t),s)));var t,s}function fo(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function gl(r){return(e,t)=>{let s=!1;for(const a of jo(r)){const d=Ua(a,e,t);if(0!==d)return d;s=s||a.field.isKeyField()}return 0}}function Ua(r,e,t){const s=r.field.isKeyField()?fn.comparator(e.key,t.key):function(a,d,g){const R=d.data.field(a),G=g.data.field(a);return null!==R&&null!==G?Sl(R,G):Jt()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Jt()}}class ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,d]of s)if(this.equalsFn(a,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return void(a[d]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(t,s)=>{for(const[a,d]of s)e(a,d)})}isEmpty(){return Xa(this.inner)}size(){return this.innerSize}}const ss=new ki(fn.comparator);function Ca(){return ss}const gd=new ki(fn.comparator);function No(...r){let e=gd;for(const t of r)e=e.insert(t.key,t);return e}function Iu(r){let e=gd;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ta(){return ml()}function ua(){return ml()}function ml(){return new ea(r=>r.toString(),(r,e)=>r.isEqual(e))}const rf=new ki(fn.comparator),_p=new Qi(fn.comparator);function yi(...r){let e=_p;for(const t of r)e=e.add(t);return e}const vp=new Qi(Ar);function Uc(){return vp}function Zd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ga(e)?"-0":e}}function Yd(r){return{integerValue:""+r}}function Qd(r,e){return uu(e)?Yd(e):Zd(r,e)}class md{constructor(){this._=void 0}}function Ep(r,e,t){return r instanceof oc?function(s,a){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&va(a)&&(a=Xl(a)),a&&(d.fields.__previous_value__=a),{mapValue:d}}(t,e):r instanceof nu?Jd(r,e):r instanceof Ba?ac(r,e):function(s,a){const d=Cp(s,a),g=Xd(d)+Xd(s.gt);return O(d)&&O(s.gt)?Yd(g):Zd(s.serializer,g)}(r,e)}function wp(r,e,t){return r instanceof nu?Jd(r,e):r instanceof Ba?ac(r,e):t}function Cp(r,e){return r instanceof lc?O(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class oc extends md{}class nu extends md{constructor(e){super(),this.elements=e}}function Jd(r,e){const t=eh(e);for(const s of r.elements)t.some(a=>So(a,s))||t.push(s);return{arrayValue:{values:t}}}class Ba extends md{constructor(e){super(),this.elements=e}}function ac(r,e){let t=eh(e);for(const s of r.elements)t=t.filter(a=>!So(a,s));return{arrayValue:{values:t}}}class lc extends md{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Xd(r){return xs(r.integerValue||r.doubleValue)}function eh(r){return ne(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class yd{constructor(e,t){this.field=e,this.transform=t}}class qg{constructor(e,t){this.version=e,this.transformResults=t}}class Us{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Us}static exists(e){return new Us(void 0,e)}static updateTime(e){return new Us(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vc(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Ec{}function Zg(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Oe(r.key,Us.none()):new v(r.key,r.data,Us.none());{const t=r.data,s=Ii.empty();let a=new Qi(Ms.comparator);for(let d of e.fields)if(!a.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?s.delete(d):s.set(d,g),a=a.add(d)}return new S(r.key,s,new Gi(a.toArray()),Us.none())}}function S_(r,e,t){r instanceof v?function(s,a,d){const g=s.value.clone(),R=J(s.fieldTransforms,a,d.transformResults);g.setAll(R),a.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,t):r instanceof S?function(s,a,d){if(!vc(s.precondition,a))return void a.convertToUnknownDocument(d.version);const g=J(s.fieldTransforms,a,d.transformResults),R=a.data;R.setAll(B(s)),R.setAll(g),a.convertToFoundDocument(d.version,R).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function f(r,e,t,s){return r instanceof v?function(a,d,g,R){if(!vc(a.precondition,d))return g;const G=a.value.clone(),X=_e(a.fieldTransforms,R,d);return G.setAll(X),d.convertToFoundDocument(d.version,G).setHasLocalMutations(),null}(r,e,t,s):r instanceof S?function(a,d,g,R){if(!vc(a.precondition,d))return g;const G=_e(a.fieldTransforms,R,d),X=d.data;return X.setAll(B(a)),X.setAll(G),d.convertToFoundDocument(d.version,X).setHasLocalMutations(),null===g?null:g.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(ge=>ge.field))}(r,e,t,s):(g=t,vc(r.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function u(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),d=Cp(s.transform,a||null);null!=d&&(null===t&&(t=Ii.empty()),t.set(s.field,d))}return t||null}function c(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&fa(t,s,(a,d)=>function Kg(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof nu&&s instanceof nu||t instanceof Ba&&s instanceof Ba?fa(t.elements,s.elements,So):t instanceof lc&&s instanceof lc?So(t.gt,s.gt):t instanceof oc&&s instanceof oc);var t,s}(a,d))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class v extends Ec{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class S extends Ec{constructor(e,t,s,a,d=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function B(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function J(r,e,t){const s=new Map;Wt(r.length===t.length);for(let a=0;a<t.length;a++){const d=r[a],g=d.transform,R=e.data.field(d.field);s.set(d.field,wp(g,R,t[a]))}return s}function _e(r,e,t){const s=new Map;for(const a of r){const d=a.transform,g=t.data.field(a.field);s.set(a.field,Ep(d,g,e))}return s}class Oe extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ye extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Mt{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const d=this.mutations[a];d.key.isEqual(e.key)&&S_(d,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=f(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=f(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ua();return this.mutations.forEach(a=>{const d=e.get(a.key),g=d.overlayedDocument;let R=this.applyToLocalView(g,d.mutatedFields);R=t.has(a.key)?null:R;const G=Zg(g,R);null!==G&&s.set(a.key,G),g.isValidDocument()||g.convertToNoDocument(Gn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yi())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,(t,s)=>c(t,s))&&fa(this.baseMutations,e.baseMutations,(t,s)=>c(t,s))}}class zt{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Wt(e.mutations.length===s.length);let a=rf;const d=e.mutations;for(let g=0;g<d.length;g++)a=a.insert(d[g].key,s[g].version);return new zt(e,t,s,a)}}class nn{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lr,Vr;function uc(r){switch(r){default:return Jt();case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0}}function Bc(r){if(void 0===r)return Le("GRPC error has no .code"),Dt.UNKNOWN;switch(r){case Lr.OK:return Dt.OK;case Lr.CANCELLED:return Dt.CANCELLED;case Lr.UNKNOWN:return Dt.UNKNOWN;case Lr.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case Lr.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case Lr.INTERNAL:return Dt.INTERNAL;case Lr.UNAVAILABLE:return Dt.UNAVAILABLE;case Lr.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case Lr.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case Lr.NOT_FOUND:return Dt.NOT_FOUND;case Lr.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case Lr.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case Lr.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case Lr.ABORTED:return Dt.ABORTED;case Lr.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case Lr.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case Lr.DATA_LOSS:return Dt.DATA_LOSS;default:return Jt()}}(Vr=Lr||(Lr={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class jc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return th}static getOrCreateInstance(){return null===th&&(th=new jc),th}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let th=null;function A_(){return new TextEncoder}const nh=new Aa([4294967295,4294967295],0);function sf(r){const e=A_().encode(r),t=new al;return t.update(e),new Uint8Array(t.digest())}function Yg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new Aa([t,s],0),new Aa([a,d],0)]}class Ip{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Hc(`Invalid padding: ${t}`);if(s<0)throw new Hc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Hc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Hc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Aa.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(Aa.fromNumber(s)));return 1===a.compare(nh)&&(a=new Aa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=sf(e),[s,a]=Yg(t);for(let d=0;d<this.hashCount;d++){const g=this.Et(s,a,d);if(!this.At(g))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),g=new Ip(d,a,t);return s.forEach(R=>g.insert(R)),g}insert(e){if(0===this.It)return;const t=sf(e),[s,a]=Yg(t);for(let d=0;d<this.hashCount;d++){const g=this.Et(s,a,d);this.Rt(g)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rh{constructor(e,t,s,a,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,ih.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new rh(Gn.min(),a,new ki(Ar),Ca(),yi())}}class ih{constructor(e,t,s,a,d){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ih(s,t,yi(),yi(),yi())}}class $c{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class Qg{constructor(e,t){this.targetId=e,this.Vt=t}}class Jg{constructor(e,t,s=Ts.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Xg{constructor(){this.St=0,this.Dt=tm(),this.Ct=Ts.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=yi(),t=yi(),s=yi();return this.Dt.forEach((a,d)=>{switch(d){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Jt()}}),new ih(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=tm()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class R_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ca(),this.zt=em(),this.Wt=new ki(Ar)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:Jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,d=this.se(s);if(d){const g=d.target;if(mn(g))if(0===a){const R=new fn(g.path);this.Yt(s,R,Ti.newNoDocument(R,Gn.min()))}else Wt(1===a);else{const R=this.ie(s);if(R!==a){const G=this.re(e,R);0!==G&&(this.ee(s),this.Wt=this.Wt.insert(s,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=jc.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(X,ge,$e){var It,Gt,In,Hn,Zn,Wr;const zi={localCacheCount:ge,existenceFilterCount:$e.count},zr=$e.unchangedNames;return zr&&(zi.bloomFilter={applied:0===X,hashCount:null!==(It=null==zr?void 0:zr.hashCount)&&void 0!==It?It:0,bitmapLength:null!==(Hn=null===(In=null===(Gt=null==zr?void 0:zr.bits)||void 0===Gt?void 0:Gt.bitmap)||void 0===In?void 0:In.length)&&void 0!==Hn?Hn:0,padding:null!==(Wr=null===(Zn=null==zr?void 0:zr.bits)||void 0===Zn?void 0:Zn.padding)&&void 0!==Wr?Wr:0}),zi}(G,R,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:d="",padding:g=0},hashCount:R=0}=s;let G,X;try{G=bs(d).toUint8Array()}catch(ge){if(ge instanceof vu)return Ft("Decoding the base64 bloom filter in existence filter failed ("+ge.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ge}try{X=new Ip(G,g,R)}catch(ge){return Ft(ge instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",ge),1}return 0===X.It?1:a!==t-this.oe(e.targetId,X)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(d=>{const g=this.Gt.ue(),R=`projects/${g.projectId}/databases/${g.database}/documents/${d.path.canonicalString()}`;t.vt(R)||(this.Yt(e,d,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((d,g)=>{const R=this.se(g);if(R){if(d.current&&mn(R.target)){const G=new fn(R.target.path);null!==this.jt.get(G)||this.ae(g,G)||this.Yt(g,G,Ti.newNoDocument(G,e))}d.Mt&&(t.set(g,d.Ot()),d.Ft())}});let s=yi();this.zt.forEach((d,g)=>{let R=!0;g.forEachWhile(G=>{const X=this.se(G);return!X||"TargetPurposeLimboResolution"===X.purpose||(R=!1,!1)}),R&&(s=s.add(d))}),this.jt.forEach((d,g)=>g.setReadTime(e));const a=new rh(e,t,this.Wt,this.jt,s);return this.jt=Ca(),this.zt=em(),this.Wt=new ki(Ar),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Xg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Qi(Ar),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Xg),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function em(){return new ki(fn.comparator)}function tm(){return new ki(fn.comparator)}const M_={asc:"ASCENDING",desc:"DESCENDING"},x_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nm={and:"AND",or:"OR"};class P_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wc(r,e){return r.useProto3Json||Vo(e)?e:{value:e}}function Al(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function lE(r,e){return Al(r,e.toTimestamp())}function Ho(r){return Wt(!!r),Gn.fromTimestamp(function(e){const t=jl(e);return new hs(t.seconds,t.nanos)}(r))}function rm(r,e){return(t=r,new pi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tp(r){const e=pi.fromString(r);return Wt(lf(e)),e}function af(r,e){return rm(r.databaseId,e.path)}function Nu(r,e){const t=Tp(e);if(t.get(1)!==r.databaseId.projectId)throw new jt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new jt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new fn(im(t))}function bp(r,e){return rm(r.databaseId,e)}function Dp(r){const e=Tp(r);return 4===e.length?pi.emptyPath():im(e)}function sh(r){return new pi(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function im(r){return Wt(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Tu(r,e,t){return{name:af(r,e),fields:t.value.mapValue.fields}}function sm(r,e,t){const s=Nu(r,e.name),a=Ho(e.updateTime),d=e.createTime?Ho(e.createTime):Gn.min(),g=new Ii({mapValue:{fields:e.fields}}),R=Ti.newFoundDocument(s,a,d,g);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}function oh(r,e){let t;if(e instanceof v)t={update:Tu(r,e.key,e.value)};else if(e instanceof Oe)t={delete:af(r,e.key)};else if(e instanceof S)t={update:Tu(r,e.key,e.data),updateMask:L_(e.fieldMask)};else{if(!(e instanceof Ye))return Jt();t={verify:af(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,d){const g=d.transform;if(g instanceof oc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof nu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ba)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof lc)return{fieldPath:d.field.canonicalString(),increment:g.gt};throw Jt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:lE(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Jt()),t;var a}function Sp(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Us.updateTime(Ho(a.updateTime)):void 0!==a.exists?Us.exists(a.exists):Us.none():Us.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(d,g){let R=null;"setToServerValue"in g?(Wt("REQUEST_TIME"===g.setToServerValue),R=new oc):"appendMissingElements"in g?R=new nu(g.appendMissingElements.values||[]):"removeAllFromArray"in g?R=new Ba(g.removeAllFromArray.values||[]):"increment"in g?R=new lc(d,g.increment):Jt();const G=Ms.fromServerFormat(g.fieldPath);return new yd(G,R)}(r,a)):[];var a;if(e.update){const a=Nu(r,e.update.name),d=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Gi((e.updateMask.fieldPaths||[]).map(X=>Ms.fromServerFormat(X)));return new S(a,d,g,t,s)}return new v(a,d,t,s)}if(e.delete){const a=Nu(r,e.delete);return new Oe(a,t)}if(e.verify){const a=Nu(r,e.verify);return new Ye(a,t)}return Jt()}function Ap(r,e){return{documents:[bp(r,e.path)]}}function Rp(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=bp(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bp(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(G){if(0!==G.length)return Mp(Wi.create(G,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const d=function(G){if(0!==G.length)return G.map(X=>{return{field:Ou((ge=X).field),direction:lm(ge.dir)};var ge})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=wc(r,e.limit);var R,G;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function am(r){let e=Dp(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Wt(1===s);const ge=t.from[0];ge.allDescendants?a=ge.collectionId:e=e.child(ge.collectionId)}let d=[];t.where&&(d=function(ge){const $e=ui(ge);return $e instanceof Wi&&$l($e)?$e.getFilters():[$e]}(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(ge=>{return new Uo(yl(($e=ge).field),function(It){switch(It){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($e.direction));var $e}));let R=null;t.limit&&(R=function(ge){let $e;return $e="object"==typeof ge?ge.value:ge,Vo($e)?null:$e}(t.limit));let G=null;var ge;t.startAt&&(G=new Xo((ge=t.startAt).values||[],!!ge.before));let X=null;return t.endAt&&(X=function(ge){return new Xo(ge.values||[],!ge.before)}(t.endAt)),Bo(e,a,g,d,R,"F",G,X)}function ui(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yl(e.unaryFilter.field);return gi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=yl(e.unaryFilter.field);return gi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=yl(e.unaryFilter.field);return gi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=yl(e.unaryFilter.field);return gi.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Jt()}}(r):void 0!==r.fieldFilter?gi.create(yl((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Wi.create(e.compositeFilter.filters.map(t=>ui(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Jt()}}(e.compositeFilter.op))}(r):Jt();var e}function lm(r){return M_[r]}function um(r){return x_[r]}function cm(r){return nm[r]}function Ou(r){return{fieldPath:r.canonicalString()}}function yl(r){return Ms.fromServerFormat(r.fieldPath)}function Mp(r){return r instanceof gi?function(e){if("=="===e.op){if(qe(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NAN"}};if(we(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qe(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NOT_NAN"}};if(we(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(e.field),op:um(e.op),value:e.value}}}(r):r instanceof Wi?function(e){const t=e.getFilters().map(s=>Mp(s));return 1===t.length?t[0]:{compositeFilter:{op:cm(e.op),filters:t}}}(r):Jt()}function L_(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lf(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class rl{constructor(e,t,s,a,d=Gn.min(),g=Gn.min(),R=Ts.EMPTY_BYTE_STRING,G=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=R,this.expectedCount=G}withSequenceNumber(e){return new rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uf{constructor(e){this.fe=e}}function cf(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:af(a=r.fe,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Al(a,d.version.toTimestamp()),createTime:Al(a,d.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Cc(e.version)};else{if(!e.isUnknownDocument())return Jt();s.unknownDocument={path:t.path.toArray(),version:Cc(e.version)}}var a,d;return s}function xp(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Cc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _d(r){const e=new hs(r.seconds,r.nanoseconds);return Gn.fromTimestamp(e)}function $u(r,e){const t=(e.baseMutations||[]).map(d=>Sp(r.fe,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const s=e.mutations.map(d=>Sp(r.fe,d)),a=hs.fromMillis(e.localWriteTimeMs);return new Mt(e.batchId,a,t,s)}function Ic(r){const e=_d(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?_d(r.lastLimboFreeSnapshotVersion):Gn.min();let s;var a;return void 0!==r.query.documents?(Wt(1===(a=r.query).documents.length),s=Ds(ps(Dp(a.documents[0])))):s=Ds(am(r.query)),new rl(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Ts.fromBase64String(r.resumeToken))}function df(r,e){const t=Cc(e.snapshotVersion),s=Cc(e.lastLimboFreeSnapshotVersion);let a;a=mn(e.target)?Ap(r.fe,e.target):Rp(r.fe,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rt(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function ah(r){const e=am({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Cu(e,e.limit,"L"):e}function lh(r,e){return new nn(e.largestBatchId,Sp(r.fe,e.overlayMutation))}function V_(r,e){const t=e.path.lastSegment();return[r,fs(e.path.popLast()),t]}function hm(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Cc(s.readTime),documentKey:fs(s.documentKey.path),largestBatchId:s.largestBatchId}}class U_{getBundleMetadata(e,t){return fm(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:_d(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return fm(e).put({bundleId:(s=t).id,createTime:Cc(Ho(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return pm(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:ah(a.bundledQuery),readTime:_d(a.readTime)};var a})}saveNamedQuery(e,t){return pm(e).put({name:(s=t).name,readTime:Cc(Ho(s.readTime)),bundledQuery:s.bundledQuery});var s}}function fm(r){return is(r,"bundles")}function pm(r){return is(r,"namedQueries")}class uh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new uh(e,t.uid||"")}getOverlay(e,t){return hf(e).get(V_(this.userId,t)).next(s=>s?lh(this.serializer,s):null)}getOverlays(e,t){const s=ta();return gt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((d,g)=>{const R=new nn(t,g);a.push(this.we(e,R))}),gt.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(g=>a.add(fs(g.getCollectionPath())));const d=[];return a.forEach(g=>{const R=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(hf(e).J("collectionPathOverlayIndex",R))}),gt.waitFor(d)}getOverlaysForCollection(e,t,s){const a=ta(),d=fs(t),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return hf(e).j("collectionPathOverlayIndex",g).next(R=>{for(const G of R){const X=lh(this.serializer,G);a.set(X.getKey(),X)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const d=ta();let g;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hf(e).X({index:"collectionGroupOverlayIndex",range:R},(G,X,ge)=>{const $e=lh(this.serializer,X);d.size()<a||$e.largestBatchId===g?(d.set($e.getKey(),$e),g=$e.largestBatchId):ge.done()}).next(()=>d)}we(e,t){return hf(e).put(function(s,a,d){const[g,R,G]=V_(a,d.mutation.key);return{userId:a,collectionPath:R,documentId:G,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:oh(s.fe,d.mutation)}}(this.serializer,this.userId,t))}}function hf(r){return is(r,"documentOverlays")}class Gc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(xs(e.integerValue));else if("doubleValue"in e){const s=xs(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),ga(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(bs(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Cn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Jt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),fn.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function uE(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function Pp(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const d=uE(255&t[a]);if(s+=d,8!==d)break}return s}(r);return Math.ceil(e/8)}Gc.Ve=new Gc;class gm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Pp(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Pp(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,a,!1),new Uint8Array(d.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class B_{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Np{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class ff{constructor(){this.je=new gm,this.ze=new B_(this.je),this.We=new Np(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class vd{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new vd(this.indexId,this.documentKey,this.arrayValue,s)}}function Wc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=j_(r.arrayValue,e.arrayValue),0!==t?t:(t=j_(r.directionalValue,e.directionalValue),0!==t?t:fn.comparator(r.documentKey,e.documentKey)))}function j_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class cE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){Wt(e.collectionGroup===this.collectionId);const t=Ma(e);if(void 0!==t&&!this.en(t))return!1;const s=Tl(e);let a=new Set,d=0,g=0;for(;d<s.length&&this.en(s[d]);++d)a=a.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const R=s[d];if(!this.nn(this.Ze,R)||!this.sn(this.Ye[g++],R))return!1}++d}for(;d<s.length;++d){const R=s[d];if(g>=this.Ye.length||!this.sn(this.Ye[g++],R))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function H_(r){var e,t;if(Wt(r instanceof gi||r instanceof Wi),r instanceof gi){if(r instanceof _){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(d=>gi.create(r.field,"==",d)))||[];return Wi.create(a,"or")}return r}const s=r.filters.map(a=>H_(a));return Wi.create(s,r.op)}function dE(r){if(0===r.getFilters().length)return[];const e=Gu(H_(r));return Wt($_(e)),mm(e)||ym(e)?[e]:e.getFilters()}function mm(r){return r instanceof gi}function ym(r){return r instanceof Wi&&$l(r)}function $_(r){return mm(r)||ym(r)||function(e){if(e instanceof Wi&&wu(e)){for(const t of e.getFilters())if(!mm(t)&&!ym(t))return!1;return!0}return!1}(r)}function Gu(r){if(Wt(r instanceof gi||r instanceof Wi),r instanceof gi)return r;if(1===r.filters.length)return Gu(r.filters[0]);const e=r.filters.map(s=>Gu(s));let t=Wi.create(e,r.op);return t=dh(t),$_(t)?t:(Wt(t instanceof Wi),Wt(nl(t)),Wt(t.filters.length>1),t.filters.reduce((s,a)=>ch(s,a)))}function ch(r,e){let t;return Wt(r instanceof gi||r instanceof Wi),Wt(e instanceof gi||e instanceof Wi),t=r instanceof gi?e instanceof gi?Wi.create([r,e],"and"):_m(r,e):e instanceof gi?_m(e,r):function(s,a){if(Wt(s.filters.length>0&&a.filters.length>0),nl(s)&&nl(a))return x(s,a.getFilters());const d=wu(s)?s:a,g=wu(s)?a:s,R=d.filters.map(G=>ch(G,g));return Wi.create(R,"or")}(r,e),dh(t)}function _m(r,e){if(nl(e))return x(e,r.getFilters());{const t=e.filters.map(s=>ch(r,s));return Wi.create(t,"or")}}function dh(r){if(Wt(r instanceof gi||r instanceof Wi),r instanceof gi)return r;const e=r.getFilters();if(1===e.length)return dh(e[0]);if(N(r))return r;const t=e.map(a=>dh(a)),s=[];return t.forEach(a=>{a instanceof gi?s.push(a):a instanceof Wi&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Wi.create(s,r.op)}class Op{constructor(){this.rn=new pf}addToCollectionParentIndex(e,t){return this.rn.add(t),gt.resolve()}getCollectionParents(e,t){return gt.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return gt.resolve()}deleteFieldIndex(e,t){return gt.resolve()}getDocumentsMatchingTarget(e,t){return gt.resolve(null)}getIndexType(e,t){return gt.resolve(0)}getFieldIndexes(e,t){return gt.resolve([])}getNextCollectionGroupToUpdate(e){return gt.resolve(null)}getMinOffset(e,t){return gt.resolve(Do.min())}getMinOffsetFromCollectionGroup(e,t){return gt.resolve(Do.min())}updateCollectionGroup(e,t,s){return gt.resolve()}updateIndexEntries(e,t){return gt.resolve()}}class pf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Qi(pi.comparator),d=!a.has(s);return this.index[t]=a.add(s),d}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Qi(pi.comparator)).toArray()}}const Ed=new Uint8Array(0);class G_{constructor(e,t){this.user=e,this.databaseId=t,this.on=new pf,this.un=new ea(s=>rt(s),(s,a)=>$t(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const d={collectionId:s,parent:fs(a)};return cc(e).put(d)}return gt.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[rc(t),""],!1,!0);return cc(e).j(a).next(d=>{for(const g of d){if(g.collectionId!==t)break;s.push(Ws(g.parent))}return s})}addFieldIndex(e,t){const s=gf(e),a={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var g;delete a.indexId;const d=s.add(a);if(t.indexState){const g=zc(e);return d.next(R=>{g.put(hm(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const s=gf(e),a=zc(e),d=wd(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=wd(e);let a=!0;const d=new Map;return gt.forEach(this.cn(t),g=>this.an(e,g).next(R=>{a&&(a=!!R),d.set(g,R)})).next(()=>{if(a){let g=yi();const R=[];return gt.forEach(d,(G,X)=>{var ge;fe("IndexedDbIndexManager",`Using index ${ge=G,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(zr=>`${zr.fieldPath}:${zr.kind}`).join(",")}`} to execute ${rt(t)}`);const $e=function(zr,Go){const qs=Ma(Go);if(void 0===qs)return null;for(const Zs of Pn(zr,qs.fieldPath))switch(Zs.op){case"array-contains-any":return Zs.value.arrayValue.values||[];case"array-contains":return[Zs.value]}return null}(X,G),It=function(zr,Go){const qs=new Map;for(const Zs of Tl(Go))for(const Pl of Pn(zr,Zs.fieldPath))switch(Pl.op){case"==":case"in":qs.set(Zs.fieldPath.canonicalString(),Pl.value);break;case"not-in":case"!=":return qs.set(Zs.fieldPath.canonicalString(),Pl.value),Array.from(qs.values())}return null}(X,G),Gt=function(zr,Go){const qs=[];let Zs=!0;for(const Pl of Tl(Go)){const Lc=0===Pl.kind?Wn(zr,Pl.fieldPath,zr.startAt):xr(zr,Pl.fieldPath,zr.startAt);qs.push(Lc.value),Zs&&(Zs=Lc.inclusive)}return new Xo(qs,Zs)}(X,G),In=function(zr,Go){const qs=[];let Zs=!0;for(const Pl of Tl(Go)){const Lc=0===Pl.kind?xr(zr,Pl.fieldPath,zr.endAt):Wn(zr,Pl.fieldPath,zr.endAt);qs.push(Lc.value),Zs&&(Zs=Lc.inclusive)}return new Xo(qs,Zs)}(X,G),Hn=this.hn(G,X,Gt),Zn=this.hn(G,X,In),Wr=this.ln(G,X,It),zi=this.fn(G.indexId,$e,Hn,Gt.inclusive,Zn,In.inclusive,Wr);return gt.forEach(zi,zr=>s.H(zr,t.limit).next(Go=>{Go.forEach(qs=>{const Zs=fn.fromSegments(qs.documentKey);g.has(Zs)||(g=g.add(Zs),R.push(Zs))})}))}).next(()=>R)}return gt.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:dE(Wi.create(e.filters,"and")).map(s=>Ve(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,d,g,R){const G=(null!=t?t.length:1)*Math.max(s.length,d.length),X=G/(null!=t?t.length:1),ge=[];for(let $e=0;$e<G;++$e){const It=t?this.dn(t[$e/X]):Ed,Gt=this.wn(e,It,s[$e%X],a),In=this._n(e,It,d[$e%X],g),Hn=R.map(Zn=>this.wn(e,It,Zn,!0));ge.push(...this.createRange(Gt,In,Hn))}return ge}wn(e,t,s,a){const d=new vd(e,fn.empty(),t,s);return a?d:d.Je()}_n(e,t,s,a){const d=new vd(e,fn.empty(),t,s);return a?d.Je():d}an(e,t){const s=new cE(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(d=>{let g=null;for(const R of d)s.tn(R)&&(!g||R.fields.length>g.fields.length)&&(g=R);return g})}getIndexType(e,t){let s=2;const a=this.cn(t);return gt.forEach(a,d=>this.an(e,d).next(g=>{g?0!==s&&g.fields.length<function(R){let G=new Qi(Ms.comparator),X=!1;for(const ge of R.filters)for(const $e of ge.getFlattenedFilters())$e.field.isKeyField()||("array-contains"===$e.op||"array-contains-any"===$e.op?X=!0:G=G.add($e.field));for(const ge of R.orderBy)ge.field.isKeyField()||(G=G.add(ge.field));return G.size+(X?1:0)}(d)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new ff;for(const a of Tl(e)){const d=t.data.field(a.fieldPath);if(null==d)return null;const g=s.He(a.kind);Gc.Ve._e(d,g)}return s.Qe()}dn(e){const t=new ff;return Gc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new ff;return Gc.Ve._e(A(this.databaseId,t),s.He(function(a){const d=Tl(a);return 0===d.length?0:d[d.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new ff);let d=0;for(const g of Tl(e)){const R=s[d++];for(const G of a)if(this.yn(t,g.fieldPath)&&ne(R))a=this.pn(a,g,R);else{const X=G.He(g.kind);Gc.Ve._e(R,X)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],d=[];for(const g of s.arrayValue.values||[])for(const R of a){const G=new ff;G.seed(R.Qe()),Gc.Ve._e(g,G.He(t.kind)),d.push(G)}return d}yn(e,t){return!!e.filters.find(s=>s instanceof gi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=gf(e),a=zc(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(d=>{const g=[];return gt.forEach(d,R=>a.get([R.indexId,this.uid]).next(G=>{g.push(function(X,ge){const $e=ge?new ql(ge.sequenceNumber,new Do(_d(ge.readTime),new fn(Ws(ge.documentKey)),ge.largestBatchId)):ql.empty(),It=X.fields.map(([Gt,In])=>new Ls(Ms.fromServerFormat(Gt),In));return new qa(X.indexId,X.collectionGroup,It,$e)}(R,G))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const d=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==d?d:Ar(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=gf(e),d=zc(e);return this.Tn(e).next(g=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>gt.forEach(R,G=>d.put(hm(G.indexId,this.user,g,s)))))}updateIndexEntries(e,t){const s=new Map;return gt.forEach(t,(a,d)=>{const g=s.get(a.collectionGroup);return(g?gt.resolve(g):this.getFieldIndexes(e,a.collectionGroup)).next(R=>(s.set(a.collectionGroup,R),gt.forEach(R,G=>this.En(e,a,G).next(X=>{const ge=this.An(d,G);return X.isEqual(ge)?gt.resolve():this.vn(e,d,G,X,ge)}))))})}Rn(e,t,s,a){return wd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return wd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=wd(e);let d=new Qi(Wc);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(g,R)=>{d=d.add(new vd(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>d)}An(e,t){let s=new Qi(Wc);const a=this.mn(t,e);if(null==a)return s;const d=Ma(t);if(null!=d){const g=e.data.field(d.fieldPath);if(ne(g))for(const R of g.arrayValue.values||[])s=s.add(new vd(t.indexId,e.key,this.dn(R),a))}else s=s.add(new vd(t.indexId,e.key,Ed,a));return s}vn(e,t,s,a,d){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(R,G,X,ge,$e){const It=R.getIterator(),Gt=G.getIterator();let In=ka(It),Hn=ka(Gt);for(;In||Hn;){let Zn=!1,Wr=!1;if(In&&Hn){const zi=X(In,Hn);zi<0?Wr=!0:zi>0&&(Zn=!0)}else null!=In?Wr=!0:Zn=!0;Zn?(ge(Hn),Hn=ka(Gt)):Wr?($e(In),In=ka(It)):(In=ka(It),Hn=ka(Gt))}}(a,d,Wc,R=>{g.push(this.Rn(e,t,s,R))},R=>{g.push(this.Pn(e,t,s,R))}),gt.waitFor(g)}Tn(e){let t=1;return zc(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,d)=>{d.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((g,R)=>Wc(g,R)).filter((g,R,G)=>!R||0!==Wc(g,G[R-1]));const a=[];a.push(e);for(const g of s){const R=Wc(g,e),G=Wc(g,t);if(0===R)a[0]=e.Je();else if(R>0&&G<0)a.push(g),a.push(g.Je());else if(G>0)break}a.push(t);const d=[];for(let g=0;g<a.length;g+=2){if(this.bn(a[g],a[g+1]))return[];d.push(IDBKeyRange.bound([a[g].indexId,this.uid,a[g].arrayValue,a[g].directionalValue,Ed,[]],[a[g+1].indexId,this.uid,a[g+1].arrayValue,a[g+1].directionalValue,Ed,[]]))}return d}bn(e,t){return Wc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vm)}getMinOffset(e,t){return gt.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||Jt())).next(vm)}}function cc(r){return is(r,"collectionParents")}function wd(r){return is(r,"indexEntries")}function gf(r){return is(r,"indexConfiguration")}function zc(r){return is(r,"indexState")}function vm(r){Wt(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;Au(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Do(e.readTime,e.documentKey,t)}const kp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _l{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new _l(e,_l.DEFAULT_COLLECTION_PERCENTILE,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Em(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let R=0;const G=s.X({range:g},(ge,$e,It)=>(R++,It.delete()));d.push(G.next(()=>{Wt(1===R)}));const X=[];for(const ge of t.mutations){const $e=Qa(e,ge.key.path,t.batchId);d.push(a.delete($e)),X.push(ge.key)}return gt.waitFor(d).next(()=>X)}function Tc(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Jt();e=r.noDocument}return JSON.stringify(e).length}_l.DEFAULT_COLLECTION_PERCENTILE=10,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_l.DEFAULT=new _l(41943040,_l.DEFAULT_COLLECTION_PERCENTILE,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_l.DISABLED=new _l(-1,0,0);class dc{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){Wt(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new dc(d,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).X({index:"userMutationsIndex",range:s},(a,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const d=Wu(e),g=ru(e);return g.add({}).next(R=>{Wt("number"==typeof R);const G=new Mt(R,t,s,a),X=function(It,Gt,In){const Hn=In.baseMutations.map(Wr=>oh(It.fe,Wr)),Zn=In.mutations.map(Wr=>oh(It.fe,Wr));return{userId:Gt,batchId:In.batchId,localWriteTimeMs:In.localWriteTime.toMillis(),baseMutations:Hn,mutations:Zn}}(this.serializer,this.userId,G),ge=[];let $e=new Qi((It,Gt)=>Ar(It.canonicalString(),Gt.canonicalString()));for(const It of a){const Gt=Qa(this.userId,It.key.path,R);$e=$e.add(It.key.path.popLast()),ge.push(g.put(X)),ge.push(d.put(Gt,du))}return $e.forEach(It=>{ge.push(this.indexManager.addToCollectionParentIndex(e,It))}),e.addOnCommittedListener(()=>{this.Vn[R]=G.keys()}),gt.waitFor(ge).next(()=>G)})}lookupMutationBatch(e,t){return ru(e).get(t).next(s=>s?(Wt(s.userId===this.userId),$u(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?gt.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return ru(e).X({index:"userMutationsIndex",range:a},(g,R,G)=>{R.userId===this.userId&&(Wt(R.batchId>=s),d=$u(this.serializer,R)),G.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ru(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).j("userMutationsIndex",t).next(s=>s.map(a=>$u(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=cu(this.userId,t.path),a=IDBKeyRange.lowerBound(s),d=[];return Wu(e).X({range:a},(g,R,G)=>{const[X,ge,$e]=g,It=Ws(ge);if(X===this.userId&&t.path.isEqual(It))return ru(e).get($e).next(Gt=>{if(!Gt)throw Jt();Wt(Gt.userId===this.userId),d.push($u(this.serializer,Gt))});G.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Qi(Ar);const a=[];return t.forEach(d=>{const g=cu(this.userId,d.path),R=IDBKeyRange.lowerBound(g),G=Wu(e).X({range:R},(X,ge,$e)=>{const[It,Gt,In]=X,Hn=Ws(Gt);It===this.userId&&d.path.isEqual(Hn)?s=s.add(In):$e.done()});a.push(G)}),gt.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,d=cu(this.userId,s),g=IDBKeyRange.lowerBound(d);let R=new Qi(Ar);return Wu(e).X({range:g},(G,X,ge)=>{const[$e,It,Gt]=G,In=Ws(It);$e===this.userId&&s.isPrefixOf(In)?In.length===a&&(R=R.add(Gt)):ge.done()}).next(()=>this.Dn(e,R))}Dn(e,t){const s=[],a=[];return t.forEach(d=>{a.push(ru(e).get(d).next(g=>{if(null===g)throw Jt();Wt(g.userId===this.userId),s.push($u(this.serializer,g))}))}),gt.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Em(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),gt.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return gt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Wu(e).X({range:s},(d,g,R)=>{if(d[0]===this.userId){const G=Ws(d[1]);a.push(G)}else R.done()}).next(()=>{Wt(0===a.length)})})}containsKey(e,t){return mf(e,this.userId,t)}xn(e){return Kc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mf(r,e,t){const s=cu(e,t.path),a=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return Wu(r).X({range:d,Y:!0},(R,G,X)=>{const[ge,$e,It]=R;ge===e&&$e===a&&(g=!0),X.done()}).next(()=>g)}function ru(r){return is(r,"mutations")}function Wu(r){return is(r,"documentMutations")}function Kc(r){return is(r,"mutationQueues")}class qc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qc(0)}static Mn(){return new qc(-1)}}class wm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new qc(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Gn.fromTimestamp(new hs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(Wt(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const d=[];return Zc(e).X((g,R)=>{const G=Ic(R);G.sequenceNumber<=t&&null===s.get(G.targetId)&&(a++,d.push(this.removeTargetData(e,G)))}).next(()=>gt.waitFor(d)).next(()=>a)}forEachTarget(e,t){return Zc(e).X((s,a)=>{const d=Ic(a);t(d)})}$n(e){return yf(e).get("targetGlobalKey").next(t=>(Wt(null!==t),t))}On(e,t){return yf(e).put("targetGlobalKey",t)}Fn(e,t){return Zc(e).put(df(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=rt(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Zc(e).X({range:a,index:"queryTargetsIndex"},(g,R,G)=>{const X=Ic(R);$t(t,X.target)&&(d=X,G.done())}).next(()=>d)}addMatchingKeys(e,t,s){const a=[],d=zu(e);return t.forEach(g=>{const R=fs(g.path);a.push(d.put({targetId:s,path:R})),a.push(this.referenceDelegate.addReference(e,s,g))}),gt.waitFor(a)}removeMatchingKeys(e,t,s){const a=zu(e);return gt.forEach(t,d=>{const g=fs(d.path);return gt.waitFor([a.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,t){const s=zu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=zu(e);let d=yi();return a.X({range:s,Y:!0},(g,R,G)=>{const X=Ws(g[1]),ge=new fn(X);d=d.add(ge)}).next(()=>d)}containsKey(e,t){const s=fs(t.path),a=IDBKeyRange.bound([s],[rc(s)],!1,!0);let d=0;return zu(e).X({index:"documentTargetsIndex",Y:!0,range:a},([g,R],G,X)=>{0!==g&&(d++,X.done())}).next(()=>d>0)}le(e,t){return Zc(e).get(t).next(s=>s?Ic(s):null)}}function Zc(r){return is(r,"targets")}function yf(r){return is(r,"targetGlobal")}function zu(r){return is(r,"targetDocuments")}function Fp([r,e],[t,s]){const a=Ar(r,t);return 0===a?Ar(e,s):a}class _f{constructor(e){this.Ln=e,this.buffer=new Qi(Fp),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Fp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cm{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ge.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Qo(s)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield cl(s)}yield t.Qn(3e5)}))}}class Im{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return gt.resolve(co.ct);const s=new _f(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(kp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kp):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,d,g,R,G,X;const ge=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next($e=>($e>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${$e}`),a=this.params.maximumSequenceNumbersToCollect):a=$e,g=Date.now(),this.nthSequenceNumber(e,a))).next($e=>(s=$e,R=Date.now(),this.removeTargets(e,s,t))).next($e=>(d=$e,G=Date.now(),this.removeOrphanedDocuments(e,s))).next($e=>(X=Date.now(),Q()<=De.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-ge}ms\n\tDetermined least recently used ${a} in `+(R-g)+`ms\n\tRemoved ${d} targets in `+(G-R)+`ms\n\tRemoved ${$e} documents in `+(X-G)+`ms\nTotal Duration: ${X-ge}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:d,documentsRemoved:$e})))}}class Tm{constructor(e,t){this.db=e,this.garbageCollector=function W_(r,e){return new Im(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return hh(e,s)}removeReference(e,t,s){return hh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return hh(e,t)}Xn(e,t){return function(s,a){let d=!1;return Kc(s).Z(g=>mf(s,g,a).next(R=>(R&&(d=!0),gt.resolve(!R)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let d=0;return this.Yn(e,(g,R)=>{if(R<=t){const G=this.Xn(e,g).next(X=>{if(!X)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,Gn.min()),zu(e).delete([0,fs(g.path)])))});a.push(G)}}).next(()=>gt.waitFor(a)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return hh(e,t)}Yn(e,t){const s=zu(e);let a,d=co.ct;return s.X({index:"documentTargetsIndex"},([g,R],{path:G,sequenceNumber:X})=>{0===g?(d!==co.ct&&t(new fn(Ws(a)),d),d=X,a=G):d=co.ct}).next(()=>{d!==co.ct&&t(new fn(Ws(a)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hh(r,e){return zu(r).put((s=r.currentSequenceNumber,{targetId:0,path:fs(e.path),sequenceNumber:s}));var s}class bm{constructor(){this.changes=new ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?gt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Dm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Yc(e).put(s)}removeEntry(e,t,s){return Yc(e).delete(function(a,d){const g=a.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],xp(d),g[g.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Ti.newInvalidDocument(t);return Yc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fh(t))},(a,d)=>{s=this.ts(t,d)}).next(()=>s)}es(e,t){let s={size:0,document:Ti.newInvalidDocument(t)};return Yc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fh(t))},(a,d)=>{s={document:this.ts(t,d),size:Tc(d)}}).next(()=>s)}getEntries(e,t){let s=Ca();return this.ns(e,t,(a,d)=>{const g=this.ts(a,d);s=s.insert(a,g)}).next(()=>s)}ss(e,t){let s=Ca(),a=new ki(fn.comparator);return this.ns(e,t,(d,g)=>{const R=this.ts(d,g);s=s.insert(d,R),a=a.insert(d,Tc(g))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return gt.resolve();let a=new Qi(q_);t.forEach(G=>a=a.add(G));const d=IDBKeyRange.bound(fh(a.first()),fh(a.last())),g=a.getIterator();let R=g.getNext();return Yc(e).X({index:"documentKeyIndex",range:d},(G,X,ge)=>{const $e=fn.fromSegments([...X.prefixPath,X.collectionGroup,X.documentId]);for(;R&&q_(R,$e)<0;)s(R,null),R=g.getNext();R&&R.isEqual($e)&&(s(R,X),R=g.hasNext()?g.getNext():null),R?ge.G(fh(R)):ge.done()}).next(()=>{for(;R;)s(R,null),R=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const d=t.path,g=[d.popLast().toArray(),d.lastSegment(),xp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],R=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).j(IDBKeyRange.bound(g,R,!0)).next(G=>{let X=Ca();for(const ge of G){const $e=this.ts(fn.fromSegments(ge.prefixPath.concat(ge.collectionGroup,ge.documentId)),ge);$e.isFoundDocument()&&(mi(t,$e)||a.has($e.key))&&(X=X.insert($e.key,$e))}return X})}getAllFromCollectionGroup(e,t,s,a){let d=Ca();const g=K_(t,s),R=K_(t,Do.max());return Yc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,R,!0)},(G,X,ge)=>{const $e=this.ts(fn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);d=d.insert($e.key,$e),d.size===a&&ge.done()}).next(()=>d)}newChangeBuffer(e){return new z_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gl(e).get("remoteDocumentGlobalKey").next(t=>(Wt(!!t),t))}Zn(e,t){return Gl(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function dm(r,e){let t;if(e.document)t=sm(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=fn.fromSegments(e.noDocument.path),a=_d(e.noDocument.readTime);t=Ti.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Jt();{const s=fn.fromSegments(e.unknownDocument.path),a=_d(e.unknownDocument.version);t=Ti.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new hs(s[0],s[1]);return Gn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Gn.min()))return s}return Ti.newInvalidDocument(e)}}function Sm(r){return new Dm(r)}class z_ extends bm{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ea(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Qi((d,g)=>Ar(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const R=this.us.get(d);if(t.push(this.os.removeEntry(e,d,R.readTime)),g.isValidDocument()){const G=cf(this.os.serializer,g);a=a.add(d.path.popLast()),s+=Tc(G)-R.size,t.push(this.os.addEntry(e,d,G))}else if(s-=R.size,this.trackRemovals){const G=cf(this.os.serializer,g.convertToNoDocument(Gn.min()));t.push(this.os.addEntry(e,d,G))}}),a.forEach(d=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.os.updateMetadata(e,s)),gt.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((d,g)=>{this.us.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function Gl(r){return is(r,"remoteDocumentGlobal")}function Yc(r){return is(r,"remoteDocumentsV14")}function fh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function K_(r,e){const t=e.documentKey.path.toArray();return[r,xp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function q_(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let d=0;d<t.length-2&&d<s.length-2;++d)if(a=Ar(t[d],s[d]),a)return a;return a=Ar(t.length,s.length),a||(a=Ar(t[t.length-2],s[s.length-2]),a||Ar(t[t.length-1],s[s.length-1]))}class Am{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Z_{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&f(s.mutation,a,Gi.empty(),hs.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,yi()).next(()=>s))}getLocalViewOfDocuments(e,t,s=yi()){const a=ta();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(d=>{let g=No();return d.forEach((R,G)=>{g=g.insert(R,G.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const s=ta();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,yi()))}populateOverlays(e,t,s){const a=[];return s.forEach(d=>{t.has(d)||a.push(d)}),this.documentOverlayCache.getOverlays(e,a).next(d=>{d.forEach((g,R)=>{t.set(g,R)})})}computeViews(e,t,s,a){let d=Ca();const g=ml(),R=ml();return t.forEach((G,X)=>{const ge=s.get(X.key);a.has(X.key)&&(void 0===ge||ge.mutation instanceof S)?d=d.insert(X.key,X):void 0!==ge?(g.set(X.key,ge.mutation.getFieldMask()),f(ge.mutation,X,ge.mutation.getFieldMask(),hs.now())):g.set(X.key,Gi.empty())}),this.recalculateAndSaveOverlays(e,d).next(G=>(G.forEach((X,ge)=>g.set(X,ge)),t.forEach((X,ge)=>{var $e;return R.set(X,new Am(ge,null!==($e=g.get(X))&&void 0!==$e?$e:null))}),R))}recalculateAndSaveOverlays(e,t){const s=ml();let a=new ki((g,R)=>g-R),d=yi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const R of g)R.keys().forEach(G=>{const X=t.get(G);if(null===X)return;let ge=s.get(G)||Gi.empty();ge=R.applyToLocalView(X,ge),s.set(G,ge);const $e=(a.get(R.batchId)||yi()).add(G);a=a.insert(R.batchId,$e)})}).next(()=>{const g=[],R=a.getReverseIterator();for(;R.hasNext();){const G=R.getNext(),X=G.key,ge=G.value,$e=ua();ge.forEach(It=>{if(!d.has(It)){const Gt=Zg(t.get(It),s.get(It));null!==Gt&&$e.set(It,Gt),d=d.add(It)}}),g.push(this.documentOverlayCache.saveOverlays(e,X,$e))}return gt.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return fn.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ao(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(d=>{const g=a-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-d.size):gt.resolve(ta());let R=-1,G=d;return g.next(X=>gt.forEach(X,(ge,$e)=>(R<$e.largestBatchId&&(R=$e.largestBatchId),d.get(ge)?gt.resolve():this.remoteDocumentCache.getEntry(e,ge).next(It=>{G=G.insert(ge,It)}))).next(()=>this.populateOverlays(e,X,d)).next(()=>this.computeViews(e,G,X,yi())).next(ge=>({batchId:R,changes:Iu(ge)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fn(t)).next(s=>{let a=No();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let d=No();return this.indexManager.getCollectionParents(e,a).next(g=>gt.forEach(g,R=>{const G=(X=t,ge=R.child(a),new ts(ge,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,ge;return this.getDocumentsMatchingCollectionQuery(e,G,s).next(X=>{X.forEach((ge,$e)=>{d=d.insert(ge,$e)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(a=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(d=>{a.forEach((R,G)=>{const X=G.getKey();null===d.get(X)&&(d=d.insert(X,Ti.newInvalidDocument(X)))});let g=No();return d.forEach((R,G)=>{const X=a.get(R);void 0!==X&&f(X.mutation,G,Gi.empty(),hs.now()),mi(t,G)&&(g=g.insert(R,G))}),g})}}class Y_{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return gt.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Ho(s.createTime)}),gt.resolve()}getNamedQuery(e,t){return gt.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:ah(s.bundledQuery),readTime:Ho(s.readTime)}),gt.resolve();var s}}class Lp{constructor(){this.overlays=new ki(fn.comparator),this.ls=new Map}getOverlay(e,t){return gt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ta();return gt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,d)=>{this.we(e,t,d)}),gt.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(d=>this.overlays=this.overlays.remove(d)),this.ls.delete(s)),gt.resolve()}getOverlaysForCollection(e,t,s){const a=ta(),d=t.length+1,g=new fn(t.child("")),R=this.overlays.getIteratorFrom(g);for(;R.hasNext();){const G=R.getNext().value,X=G.getKey();if(!t.isPrefixOf(X.path))break;X.path.length===d&&G.largestBatchId>s&&a.set(G.getKey(),G)}return gt.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let d=new ki((X,ge)=>X-ge);const g=this.overlays.getIterator();for(;g.hasNext();){const X=g.getNext().value;if(X.getKey().getCollectionGroup()===t&&X.largestBatchId>s){let ge=d.get(X.largestBatchId);null===ge&&(ge=ta(),d=d.insert(X.largestBatchId,ge)),ge.set(X.getKey(),X)}}const R=ta(),G=d.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((X,ge)=>R.set(X,ge)),!(R.size()>=a)););return gt.resolve(R)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const g=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new nn(t,s));let d=this.ls.get(t);void 0===d&&(d=yi(),this.ls.set(t,d)),this.ls.set(t,d.add(s.key))}}class vf{constructor(){this.fs=new Qi(ja.ds),this.ws=new Qi(ja._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new ja(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new ja(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new fn(new pi([])),s=new ja(t,e),a=new ja(t,e+1),d=[];return this.ws.forEachInRange([s,a],g=>{this.ys(g),d.push(g.key)}),d}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new fn(new pi([])),s=new ja(t,e),a=new ja(t,e+1);let d=yi();return this.ws.forEachInRange([s,a],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new ja(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class ja{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return fn.comparator(e.key,t.key)||Ar(e.As,t.As)}static _s(e,t){return Ar(e.As,t.As)||fn.comparator(e.key,t.key)}}class Q_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Qi(ja.ds)}checkEmpty(e){return gt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const d=this.vs;this.vs++;const g=new Mt(d,t,s,a);this.mutationQueue.push(g);for(const R of a)this.Rs=this.Rs.add(new ja(R.key,d)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return gt.resolve(g)}lookupMutationBatch(e,t){return gt.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),d=a<0?0:a;return gt.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ja(t,0),a=new ja(t,Number.POSITIVE_INFINITY),d=[];return this.Rs.forEachInRange([s,a],g=>{const R=this.Ps(g.As);d.push(R)}),gt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Qi(Ar);return t.forEach(a=>{const d=new ja(a,0),g=new ja(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([d,g],R=>{s=s.add(R.As)})}),gt.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let d=s;fn.isDocumentKey(d)||(d=d.child(""));const g=new ja(new fn(d),0);let R=new Qi(Ar);return this.Rs.forEachWhile(G=>{const X=G.key.path;return!!s.isPrefixOf(X)&&(X.length===a&&(R=R.add(G.As)),!0)},g),gt.resolve(this.Vs(R))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return gt.forEach(t.mutations,a=>{const d=new ja(a.key,t.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new ja(t,0),a=this.Rs.firstAfterOrEqual(s);return gt.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return gt.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class J_{constructor(e){this.Ds=e,this.docs=new ki(fn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),d=a?a.size:0,g=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return gt.resolve(s?s.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let s=Ca();return t.forEach(a=>{const d=this.docs.get(a);s=s.insert(a,d?d.document.mutableCopy():Ti.newInvalidDocument(a))}),gt.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let d=Ca();const g=t.path,R=new fn(g.child("")),G=this.docs.getIteratorFrom(R);for(;G.hasNext();){const{key:X,value:{document:ge}}=G.getNext();if(!g.isPrefixOf(X.path))break;X.path.length>g.length+1||Au(ul(ge),s)<=0||(a.has(ge.key)||mi(t,ge))&&(d=d.insert(ge.key,ge.mutableCopy()))}return gt.resolve(d)}getAllFromCollectionGroup(e,t,s,a){Jt()}Cs(e,t){return gt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Rm(this)}getSize(e){return gt.resolve(this.size)}}class Rm extends bm{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),gt.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class X_{constructor(e){this.persistence=e,this.xs=new ea(t=>rt(t),$t),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new vf,this.targetCount=0,this.Ms=qc.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),gt.resolve()}getLastRemoteSnapshotVersion(e){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gt.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),gt.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new qc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,gt.resolve()}updateTargetData(e,t){return this.Fn(t),gt.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,gt.resolve()}removeTargets(e,t,s){let a=0;const d=[];return this.xs.forEach((g,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.xs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,R.targetId)),a++)}),gt.waitFor(d).next(()=>a)}getTargetCount(e){return gt.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return gt.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),gt.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,d=[];return a&&t.forEach(g=>{d.push(a.markPotentiallyOrphaned(e,g))}),gt.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),gt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return gt.resolve(s)}containsKey(e,t){return gt.resolve(this.ks.containsKey(t))}}class Ef{constructor(e,t){this.$s={},this.overlays={},this.Os=new co(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new X_(this),this.indexManager=new Op,this.remoteDocumentCache=new J_(s=>this.referenceDelegate.Ls(s)),this.serializer=new uf(t),this.qs=new Y_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Q_(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const a=new ev(this.Os.next());return this.referenceDelegate.Us(),s(a).next(d=>this.referenceDelegate.Ks(a).next(()=>d)).toPromise().then(d=>(a.raiseOnCommittedEvent(),d))}Gs(e,t){return gt.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class ev extends Ru{constructor(e){super(),this.currentSequenceNumber=e}}class wf{constructor(e){this.persistence=e,this.Qs=new vf,this.js=null}static zs(e){return new wf(e)}get Ws(){if(this.js)return this.js;throw Jt()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),gt.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),gt.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),gt.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(d=>this.Ws.add(d.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.Ws,s=>{const a=fn.fromPath(s);return this.Hs(e,a).next(d=>{d||t.removeEntry(a,Gn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return gt.or([()=>gt.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Mm{constructor(e){this.serializer=e}O(e,t,s,a){const d=new dl("createOrUpgrade",t);var R;s<1&&a>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hl,{unique:!0}),R.createObjectStore("documentMutations"),xm(e),function(R){R.createObjectStore("remoteDocuments")}(e));let g=gt.resolve();return s<3&&a>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),xm(e)),g=g.next(()=>function(R){const G=R.store("targetGlobal"),X={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",X)}(d))),s<4&&a>=4&&(0!==s&&(g=g.next(()=>function(R,G){return G.store("mutations").j().next(X=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hl,{unique:!0});const ge=G.store("mutations"),$e=X.map(It=>ge.put(It));return gt.waitFor($e)})}(e,d))),g=g.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(g=g.next(()=>this.Ys(d))),s<6&&a>=6&&(g=g.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(d)))),s<7&&a>=7&&(g=g.next(()=>this.Zs(d))),s<8&&a>=8&&(g=g.next(()=>this.ti(e,d))),s<9&&a>=9&&(g=g.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(g=g.next(()=>this.ei(d))),s<11&&a>=11&&(g=g.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(g=g.next(()=>{!function(R){const G=R.createObjectStore("documentOverlays",{keyPath:ju});G.createIndex("collectionPathOverlayIndex",Ul,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",mu,{unique:!1})}(e)})),s<13&&a>=13&&(g=g.next(()=>function(R){const G=R.createObjectStore("remoteDocumentsV14",{keyPath:bl});G.createIndex("documentKeyIndex",Vs),G.createIndex("collectionGroupIndex",Uu)}(e)).next(()=>this.ni(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(g=g.next(()=>this.si(e,d))),s<15&&a>=15&&(g=g.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:Ql}).createIndex("sequenceNumberIndex",Mu,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:Bu}).createIndex("documentKeyIndex",gu,{unique:!1})}(e))),g}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Tc(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>gt.forEach(a,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",g).next(R=>gt.forEach(R,G=>{Wt(G.userId===d.userId);const X=$u(this.serializer,G);return Em(e,d.userId,X).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const d=[];return s.X((g,R)=>{const G=new pi(g),X=[0,fs(G)];d.push(t.get(X).next(ge=>ge?gt.resolve():t.put({targetId:0,path:fs(G),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>gt.waitFor(d))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:pu});const s=t.store("collectionParents"),a=new pf,d=g=>{if(a.add(g)){const R=g.lastSegment(),G=g.popLast();return s.put({collectionId:R,parent:fs(G)})}};return t.store("remoteDocuments").X({Y:!0},(g,R)=>{const G=new pi(g);return d(G.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([g,R,G],X)=>{const ge=Ws(R);return d(ge.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const d=Ic(a),g=df(this.serializer,d);return t.put(g)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((d,g)=>{const R=t.store("remoteDocumentsV14"),G=(X=g,X.document?new fn(pi.fromString(X.document.name).popFirst(5)):X.noDocument?fn.fromSegments(X.noDocument.path):X.unknownDocument?fn.fromSegments(X.unknownDocument.path):Jt()).path.toArray();var X;const ge={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};a.push(R.put(ge))}).next(()=>gt.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Sm(this.serializer),d=new Ef(wf.zs,this.serializer.fe);return s.j().next(g=>{const R=new Map;return g.forEach(G=>{var X;let ge=null!==(X=R.get(G.userId))&&void 0!==X?X:yi();$u(this.serializer,G).keys().forEach($e=>ge=ge.add($e)),R.set(G.userId,ge)}),gt.forEach(R,(G,X)=>{const ge=new D(X),$e=uh.de(this.serializer,ge),It=d.getIndexManager(ge),Gt=dc.de(ge,this.serializer,It,d.referenceDelegate);return new Z_(a,Gt,$e,It).recalculateAndSaveOverlaysForDocumentKeys(new Jl(t,co.ct),G).next()})})}}function xm(r){r.createObjectStore("targetDocuments",{keyPath:hu}).createIndex("documentTargetsIndex",fu,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Vl,{unique:!0}),r.createObjectStore("targetGlobal")}const bu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gh{constructor(e,t,s,a,d,g,R,G,X,ge,$e=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=d,this.window=g,this.document=R,this.ri=X,this.oi=ge,this.ui=$e,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=It=>Promise.resolve(),!gh.D())throw new jt(Dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tm(this,a),this.di=t+"main",this.serializer=new uf(G),this.wi=new ro(this.di,this.ui,new Mm(this.serializer)),this.Bs=new wm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sm(this.serializer),this.qs=new U_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ge&&Le("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new jt(Dt.FAILED_PRECONDITION,bu);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new co(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,Ge.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ge.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ge.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Qo(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return mh(e).get("owner").next(t=>gt.resolve(this.Ri(t)))}Pi(e){return Cf(e).delete(this.clientId)}bi(){var e=this;return(0,Ge.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=is(s,"clientMetadata");return a.j().next(d=>{const g=e.Si(d,18e5),R=d.filter(G=>-1===g.indexOf(G));return gt.forEach(R,G=>a.delete(G.clientId)).next(()=>R)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?gt.resolve(!0):mh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new jt(Dt.FAILED_PRECONDITION,bu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cf(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const g=!this.inForeground&&a.inForeground,R=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||g&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ge.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Jl(t,co.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Cf(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return dc.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new G_(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return uh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){fe("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",d=15===(g=this.ui)?Bl:14===g?ma:13===g?fl:12===g?_u:11===g?yu:void Jt();var g;let R;return this.wi.runTransaction(e,a,d,G=>(R=new Jl(G,this.Os?this.Os.next():co.ct),"readwrite-primary"===t?this.Ti(R).next(X=>!!X||this.Ei(R)).next(X=>{if(!X)throw Le(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new jt(Dt.FAILED_PRECONDITION,Zl);return s(R)}).next(X=>this.vi(R).next(()=>X)):this.Oi(R).next(()=>s(R)))).then(G=>(R.raiseOnCommittedEvent(),G))}Oi(e){return mh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new jt(Dt.FAILED_PRECONDITION,bu)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mh(e).put("owner",t)}static D(){return ro.D()}Ai(e){const t=mh(e);return t.get("owner").next(s=>this.Ri(s)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):gt.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Le(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Je.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return fe("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Le("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Le("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mh(r){return is(r,"owner")}function Cf(r){return is(r,"clientMetadata")}function Pm(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class If{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=yi(),a=yi();for(const d of t.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:a=a.add(d.doc.key)}return new If(e,t.fromCache,s,a)}}class Nm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(d=>d||this.Gi(e,t,a,s)).next(d=>d||this.Qi(e,t))}Ki(e,t){if(Fa(t))return gt.resolve(null);let s=Ds(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Cu(t,null,"F"),s=Ds(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=yi(...d);return this.Ui.getDocuments(e,g).next(R=>this.indexManager.getMinOffset(e,s).next(G=>{const X=this.ji(t,R);return this.zi(t,X,g,G.readTime)?this.Ki(e,Cu(t,null,"F")):this.Wi(e,X,t,G)}))})))}Gi(e,t,s,a){return Fa(t)||a.isEqual(Gn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(d=>{const g=this.ji(t,d);return this.zi(t,g,s,a)?this.Qi(e,t):(Q()<=De.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Pr(t)),this.Wi(e,g,t,Fl(a,-1)))})}ji(e,t){let s=new Qi(gl(e));return t.forEach((a,d)=>{mi(e,d)&&(s=s.add(d))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(a)>0)}Qi(e,t){return Q()<=De.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Pr(t)),this.Ui.getDocumentsMatchingQuery(e,t,Do.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class tv{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new ki(Ar),this.Yi=new ea(d=>rt(d),$t),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z_(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Om(r,e,t,s){return new tv(r,e,t,s)}function Tf(r,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,Ge.Z)(function*(r,e){const t=tn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(d=>(a=d,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],R=[];let G=yi();for(const X of a){g.push(X.batchId);for(const ge of X.mutations)G=G.add(ge.key)}for(const X of d){R.push(X.batchId);for(const ge of X.mutations)G=G.add(ge.key)}return t.localDocuments.getDocuments(s,G).next(X=>({er:X,removedBatchIds:g,addedBatchIds:R}))})})}),Vp.apply(this,arguments)}function nv(r,e){const t=tn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),d=t.Zi.newChangeBuffer({trackRemovals:!0});return function(g,R,G,X){const ge=G.batch,$e=ge.keys();let It=gt.resolve();return $e.forEach(Gt=>{It=It.next(()=>X.getEntry(R,Gt)).next(In=>{const Hn=G.docVersions.get(Gt);Wt(null!==Hn),In.version.compareTo(Hn)<0&&(ge.applyToRemoteDocument(In,G),In.isValidDocument()&&(In.setReadTime(G.commitVersion),X.addEntry(In)))})}),It.next(()=>g.mutationQueue.removeMutationBatch(R,ge))}(t,s,e,d).next(()=>d.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let R=yi();for(let G=0;G<g.mutationResults.length;++G)g.mutationResults[G].transformResults.length>0&&(R=R.add(g.batch.mutations[G].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function yh(r){const e=tn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Up(r,e){const t=tn(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const R=[];e.targetChanges.forEach((ge,$e)=>{const It=a.get($e);if(!It)return;R.push(t.Bs.removeMatchingKeys(d,ge.removedDocuments,$e).next(()=>t.Bs.addMatchingKeys(d,ge.addedDocuments,$e)));let Gt=It.withSequenceNumber(d.currentSequenceNumber);var In,Hn,Zn;null!==e.targetMismatches.get($e)?Gt=Gt.withResumeToken(Ts.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):ge.resumeToken.approximateByteSize()>0&&(Gt=Gt.withResumeToken(ge.resumeToken,s)),a=a.insert($e,Gt),Hn=Gt,Zn=ge,(0===(In=It).resumeToken.approximateByteSize()||Hn.snapshotVersion.toMicroseconds()-In.snapshotVersion.toMicroseconds()>=3e8||Zn.addedDocuments.size+Zn.modifiedDocuments.size+Zn.removedDocuments.size>0)&&R.push(t.Bs.updateTargetData(d,Gt))});let G=Ca(),X=yi();if(e.documentUpdates.forEach(ge=>{e.resolvedLimboDocuments.has(ge)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(d,ge))}),R.push(km(d,g,e.documentUpdates).next(ge=>{G=ge.nr,X=ge.sr})),!s.isEqual(Gn.min())){const ge=t.Bs.getLastRemoteSnapshotVersion(d).next($e=>t.Bs.setTargetsMetadata(d,d.currentSequenceNumber,s));R.push(ge)}return gt.waitFor(R).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,G,X)).next(()=>G)}).then(d=>(t.Ji=a,d))}function km(r,e,t){let s=yi(),a=yi();return t.forEach(d=>s=s.add(d)),e.getEntries(r,s).next(d=>{let g=Ca();return t.forEach((R,G)=>{const X=d.get(R);G.isFoundDocument()!==X.isFoundDocument()&&(a=a.add(R)),G.isNoDocument()&&G.version.isEqual(Gn.min())?(e.removeEntry(R,G.readTime),g=g.insert(R,G)):!X.isValidDocument()||G.version.compareTo(X.version)>0||0===G.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(G),g=g.insert(R,G)):fe("LocalStore","Ignoring outdated watch update for ",R,". Current version:",X.version," Watch version:",G.version)}),{nr:g,sr:a}})}function Bp(r,e){const t=tn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function bc(r,e){const t=tn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(d=>d?(a=d,gt.resolve(a)):t.Bs.allocateTargetId(s).next(g=>(a=new rl(e,g,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Qc(r,e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ge.Z)(function*(r,e,t){const s=tn(r),a=s.Ji.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,a)))}catch(g){if(!Qo(g))throw g;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),Fm.apply(this,arguments)}function jp(r,e,t){const s=tn(r);let a=Gn.min(),d=yi();return s.persistence.runTransaction("Execute query","readonly",g=>function(R,G,X){const ge=tn(R),$e=ge.Yi.get(X);return void 0!==$e?gt.resolve(ge.Ji.get($e)):ge.Bs.getTargetData(G,X)}(s,g,Ds(e)).next(R=>{if(R)return a=R.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(g,R.targetId).next(G=>{d=G})}).next(()=>s.Hi.getDocumentsMatchingQuery(g,e,t?a:Gn.min(),t?d:yi())).next(R=>(Lm(s,fo(e),R),{documents:R,ir:d})))}function bf(r,e){const t=tn(r),s=tn(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",d=>s.le(d,e).next(g=>g?g.target:null))}function rv(r,e){const t=tn(r),s=t.Xi.get(e)||Gn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,Fl(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Lm(t,e,a),a))}function Lm(r,e,t){let s=r.Xi.get(e)||Gn.min();t.forEach((a,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),r.Xi.set(e,s)}function Df(){return Df=(0,Ge.Z)(function*(r,e,t,s){const a=tn(r);let d=yi(),g=Ca();for(const X of t){const ge=e.rr(X.metadata.name);X.document&&(d=d.add(ge));const $e=e.ur(X);$e.setReadTime(e.cr(X.metadata.readTime)),g=g.insert(ge,$e)}const R=a.Zi.newChangeBuffer({trackRemovals:!0}),G=yield bc(a,(X=s,Ds(ps(pi.fromString(`__bundle__/docs/${X}`)))));var X;return a.persistence.runTransaction("Apply bundle documents","readwrite",X=>km(X,R,g).next(ge=>(R.apply(X),ge)).next(ge=>a.Bs.removeMatchingKeysForTargetId(X,G.targetId).next(()=>a.Bs.addMatchingKeys(X,d,G.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(X,ge.nr,ge.sr)).next(()=>ge.nr)))}),Df.apply(this,arguments)}function Um(r,e){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,Ge.Z)(function*(r,e,t=yi()){const s=yield bc(r,Ds(ah(e.bundledQuery))),a=tn(r);return a.persistence.runTransaction("Save named query","readwrite",d=>{const g=Ho(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return a.qs.saveNamedQuery(d,e);const R=s.withResumeToken(Ts.EMPTY_BYTE_STRING,g);return a.Ji=a.Ji.insert(R.targetId,R),a.Bs.updateTargetData(d,R).next(()=>a.Bs.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>a.Bs.addMatchingKeys(d,t,s.targetId)).next(()=>a.qs.saveNamedQuery(d,e))})}),Sf.apply(this,arguments)}function Hp(r,e){return`firestore_clients_${r}_${e}`}function Ku(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Cd(r,e){return`firestore_targets_${r}_${e}`}class Af{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let d,g="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return g&&a.error&&(g="string"==typeof a.error.message&&"string"==typeof a.error.code,g&&(d=new jt(a.error.code,a.error.message))),g?new Af(e,t,a.state,d):(Le("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _h{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(a=new jt(s.error.code,s.error.message))),d?new _h(e,s.state,a):(Le("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $p{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,d=Uc();for(let g=0;a&&g<s.activeTargetIds.length;++g)a=uu(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return a?new $p(e,d):(Le("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vh{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vh(t.clientId,t.onlineState):(Le("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rf{constructor(){this.activeTargetIds=Uc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Eh{constructor(e,t,s,a,d){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ki(Ar),this.started=!1,this.yr=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.pr=Hp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Rf),this.Tr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const d=e.getItem(Hp(e.persistenceKey,a));if(d){const g=$p.ar(a,d);g&&(e.gr=e.gr.insert(g.clientId,g))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Cd(this.persistenceKey,e));if(s){const a=_h.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(fe("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void Le("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ge.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(d){let g=co.ct;if(null!=d)try{const R=JSON.parse(d);Wt("number"==typeof R),g=R}catch(R){Le("SharedClientState","Failed to read sequence number from WebStorage",R)}return g}(s.newValue);a!==co.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(d=>t.syncEngine.Qr(d)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new Af(this.currentUser,e,t,s),d=Ku(this.persistenceKey,this.currentUser,e);this.setItem(d,a.hr())}Cr(e){const t=Ku(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Cd(this.persistenceKey,e),d=new _h(e,t,s);this.setItem(a,d.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return $p.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Af.ar(new D(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return _h.ar(a,t)}br(e){return vh.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),d=this.Sr(s),g=[],R=[];return d.forEach(G=>{a.has(G)||g.push(G)}),a.forEach(G=>{d.has(G)||R.push(G)}),this.syncEngine.Wr(g,R).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Uc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Id{constructor(){this.Hr=new Rf,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Rf,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iv{Yr(e){}shutdown(){}}class Mf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wh=null;function xf(){return null===wh?wh=268435456+Math.round(2147483648*Math.random()):wh++,"0x"+wh.toString(16)}const Bm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ha="WebChannelConnection";class ov extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,d){const g=xf(),R=this.To(e,t);fe("RestConnection",`Sending RPC '${e}' ${g}:`,R,s);const G={};return this.Eo(G,a,d),this.Ao(e,R,G,s).then(X=>(fe("RestConnection",`Received RPC '${e}' ${g}: `,X),X),X=>{throw Ft("RestConnection",`RPC '${e}' ${g} failed with error: `,X,"url: ",R,"request:",s),X})}vo(e,t,s,a,d,g){return this.Io(e,t,s,a,d)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+T,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,d)=>e[d]=a),s&&s.headers.forEach((a,d)=>e[d]=a)}To(e,t){return`${this.mo}/v1/${t}:${Bm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const d=xf();return new Promise((g,R)=>{const G=new Kl;G.setWithCredentials(!0),G.listenOnce(wl.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case za.NO_ERROR:const ge=G.getResponseJson();fe(Ha,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(ge)),g(ge);break;case za.TIMEOUT:fe(Ha,`RPC '${e}' ${d} timed out`),R(new jt(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case za.HTTP_ERROR:const $e=G.getStatus();if(fe(Ha,`RPC '${e}' ${d} failed with status:`,$e,"response text:",G.getResponseText()),$e>0){let It=G.getResponseJson();Array.isArray(It)&&(It=It[0]);const Gt=null==It?void 0:It.error;if(Gt&&Gt.status&&Gt.message){const In=function(Hn){const Zn=Hn.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(Zn)>=0?Zn:Dt.UNKNOWN}(Gt.status);R(new jt(In,Gt.message))}else R(new jt(Dt.UNKNOWN,"Server responded with status "+G.getStatus()))}else R(new jt(Dt.UNAVAILABLE,"Connection failed."));break;default:Jt()}}finally{fe(Ha,`RPC '${e}' ${d} completed.`)}});const X=JSON.stringify(a);fe(Ha,`RPC '${e}' ${d} sending request:`,a),G.send(t,"POST",X,s,15)})}Ro(e,t,s){const a=xf(),d=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Ol(),R=Sa(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},X=this.longPollingOptions.timeoutSeconds;void 0!==X&&(G.longPollingTimeout=Math.round(1e3*X)),this.useFetchStreams&&(G.xmlHttpFactory=new zl({})),this.Eo(G.initMessageHeaders,t,s),G.encodeInitMessageHeaders=!0;const ge=d.join("");fe(Ha,`Creating RPC '${e}' stream ${a}: ${ge}`,G);const $e=g.createWebChannel(ge,G);let It=!1,Gt=!1;const In=new sv({ro:Zn=>{Gt?fe(Ha,`Not sending because RPC '${e}' stream ${a} is closed:`,Zn):(It||(fe(Ha,`Opening RPC '${e}' stream ${a} transport.`),$e.open(),It=!0),fe(Ha,`RPC '${e}' stream ${a} sending:`,Zn),$e.send(Zn))},oo:()=>$e.close()}),Hn=(Zn,Wr,zi)=>{Zn.listen(Wr,zr=>{try{zi(zr)}catch(Go){setTimeout(()=>{throw Go},0)}})};return Hn($e,oa.EventType.OPEN,()=>{Gt||fe(Ha,`RPC '${e}' stream ${a} transport opened.`)}),Hn($e,oa.EventType.CLOSE,()=>{Gt||(Gt=!0,fe(Ha,`RPC '${e}' stream ${a} transport closed`),In.wo())}),Hn($e,oa.EventType.ERROR,Zn=>{Gt||(Gt=!0,Ft(Ha,`RPC '${e}' stream ${a} transport errored:`,Zn),In.wo(new jt(Dt.UNAVAILABLE,"The operation could not be completed")))}),Hn($e,oa.EventType.MESSAGE,Zn=>{var Wr;if(!Gt){const zi=Zn.data[0];Wt(!!zi);const zr=zi,Go=zr.error||(null===(Wr=zr[0])||void 0===Wr?void 0:Wr.error);if(Go){fe(Ha,`RPC '${e}' stream ${a} received error:`,Go);const qs=Go.status;let Zs=function(Lc){const C0=Lr[Lc];if(void 0!==C0)return Bc(C0)}(qs),Pl=Go.message;void 0===Zs&&(Zs=Dt.INTERNAL,Pl="Unknown error status: "+qs+" with message "+Go.message),Gt=!0,In.wo(new jt(Zs,Pl)),$e.close()}else fe(Ha,`RPC '${e}' stream ${a} received:`,zi),In._o(zi)}}),Hn(R,ol.STAT_EVENT,Zn=>{Zn.stat===Yo.PROXY?fe(Ha,`RPC '${e}' stream ${a} detected buffering proxy`):Zn.stat===Yo.NOPROXY&&fe(Ha,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{In.fo()},0),In}}function jm(){return"undefined"!=typeof window?window:null}function Ch(){return"undefined"!=typeof document?document:null}function qu(r){return new P_(r,!0)}class Pf{constructor(e,t,s=1e3,a=1.5,d=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=d,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Hm{constructor(e,t,s,a,d,g,R,G){this.ii=e,this.$o=s,this.Oo=a,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=R,this.listener=G,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Pf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ge.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ge.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,Ge.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===Dt.RESOURCE_EXHAUSTED?(Le(t.toString()),Le("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===Dt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new jt(Dt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,Ge.Z)(function*(){e.state=0,e.start()}))}tu(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class av extends Hm{constructor(e,t,s,a,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,g),this.serializer=d}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function O_(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:Jt(),a=e.targetChange.targetIds||[],d=function(G,X){return G.useProto3Json?(Wt(void 0===X||"string"==typeof X),Ts.fromBase64String(X||"")):(Wt(void 0===X||X instanceof Uint8Array),Ts.fromUint8Array(X||new Uint8Array))}(r,e.targetChange.resumeToken),g=e.targetChange.cause,R=g&&function(G){const X=void 0===G.code?Dt.UNKNOWN:Bc(G.code);return new jt(X,G.message||"")}(g);t=new Jg(s,a,d,R||null)}else if("documentChange"in e){const s=e.documentChange,a=Nu(r,s.document.name),d=Ho(s.document.updateTime),g=s.document.createTime?Ho(s.document.createTime):Gn.min(),R=new Ii({mapValue:{fields:s.document.fields}}),G=Ti.newFoundDocument(a,d,g,R);t=new $c(s.targetIds||[],s.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const s=e.documentDelete,a=Nu(r,s.document),d=s.readTime?Ho(s.readTime):Gn.min(),g=Ti.newNoDocument(a,d);t=new $c([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,a=Nu(r,s.document);t=new $c([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Jt();{const s=e.filter,{count:a=0,unchangedNames:d}=s,g=new Rr(a,d);t=new Qg(s.targetId,g)}}var G;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return Gn.min();const d=a.targetChange;return d.targetIds&&d.targetIds.length?Gn.min():d.readTime?Ho(d.readTime):Gn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=sh(this.serializer),t.addTarget=function(a,d){let g;const R=d.target;if(g=mn(R)?{documents:Ap(a,R)}:{query:Rp(a,R)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=N_(a,d.resumeToken);const G=wc(a,d.expectedCount);null!==G&&(g.expectedCount=G)}else if(d.snapshotVersion.compareTo(Gn.min())>0){g.readTime=Al(a,d.snapshotVersion.toTimestamp());const G=wc(a,d.expectedCount);null!==G&&(g.expectedCount=G)}return g}(this.serializer,e);const s=function F_(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=sh(this.serializer),t.removeTarget=e,this.Wo(t)}}class Td extends Hm{constructor(e,t,s,a,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,g),this.serializer=d,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function k_(r,e){return r&&r.length>0?(Wt(void 0!==e),r.map(t=>function(s,a){let d=Ho(s.updateTime?s.updateTime:a);return d.isEqual(Gn.min())&&(d=Ho(a)),new qg(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ho(e.commitTime);return this.listener.cu(s,t)}return Wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>oh(this.serializer,s))};this.Wo(t)}}class lv extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new jt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,d])=>this.connection.Io(e,t,s,a,d)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new jt(Dt.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.vo(e,t,s,d,g,a)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new jt(Dt.UNKNOWN,d.toString())})}terminate(){this.lu=!0}}class cv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Le(t),this.mu=!1):fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Zu{constructor(e,t,s,a,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=d,this.Pu.Yr(R=>{s.enqueueAndForget((0,Ge.Z)(function*(){var G;ed(g)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,Ge.Z)(function*(X){const ge=tn(X);ge.vu.add(4),yield Xc(ge),ge.bu.set("Unknown"),ge.vu.delete(4),yield Jc(ge)}),function(X){return G.apply(this,arguments)})(g))}))}),this.bu=new cv(s,a)}}function Jc(r){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,Ge.Z)(function*(r){if(ed(r))for(const e of r.Ru)yield e(!0)}),Nf.apply(this,arguments)}function Xc(r){return Of.apply(this,arguments)}function Of(){return Of=(0,Ge.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Of.apply(this,arguments)}function Ih(r,e){const t=tn(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),kf(t)?zp(t):hc(t).Ko()&&Wp(t,e))}function Th(r,e){const t=tn(r),s=hc(t);t.Au.delete(e),s.Ko()&&$m(t,e),0===t.Au.size&&(s.Ko()?s.jo():ed(t)&&t.bu.set("Unknown"))}function Wp(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hc(r).su(e)}function $m(r,e){r.Vu.qt(e),hc(r).iu(e)}function zp(r){r.Vu=new R_({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),hc(r).start(),r.bu.gu()}function kf(r){return ed(r)&&!hc(r).Uo()&&r.Au.size>0}function ed(r){return 0===tn(r).vu.size}function Kp(r){r.Vu=void 0}function dv(r){return qp.apply(this,arguments)}function qp(){return qp=(0,Ge.Z)(function*(r){r.Au.forEach((e,t)=>{Wp(r,e)})}),qp.apply(this,arguments)}function hE(r,e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,Ge.Z)(function*(r,e){Kp(r),kf(r)?(r.bu.Iu(e),zp(r)):r.bu.set("Unknown")}),Gm.apply(this,arguments)}function Zp(r,e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,Ge.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof Jg&&2===e.state&&e.cause)try{yield(s=(0,Ge.Z)(function*(a,d){const g=d.cause;for(const R of d.targetIds)a.Au.has(R)&&(yield a.remoteSyncer.rejectListen(R,g),a.Au.delete(R),a.Vu.removeTarget(R))}),function(a,d){return s.apply(this,arguments)})(r,e)}catch(s){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield bh(r,s)}else if(e instanceof $c?r.Vu.Ht(e):e instanceof Qg?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(Gn.min()))try{const s=yield yh(r.localStore);t.compareTo(s)>=0&&(yield function(a,d){const g=a.Vu.ce(d);return g.targetChanges.forEach((R,G)=>{if(R.resumeToken.approximateByteSize()>0){const X=a.Au.get(G);X&&a.Au.set(G,X.withResumeToken(R.resumeToken,d))}}),g.targetMismatches.forEach((R,G)=>{const X=a.Au.get(R);if(!X)return;a.Au.set(R,X.withResumeToken(Ts.EMPTY_BYTE_STRING,X.snapshotVersion)),$m(a,R);const ge=new rl(X.target,R,G,X.sequenceNumber);Wp(a,ge)}),a.remoteSyncer.applyRemoteEvent(g)}(r,t))}catch(s){fe("RemoteStore","Failed to raise snapshot:",s),yield bh(r,s)}var s}),Yp.apply(this,arguments)}function bh(r,e,t){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Ge.Z)(function*(r,e,t){if(!Qo(e))throw e;r.vu.add(1),yield Xc(r),r.bu.set("Offline"),t||(t=()=>yh(r.localStore)),r.asyncQueue.enqueueRetryable((0,Ge.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield Jc(r)}))}),Ff.apply(this,arguments)}function hv(r,e){return e().catch(t=>bh(r,t,e))}function vl(r){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,Ge.Z)(function*(r){const e=tn(r),t=iu(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;fE(e);)try{const a=yield Bp(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,zm(e,a)}catch(a){yield bh(e,a)}Qp(e)&&Jp(e)}),Wm.apply(this,arguments)}function fE(r){return ed(r)&&r.Eu.length<10}function zm(r,e){r.Eu.push(e);const t=iu(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function Qp(r){return ed(r)&&!iu(r).Uo()&&r.Eu.length>0}function Jp(r){iu(r).start()}function fv(r){return Km.apply(this,arguments)}function Km(){return Km=(0,Ge.Z)(function*(r){iu(r).hu()}),Km.apply(this,arguments)}function qm(r){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,Ge.Z)(function*(r){const e=iu(r);for(const t of r.Eu)e.uu(t.mutations)}),Dh.apply(this,arguments)}function pv(r,e,t){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,Ge.Z)(function*(r,e,t){const s=r.Eu.shift(),a=zt.from(s,e,t);yield hv(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield vl(r)}),Sh.apply(this,arguments)}function gv(r,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,Ge.Z)(function*(r,e){var t;e&&iu(r).ou&&(yield(t=(0,Ge.Z)(function*(s,a){if(uc(d=a.code)&&d!==Dt.ABORTED){const g=s.Eu.shift();iu(s).Qo(),yield hv(s,()=>s.remoteSyncer.rejectFailedWrite(g.batchId,a)),yield vl(s)}var d}),function(s,a){return t.apply(this,arguments)})(r,e)),Qp(r)&&Jp(r)}),Xp.apply(this,arguments)}function Zm(r,e){return eg.apply(this,arguments)}function eg(){return eg=(0,Ge.Z)(function*(r,e){const t=tn(r);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const s=ed(t);t.vu.add(3),yield Xc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Jc(t)}),eg.apply(this,arguments)}function tg(r,e){return ng.apply(this,arguments)}function ng(){return ng=(0,Ge.Z)(function*(r,e){const t=tn(r);e?(t.vu.delete(2),yield Jc(t)):e||(t.vu.add(2),yield Xc(t),t.bu.set("Unknown"))}),ng.apply(this,arguments)}function hc(r){return r.Su||(r.Su=function(e,t,s){const a=tn(e);return a.fu(),new av(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:dv.bind(null,r),ao:hE.bind(null,r),nu:Zp.bind(null,r)}),r.Ru.push(function(){var e=(0,Ge.Z)(function*(t){t?(r.Su.Qo(),kf(r)?zp(r):r.bu.set("Unknown")):(yield r.Su.stop(),Kp(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function iu(r){return r.Du||(r.Du=function(e,t,s){const a=tn(e);return a.fu(),new Td(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fv.bind(null,r),ao:gv.bind(null,r),au:qm.bind(null,r),cu:pv.bind(null,r)}),r.Ru.push(function(){var e=(0,Ge.Z)(function*(t){t?(r.Du.Qo(),yield vl(r)):(yield r.Du.stop(),r.Eu.length>0&&(fe("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class rg{constructor(e,t,s,a,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=d,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,s,a,d){const g=Date.now()+s,R=new rg(e,t,g,a,d);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jt(Dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yu(r,e){if(Le("AsyncQueue",`${e}: ${r}`),Qo(r))return new jt(Dt.UNAVAILABLE,`${e}: ${r}`);throw r}class bd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||fn.comparator(t.key,s.key):(t,s)=>fn.comparator(t.key,s.key),this.keyedMap=No(),this.sortedSet=new ki(this.comparator)}static emptySet(e){return new bd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(!a.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new bd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Ym{constructor(){this.Cu=new ki(fn.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Jt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Dc{constructor(e,t,s,a,d,g,R,G,X){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=R,this.excludesMetadataChanges=G,this.hasCachedResults=X}static fromInitialDocuments(e,t,s,a,d){const g=[];return t.forEach(R=>{g.push({type:0,doc:R})}),new Dc(e,t,bd.emptySet(t),g,s,a,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Qu{constructor(){this.Nu=void 0,this.listeners=[]}}class Ah{constructor(){this.queries=new ea(e=>wr(e),Yn),this.onlineState="Unknown",this.ku=new Set}}function $a(r,e){return fc.apply(this,arguments)}function fc(){return fc=(0,Ge.Z)(function*(r,e){const t=tn(r),s=e.query;let a=!1,d=t.queries.get(s);if(d||(a=!0,d=new Qu),a)try{d.Nu=yield t.onListen(s)}catch(g){const R=Yu(g,`Initialization of query '${Pr(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,d),d.listeners.push(e),e.Mu(t.onlineState),d.Nu&&e.$u(d.Nu)&&Sc(t)}),fc.apply(this,arguments)}function Dd(r,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,Ge.Z)(function*(r,e){const t=tn(r),s=e.query;let a=!1;const d=t.queries.get(s);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),a=0===d.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Wl.apply(this,arguments)}function ig(r,e){const t=tn(r);let s=!1;for(const a of e){const g=t.queries.get(a.query);if(g){for(const R of g.listeners)R.$u(a)&&(s=!0);g.Nu=a}}s&&Sc(t)}function Sd(r,e,t){const s=tn(r),a=s.queries.get(e);if(a)for(const d of a.listeners)d.onError(t);s.queries.delete(e)}function Sc(r){r.ku.forEach(e=>{e.next()})}class Ac{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Ad{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class td{constructor(e){this.serializer=e}rr(e){return Nu(this.serializer,e)}ur(e){return e.metadata.exists?sm(this.serializer,e.document,!1):Ti.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ho(e)}}class Rd{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nd(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=pi.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new td(this.serializer);for(const a of e)if(a.metadata.queries){const d=s.rr(a.metadata.name);for(const g of a.metadata.queries){const R=(t.get(g)||yi()).add(d);t.set(g,R)}}return t}complete(){var e=this;return(0,Ge.Z)(function*(){const t=yield function Vm(r,e,t,s){return Df.apply(this,arguments)}(e.localStore,new td(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Um(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function nd(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class rd{constructor(e){this.key=e}}class id{constructor(e){this.key=e}}class sg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=yi(),this.mutatedKeys=yi(),this.tc=gl(e),this.ec=new bd(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Ym,a=t?t.ec:this.ec;let d=t?t.mutatedKeys:this.mutatedKeys,g=a,R=!1;const G="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,X="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((ge,$e)=>{const It=a.get(ge),Gt=mi(this.query,$e)?$e:null,In=!!It&&this.mutatedKeys.has(It.key),Hn=!!Gt&&(Gt.hasLocalMutations||this.mutatedKeys.has(Gt.key)&&Gt.hasCommittedMutations);let Zn=!1;It&&Gt?It.data.isEqual(Gt.data)?In!==Hn&&(s.track({type:3,doc:Gt}),Zn=!0):this.rc(It,Gt)||(s.track({type:2,doc:Gt}),Zn=!0,(G&&this.tc(Gt,G)>0||X&&this.tc(Gt,X)<0)&&(R=!0)):!It&&Gt?(s.track({type:0,doc:Gt}),Zn=!0):It&&!Gt&&(s.track({type:1,doc:It}),Zn=!0,(G||X)&&(R=!0)),Zn&&(Gt?(g=g.add(Gt),d=Hn?d.add(ge):d.delete(ge)):(g=g.delete(ge),d=d.delete(ge)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const ge="F"===this.query.limitType?g.last():g.first();g=g.delete(ge.key),d=d.delete(ge.key),s.track({type:1,doc:ge})}return{ec:g,ic:s,zi:R,mutatedKeys:d}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const d=e.ic.xu();d.sort((X,ge)=>function($e,It){const Gt=In=>{switch(In){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jt()}};return Gt($e)-Gt(It)}(X.type,ge.type)||this.tc(X.doc,ge.doc)),this.oc(s);const g=t?this.uc():[],R=0===this.Zu.size&&this.current?1:0,G=R!==this.Xu;return this.Xu=R,0!==d.length||G?{snapshot:new Dc(this.query,e.ec,a,d,e.mutatedKeys,0===R,G,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:g}:{cc:g}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ym,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=yi(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new id(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new rd(s))}),t}hc(e){this.Yu=e.ir,this.Zu=yi();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Dc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Qm{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Jm{constructor(e){this.key=e,this.fc=!1}}class Xm{constructor(e,t,s,a,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.dc={},this.wc=new ea(R=>wr(R),Yn),this._c=new Map,this.mc=new Set,this.gc=new ki(fn.comparator),this.yc=new Map,this.Ic=new vf,this.Tc={},this.Ec=new Map,this.Ac=qc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ey(r,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Ge.Z)(function*(r,e){const t=hy(r);let s,a;const d=t.wc.get(e);if(d)s=d.targetId,t.sharedClientState.addLocalQueryTarget(s),a=d.view.lc();else{const g=yield bc(t.localStore,Ds(e)),R=t.sharedClientState.addLocalQueryTarget(g.targetId);s=g.targetId,a=yield Vf(t,e,s,"current"===R,g.resumeToken),t.isPrimaryClient&&Ih(t.remoteStore,g)}return a}),Lf.apply(this,arguments)}function Vf(r,e,t,s,a){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Ge.Z)(function*(r,e,t,s,a){r.Rc=($e,It,Gt)=>{return(In=(0,Ge.Z)(function*(Hn,Zn,Wr,zi){let zr=Zn.view.sc(Wr);zr.zi&&(zr=yield jp(Hn.localStore,Zn.query,!1).then(({documents:Zs})=>Zn.view.sc(Zs,zr)));const Go=zi&&zi.targetChanges.get(Zn.targetId),qs=Zn.view.applyChanges(zr,Hn.isPrimaryClient,Go);return iy(Hn,Zn.targetId,qs.cc),qs.snapshot}),function(Hn,Zn,Wr,zi){return In.apply(this,arguments)})(r,$e,It,Gt);var In};const d=yield jp(r.localStore,e,!0),g=new sg(e,d.ir),R=g.sc(d.documents),G=ih.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),X=g.applyChanges(R,r.isPrimaryClient,G);iy(r,t,X.cc);const ge=new Qm(e,t,g);return r.wc.set(e,ge),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),X.snapshot}),Uf.apply(this,arguments)}function ty(r,e){return og.apply(this,arguments)}function og(){return og=(0,Ge.Z)(function*(r,e){const t=tn(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(d=>!Yn(d,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Qc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Th(t.remoteStore,s.targetId),Md(t,s.targetId)}).catch(cl))):(Md(t,s.targetId),yield Qc(t.localStore,s.targetId,!0))}),og.apply(this,arguments)}function ag(){return ag=(0,Ge.Z)(function*(r,e,t){const s=Ph(r);try{const a=yield function(d,g){const R=tn(d),G=hs.now(),X=g.reduce((It,Gt)=>It.add(Gt.key),yi());let ge,$e;return R.persistence.runTransaction("Locally write mutations","readwrite",It=>{let Gt=Ca(),In=yi();return R.Zi.getEntries(It,X).next(Hn=>{Gt=Hn,Gt.forEach((Zn,Wr)=>{Wr.isValidDocument()||(In=In.add(Zn))})}).next(()=>R.localDocuments.getOverlayedDocuments(It,Gt)).next(Hn=>{ge=Hn;const Zn=[];for(const Wr of g){const zi=u(Wr,ge.get(Wr.key).overlayedDocument);null!=zi&&Zn.push(new S(Wr.key,zi,Ks(zi.value.mapValue),Us.exists(!0)))}return R.mutationQueue.addMutationBatch(It,G,Zn,g)}).next(Hn=>{$e=Hn;const Zn=Hn.applyToLocalDocumentSet(ge,In);return R.documentOverlayCache.saveOverlays(It,Hn.batchId,Zn)})}).then(()=>({batchId:$e.batchId,changes:Iu(ge)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,g,R){let G=d.Tc[d.currentUser.toKey()];G||(G=new ki(Ar)),G=G.insert(g,R),d.Tc[d.currentUser.toKey()]=G}(s,a.batchId,t),yield Ju(s,a.changes),yield vl(s.remoteStore)}catch(a){const d=Yu(a,"Failed to persist write");t.reject(d)}}),ag.apply(this,arguments)}function lg(r,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,Ge.Z)(function*(r,e){const t=tn(r);try{const s=yield Up(t.localStore,e);e.targetChanges.forEach((a,d)=>{const g=t.yc.get(d);g&&(Wt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?g.fc=!0:a.modifiedDocuments.size>0?Wt(g.fc):a.removedDocuments.size>0&&(Wt(g.fc),g.fc=!1))}),yield Ju(t,s,e)}catch(s){yield cl(s)}}),Bf.apply(this,arguments)}function ry(r,e,t){const s=tn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((d,g)=>{const R=g.view.Mu(e);R.snapshot&&a.push(R.snapshot)}),function(d,g){const R=tn(d);R.onlineState=g;let G=!1;R.queries.forEach((X,ge)=>{for(const $e of ge.listeners)$e.Mu(g)&&(G=!0)}),G&&Sc(R)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function mv(r,e,t){return jf.apply(this,arguments)}function jf(){return jf=(0,Ge.Z)(function*(r,e,t){const s=tn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),d=a&&a.key;if(d){let g=new ki(fn.comparator);g=g.insert(d,Ti.newNoDocument(d,Gn.min()));const R=yi().add(d),G=new rh(Gn.min(),new Map,new ki(Ar),g,R);yield lg(s,G),s.gc=s.gc.remove(d),s.yc.delete(e),dg(s)}else yield Qc(s.localStore,e,!1).then(()=>Md(s,e,t)).catch(cl)}),jf.apply(this,arguments)}function yv(r,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Ge.Z)(function*(r,e){const t=tn(r),s=e.batch.batchId;try{const a=yield nv(t.localStore,e);Mh(t,s,null),Rh(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Ju(t,a)}catch(a){yield cl(a)}}),Hf.apply(this,arguments)}function _v(r,e,t){return ug.apply(this,arguments)}function ug(){return ug=(0,Ge.Z)(function*(r,e,t){const s=tn(r);try{const a=yield function(d,g){const R=tn(d);return R.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let X;return R.mutationQueue.lookupMutationBatch(G,g).next(ge=>(Wt(null!==ge),X=ge.keys(),R.mutationQueue.removeMutationBatch(G,ge))).next(()=>R.mutationQueue.performConsistencyCheck(G)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(G,X,g)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,X)).next(()=>R.localDocuments.getDocuments(G,X))})}(s.localStore,e);Mh(s,e,t),Rh(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Ju(s,a)}catch(a){yield cl(a)}}),ug.apply(this,arguments)}function cg(){return cg=(0,Ge.Z)(function*(r,e){const t=tn(r);ed(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const g=tn(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>g.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=Yu(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),cg.apply(this,arguments)}function Rh(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function Mh(r,e,t){const s=tn(r);let a=s.Tc[s.currentUser.toKey()];if(a){const d=a.get(e);d&&(t?d.reject(t):d.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Md(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||vv(r,s)})}function vv(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(Th(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),dg(r))}function iy(r,e,t){for(const s of t)s instanceof rd?(r.Ic.addReference(s.key,e),gE(r,s)):s instanceof id?(fe("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||vv(r,s.key)):Jt()}function gE(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(fe("SyncEngine","New document in limbo: "+t),r.mc.add(s),dg(r))}function dg(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new fn(pi.fromString(e)),s=r.Ac.next();r.yc.set(s,new Jm(t)),r.gc=r.gc.insert(t,s),Ih(r.remoteStore,new rl(Ds(ps(t.path)),s,"TargetPurposeLimboResolution",co.ct))}}function Ju(r,e,t){return sy.apply(this,arguments)}function sy(){return sy=(0,Ge.Z)(function*(r,e,t){const s=tn(r),a=[],d=[],g=[];var R;s.wc.isEmpty()||(s.wc.forEach((R,G)=>{g.push(s.Rc(G,e,t).then(X=>{if((X||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(G.targetId,(null==X?void 0:X.fromCache)?"not-current":"current"),X){a.push(X);const ge=If.Li(G.targetId,X);d.push(ge)}}))}),yield Promise.all(g),s.dc.nu(a),yield(R=(0,Ge.Z)(function*(G,X){const ge=tn(G);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",$e=>gt.forEach(X,It=>gt.forEach(It.Fi,Gt=>ge.persistence.referenceDelegate.addReference($e,It.targetId,Gt)).next(()=>gt.forEach(It.Bi,Gt=>ge.persistence.referenceDelegate.removeReference($e,It.targetId,Gt)))))}catch($e){if(!Qo($e))throw $e;fe("LocalStore","Failed to update sequence numbers: "+$e)}for(const $e of X){const It=$e.targetId;if(!$e.fromCache){const Gt=ge.Ji.get(It),Hn=Gt.withLastLimboFreeSnapshotVersion(Gt.snapshotVersion);ge.Ji=ge.Ji.insert(It,Hn)}}}),function(G,X){return R.apply(this,arguments)})(s.localStore,d))}),sy.apply(this,arguments)}function Ev(r,e){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,Ge.Z)(function*(r,e){const t=tn(r);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const s=yield Tf(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(g=>{g.forEach(R=>{R.reject(new jt(Dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ju(t,s.er)}var a}),Rc.apply(this,arguments)}function wv(r,e){const t=tn(r),s=t.yc.get(e);if(s&&s.fc)return yi().add(s.key);{let a=yi();const d=t._c.get(e);if(!d)return a;for(const g of d){const R=t.wc.get(g);a=a.unionWith(R.view.nc)}return a}}function oy(r,e){return hg.apply(this,arguments)}function hg(){return hg=(0,Ge.Z)(function*(r,e){const t=tn(r),s=yield jp(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&iy(t,e.targetId,a.cc),a}),hg.apply(this,arguments)}function ay(r,e){return xd.apply(this,arguments)}function xd(){return xd=(0,Ge.Z)(function*(r,e){const t=tn(r);return rv(t.localStore,e).then(s=>Ju(t,s))}),xd.apply(this,arguments)}function Cv(r,e,t,s){return $f.apply(this,arguments)}function $f(){return $f=(0,Ge.Z)(function*(r,e,t,s){const a=tn(r),d=yield function(g,R){const G=tn(g),X=tn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ge=>X.Sn(ge,R).next($e=>$e?G.localDocuments.getDocuments(ge,$e):gt.resolve(null)))}(a.localStore,e);var R;null!==d?("pending"===t?yield vl(a.remoteStore):"acknowledged"===t||"rejected"===t?(Mh(a,e,s||null),Rh(a,e),R=e,tn(tn(a.localStore).mutationQueue).Cn(R)):Jt(),yield Ju(a,d)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),$f.apply(this,arguments)}function fg(){return fg=(0,Ge.Z)(function*(r,e){const t=tn(r);if(hy(t),Ph(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield ly(t,s.toArray());t.vc=!0,yield tg(t.remoteStore,!0);for(const d of a)Ih(t.remoteStore,d)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?s.push(g):a=a.then(()=>(Md(t,g),Qc(t.localStore,g,!0))),Th(t.remoteStore,g)}),yield a,yield ly(t,s),function(d){const g=tn(d);g.yc.forEach((R,G)=>{Th(g.remoteStore,G)}),g.Ic.Ts(),g.yc=new Map,g.gc=new ki(fn.comparator)}(t),t.vc=!1,yield tg(t.remoteStore,!1)}}),fg.apply(this,arguments)}function ly(r,e,t){return pg.apply(this,arguments)}function pg(){return pg=(0,Ge.Z)(function*(r,e,t){const s=tn(r),a=[],d=[];for(const g of e){let R;const G=s._c.get(g);if(G&&0!==G.length){R=yield bc(s.localStore,Ds(G[0]));for(const X of G){const ge=s.wc.get(X),$e=yield oy(s,ge);$e.snapshot&&d.push($e.snapshot)}}else{const X=yield bf(s.localStore,g);R=yield bc(s.localStore,X),yield Vf(s,uy(X),g,!1,R.resumeToken)}a.push(R)}return s.dc.nu(d),a}),pg.apply(this,arguments)}function uy(r){return Bo(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function cy(r){const e=tn(r);return tn(tn(e.localStore).persistence).$i()}function Tv(r,e,t,s){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,Ge.Z)(function*(r,e,t,s){const a=tn(r);if(a.vc)return void fe("SyncEngine","Ignoring unexpected query state notification.");const d=a._c.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield rv(a.localStore,fo(d[0])),R=rh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ts.EMPTY_BYTE_STRING);yield Ju(a,g,R);break}case"rejected":yield Qc(a.localStore,e,!0),Md(a,e,s);break;default:Jt()}}),Gf.apply(this,arguments)}function dy(r,e,t){return xh.apply(this,arguments)}function xh(){return xh=(0,Ge.Z)(function*(r,e,t){const s=hy(r);if(s.vc){for(const a of e){if(s._c.has(a)){fe("SyncEngine","Adding an already active target "+a);continue}const d=yield bf(s.localStore,a),g=yield bc(s.localStore,d);yield Vf(s,uy(d),g.targetId,!1,g.resumeToken),Ih(s.remoteStore,g)}for(const a of t)s._c.has(a)&&(yield Qc(s.localStore,a,!1).then(()=>{Th(s.remoteStore,a),Md(s,a)}).catch(cl))}}),xh.apply(this,arguments)}function hy(r){const e=tn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=lg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mv.bind(null,e),e.dc.nu=ig.bind(null,e.eventManager),e.dc.Pc=Sd.bind(null,e.eventManager),e}function Ph(r){const e=tn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_v.bind(null,e),e}class Wf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ge.Z)(function*(){t.serializer=qu(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Om(this.persistence,new Nm,e.initialUser,this.serializer)}createPersistence(e){return new Ef(wf.zs,this.serializer)}createSharedClientState(e){return new Id}terminate(){var e=this;return(0,Ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zf extends Wf{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ge.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Ph(s.Vc.syncEngine),yield vl(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Om(this.persistence,new Nm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Cm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new Oa(t,this.persistence);return new sc(e.asyncQueue,s)}createPersistence(e){const t=Pm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?_l.withCacheSize(this.cacheSizeBytes):_l.DEFAULT;return new gh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jm(),Ch(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Id}}class Kf extends zf{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ge.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Eh&&(s.sharedClientState.syncEngine={jr:Cv.bind(null,a),zr:Tv.bind(null,a),Wr:dy.bind(null,a),$i:cy.bind(null,a),Qr:ay.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var d=(0,Ge.Z)(function*(g){yield function Iv(r,e){return fg.apply(this,arguments)}(s.Vc.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jm();if(!Eh.D(t))throw new jt(Dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Pm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Eh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Mc{initialize(e,t){var s=this;return(0,Ge.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>ry(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ev.bind(null,s.syncEngine),yield tg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ah}createDatastore(e){const t=qu(e.databaseInfo.databaseId),s=new ov(e.databaseInfo);return new lv(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,d=R=>ry(this.syncEngine,R,0),g=Mf.D()?new Mf:new iv,new Zu(t,s,a,d,g);var t,s,a,d,g}createSyncEngine(e,t){return function(s,a,d,g,R,G,X){const ge=new Xm(s,a,d,g,R,G);return X&&(ge.vc=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ge.Z)(function*(t){const s=tn(t);fe("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield Xc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fy(r,e=10240){let t=0;return{read:()=>(0,Ge.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class sd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Le("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ge.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ge.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const d=yield e.$c(a);return new Ad(JSON.parse(d),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ge.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,Ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class gg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new jt(Dt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,Ge.Z)(function*(d,g){const R=tn(d),G=sh(R.serializer)+"/documents",X={documents:g.map(Gt=>af(R.serializer,Gt))},ge=yield R.vo("BatchGetDocuments",G,X,g.length),$e=new Map;ge.forEach(Gt=>{const In=function om(r,e){return"found"in e?function(t,s){Wt(!!s.found);const a=Nu(t,s.found.name),d=Ho(s.found.updateTime),g=s.found.createTime?Ho(s.found.createTime):Gn.min(),R=new Ii({mapValue:{fields:s.found.fields}});return Ti.newFoundDocument(a,d,g,R)}(r,e):"missing"in e?function(t,s){Wt(!!s.missing),Wt(!!s.readTime);const a=Nu(t,s.missing),d=Ho(s.readTime);return Ti.newNoDocument(a,d)}(r,e):Jt()}(R.serializer,Gt);$e.set(In.key.toString(),In)});const It=[];return g.forEach(Gt=>{const In=$e.get(Gt.toString());Wt(!!In),It.push(In)}),It}),function(d,g){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oe(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const d=fn.fromPath(a);e.mutations.push(new Ye(d,e.precondition(d)))}),yield(s=(0,Ge.Z)(function*(a,d){const g=tn(a),R=sh(g.serializer)+"/documents",G={writes:d.map(X=>oh(g.serializer,X))};yield g.Io("Commit",R,G)}),function(a,d){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Jt();t=Gn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new jt(Dt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gn.min())?Us.exists(!1):Us.updateTime(t):Us.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gn.min()))throw new jt(Dt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Us.updateTime(t)}return Us.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mE{constructor(e,t,s,a,d){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=d,this.Bc=s.maxAttempts,this.qo=new Pf(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ge.Z)(function*(){const t=new gg(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(d=>{e.Uc(d)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Vo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uc(t)}return!1}}class Dv{constructor(e,t,s,a){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=D.UNAUTHENTICATED,this.clientId=Yi.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var g=(0,Ge.Z)(function*(R){fe("FirestoreClient","Received user=",R.uid),yield d.authCredentialListener(R),d.user=R});return function(R){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(s,g=>(fe("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,Ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new jt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Yu(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function od(r,e){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,Ge.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,Ge.Z)(function*(d){s.isEqual(d)||(yield Tf(e.localStore,d),s=d)});return function(d){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),Pd.apply(this,arguments)}function Zf(r,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Ge.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield Jf(r);fe("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Zm(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,d)=>Zm(e.remoteStore,d)),r._onlineComponents=e}),Yf.apply(this,arguments)}function Qf(r){return"FirebaseError"===r.name?r.code===Dt.FAILED_PRECONDITION||r.code===Dt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function Jf(r){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,Ge.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield od(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Qf(t))throw t;Ft("Error using user provided cache. Falling back to memory cache: "+t),yield od(r,new Wf)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield od(r,new Wf);return r._offlineComponents}),Xf.apply(this,arguments)}function Nd(r){return ep.apply(this,arguments)}function ep(){return ep=(0,Ge.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zf(r,r._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield Zf(r,new Mc))),r._onlineComponents}),ep.apply(this,arguments)}function py(r){return Jf(r).then(e=>e.persistence)}function Oh(r){return Jf(r).then(e=>e.localStore)}function mg(r){return Nd(r).then(e=>e.remoteStore)}function kh(r){return Nd(r).then(e=>e.syncEngine)}function Od(r){return _g.apply(this,arguments)}function _g(){return _g=(0,Ge.Z)(function*(r){const e=yield Nd(r),t=e.eventManager;return t.onListen=ey.bind(null,e.syncEngine),t.onUnlisten=ty.bind(null,e.syncEngine),t}),_g.apply(this,arguments)}function Eg(r,e,t={}){const s=new Fr;return r.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(a,d,g,R,G){const X=new sd({next:$e=>{d.enqueueAndForget(()=>Dd(a,ge));const It=$e.docs.has(g);!It&&$e.fromCache?G.reject(new jt(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):It&&$e.fromCache&&R&&"server"===R.source?G.reject(new jt(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve($e)},error:$e=>G.reject($e)}),ge=new Ac(ps(g.path),X,{includeMetadataChanges:!0,Ku:!0});return $a(a,ge)}(yield Od(r),r.asyncQueue,e,t,s)})),s.promise}function wg(r,e,t={}){const s=new Fr;return r.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(a,d,g,R,G){const X=new sd({next:$e=>{d.enqueueAndForget(()=>Dd(a,ge)),$e.fromCache&&"server"===R.source?G.reject(new jt(Dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve($e)},error:$e=>G.reject($e)}),ge=new Ac(g,X,{includeMetadataChanges:!0,Ku:!0});return $a(a,ge)}(yield Od(r),r.asyncQueue,e,t,s)})),s.promise}function Cg(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const Av=new Map;function Ig(r,e,t){if(!t)throw new jt(Dt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function wy(r,e,t,s){if(!0===e&&!0===s)throw new jt(Dt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Tg(r){if(!fn.isDocumentKey(r))throw new jt(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Cy(r){if(fn.isDocumentKey(r))throw new jt(Dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $o(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Jt()}function Fi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new jt(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$o(r);throw new jt(Dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Iy(r,e){if(e<=0)throw new jt(Dt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Ty{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new jt(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jt(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Cg(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new jt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new jt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new jt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new jt(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jt(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Zi;switch(t.type){case"firstParty":return new Fu(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new jt(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Av.get(e);t&&(fe("ComponentProvider","Removing Datastore"),Av.delete(e),t.terminate())}(this),Promise.resolve()}}class so{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new so(this.firestore,e,this._key)}}class Ga{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ga(this.firestore,e,this._query)}}class Rl extends Ga{constructor(e,t,s){super(e,t,ps(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new so(this.firestore,null,new fn(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function Dy(r,e,...t){if(r=(0,Je.m9)(r),Ig("collection","path",e),r instanceof kd){const s=pi.fromString(e,...t);return Cy(s),new Rl(r,null,s)}{if(!(r instanceof so||r instanceof Rl))throw new jt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pi.fromString(e,...t));return Cy(s),new Rl(r.firestore,null,s)}}function Fh(r,e,...t){if(r=(0,Je.m9)(r),1===arguments.length&&(e=Yi.A()),Ig("doc","path",e),r instanceof kd){const s=pi.fromString(e,...t);return Tg(s),new so(r,null,new fn(s))}{if(!(r instanceof so||r instanceof Rl))throw new jt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pi.fromString(e,...t));return Tg(s),new so(r.firestore,r instanceof Rl?r.converter:null,new fn(s))}}function Sy(r,e){return r=(0,Je.m9)(r),e=(0,Je.m9)(e),(r instanceof so||r instanceof Rl)&&(e instanceof so||e instanceof Rl)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function tp(r,e){return r=(0,Je.m9)(r),e=(0,Je.m9)(e),r instanceof Ga&&e instanceof Ga&&r.firestore===e.firestore&&Yn(r._query,e._query)&&r.converter===e.converter}class yE{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Pf(this,"async_queue_retry"),this.Xc=()=>{const t=Ch();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Ch();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ch();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Fr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ge.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Qo(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,Le("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=rg.createAndSchedule(this,e,t,s,d=>this.na(d));return this.zc.push(a),a}Zc(){this.Wc&&Jt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ge.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Lh(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class bg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class po extends kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new yE,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Du(this),this._firestoreClient.terminate()}}function Es(r){return r._firestoreClient||Du(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Du(r){var e,t,s;const a=r._freezeSettings(),d=(R=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new ho(r._databaseId,R,r._persistenceKey,(X=a).host,X.ssl,X.experimentalForceLongPolling,X.experimentalAutoDetectLongPolling,Cg(X.experimentalLongPollingOptions),X.useFetchStreams));var R,X;r._firestoreClient=new Dv(r._authCredentials,r._appCheckCredentials,r._queue,d),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function My(r,e,t){const s=new Fr;return r.asyncQueue.enqueue((0,Ge.Z)(function*(){try{yield od(r,t),yield Zf(r,e),s.resolve()}catch(a){const d=a;if(!Qf(d))throw d;Ft("Error enabling indexeddb cache. Falling back to memory cache: "+d),s.reject(d)}})).then(()=>s.promise)}function Py(r){if(r._initialized||r._terminated)throw new jt(Dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new su(Ts.fromBase64String(e))}catch(t){throw new jt(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new su(Ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new jt(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xc{constructor(e){this._methodName=e}}class Ld{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new jt(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new jt(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ar(this._lat,e._lat)||Ar(this._long,e._long)}}const rp=/^__.*__$/;class Sg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new S(e,this.data,this.fieldMask,t,this.fieldTransforms):new v(e,this.data,t,this.fieldTransforms)}}class Ag{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new S(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rg(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jt()}}class Vh{constructor(e,t,s,a,d,g){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===d&&this.ua(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Vh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return sp(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Rg(this.ca)&&rp.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Oy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||qu(e)}ya(e,t,s,a=!1){return new Vh({ca:e,methodName:t,ga:s,path:Ms.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pc(r){const e=r._freezeSettings(),t=qu(r._databaseId);return new Oy(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Uh(r,e,t,s,a,d={}){const g=r.ya(d.merge||d.mergeFields?2:0,e,t,a);Ng("Data must be an object, but it was:",g,s);const R=Ly(s,g);let G,X;if(d.merge)G=new Gi(g.fieldMask),X=g.fieldTransforms;else if(d.mergeFields){const ge=[];for(const $e of d.mergeFields){const It=Bh(e,$e,t);if(!g.contains(It))throw new jt(Dt.INVALID_ARGUMENT,`Field '${It}' is specified in your field mask but missing from your input data.`);Uy(ge,It)||ge.push(It)}G=new Gi(ge),X=g.fieldTransforms.filter($e=>G.covers($e.field))}else G=null,X=g.fieldTransforms;return new Sg(new Ii(R),G,X)}class Vd extends xc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vd}}function ky(r,e,t){return new Vh({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mg extends xc{_toFieldTransform(e){return new yd(e.path,new oc)}isEqual(e){return e instanceof Mg}}class Fv extends xc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ky(this,e,!0),s=this.pa.map(d=>ad(d,t)),a=new nu(s);return new yd(e.path,a)}isEqual(e){return this===e}}class Lv extends xc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ky(this,e,!0),s=this.pa.map(d=>ad(d,t)),a=new Ba(s);return new yd(e.path,a)}isEqual(e){return this===e}}class Vv extends xc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new lc(e.serializer,Qd(e.serializer,this.Ia));return new yd(e.path,t)}isEqual(e){return this===e}}function xg(r,e,t,s){const a=r.ya(1,e,t);Ng("Data must be an object, but it was:",a,s);const d=[],g=Ii.empty();ya(s,(G,X)=>{const ge=ip(e,G,t);X=(0,Je.m9)(X);const $e=a.da(ge);if(X instanceof Vd)d.push(ge);else{const It=ad(X,$e);null!=It&&(d.push(ge),g.set(ge,It))}});const R=new Gi(d);return new Ag(g,R,a.fieldTransforms)}function Pg(r,e,t,s,a,d){const g=r.ya(1,e,t),R=[Bh(e,s,t)],G=[a];if(d.length%2!=0)throw new jt(Dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let It=0;It<d.length;It+=2)R.push(Bh(e,d[It])),G.push(d[It+1]);const X=[],ge=Ii.empty();for(let It=R.length-1;It>=0;--It)if(!Uy(X,R[It])){const Gt=R[It];let In=G[It];In=(0,Je.m9)(In);const Hn=g.da(Gt);if(In instanceof Vd)X.push(Gt);else{const Zn=ad(In,Hn);null!=Zn&&(X.push(Gt),ge.set(Gt,Zn))}}const $e=new Gi(X);return new Ag(ge,$e,g.fieldTransforms)}function Fy(r,e,t,s=!1){return ad(t,r.ya(s?4:3,e))}function ad(r,e){if(Vy(r=(0,Je.m9)(r)))return Ng("Unsupported field value:",e,r),Ly(r,e);if(r instanceof xc)return function(t,s){if(!Rg(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let d=0;for(const g of t){let R=ad(g,s.wa(d));null==R&&(R={nullValue:"NULL_VALUE"}),a.push(R),d++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,Je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qd(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=hs.fromDate(t);return{timestampValue:Al(s.serializer,a)}}if(t instanceof hs){const a=new hs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Al(s.serializer,a)}}if(t instanceof Ld)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof su)return{bytesValue:N_(s.serializer,t._byteString)};if(t instanceof so){const a=s.databaseId,d=t.firestore._databaseId;if(!d.isEqual(a))throw s._a(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:rm(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${$o(t)}`)}(r,e)}function Ly(r,e){const t={};return Xa(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(r,(s,a)=>{const d=ad(a,e.ha(s));null!=d&&(t[s]=d)}),{mapValue:{fields:t}}}function Vy(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof hs||r instanceof Ld||r instanceof su||r instanceof so||r instanceof xc)}function Ng(r,e,t){if(!Vy(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=$o(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function Bh(r,e,t){if((e=(0,Je.m9)(e))instanceof gc)return e._internalPath;if("string"==typeof e)return ip(r,e);throw sp("Field path arguments must be of type string or ",r,!1,void 0,t)}const Uv=new RegExp("[~\\*/\\[\\]]");function ip(r,e,t){if(e.search(Uv)>=0)throw sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new gc(...e.split("."))._internalPath}catch(s){throw sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function sp(r,e,t,s,a){const d=s&&!s.isEmpty(),g=void 0!==a;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let G="";return(d||g)&&(G+=" (found",d&&(G+=` in field ${s}`),g&&(G+=` in document ${a}`),G+=")"),new jt(Dt.INVALID_ARGUMENT,R+r+G)}function Uy(r,e){return r.some(t=>t.isEqual(e))}class jh{constructor(e,t,s,a,d){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new so(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new By(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class By extends jh{data(){return super.data()}}function Hh(r,e){return"string"==typeof e?ip(r,e):e instanceof gc?e._internalPath:e._delegate._internalPath}function Og(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new jt(Dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class Ud extends op{}function mc(r,e,...t){let s=[];e instanceof op&&s.push(e),s=s.concat(t),function(a){const d=a.filter(R=>R instanceof ld).length,g=a.filter(R=>R instanceof Bd).length;if(d>1||d>0&&g>0)throw new jt(Dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Bd extends Ud{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Bd(e,t,s)}_apply(e){const t=this._parse(e);return Gh(e._query,t),new Ga(e.firestore,e.converter,Va(e._query,t))}_parse(e){const t=Pc(e.firestore);return function(a,d,g,R,G,X,ge){let $e;if(G.isKeyField()){if("array-contains"===X||"array-contains-any"===X)throw new jt(Dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${X}' queries on documentId().`);if("in"===X||"not-in"===X){zy(ge,X);const It=[];for(const Gt of ge)It.push(Wy(R,a,Gt));$e={arrayValue:{values:It}}}else $e=Wy(R,a,ge)}else"in"!==X&&"not-in"!==X&&"array-contains-any"!==X||zy(ge,X),$e=Fy(g,"where",ge,"in"===X||"not-in"===X);return gi.create(G,X,$e)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ld extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ld(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Wi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let d=s;const g=a.getFlattenedFilters();for(const R of g)Gh(d,R),d=Va(d,R)}(e._query,t),new Ga(e.firestore,e.converter,Va(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yc extends Ud{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yc(e,t)}_apply(e){const t=function(s,a,d){if(null!==s.startAt)throw new jt(Dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new jt(Dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new Uo(a,d);return function(R,G){if(null===La(R)){const X=la(R);null!==X&&Ky(0,X,G.field)}}(s,g),g}(e._query,this._field,this._direction);return new Ga(e.firestore,e.converter,function(s,a){const d=s.explicitOrderBy.concat([a]);return new ts(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class ap extends Ud{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new ap(e,t,s)}_apply(e){return new Ga(e.firestore,e.converter,Cu(e._query,this._limit,this._limitType))}}class Hd extends Ud{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Hd(e,t,s)}_apply(e){const t=Gy(e,this.type,this._docOrFields,this._inclusive);return new Ga(e.firestore,e.converter,(a=t,new ts((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class $h extends Ud{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new $h(e,t,s)}_apply(e){const t=Gy(e,this.type,this._docOrFields,this._inclusive);return new Ga(e.firestore,e.converter,(a=t,new ts((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Gy(r,e,t,s){if(t[0]=(0,Je.m9)(t[0]),t[0]instanceof jh)return function(a,d,g,R,G){if(!R)throw new jt(Dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const X=[];for(const ge of jo(a))if(ge.field.isKeyField())X.push(A(d,R.key));else{const $e=R.data.field(ge.field);if(va($e))throw new jt(Dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===$e){const It=ge.field.canonicalString();throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${It}' (used as the orderBy) does not exist.`)}X.push($e)}return new Xo(X,G)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Pc(r.firestore);return function(d,g,R,G,X,ge){const $e=d.explicitOrderBy;if(X.length>$e.length)throw new jt(Dt.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const It=[];for(let Gt=0;Gt<X.length;Gt++){const In=X[Gt];if($e[Gt].field.isKeyField()){if("string"!=typeof In)throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof In}`);if(!Ao(d)&&-1!==In.indexOf("/"))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${In}' contains a slash.`);const Hn=d.path.child(pi.fromString(In));if(!fn.isDocumentKey(Hn))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Hn}' is not because it contains an odd number of segments.`);const Zn=new fn(Hn);It.push(A(g,Zn))}else{const Hn=Fy(R,G,In);It.push(Hn)}}return new Xo(It,ge)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Wy(r,e,t){if("string"==typeof(t=(0,Je.m9)(t))){if(""===t)throw new jt(Dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ao(e)&&-1!==t.indexOf("/"))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(pi.fromString(t));if(!fn.isDocumentKey(s))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return A(r,new fn(s))}if(t instanceof so)return A(r,t._key);throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$o(t)}.`)}function zy(r,e){if(!Array.isArray(r)||0===r.length)throw new jt(Dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gh(r,e){if(e.isInequality()){const s=la(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const d=La(r);null!==d&&Ky(0,a,d)}const t=function(s,a){for(const d of s)for(const g of d.getFlattenedFilters())if(a.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new jt(Dt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ky(r,e,t){if(!t.isEqual(e))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class $d{convertValue(e,t="none"){switch(tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ya(e,(a,d)=>{s[a]=this.convertValue(d,t)}),s}convertGeoPoint(e){return new Ld(xs(e.latitude),xs(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Xl(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ea(e));default:return null}}convertTimestamp(e){const t=jl(e);return new hs(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=pi.fromString(e);Wt(lf(s));const a=new Jo(s.get(1),s.get(3)),d=new fn(s.popFirst(5));return a.isEqual(t)||Le(`Document ${d} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function go(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class EE extends $d{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new so(this.firestore,null,t)}}class Nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ec extends jh{constructor(e,t,s,a,d,g){super(e,t,s,a,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Hh("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class zh extends ec{data(e={}){return super.data(e)}}class Oc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Nc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new zh(this._firestore,this._userDataWriter,s.key,s,new Nc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new jt(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new zh(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Nc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>a||3!==g.type).map(g=>{const R=new zh(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Nc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let G=-1,X=-1;return 0!==g.type&&(G=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),X=d.indexOf(g.doc.key)),{type:Kv(g.type),doc:R,oldIndex:G,newIndex:X}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kv(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jt()}}function Gd(r,e){return r instanceof ec&&e instanceof ec?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Oc&&e instanceof Oc&&r._firestore===e._firestore&&tp(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class kc extends $d{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new so(this.firestore,null,t)}}function Qy(r,e,t){r=Fi(r,so);const s=Fi(r.firestore,po),a=go(r.converter,e,t);return ud(s,[Uh(Pc(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,Us.none())])}function Wd(r,e,t,...s){r=Fi(r,so);const a=Fi(r.firestore,po),d=Pc(a);let g;return g="string"==typeof(e=(0,Je.m9)(e))||e instanceof gc?Pg(d,"updateDoc",r._key,e,t,s):xg(d,"updateDoc",r._key,e),ud(a,[g.toMutation(r._key,Us.exists(!0))])}function Jy(r,...e){var t,s,a;r=(0,Je.m9)(r);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||Lh(e[g])||(d=e[g],g++);const R={includeMetadataChanges:d.includeMetadataChanges};if(Lh(e[g])){const $e=e[g];e[g]=null===(t=$e.next)||void 0===t?void 0:t.bind($e),e[g+1]=null===(s=$e.error)||void 0===s?void 0:s.bind($e),e[g+2]=null===(a=$e.complete)||void 0===a?void 0:a.bind($e)}let G,X,ge;if(r instanceof so)X=Fi(r.firestore,po),ge=ps(r._key.path),G={next:$e=>{e[g]&&e[g](up(X,r,$e))},error:e[g+1],complete:e[g+2]};else{const $e=Fi(r,Ga);X=Fi($e.firestore,po),ge=$e._query;const It=new kc(X);G={next:Gt=>{e[g]&&e[g](new Oc(X,It,$e,Gt))},error:e[g+1],complete:e[g+2]},Og(r._query)}return function($e,It,Gt,In){const Hn=new sd(In),Zn=new Ac(It,Hn,Gt);return $e.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return $a(yield Od($e),Zn)})),()=>{Hn.Dc(),$e.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return Dd(yield Od($e),Zn)}))}}(Es(X),ge,R,G)}function ud(r,e){return function(t,s){const a=new Fr;return t.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function ny(r,e,t){return ag.apply(this,arguments)}(yield kh(t),s,a)})),a.promise}(Es(r),e)}function up(r,e,t){const s=t.docs.get(e._key),a=new kc(r);return new ec(r,a,e._key,s,new Nc(t.hasPendingWrites,t.fromCache),e.converter)}const qh={maxAttempts:5};class e_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pc(e)}set(e,t,s){this._verifyNotCommitted();const a=Fc(e,this._firestore),d=go(a.converter,t,s),g=Uh(this._dataReader,"WriteBatch.set",a._key,d,null!==a.converter,s);return this._mutations.push(g.toMutation(a._key,Us.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const d=Fc(e,this._firestore);let g;return g="string"==typeof(t=(0,Je.m9)(t))||t instanceof gc?Pg(this._dataReader,"WriteBatch.update",d._key,t,s,a):xg(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,Us.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fc(e,this._firestore);return this._mutations=this._mutations.concat(new Oe(t._key,Us.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new jt(Dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fc(r,e){if((r=(0,Je.m9)(r)).firestore!==e)throw new jt(Dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pc(e)}get(e){const t=Fc(e,this._firestore),s=new EE(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Jt();const d=a[0];if(d.isFoundDocument())return new jh(this._firestore,s,d.key,d,t.converter);if(d.isNoDocument())return new jh(this._firestore,s,t._key,null,t.converter);throw Jt()})}set(e,t,s){const a=Fc(e,this._firestore),d=go(a.converter,t,s),g=Uh(this._dataReader,"Transaction.set",a._key,d,null!==a.converter,s);return this._transaction.set(a._key,g),this}update(e,t,s,...a){const d=Fc(e,this._firestore);let g;return g="string"==typeof(t=(0,Je.m9)(t))||t instanceof gc?Pg(this._dataReader,"Transaction.update",d._key,t,s,a):xg(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Fc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fc(e,this._firestore),s=new kc(this._firestore);return super.get(e).then(a=>new ec(this._firestore,s,t._key,a._document,new Nc(!1,!1),t.converter))}}function dp(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function i_(){if("undefined"==typeof Uint8Array)throw new jt("unimplemented","Uint8Arrays are not available in this environment.")}function hp(){if(!function _a(){return"undefined"!=typeof atob}())throw new jt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){T=qt.SDK_VERSION,(0,qt._registerComponent)(new at.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const d=t.getProvider("app").getImmediate(),g=new po(new aa(t.getProvider("auth-internal")),new Ka(t.getProvider("app-check-internal")),function(R,G){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new jt(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(R.options.projectId,G)}(d,s),d);return a=Object.assign({useFetchStreams:e},a),g._setSettings(a),g},"PUBLIC").setMultipleInstances(!0)),(0,qt.registerVersion)(P,"3.13.0",r),(0,qt.registerVersion)(P,"3.13.0","esm2017")}();class Zh{constructor(e){this._delegate=e}static fromBase64String(e){return hp(),new Zh(su.fromBase64String(e))}static fromUint8Array(e){return i_(),new Zh(su.fromUint8Array(e))}toBase64(){return hp(),this._delegate.toBase64()}toUint8Array(){return i_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fp(r){return function s_(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class p0{enableIndexedDbPersistence(e,t){return function Ay(r,e){Py(r=Fi(r,po));const t=Es(r);if(t._uninitializedComponentsProvider)throw new jt(Dt.FAILED_PRECONDITION,"SDK cache is already specified.");Ft("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new Mc;return My(t,a,new zf(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ry(r){Py(r=Fi(r,po));const e=Es(r);if(e._uninitializedComponentsProvider)throw new jt(Dt.FAILED_PRECONDITION,"SDK cache is already specified.");Ft("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new Mc;return My(e,s,new Kf(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xv(r){if(r._initialized&&!r._terminated)throw new jt(Dt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{yield(t=(0,Ge.Z)(function*(s){if(!ro.D())return Promise.resolve();const a=s+"main";yield ro.delete(a)}),function(s){return t.apply(this,arguments)})(Pm(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class o_{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ft("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function by(r,e,t,s={}){var a;const d=(r=Fi(r,kd))._getSettings(),g=`${e}:${t}`;if("firestore.googleapis.com"!==d.host&&d.host!==g&&Ft("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},d),{host:g,ssl:!1})),s.mockUserToken){let R,G;if("string"==typeof s.mockUserToken)R=s.mockUserToken,G=D.MOCK_USER;else{R=(0,Je.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const X=s.mockUserToken.sub||s.mockUserToken.user_id;if(!X)throw new jt(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");G=new D(X)}r._authCredentials=new ha(new Cl(R,G))}}(this._delegate,e,t,s)}enableNetwork(){return function Nv(r){return function Sv(r){return r.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield py(r),t=yield mg(r);return e.setNetworkEnabled(!0),function(s){const a=tn(s);return a.vu.delete(0),Jc(a)}(t)}))}(Es(r=Fi(r,po)))}(this._delegate)}disableNetwork(){return function Dg(r){return function gy(r){return r.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield py(r),t=yield mg(r);return e.setNetworkEnabled(!1),(s=(0,Ge.Z)(function*(a){const d=tn(a);d.vu.add(0),yield Xc(d),d.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Es(r=Fi(r,po)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,wy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Pv(r){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function pE(r,e){return cg.apply(this,arguments)}(yield kh(e),t)})),t.promise}(Es(r=Fi(r,po)))}(this._delegate)}onSnapshotsInSync(e){return function Qv(r,e){return function yy(r,e){const t=new sd(e);return r.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return s=yield Od(r),a=t,tn(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return s=yield Od(r),a=t,void tn(s).ku.delete(a);var s,a}))}}(Es(r=Fi(r,po)),Lh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new jt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kd(this,Dy(this._delegate,e))}catch(t){throw Ml(t,"collection()","Firestore.collection()")}}doc(e){try{return new Su(this,Fh(this._delegate,e))}catch(t){throw Ml(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xl(this,function Rv(r,e){if(r=Fi(r,kd),Ig("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jt(Dt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ga(r,null,(t=e,new ts(pi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ml(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=Fi(r,po);const s=Object.assign(Object.assign({},qh),t);return function(a){if(a.maxAttempts<1)throw new jt(Dt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,d,g){const R=new Fr;return a.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){const G=yield function yg(r){return Nd(r).then(e=>e.datastore)}(a);new mE(a.asyncQueue,G,g,d,R).run()})),R.promise}(Es(r),a=>e(new a0(r,a)),s)}(this._delegate,t=>e(new a_(this,t)))}batch(){return Es(this._delegate),new Fg(new e_(this._delegate,e=>ud(this._delegate,e)))}loadBundle(e){return function Ov(r,e){const t=Es(r=Fi(r,po)),s=new bg;return function _y(r,e,t,s){const a=function(d,g){let R;return R="string"==typeof d?A_().encode(d):d,G=function(G,X){if(G instanceof Uint8Array)return fy(G,X);if(G instanceof ArrayBuffer)return fy(new Uint8Array(G),X);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new qf(G,g);var G}(t,qu(e));r.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){!function bv(r,e,t){const s=tn(r);var a;(a=(0,Ge.Z)(function*(d,g,R){try{const G=yield g.getMetadata();if(yield function(It,Gt){const In=tn(It),Hn=Ho(Gt.createTime);return In.persistence.runTransaction("hasNewerBundle","readonly",Zn=>In.qs.getBundleMetadata(Zn,Gt.id)).then(Zn=>!!Zn&&Zn.createTime.compareTo(Hn)>=0)}(d.localStore,G))return yield g.close(),R._completeWith({taskState:"Success",documentsLoaded:(It=G).totalDocuments,bytesLoaded:It.totalBytes,totalDocuments:It.totalDocuments,totalBytes:It.totalBytes}),Promise.resolve(new Set);R._updateProgress(nd(G));const X=new Rd(G,d.localStore,g.serializer);let ge=yield g.bc();for(;ge;){const It=yield X.zu(ge);It&&R._updateProgress(It),ge=yield g.bc()}const $e=yield X.complete();return yield Ju(d,$e.Ju,void 0),yield function(It,Gt){const In=tn(It);return In.persistence.runTransaction("Save bundle","readwrite",Hn=>In.qs.saveBundleMetadata(Hn,Gt))}(d.localStore,G),R._completeWith($e.progress),Promise.resolve($e.Hu)}catch(G){return Ft("SyncEngine",`Loading bundle failed with ${G}`),R._failWith(G),Promise.resolve(new Set)}var It}),function(d,g,R){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield kh(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function xy(r,e){return function vy(r,e){return r.asyncQueue.enqueue((0,Ge.Z)(function*(){return function(t,s){const a=tn(t);return a.persistence.runTransaction("Get named query","readonly",d=>a.qs.getNamedQuery(d,s))}(yield Oh(r),e)}))}(Es(r=Fi(r,po)),e).then(t=>t?new Ga(r,null,t.query):null)}(this._delegate,e).then(t=>t?new xl(this,t):null)}}class pp extends $d{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zh(new su(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Su.forKey(t,this.firestore,null)}}class a_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}get(e){const t=dd(e);return this._delegate.get(t).then(s=>new Yh(this._firestore,new ec(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=dd(e);return s?(dp("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=dd(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=dd(e);return this._delegate.delete(t),this}}class Fg{constructor(e){this._delegate=e}set(e,t,s){const a=dd(e);return s?(dp("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=dd(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=dd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cd{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new zh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qh(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=cd.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let d=a.get(t);return d||(d=new cd(e,new pp(e),t),a.set(t,d)),d}}cd.INSTANCES=new WeakMap;class Su{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new jt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Su(t,new so(t._delegate,s,new fn(e)))}static forKey(e,t,s){return new Su(t,new so(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Kd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kd(this.firestore,Dy(this._delegate,e))}catch(t){throw Ml(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Je.m9)(e))instanceof so&&Sy(this._delegate,e)}set(e,t){t=dp("DocumentReference.set",t);try{return t?Qy(this._delegate,e,t):Qy(this._delegate,e)}catch(s){throw Ml(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Wd(this._delegate,e):Wd(this._delegate,e,t,...s)}catch(a){throw Ml(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Kh(r){return ud(Fi(r.firestore,po),[new Oe(r._key,Us.none())])}(this._delegate)}onSnapshot(...e){const t=l_(e),s=u_(e,a=>new Yh(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Jy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Zv(r){r=Fi(r,so);const e=Fi(r.firestore,po),t=Es(e),s=new kc(e);return function vg(r,e){const t=new Fr;return r.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(s=(0,Ge.Z)(function*(a,d,g){try{const R=yield function(G,X){const ge=tn(G);return ge.persistence.runTransaction("read document","readonly",$e=>ge.localDocuments.getDocument($e,X))}(a,d);R.isFoundDocument()?g.resolve(R):R.isNoDocument()?g.resolve(null):g.reject(new jt(Dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const G=Yu(R,`Failed to get document '${d} from cache`);g.reject(G)}}),function(a,d,g){return s.apply(this,arguments)})(yield Oh(r),e,t);var s})),t.promise}(t,r._key).then(a=>new ec(e,s,r._key,a,new Nc(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function lp(r){r=Fi(r,so);const e=Fi(r.firestore,po);return Eg(Es(e),r._key,{source:"server"}).then(t=>up(e,r,t))}(this._delegate):function qv(r){r=Fi(r,so);const e=Fi(r.firestore,po);return Eg(Es(e),r._key).then(t=>up(e,r,t))}(this._delegate),t.then(s=>new Yh(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Su(this.firestore,this._delegate.withConverter(e?cd.getInstance(this.firestore,e):null))}}function Ml(r,e,t){return r.message=r.message.replace(e,t),r}function l_(r){for(const e of r)if("object"==typeof e&&!fp(e))return e;return{}}function u_(r,e){var t,s;let a;return a=fp(r[0])?r[0]:fp(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:d=>{a.next&&a.next(e(d))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Yh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Su(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Gd(this._delegate,e._delegate)}}class Qh extends Yh{data(e){const t=this._delegate.data(e);return function Ri(r,e){r||Jt()}(void 0!==t),t}}class xl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}where(e,t,s){try{return new xl(this.firestore,mc(this._delegate,function jy(r,e,t){const s=e,a=Hh("where",r);return Bd._create(a,s,t)}(e,t,s)))}catch(a){throw Ml(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xl(this.firestore,mc(this._delegate,function jv(r,e="asc"){const t=e,s=Hh("orderBy",r);return yc._create(s,t)}(e,t)))}catch(s){throw Ml(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xl(this.firestore,mc(this._delegate,function jd(r){return Iy("limit",r),ap._create("limit",r,"F")}(e)))}catch(t){throw Ml(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xl(this.firestore,mc(this._delegate,function Hv(r){return Iy("limitToLast",r),ap._create("limitToLast",r,"L")}(e)))}catch(t){throw Ml(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xl(this.firestore,mc(this._delegate,function _E(...r){return Hd._create("startAt",r,!0)}(...e)))}catch(t){throw Ml(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xl(this.firestore,mc(this._delegate,function $y(...r){return Hd._create("startAfter",r,!1)}(...e)))}catch(t){throw Ml(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xl(this.firestore,mc(this._delegate,function vE(...r){return $h._create("endBefore",r,!1)}(...e)))}catch(t){throw Ml(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xl(this.firestore,mc(this._delegate,function Ur(...r){return $h._create("endAt",r,!0)}(...e)))}catch(t){throw Ml(t,"endAt()","Query.endAt()")}}isEqual(e){return tp(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Zy(r){r=Fi(r,Ga);const e=Fi(r.firestore,po),t=Es(e),s=new kc(e);return function my(r,e){const t=new Fr;return r.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(s=(0,Ge.Z)(function*(a,d,g){try{const R=yield jp(a,d,!0),G=new sg(d,R.ir),X=G.sc(R.documents),ge=G.applyChanges(X,!1);g.resolve(ge.snapshot)}catch(R){const G=Yu(R,`Failed to execute query '${d} against cache`);g.reject(G)}}),function(a,d,g){return s.apply(this,arguments)})(yield Oh(r),e,t);var s})),t.promise}(t,r._query).then(a=>new Oc(e,s,r,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function Yy(r){r=Fi(r,Ga);const e=Fi(r.firestore,po),t=Es(e),s=new kc(e);return wg(t,r._query,{source:"server"}).then(a=>new Oc(e,s,r,a))}(this._delegate):function qy(r){r=Fi(r,Ga);const e=Fi(r.firestore,po),t=Es(e),s=new kc(e);return Og(r._query),wg(t,r._query).then(a=>new Oc(e,s,r,a))}(this._delegate),t.then(s=>new gp(this.firestore,new Oc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=l_(e),s=u_(e,a=>new gp(this.firestore,new Oc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Jy(this._delegate,t,s)}withConverter(e){return new xl(this.firestore,this._delegate.withConverter(e?cd.getInstance(this.firestore,e):null))}}class c_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new c_(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Qh(this._firestore,s))})}isEqual(e){return Gd(this._delegate,e._delegate)}}class Kd extends xl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Su(this.firestore,e):null}doc(e){try{return new Su(this.firestore,void 0===e?Fh(this._delegate):Fh(this._delegate,e))}catch(t){throw Ml(t,"doc()","CollectionReference.doc()")}}add(e){return function Yv(r,e){const t=Fi(r.firestore,po),s=Fh(r),a=go(r.converter,e);return ud(t,[Uh(Pc(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,Us.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Su(this.firestore,t))}isEqual(e){return Sy(this._delegate,e._delegate)}withConverter(e){return new Kd(this.firestore,this._delegate.withConverter(e?cd.getInstance(this.firestore,e):null))}}function dd(r){return Fi(r,so)}class mp{constructor(...e){this._delegate=new gc(...e)}static documentId(){return new mp(Ms.keyField().canonicalString())}isEqual(e){return(e=(0,Je.m9)(e))instanceof gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class hd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function t_(){return new Mg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hd(e)}static delete(){const e=function u0(){return new Vd("deleteField")}();return e._methodName="FieldValue.delete",new hd(e)}static arrayUnion(...e){const t=function c0(...r){return new Fv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new hd(t)}static arrayRemove(...e){const t=function d0(...r){return new Lv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new hd(t)}static increment(e){const t=function zd(r){return new Vv("increment",r)}(e);return t._methodName="FieldValue.increment",new hd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const g0={Firestore:o_,GeoPoint:Ld,Timestamp:hs,Blob:Zh,Transaction:a_,WriteBatch:Fg,DocumentReference:Su,DocumentSnapshot:Yh,Query:xl,QueryDocumentSnapshot:Qh,QuerySnapshot:gp,CollectionReference:Kd,FieldPath:mp,FieldValue:hd,setLogLevel:function kg(r){!function de(r){H.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function Lg(r){(function m0(r,e){r.INTERNAL.registerComponent(new at.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},g0)))})(r,(e,t)=>new o_(e,t,new p0)),r.registerVersion("@firebase/firestore-compat","0.3.12")}(ot.Z);var tc=U(1205),d_=U(6215),Vg=U(9260);function h_(r,e){return function y0(r,e=V.z){return new ee.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function Bg(r,e){return h_(r,e).pipe((0,ve.U)(t=>({payload:t,type:"query"})))}function Jh(r,e){return Bg(r,e).pipe((0,Xe.O)(void 0),Ie(),(0,ve.U)(([t,s])=>{const a=s.payload.docChanges(),d=a.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((g,R)=>{const G=a.find(ge=>ge.doc.ref.isEqual(g.ref)),X=null==t?void 0:t.payload.docs.find(ge=>ge.ref.isEqual(g.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(g.metadata)||!G&&X&&JSON.stringify(X.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:g}})}),d}))}function f_(r,e,t){return Jh(r,t).pipe((0,Qe.R)((s,a)=>function p_(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function g_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return jg(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jg(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jg(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(d=>d.payload),e),[]),(0,St.x)(),(0,ve.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function jg(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function _0(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class m_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Jh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ve.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Xe.O)(void 0),Ie(),(0,vt.h)(([s,a])=>a.length>0||!s),(0,ve.U)(([s,a])=>a),je.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Qe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=_0(e);return f_(this.query,t,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(e={}){return Bg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),je.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(je.iC)}add(e){return this.ref.add(e)}doc(e){return new Xh(this.ref.doc(e),this.afs)}}class Xh{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:d}=Hg(s,t);return new m_(a,d,this.afs)}snapshotChanges(){return function Ug(r,e){return h_(r,e).pipe((0,Xe.O)(void 0),Ie(),(0,ve.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ve.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ie.D)(this.ref.get(e)).pipe(je.iC)}}class v0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Jh(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,vt.h)(t=>t.length>0),je.iC):Jh(this.query,this.afs.schedulers.outsideAngular).pipe(je.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Qe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=_0(e);return f_(this.query,t,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(e={}){return Bg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),je.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(je.iC)}}const fd=new y.OlP("angularfire2.enableFirestorePersistence"),qd=new y.OlP("angularfire2.firestore.persistenceSettings"),E0=new y.OlP("angularfire2.firestore.settings"),TE=new y.OlP("angularfire2.firestore.use-emulator");function Hg(r,e=(t=>t)){return{query:e(r),ref:r}}let y_=(()=>{class r{constructor(t,s,a,d,g,R,G,X,ge,$e,It,Gt,In,Hn,Zn,Wr,zi){this.schedulers=G;const zr=(0,_t.on)(t,R,s),Go=ge;$e&&(0,tc.nw)(zr,R,It,In,Hn,Zn,Gt,Wr),[this.firestore,this.persistenceEnabled$]=(0,_t.cc)(`${zr.name}.firestore`,"AngularFirestore",zr.name,()=>{const qs=R.runOutsideAngular(()=>zr.firestore());if(d&&qs.settings(d),Go&&qs.useEmulator(...Go),a&&!(0,Vt.PM)(g)){const Zs=()=>{try{return(0,ie.D)(qs.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(Pl){return"undefined"!=typeof console&&console.warn(Pl),(0,ke.of)(!1)}};return[qs,R.runOutsideAngular(Zs)]}return[qs,(0,ke.of)(!1)]},[d,Go,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=Hg(a,s),R=this.schedulers.ngZone.run(()=>d);return new m_(R,g,this)}collectionGroup(t,s){const a=s||(g=>g),d=this.firestore.collectionGroup(t);return new v0(a(d),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new Xh(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(y.LFG(_t.Dh),y.LFG(_t.xv,8),y.LFG(fd,8),y.LFG(E0,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(je.HU),y.LFG(qd,8),y.LFG(TE,8),y.LFG(tc.zQ,8),y.LFG(tc.Qv,8),y.LFG(tc.L6,8),y.LFG(tc._Q,8),y.LFG(tc.rT,8),y.LFG(tc.lh,8),y.LFG(tc.f7,8),y.LFG(d_.nm,8))},r.\u0275prov=y.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),w0=(()=>{class r{constructor(){Vg.Z.registerVersion("angularfire",je.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:fd,useValue:!0},{provide:qd,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({providers:[y_]}),r})()},377:(hn,ct,U)=>{U.d(ct,{Q1:()=>ue,TE:()=>Yr});var y=U(8306),V=U(9646),ee=U(8996),ie=U(4986),ke=U(4482),je=U(5403),He=U(4004),nt=U(3900),Ie=U(4976),ve=U(5e3),Qe=U(2011),St=U(3942),vt=U(5861),_t=U(6881),Vt=U(2090),dt=U(4859);const ot="firebasestorage.googleapis.com",Ge="storageBucket";class Je extends Vt.ZR{constructor(K,pe,be=0){super(bt(K),`Firebase Storage: ${pe} (${bt(K)})`),this.status_=be,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(K){this.status_=K}_codeEquals(K){return bt(K)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(K){this.customData.serverResponse=K,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ct=(()=>{return(W=Ct||(Ct={})).UNKNOWN="unknown",W.OBJECT_NOT_FOUND="object-not-found",W.BUCKET_NOT_FOUND="bucket-not-found",W.PROJECT_NOT_FOUND="project-not-found",W.QUOTA_EXCEEDED="quota-exceeded",W.UNAUTHENTICATED="unauthenticated",W.UNAUTHORIZED="unauthorized",W.UNAUTHORIZED_APP="unauthorized-app",W.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",W.INVALID_CHECKSUM="invalid-checksum",W.CANCELED="canceled",W.INVALID_EVENT_NAME="invalid-event-name",W.INVALID_URL="invalid-url",W.INVALID_DEFAULT_BUCKET="invalid-default-bucket",W.NO_DEFAULT_BUCKET="no-default-bucket",W.CANNOT_SLICE_BLOB="cannot-slice-blob",W.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",W.NO_DOWNLOAD_URL="no-download-url",W.INVALID_ARGUMENT="invalid-argument",W.INVALID_ARGUMENT_COUNT="invalid-argument-count",W.APP_DELETED="app-deleted",W.INVALID_ROOT_OPERATION="invalid-root-operation",W.INVALID_FORMAT="invalid-format",W.INTERNAL_ERROR="internal-error",W.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ct;var W})();function bt(W){return"storage/"+W}function Se(){return new Je(Ct.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function un(){return new Je(Ct.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sn(){return new Je(Ct.CANCELED,"User canceled the upload/download.")}function cn(){return new Je(Ct.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Me(W){return new Je(Ct.INVALID_ARGUMENT,W)}function Ee(){return new Je(Ct.APP_DELETED,"The Firebase app was deleted.")}function Ne(W){return new Je(Ct.INVALID_ROOT_OPERATION,"The operation '"+W+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function st(W,K){return new Je(Ct.INVALID_FORMAT,"String does not match format '"+W+"': "+K)}function Zt(W){throw new Je(Ct.INTERNAL_ERROR,"Internal error: "+W)}class pn{constructor(K,pe){this.bucket=K,this.path_=pe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const K=encodeURIComponent;return"/b/"+K(this.bucket)+"/o/"+K(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(K,pe){let be;try{be=pn.makeFromUrl(K,pe)}catch(Ke){return new pn(K,"")}if(""===be.path)return be;throw function or(W){return new Je(Ct.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+W+"'.")}(K)}static makeFromUrl(K,pe){let be=null;const Ke="([A-Za-z0-9.\\-_]+)",Fn=new RegExp("^gs://"+Ke+"(/(.*))?$","i");function sr(Ni){Ni.path_=decodeURIComponent(Ni.path)}const oi=pe.replace(/[.]/g,"\\."),qi=[{regex:Fn,indices:{bucket:1,path:3},postModify:function yt(Ni){"/"===Ni.path.charAt(Ni.path.length-1)&&(Ni.path_=Ni.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${oi}/v[A-Za-z0-9_]+/b/${Ke}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:sr},{regex:new RegExp(`^https?://${pe===ot?"(?:storage.googleapis.com|storage.cloud.google.com)":pe}/${Ke}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:sr}];for(let Ni=0;Ni<qi.length;Ni++){const Gs=qi[Ni],Mo=Gs.regex.exec(K);if(Mo){let wo=Mo[Gs.indices.path];wo||(wo=""),be=new pn(Mo[Gs.indices.bucket],wo),Gs.postModify(be);break}}if(null==be)throw function Ot(W){return new Je(Ct.INVALID_URL,"Invalid URL '"+W+"'.")}(K);return be}}class wn{constructor(K){this.promise_=Promise.reject(K)}getPromise(){return this.promise_}cancel(K=!1){}}function yn(W){return"string"==typeof W||W instanceof String}function nr(W){return On()&&W instanceof Blob}function On(){return"undefined"!=typeof Blob&&!(0,Vt.UG)()}function Vn(W,K,pe,be){if(be<K)throw Me(`Invalid value for '${W}'. Expected ${K} or greater.`);if(be>pe)throw Me(`Invalid value for '${W}'. Expected ${pe} or less.`)}function ti(W,K,pe){let be=K;return null==pe&&(be=`https://${K}`),`${pe}://${be}/v0${W}`}function Li(W){const K=encodeURIComponent;let pe="?";for(const be in W)W.hasOwnProperty(be)&&(pe=pe+(K(be)+"=")+K(W[be])+"&");return pe=pe.slice(0,-1),pe}var xt=(()=>{return(W=xt||(xt={}))[W.NO_ERROR=0]="NO_ERROR",W[W.NETWORK_ERROR=1]="NETWORK_ERROR",W[W.ABORT=2]="ABORT",xt;var W})();function We(W,K){const pe=W>=500&&W<600,Ke=-1!==[408,429].indexOf(W),yt=-1!==K.indexOf(W);return pe||Ke||yt}class ze{constructor(K,pe,be,Ke,yt,en,Fn,xn,sr,Bn,oi,Gr=!0){this.url_=K,this.method_=pe,this.headers_=be,this.body_=Ke,this.successCodes_=yt,this.additionalRetryCodes_=en,this.callback_=Fn,this.errorCallback_=xn,this.timeout_=sr,this.progressCallback_=Bn,this.connectionFactory_=oi,this.retry=Gr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((hi,Qr)=>{this.resolve_=hi,this.reject_=Qr,this.start_()})}start_(){const pe=(be,Ke)=>{const yt=this.resolve_,en=this.reject_,Fn=Ke.connection;if(Ke.wasSuccessCode)try{const xn=this.callback_(Fn,Fn.getResponse());!function _r(W){return void 0!==W}(xn)?yt():yt(xn)}catch(xn){en(xn)}else if(null!==Fn){const xn=Se();xn.serverResponse=Fn.getErrorText(),en(this.errorCallback_?this.errorCallback_(Fn,xn):xn)}else en(Ke.canceled?this.appDelete_?Ee():sn():un())};this.canceled_?pe(0,new ft(!1,null,!0)):this.backoffId_=function kn(W,K,pe){let be=1,Ke=null,yt=null,en=!1,Fn=0;function xn(){return 2===Fn}let sr=!1;function Bn(...Jr){sr||(sr=!0,K.apply(null,Jr))}function oi(Jr){Ke=setTimeout(()=>{Ke=null,W(hi,xn())},Jr)}function Gr(){yt&&clearTimeout(yt)}function hi(Jr,...es){if(sr)return void Gr();if(Jr)return Gr(),void Bn.call(null,Jr,...es);if(xn()||en)return Gr(),void Bn.call(null,Jr,...es);let qi;be<64&&(be*=2),1===Fn?(Fn=2,qi=0):qi=1e3*(be+Math.random()),oi(qi)}let Qr=!1;function Hi(Jr){Qr||(Qr=!0,Gr(),!sr&&(null!==Ke?(Jr||(Fn=2),clearTimeout(Ke),oi(0)):Jr||(Fn=1)))}return oi(0),yt=setTimeout(()=>{en=!0,Hi(!0)},pe),Hi}((be,Ke)=>{if(Ke)return void be(!1,new ft(!1,null,!0));const yt=this.connectionFactory_();this.pendingConnection_=yt;const en=Fn=>{null!==this.progressCallback_&&this.progressCallback_(Fn.loaded,Fn.lengthComputable?Fn.total:-1)};null!==this.progressCallback_&&yt.addUploadProgressListener(en),yt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&yt.removeUploadProgressListener(en),this.pendingConnection_=null;const Fn=yt.getErrorCode()===xt.NO_ERROR,xn=yt.getStatus();if(!Fn||We(xn,this.additionalRetryCodes_)&&this.retry){const Bn=yt.getErrorCode()===xt.ABORT;return void be(!1,new ft(!1,null,Bn))}const sr=-1!==this.successCodes_.indexOf(xn);be(!0,new ft(sr,yt))})},pe,this.timeout_)}getPromise(){return this.promise_}cancel(K){this.canceled_=!0,this.appDelete_=K||!1,null!==this.backoffId_&&function ur(W){W(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ft{constructor(K,pe,be){this.wasSuccessCode=K,this.connection=pe,this.canceled=!!be}}function vi(...W){const K=function Un(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==K){const pe=new K;for(let be=0;be<W.length;be++)pe.append(W[be]);return pe.getBlob()}if(On())return new Blob(W);throw new Je(Ct.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const rn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mr{constructor(K,pe){this.data=K,this.contentType=pe||null}}function Xn(W,K){switch(W){case rn.RAW:return new Mr(cr(K));case rn.BASE64:case rn.BASE64URL:return new Mr(Nr(W,K));case rn.DATA_URL:return new Mr(function ni(W){const K=new jr(W);return K.base64?Nr(rn.BASE64,K.rest):function Qn(W){let K;try{K=decodeURIComponent(W)}catch(pe){throw st(rn.DATA_URL,"Malformed data URL.")}return cr(K)}(K.rest)}(K),function Vi(W){return new jr(W).contentType}(K))}throw Se()}function cr(W){const K=[];for(let pe=0;pe<W.length;pe++){let be=W.charCodeAt(pe);be<=127?K.push(be):be<=2047?K.push(192|be>>6,128|63&be):55296==(64512&be)?pe<W.length-1&&56320==(64512&W.charCodeAt(pe+1))?(be=65536|(1023&be)<<10|1023&W.charCodeAt(++pe),K.push(240|be>>18,128|be>>12&63,128|be>>6&63,128|63&be)):K.push(239,191,189):56320==(64512&be)?K.push(239,191,189):K.push(224|be>>12,128|be>>6&63,128|63&be)}return new Uint8Array(K)}function Nr(W,K){switch(W){case rn.BASE64:{const Ke=-1!==K.indexOf("-"),yt=-1!==K.indexOf("_");if(Ke||yt)throw st(W,"Invalid character '"+(Ke?"-":"_")+"' found: is it base64url encoded?");break}case rn.BASE64URL:{const Ke=-1!==K.indexOf("+"),yt=-1!==K.indexOf("/");if(Ke||yt)throw st(W,"Invalid character '"+(Ke?"+":"/")+"' found: is it base64 encoded?");K=K.replace(/-/g,"+").replace(/_/g,"/");break}}let pe;try{pe=function mr(W){if("undefined"==typeof atob)throw function Ce(W){return new Je(Ct.UNSUPPORTED_ENVIRONMENT,`${W} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(W)}(K)}catch(Ke){throw Ke.message.includes("polyfill")?Ke:st(W,"Invalid character found")}const be=new Uint8Array(pe.length);for(let Ke=0;Ke<pe.length;Ke++)be[Ke]=pe.charCodeAt(Ke);return be}class jr{constructor(K){this.base64=!1,this.contentType=null;const pe=K.match(/^data:([^,]+)?,/);if(null===pe)throw st(rn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const be=pe[1]||null;null!=be&&(this.base64=function Mi(W,K){return W.length>=K.length&&W.substring(W.length-K.length)===K}(be,";base64"),this.contentType=this.base64?be.substring(0,be.length-7):be),this.rest=K.substring(K.indexOf(",")+1)}}class Br{constructor(K,pe){let be=0,Ke="";nr(K)?(this.data_=K,be=K.size,Ke=K.type):K instanceof ArrayBuffer?(pe?this.data_=new Uint8Array(K):(this.data_=new Uint8Array(K.byteLength),this.data_.set(new Uint8Array(K))),be=this.data_.length):K instanceof Uint8Array&&(pe?this.data_=K:(this.data_=new Uint8Array(K.length),this.data_.set(K)),be=K.length),this.size_=be,this.type_=Ke}size(){return this.size_}type(){return this.type_}slice(K,pe){if(nr(this.data_)){const Ke=function ar(W,K,pe){return W.webkitSlice?W.webkitSlice(K,pe):W.mozSlice?W.mozSlice(K,pe):W.slice?W.slice(K,pe):null}(this.data_,K,pe);return null===Ke?null:new Br(Ke)}{const be=new Uint8Array(this.data_.buffer,K,pe-K);return new Br(be,!0)}}static getBlob(...K){if(On()){const pe=K.map(be=>be instanceof Br?be.data_:be);return new Br(vi.apply(null,pe))}{const pe=K.map(en=>yn(en)?Xn(rn.RAW,en).data:en.data_);let be=0;pe.forEach(en=>{be+=en.byteLength});const Ke=new Uint8Array(be);let yt=0;return pe.forEach(en=>{for(let Fn=0;Fn<en.length;Fn++)Ke[yt++]=en[Fn]}),new Br(Ke,!0)}}uploadData(){return this.data_}}function Ue(W){let K;try{K=JSON.parse(W)}catch(pe){return null}return function Jn(W){return"object"==typeof W&&!Array.isArray(W)}(K)?K:null}function ye(W){const K=W.lastIndexOf("/",W.length-2);return-1===K?W:W.slice(K+1)}function z(W,K){return K}class te{constructor(K,pe,be,Ke){this.server=K,this.local=pe||K,this.writable=!!be,this.xform=Ke||z}}let se=null;function pt(){if(se)return se;const W=[];W.push(new te("bucket")),W.push(new te("generation")),W.push(new te("metageneration")),W.push(new te("name","fullPath",!0));const pe=new te("name");pe.xform=function K(yt,en){return function xe(W){return!yn(W)||W.length<2?W:ye(W)}(en)},W.push(pe);const Ke=new te("size");return Ke.xform=function be(yt,en){return void 0!==en?Number(en):en},W.push(Ke),W.push(new te("timeCreated")),W.push(new te("updated")),W.push(new te("md5Hash",null,!0)),W.push(new te("cacheControl",null,!0)),W.push(new te("contentDisposition",null,!0)),W.push(new te("contentEncoding",null,!0)),W.push(new te("contentLanguage",null,!0)),W.push(new te("contentType",null,!0)),W.push(new te("metadata","customMetadata",!0)),se=W,se}function Sn(W,K,pe){const be=Ue(K);return null===be?null:function an(W,K,pe){const be={type:"file"},Ke=pe.length;for(let yt=0;yt<Ke;yt++){const en=pe[yt];be[en.local]=en.xform(be,K[en.server])}return function Bt(W,K){Object.defineProperty(W,"ref",{get:function pe(){const yt=new pn(W.bucket,W.fullPath);return K._makeStorageReference(yt)}})}(be,W),be}(W,be,pe)}function tr(W,K){const pe={},be=K.length;for(let Ke=0;Ke<be;Ke++){const yt=K[Ke];yt.writable&&(pe[yt.server]=W[yt.local])}return JSON.stringify(pe)}const ai="prefixes";class Ut{constructor(K,pe,be,Ke){this.url=K,this.method=pe,this.handler=be,this.timeout=Ke,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rt(W){if(!W)throw Se()}function ln(W,K){return function pe(be,Ke){const yt=Sn(W,Ke,K);return Rt(null!==yt),yt}}function Kr(W){return function K(pe,be){let Ke;return Ke=401===pe.getStatus()?pe.getErrorText().includes("Firebase App Check token is invalid")?function En(){return new Je(Ct.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Rn(){return new Je(Ct.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===pe.getStatus()?function Nt(W){return new Je(Ct.QUOTA_EXCEEDED,"Quota for bucket '"+W+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(W.bucket):403===pe.getStatus()?function Ln(W){return new Je(Ct.UNAUTHORIZED,"User does not have permission to access '"+W+"'.")}(W.path):be,Ke.status=pe.getStatus(),Ke.serverResponse=be.serverResponse,Ke}}function yr(W){const K=Kr(W);return function pe(be,Ke){let yt=K(be,Ke);return 404===be.getStatus()&&(yt=function Ht(W){return new Je(Ct.OBJECT_NOT_FOUND,"Object '"+W+"' does not exist.")}(W.path)),yt.serverResponse=Ke.serverResponse,yt}}function ri(W,K,pe){const Ke=ti(K.fullServerUrl(),W.host,W._protocol),en=W.maxOperationRetryTime,Fn=new Ut(Ke,"GET",ln(W,pe),en);return Fn.errorHandler=yr(K),Fn}function Hr(W,K,pe,be,Ke){const yt={};yt.prefix=K.isRoot?"":K.path+"/",pe&&pe.length>0&&(yt.delimiter=pe),be&&(yt.pageToken=be),Ke&&(yt.maxResults=Ke);const Fn=ti(K.bucketOnlyServerUrl(),W.host,W._protocol),sr=W.maxOperationRetryTime,Bn=new Ut(Fn,"GET",function bn(W,K){return function pe(be,Ke){const yt=function mt(W,K,pe){const be=Ue(pe);return null===be?null:function Tt(W,K,pe){const be={prefixes:[],items:[],nextPageToken:pe.nextPageToken};if(pe[ai])for(const Ke of pe[ai]){const yt=Ke.replace(/\/$/,""),en=W._makeStorageReference(new pn(K,yt));be.prefixes.push(en)}if(pe.items)for(const Ke of pe.items){const yt=W._makeStorageReference(new pn(K,Ke.name));be.items.push(yt)}return be}(W,K,be)}(W,K,Ke);return Rt(null!==yt),yt}}(W,K.bucket),sr);return Bn.urlParams=yt,Bn.errorHandler=Kr(K),Bn}function Ys(W,K,pe){const be=Object.assign({},pe);return be.fullPath=W.path,be.size=K.size(),be.contentType||(be.contentType=function os(W,K){return W&&W.contentType||K&&K.type()||"application/octet-stream"}(null,K)),be}class _n{constructor(K,pe,be,Ke){this.current=K,this.total=pe,this.finalized=!!be,this.metadata=Ke||null}}function er(W,K){let pe=null;try{pe=W.getResponseHeader("X-Goog-Upload-Status")}catch(Ke){Rt(!1)}return Rt(!!pe&&-1!==(K||["active"]).indexOf(pe)),pe}const Ze={STATE_CHANGED:"state_changed"},ut={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Et(W){switch(W){case"running":case"pausing":case"canceling":return ut.RUNNING;case"paused":return ut.PAUSED;case"success":return ut.SUCCESS;case"canceled":return ut.CANCELED;default:return ut.ERROR}}class kt{constructor(K,pe,be){if(function jn(W){return"function"==typeof W}(K)||null!=pe||null!=be)this.next=K,this.error=null!=pe?pe:void 0,this.complete=null!=be?be:void 0;else{const yt=K;this.next=yt.next,this.error=yt.error,this.complete=yt.complete}}}function Dn(W){return(...K)=>{Promise.resolve().then(()=>W(...K))}}class hr extends class Nn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xt.NO_ERROR,this.sendPromise_=new Promise(K=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xt.ABORT,K()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xt.NETWORK_ERROR,K()}),this.xhr_.addEventListener("load",()=>{K()})})}send(K,pe,be,Ke){if(this.sent_)throw Zt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(pe,K,!0),void 0!==Ke)for(const yt in Ke)Ke.hasOwnProperty(yt)&&this.xhr_.setRequestHeader(yt,Ke[yt].toString());return void 0!==be?this.xhr_.send(be):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(K){return-1}}getResponse(){if(!this.sent_)throw Zt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(K){return this.xhr_.getResponseHeader(K)}addUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",K)}removeUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",K)}}{initXhr(){this.xhr_.responseType="text"}}function Di(){return new hr}class js{constructor(K,pe,be=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=K,this._blob=pe,this._metadata=be,this._mappings=pt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ke=>{if(this._request=void 0,this._chunkMultiplier=1,Ke._codeEquals(Ct.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const yt=this.isExponentialBackoffExpired();if(We(Ke.status,[])){if(!yt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Ke=un()}this._error=Ke,this._transition("error")}},this._metadataErrorHandler=Ke=>{this._request=void 0,Ke._codeEquals(Ct.CANCELED)?this.completeTransitions_():(this._error=Ke,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Ke,yt)=>{this._resolve=Ke,this._reject=yt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const K=this._transferred;return pe=>this._updateProgress(K+pe)}_shouldDoResumable(K){return K.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(K){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([pe,be])=>{switch(this._state){case"running":K(pe,be);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((K,pe)=>{const be=function Xi(W,K,pe,be,Ke){const yt=K.bucketOnlyServerUrl(),en=Ys(K,be,Ke),Fn={name:en.fullPath},xn=ti(yt,W.host,W._protocol),Bn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${be.size()}`,"X-Goog-Upload-Header-Content-Type":en.contentType,"Content-Type":"application/json; charset=utf-8"},oi=tr(en,pe),Qr=new Ut(xn,"POST",function hi(Hi){let Jr;er(Hi);try{Jr=Hi.getResponseHeader("X-Goog-Upload-URL")}catch(es){Rt(!1)}return Rt(yn(Jr)),Jr},W.maxUploadRetryTime);return Qr.urlParams=Fn,Qr.headers=Bn,Qr.body=oi,Qr.errorHandler=Kr(K),Qr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ke=this._ref.storage._makeRequest(be,Di,K,pe);this._request=Ke,Ke.getPromise().then(yt=>{this._request=void 0,this._uploadUrl=yt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const K=this._uploadUrl;this._resolveToken((pe,be)=>{const Ke=function dr(W,K,pe,be){const xn=new Ut(pe,"POST",function yt(sr){const Bn=er(sr,["active","final"]);let oi=null;try{oi=sr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(hi){Rt(!1)}oi||Rt(!1);const Gr=Number(oi);return Rt(!isNaN(Gr)),new _n(Gr,be.size(),"final"===Bn)},W.maxUploadRetryTime);return xn.headers={"X-Goog-Upload-Command":"query"},xn.errorHandler=Kr(K),xn}(this._ref.storage,this._ref._location,K,this._blob),yt=this._ref.storage._makeRequest(Ke,Di,pe,be);this._request=yt,yt.getPromise().then(en=>{this._request=void 0,this._updateProgress(en.current),this._needToFetchStatus=!1,en.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const K=262144*this._chunkMultiplier,pe=new _n(this._transferred,this._blob.size()),be=this._uploadUrl;this._resolveToken((Ke,yt)=>{let en;try{en=function lt(W,K,pe,be,Ke,yt,en,Fn){const xn=new _n(0,0);if(en?(xn.current=en.current,xn.total=en.total):(xn.current=0,xn.total=be.size()),be.size()!==xn.total)throw function it(){return new Je(Ct.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const sr=xn.total-xn.current;let Bn=sr;Ke>0&&(Bn=Math.min(Bn,Ke));const oi=xn.current;let hi="";hi=0===Bn?"finalize":sr===Bn?"upload, finalize":"upload";const Qr={"X-Goog-Upload-Command":hi,"X-Goog-Upload-Offset":`${xn.current}`},Hi=be.slice(oi,oi+Bn);if(null===Hi)throw cn();const qi=new Ut(pe,"POST",function Jr(Ni,Gs){const Mo=er(Ni,["active","final"]),Fo=xn.current+Bn,wo=be.size();let Xs;return Xs="final"===Mo?ln(K,yt)(Ni,Gs):null,new _n(Fo,wo,"final"===Mo,Xs)},K.maxUploadRetryTime);return qi.headers=Qr,qi.body=Hi.uploadData(),qi.progressCallback=Fn||null,qi.errorHandler=Kr(W),qi}(this._ref._location,this._ref.storage,be,this._blob,K,this._mappings,pe,this._makeProgressCallback())}catch(xn){return this._error=xn,void this._transition("error")}const Fn=this._ref.storage._makeRequest(en,Di,Ke,yt,!1);this._request=Fn,Fn.getPromise().then(xn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(xn.current),xn.finalized?(this._metadata=xn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((K,pe)=>{const be=ri(this._ref.storage,this._ref._location,this._mappings),Ke=this._ref.storage._makeRequest(be,Di,K,pe);this._request=Ke,Ke.getPromise().then(yt=>{this._request=void 0,this._metadata=yt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((K,pe)=>{const be=function Cr(W,K,pe,be,Ke){const yt=K.bucketOnlyServerUrl(),en={"X-Goog-Upload-Protocol":"multipart"},xn=function Fn(){let qi="";for(let Ni=0;Ni<2;Ni++)qi+=Math.random().toString().slice(2);return qi}();en["Content-Type"]="multipart/related; boundary="+xn;const sr=Ys(K,be,Ke),Bn=tr(sr,pe),hi=Br.getBlob("--"+xn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Bn+"\r\n--"+xn+"\r\nContent-Type: "+sr.contentType+"\r\n\r\n",be,"\r\n--"+xn+"--");if(null===hi)throw cn();const Qr={name:sr.fullPath},Hi=ti(yt,W.host,W._protocol),es=W.maxUploadRetryTime,Ki=new Ut(Hi,"POST",ln(W,pe),es);return Ki.urlParams=Qr,Ki.headers=en,Ki.body=hi.uploadData(),Ki.errorHandler=Kr(K),Ki}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ke=this._ref.storage._makeRequest(be,Di,K,pe);this._request=Ke,Ke.getPromise().then(yt=>{this._request=void 0,this._metadata=yt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(K){const pe=this._transferred;this._transferred=K,this._transferred!==pe&&this._notifyObservers()}_transition(K){if(this._state!==K)switch(K){case"canceling":case"pausing":this._state=K,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const pe="paused"===this._state;this._state=K,pe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=K,this._notifyObservers();break;case"canceled":this._error=sn(),this._state=K,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const K=Et(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:K,metadata:this._metadata,task:this,ref:this._ref}}on(K,pe,be,Ke){const yt=new kt(pe||void 0,be||void 0,Ke||void 0);return this._addObserver(yt),()=>{this._removeObserver(yt)}}then(K,pe){return this._promise.then(K,pe)}catch(K){return this.then(null,K)}_addObserver(K){this._observers.push(K),this._notifyObserver(K)}_removeObserver(K){const pe=this._observers.indexOf(K);-1!==pe&&this._observers.splice(pe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(pe=>{this._notifyObserver(pe)})}_finishPromise(){if(void 0!==this._resolve){let K=!0;switch(Et(this._state)){case ut.SUCCESS:Dn(this._resolve.bind(null,this.snapshot))();break;case ut.CANCELED:case ut.ERROR:Dn(this._reject.bind(null,this._error))();break;default:K=!1}K&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(K){switch(Et(this._state)){case ut.RUNNING:case ut.PAUSED:K.next&&Dn(K.next.bind(K,this.snapshot))();break;case ut.SUCCESS:K.complete&&Dn(K.complete.bind(K))();break;default:K.error&&Dn(K.error.bind(K,this._error))()}}resume(){const K="paused"===this._state||"pausing"===this._state;return K&&this._transition("running"),K}pause(){const K="running"===this._state;return K&&this._transition("pausing"),K}cancel(){const K="running"===this._state||"pausing"===this._state;return K&&this._transition("canceling"),K}}class Ui{constructor(K,pe){this._service=K,this._location=pe instanceof pn?pe:pn.makeFromUrl(pe,K.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(K,pe){return new Ui(K,pe)}get root(){const K=new pn(this._location.bucket,"");return this._newRef(this._service,K)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ye(this._location.path)}get storage(){return this._service}get parent(){const K=function Pe(W){if(0===W.length)return null;const K=W.lastIndexOf("/");return-1===K?"":W.slice(0,K)}(this._location.path);if(null===K)return null;const pe=new pn(this._location.bucket,K);return new Ui(this._service,pe)}_throwIfRoot(K){if(""===this._location.path)throw Ne(K)}}function Os(W,K,pe){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,vt.Z)(function*(W,K,pe){const Ke=yield Ss(W,{pageToken:pe});K.prefixes.push(...Ke.prefixes),K.items.push(...Ke.items),null!=Ke.nextPageToken&&(yield Os(W,K,Ke.nextPageToken))})).apply(this,arguments)}function Ss(W,K){null!=K&&"number"==typeof K.maxResults&&Vn("options.maxResults",1,1e3,K.maxResults);const pe=K||{},be=Hr(W.storage,W._location,"/",pe.pageToken,pe.maxResults);return W.storage.makeRequestWithTokens(be,Di)}function xi(W){W._throwIfRoot("getDownloadURL");const K=function Ps(W,K,pe){const Ke=ti(K.fullServerUrl(),W.host,W._protocol),en=W.maxOperationRetryTime,Fn=new Ut(Ke,"GET",function rr(W,K){return function pe(be,Ke){const yt=Sn(W,Ke,K);return Rt(null!==yt),function gr(W,K,pe,be){const Ke=Ue(K);if(null===Ke||!yn(Ke.downloadTokens))return null;const yt=Ke.downloadTokens;if(0===yt.length)return null;const en=encodeURIComponent;return yt.split(",").map(sr=>{const oi=W.fullPath;return ti("/b/"+en(W.bucket)+"/o/"+en(oi),pe,be)+Li({alt:"media",token:sr})})[0]}(yt,Ke,W.host,W._protocol)}}(W,pe),en);return Fn.errorHandler=yr(K),Fn}(W.storage,W._location,pt());return W.storage.makeRequestWithTokens(K,Di).then(pe=>{if(null===pe)throw function tt(){return new Je(Ct.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return pe})}function Bi(W,K){const pe=function me(W,K){const pe=K.split("/").filter(be=>be.length>0).join("/");return 0===W.length?pe:W+"/"+pe}(W._location.path,K),be=new pn(W._location.bucket,pe);return new Ui(W.storage,be)}function _o(W,K){if(W instanceof zo){const pe=W;if(null==pe._bucket)throw function Mn(){return new Je(Ct.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ge+"' property when initializing the app?")}();const be=new Ui(pe,pe._bucket);return null!=K?_o(be,K):be}return void 0!==K?Bi(W,K):W}function as(W,K){if(K&&function Oo(W){return/^[A-Za-z]+:\/\//.test(W)}(K)){if(W instanceof zo)return function qr(W,K){return new Ui(W,K)}(W,K);throw Me("To use ref(service, url), the first argument must be a Storage instance.")}return _o(W,K)}function ji(W,K){const pe=null==K?void 0:K[Ge];return null==pe?null:pn.makeFromBucketSpec(pe,W)}class zo{constructor(K,pe,be,Ke,yt){this.app=K,this._authProvider=pe,this._appCheckProvider=be,this._url=Ke,this._firebaseVersion=yt,this._bucket=null,this._host=ot,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ke?pn.makeFromBucketSpec(Ke,this._host):ji(this._host,this.app.options)}get host(){return this._host}set host(K){this._host=K,this._bucket=null!=this._url?pn.makeFromBucketSpec(this._url,K):ji(K,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(K){Vn("time",0,Number.POSITIVE_INFINITY,K),this._maxUploadRetryTime=K}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(K){Vn("time",0,Number.POSITIVE_INFINITY,K),this._maxOperationRetryTime=K}_getAuthToken(){var K=this;return(0,vt.Z)(function*(){if(K._overrideAuthToken)return K._overrideAuthToken;const pe=K._authProvider.getImmediate({optional:!0});if(pe){const be=yield pe.getToken();if(null!==be)return be.accessToken}return null})()}_getAppCheckToken(){var K=this;return(0,vt.Z)(function*(){const pe=K._appCheckProvider.getImmediate({optional:!0});return pe?(yield pe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(K=>K.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(K){return new Ui(this,K)}_makeRequest(K,pe,be,Ke,yt=!0){if(this._deleted)return new wn(Ee());{const en=function Kn(W,K,pe,be,Ke,yt,en=!0){const Fn=Li(W.urlParams),xn=W.url+Fn,sr=Object.assign({},W.headers);return function on(W,K){K&&(W["X-Firebase-GMPID"]=K)}(sr,K),function At(W,K){null!==K&&K.length>0&&(W.Authorization="Firebase "+K)}(sr,pe),function Yt(W,K){W["X-Firebase-Storage-Version"]="webjs/"+(null!=K?K:"AppManager")}(sr,yt),function Dr(W,K){null!==K&&(W["X-Firebase-AppCheck"]=K)}(sr,be),new ze(xn,W.method,sr,W.body,W.successCodes,W.additionalRetryCodes,W.handler,W.errorHandler,W.timeout,W.progressCallback,Ke,en)}(K,this._appId,be,Ke,pe,this._firebaseVersion,yt);return this._requests.add(en),en.getPromise().then(()=>this._requests.delete(en),()=>this._requests.delete(en)),en}}makeRequestWithTokens(K,pe){var be=this;return(0,vt.Z)(function*(){const[Ke,yt]=yield Promise.all([be._getAuthToken(),be._getAppCheckToken()]);return be._makeRequest(K,pe,Ke,yt).getPromise()})()}}const ws="@firebase/storage";function Hs(W,K){return as(W=(0,Vt.m9)(W),K)}function he(W,{instanceIdentifier:K}){const pe=W.getProvider("app").getImmediate(),be=W.getProvider("auth-internal"),Ke=W.getProvider("app-check-internal");return new zo(pe,be,Ke,K,_t.SDK_VERSION)}!function Fe(){(0,_t._registerComponent)(new dt.wA("storage",he,"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(ws,"0.11.2",""),(0,_t.registerVersion)(ws,"0.11.2","esm2017")}();class Pt{constructor(K,pe,be){this._delegate=K,this.task=pe,this.ref=be}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Kt{constructor(K,pe){this._delegate=K,this._ref=pe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pt(this._delegate.snapshot,this,this._ref)}then(K,pe){return this._delegate.then(be=>{if(K)return K(new Pt(be,this,this._ref))},pe)}on(K,pe,be,Ke){let yt;return pe&&(yt="function"==typeof pe?en=>pe(new Pt(en,this,this._ref)):{next:pe.next?en=>pe.next(new Pt(en,this,this._ref)):void 0,complete:pe.complete||void 0,error:pe.error||void 0}),this._delegate.on(K,yt,be||void 0,Ke||void 0)}}class gn{constructor(K,pe){this._delegate=K,this._service=pe}get prefixes(){return this._delegate.prefixes.map(K=>new vr(K,this._service))}get items(){return this._delegate.items.map(K=>new vr(K,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class vr{constructor(K,pe){this._delegate=K,this.storage=pe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(K){const pe=function $s(W,K){return Bi(W,K)}(this._delegate,K);return new vr(pe,this.storage)}get root(){return new vr(this._delegate.root,this.storage)}get parent(){const K=this._delegate.parent;return null==K?null:new vr(K,this.storage)}put(K,pe){return this._throwIfRoot("put"),new Kt(function Js(W,K,pe){return function na(W,K,pe){return W._throwIfRoot("uploadBytesResumable"),new js(W,new Br(K),pe)}(W=(0,Vt.m9)(W),K,pe)}(this._delegate,K,pe),this)}putString(K,pe=rn.RAW,be){this._throwIfRoot("putString");const Ke=Xn(pe,K),yt=Object.assign({},be);return null==yt.contentType&&null!=Ke.contentType&&(yt.contentType=Ke.contentType),new Kt(new js(this._delegate,new Br(Ke.data,!0),yt),this)}listAll(){return function Oi(W){return function Wo(W){const K={prefixes:[],items:[]};return Os(W,K).then(()=>K)}(W=(0,Vt.m9)(W))}(this._delegate).then(K=>new gn(K,this.storage))}list(K){return function ii(W,K){return Ss(W=(0,Vt.m9)(W),K)}(this._delegate,K||void 0).then(pe=>new gn(pe,this.storage))}getMetadata(){return function ls(W){return function oo(W){W._throwIfRoot("getMetadata");const K=ri(W.storage,W._location,pt());return W.storage.makeRequestWithTokens(K,Di)}(W=(0,Vt.m9)(W))}(this._delegate)}updateMetadata(K){return function Zr(W,K){return function ra(W,K){W._throwIfRoot("updateMetadata");const pe=function lr(W,K,pe,be){const yt=ti(K.fullServerUrl(),W.host,W._protocol),Fn=tr(pe,be),sr=W.maxOperationRetryTime,Bn=new Ut(yt,"PATCH",ln(W,be),sr);return Bn.headers={"Content-Type":"application/json; charset=utf-8"},Bn.body=Fn,Bn.errorHandler=yr(K),Bn}(W.storage,W._location,K,pt());return W.storage.makeRequestWithTokens(pe,Di)}(W=(0,Vt.m9)(W),K)}(this._delegate,K)}getDownloadURL(){return function Si(W){return xi(W=(0,Vt.m9)(W))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Pi(W){return function As(W){W._throwIfRoot("deleteObject");const K=function bi(W,K){const be=ti(K.fullServerUrl(),W.host,W._protocol),Fn=new Ut(be,"DELETE",function en(xn,sr){},W.maxOperationRetryTime);return Fn.successCodes=[200,204],Fn.errorHandler=yr(K),Fn}(W.storage,W._location);return W.storage.makeRequestWithTokens(K,Di)}(W=(0,Vt.m9)(W))}(this._delegate)}_throwIfRoot(K){if(""===this._delegate._location.path)throw Ne(K)}}class br{constructor(K,pe){this.app=K,this._delegate=pe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(K){if(fr(K))throw Me("ref() expected a child path but got a URL, use refFromURL instead.");return new vr(Hs(this._delegate,K),this)}refFromURL(K){if(!fr(K))throw Me("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pn.makeFromUrl(K,this._delegate.host)}catch(pe){throw Me("refFromUrl() expected a valid full URL but got an invalid one.")}return new vr(Hs(this._delegate,K),this)}setMaxUploadRetryTime(K){this._delegate.maxUploadRetryTime=K}setMaxOperationRetryTime(K){this._delegate.maxOperationRetryTime=K}useEmulator(K,pe,be={}){!function L(W,K,pe,be={}){!function _s(W,K,pe,be={}){W.host=`${K}:${pe}`,W._protocol="http";const{mockUserToken:Ke}=be;Ke&&(W._overrideAuthToken="string"==typeof Ke?Ke:(0,Vt.Sg)(Ke,W.app.options.projectId))}(W,K,pe,be)}(this._delegate,K,pe,be)}}function fr(W){return/^[A-Za-z]+:\/\//.test(W)}function li(W,{instanceIdentifier:K}){const pe=W.getProvider("app-compat").getImmediate(),be=W.getProvider("storage").getImmediate({identifier:K});return new br(pe,be)}!function ao(W){const K={TaskState:ut,TaskEvent:Ze,StringFormat:rn,Storage:br,Reference:vr};W.INTERNAL.registerComponent(new dt.wA("storage-compat",li,"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),W.registerVersion("@firebase/storage-compat","0.3.2")}(St.Z);var di=U(6215),ir=U(9260);function ko(W){const K=function Rs(W){return new y.y(K=>{const pe=en=>K.next(en);pe(W.snapshot);const yt=W.on("state_changed",pe);return W.then(en=>{pe(en),K.complete()},en=>{pe(W.snapshot),(en=>{K.error(en)})(en)}),function(){yt()}}).pipe(function Xe(W,K=ie.z){return(0,ke.e)((pe,be)=>{let Ke=null,yt=null,en=null;const Fn=()=>{if(Ke){Ke.unsubscribe(),Ke=null;const sr=yt;yt=null,be.next(sr)}};function xn(){const sr=en+W,Bn=K.now();if(Bn<sr)return Ke=this.schedule(void 0,sr-Bn),void be.add(Ke);Fn()}pe.subscribe((0,je.x)(be,sr=>{yt=sr,en=K.now(),Ke||(Ke=K.schedule(xn,W),be.add(Ke))},()=>{Fn(),be.complete()},void 0,()=>{yt=Ke=null}))})}(0))}(W);return{task:W,then:W.then.bind(W),catch:W.catch.bind(W),pause:W.pause.bind(W),cancel:W.cancel.bind(W),resume:W.resume.bind(W),snapshotChanges:()=>K,percentageChanges:()=>K.pipe((0,He.U)(pe=>pe.bytesTransferred/pe.totalBytes*100))}}function ks(W){return{getDownloadURL:()=>(0,V.of)(void 0).pipe(Ie.fc,(0,nt.w)(()=>W.getDownloadURL()),Ie.iC),getMetadata:()=>(0,V.of)(void 0).pipe(Ie.fc,(0,nt.w)(()=>W.getMetadata()),Ie.iC),delete:()=>(0,ee.D)(W.delete()),child:K=>ks(W.child(K)),updateMetadata:K=>(0,ee.D)(W.updateMetadata(K)),put:(K,pe)=>ko(W.put(K,pe)),putString:(K,pe,be)=>ko(W.putString(K,pe,be)),list:K=>(0,ee.D)(W.list(K)),listAll:()=>(0,ee.D)(W.listAll())}}const Eo=new ve.OlP("angularfire2.storageBucket"),q=new ve.OlP("angularfire2.storage.maxUploadRetryTime"),j=new ve.OlP("angularfire2.storage.maxOperationRetryTime"),F=new ve.OlP("angularfire2.storage.use-emulator");let ue=(()=>{class W{constructor(pe,be,Ke,yt,en,Fn,xn,sr,Bn,oi){const Gr=(0,Qe.on)(pe,en,be);this.storage=(0,Qe.cc)(`${Gr.name}.storage.${Ke}`,"AngularFireStorage",Gr.name,()=>{const hi=en.runOutsideAngular(()=>Gr.storage(Ke||void 0)),Qr=Bn;return Qr&&hi.useEmulator(...Qr),xn&&hi.setMaxUploadRetryTime(xn),sr&&hi.setMaxOperationRetryTime(sr),hi},[xn,sr])}ref(pe){return ks(this.storage.ref(pe))}refFromURL(pe){return ks(this.storage.refFromURL(pe))}upload(pe,be,Ke){return ks(this.storage.ref(pe)).put(be,Ke)}}return W.\u0275fac=function(pe){return new(pe||W)(ve.LFG(Qe.Dh),ve.LFG(Qe.xv,8),ve.LFG(Eo,8),ve.LFG(ve.Lbi),ve.LFG(ve.R0b),ve.LFG(Ie.HU),ve.LFG(q,8),ve.LFG(j,8),ve.LFG(F,8),ve.LFG(di.nm,8))},W.\u0275prov=ve.Yz7({token:W,factory:W.\u0275fac,providedIn:"any"}),W})(),Xt=(()=>{class W{}return W.\u0275fac=function(pe){return new(pe||W)},W.\u0275mod=ve.oAB({type:W}),W.\u0275inj=ve.cJS({}),W})(),Yr=(()=>{class W{constructor(){ir.Z.registerVersion("angularfire",Ie.q4.full,"gcs-compat")}}return W.\u0275fac=function(pe){return new(pe||W)},W.\u0275mod=ve.oAB({type:W}),W.\u0275inj=ve.cJS({providers:[ue],imports:[Xt]}),W})()},2011:(hn,ct,U)=>{U.d(ct,{Dh:()=>He,GT:()=>je,cc:()=>vt,hO:()=>St,on:()=>Ie,pX:()=>ke,xv:()=>nt});var y=U(5e3),V=U(9260),ee=U(4976);hn=U.hmd(hn);const ie=["ngOnDestroy"],ke=(ot,Ge,qt,at={})=>new Proxy(ot,{get:(De,Je)=>qt.runOutsideAngular(()=>{var Ct;if(ot[Je])return(null===(Ct=null==at?void 0:at.spy)||void 0===Ct?void 0:Ct.get)&&at.spy.get(Je,ot[Je]),ot[Je];if(ie.indexOf(Je)>-1)return()=>{};const bt=Ge.toPromise().then(Se=>{const Ht=Se&&Se[Je];return"function"==typeof Ht?Ht.bind(Se):Ht&&Ht.then?Ht.then(Nt=>qt.run(()=>Nt)):qt.run(()=>Ht)});return new Proxy(()=>{},{get:(Se,Ht)=>bt[Ht],apply:(Se,Ht,Nt)=>bt.then(Rn=>{var En;const Ln=Rn&&Rn(...Nt);return(null===(En=null==at?void 0:at.spy)||void 0===En?void 0:En.apply)&&at.spy.apply(Je,Nt,Ln),Ln})})})}),je=(ot,Ge)=>{Ge.forEach(qt=>{Object.getOwnPropertyNames(qt.prototype||qt).forEach(at=>{Object.defineProperty(ot.prototype,at,Object.getOwnPropertyDescriptor(qt.prototype||qt,at))})})};class Xe{constructor(Ge){return Ge}}const He=new y.OlP("angularfire2.app.options"),nt=new y.OlP("angularfire2.app.name");function Ie(ot,Ge,qt){const De="object"==typeof qt&&qt||{};De.name=De.name||"string"==typeof qt&&qt||"[DEFAULT]";const Ct=V.Z.apps.filter(bt=>bt&&bt.name===De.name)[0]||Ge.runOutsideAngular(()=>V.Z.initializeApp(ot,De));try{JSON.stringify(ot)!==JSON.stringify(Ct.options)&&ve("error",`${Ct.name} Firebase App already initialized with different options${hn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(bt){}return new Xe(Ct)}const ve=(ot,...Ge)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[ot](...Ge)},Qe={provide:Xe,useFactory:Ie,deps:[He,y.R0b,[new y.FiY,nt]]};let St=(()=>{class ot{constructor(qt){V.Z.registerVersion("angularfire",ee.q4.full,"core"),V.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),V.Z.registerVersion("angular",y.q4F.full,qt.toString())}static initializeApp(qt,at){return{ngModule:ot,providers:[{provide:He,useValue:qt},{provide:nt,useValue:at}]}}}return ot.\u0275fac=function(qt){return new(qt||ot)(y.LFG(y.Lbi))},ot.\u0275mod=y.oAB({type:ot}),ot.\u0275inj=y.cJS({providers:[Qe]}),ot})();function vt(ot,Ge,qt,at,De){const[,Je,Ct]=globalThis.\u0275AngularfireInstanceCache.find(bt=>bt[0]===ot)||[];if(Je)return function _t(ot,Ge){try{return ot.toString()===Ge.toString()}catch(qt){return ot===Ge}}(De,Ct)||(dt("error",`${Ge} was already initialized on the ${qt} Firebase App with different settings.${Vt?" You may need to reload as Firebase is not HMR aware.":""}`),dt("warn",{is:De,was:Ct})),Je;{const bt=at();return globalThis.\u0275AngularfireInstanceCache.push([ot,bt,De]),bt}}const Vt=!!hn.hot,dt=(ot,...Ge)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[ot](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(hn,ct,U)=>{U.d(ct,{q4:()=>Qi,iC:()=>xu,fc:()=>eu,HU:()=>Po,vb:()=>Xl,JM:()=>va,u3:()=>tu});var y=U(5e3),V=U(259),ee=U(5861),ie=U(6881),ke=U(2090),je=U(4859),Xe=U(1877);let nt,Ie;const St=new WeakMap,vt=new WeakMap,_t=new WeakMap,Vt=new WeakMap,dt=new WeakMap;let qt={get(A,O,ne){if(A instanceof IDBTransaction){if("done"===O)return vt.get(A);if("objectStoreNames"===O)return A.objectStoreNames||_t.get(A);if("store"===O)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return Ct(A[O])},set:(A,O,ne)=>(A[O]=ne,!0),has:(A,O)=>A instanceof IDBTransaction&&("done"===O||"store"===O)||O in A};function Je(A){return"function"==typeof A?function De(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qe(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...O){return A.apply(bt(this),O),Ct(St.get(this))}:function(...O){return Ct(A.apply(bt(this),O))}:function(O,...ne){const we=A.call(bt(this),O,...ne);return _t.set(we,O.sort?O.sort():[O]),Ct(we)}}(A):(A instanceof IDBTransaction&&function Ge(A){if(vt.has(A))return;const O=new Promise((ne,we)=>{const qe=()=>{A.removeEventListener("complete",ht),A.removeEventListener("error",Lt),A.removeEventListener("abort",Lt)},ht=()=>{ne(),qe()},Lt=()=>{we(A.error||new DOMException("AbortError","AbortError")),qe()};A.addEventListener("complete",ht),A.addEventListener("error",Lt),A.addEventListener("abort",Lt)});vt.set(A,O)}(A),((A,O)=>O.some(ne=>A instanceof ne))(A,function ve(){return nt||(nt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,qt):A)}function Ct(A){if(A instanceof IDBRequest)return function ot(A){const O=new Promise((ne,we)=>{const qe=()=>{A.removeEventListener("success",ht),A.removeEventListener("error",Lt)},ht=()=>{ne(Ct(A.result)),qe()},Lt=()=>{we(A.error),qe()};A.addEventListener("success",ht),A.addEventListener("error",Lt)});return O.then(ne=>{ne instanceof IDBCursor&&St.set(ne,A)}).catch(()=>{}),dt.set(O,A),O}(A);if(Vt.has(A))return Vt.get(A);const O=Je(A);return O!==A&&(Vt.set(A,O),dt.set(O,A)),O}const bt=A=>dt.get(A),Nt=["get","getKey","getAll","getAllKeys","count"],Rn=["put","add","delete","clear"],En=new Map;function Ln(A,O){if(!(A instanceof IDBDatabase)||O in A||"string"!=typeof O)return;if(En.get(O))return En.get(O);const ne=O.replace(/FromIndex$/,""),we=O!==ne,qe=Rn.includes(ne);if(!(ne in(we?IDBIndex:IDBObjectStore).prototype)||!qe&&!Nt.includes(ne))return;const ht=function(){var Lt=(0,ee.Z)(function*(Cn,...Tn){const zn=this.transaction(Cn,qe?"readwrite":"readonly");let Or=zn.store;return we&&(Or=Or.index(Tn.shift())),(yield Promise.all([Or[ne](...Tn),qe&&zn.done]))[0]});return function(Tn){return Lt.apply(this,arguments)}}();return En.set(O,ht),ht}!function at(A){qt=A(qt)}(A=>D_(b_({},A),{get:(O,ne,we)=>Ln(O,ne)||A.get(O,ne,we),has:(O,ne)=>!!Ln(O,ne)||A.has(O,ne)}));const un="@firebase/installations",or="w:0.6.4",Mn="FIS_v2",Ee=new ke.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(A){return A instanceof ke.ZR&&A.code.includes("request-failed")}function st({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function Zt(A){return{token:A.token,requestStatus:2,expiresIn:Jn(A.expiresIn),creationTime:Date.now()}}function pn(A,O){return wn.apply(this,arguments)}function wn(){return(wn=(0,ee.Z)(function*(A,O){const we=(yield O.json()).error;return Ee.create("request-failed",{requestName:A,serverCode:we.code,serverMessage:we.message,serverStatus:we.status})})).apply(this,arguments)}function kn({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function ur(A,{refreshToken:O}){const ne=kn(A);return ne.append("Authorization",function yn(A){return`${Mn} ${A}`}(O)),ne}function _r(A){return jn.apply(this,arguments)}function jn(){return(jn=(0,ee.Z)(function*(A){const O=yield A();return O.status>=500&&O.status<600?A():O})).apply(this,arguments)}function Jn(A){return Number(A.replace("s","000"))}function nr(A,O){return On.apply(this,arguments)}function On(){return(On=(0,ee.Z)(function*({appConfig:A,heartbeatServiceProvider:O},{fid:ne}){const we=st(A),qe=kn(A),ht=O.getImmediate({optional:!0});if(ht){const zn=yield ht.getHeartbeatsHeader();zn&&qe.append("x-firebase-client",zn)}const Cn={method:"POST",headers:qe,body:JSON.stringify({fid:ne,authVersion:Mn,appId:A.appId,sdkVersion:or})},Tn=yield _r(()=>fetch(we,Cn));if(Tn.ok){const zn=yield Tn.json();return{fid:zn.fid||ne,registrationStatus:2,refreshToken:zn.refreshToken,authToken:Zt(zn.authToken)}}throw yield pn("Create Installation",Tn)})).apply(this,arguments)}function Vn(A){return new Promise(O=>{setTimeout(O,A)})}const Li=/^[cdef][\w-]{21}$/;function We(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const ne=function ze(A){return function ti(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Li.test(ne)?ne:""}catch(A){return""}}function ft(A){return`${A.appName}!${A.appId}`}const At=new Map;function Yt(A,O){const ne=ft(A);Kn(ne,O),function Un(A,O){const ne=function ar(){return!vi&&"BroadcastChannel"in self&&(vi=new BroadcastChannel("[Firebase] FID Change"),vi.onmessage=A=>{Kn(A.data.key,A.data.fid)}),vi}();ne&&ne.postMessage({key:A,fid:O}),function mr(){0===At.size&&vi&&(vi.close(),vi=null)}()}(ne,O)}function Kn(A,O){const ne=At.get(A);if(ne)for(const we of ne)we(O)}let vi=null;const Xn="firebase-installations-store";let cr=null;function Qn(){return cr||(cr=function Se(A,O,{blocked:ne,upgrade:we,blocking:qe,terminated:ht}={}){const Lt=indexedDB.open(A,O),Cn=Ct(Lt);return we&&Lt.addEventListener("upgradeneeded",Tn=>{we(Ct(Lt.result),Tn.oldVersion,Tn.newVersion,Ct(Lt.transaction))}),ne&&Lt.addEventListener("blocked",()=>ne()),Cn.then(Tn=>{ht&&Tn.addEventListener("close",()=>ht()),qe&&Tn.addEventListener("versionchange",()=>qe())}).catch(()=>{}),Cn}("firebase-installations-database",1,{upgrade:(A,O)=>{0===O&&A.createObjectStore(Xn)}})),cr}function Nr(A,O){return jr.apply(this,arguments)}function jr(){return(jr=(0,ee.Z)(function*(A,O){const ne=ft(A),qe=(yield Qn()).transaction(Xn,"readwrite"),ht=qe.objectStore(Xn),Lt=yield ht.get(ne);return yield ht.put(O,ne),yield qe.done,(!Lt||Lt.fid!==O.fid)&&Yt(A,O.fid),O})).apply(this,arguments)}function ni(A){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,ee.Z)(function*(A){const O=ft(A),we=(yield Qn()).transaction(Xn,"readwrite");yield we.objectStore(Xn).delete(O),yield we.done})).apply(this,arguments)}function Mi(A,O){return Br.apply(this,arguments)}function Br(){return(Br=(0,ee.Z)(function*(A,O){const ne=ft(A),qe=(yield Qn()).transaction(Xn,"readwrite"),ht=qe.objectStore(Xn),Lt=yield ht.get(ne),Cn=O(Lt);return void 0===Cn?yield ht.delete(ne):yield ht.put(Cn,ne),yield qe.done,Cn&&(!Lt||Lt.fid!==Cn.fid)&&Yt(A,Cn.fid),Cn})).apply(this,arguments)}function Ue(A){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,ee.Z)(function*(A){let O;const ne=yield Mi(A.appConfig,we=>{const qe=me(we),ht=ye(A,qe);return O=ht.registrationPromise,ht.installationEntry});return""===ne.fid?{installationEntry:yield O}:{installationEntry:ne,registrationPromise:O}})).apply(this,arguments)}function me(A){return Bt(A||{fid:We(),registrationStatus:0})}function ye(A,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(Ee.create("app-offline"))};const ne={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},we=function z(A,O){return te.apply(this,arguments)}(A,ne);return{installationEntry:ne,registrationPromise:we}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:se(A)}:{installationEntry:O}}function te(){return(te=(0,ee.Z)(function*(A,O){try{const ne=yield nr(A,O);return Nr(A.appConfig,ne)}catch(ne){throw Ne(ne)&&409===ne.customData.serverCode?yield ni(A.appConfig):yield Nr(A.appConfig,{fid:O.fid,registrationStatus:0}),ne}})).apply(this,arguments)}function se(A){return xe.apply(this,arguments)}function xe(){return(xe=(0,ee.Z)(function*(A){let O=yield pt(A.appConfig);for(;1===O.registrationStatus;)yield Vn(100),O=yield pt(A.appConfig);if(0===O.registrationStatus){const{installationEntry:ne,registrationPromise:we}=yield Ue(A);return we||ne}return O})).apply(this,arguments)}function pt(A){return Mi(A,O=>{if(!O)throw Ee.create("installation-not-found");return Bt(O)})}function Bt(A){return function an(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Sn(A,O){return gr.apply(this,arguments)}function gr(){return(gr=(0,ee.Z)(function*({appConfig:A,heartbeatServiceProvider:O},ne){const we=tr(A,ne),qe=ur(A,ne),ht=O.getImmediate({optional:!0});if(ht){const zn=yield ht.getHeartbeatsHeader();zn&&qe.append("x-firebase-client",zn)}const Cn={method:"POST",headers:qe,body:JSON.stringify({installation:{sdkVersion:or,appId:A.appId}})},Tn=yield _r(()=>fetch(we,Cn));if(Tn.ok)return Zt(yield Tn.json());throw yield pn("Generate Auth Token",Tn)})).apply(this,arguments)}function tr(A,{fid:O}){return`${st(A)}/${O}/authTokens:generate`}function ai(A){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,ee.Z)(function*(A,O=!1){let ne;const we=yield Mi(A.appConfig,ht=>{if(!bn(ht))throw Ee.create("not-registered");const Lt=ht.authToken;if(!O&&rr(Lt))return ht;if(1===Lt.requestStatus)return ne=Tt(A,O),ht;{if(!navigator.onLine)throw Ee.create("app-offline");const Cn=yr(ht);return ne=Rt(A,Cn),Cn}});return ne?yield ne:we.authToken})).apply(this,arguments)}function Tt(A,O){return mt.apply(this,arguments)}function mt(){return(mt=(0,ee.Z)(function*(A,O){let ne=yield Ut(A.appConfig);for(;1===ne.authToken.requestStatus;)yield Vn(100),ne=yield Ut(A.appConfig);const we=ne.authToken;return 0===we.requestStatus?ai(A,O):we})).apply(this,arguments)}function Ut(A){return Mi(A,O=>{if(!bn(O))throw Ee.create("not-registered");return function ri(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function Rt(A,O){return ln.apply(this,arguments)}function ln(){return(ln=(0,ee.Z)(function*(A,O){try{const ne=yield Sn(A,O),we=Object.assign(Object.assign({},O),{authToken:ne});return yield Nr(A.appConfig,we),ne}catch(ne){if(!Ne(ne)||401!==ne.customData.serverCode&&404!==ne.customData.serverCode){const we=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield Nr(A.appConfig,we)}else yield ni(A.appConfig);throw ne}})).apply(this,arguments)}function bn(A){return void 0!==A&&2===A.registrationStatus}function rr(A){return 2===A.requestStatus&&!function Kr(A){const O=Date.now();return O<A.creationTime||A.creationTime+A.expiresIn<O+36e5}(A)}function yr(A){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:O})}function gs(){return(gs=(0,ee.Z)(function*(A){const O=A,{installationEntry:ne,registrationPromise:we}=yield Ue(O);return we?we.catch(console.error):ai(O).catch(console.error),ne.fid})).apply(this,arguments)}function lr(){return(lr=(0,ee.Z)(function*(A,O=!1){const ne=A;return yield bi(ne),(yield ai(ne,O)).token})).apply(this,arguments)}function bi(A){return os.apply(this,arguments)}function os(){return(os=(0,ee.Z)(function*(A){const{registrationPromise:O}=yield Ue(A);O&&(yield O)})).apply(this,arguments)}function Ze(A){return Ee.create("missing-app-config-values",{valueName:A})}const ut="installations",kt=A=>{const O=A.getProvider("app").getImmediate(),ne=function lt(A){if(!A||!A.options)throw Ze("App Configuration");if(!A.name)throw Ze("App Name");const O=["projectId","apiKey","appId"];for(const ne of O)if(!A.options[ne])throw Ze(ne);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(O);return{app:O,appConfig:ne,heartbeatServiceProvider:(0,ie._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},Dn=A=>{const O=A.getProvider("app").getImmediate(),ne=(0,ie._getProvider)(O,ut).getImmediate();return{getId:()=>function Hr(A){return gs.apply(this,arguments)}(ne),getToken:qe=>function Ps(A){return lr.apply(this,arguments)}(ne,qe)}};(function Ir(){(0,ie._registerComponent)(new je.wA(ut,kt,"PUBLIC")),(0,ie._registerComponent)(new je.wA("installations-internal",Dn,"PRIVATE"))})(),(0,ie.registerVersion)(un,"0.6.4"),(0,ie.registerVersion)(un,"0.6.4","esm2017");const Nn="@firebase/remote-config",ei=new ke.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _o{constructor(O,ne,we,qe){this.client=O,this.storage=ne,this.storageCache=we,this.logger=qe}isCachedDataFresh(O,ne){if(!ne)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const we=Date.now()-ne,qe=we<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${we}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${qe}.`),qe}fetch(O){var ne=this;return(0,ee.Z)(function*(){const[we,qe]=yield Promise.all([ne.storage.getLastSuccessfulFetchTimestampMillis(),ne.storage.getLastSuccessfulFetchResponse()]);if(qe&&ne.isCachedDataFresh(O.cacheMaxAgeMillis,we))return qe;O.eTag=qe&&qe.eTag;const ht=yield ne.client.fetch(O),Lt=[ne.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ht.status&&Lt.push(ne.storage.setLastSuccessfulFetchResponse(ht)),yield Promise.all(Lt),ht})()}}function as(A=navigator){return A.languages&&A.languages[0]||A.language}class ji{constructor(O,ne,we,qe,ht,Lt){this.firebaseInstallations=O,this.sdkVersion=ne,this.namespace=we,this.projectId=qe,this.apiKey=ht,this.appId=Lt}fetch(O){var ne=this;return(0,ee.Z)(function*(){const[we,qe]=yield Promise.all([ne.firebaseInstallations.getId(),ne.firebaseInstallations.getToken()]),Lt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ne.projectId}/namespaces/${ne.namespace}:fetch?key=${ne.apiKey}`,Cn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Tn={sdk_version:ne.sdkVersion,app_instance_id:we,app_instance_id_token:qe,app_id:ne.appId,language_code:as()},zn={method:"POST",headers:Cn,body:JSON.stringify(Tn)},Or=fetch(Lt,zn),Er=new Promise((wa,Uo)=>{O.signal.addEventListener(()=>{const Pu=new Error("The operation was aborted.");Pu.name="AbortError",Uo(Pu)})});let Ii;try{yield Promise.race([Or,Er]),Ii=yield Or}catch(wa){let Uo="fetch-client-network";throw"AbortError"===(null==wa?void 0:wa.name)&&(Uo="fetch-timeout"),ei.create(Uo,{originalErrorMessage:null==wa?void 0:wa.message})}let Ks=Ii.status;const Ti=Ii.headers.get("ETag")||void 0;let Xo,pl;if(200===Ii.status){let wa;try{wa=yield Ii.json()}catch(Uo){throw ei.create("fetch-client-parse",{originalErrorMessage:null==Uo?void 0:Uo.message})}Xo=wa.entries,pl=wa.state}if("INSTANCE_STATE_UNSPECIFIED"===pl?Ks=500:"NO_CHANGE"===pl?Ks=304:("NO_TEMPLATE"===pl||"EMPTY_CONFIG"===pl)&&(Xo={}),304!==Ks&&200!==Ks)throw ei.create("fetch-status",{httpStatus:Ks});return{status:Ks,eTag:Ti,config:Xo}})()}}class ws{constructor(O,ne){this.client=O,this.storage=ne}fetch(O){var ne=this;return(0,ee.Z)(function*(){const we=(yield ne.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ne.attemptFetch(O,we)})()}attemptFetch(O,ne){var we=this;return(0,ee.Z)(function*(qe,{throttleEndTimeMillis:ht,backoffCount:Lt}){yield function _s(A,O){return new Promise((ne,we)=>{const qe=Math.max(O-Date.now(),0),ht=setTimeout(ne,qe);A.addEventListener(()=>{clearTimeout(ht),we(ei.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(qe.signal,ht);try{const Cn=yield we.client.fetch(qe);return yield we.storage.deleteThrottleMetadata(),Cn}catch(Cn){if(!function zo(A){if(!(A instanceof ke.ZR&&A.customData))return!1;const O=Number(A.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Cn))throw Cn;const Tn={throttleEndTimeMillis:Date.now()+(0,ke.$s)(Lt),backoffCount:Lt+1};return yield we.storage.setThrottleMetadata(Tn),we.attemptFetch(qe,Tn)}}).apply(this,arguments)}}class vo{constructor(O,ne,we,qe,ht){this.app=O,this._client=ne,this._storageCache=we,this._storage=qe,this._logger=ht,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ns(A,O){const ne=A.target.error||void 0;return ei.create(O,{originalErrorMessage:ne&&(null==ne?void 0:ne.message)})}const $r="app_namespace_store";class ii{constructor(O,ne,we,qe=function Zr(){return new Promise((A,O)=>{try{const ne=indexedDB.open("firebase_remote_config",1);ne.onerror=we=>{O(ns(we,"storage-open"))},ne.onsuccess=we=>{A(we.target.result)},ne.onupgradeneeded=we=>{0===we.oldVersion&&we.target.result.createObjectStore($r,{keyPath:"compositeKey"})}}catch(ne){O(ei.create("storage-open",{originalErrorMessage:null==ne?void 0:ne.message}))}})}()){this.appId=O,this.appName=ne,this.namespace=we,this.openDbPromise=qe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var ne=this;return(0,ee.Z)(function*(){const we=yield ne.openDbPromise;return new Promise((qe,ht)=>{const Cn=we.transaction([$r],"readonly").objectStore($r),Tn=ne.createCompositeKey(O);try{const zn=Cn.get(Tn);zn.onerror=Or=>{ht(ns(Or,"storage-get"))},zn.onsuccess=Or=>{const Er=Or.target.result;qe(Er?Er.value:void 0)}}catch(zn){ht(ei.create("storage-get",{originalErrorMessage:null==zn?void 0:zn.message}))}})})()}set(O,ne){var we=this;return(0,ee.Z)(function*(){const qe=yield we.openDbPromise;return new Promise((ht,Lt)=>{const Tn=qe.transaction([$r],"readwrite").objectStore($r),zn=we.createCompositeKey(O);try{const Or=Tn.put({compositeKey:zn,value:ne});Or.onerror=Er=>{Lt(ns(Er,"storage-set"))},Or.onsuccess=()=>{ht()}}catch(Or){Lt(ei.create("storage-set",{originalErrorMessage:null==Or?void 0:Or.message}))}})})()}delete(O){var ne=this;return(0,ee.Z)(function*(){const we=yield ne.openDbPromise;return new Promise((qe,ht)=>{const Cn=we.transaction([$r],"readwrite").objectStore($r),Tn=ne.createCompositeKey(O);try{const zn=Cn.delete(Tn);zn.onerror=Or=>{ht(ns(Or,"storage-delete"))},zn.onsuccess=()=>{qe()}}catch(zn){ht(ei.create("storage-delete",{originalErrorMessage:null==zn?void 0:zn.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Oi{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,ee.Z)(function*(){const ne=O.storage.getLastFetchStatus(),we=O.storage.getLastSuccessfulFetchTimestampMillis(),qe=O.storage.getActiveConfig(),ht=yield ne;ht&&(O.lastFetchStatus=ht);const Lt=yield we;Lt&&(O.lastSuccessfulFetchTimestampMillis=Lt);const Cn=yield qe;Cn&&(O.activeConfig=Cn)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function $s(){return si.apply(this,arguments)}function si(){return(si=(0,ee.Z)(function*(){if(!(0,ke.hl)())return!1;try{return yield(0,ke.eu)()}catch(A){return!1}})).apply(this,arguments)}let le,$;!function Si(){(0,ie._registerComponent)(new je.wA("remote-config",function A(O,{instanceIdentifier:ne}){const we=O.getProvider("app").getImmediate(),qe=O.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ei.create("registration-window");if(!(0,ke.hl)())throw ei.create("indexed-db-unavailable");const{projectId:ht,apiKey:Lt,appId:Cn}=we.options;if(!ht)throw ei.create("registration-project-id");if(!Lt)throw ei.create("registration-api-key");if(!Cn)throw ei.create("registration-app-id");const Tn=new ii(Cn,we.name,ne=ne||"firebase"),zn=new Oi(Tn),Or=new Xe.Yd(Nn);Or.logLevel=Xe.in.ERROR;const Er=new ji(qe,ie.SDK_VERSION,ne,ht,Lt,Cn),Ii=new ws(Er,Tn),Ks=new _o(Ii,Tn,zn,Or),Ti=new vo(we,Ks,zn,Tn,Or);return function Os(A){const O=(0,ke.m9)(A);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Ti),Ti},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Nn,"0.4.4"),(0,ie.registerVersion)(Nn,"0.4.4","esm2017")}();const Pt=new WeakMap,Kt=new WeakMap,gn=new WeakMap,vr=new WeakMap,br=new WeakMap;let wi={get(A,O,ne){if(A instanceof IDBTransaction){if("done"===O)return Kt.get(A);if("objectStoreNames"===O)return A.objectStoreNames||gn.get(A);if("store"===O)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return di(A[O])},set:(A,O,ne)=>(A[O]=ne,!0),has:(A,O)=>A instanceof IDBTransaction&&("done"===O||"store"===O)||O in A};function ao(A){return"function"==typeof A?function li(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fe(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...O){return A.apply(ir(this),O),di(Pt.get(this))}:function(...O){return di(A.apply(ir(this),O))}:function(O,...ne){const we=A.call(ir(this),O,...ne);return gn.set(we,O.sort?O.sort():[O]),di(we)}}(A):(A instanceof IDBTransaction&&function Sr(A){if(Kt.has(A))return;const O=new Promise((ne,we)=>{const qe=()=>{A.removeEventListener("complete",ht),A.removeEventListener("error",Lt),A.removeEventListener("abort",Lt)},ht=()=>{ne(),qe()},Lt=()=>{we(A.error||new DOMException("AbortError","AbortError")),qe()};A.addEventListener("complete",ht),A.addEventListener("error",Lt),A.addEventListener("abort",Lt)});Kt.set(A,O)}(A),((A,O)=>O.some(ne=>A instanceof ne))(A,function he(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,wi):A)}function di(A){if(A instanceof IDBRequest)return function fr(A){const O=new Promise((ne,we)=>{const qe=()=>{A.removeEventListener("success",ht),A.removeEventListener("error",Lt)},ht=()=>{ne(di(A.result)),qe()},Lt=()=>{we(A.error),qe()};A.addEventListener("success",ht),A.addEventListener("error",Lt)});return O.then(ne=>{ne instanceof IDBCursor&&Pt.set(ne,A)}).catch(()=>{}),br.set(O,A),O}(A);if(vr.has(A))return vr.get(A);const O=ao(A);return O!==A&&(vr.set(A,O),br.set(O,A)),O}const ir=A=>br.get(A);function Rs(A,O,{blocked:ne,upgrade:we,blocking:qe,terminated:ht}={}){const Lt=indexedDB.open(A,O),Cn=di(Lt);return we&&Lt.addEventListener("upgradeneeded",Tn=>{we(di(Lt.result),Tn.oldVersion,Tn.newVersion,di(Lt.transaction))}),ne&&Lt.addEventListener("blocked",()=>ne()),Cn.then(Tn=>{ht&&Tn.addEventListener("close",()=>ht()),qe&&Tn.addEventListener("versionchange",()=>qe())}).catch(()=>{}),Cn}function ko(A,{blocked:O}={}){const ne=indexedDB.deleteDatabase(A);return O&&ne.addEventListener("blocked",()=>O()),di(ne).then(()=>{})}const ks=["get","getKey","getAll","getAllKeys","count"],Eo=["put","add","delete","clear"],q=new Map;function j(A,O){if(!(A instanceof IDBDatabase)||O in A||"string"!=typeof O)return;if(q.get(O))return q.get(O);const ne=O.replace(/FromIndex$/,""),we=O!==ne,qe=Eo.includes(ne);if(!(ne in(we?IDBIndex:IDBObjectStore).prototype)||!qe&&!ks.includes(ne))return;const ht=function(){var Lt=(0,ee.Z)(function*(Cn,...Tn){const zn=this.transaction(Cn,qe?"readwrite":"readonly");let Or=zn.store;return we&&(Or=Or.index(Tn.shift())),(yield Promise.all([Or[ne](...Tn),qe&&zn.done]))[0]});return function(Tn){return Lt.apply(this,arguments)}}();return q.set(O,ht),ht}!function _i(A){wi=A(wi)}(A=>D_(b_({},A),{get:(O,ne,we)=>j(O,ne)||A.get(O,ne,we),has:(O,ne)=>!!j(O,ne)||A.has(O,ne)}));const F="/firebase-messaging-sw.js",ue="/firebase-cloud-messaging-push-scope",Be="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yr="google.c.a.c_id",W="google.c.a.c_l",K="google.c.a.ts",pe="google.c.a.e";var Ke=(()=>{return(A=Ke||(Ke={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Ke;var A})();function yt(A){const O=new Uint8Array(A);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function en(A){const ne=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),we=atob(ne),qe=new Uint8Array(we.length);for(let ht=0;ht<we.length;++ht)qe[ht]=we.charCodeAt(ht);return qe}const Fn="fcm_token_details_db",sr="fcm_token_object_Store";function Bn(A){return oi.apply(this,arguments)}function oi(){return oi=(0,ee.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ht=>ht.name).includes(Fn))return null;let O=null;return(yield Rs(Fn,5,{upgrade:(we=(0,ee.Z)(function*(qe,ht,Lt,Cn){var Tn;if(ht<2||!qe.objectStoreNames.contains(sr))return;const zn=Cn.objectStore(sr),Or=yield zn.index("fcmSenderId").get(A);if(yield zn.clear(),Or)if(2===ht){const Er=Or;if(!Er.auth||!Er.p256dh||!Er.endpoint)return;O={token:Er.fcmToken,createTime:null!==(Tn=Er.createTime)&&void 0!==Tn?Tn:Date.now(),subscriptionOptions:{auth:Er.auth,p256dh:Er.p256dh,endpoint:Er.endpoint,swScope:Er.swScope,vapidKey:"string"==typeof Er.vapidKey?Er.vapidKey:yt(Er.vapidKey)}}}else if(3===ht){const Er=Or;O={token:Er.fcmToken,createTime:Er.createTime,subscriptionOptions:{auth:yt(Er.auth),p256dh:yt(Er.p256dh),endpoint:Er.endpoint,swScope:Er.swScope,vapidKey:yt(Er.vapidKey)}}}else if(4===ht){const Er=Or;O={token:Er.fcmToken,createTime:Er.createTime,subscriptionOptions:{auth:yt(Er.auth),p256dh:yt(Er.p256dh),endpoint:Er.endpoint,swScope:Er.swScope,vapidKey:yt(Er.vapidKey)}}}}),function(ht,Lt,Cn,Tn){return we.apply(this,arguments)})})).close(),yield ko(Fn),yield ko("fcm_vapid_details_db"),yield ko("undefined"),Gr(O)?O:null;var we}),oi.apply(this,arguments)}function Gr(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:O}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const Hi="firebase-messaging-store";let Jr=null;function es(){return Jr||(Jr=Rs("firebase-messaging-database",1,{upgrade:(A,O)=>{0===O&&A.createObjectStore(Hi)}})),Jr}function Ki(A){return qi.apply(this,arguments)}function qi(){return(qi=(0,ee.Z)(function*(A){const O=wo(A),we=yield(yield es()).transaction(Hi).objectStore(Hi).get(O);if(we)return we;{const qe=yield Bn(A.appConfig.senderId);if(qe)return yield Ni(A,qe),qe}})).apply(this,arguments)}function Ni(A,O){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,ee.Z)(function*(A,O){const ne=wo(A),qe=(yield es()).transaction(Hi,"readwrite");return yield qe.objectStore(Hi).put(O,ne),yield qe.done,O})).apply(this,arguments)}function Mo(A){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,ee.Z)(function*(A){const O=wo(A),we=(yield es()).transaction(Hi,"readwrite");yield we.objectStore(Hi).delete(O),yield we.done})).apply(this,arguments)}function wo({appConfig:A}){return A.appId}const us=new ke.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function il(A,O){return lo.apply(this,arguments)}function lo(){return(lo=(0,ee.Z)(function*(A,O){const ne=yield Is(A),we=da(O),qe={method:"POST",headers:ne,body:JSON.stringify(we)};let ht;try{ht=yield(yield fetch(cs(A.appConfig),qe)).json()}catch(Lt){throw us.create("token-subscribe-failed",{errorInfo:null==Lt?void 0:Lt.toString()})}if(ht.error)throw us.create("token-subscribe-failed",{errorInfo:ht.error.message});if(!ht.token)throw us.create("token-subscribe-no-token");return ht.token})).apply(this,arguments)}function ca(A,O){return ia.apply(this,arguments)}function ia(){return(ia=(0,ee.Z)(function*(A,O){const ne=yield Is(A),we=da(O.subscriptionOptions),qe={method:"PATCH",headers:ne,body:JSON.stringify(we)};let ht;try{ht=yield(yield fetch(`${cs(A.appConfig)}/${O.token}`,qe)).json()}catch(Lt){throw us.create("token-update-failed",{errorInfo:null==Lt?void 0:Lt.toString()})}if(ht.error)throw us.create("token-update-failed",{errorInfo:ht.error.message});if(!ht.token)throw us.create("token-update-no-token");return ht.token})).apply(this,arguments)}function Ei(A,O){return eo.apply(this,arguments)}function eo(){return(eo=(0,ee.Z)(function*(A,O){const we={method:"DELETE",headers:yield Is(A)};try{const ht=yield(yield fetch(`${cs(A.appConfig)}/${O}`,we)).json();if(ht.error)throw us.create("token-unsubscribe-failed",{errorInfo:ht.error.message})}catch(qe){throw us.create("token-unsubscribe-failed",{errorInfo:null==qe?void 0:qe.toString()})}})).apply(this,arguments)}function cs({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function Is(A){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,ee.Z)(function*({appConfig:A,installations:O}){const ne=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${ne}`})})).apply(this,arguments)}function da({p256dh:A,auth:O,endpoint:ne,vapidKey:we}){const qe={web:{endpoint:ne,auth:O,p256dh:A}};return we!==Be&&(qe.web.applicationPubKey=we),qe}const Ia=6048e5;function El(A){return Co.apply(this,arguments)}function Co(){return(Co=(0,ee.Z)(function*(A){const O=yield sl(A.swRegistration,A.vapidKey),ne={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:O.endpoint,auth:yt(O.getKey("auth")),p256dh:yt(O.getKey("p256dh"))},we=yield Ki(A.firebaseDependencies);if(we){if(ds(we.subscriptionOptions,ne))return Date.now()>=we.createTime+Ia?Ta(A,{token:we.token,createTime:Date.now(),subscriptionOptions:ne}):we.token;try{yield Ei(A.firebaseDependencies,we.token)}catch(qe){console.warn(qe)}return rs(A.firebaseDependencies,ne)}return rs(A.firebaseDependencies,ne)})).apply(this,arguments)}function to(A){return xo.apply(this,arguments)}function xo(){return(xo=(0,ee.Z)(function*(A){const O=yield Ki(A.firebaseDependencies);O&&(yield Ei(A.firebaseDependencies,O.token),yield Mo(A.firebaseDependencies));const ne=yield A.swRegistration.pushManager.getSubscription();return!ne||ne.unsubscribe()})).apply(this,arguments)}function Ta(A,O){return Io.apply(this,arguments)}function Io(){return(Io=(0,ee.Z)(function*(A,O){try{const ne=yield ca(A.firebaseDependencies,O),we=Object.assign(Object.assign({},O),{token:ne,createTime:Date.now()});return yield Ni(A.firebaseDependencies,we),ne}catch(ne){throw yield to(A),ne}})).apply(this,arguments)}function rs(A,O){return no.apply(this,arguments)}function no(){return(no=(0,ee.Z)(function*(A,O){const we={token:yield il(A,O),createTime:Date.now(),subscriptionOptions:O};return yield Ni(A,we),we.token})).apply(this,arguments)}function sl(A,O){return fi.apply(this,arguments)}function fi(){return(fi=(0,ee.Z)(function*(A,O){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:en(O)})})).apply(this,arguments)}function ds(A,O){return O.vapidKey===A.vapidKey&&O.endpoint===A.endpoint&&O.auth===A.auth&&O.p256dh===A.p256dh}function uo(A){const O={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function To(A,O){if(!O.notification)return;A.notification={};const ne=O.notification.title;ne&&(A.notification.title=ne);const we=O.notification.body;we&&(A.notification.body=we);const qe=O.notification.image;qe&&(A.notification.image=qe);const ht=O.notification.icon;ht&&(A.notification.icon=ht)}(O,A),function Nl(A,O){!O.data||(A.data=O.data)}(O,A),function ba(A,O){var ne,we,qe,ht,Lt;if(!O.fcmOptions&&!(null===(ne=O.notification)||void 0===ne?void 0:ne.click_action))return;A.fcmOptions={};const Cn=null!==(qe=null===(we=O.fcmOptions)||void 0===we?void 0:we.link)&&void 0!==qe?qe:null===(ht=O.notification)||void 0===ht?void 0:ht.click_action;Cn&&(A.fcmOptions.link=Cn);const Tn=null===(Lt=O.fcmOptions)||void 0===Lt?void 0:Lt.analytics_label;Tn&&(A.fcmOptions.analyticsLabel=Tn)}(O,A),O}function Da(A){return"object"==typeof A&&!!A&&Yr in A}function Wa(A,O){const ne=[];for(let we=0;we<A.length;we++)ne.push(A.charAt(we)),we<O.length&&ne.push(O.charAt(we));return ne.join("")}function Ko(A){return us.create("missing-app-config-values",{valueName:A})}Wa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lo{constructor(O,ne,we){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const qe=function au(A){if(!A||!A.options)throw Ko("App Configuration Object");if(!A.name)throw Ko("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:ne}=A;for(const we of O)if(!ne[we])throw Ko(we);return{appName:A.name,projectId:ne.projectId,apiKey:ne.apiKey,appId:ne.appId,senderId:ne.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:qe,installations:ne,analyticsProvider:we}}_delete(){return Promise.resolve()}}function $i(A){return qo.apply(this,arguments)}function qo(){return(qo=(0,ee.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(F,{scope:ue}),A.swRegistration.update().catch(()=>{})}catch(O){throw us.create("failed-service-worker-registration",{browserErrorMessage:null==O?void 0:O.message})}})).apply(this,arguments)}function Zo(A,O){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,ee.Z)(function*(A,O){if(!O&&!A.swRegistration&&(yield $i(A)),O||!A.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw us.create("invalid-sw-registration");A.swRegistration=O}})).apply(this,arguments)}function vs(A,O){return sa.apply(this,arguments)}function sa(){return(sa=(0,ee.Z)(function*(A,O){O?A.vapidKey=O:A.vapidKey||(A.vapidKey=Be)})).apply(this,arguments)}function Ol(){return(Ol=(0,ee.Z)(function*(A,O){if(!navigator)throw us.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw us.create("permission-blocked");return yield vs(A,null==O?void 0:O.vapidKey),yield Zo(A,null==O?void 0:O.serviceWorkerRegistration),El(A)})).apply(this,arguments)}function Sa(A,O,ne){return za.apply(this,arguments)}function za(){return(za=(0,ee.Z)(function*(A,O,ne){const we=wl(O);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(we,{message_id:ne[Yr],message_name:ne[W],message_time:ne[K],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wl(A){switch(A){case Ke.NOTIFICATION_CLICKED:return"notification_open";case Ke.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Yo(){return(Yo=(0,ee.Z)(function*(A,O){const ne=O.data;if(!ne.isFirebaseMessaging)return;A.onMessageHandler&&ne.messageType===Ke.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(uo(ne)):A.onMessageHandler.next(uo(ne)));const we=ne.data;Da(we)&&"1"===we[pe]&&(yield Sa(A,ne.messageType,we))})).apply(this,arguments)}const zl="@firebase/messaging",Kl=A=>{const O=new Lo(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ne=>function ol(A,O){return Yo.apply(this,arguments)}(O,ne)),O},al=A=>{const O=A.getProvider("messaging").getImmediate();return{getToken:we=>function bo(A,O){return Ol.apply(this,arguments)}(O,we)}};function P(){return D.apply(this,arguments)}function D(){return(D=(0,ee.Z)(function*(){try{yield(0,ke.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,ke.hl)()&&(0,ke.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Aa(){(0,ie._registerComponent)(new je.wA("messaging",Kl,"PUBLIC")),(0,ie._registerComponent)(new je.wA("messaging-internal",al,"PRIVATE")),(0,ie.registerVersion)(zl,"0.12.4"),(0,ie.registerVersion)(zl,"0.12.4","esm2017")}();const Jt="analytics",Wt="firebase_id",Dt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jt="https://www.googletagmanager.com/gtag/js",Fr=new Xe.Yd("@firebase/analytics"),Zi=new ke.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ha(A){if(!A.startsWith(jt)){const O=Zi.create("invalid-gtag-resource",{gtagURL:A});return Fr.warn(O.message),""}return A}function aa(A){return Promise.all(A.map(O=>O.catch(ne=>ne)))}function Fu(A,O){const ne=function Ra(A,O){let ne;return window.trustedTypes&&(ne=window.trustedTypes.createPolicy(A,O)),ne}("firebase-js-sdk-policy",{createScriptURL:ha}),we=document.createElement("script"),qe=`${jt}?l=${A}&id=${O}`;we.src=ne?null==ne?void 0:ne.createScriptURL(qe):qe,we.async=!0,document.head.appendChild(we)}function Ka(A,O,ne,we,qe,ht){return lu.apply(this,arguments)}function lu(){return(lu=(0,ee.Z)(function*(A,O,ne,we,qe,ht){const Lt=we[qe];try{if(Lt)yield O[Lt];else{const Tn=(yield aa(ne)).find(zn=>zn.measurementId===qe);Tn&&(yield O[Tn.appId])}}catch(Cn){Fr.error(Cn)}A("config",qe,ht)})).apply(this,arguments)}function nc(A,O,ne,we,qe){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,ee.Z)(function*(A,O,ne,we,qe){try{let ht=[];if(qe&&qe.send_to){let Lt=qe.send_to;Array.isArray(Lt)||(Lt=[Lt]);const Cn=yield aa(ne);for(const Tn of Lt){const zn=Cn.find(Er=>Er.measurementId===Tn),Or=zn&&O[zn.appId];if(!Or){ht=[];break}ht.push(Or)}}0===ht.length&&(ht=Object.values(O)),yield Promise.all(ht),A("event",we,qe||{})}catch(ht){Fr.error(ht)}})).apply(this,arguments)}function rc(A){const O=window.document.getElementsByTagName("script");for(const ne of Object.values(O))if(ne.src&&ne.src.includes(jt)&&ne.src.includes(A))return ne;return null}const pi=new class ll{constructor(O={},ne=1e3){this.throttleMetadata=O,this.intervalMillis=ne}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,ne){this.throttleMetadata[O]=ne}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function Il(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Ms(A){return fn.apply(this,arguments)}function fn(){return(fn=(0,ee.Z)(function*(A){var O;const{appId:ne,apiKey:we}=A,qe={method:"GET",headers:Il(we)},ht=Dt.replace("{app-id}",ne),Lt=yield fetch(ht,qe);if(200!==Lt.status&&304!==Lt.status){let Cn="";try{const Tn=yield Lt.json();(null===(O=Tn.error)||void 0===O?void 0:O.message)&&(Cn=Tn.error.message)}catch(Tn){}throw Zi.create("config-fetch-failed",{httpStatus:Lt.status,responseMessage:Cn})}return Lt.json()})).apply(this,arguments)}function qa(A){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,ee.Z)(function*(A,O=pi,ne){const{appId:we,apiKey:qe,measurementId:ht}=A.options;if(!we)throw Zi.create("no-app-id");if(!qe){if(ht)return{measurementId:ht,appId:we};throw Zi.create("no-api-key")}const Lt=O.getThrottleMetadata(we)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Cn=new ql;return setTimeout((0,ee.Z)(function*(){Cn.abort()}),void 0!==ne?ne:6e4),Tl({appId:we,apiKey:qe,measurementId:ht},Lt,Cn,O)})).apply(this,arguments)}function Tl(A,O,ne){return Za.apply(this,arguments)}function Za(){return(Za=(0,ee.Z)(function*(A,{throttleEndTimeMillis:O,backoffCount:ne},we,qe=pi){var ht;const{appId:Lt,measurementId:Cn}=A;try{yield Ls(we,O)}catch(Tn){if(Cn)return Fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Cn} provided in the "measurementId" field in the local Firebase config. [${null==Tn?void 0:Tn.message}]`),{appId:Lt,measurementId:Cn};throw Tn}try{const Tn=yield Ms(A);return qe.deleteThrottleMetadata(Lt),Tn}catch(Tn){const zn=Tn;if(!Ya(zn)){if(qe.deleteThrottleMetadata(Lt),Cn)return Fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Cn} provided in the "measurementId" field in the local Firebase config. [${null==zn?void 0:zn.message}]`),{appId:Lt,measurementId:Cn};throw Tn}const Or=503===Number(null===(ht=null==zn?void 0:zn.customData)||void 0===ht?void 0:ht.httpStatus)?(0,ke.$s)(ne,qe.intervalMillis,30):(0,ke.$s)(ne,qe.intervalMillis),Er={throttleEndTimeMillis:Date.now()+Or,backoffCount:ne+1};return qe.setThrottleMetadata(Lt,Er),Fr.debug(`Calling attemptFetch again in ${Or} millis`),Tl(A,Er,we,qe)}})).apply(this,arguments)}function Ls(A,O){return new Promise((ne,we)=>{const qe=Math.max(O-Date.now(),0),ht=setTimeout(ne,qe);A.addEventListener(()=>{clearTimeout(ht),we(Zi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function Ya(A){if(!(A instanceof ke.ZR&&A.customData))return!1;const O=Number(A.customData.httpStatus);return 429===O||500===O||503===O||504===O}class ql{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let Fl,Qo;function Do(){return(Do=(0,ee.Z)(function*(A,O,ne,we,qe){if(qe&&qe.global)A("event",ne,we);else{const ht=yield O;A("event",ne,Object.assign(Object.assign({},we),{send_to:ht}))}})).apply(this,arguments)}function Ll(A){Qo=A}function pa(A){Fl=A}function ic(){return Na.apply(this,arguments)}function Na(){return(Na=(0,ee.Z)(function*(){if(!(0,ke.hl)())return Fr.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ke.eu)()}catch(A){return Fr.warn(Zi.create("indexeddb-unavailable",{errorInfo:null==A?void 0:A.toString()}).message),!1}return!0})).apply(this,arguments)}function Oa(){return(Oa=(0,ee.Z)(function*(A,O,ne,we,qe,ht,Lt){var Cn;const Tn=qa(A);Tn.then(Ks=>{ne[Ks.measurementId]=Ks.appId,A.options.measurementId&&Ks.measurementId!==A.options.measurementId&&Fr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Ks.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ks=>Fr.error(Ks)),O.push(Tn);const zn=ic().then(Ks=>{if(Ks)return we.getId()}),[Or,Er]=yield Promise.all([Tn,zn]);rc(ht)||Fu(ht,Or.measurementId),Qo&&(qe("consent","default",Qo),Ll(void 0)),qe("js",new Date);const Ii=null!==(Cn=null==Lt?void 0:Lt.config)&&void 0!==Cn?Cn:{};return Ii.origin="firebase",Ii.update=!0,null!=Er&&(Ii[Wt]=Er),qe("config",Or.measurementId,Ii),Fl&&(qe("set",Fl),pa(void 0)),Or.measurementId})).apply(this,arguments)}class co{constructor(O){this.app=O}_delete(){return delete Vo[this.app.options.appId],Promise.resolve()}}let Vo={},ga=[];const uu={};let Vu,Ws,fs="dataLayer",hl=!1;function du(A,O,ne){!function Qa(){const A=[];if((0,ke.ru)()&&A.push("This is a browser extension environment."),(0,ke.zI)()||A.push("Cookies are not available."),A.length>0){const O=A.map((we,qe)=>`(${qe+1}) ${we}`).join(" "),ne=Zi.create("invalid-analytics-context",{errorInfo:O});Fr.warn(ne.message)}}();const we=A.options.appId;if(!we)throw Zi.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Zi.create("no-api-key");Fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vo[we])throw Zi.create("already-exists",{id:we});if(!hl){!function kl(A){let O=[];Array.isArray(window[A])?O=window[A]:window[A]=O}(fs);const{wrappedGtag:ht,gtagCore:Lt}=function fa(A,O,ne,we,qe){let ht=function(...Lt){window[we].push(arguments)};return window[qe]&&"function"==typeof window[qe]&&(ht=window[qe]),window[qe]=function Ar(A,O,ne,we){function ht(){return(ht=(0,ee.Z)(function*(Lt,...Cn){try{if("event"===Lt){const[Tn,zn]=Cn;yield nc(A,O,ne,Tn,zn)}else if("config"===Lt){const[Tn,zn]=Cn;yield Ka(A,O,ne,we,Tn,zn)}else if("consent"===Lt){const[Tn]=Cn;A("consent","update",Tn)}else if("get"===Lt){const[Tn,zn,Or]=Cn;A("get",Tn,zn,Or)}else if("set"===Lt){const[Tn]=Cn;A("set",Tn)}else A(Lt,...Cn)}catch(Tn){Fr.error(Tn)}})).apply(this,arguments)}return function qe(Lt){return ht.apply(this,arguments)}}(ht,A,O,ne),{gtagCore:ht,wrappedGtag:window[qe]}}(Vo,ga,uu,fs,"gtag");Ws=ht,Vu=Lt,hl=!0}return Vo[we]=function sc(A,O,ne,we,qe,ht,Lt){return Oa.apply(this,arguments)}(A,ga,uu,O,Vu,fs,ne),new co(A)}function Uu(){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,ee.Z)(function*(){if((0,ke.ru)()||!(0,ke.zI)()||!(0,ke.hl)())return!1;try{return yield(0,ke.eu)()}catch(A){return!1}})).apply(this,arguments)}const mu="@firebase/analytics";!function _u(){(0,ie._registerComponent)(new je.wA(Jt,(O,{options:ne})=>du(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),ne),"PUBLIC")),(0,ie._registerComponent)(new je.wA("analytics-internal",function A(O){try{const ne=O.getProvider(Jt).getImmediate();return{logEvent:(we,qe,ht)=>function ju(A,O,ne,we){A=(0,ke.m9)(A),function ul(A,O,ne,we,qe){return Do.apply(this,arguments)}(Ws,Vo[A.app.options.appId],O,ne,we).catch(qe=>Fr.error(qe))}(ne,we,qe,ht)}}catch(ne){throw Zi.create("interop-component-reg-failed",{reason:ne})}},"PRIVATE")),(0,ie.registerVersion)(mu,"0.10.0"),(0,ie.registerVersion)(mu,"0.10.0","esm2017")}();var fl=U(4408),Bl=U(7565);const is=new class Jl extends Bl.v{}(class ma extends fl.o{constructor(O,ne){super(O,ne),this.scheduler=O,this.work=ne}schedule(O,ne=0){return ne>0?super.schedule(O,ne):(this.delay=ne,this.state=O,this.scheduler.flush(this),this)}execute(O,ne){return ne>0||this.closed?super.execute(O,ne):this._execute(O,ne)}requestAsyncId(O,ne,we=0){return null!=we&&we>0||null==we&&this.delay>0?super.requestAsyncId(O,ne,we):(O.flush(this),0)}});var ya=U(4986),Xa=U(8306),ki=U(8505),io=U(5363),zs=U(9468);const Qi=new y.GfV("7.6.1"),Dl="__angularfire_symbol__analyticsIsSupportedValue",ka="__angularfire_symbol__analyticsIsSupported",Gi="__angularfire_symbol__remoteConfigIsSupportedValue",vu="__angularfire_symbol__remoteConfigIsSupported",_a="__angularfire_symbol__messagingIsSupportedValue",Ts="__angularfire_symbol__messagingIsSupported";function va(A,O,ne){if(O){if(1===O.length)return O[0];const ht=O.filter(Lt=>Lt.app===ne);if(1===ht.length)return ht[0]}return ne.container.getProvider(A).getImmediate({optional:!0})}globalThis[ka]||(globalThis[ka]=Uu().then(A=>globalThis[Dl]=A).catch(()=>globalThis[Dl]=!1)),globalThis[Ts]||(globalThis[Ts]=P().then(A=>globalThis[_a]=A).catch(()=>globalThis[_a]=!1)),globalThis[vu]||(globalThis[vu]=$s().then(A=>globalThis[Gi]=A).catch(()=>globalThis[Gi]=!1));const Xl=(A,O)=>{const ne=O?[O]:(0,V.C6)(),we=[];return ne.forEach(qe=>{qe.container.getProvider(A).instances.forEach(Lt=>{we.includes(Lt)||we.push(Lt)})}),we};function Ea(){}class ho{constructor(O,ne=is){this.zone=O,this.delegate=ne}now(){return this.delegate.now()}schedule(O,ne,we){const qe=this.zone;return this.delegate.schedule(function(Lt){qe.runGuarded(()=>{O.apply(this,[Lt])})},ne,we)}}class Jo{constructor(O){this.zone=O,this.task=null}call(O,ne){const we=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea)),ne.pipe((0,ki.b)({next:we,complete:we,error:we})).subscribe(O).add(we)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Po=(()=>{class A{constructor(ne){this.ngZone=ne,this.outsideAngular=ne.runOutsideAngular(()=>new ho(Zone.current)),this.insideAngular=ne.run(()=>new ho(Zone.current,ya.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(ne){return new(ne||A)(y.LFG(y.R0b))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function el(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function tl(A){return el().ngZone.runOutsideAngular(()=>A())}function So(A){return el().ngZone.run(()=>A())}function eu(A){return A.pipe((0,io.Q)(el().outsideAngular))}function xu(A){return el(),function Hl(A){return function(ne){return(ne=ne.lift(new Jo(A.ngZone))).pipe((0,zs.R)(A.outsideAngular),(0,io.Q)(A.insideAngular))}}(el())(A)}const Hu=(A,O)=>function(){const we=arguments;return O&&setTimeout(()=>{"scheduled"===O.state&&O.invoke()},10),So(()=>A.apply(void 0,we))},tu=(A,O)=>function(){let ne;const we=arguments;for(let ht=0;ht<arguments.length;ht++)"function"==typeof we[ht]&&(O&&(ne||(ne=So(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea)))),we[ht]=Hu(we[ht],ne));const qe=tl(()=>A.apply(this,we));if(!O){if(qe instanceof Xa.y){const ht=el();return qe.pipe((0,zs.R)(ht.outsideAngular),(0,io.Q)(ht.insideAngular))}return So(()=>qe)}return qe instanceof Xa.y?qe.pipe(xu):qe instanceof Promise?So(()=>new Promise((ht,Lt)=>qe.then(Cn=>So(()=>ht(Cn)),Cn=>So(()=>Lt(Cn))))):"function"==typeof qe&&ne?function(){return setTimeout(()=>{ne&&"scheduled"===ne.state&&ne.invoke()},10),qe.apply(this,arguments)}:So(()=>qe)}},1389:(hn,ct,U)=>{U.d(ct,{$:()=>F,A:()=>ve,D:()=>vt,I:()=>Xr,J:()=>kt,L:()=>qr,N:()=>Mi,P:()=>sc,Q:()=>ii,R:()=>Ru,U:()=>Hs,V:()=>$s,W:()=>si,X:()=>Pi,Y:()=>he,Z:()=>Fe,_:()=>br,a:()=>Q,a0:()=>Be,a1:()=>Yr,a2:()=>be,a3:()=>sr,a4:()=>oi,a5:()=>hi,a6:()=>Hi,a7:()=>es,a8:()=>qi,a9:()=>Gs,aA:()=>Se,aB:()=>ka,aC:()=>ni,aD:()=>Br,aE:()=>ki,aF:()=>gu,aG:()=>Bu,aH:()=>_n,aL:()=>Le,aO:()=>le,aa:()=>Mo,ab:()=>wo,ac:()=>Xs,ad:()=>ca,ae:()=>Ei,af:()=>cs,ai:()=>Ia,aj:()=>Co,ak:()=>to,an:()=>li,ao:()=>To,aq:()=>sa,ar:()=>zl,as:()=>Nt,at:()=>Bt,au:()=>se,av:()=>at,aw:()=>Er,ax:()=>Ts,ay:()=>an,az:()=>De,b:()=>T,c:()=>Ws,d:()=>du,e:()=>cu,f:()=>mu,g:()=>Jl,h:()=>fl,i:()=>Gn,j:()=>ya,k:()=>pl,l:()=>ro,m:()=>Pu,p:()=>He,r:()=>Pa,s:()=>gt,u:()=>ic});var y=U(5861),V=U(2090),ee=U(6881),ie=U(7582),ke=U(1877),je=U(4859);const He={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const vt=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},_t=function St(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Vt=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new ke.Yd("@firebase/auth");function qt(C,...p){ot.logLevel<=ke.in.ERROR&&ot.error(`Auth (${ee.SDK_VERSION}): ${C}`,...p)}function at(C,...p){throw bt(C,...p)}function De(C,...p){return bt(C,...p)}function Je(C,p,_){const b=Object.assign(Object.assign({},_t()),{[p]:_});return new V.LL("auth","Firebase",b).create(p,{appName:C.name})}function Ct(C,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&at(C,"argument-error"),Je(C,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bt(C,...p){if("string"!=typeof C){const _=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=C.name),C._errorFactory.create(_,...b)}return Vt.create(C,...p)}function Se(C,p,..._){if(!C)throw bt(p,..._)}function Ht(C){const p="INTERNAL ASSERTION FAILED: "+C;throw qt(p),new Error(p)}function Nt(C,p){C||Ht(p)}function Rn(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function En(){return"http:"===Ln()||"https:"===Ln()}function Ln(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Ot{constructor(p,_){this.shortDelay=p,this.longDelay=_,Nt(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function un(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(En()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function or(C,p){Nt(C.emulator,"Emulator should always be set here");const{url:_}=C.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Mn{static initialize(p,_,b){this.fetchImpl=p,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},it=new Ot(3e4,6e4);function tt(C,p){return C.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:C.tenantId}):p}function Ce(C,p,_,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,y.Z)(function*(C,p,_,b,Y={}){return Ee(C,Y,(0,y.Z)(function*(){let ce={},Ve={};b&&("GET"===p?Ve=b:ce={body:JSON.stringify(b)});const rt=(0,V.xO)(Object.assign({key:C.config.apiKey},Ve)).slice(1),$t=yield C._getAdditionalHeaders();return $t["Content-Type"]="application/json",C.languageCode&&($t["X-Firebase-Locale"]=C.languageCode),Mn.fetch()(pn(C,C.config.apiHost,_,rt),Object.assign({method:p,headers:$t,referrerPolicy:"no-referrer"},ce))}))})).apply(this,arguments)}function Ee(C,p,_){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,y.Z)(function*(C,p,_){C._canInitEmulator=!1;const b=Object.assign(Object.assign({},cn),p);try{const Y=new wn(C),ce=yield Promise.race([_(),Y.promise]);Y.clearNetworkTimeout();const Ve=yield ce.json();if("needConfirmation"in Ve)throw kn(C,"account-exists-with-different-credential",Ve);if(ce.ok&&!("errorMessage"in Ve))return Ve;{const rt=ce.ok?Ve.errorMessage:Ve.error.message,[$t,mn]=rt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$t)throw kn(C,"credential-already-in-use",Ve);if("EMAIL_EXISTS"===$t)throw kn(C,"email-already-in-use",Ve);if("USER_DISABLED"===$t)throw kn(C,"user-disabled",Ve);const Pn=b[$t]||$t.toLowerCase().replace(/[_\s]+/g,"-");if(mn)throw Je(C,Pn,mn);at(C,Pn)}}catch(Y){if(Y instanceof V.ZR)throw Y;at(C,"network-request-failed",{message:String(Y)})}})).apply(this,arguments)}function st(C,p,_,b){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,y.Z)(function*(C,p,_,b,Y={}){const ce=yield Ce(C,p,_,b,Y);return"mfaPendingCredential"in ce&&at(C,"multi-factor-auth-required",{_serverResponse:ce}),ce})).apply(this,arguments)}function pn(C,p,_,b){const Y=`${p}${_}?${b}`;return C.config.emulator?or(C.config,Y):`${C.config.apiScheme}://${Y}`}class wn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(De(this.auth,"network-request-failed")),it.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(C,p,_){const b={appName:C.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const Y=De(C,p,b);return Y.customData._tokenResponse=_,Y}function _r(){return(_r=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function jn(C,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yn(C,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function On(C){if(C)try{const p=new Date(Number(C));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Li(){return(Li=(0,y.Z)(function*(C,p=!1){const _=(0,V.m9)(C),b=yield _.getIdToken(p),Y=We(b);Se(Y&&Y.exp&&Y.auth_time&&Y.iat,_.auth,"internal-error");const ce="object"==typeof Y.firebase?Y.firebase:void 0,Ve=null==ce?void 0:ce.sign_in_provider;return{claims:Y,token:b,authTime:On(xt(Y.auth_time)),issuedAtTime:On(xt(Y.iat)),expirationTime:On(xt(Y.exp)),signInProvider:Ve||null,signInSecondFactor:(null==ce?void 0:ce.sign_in_second_factor)||null}})).apply(this,arguments)}function xt(C){return 1e3*Number(C)}function We(C){const[p,_,b]=C.split(".");if(void 0===p||void 0===_||void 0===b)return qt("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,V.tV)(_);return Y?JSON.parse(Y):(qt("Failed to decode base64 JWT payload"),null)}catch(Y){return qt("Caught error parsing JWT payload as JSON",null==Y?void 0:Y.toString()),null}}function ft(C,p){return At.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(C,p,_=!1){if(_)return p;try{return yield p}catch(b){throw b instanceof V.ZR&&Yt(b)&&C.auth.currentUser===C&&(yield C.auth.signOut()),b}})).apply(this,arguments)}function Yt({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class on{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const Y=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,y.Z)(function*(){yield _.iteration()}),b)}iteration(){var p=this;return(0,y.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null==_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class Dr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=On(this.lastLoginAt),this.creationTime=On(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kn(C){return Un.apply(this,arguments)}function Un(){return(Un=(0,y.Z)(function*(C){var p;const _=C.auth,b=yield C.getIdToken(),Y=yield ft(C,yn(_,{idToken:b}));Se(null==Y?void 0:Y.users.length,_,"internal-error");const ce=Y.users[0];C._notifyReloadListener(ce);const Ve=(null===(p=ce.providerUserInfo)||void 0===p?void 0:p.length)?rn(ce.providerUserInfo):[],rt=mr(C.providerData,Ve),Pn=!!C.isAnonymous&&!(C.email&&ce.passwordHash||(null==rt?void 0:rt.length)),Wn={uid:ce.localId,displayName:ce.displayName||null,photoURL:ce.photoUrl||null,email:ce.email||null,emailVerified:ce.emailVerified||!1,phoneNumber:ce.phoneNumber||null,tenantId:ce.tenantId||null,providerData:rt,metadata:new Dr(ce.createdAt,ce.lastLoginAt),isAnonymous:Pn};Object.assign(C,Wn)})).apply(this,arguments)}function ar(){return(ar=(0,y.Z)(function*(C){const p=(0,V.m9)(C);yield Kn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function mr(C,p){return[...C.filter(b=>!p.some(Y=>Y.providerId===b.providerId)),...p]}function rn(C){return C.map(p=>{var{providerId:_}=p,b=(0,ie._T)(p,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Xn(){return(Xn=(0,y.Z)(function*(C,p){const _=yield Ee(C,{},(0,y.Z)(function*(){const b=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:Y,apiKey:ce}=C.config,Ve=pn(C,Y,"/v1/token",`key=${ce}`),rt=yield C._getAdditionalHeaders();return rt["Content-Type"]="application/x-www-form-urlencoded",Mn.fetch()(Ve,{method:"POST",headers:rt,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Se(p.idToken,"internal-error"),Se(void 0!==p.idToken,"internal-error"),Se(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function ze(C){const p=We(C);return Se(p,"internal-error"),Se(void 0!==p.exp,"internal-error"),Se(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p){var _=this;return(0,y.Z)(function*(b,Y=!1){return Se(!_.accessToken||_.refreshToken,b,"user-token-expired"),Y||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(b,_.refreshToken),_.accessToken):null:_.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var b=this;return(0,y.Z)(function*(){const{accessToken:Y,refreshToken:ce,expiresIn:Ve}=yield function Mr(C,p){return Xn.apply(this,arguments)}(p,_);b.updateTokensAndExpiration(Y,ce,Number(Ve))})()}updateTokensAndExpiration(p,_,b){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,_){const{refreshToken:b,accessToken:Y,expirationTime:ce}=_,Ve=new cr;return b&&(Se("string"==typeof b,"internal-error",{appName:p}),Ve.refreshToken=b),Y&&(Se("string"==typeof Y,"internal-error",{appName:p}),Ve.accessToken=Y),ce&&(Se("number"==typeof ce,"internal-error",{appName:p}),Ve.expirationTime=ce),Ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new cr,this.toJSON())}_performRefresh(){return Ht("not implemented")}}function Qn(C,p){Se("string"==typeof C||void 0===C,"internal-error",{appName:p})}class Nr{constructor(p){var{uid:_,auth:b,stsTokenManager:Y}=p,ce=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new on(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=ce.displayName||null,this.email=ce.email||null,this.emailVerified=ce.emailVerified||!1,this.phoneNumber=ce.phoneNumber||null,this.photoURL=ce.photoURL||null,this.isAnonymous=ce.isAnonymous||!1,this.tenantId=ce.tenantId||null,this.providerData=ce.providerData?[...ce.providerData]:[],this.metadata=new Dr(ce.createdAt||void 0,ce.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,y.Z)(function*(){const b=yield ft(_,_.stsTokenManager.getToken(_.auth,p));return Se(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(p){return function ti(C){return Li.apply(this,arguments)}(this,p)}reload(){return function vi(C){return ar.apply(this,arguments)}(this)}_assign(p){this!==p&&(Se(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new Nr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p){var _=this;return(0,y.Z)(function*(b,Y=!1){let ce=!1;b.idToken&&b.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(b),ce=!0),Y&&(yield Kn(_)),yield _.auth._persistUserIfCurrent(_),ce&&_.auth._notifyListenersIfCurrent(_)}).apply(this,arguments)}delete(){var p=this;return(0,y.Z)(function*(){const _=yield p.getIdToken();return yield ft(p,function ur(C,p){return _r.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var b,Y,ce,Ve,rt,$t,mn,Pn;const Wn=null!==(b=_.displayName)&&void 0!==b?b:void 0,xr=null!==(Y=_.email)&&void 0!==Y?Y:void 0,ts=null!==(ce=_.phoneNumber)&&void 0!==ce?ce:void 0,Bo=null!==(Ve=_.photoURL)&&void 0!==Ve?Ve:void 0,ps=null!==(rt=_.tenantId)&&void 0!==rt?rt:void 0,Fa=null!==($t=_._redirectEventId)&&void 0!==$t?$t:void 0,La=null!==(mn=_.createdAt)&&void 0!==mn?mn:void 0,la=null!==(Pn=_.lastLoginAt)&&void 0!==Pn?Pn:void 0,{uid:Ao,emailVerified:jo,isAnonymous:Ds,providerData:Va,stsTokenManager:Cu}=_;Se(Ao&&Cu,p,"internal-error");const Yn=cr.fromJSON(this.name,Cu);Se("string"==typeof Ao,p,"internal-error"),Qn(Wn,p.name),Qn(xr,p.name),Se("boolean"==typeof jo,p,"internal-error"),Se("boolean"==typeof Ds,p,"internal-error"),Qn(ts,p.name),Qn(Bo,p.name),Qn(ps,p.name),Qn(Fa,p.name),Qn(La,p.name),Qn(la,p.name);const wr=new Nr({uid:Ao,auth:p,email:xr,emailVerified:jo,displayName:Wn,isAnonymous:Ds,photoURL:Bo,phoneNumber:ts,tenantId:ps,stsTokenManager:Yn,createdAt:La,lastLoginAt:la});return Va&&Array.isArray(Va)&&(wr.providerData=Va.map(Pr=>Object.assign({},Pr))),Fa&&(wr._redirectEventId=Fa),wr}static _fromIdTokenResponse(p,_){return(0,y.Z)(function*(b,Y,ce=!1){const Ve=new cr;Ve.updateFromServerResponse(Y);const rt=new Nr({uid:Y.localId,auth:b,stsTokenManager:Ve,isAnonymous:ce});return yield Kn(rt),rt}).apply(this,arguments)}}const jr=new Map;function ni(C){Nt(C instanceof Function,"Expected a class definition");let p=jr.get(C);return p?(Nt(p instanceof C,"Instance stored in cache mismatched with class"),p):(p=new C,jr.set(C,p),p)}const Mi=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(_,b){var Y=this;return(0,y.Z)(function*(){Y.storage[_]=b})()}_get(_){var b=this;return(0,y.Z)(function*(){const Y=b.storage[_];return void 0===Y?null:Y})()}_remove(_){var b=this;return(0,y.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return C.type="NONE",C})();function Br(C,p,_){return`firebase:${C}:${p}:${_}`}class Ue{constructor(p,_,b){this.persistence=p,this.auth=_,this.userKey=b;const{config:Y,name:ce}=this.auth;this.fullUserKey=Br(this.userKey,Y.apiKey,ce),this.fullPersistenceKey=Br("persistence",Y.apiKey,ce),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,y.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Nr._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,y.Z)(function*(){if(_.persistence===p)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_){return(0,y.Z)(function*(b,Y,ce="authUser"){if(!Y.length)return new Ue(ni(Mi),b,ce);const Ve=(yield Promise.all(Y.map(function(){var Wn=(0,y.Z)(function*(xr){if(yield xr._isAvailable())return xr});return function(xr){return Wn.apply(this,arguments)}}()))).filter(Wn=>Wn);let rt=Ve[0]||ni(Mi);const $t=Br(ce,b.config.apiKey,b.name);let mn=null;for(const Wn of Y)try{const xr=yield Wn._get($t);if(xr){const ts=Nr._fromJSON(b,xr);Wn!==rt&&(mn=ts),rt=Wn;break}}catch(xr){}const Pn=Ve.filter(Wn=>Wn._shouldAllowMigration);return rt._shouldAllowMigration&&Pn.length?(rt=Pn[0],mn&&(yield rt._set($t,mn.toJSON())),yield Promise.all(Y.map(function(){var Wn=(0,y.Z)(function*(xr){if(xr!==rt)try{yield xr._remove($t)}catch(ts){}});return function(xr){return Wn.apply(this,arguments)}}())),new Ue(rt,b,ce)):new Ue(rt,b,ce)}).apply(this,arguments)}}function Pe(C){const p=C.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(te(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(me(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(xe(p))return"Blackberry";if(pt(p))return"Webos";if(ye(p))return"Safari";if((p.includes("chrome/")||z(p))&&!p.includes("edge/"))return"Chrome";if(se(p))return"Android";{const b=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function me(C=(0,V.z$)()){return/firefox\//i.test(C)}function ye(C=(0,V.z$)()){const p=C.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function z(C=(0,V.z$)()){return/crios\//i.test(C)}function te(C=(0,V.z$)()){return/iemobile/i.test(C)}function se(C=(0,V.z$)()){return/android/i.test(C)}function xe(C=(0,V.z$)()){return/blackberry/i.test(C)}function pt(C=(0,V.z$)()){return/webos/i.test(C)}function Bt(C=(0,V.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function an(C=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function tr(C=(0,V.z$)()){return Bt(C)||se(C)||pt(C)||xe(C)||/windows phone/i.test(C)||te(C)}function Ci(C,p=[]){let _;switch(C){case"Browser":_=Pe((0,V.z$)());break;case"Worker":_=`${Pe((0,V.z$)())}-${C}`;break;default:_=C}const b=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ee.SDK_VERSION}/${b}`}function mt(){return(mt=(0,y.Z)(function*(C){return(yield Ce(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ut(C,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,y.Z)(function*(C,p){return Ce(C,"GET","/v2/recaptchaConfig",tt(C,p))})).apply(this,arguments)}function ln(C){return void 0!==C&&void 0!==C.getResponse}function bn(C){return void 0!==C&&void 0!==C.enterprise}class rr{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function yr(C){return new Promise((p,_)=>{const b=document.createElement("script");b.setAttribute("src",C),b.onload=p,b.onerror=Y=>{const ce=De("internal-error");ce.customData=Y,_(ce)},b.type="text/javascript",b.charset="UTF-8",function Kr(){var C,p;return null!==(p=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==p?p:document}().appendChild(b)})}function ri(C){return`__${C}${Math.floor(1e6*Math.random())}`}class lr{constructor(p){this.type="recaptcha-enterprise",this.auth=_n(p)}verify(){var p=this;return(0,y.Z)(function*(_="verify",b=!1){function ce(){return ce=(0,y.Z)(function*(rt){if(!b){if(null==rt.tenantId&&null!=rt._agentRecaptchaConfig)return rt._agentRecaptchaConfig.siteKey;if(null!=rt.tenantId&&void 0!==rt._tenantRecaptchaConfigs[rt.tenantId])return rt._tenantRecaptchaConfigs[rt.tenantId].siteKey}return new Promise(function(){var $t=(0,y.Z)(function*(mn,Pn){Ut(rt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Wn=>{if(void 0!==Wn.recaptchaKey){const xr=new rr(Wn);return null==rt.tenantId?rt._agentRecaptchaConfig=xr:rt._tenantRecaptchaConfigs[rt.tenantId]=xr,mn(xr.siteKey)}Pn(new Error("recaptcha Enterprise site key undefined"))}).catch(Wn=>{Pn(Wn)})});return function(mn,Pn){return $t.apply(this,arguments)}}())}),ce.apply(this,arguments)}function Ve(rt,$t,mn){const Pn=window.grecaptcha;bn(Pn)?Pn.enterprise.ready(()=>{Pn.enterprise.execute(rt,{action:_}).then(Wn=>{$t(Wn)}).catch(()=>{$t("NO_RECAPTCHA")})}):mn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((rt,$t)=>{(function Y(rt){return ce.apply(this,arguments)})(p.auth).then(mn=>{if(!b&&bn(window.grecaptcha))Ve(mn,rt,$t);else{if("undefined"==typeof window)return void $t(new Error("RecaptchaVerifier is only supported in browser"));yr("https://www.google.com/recaptcha/enterprise.js?render="+mn).then(()=>{Ve(mn,rt,$t)}).catch(Pn=>{$t(Pn)})}}).catch(mn=>{$t(mn)})})}).apply(this,arguments)}}function bi(C,p,_){return os.apply(this,arguments)}function os(){return(os=(0,y.Z)(function*(C,p,_,b=!1){const Y=new lr(C);let ce;try{ce=yield Y.verify(_)}catch(rt){ce=yield Y.verify(_,!0)}const Ve=Object.assign({},p);return Object.assign(Ve,b?{captchaResp:ce}:{captchaResponse:ce}),Object.assign(Ve,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ve,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ve})).apply(this,arguments)}class Ys{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const b=ce=>new Promise((Ve,rt)=>{try{Ve(p(ce))}catch($t){rt($t)}});b.onAbort=_,this.queue.push(b);const Y=this.queue.length-1;return()=>{this.queue[Y]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,y.Z)(function*(){if(_.auth.currentUser===p)return;const b=[];try{for(const Y of _.queue)yield Y(p),Y.onAbort&&b.push(Y.onAbort)}catch(Y){b.reverse();for(const ce of b)try{ce()}catch(Ve){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null==Y?void 0:Y.message})}})()}}class Cr{constructor(p,_,b,Y){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=b,this.config=Y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new er(this),this.idTokenSubscription=new er(this),this.beforeStateQueue=new Ys(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=Y.sdkClientVersion}_initializeWithPersistence(p,_){var b=this;return _&&(this._popupRedirectResolver=ni(_)),this._initializationPromise=this.queue((0,y.Z)(function*(){var Y,ce;if(!b._deleted&&(b.persistenceManager=yield Ue.create(b,p),!b._deleted)){if(null===(Y=b._popupRedirectResolver)||void 0===Y?void 0:Y._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(Ve){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(ce=b.currentUser)||void 0===ce?void 0:ce.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,y.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,y.Z)(function*(){var b;const Y=yield _.assertedPersistence.getCurrentUser();let ce=Y,Ve=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const rt=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,$t=null==ce?void 0:ce._redirectEventId,mn=yield _.tryRedirectSignIn(p);(!rt||rt===$t)&&(null==mn?void 0:mn.user)&&(ce=mn.user,Ve=!0)}if(!ce)return _.directlySetCurrentUser(null);if(!ce._redirectEventId){if(Ve)try{yield _.beforeStateQueue.runMiddleware(ce)}catch(rt){ce=Y,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(rt))}return ce?_.reloadAndSetCurrentUserOrClear(ce):_.directlySetCurrentUser(null)}return Se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ce._redirectEventId?_.directlySetCurrentUser(ce):_.reloadAndSetCurrentUserOrClear(ce)})()}tryRedirectSignIn(p){var _=this;return(0,y.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(Y){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,y.Z)(function*(){try{yield Kn(p)}catch(b){if("auth/network-request-failed"!==(null==b?void 0:b.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function sn(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var p=this;return(0,y.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,y.Z)(function*(){const b=p?(0,V.m9)(p):null;return b&&Se(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(p){var _=this;return(0,y.Z)(function*(b,Y=!1){if(!_._deleted)return b&&Se(_.tenantId===b.tenantId,_,"tenant-id-mismatch"),Y||(yield _.beforeStateQueue.runMiddleware(b)),_.queue((0,y.Z)(function*(){yield _.directlySetCurrentUser(b),_.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var p=this;return(0,y.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,y.Z)(function*(){yield _.assertedPersistence.setPersistence(ni(p))}))}initializeRecaptchaConfig(){var p=this;return(0,y.Z)(function*(){const _=yield Ut(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new rr(_);null==p.tenantId?p._agentRecaptchaConfig=b:p._tenantRecaptchaConfigs[p.tenantId]=b,b.emailPasswordEnabled&&new lr(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,_,b){return this.registerStateListener(this.authStateSubscription,p,_,b)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,b){return this.registerStateListener(this.idTokenSubscription,p,_,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var b=this;return(0,y.Z)(function*(){const Y=yield b.getOrInitRedirectPersistenceManager(_);return null===p?Y.removeCurrentUser():Y.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,y.Z)(function*(){if(!_.redirectPersistenceManager){const b=p&&ni(p)||_._popupRedirectResolver;Se(b,_,"argument-error"),_.redirectPersistenceManager=yield Ue.create(_,[ni(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,y.Z)(function*(){var b,Y;return _._isInitialized&&(yield _.queue((0,y.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===p?_._currentUser:(null===(Y=_.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,y.Z)(function*(){if(p===_.currentUser)return _.queue((0,y.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,b,Y){if(this._deleted)return()=>{};const ce="function"==typeof _?_:_.next.bind(_),Ve=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(Ve,this,"internal-error"),Ve.then(()=>ce(this.currentUser)),"function"==typeof _?p.addObserver(_,b,Y):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,y.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ci(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,y.Z)(function*(){var _;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const Y=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();Y&&(b["X-Firebase-Client"]=Y);const ce=yield p._getAppCheckToken();return ce&&(b["X-Firebase-AppCheck"]=ce),b})()}_getAppCheckToken(){var p=this;return(0,y.Z)(function*(){var _;const b=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return(null==b?void 0:b.error)&&function Ge(C,...p){ot.logLevel<=ke.in.WARN&&ot.warn(`Auth (${ee.SDK_VERSION}): ${C}`,...p)}(`Error while retrieving App Check token: ${b.error}`),null==b?void 0:b.token})()}}function _n(C){return(0,V.m9)(C)}class er{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xr(C,p,_){const b=_n(C);Se(b._canInitEmulator,b,"emulator-config-failed"),Se(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const Y=!!(null==_?void 0:_.disableWarnings),ce=lt(p),{host:Ve,port:rt}=function Ze(C){const p=lt(C),_=/(\/\/)?([^?#/]+)/.exec(C.substr(p.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(b);if(Y){const ce=Y[1];return{host:ce,port:ut(b.substr(ce.length+1))}}{const[ce,Ve]=b.split(":");return{host:ce,port:ut(Ve)}}}(p);b.config.emulator={url:`${ce}//${Ve}${null===rt?"":`:${rt}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Ve,port:rt,protocol:ce.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function Et(){function C(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function lt(C){const p=C.indexOf(":");return p<0?"":C.substr(0,p+1)}function ut(C){if(!C)return null;const p=Number(C);return isNaN(p)?null:p}class kt{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Ht("not implemented")}_getIdTokenResponse(p){return Ht("not implemented")}_linkToIdToken(p,_){return Ht("not implemented")}_getReauthenticationResolver(p){return Ht("not implemented")}}function Dn(C,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:resetPassword",tt(C,p))})).apply(this,arguments)}function Nn(C,p){return hr.apply(this,arguments)}function hr(){return(hr=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Di(C,p){return ms.apply(this,arguments)}function ms(){return(ms=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:update",tt(C,p))})).apply(this,arguments)}function ci(C,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signInWithPassword",tt(C,p))})).apply(this,arguments)}function Ns(C,p){return js.apply(this,arguments)}function js(){return(js=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:sendOobCode",tt(C,p))})).apply(this,arguments)}function Ui(C,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,y.Z)(function*(C,p){return Ns(C,p)})).apply(this,arguments)}function Ro(C,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,y.Z)(function*(C,p){return Ns(C,p)})).apply(this,arguments)}function na(C,p){return ys.apply(this,arguments)}function ys(){return(ys=(0,y.Z)(function*(C,p){return Ns(C,p)})).apply(this,arguments)}function Wo(C,p){return Os.apply(this,arguments)}function Os(){return(Os=(0,y.Z)(function*(C,p){return Ns(C,p)})).apply(this,arguments)}function Ss(){return(Ss=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signInWithEmailLink",tt(C,p))})).apply(this,arguments)}function ra(){return(ra=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signInWithEmailLink",tt(C,p))})).apply(this,arguments)}class xi extends kt{constructor(p,_,b,Y=null){super("password",b),this._email=p,this._password=_,this._tenantId=Y}static _fromEmailAndPassword(p,_){return new xi(p,_,"password")}static _fromEmailAndCode(p,_,b=null){return new xi(p,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,y.Z)(function*(){var b;switch(_.signInMethod){case"password":const Y={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null===(b=p._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const ce=yield bi(p,Y,"signInWithPassword");return ci(p,ce)}return ci(p,Y).catch(function(){var ce=(0,y.Z)(function*(Ve){if("auth/missing-recaptcha-token"===Ve.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const rt=yield bi(p,Y,"signInWithPassword");return ci(p,rt)}return Promise.reject(Ve)});return function(Ve){return ce.apply(this,arguments)}}());case"emailLink":return function Tr(C,p){return Ss.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:at(p,"internal-error")}})()}_linkToIdToken(p,_){var b=this;return(0,y.Z)(function*(){switch(b.signInMethod){case"password":return Nn(p,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function oo(C,p){return ra.apply(this,arguments)}(p,{idToken:_,email:b._email,oobCode:b._password});default:at(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function As(C,p){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signInWithIdp",tt(C,p))})).apply(this,arguments)}class qr extends kt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new qr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):at("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:Y}=_,ce=(0,ie._T)(_,["providerId","signInMethod"]);if(!b||!Y)return null;const Ve=new qr(b,Y);return Ve.idToken=ce.idToken||void 0,Ve.accessToken=ce.accessToken||void 0,Ve.secret=ce.secret,Ve.nonce=ce.nonce,Ve.pendingToken=ce.pendingToken||null,Ve}_getIdTokenResponse(p){return As(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,As(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,As(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,V.xO)(_)}return p}}function _o(C,p){return as.apply(this,arguments)}function as(){return(as=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:sendVerificationCode",tt(C,p))})).apply(this,arguments)}function _s(){return(_s=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signInWithPhoneNumber",tt(C,p))})).apply(this,arguments)}function ws(){return(ws=(0,y.Z)(function*(C,p){const _=yield st(C,"POST","/v1/accounts:signInWithPhoneNumber",tt(C,p));if(_.temporaryProof)throw kn(C,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Cs={USER_NOT_FOUND:"user-not-found"};function vo(){return(vo=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signInWithPhoneNumber",tt(C,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Cs)})).apply(this,arguments)}class ns extends kt{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new ns({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new ns({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function ji(C,p){return _s.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function zo(C,p){return ws.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Qs(C,p){return vo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:b,verificationCode:Y}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:b,code:Y}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:b,phoneNumber:Y,temporaryProof:ce}=p;return b||_||Y||ce?new ns({verificationId:_,verificationCode:b,phoneNumber:Y,temporaryProof:ce}):null}}class ls{constructor(p){var _,b,Y,ce,Ve,rt;const $t=(0,V.zd)((0,V.pd)(p)),mn=null!==(_=$t.apiKey)&&void 0!==_?_:null,Pn=null!==(b=$t.oobCode)&&void 0!==b?b:null,Wn=function $r(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=$t.mode)&&void 0!==Y?Y:null);Se(mn&&Pn&&Wn,"argument-error"),this.apiKey=mn,this.operation=Wn,this.code=Pn,this.continueUrl=null!==(ce=$t.continueUrl)&&void 0!==ce?ce:null,this.languageCode=null!==(Ve=$t.languageCode)&&void 0!==Ve?Ve:null,this.tenantId=null!==(rt=$t.tenantId)&&void 0!==rt?rt:null}static parseLink(p){const _=function Js(C){const p=(0,V.zd)((0,V.pd)(C)).link,_=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,b=(0,V.zd)((0,V.pd)(C)).deep_link_id;return(b?(0,V.zd)((0,V.pd)(b)).link:null)||b||_||p||C}(p);try{return new ls(_)}catch(b){return null}}}let ii=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(_,b){return xi._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const Y=ls.parseLink(b);return Se(Y,"argument-error"),xi._fromEmailAndCode(_,Y.code,Y.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Oi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Si extends Oi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Pi extends Si{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Se("providerId"in _&&"signInMethod"in _,"argument-error"),qr._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Se(p.idToken||p.accessToken,"argument-error"),qr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Pi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Pi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:Y,pendingToken:ce,nonce:Ve,providerId:rt}=p;if(!b&&!Y&&!_&&!ce||!rt)return null;try{return new Pi(rt)._credential({idToken:_,accessToken:b,nonce:Ve,pendingToken:ce})}catch($t){return null}}}let Hs=(()=>{class C extends Si{constructor(){super("facebook.com")}static credential(_){return qr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch(b){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),$s=(()=>{class C extends Si{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return qr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:Y}=_;if(!b&&!Y)return null;try{return C.credential(b,Y)}catch(ce){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),si=(()=>{class C extends Si{constructor(){super("github.com")}static credential(_){return qr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch(b){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class le extends kt{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return As(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,As(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,As(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:Y,pendingToken:ce}=_;return b&&Y&&ce&&b===Y?new le(b,ce):null}static _create(p,_){return new le(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class he extends Oi{constructor(p){Se(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return he.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return he.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=le.fromJSON(p);return Se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:b}=p;if(!_||!b)return null;try{return le._create(b,_)}catch(Y){return null}}}let Fe=(()=>{class C extends Si{constructor(){super("twitter.com")}static credential(_,b){return qr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:Y}=_;if(!b||!Y)return null;try{return C.credential(b,Y)}catch(ce){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Pt(C,p){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signUp",tt(C,p))})).apply(this,arguments)}class gn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,b){return(0,y.Z)(function*(Y,ce,Ve,rt=!1){const $t=yield Nr._fromIdTokenResponse(Y,Ve,rt),mn=vr(Ve);return new gn({user:$t,providerId:mn,_tokenResponse:Ve,operationType:ce})}).apply(this,arguments)}static _forOperation(p,_,b){return(0,y.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const Y=vr(b);return new gn({user:p,providerId:Y,_tokenResponse:b,operationType:_})})()}}function vr(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function br(C){return fr.apply(this,arguments)}function fr(){return(fr=(0,y.Z)(function*(C){var p;const _=_n(C);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new gn({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Pt(_,{returnSecureToken:!0}),Y=yield gn._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class Sr extends V.ZR{constructor(p,_,b,Y){var ce;super(_.code,_.message),this.operationType=b,this.user=Y,Object.setPrototypeOf(this,Sr.prototype),this.customData={appName:p.name,tenantId:null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,_,b,Y){return new Sr(p,_,b,Y)}}function wi(C,p,_,b){return("reauthenticate"===p?_._getReauthenticationResolver(C):_._getIdTokenResponse(C)).catch(ce=>{throw"auth/multi-factor-auth-required"===ce.code?Sr._fromErrorAndOperation(C,ce,p,b):ce})}function _i(C){return new Set(C.map(({providerId:p})=>p).filter(p=>!!p))}function li(C,p){return ao.apply(this,arguments)}function ao(){return(ao=(0,y.Z)(function*(C,p){const _=(0,V.m9)(C);yield Rs(!0,_,p);const{providerUserInfo:b}=yield jn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),Y=_i(b||[]);return _.providerData=_.providerData.filter(ce=>Y.has(ce.providerId)),Y.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function di(C,p){return ir.apply(this,arguments)}function ir(){return(ir=(0,y.Z)(function*(C,p,_=!1){const b=yield ft(C,p._linkToIdToken(C.auth,yield C.getIdToken()),_);return gn._forOperation(C,"link",b)})).apply(this,arguments)}function Rs(C,p,_){return ko.apply(this,arguments)}function ko(){return(ko=(0,y.Z)(function*(C,p,_){yield Kn(p);const Y=!1===C?"provider-already-linked":"no-such-provider";Se(_i(p.providerData).has(_)===C,p.auth,Y)})).apply(this,arguments)}function ks(C,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,y.Z)(function*(C,p,_=!1){const{auth:b}=C,Y="reauthenticate";try{const ce=yield ft(C,wi(b,Y,p,C),_);Se(ce.idToken,b,"internal-error");const Ve=We(ce.idToken);Se(Ve,b,"internal-error");const{sub:rt}=Ve;return Se(C.uid===rt,b,"user-mismatch"),gn._forOperation(C,Y,ce)}catch(ce){throw"auth/user-not-found"===(null==ce?void 0:ce.code)&&at(b,"user-mismatch"),ce}})).apply(this,arguments)}function q(C,p){return j.apply(this,arguments)}function j(){return(j=(0,y.Z)(function*(C,p,_=!1){const b="signIn",Y=yield wi(C,b,p),ce=yield gn._fromIdTokenResponse(C,b,Y);return _||(yield C._updateCurrentUser(ce.user)),ce})).apply(this,arguments)}function F(C,p){return ue.apply(this,arguments)}function ue(){return(ue=(0,y.Z)(function*(C,p){return q(_n(C),p)})).apply(this,arguments)}function Be(C,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,y.Z)(function*(C,p){const _=(0,V.m9)(C);return yield Rs(!1,_,p.providerId),di(_,p)})).apply(this,arguments)}function Yr(C,p){return W.apply(this,arguments)}function W(){return(W=(0,y.Z)(function*(C,p){return ks((0,V.m9)(C),p)})).apply(this,arguments)}function K(C,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,y.Z)(function*(C,p){return st(C,"POST","/v1/accounts:signInWithCustomToken",tt(C,p))})).apply(this,arguments)}function be(C,p){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,y.Z)(function*(C,p){const _=_n(C),b=yield K(_,{token:p,returnSecureToken:!0}),Y=yield gn._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class yt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?en._fromServerResponse(p,_):"totpInfo"in _?Fn._fromServerResponse(p,_):at(p,"internal-error")}}class en extends yt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new en(_)}}class Fn extends yt{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new Fn(_)}}function xn(C,p,_){var b;Se((null===(b=_.url)||void 0===b?void 0:b.length)>0,C,"invalid-continue-uri"),Se(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Se(_.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Se(_.android.packageName.length>0,C,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function sr(C,p,_){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,y.Z)(function*(C,p,_){var b;const Y=_n(C),ce={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null===(b=Y._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const Ve=yield bi(Y,ce,"getOobCode",!0);_&&xn(Y,Ve,_),yield Ro(Y,Ve)}else _&&xn(Y,ce,_),yield Ro(Y,ce).catch(function(){var Ve=(0,y.Z)(function*(rt){if("auth/missing-recaptcha-token"!==rt.code)return Promise.reject(rt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const $t=yield bi(Y,ce,"getOobCode",!0);_&&xn(Y,$t,_),yield Ro(Y,$t)}});return function(rt){return Ve.apply(this,arguments)}}())}),Bn.apply(this,arguments)}function oi(C,p,_){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,y.Z)(function*(C,p,_){yield Dn((0,V.m9)(C),{oobCode:p,newPassword:_})})).apply(this,arguments)}function hi(C,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,y.Z)(function*(C,p){yield Di((0,V.m9)(C),{oobCode:p})})).apply(this,arguments)}function Hi(C,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,y.Z)(function*(C,p){const _=(0,V.m9)(C),b=yield Dn(_,{oobCode:p}),Y=b.requestType;switch(Se(Y,_,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(b.mfaInfo,_,"internal-error");default:Se(b.email,_,"internal-error")}let ce=null;return b.mfaInfo&&(ce=yt._fromServerResponse(_n(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:ce},operation:Y}})).apply(this,arguments)}function es(C,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,y.Z)(function*(C,p){const{data:_}=yield Hi((0,V.m9)(C),p);return _.email})).apply(this,arguments)}function qi(C,p,_){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,y.Z)(function*(C,p,_){var b;const Y=_n(C),ce={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let Ve;if(null===(b=Y._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const mn=yield bi(Y,ce,"signUpPassword");Ve=Pt(Y,mn)}else Ve=Pt(Y,ce).catch(function(){var mn=(0,y.Z)(function*(Pn){if("auth/missing-recaptcha-token"===Pn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Wn=yield bi(Y,ce,"signUpPassword");return Pt(Y,Wn)}return Promise.reject(Pn)});return function(Pn){return mn.apply(this,arguments)}}());const rt=yield Ve.catch(mn=>Promise.reject(mn)),$t=yield gn._fromIdTokenResponse(Y,"signIn",rt);return yield Y._updateCurrentUser($t.user),$t}),Ni.apply(this,arguments)}function Gs(C,p,_){return F((0,V.m9)(C),ii.credential(p,_))}function Mo(C,p,_){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,y.Z)(function*(C,p,_){var b;const Y=_n(C),ce={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Ve(rt,$t){Se($t.handleCodeInApp,Y,"argument-error"),$t&&xn(Y,rt,$t)}if(null===(b=Y._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const rt=yield bi(Y,ce,"getOobCode",!0);Ve(rt,_),yield na(Y,rt)}else Ve(ce,_),yield na(Y,ce).catch(function(){var rt=(0,y.Z)(function*($t){if("auth/missing-recaptcha-token"!==$t.code)return Promise.reject($t);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const mn=yield bi(Y,ce,"getOobCode",!0);Ve(mn,_),yield na(Y,mn)}});return function($t){return rt.apply(this,arguments)}}())}),Fo.apply(this,arguments)}function wo(C,p){const _=ls.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Xs(C,p,_){return us.apply(this,arguments)}function us(){return(us=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C),Y=ii.credentialWithLink(p,_||Rn());return Se(Y._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),F(b,Y)})).apply(this,arguments)}function il(C,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:createAuthUri",tt(C,p))})).apply(this,arguments)}function ca(C,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,y.Z)(function*(C,p){const b={identifier:p,continueUri:En()?Rn():"http://localhost"},{signinMethods:Y}=yield il((0,V.m9)(C),b);return Y||[]})).apply(this,arguments)}function Ei(C,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,y.Z)(function*(C,p){const _=(0,V.m9)(C),Y={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};p&&xn(_.auth,Y,p);const{email:ce}=yield Ui(_.auth,Y);ce!==C.email&&(yield C.reload())})).apply(this,arguments)}function cs(C,p,_){return Is.apply(this,arguments)}function Is(){return(Is=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C),ce={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:p};_&&xn(b.auth,ce,_);const{email:Ve}=yield Wo(b.auth,ce);Ve!==C.email&&(yield C.reload())})).apply(this,arguments)}function Ai(C,p){return da.apply(this,arguments)}function da(){return(da=(0,y.Z)(function*(C,p){return Ce(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ia(C,p){return El.apply(this,arguments)}function El(){return(El=(0,y.Z)(function*(C,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const b=(0,V.m9)(C),ce={idToken:yield b.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Ve=yield ft(b,Ai(b.auth,ce));b.displayName=Ve.displayName||null,b.photoURL=Ve.photoUrl||null;const rt=b.providerData.find(({providerId:$t})=>"password"===$t);rt&&(rt.displayName=b.displayName,rt.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Ve)})).apply(this,arguments)}function Co(C,p){return xo((0,V.m9)(C),p,null)}function to(C,p){return xo((0,V.m9)(C),null,p)}function xo(C,p,_){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,y.Z)(function*(C,p,_){const{auth:b}=C,ce={idToken:yield C.getIdToken(),returnSecureToken:!0};p&&(ce.email=p),_&&(ce.password=_);const Ve=yield ft(C,Nn(b,ce));yield C._updateTokensIfNecessary(Ve,!0)})).apply(this,arguments)}class rs{constructor(p,_,b={}){this.isNewUser=p,this.providerId=_,this.profile=b}}class no extends rs{constructor(p,_,b,Y){super(p,_,b),this.username=Y}}class sl extends rs{constructor(p,_){super(p,"facebook.com",_)}}class fi extends no{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class ds extends rs{constructor(p,_){super(p,"google.com",_)}}class uo extends no{constructor(p,_,b){super(p,"twitter.com",_,b)}}function To(C){const{user:p,_tokenResponse:_}=C;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Io(C){var p,_;if(!C)return null;const{providerId:b}=C,Y=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},ce=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!b&&(null==C?void 0:C.idToken)){const Ve=null===(_=null===(p=We(C.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Ve)return new rs(ce,"anonymous"!==Ve&&"custom"!==Ve?Ve:null)}if(!b)return null;switch(b){case"facebook.com":return new sl(ce,Y);case"github.com":return new fi(ce,Y);case"google.com":return new ds(ce,Y);case"twitter.com":return new uo(ce,Y,C.screenName||null);case"custom":case"anonymous":return new rs(ce,null);default:return new rs(ce,b,Y)}}(_)}class Fs{constructor(p,_,b){this.type=p,this.credential=_,this.auth=b}static _fromIdtoken(p,_){return new Fs("enroll",p,_)}static _fromMfaPendingCredential(p){return new Fs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,b;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Fs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return Fs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class vs{constructor(p,_,b){this.session=p,this.hints=_,this.signInResolver=b}static _fromError(p,_){const b=_n(p),Y=_.customData._serverResponse,ce=(Y.mfaInfo||[]).map(rt=>yt._fromServerResponse(b,rt));Se(Y.mfaPendingCredential,b,"internal-error");const Ve=Fs._fromMfaPendingCredential(Y.mfaPendingCredential);return new vs(Ve,ce,function(){var rt=(0,y.Z)(function*($t){const mn=yield $t._process(b,Ve);delete Y.mfaInfo,delete Y.mfaPendingCredential;const Pn=Object.assign(Object.assign({},Y),{idToken:mn.idToken,refreshToken:mn.refreshToken});switch(_.operationType){case"signIn":const Wn=yield gn._fromIdTokenResponse(b,_.operationType,Pn);return yield b._updateCurrentUser(Wn.user),Wn;case"reauthenticate":return Se(_.user,b,"internal-error"),gn._forOperation(_.user,_.operationType,Pn);default:at(b,"internal-error")}});return function($t){return rt.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,y.Z)(function*(){return _.signInResolver(p)})()}}function sa(C,p){var _;const b=(0,V.m9)(C),Y=p;return Se(p.customData.operationType,b,"argument-error"),Se(null===(_=Y.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),vs._fromError(b,Y)}function bo(C,p){return Ce(C,"POST","/v2/accounts/mfaEnrollment:start",tt(C,p))}class ol{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>yt._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new ol(p)}getSession(){var p=this;return(0,y.Z)(function*(){return Fs._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var b=this;return(0,y.Z)(function*(){const Y=p,ce=yield b.getSession(),Ve=yield ft(b.user,Y._process(b.user.auth,ce,_));return yield b.user._updateTokensIfNecessary(Ve),b.user.reload()})()}unenroll(p){var _=this;return(0,y.Z)(function*(){const b="string"==typeof p?p:p.uid,Y=yield _.user.getIdToken();try{const ce=yield ft(_.user,function wl(C,p){return Ce(C,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(C,p))}(_.user.auth,{idToken:Y,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Ve})=>Ve!==b),yield _.user._updateTokensIfNecessary(ce),yield _.user.reload()}catch(ce){throw ce}})()}}const Yo=new WeakMap;function zl(C){const p=(0,V.m9)(C);return Yo.has(p)||Yo.set(p,ol._fromUser(p)),Yo.get(p)}const oa="__sak";class Kl{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(oa,"1"),this.storage.removeItem(oa),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const T=(()=>{class C extends Kl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function al(){const C=(0,V.z$)();return ye(C)||Bt(C)}()&&function ai(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=tr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const Y=this.storage.getItem(b),ce=this.localCache[b];Y!==ce&&_(b,ce,Y)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((rt,$t,mn)=>{this.notifyListeners(rt,mn)});const Y=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const rt=this.storage.getItem(Y);if(_.newValue!==rt)null!==_.newValue?this.storage.setItem(Y,_.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===_.newValue&&!b)return}const ce=()=>{const rt=this.storage.getItem(Y);!b&&this.localCache[Y]===rt||this.notifyListeners(Y,rt)},Ve=this.storage.getItem(Y);!function gr(){return(0,V.w1)()&&10===document.documentMode}()||Ve===_.newValue||_.newValue===_.oldValue?ce():setTimeout(ce,10)}notifyListeners(_,b){this.localCache[_]=b;const Y=this.listeners[_];if(Y)for(const ce of Array.from(Y))ce(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var Y=()=>super._set,ce=this;return(0,y.Z)(function*(){yield Y().call(ce,_,b),ce.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,Y=this;return(0,y.Z)(function*(){const ce=yield b().call(Y,_);return Y.localCache[_]=JSON.stringify(ce),ce})()}_remove(_){var b=()=>super._remove,Y=this;return(0,y.Z)(function*(){yield b().call(Y,_),delete Y.localCache[_]})()}}return C.type="LOCAL",C})(),Q=(()=>{class C extends Kl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return C.type="SESSION",C})();let fe=(()=>{class C{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(ce=>ce.isListeningto(_));if(b)return b;const Y=new C(_);return this.receivers.push(Y),Y}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,y.Z)(function*(){const Y=_,{eventId:ce,eventType:Ve,data:rt}=Y.data,$t=b.handlersMap[Ve];if(!(null==$t?void 0:$t.size))return;Y.ports[0].postMessage({status:"ack",eventId:ce,eventType:Ve});const mn=Array.from($t).map(function(){var Wn=(0,y.Z)(function*(xr){return xr(Y.origin,rt)});return function(xr){return Wn.apply(this,arguments)}}()),Pn=yield function de(C){return Promise.all(C.map(function(){var p=(0,y.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return p.apply(this,arguments)}}()))}(mn);Y.ports[0].postMessage({status:"done",eventId:ce,eventType:Ve,response:Pn})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function Le(C="",p=10){let _="";for(let b=0;b<p;b++)_+=Math.floor(10*Math.random());return C+_}class Ft{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_){var b=this;return(0,y.Z)(function*(Y,ce,Ve=50){const rt="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!rt)throw new Error("connection_unavailable");let $t,mn;return new Promise((Pn,Wn)=>{const xr=Le("",20);rt.port1.start();const ts=setTimeout(()=>{Wn(new Error("unsupported_event"))},Ve);mn={messageChannel:rt,onMessage(Bo){const ps=Bo;if(ps.data.eventId===xr)switch(ps.data.status){case"ack":clearTimeout(ts),$t=setTimeout(()=>{Wn(new Error("timeout"))},3e3);break;case"done":clearTimeout($t),Pn(ps.data.response);break;default:clearTimeout(ts),clearTimeout($t),Wn(new Error("invalid_response"))}}},b.handlers.add(mn),rt.port1.addEventListener("message",mn.onMessage),b.target.postMessage({eventType:Y,eventId:xr,data:ce},[rt.port2])}).finally(()=>{mn&&b.removeMessageHandler(mn)})}).apply(this,arguments)}}function vn(){return window}function Wt(){return void 0!==vn().WorkerGlobalScope&&"function"==typeof vn().importScripts}function tn(){return(tn=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const Fr="firebaseLocalStorageDb",Zi="firebaseLocalStorage",ha="fbase_key";class aa{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ra(C,p){return C.transaction([Zi],p?"readwrite":"readonly").objectStore(Zi)}function kl(){const C=indexedDB.open(Fr,1);return new Promise((p,_)=>{C.addEventListener("error",()=>{_(C.error)}),C.addEventListener("upgradeneeded",()=>{const b=C.result;try{b.createObjectStore(Zi,{keyPath:ha})}catch(Y){_(Y)}}),C.addEventListener("success",(0,y.Z)(function*(){const b=C.result;b.objectStoreNames.contains(Zi)?p(b):(b.close(),yield function Fu(){const C=indexedDB.deleteDatabase(Fr);return new aa(C).toPromise()}(),p(yield kl()))}))})}function Ka(C,p,_){return lu.apply(this,arguments)}function lu(){return(lu=(0,y.Z)(function*(C,p,_){const b=Ra(C,!0).put({[ha]:p,value:_});return new aa(b).toPromise()})).apply(this,arguments)}function Yi(){return(Yi=(0,y.Z)(function*(C,p){const _=Ra(C,!1).get(p),b=yield new aa(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ar(C,p){const _=Ra(C,!0).delete(p);return new aa(_).toPromise()}const Gn=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,y.Z)(function*(){return _.db||(_.db=yield kl()),_.db})()}_withRetries(_){var b=this;return(0,y.Z)(function*(){let Y=0;for(;;)try{const ce=yield b._openDb();return yield _(ce)}catch(ce){if(Y++>3)throw ce;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,y.Z)(function*(){return Wt()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,y.Z)(function*(){_.receiver=fe._getInstance(function jt(){return Wt()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,y.Z)(function*(Y,ce){return{keyProcessed:(yield _._poll()).includes(ce.key)}});return function(Y,ce){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,y.Z)(function*(Y,ce){return["keyChanged"]});return function(Y,ce){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,y.Z)(function*(){var b,Y;if(_.activeServiceWorker=yield function Ri(){return tn.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ft(_.activeServiceWorker);const ce=yield _.sender._send("ping",{},800);!ce||(null===(b=ce[0])||void 0===b?void 0:b.fulfilled)&&(null===(Y=ce[0])||void 0===Y?void 0:Y.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,y.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Dt(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(Y){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const _=yield kl();return yield Ka(_,oa,"1"),yield Ar(_,oa),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,y.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var Y=this;return(0,y.Z)(function*(){return Y._withPendingWrite((0,y.Z)(function*(){return yield Y._withRetries(ce=>Ka(ce,_,b)),Y.localCache[_]=b,Y.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,y.Z)(function*(){const Y=yield b._withRetries(ce=>function nc(C,p){return Yi.apply(this,arguments)}(ce,_));return b.localCache[_]=Y,Y})()}_remove(_){var b=this;return(0,y.Z)(function*(){return b._withPendingWrite((0,y.Z)(function*(){return yield b._withRetries(Y=>Ar(Y,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,y.Z)(function*(){const b=yield _._withRetries(Ve=>{const rt=Ra(Ve,!1).getAll();return new aa(rt).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const Y=[],ce=new Set;for(const{fbase_key:Ve,value:rt}of b)ce.add(Ve),JSON.stringify(_.localCache[Ve])!==JSON.stringify(rt)&&(_.notifyListeners(Ve,rt),Y.push(Ve));for(const Ve of Object.keys(_.localCache))_.localCache[Ve]&&!ce.has(Ve)&&(_.notifyListeners(Ve,null),Y.push(Ve));return Y})()}notifyListeners(_,b){this.localCache[_]=b;const Y=this.listeners[_];if(Y)for(const ce of Array.from(Y))ce(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function ll(C,p){return Ce(C,"POST","/v2/accounts/mfaSignIn:start",tt(C,p))}const qa=1e12;class Ma{constructor(p){this.auth=p,this.counter=qa,this._widgets=new Map}render(p,_){const b=this.counter;return this._widgets.set(b,new Tl(p,this.auth.name,_||{})),this.counter++,b}reset(p){var _;const b=p||qa;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(p){var _;return(null===(_=this._widgets.get(p||qa))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,y.Z)(function*(){var b;return null===(b=_._widgets.get(p||qa))||void 0===b||b.execute(),""})()}}class Tl{constructor(p,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof p?document.getElementById(p):p;Se(Y,"argument-error",{appName:_}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Za(C){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<C;b++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ls=ri("rcb"),Ya=new Ot(3e4,6e4);class Fl{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=vn().grecaptcha)||void 0===p?void 0:p.render)}load(p,_=""){return Se(function ul(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&ln(vn().grecaptcha)?Promise.resolve(vn().grecaptcha):new Promise((b,Y)=>{const ce=vn().setTimeout(()=>{Y(De(p,"network-request-failed"))},Ya.get());vn()[Ls]=()=>{vn().clearTimeout(ce),delete vn()[Ls];const rt=vn().grecaptcha;if(!rt||!ln(rt))return void Y(De(p,"internal-error"));const $t=rt.render;rt.render=(mn,Pn)=>{const Wn=$t(mn,Pn);return this.counter++,Wn},this.hostLanguage=_,b(rt)},yr(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Ls,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ce),Y(De(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!!(null===(_=vn().grecaptcha)||void 0===_?void 0:_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Do{load(p){return(0,y.Z)(function*(){return new Ma(p)})()}clearedOneInstance(){}}const Au="recaptcha",Zl={theme:"light",type:"image"};class Ru{constructor(p,_=Object.assign({},Zl),b){this.parameters=_,this.type=Au,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(b),this.isInvisible="invisible"===this.parameters.size,Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof p?document.getElementById(p):p;Se(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Do:new Fl,this.validateStartingState()}verify(){var p=this;return(0,y.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(_)||new Promise(ce=>{const Ve=rt=>{!rt||(p.tokenChangeListeners.delete(Ve),ce(rt))};p.tokenChangeListeners.add(Ve),p.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof p)p(_);else if("string"==typeof p){const b=vn()[p];"function"==typeof b&&b(_)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,y.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,y.Z)(function*(){Se(En()&&!Wt(),p.auth,"internal-error"),yield function cl(){let C=null;return new Promise(p=>{"complete"!==document.readyState?(C=()=>p(),window.addEventListener("load",C)):p()}).catch(p=>{throw C&&window.removeEventListener("load",C),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Tt(C){return mt.apply(this,arguments)}(p.auth);Se(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xa{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=ns._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function gt(C,p,_){return dl.apply(this,arguments)}function dl(){return(dl=(0,y.Z)(function*(C,p,_){const b=_n(C),Y=yield Ll(b,p,(0,V.m9)(_));return new xa(Y,ce=>F(b,ce))})).apply(this,arguments)}function ro(C,p,_){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C);yield Rs(!1,b,"phone");const Y=yield Ll(b.auth,p,(0,V.m9)(_));return new xa(Y,ce=>Be(b,ce))})).apply(this,arguments)}function Pa(C,p,_){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C),Y=yield Ll(b.auth,p,(0,V.m9)(_));return new xa(Y,ce=>Yr(b,ce))})).apply(this,arguments)}function Ll(C,p,_){return pa.apply(this,arguments)}function pa(){return(pa=(0,y.Z)(function*(C,p,_){var b;const Y=yield _.verify();try{let ce;if(Se("string"==typeof Y,C,"argument-error"),Se(_.type===Au,C,"argument-error"),ce="string"==typeof p?{phoneNumber:p}:p,"session"in ce){const Ve=ce.session;if("phoneNumber"in ce)return Se("enroll"===Ve.type,C,"internal-error"),(yield bo(C,{idToken:Ve.credential,phoneEnrollmentInfo:{phoneNumber:ce.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{Se("signin"===Ve.type,C,"internal-error");const rt=(null===(b=ce.multiFactorHint)||void 0===b?void 0:b.uid)||ce.multiFactorUid;return Se(rt,C,"missing-multi-factor-info"),(yield ll(C,{mfaPendingCredential:Ve.credential,mfaEnrollmentId:rt,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ve}=yield _o(C,{phoneNumber:ce.phoneNumber,recaptchaToken:Y});return Ve}}finally{_._reset()}})).apply(this,arguments)}function ic(C,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,y.Z)(function*(C,p){yield di((0,V.m9)(C),p)})).apply(this,arguments)}let sc=(()=>{class C{constructor(_){this.providerId=C.PROVIDER_ID,this.auth=_n(_)}verifyPhoneNumber(_,b){return Ll(this.auth,_,(0,V.m9)(b))}static credential(_,b){return ns._fromVerification(_,b)}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:Y}=_;return b&&Y?ns._fromTokenResponse(b,Y):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Oa(C,p){return p?ni(p):(Se(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class co extends kt{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return As(p,this._buildIdpRequest())}_linkToIdToken(p,_){return As(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return As(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Vo(C){return q(C.auth,new co(C),C.bypassAuthState)}function ga(C){const{auth:p,user:_}=C;return Se(_,p,"internal-error"),ks(_,new co(C),C.bypassAuthState)}function uu(C){return fs.apply(this,arguments)}function fs(){return(fs=(0,y.Z)(function*(C){const{auth:p,user:_}=C;return Se(_,p,"internal-error"),di(_,new co(C),C.bypassAuthState)})).apply(this,arguments)}class Lu{constructor(p,_,b,Y,ce=!1){this.auth=p,this.resolver=b,this.user=Y,this.bypassAuthState=ce,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,y.Z)(function*(b,Y){p.pendingPromise={resolve:b,reject:Y};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ce){p.reject(ce)}});return function(b,Y){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,y.Z)(function*(){const{urlResponse:b,sessionId:Y,postBody:ce,tenantId:Ve,error:rt,type:$t}=p;if(rt)return void _.reject(rt);const mn={auth:_.auth,requestUri:b,sessionId:Y,tenantId:Ve||void 0,postBody:ce||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask($t)(mn))}catch(Pn){_.reject(Pn)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Vo;case"linkViaPopup":case"linkViaRedirect":return uu;case"reauthViaPopup":case"reauthViaRedirect":return ga;default:at(this.auth,"internal-error")}}resolve(p){Nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vu=new Ot(2e3,1e4);function Ws(C,p,_){return hl.apply(this,arguments)}function hl(){return(hl=(0,y.Z)(function*(C,p,_){const b=_n(C);Ct(C,p,Oi);const Y=Oa(b,_);return new Vs(b,"signInViaPopup",p,Y).executeNotNull()})).apply(this,arguments)}function cu(C,p,_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C);Ct(b.auth,p,Oi);const Y=Oa(b.auth,_);return new Vs(b.auth,"reauthViaPopup",p,Y,b).executeNotNull()})).apply(this,arguments)}function du(C,p,_){return bl.apply(this,arguments)}function bl(){return(bl=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C);Ct(b.auth,p,Oi);const Y=Oa(b.auth,_);return new Vs(b.auth,"linkViaPopup",p,Y,b).executeNotNull()})).apply(this,arguments)}let Vs=(()=>{class C extends Lu{constructor(_,b,Y,ce,Ve){super(_,b,ce,Ve),this.provider=Y,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var _=this;return(0,y.Z)(function*(){const b=yield _.execute();return Se(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,y.Z)(function*(){Nt(1===_.filter.length,"Popup operations only handle one event");const b=Le();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(Y=>{_.reject(Y)}),_.resolver._isIframeWebStorageSupported(_.auth,Y=>{Y||_.reject(De(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,Y;this.pollId=(null===(Y=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===Y?void 0:Y.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Vu.get())};_()}}return C.currentPopupAction=null,C})();const Vl=new Map;class hu extends Lu{constructor(p,_,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,y.Z)(function*(){let b=Vl.get(_.auth._key());if(!b){try{const ce=(yield function fu(C,p){return pu.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;b=()=>Promise.resolve(ce)}catch(Y){b=()=>Promise.reject(Y)}Vl.set(_.auth._key(),b)}return _.bypassAuthState||Vl.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,b=this;return(0,y.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(b,p);if("unknown"!==p.type){if(p.eventId){const Y=yield b.auth._redirectUserForId(p.eventId);if(Y)return b.user=Y,_().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function pu(){return(pu=(0,y.Z)(function*(C,p){const _=Ul(p),b=ju(C);if(!(yield b._isAvailable()))return!1;const Y="true"===(yield b._get(_));return yield b._remove(_),Y})).apply(this,arguments)}function Ql(C,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,y.Z)(function*(C,p){return ju(C)._set(Ul(p),"true")})).apply(this,arguments)}function Bu(){Vl.clear()}function gu(C,p){Vl.set(C._key(),p)}function ju(C){return ni(C._redirectPersistence)}function Ul(C){return Br("pendingRedirect",C.config.apiKey,C.name)}function mu(C,p,_){return function yu(C,p,_){return _u.apply(this,arguments)}(C,p,_)}function _u(){return(_u=(0,y.Z)(function*(C,p,_){const b=_n(C);Ct(C,p,Oi),yield b._initializationPromise;const Y=Oa(b,_);return yield Ql(Y,b),Y._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function fl(C,p,_){return function ma(C,p,_){return Bl.apply(this,arguments)}(C,p,_)}function Bl(){return(Bl=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C);Ct(b.auth,p,Oi),yield b.auth._initializationPromise;const Y=Oa(b.auth,_);yield Ql(Y,b.auth);const ce=yield zs(b);return Y._openRedirect(b.auth,p,"reauthViaRedirect",ce)})).apply(this,arguments)}function Jl(C,p,_){return function is(C,p,_){return Ja.apply(this,arguments)}(C,p,_)}function Ja(){return(Ja=(0,y.Z)(function*(C,p,_){const b=(0,V.m9)(C);Ct(b.auth,p,Oi),yield b.auth._initializationPromise;const Y=Oa(b.auth,_);yield Rs(!1,b,p.providerId),yield Ql(Y,b.auth);const ce=yield zs(b);return Y._openRedirect(b.auth,p,"linkViaRedirect",ce)})).apply(this,arguments)}function ya(C,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,y.Z)(function*(C,p){return yield _n(C)._initializationPromise,ki(C,p,!1)})).apply(this,arguments)}function ki(C,p){return io.apply(this,arguments)}function io(){return(io=(0,y.Z)(function*(C,p,_=!1){const b=_n(C),Y=Oa(b,p),Ve=yield new hu(b,Y,_).execute();return Ve&&!_&&(delete Ve.user._redirectEventId,yield b._persistUserIfCurrent(Ve.user),yield b._setRedirectUser(null,p)),Ve})).apply(this,arguments)}function zs(C){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,y.Z)(function*(C){const p=Le(`${C.uid}:::`);return C._redirectEventId=p,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),p})).apply(this,arguments)}class ka{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(_=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function _a(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vu(C);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var b;if(p.error&&!vu(p)){const Y=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(De(this.auth,Y))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const b=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gi(p))}saveEventToCache(p){this.cachedEventUids.add(Gi(p)),this.lastProcessedEventTime=Date.now()}}function Gi(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(p=>p).join("-")}function vu({type:C,error:p}){return"unknown"===C&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ts(C){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,y.Z)(function*(C,p={}){return Ce(C,"GET","/v1/projects",p)})).apply(this,arguments)}const jl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xs=/^https?/;function va(){return(va=(0,y.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:p}=yield Ts(C);for(const _ of p)try{if(Xl(_))return}catch(b){}at(C,"unauthorized-domain")})).apply(this,arguments)}function Xl(C){const p=Rn(),{protocol:_,hostname:b}=new URL(p);if(C.startsWith("chrome-extension://")){const Ve=new URL(C);return""===Ve.hostname&&""===b?"chrome-extension:"===_&&C.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Ve.hostname===b}if(!xs.test(_))return!1;if(jl.test(C))return b===C;const Y=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(b)}const Ea=new Ot(3e4,6e4);function ho(){const C=vn().___jsl;if(null==C?void 0:C.H)for(const p of Object.keys(C.H))if(C.H[p].r=C.H[p].r||[],C.H[p].L=C.H[p].L||[],C.H[p].r=[...C.H[p].L],C.CP)for(let _=0;_<C.CP.length;_++)C.CP[_]=null}let Po=null;function el(C){return Po=Po||function Jo(C){return new Promise((p,_)=>{var b,Y,ce;function Ve(){ho(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ho(),_(De(C,"network-request-failed"))},timeout:Ea.get()})}if(null===(Y=null===(b=vn().gapi)||void 0===b?void 0:b.iframes)||void 0===Y?void 0:Y.Iframe)p(gapi.iframes.getContext());else{if(!(null===(ce=vn().gapi)||void 0===ce?void 0:ce.load)){const rt=ri("iframefcb");return vn()[rt]=()=>{gapi.load?Ve():_(De(C,"network-request-failed"))},yr(`https://apis.google.com/js/api.js?onload=${rt}`).catch($t=>_($t))}Ve()}}).catch(p=>{throw Po=null,p})}(C),Po}const tl=new Ot(5e3,15e3),Sl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hl(C){const p=C.config;Se(p.authDomain,C,"auth-domain-config-required");const _=p.emulator?or(p,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:C.name,v:ee.SDK_VERSION},Y=xu.get(C.config.apiHost);Y&&(b.eid=Y);const ce=C._getFrameworks();return ce.length&&(b.fw=ce.join(",")),`${_}?${(0,V.xO)(b).slice(1)}`}function tu(){return tu=(0,y.Z)(function*(C){const p=yield el(C),_=vn().gapi;return Se(_,C,"internal-error"),p.open({where:document.body,url:Hl(C),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sl,dontclear:!0},b=>new Promise(function(){var Y=(0,y.Z)(function*(ce,Ve){yield b.restyle({setHideOnLeave:!1});const rt=De(C,"network-request-failed"),$t=vn().setTimeout(()=>{Ve(rt)},tl.get());function mn(){vn().clearTimeout($t),ce(b)}b.ping(mn).then(mn,()=>{Ve(rt)})});return function(ce,Ve){return Y.apply(this,arguments)}}()))}),tu.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ht{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}const Or=encodeURIComponent("fac");function Er(C,p,_,b,Y,ce){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,y.Z)(function*(C,p,_,b,Y,ce){Se(C.config.authDomain,C,"auth-domain-config-required"),Se(C.config.apiKey,C,"invalid-api-key");const Ve={apiKey:C.config.apiKey,appName:C.name,authType:_,redirectUrl:b,v:ee.SDK_VERSION,eventId:Y};if(p instanceof Oi){p.setDefaultLanguage(C.languageCode),Ve.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(Ve.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Pn,Wn]of Object.entries(ce||{}))Ve[Pn]=Wn}if(p instanceof Si){const Pn=p.getScopes().filter(Wn=>""!==Wn);Pn.length>0&&(Ve.scopes=Pn.join(","))}C.tenantId&&(Ve.tid=C.tenantId);const rt=Ve;for(const Pn of Object.keys(rt))void 0===rt[Pn]&&delete rt[Pn];const $t=yield C._getAppCheckToken(),mn=$t?`#${Or}=${encodeURIComponent($t)}`:"";return`${Ks(C)}?${(0,V.xO)(rt).slice(1)}${mn}`})).apply(this,arguments)}function Ks({config:C}){return C.emulator?or(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}const Ti="webStorageSupport",pl=class Xo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q,this._completeRedirectFn=ki,this._overrideRedirectResult=gu}_openPopup(p,_,b,Y){var ce=this;return(0,y.Z)(function*(){var Ve;Nt(null===(Ve=ce.eventManagers[p._key()])||void 0===Ve?void 0:Ve.manager,"_initialize() not called before _openPopup()");const rt=yield Er(p,_,b,Rn(),Y);return function Lt(C,p,_,b=500,Y=600){const ce=Math.max((window.screen.availHeight-Y)/2,0).toString(),Ve=Math.max((window.screen.availWidth-b)/2,0).toString();let rt="";const $t=Object.assign(Object.assign({},A),{width:b.toString(),height:Y.toString(),top:ce,left:Ve}),mn=(0,V.z$)().toLowerCase();_&&(rt=z(mn)?"_blank":_),me(mn)&&(p=p||"http://localhost",$t.scrollbars="yes");const Pn=Object.entries($t).reduce((xr,[ts,Bo])=>`${xr}${ts}=${Bo},`,"");if(function Sn(C=(0,V.z$)()){var p;return Bt(C)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(mn)&&"_self"!==rt)return function Cn(C,p){const _=document.createElement("a");_.href=C,_.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(p||"",rt),new ht(null);const Wn=window.open(p||"",rt,Pn);Se(Wn,C,"popup-blocked");try{Wn.focus()}catch(xr){}return new ht(Wn)}(p,rt,Le())})()}_openRedirect(p,_,b,Y){var ce=this;return(0,y.Z)(function*(){return yield ce._originValidation(p),function Jt(C){vn().location.href=C}(yield Er(p,_,b,Rn(),Y)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:Y,promise:ce}=this.eventManagers[_];return Y?Promise.resolve(Y):(Nt(ce,"If manager is not set, promise should be"),ce)}const b=this.initAndGetManager(p);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(p){var _=this;return(0,y.Z)(function*(){const b=yield function Hu(C){return tu.apply(this,arguments)}(p),Y=new ka(p);return b.register("authEvent",ce=>(Se(null==ce?void 0:ce.authEvent,p,"invalid-auth-event"),{status:Y.onEvent(ce.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:Y},_.iframes[p._key()]=b,Y})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Ti,{type:Ti},Y=>{var ce;const Ve=null===(ce=null==Y?void 0:Y[0])||void 0===ce?void 0:ce[Ti];void 0!==Ve&&_(!!Ve),at(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function bs(C){return va.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return tr()||ye()||Bt()}};class Uo extends class wa{constructor(p){this.factorId=p}_process(p,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,b);case"signin":return this._finalizeSignIn(p,_.credential);default:return Ht("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Uo(p)}_finalizeEnroll(p,_,b){return function Ol(C,p){return Ce(C,"POST","/v2/accounts/mfaEnrollment:finalize",tt(C,p))}(p,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function pi(C,p){return Ce(C,"POST","/v2/accounts/mfaSignIn:finalize",tt(C,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pu=(()=>{class C{constructor(){}static assertion(_){return Uo._fromCredential(_)}}return C.FACTOR_ID="phone",C})();var wu="@firebase/auth";class N{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,y.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(b=>{p((null==b?void 0:b.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,V.Pz)("authIdTokenMaxAge"),function w(C){(0,ee._registerComponent)(new je.wA("auth",(p,{options:_})=>{const b=p.getProvider("app").getImmediate(),Y=p.getProvider("heartbeat"),ce=p.getProvider("app-check-internal"),{apiKey:Ve,authDomain:rt}=b.options;Se(Ve&&!Ve.includes(":"),"invalid-api-key",{appName:b.name});const $t={apiKey:Ve,authDomain:rt,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ci(C)},mn=new Cr(b,Y,ce,$t);return function dr(C,p){const _=(null==p?void 0:p.persistence)||[],b=(Array.isArray(_)?_:[_]).map(ni);(null==p?void 0:p.errorMap)&&C._updateErrorMap(p.errorMap),C._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(mn,_),mn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,b)=>{p.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new je.wA("auth-internal",p=>{const _=_n(p.getProvider("auth").getImmediate());return new N(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(wu,"0.23.2",function E(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,ee.registerVersion)(wu,"0.23.2","esm2017")}("Browser")},1627:(hn,ct,U)=>{U.d(ct,{$o:()=>Xd,AM:()=>nt,Bd:()=>ml,Bt:()=>qg,EW:()=>_p,FQ:()=>Xa,G$:()=>di,HE:()=>ta,IO:()=>yi,JH:()=>E,Jr:()=>ps,Kk:()=>gl,Lx:()=>Cu,MQ:()=>La,N8:()=>Ba,Od:()=>Y,Ot:()=>Jd,R:()=>No,S1:()=>la,Sb:()=>lc,Sl:()=>Ve,TD:()=>nu,TQ:()=>mi,U2:()=>mn,U7:()=>eh,VF:()=>b,Vt:()=>Fa,Vx:()=>$t,Wu:()=>Ds,cy:()=>rt,dH:()=>ac,e0:()=>wr,g2:()=>Ca,i3:()=>Ec,iH:()=>Re,iU:()=>p,jM:()=>ts,mI:()=>io,nP:()=>Us,qT:()=>C,t8:()=>ce,tn:()=>oe,vA:()=>N,vh:()=>ea,wj:()=>Qd,yv:()=>Bo});var y=U(5861),V=U(6881),ee=U(4859),ie=U(2090),ke=U(1877);const je="@firebase/database";let He="";function nt(f){He=f}class Ie{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,ie.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,ie.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class ve{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,ie.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Qe=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const u=window[f];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Ie(u)}}catch(u){}return new ve},St=Qe("localStorage"),vt=Qe("sessionStorage"),_t=new ke.Yd("@firebase/database"),Vt=function(){let f=1;return function(){return f++}}(),dt=function(f){const u=(0,ie.dS)(f),c=new ie.gQ;c.update(u);const v=c.digest();return ie.US.encodeByteArray(v)},ot=function(...f){let u="";for(let c=0;c<f.length;c++){const v=f[c];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?u+=ot.apply(null,v):u+="object"==typeof v?(0,ie.Wl)(v):v,u+=" "}return u};let Ge=null,qt=!0;const at=function(f,u){(0,ie.hu)(!u||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(_t.logLevel=ke.in.VERBOSE,Ge=_t.log.bind(_t),u&&vt.set("logging_enabled",!0)):"function"==typeof f?Ge=f:(Ge=null,vt.remove("logging_enabled"))},De=function(...f){if(!0===qt&&(qt=!1,null===Ge&&!0===vt.get("logging_enabled")&&at(!0)),Ge){const u=ot.apply(null,f);Ge(u)}},Je=function(f){return function(...u){De(f,...u)}},Ct=function(...f){const u="FIREBASE INTERNAL ERROR: "+ot(...f);_t.error(u)},bt=function(...f){const u=`FIREBASE FATAL ERROR: ${ot(...f)}`;throw _t.error(u),new Error(u)},Se=function(...f){const u="FIREBASE WARNING: "+ot(...f);_t.warn(u)},Nt=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},En="[MIN_NAME]",Ln="[MAX_NAME]",un=function(f,u){if(f===u)return 0;if(f===En||u===Ln)return-1;if(u===En||f===Ln)return 1;{const c=Zt(f),v=Zt(u);return null!==c?null!==v?c-v==0?f.length-u.length:c-v:-1:null!==v?1:f<u?-1:1}},sn=function(f,u){return f===u?0:f<u?-1:1},Ot=function(f,u){if(u&&f in u)return u[f];throw new Error("Missing required key ("+f+") in object: "+(0,ie.Wl)(u))},or=function(f){if("object"!=typeof f||null===f)return(0,ie.Wl)(f);const u=[];for(const v in f)u.push(v);u.sort();let c="{";for(let v=0;v<u.length;v++)0!==v&&(c+=","),c+=(0,ie.Wl)(u[v]),c+=":",c+=or(f[u[v]]);return c+="}",c},Mn=function(f,u){const c=f.length;if(c<=u)return[f];const v=[];for(let S=0;S<c;S+=u)v.push(f.substring(S,S+u>c?c:S+u));return v};function cn(f,u){for(const c in f)f.hasOwnProperty(c)&&u(c,f[c])}const it=function(f){(0,ie.hu)(!Nt(f),"Invalid JSON number");const v=1023;let S,B,J,_e,Oe;0===f?(B=0,J=0,S=1/f==-1/0?1:0):(S=f<0,(f=Math.abs(f))>=Math.pow(2,1-v)?(_e=Math.min(Math.floor(Math.log(f)/Math.LN2),v),B=_e+v,J=Math.round(f*Math.pow(2,52-_e)-Math.pow(2,52))):(B=0,J=Math.round(f/Math.pow(2,-1074))));const Ye=[];for(Oe=52;Oe;Oe-=1)Ye.push(J%2?1:0),J=Math.floor(J/2);for(Oe=11;Oe;Oe-=1)Ye.push(B%2?1:0),B=Math.floor(B/2);Ye.push(S?1:0),Ye.reverse();const Mt=Ye.join("");let zt="";for(Oe=0;Oe<64;Oe+=8){let nn=parseInt(Mt.substr(Oe,8),2).toString(16);1===nn.length&&(nn="0"+nn),zt+=nn}return zt.toLowerCase()},Ee=new RegExp("^-?(0*)\\d{1,10}$"),Zt=function(f){if(Ee.test(f)){const u=Number(f);if(u>=-2147483648&&u<=2147483647)return u}return null},pn=function(f){try{f()}catch(u){setTimeout(()=>{throw Se("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},kn=function(f,u){const c=setTimeout(f,u);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class ur{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(v=>this.appCheck=v)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,v)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,v):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(v=>v.addTokenListener(u))}notifyForInvalidToken(){Se(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _r{constructor(u,c,v){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(S=>this.auth_=S)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(De("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,v)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,v):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Se(u)}}let jn=(()=>{class f{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const ti=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ze="websocket",ft="long_polling";class At{constructor(u,c,v,S,B=!1,J="",_e=!1,Oe=!1){this.secure=c,this.namespace=v,this.webSocketOnly=S,this.nodeAdmin=B,this.persistenceKey=J,this.includeNamespaceInQueryParams=_e,this.isUsingEmulator=Oe,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=St.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&St.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function on(f,u,c){let v;if((0,ie.hu)("string"==typeof u,"typeof type must == string"),(0,ie.hu)("object"==typeof c,"typeof params must == object"),u===ze)v=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(u!==ft)throw new Error("Unknown connection type: "+u);v=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function Yt(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(c.ns=f.namespace);const S=[];return cn(c,(B,J)=>{S.push(B+"="+J)}),v+S.join("&")}class Dr{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,ie.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,ie.p$)(this.counters_)}}const Kn={},Un={};function vi(f){const u=f.toString();return Kn[u]||(Kn[u]=new Dr),Kn[u]}class mr{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let S=0;S<v.length;++S)v[S]&&pn(()=>{this.onMessage_(v[S])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class se{constructor(u,c,v,S,B,J,_e){this.connId=u,this.repoInfo=c,this.applicationId=v,this.appCheckToken=S,this.authToken=B,this.transportSessionId=J,this.lastSessionId=_e,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Je(u),this.stats_=vi(c),this.urlFn=Oe=>(this.appCheckToken&&(Oe.ac=this.appCheckToken),on(c,ft,Oe))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new mr(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,ie.Yr)()||"complete"===document.readyState)f();else{let u=!1;const c=function(){document.body?u||(u=!0,f()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xe((...B)=>{const[J,_e,Oe,Ye,Mt]=B;if(this.incrementIncomingBytes_(B),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===J)this.id=_e,this.password=Oe;else{if("close"!==J)throw new Error("Unrecognized command received: "+J);_e?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(_e,()=>{this.onClosed_()})):this.onClosed_()}},(...B)=>{const[J,_e]=B;this.incrementIncomingBytes_(B),this.myPacketOrderer.handleResponse(J,_e)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ti.test(location.hostname)&&(v.r="f");const S=this.urlFn(v);this.log_("Connecting via long-poll to "+S),this.scriptTagHolder.addTag(S,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){se.forceAllow_=!0}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!se.forceAllow_&&(se.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,ie.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const v=(0,ie.h$)(c),S=Mn(v,1840);for(let B=0;B<S.length;B++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[B]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=u,v.pw=c,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,ie.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class xe{constructor(u,c,v,S){if(this.onDisconnect=v,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Vt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=xe.createIFrame_();let B="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(B='<script>document.domain="'+document.domain+'";<\/script>');const J="<html><body>"+B+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(J),this.myIFrame.doc.close()}catch(_e){De("frame writing exception"),_e.stack&&De(_e.stack),De(_e)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||De("No IE domain setting required")}catch(c){const v=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),v="",S=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const J=this.pendingSegs.shift();v=v+"&seg"+S+"="+J.seg+"&ts"+S+"="+J.ts+"&d"+S+"="+J.d,S++}return c+=v,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,v){this.pendingSegs.push({seg:u,ts:c,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const v=()=>{this.outstandingRequests.delete(c),this.newRequest_()},S=setTimeout(v,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(S),v()})}addTag(u,c){(0,ie.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=u,v.onload=v.onreadystatechange=function(){const S=v.readyState;(!S||"loaded"===S||"complete"===S)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),c())},v.onerror=()=>{De("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let an=null;"undefined"!=typeof MozWebSocket?an=MozWebSocket:"undefined"!=typeof WebSocket&&(an=WebSocket);let Sn=(()=>{class f{constructor(c,v,S,B,J,_e,Oe){this.connId=c,this.applicationId=S,this.appCheckToken=B,this.authToken=J,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Je(this.connId),this.stats_=vi(v),this.connURL=f.connectionURL_(v,_e,Oe,B,S),this.nodeAdmin=v.nodeAdmin}static connectionURL_(c,v,S,B,J){const _e={v:"5"};return!(0,ie.Yr)()&&"undefined"!=typeof location&&location.hostname&&ti.test(location.hostname)&&(_e.r="f"),v&&(_e.s=v),S&&(_e.ls=S),B&&(_e.ac=B),J&&(_e.p=J),on(c,ze,_e)}open(c,v){this.onDisconnect=v,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,St.set("previous_websocket_failure",!0);try{let S;if((0,ie.Yr)()){S={headers:{"User-Agent":`Firebase/5/${He}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const J=process.env,_e=0===this.connURL.indexOf("wss://")?J.HTTPS_PROXY||J.https_proxy:J.HTTP_PROXY||J.http_proxy;_e&&(S.proxy={origin:_e})}this.mySock=new an(this.connURL,[],S)}catch(S){this.log_("Error instantiating WebSocket.");const B=S.message||S.data;return B&&this.log_(B),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=S=>{this.handleIncomingFrame(S)},this.mySock.onerror=S=>{this.log_("WebSocket error.  Closing connection.");const B=S.message||S.data;B&&this.log_(B),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const S=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);S&&S.length>1&&parseFloat(S[1])<4.4&&(c=!0)}return!c&&null!==an&&!f.forceDisallow_}static previouslyFailed(){return St.isInMemoryStorage||!0===St.get("previous_websocket_failure")}markConnectionHealthy(){St.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const S=(0,ie.cI)(v);this.onMessage(S)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const v=Number(c);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const v=c.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const S=this.extractFrameCount_(v);null!==S&&this.appendFrame_(S)}}send(c){this.resetKeepAlive();const v=(0,ie.Wl)(c);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const S=Mn(v,16384);S.length>1&&this.sendString_(String(S.length));for(let B=0;B<S.length;B++)this.sendString_(S[B])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),gr=(()=>{class f{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[se,Sn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const v=Sn&&Sn.isAvailable();let S=v&&!Sn.previouslyFailed();if(c.webSocketOnly&&(v||Se("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),S=!0),S)this.transports_=[Sn];else{const B=this.transports_=[];for(const J of f.ALL_TRANSPORTS)J&&J.isAvailable()&&B.push(J);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class gs{constructor(u,c,v,S,B,J,_e,Oe,Ye,Mt){this.id=u,this.repoInfo_=c,this.applicationId_=v,this.appCheckToken_=S,this.authToken_=B,this.onMessage_=J,this.onReady_=_e,this.onDisconnect_=Oe,this.onKill_=Ye,this.lastSessionId=Mt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Je("c:"+this.id+":"),this.transportManager_=new gr(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,v)},Math.floor(0));const S=u.healthyTimeout||0;S>0&&(this.healthyTimeout_=kn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(S)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Ot("t",u),v=Ot("d",u);if("c"===c)this.onSecondaryControl_(v);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Ot("t",u),v=Ot("d",u);"c"===c?this.onControl_(v):"d"===c&&this.onDataMessage_(v)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Ot("t",u);if("d"in u){const v=u.d;if("h"===c){const S=Object.assign({},v);this.repoInfo_.isUsingEmulator&&(S.h=this.repoInfo_.host),this.onHandshake_(S)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(v):"r"===c?this.onReset_(v):"e"===c?Ct("Server Error: "+v):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ct("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,v=u.v,S=u.h;this.sessionId=u.s,this.repoInfo_.host=S,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==v&&Se("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,v),kn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(St.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ps{put(u,c,v,S){}merge(u,c,v,S){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,v){}onDisconnectMerge(u,c,v){}onDisconnectCancel(u,c){}reportStats(u){}}class lr{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,ie.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const v=[...this.listeners_[u]];for(let S=0;S<v.length;S++)v[S].callback.apply(v[S].context,c)}}on(u,c,v){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:v});const S=this.getInitialEvent(u);S&&c.apply(v,S)}off(u,c,v){this.validateEventType_(u);const S=this.listeners_[u]||[];for(let B=0;B<S.length;B++)if(S[B].callback===c&&(!v||v===S[B].context))return void S.splice(B,1)}validateEventType_(u){(0,ie.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class bi extends lr{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bi}getInitialEvent(u){return(0,ie.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Cr{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let v=0;for(let S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[v]=this.pieces_[S],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function _n(){return new Cr("")}function er(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Xi(f){return f.pieces_.length-f.pieceNum_}function dr(f){let u=f.pieceNum_;return u<f.pieces_.length&&u++,new Cr(f.pieces_,u)}function Xr(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Ze(f,u=0){return f.pieces_.slice(f.pieceNum_+u)}function ut(f){if(f.pieceNum_>=f.pieces_.length)return null;const u=[];for(let c=f.pieceNum_;c<f.pieces_.length-1;c++)u.push(f.pieces_[c]);return new Cr(u,0)}function Et(f,u){const c=[];for(let v=f.pieceNum_;v<f.pieces_.length;v++)c.push(f.pieces_[v]);if(u instanceof Cr)for(let v=u.pieceNum_;v<u.pieces_.length;v++)c.push(u.pieces_[v]);else{const v=u.split("/");for(let S=0;S<v.length;S++)v[S].length>0&&c.push(v[S])}return new Cr(c,0)}function kt(f){return f.pieceNum_>=f.pieces_.length}function Dn(f,u){const c=er(f),v=er(u);if(null===c)return u;if(c===v)return Dn(dr(f),dr(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+f+")")}function Ir(f,u){const c=Ze(f,0),v=Ze(u,0);for(let S=0;S<c.length&&S<v.length;S++){const B=un(c[S],v[S]);if(0!==B)return B}return c.length===v.length?0:c.length<v.length?-1:1}function Nn(f,u){if(Xi(f)!==Xi(u))return!1;for(let c=f.pieceNum_,v=u.pieceNum_;c<=f.pieces_.length;c++,v++)if(f.pieces_[c]!==u.pieces_[v])return!1;return!0}function hr(f,u){let c=f.pieceNum_,v=u.pieceNum_;if(Xi(f)>Xi(u))return!1;for(;c<f.pieces_.length;){if(f.pieces_[c]!==u.pieces_[v])return!1;++c,++v}return!0}class Di{constructor(u,c){this.errorPrefix_=c,this.parts_=Ze(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,ie.ug)(this.parts_[v]);ei(this)}}function ei(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ns(f))}function Ns(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class js extends lr{constructor(){let u,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",u="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const v=!document[u];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new js}getInitialEvent(u){return(0,ie.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Ui=1e3;let oo,Os=(()=>{class f extends Ps{constructor(c,v,S,B,J,_e,Oe,Ye){if(super(),this.repoInfo_=c,this.applicationId_=v,this.onDataUpdate_=S,this.onConnectStatus_=B,this.onServerInfoUpdate_=J,this.authTokenProvider_=_e,this.appCheckTokenProvider_=Oe,this.authOverride_=Ye,this.id=f.nextPersistentConnectionId_++,this.log_=Je("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ui,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ye&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");js.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&bi.getInstance().on("online",this.onOnline_,this)}sendRequest(c,v,S){const B=++this.requestNumber_,J={r:B,a:c,b:v};this.log_((0,ie.Wl)(J)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(J),S&&(this.requestCBHash_[B]=S)}get(c){this.initConnection_();const v=new ie.BH,S={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:S,onComplete:_e=>{const Oe=_e.d;"ok"===_e.s?v.resolve(Oe):v.reject(Oe)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(c,v,S,B){this.initConnection_();const J=c._queryIdentifier,_e=c._path.toString();this.log_("Listen called for "+_e+" "+J),this.listens.has(_e)||this.listens.set(_e,new Map),(0,ie.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(_e).has(J),"listen() called twice for same path/queryId.");const Oe={onComplete:B,hashFn:v,query:c,tag:S};this.listens.get(_e).set(J,Oe),this.connected_&&this.sendListen_(Oe)}sendGet_(c){const v=this.outstandingGets_[c];this.sendRequest("g",v.request,S=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(S)})}sendListen_(c){const v=c.query,S=v._path.toString(),B=v._queryIdentifier;this.log_("Listen on "+S+" for "+B);const J={p:S};c.tag&&(J.q=v._queryObject,J.t=c.tag),J.h=c.hashFn(),this.sendRequest("q",J,Oe=>{const Ye=Oe.d,Mt=Oe.s;f.warnOnListenWarnings_(Ye,v),(this.listens.get(S)&&this.listens.get(S).get(B))===c&&(this.log_("listen response",Oe),"ok"!==Mt&&this.removeListen_(S,B),c.onComplete&&c.onComplete(Mt,Ye))})}static warnOnListenWarnings_(c,v){if(c&&"object"==typeof c&&(0,ie.r3)(c,"w")){const S=(0,ie.DV)(c,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){const B='".indexOn": "'+v._queryParams.getIndex().toString()+'"',J=v._path.toString();Se(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${B} at ${J} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,ie.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,v=(0,ie.w9)(c)?"auth":"gauth",S={cred:c};null===this.authOverride_?S.noauth=!0:"object"==typeof this.authOverride_&&(S.authvar=this.authOverride_),this.sendRequest(v,S,B=>{const J=B.s,_e=B.d||"error";this.authToken_===c&&("ok"===J?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(J,_e))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const v=c.s,S=c.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,S)})}unlisten(c,v){const S=c._path.toString(),B=c._queryIdentifier;this.log_("Unlisten called for "+S+" "+B),(0,ie.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,B)&&this.connected_&&this.sendUnlisten_(S,B,c._queryObject,v)}sendUnlisten_(c,v,S,B){this.log_("Unlisten on "+c+" for "+v);const J={p:c};B&&(J.q=S,J.t=B),this.sendRequest("n",J)}onDisconnectPut(c,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,v,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:v,onComplete:S})}onDisconnectMerge(c,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,v,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:v,onComplete:S})}onDisconnectCancel(c,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,v):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(c,v,S,B){const J={p:v,d:S};this.log_("onDisconnect "+c,J),this.sendRequest(c,J,_e=>{B&&setTimeout(()=>{B(_e.s,_e.d)},Math.floor(0))})}put(c,v,S,B){this.putInternal("p",c,v,S,B)}merge(c,v,S,B){this.putInternal("m",c,v,S,B)}putInternal(c,v,S,B,J){this.initConnection_();const _e={p:v,d:S};void 0!==J&&(_e.h=J),this.outstandingPuts_.push({action:c,request:_e,onComplete:B}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(c){const v=this.outstandingPuts_[c].action,S=this.outstandingPuts_[c].request,B=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(v,S,J=>{this.log_(v+" response",J),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),B&&B(J.s,J.d)})}reportStats(c){if(this.connected_){const v={c};this.log_("reportStats",v),this.sendRequest("s",v,S=>{"ok"!==S.s&&this.log_("reportStats","Error sending stats: "+S.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,ie.Wl)(c));const v=c.r,S=this.requestCBHash_[v];S&&(delete this.requestCBHash_[v],S(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,v){this.log_("handleServerMessage",c,v),"d"===c?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===c?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===c?this.onListenRevoked_(v.p,v.q):"ac"===c?this.onAuthRevoked_(v.s,v.d):"apc"===c?this.onAppCheckRevoked_(v.s,v.d):"sd"===c?this.onSecurityDebugPacket_(v):Ct("Unrecognized action received from server: "+(0,ie.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ui),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-c);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,y.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const v=c.onDataMessage_.bind(c),S=c.onReady_.bind(c),B=c.onRealtimeDisconnect_.bind(c),J=c.id+":"+f.nextConnectionId_++,_e=c.lastSessionId;let Oe=!1,Ye=null;const Mt=function(){Ye?Ye.close():(Oe=!0,B())};c.realtime_={close:Mt,sendRequest:function(qn){(0,ie.hu)(Ye,"sendRequest call when we're not connected not allowed."),Ye.sendRequest(qn)}};const nn=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[qn,Rr]=yield Promise.all([c.authTokenProvider_.getToken(nn),c.appCheckTokenProvider_.getToken(nn)]);Oe?De("getToken() completed but was canceled"):(De("getToken() completed. Creating connection."),c.authToken_=qn&&qn.accessToken,c.appCheckToken_=Rr&&Rr.token,Ye=new gs(J,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,v,S,B,Lr=>{Se(Lr+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},_e))}catch(qn){c.log_("Failed to get token: "+qn),Oe||(c.repoInfo_.nodeAdmin&&Se(qn),Mt())}}})()}interrupt(c){De("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){De("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const v=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const v=this.outstandingPuts_[c];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,v){let S;S=v?v.map(J=>or(J)).join("$"):"default";const B=this.removeListen_(c,S);B&&B.onComplete&&B.onComplete("permission_denied")}removeListen_(c,v){const S=new Cr(c).toString();let B;if(this.listens.has(S)){const J=this.listens.get(S);B=J.get(v),J.delete(v),0===J.size&&this.listens.delete(S)}else B=void 0;return B}onAuthRevoked_(c,v){De("Auth token revoked: "+c+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,v){De("App check token revoked: "+c+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const v of c.values())this.sendListen_(v);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let v="js";(0,ie.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+v+"."+He.replace(/\./g,"-")]=1,(0,ie.uI)()?c["framework.cordova"]=1:(0,ie.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=bi.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&c}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class Tr{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new Tr(u,c)}}class Ss{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const v=new Tr(En,u),S=new Tr(En,c);return 0!==this.compare(v,S)}minPost(){return Tr.MIN}}class ra extends Ss{static get __EMPTY_NODE(){return oo}static set __EMPTY_NODE(u){oo=u}compare(u,c){return un(u.name,c.name)}isDefinedOn(u){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return Tr.MIN}maxPost(){return new Tr(Ln,oo)}makePost(u,c){return(0,ie.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new Tr(u,oo)}toString(){return".key"}}const xi=new ra;class As{constructor(u,c,v,S,B=null){this.isReverse_=S,this.resultGenerator_=B,this.nodeStack_=[];let J=1;for(;!u.isEmpty();)if(J=c?v(u.key,c):1,S&&(J*=-1),J<0)u=this.isReverse_?u.left:u.right;else{if(0===J){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let ji,Bi=(()=>{class f{constructor(c,v,S,B,J){this.key=c,this.value=v,this.color=null!=S?S:f.RED,this.left=null!=B?B:qr.EMPTY_NODE,this.right=null!=J?J:qr.EMPTY_NODE}copy(c,v,S,B,J){return new f(null!=c?c:this.key,null!=v?v:this.value,null!=S?S:this.color,null!=B?B:this.left,null!=J?J:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,v,S){let B=this;const J=S(c,B.key);return B=J<0?B.copy(null,null,null,B.left.insert(c,v,S),null):0===J?B.copy(null,v,null,null,null):B.copy(null,null,null,null,B.right.insert(c,v,S)),B.fixUp_()}removeMin_(){if(this.left.isEmpty())return qr.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,v){let S,B;if(S=this,v(c,S.key)<0)!S.left.isEmpty()&&!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),S=S.copy(null,null,null,S.left.remove(c,v),null);else{if(S.left.isRed_()&&(S=S.rotateRight_()),!S.right.isEmpty()&&!S.right.isRed_()&&!S.right.left.isRed_()&&(S=S.moveRedRight_()),0===v(c,S.key)){if(S.right.isEmpty())return qr.EMPTY_NODE;B=S.right.min_(),S=S.copy(B.key,B.value,null,null,S.right.removeMin_())}S=S.copy(null,null,null,null,S.right.remove(c,v))}return S.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,v)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class qr{constructor(u,c=qr.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new qr(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,Bi.BLACK,null,null))}remove(u){return new qr(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,Bi.BLACK,null,null))}get(u){let c,v=this.root_;for(;!v.isEmpty();){if(c=this.comparator_(u,v.key),0===c)return v.value;c<0?v=v.left:c>0&&(v=v.right)}return null}getPredecessorKey(u){let c,v=this.root_,S=null;for(;!v.isEmpty();){if(c=this.comparator_(u,v.key),0===c){if(v.left.isEmpty())return S?S.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}c<0?v=v.left:c>0&&(S=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new As(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new As(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new As(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new As(this.root_,null,this.comparator_,!0,u)}}function _o(f,u){return un(f.name,u.name)}function as(f,u){return un(f,u)}qr.EMPTY_NODE=new class Oo{copy(u,c,v,S,B){return this}insert(u,c,v){return new Bi(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zo=function(f){return"number"==typeof f?"number:"+it(f):"string:"+f},ws=function(f){if(f.isLeafNode()){const u=f.val();(0,ie.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,ie.r3)(u,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(f===ji||f.isEmpty(),"priority of unexpected type.");(0,ie.hu)(f===ji||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Cs,vo,ns,Qs=(()=>{class f{constructor(c,v=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=v,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ws(this.priorityNode_)}static set __childrenNodeConstructor(c){Cs=c}static get __childrenNodeConstructor(){return Cs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new f(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return kt(c)?this:".priority"===er(c)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,v){return null}updateImmediateChild(c,v){return".priority"===c?this.updatePriority(v):v.isEmpty()&&".priority"!==c?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,v).updatePriority(this.priorityNode_)}updateChild(c,v){const S=er(c);return null===S?v:v.isEmpty()&&".priority"!==S?this:((0,ie.hu)(".priority"!==S||1===Xi(c),".priority must be the last token in a path"),this.updateImmediateChild(S,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(dr(c),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,v){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+zo(this.priorityNode_.val())+":");const v=typeof this.value_;c+=v+":",c+="number"===v?it(this.value_):this.value_,this.lazyHash_=dt(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===f.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof f.__childrenNodeConstructor?-1:((0,ie.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const v=typeof c.value_,S=typeof this.value_,B=f.VALUE_TYPE_ORDER.indexOf(v),J=f.VALUE_TYPE_ORDER.indexOf(S);return(0,ie.hu)(B>=0,"Unknown leaf type: "+v),(0,ie.hu)(J>=0,"Unknown leaf type: "+S),B===J?"object"===S?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:J-B}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const v=c;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Zr=new class ls extends Ss{compare(u,c){const v=u.node.getPriority(),S=c.node.getPriority(),B=v.compareTo(S);return 0===B?un(u.name,c.name):B}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return Tr.MIN}maxPost(){return new Tr(Ln,new Qs("[PRIORITY-POST]",ns))}makePost(u,c){const v=vo(u);return new Tr(c,new Qs("[PRIORITY-POST]",v))}toString(){return".priority"}},ii=Math.log(2);class Oi{constructor(u){this.count=parseInt(Math.log(u+1)/ii,10),this.current_=this.count-1;const S=(B=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&S}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Si=function(f,u,c,v){f.sort(u);const S=function(Oe,Ye){const Mt=Ye-Oe;let zt,nn;if(0===Mt)return null;if(1===Mt)return zt=f[Oe],nn=c?c(zt):zt,new Bi(nn,zt.node,Bi.BLACK,null,null);{const qn=parseInt(Mt/2,10)+Oe,Rr=S(Oe,qn),Lr=S(qn+1,Ye);return zt=f[qn],nn=c?c(zt):zt,new Bi(nn,zt.node,Bi.BLACK,Rr,Lr)}},_e=function(Oe){let Ye=null,Mt=null,zt=f.length;const nn=function(Rr,Lr){const Vr=zt-Rr,uc=zt;zt-=Rr;const Bc=S(Vr+1,uc),jc=f[Vr],th=c?c(jc):jc;qn(new Bi(th,jc.node,Lr,null,Bc))},qn=function(Rr){Ye?(Ye.left=Rr,Ye=Rr):(Mt=Rr,Ye=Rr)};for(let Rr=0;Rr<Oe.count;++Rr){const Lr=Oe.nextBitIsOne(),Vr=Math.pow(2,Oe.count-(Rr+1));Lr?nn(Vr,Bi.BLACK):(nn(Vr,Bi.BLACK),nn(Vr,Bi.RED))}return Mt}(new Oi(f.length));return new qr(v||u,_e)};let Pi;const Hs={};class $s{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,ie.hu)(Hs&&Zr,"ChildrenNode.ts has not been loaded"),Pi=Pi||new $s({".priority":Hs},{".priority":Zr}),Pi}get(u){const c=(0,ie.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof qr?c:null}hasIndex(u){return(0,ie.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,ie.hu)(u!==xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let S=!1;const B=c.getIterator(Tr.Wrap);let _e,J=B.getNext();for(;J;)S=S||u.isDefinedOn(J.node),v.push(J),J=B.getNext();_e=S?Si(v,u.getCompare()):Hs;const Oe=u.toString(),Ye=Object.assign({},this.indexSet_);Ye[Oe]=u;const Mt=Object.assign({},this.indexes_);return Mt[Oe]=_e,new $s(Mt,Ye)}addToIndexes(u,c){const v=(0,ie.UI)(this.indexes_,(S,B)=>{const J=(0,ie.DV)(this.indexSet_,B);if((0,ie.hu)(J,"Missing index implementation for "+B),S===Hs){if(J.isDefinedOn(u.node)){const _e=[],Oe=c.getIterator(Tr.Wrap);let Ye=Oe.getNext();for(;Ye;)Ye.name!==u.name&&_e.push(Ye),Ye=Oe.getNext();return _e.push(u),Si(_e,J.getCompare())}return Hs}{const _e=c.get(u.name);let Oe=S;return _e&&(Oe=Oe.remove(new Tr(u.name,_e))),Oe.insert(u,u.node)}});return new $s(v,this.indexSet_)}removeFromIndexes(u,c){const v=(0,ie.UI)(this.indexes_,S=>{if(S===Hs)return S;{const B=c.get(u.name);return B?S.remove(new Tr(u.name,B)):S}});return new $s(v,this.indexSet_)}}let si,L=(()=>{class f{constructor(c,v,S){this.children_=c,this.priorityNode_=v,this.indexMap_=S,this.lazyHash_=null,this.priorityNode_&&ws(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return si||(si=new f(new qr(as),null,$s.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||si}updatePriority(c){return this.children_.isEmpty()?this:new f(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const v=this.children_.get(c);return null===v?si:v}}getChild(c){const v=er(c);return null===v?this:this.getImmediateChild(v).getChild(dr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,v){if((0,ie.hu)(v,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(v);{const S=new Tr(c,v);let B,J;v.isEmpty()?(B=this.children_.remove(c),J=this.indexMap_.removeFromIndexes(S,this.children_)):(B=this.children_.insert(c,v),J=this.indexMap_.addToIndexes(S,this.children_));const _e=B.isEmpty()?si:this.priorityNode_;return new f(B,_e,J)}}updateChild(c,v){const S=er(c);if(null===S)return v;{(0,ie.hu)(".priority"!==er(c)||1===Xi(c),".priority must be the last token in a path");const B=this.getImmediateChild(S).updateChild(dr(c),v);return this.updateImmediateChild(S,B)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const v={};let S=0,B=0,J=!0;if(this.forEachChild(Zr,(_e,Oe)=>{v[_e]=Oe.val(c),S++,J&&f.INTEGER_REGEXP_.test(_e)?B=Math.max(B,Number(_e)):J=!1}),!c&&J&&B<2*S){const _e=[];for(const Oe in v)_e[Oe]=v[Oe];return _e}return c&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+zo(this.getPriority().val())+":"),this.forEachChild(Zr,(v,S)=>{const B=S.hash();""!==B&&(c+=":"+v+":"+B)}),this.lazyHash_=""===c?"":dt(c)}return this.lazyHash_}getPredecessorChildName(c,v,S){const B=this.resolveIndex_(S);if(B){const J=B.getPredecessorKey(new Tr(c,v));return J?J.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const v=this.resolveIndex_(c);if(v){const S=v.minKey();return S&&S.name}return this.children_.minKey()}getFirstChild(c){const v=this.getFirstChildName(c);return v?new Tr(v,this.children_.get(v)):null}getLastChildName(c){const v=this.resolveIndex_(c);if(v){const S=v.maxKey();return S&&S.name}return this.children_.maxKey()}getLastChild(c){const v=this.getLastChildName(c);return v?new Tr(v,this.children_.get(v)):null}forEachChild(c,v){const S=this.resolveIndex_(c);return S?S.inorderTraversal(B=>v(B.name,B.node)):this.children_.inorderTraversal(v)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,v){const S=this.resolveIndex_(v);if(S)return S.getIteratorFrom(c,B=>B);{const B=this.children_.getIteratorFrom(c.name,Tr.Wrap);let J=B.peek();for(;null!=J&&v.compare(J,c)<0;)B.getNext(),J=B.peek();return B}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,v){const S=this.resolveIndex_(v);if(S)return S.getReverseIteratorFrom(c,B=>B);{const B=this.children_.getReverseIteratorFrom(c.name,Tr.Wrap);let J=B.peek();for(;null!=J&&v.compare(J,c)>0;)B.getNext(),J=B.peek();return B}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===$?-1:0}withIndex(c){if(c===xi||this.indexMap_.hasIndex(c))return this;{const v=this.indexMap_.addIndex(c,this.children_);return new f(this.children_,this.priorityNode_,v)}}isIndexed(c){return c===xi||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const v=c;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const S=this.getIterator(Zr),B=v.getIterator(Zr);let J=S.getNext(),_e=B.getNext();for(;J&&_e;){if(J.name!==_e.name||!J.node.equals(_e.node))return!1;J=S.getNext(),_e=B.getNext()}return null===J&&null===_e}return!1}return!1}}resolveIndex_(c){return c===xi?null:this.indexMap_.get(c.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const $=new class le extends L{constructor(){super(new qr(as),L.EMPTY_NODE,$s.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return L.EMPTY_NODE}isEmpty(){return!1}};function Fe(f,u=null){if(null===f)return L.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(u=f[".priority"]),(0,ie.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new Qs(f,Fe(u));if(f instanceof Array){let c=L.EMPTY_NODE;return cn(f,(v,S)=>{if((0,ie.r3)(f,v)&&"."!==v.substring(0,1)){const B=Fe(S);(B.isLeafNode()||!B.isEmpty())&&(c=c.updateImmediateChild(v,B))}}),c.updatePriority(Fe(u))}{const c=[];let v=!1;if(cn(f,(J,_e)=>{if("."!==J.substring(0,1)){const Oe=Fe(_e);Oe.isEmpty()||(v=v||!Oe.getPriority().isEmpty(),c.push(new Tr(J,Oe)))}}),0===c.length)return L.EMPTY_NODE;const B=Si(c,_o,J=>J.name,as);if(v){const J=Si(c,Zr.getCompare());return new L(B,Fe(u),new $s({".priority":J},{".priority":Zr}))}return new L(B,Fe(u),$s.Default)}}Object.defineProperties(Tr,{MIN:{value:new Tr(En,L.EMPTY_NODE)},MAX:{value:new Tr(Ln,$)}}),ra.__EMPTY_NODE=L.EMPTY_NODE,Qs.__childrenNodeConstructor=L,function _s(f){ji=f}($),function Js(f){ns=f}($),function $r(f){vo=f}(Fe);class Pt extends Ss{constructor(u){super(),this.indexPath_=u,(0,ie.hu)(!kt(u)&&".priority"!==er(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const v=this.extractChild(u.node),S=this.extractChild(c.node),B=v.compareTo(S);return 0===B?un(u.name,c.name):B}makePost(u,c){const v=Fe(u),S=L.EMPTY_NODE.updateChild(this.indexPath_,v);return new Tr(c,S)}maxPost(){const u=L.EMPTY_NODE.updateChild(this.indexPath_,$);return new Tr(Ln,u)}toString(){return Ze(this.indexPath_,0).join("/")}}const gn=new class Kt extends Ss{compare(u,c){const v=u.node.compareTo(c.node);return 0===v?un(u.name,c.name):v}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return Tr.MIN}maxPost(){return Tr.MAX}makePost(u,c){const v=Fe(u);return new Tr(c,v)}toString(){return".value"}};function vr(f){return{type:"value",snapshotNode:f}}function br(f,u){return{type:"child_added",snapshotNode:u,childName:f}}function fr(f,u){return{type:"child_removed",snapshotNode:u,childName:f}}function Sr(f,u,c){return{type:"child_changed",snapshotNode:u,childName:f,oldSnap:c}}class _i{constructor(u){this.index_=u}updateChild(u,c,v,S,B,J){(0,ie.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const _e=u.getImmediateChild(c);return _e.getChild(S).equals(v.getChild(S))&&_e.isEmpty()===v.isEmpty()||(null!=J&&(v.isEmpty()?u.hasChild(c)?J.trackChildChange(fr(c,_e)):(0,ie.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):_e.isEmpty()?J.trackChildChange(br(c,v)):J.trackChildChange(Sr(c,v,_e))),u.isLeafNode()&&v.isEmpty())?u:u.updateImmediateChild(c,v).withIndex(this.index_)}updateFullNode(u,c,v){return null!=v&&(u.isLeafNode()||u.forEachChild(Zr,(S,B)=>{c.hasChild(S)||v.trackChildChange(fr(S,B))}),c.isLeafNode()||c.forEachChild(Zr,(S,B)=>{if(u.hasChild(S)){const J=u.getImmediateChild(S);J.equals(B)||v.trackChildChange(Sr(S,B,J))}else v.trackChildChange(br(S,B))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?L.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class li{constructor(u){this.indexedFilter_=new _i(u.getIndex()),this.index_=u.getIndex(),this.startPost_=li.getStartPost_(u),this.endPost_=li.getEndPost_(u),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),u)<=0:this.index_.compare(this.getStartPost(),u)<0,v=this.endIsInclusive_?this.index_.compare(u,this.getEndPost())<=0:this.index_.compare(u,this.getEndPost())<0;return c&&v}updateChild(u,c,v,S,B,J){return this.matches(new Tr(c,v))||(v=L.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,v,S,B,J)}updateFullNode(u,c,v){c.isLeafNode()&&(c=L.EMPTY_NODE);let S=c.withIndex(this.index_);S=S.updatePriority(L.EMPTY_NODE);const B=this;return c.forEachChild(Zr,(J,_e)=>{B.matches(new Tr(J,_e))||(S=S.updateImmediateChild(J,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,S,v)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class ao{constructor(u){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=c=>{const v=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new li(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft(),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}updateChild(u,c,v,S,B,J){return this.rangedFilter_.matches(new Tr(c,v))||(v=L.EMPTY_NODE),u.getImmediateChild(c).equals(v)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,v,S,B,J):this.fullLimitUpdateChild_(u,c,v,B,J)}updateFullNode(u,c,v){let S;if(c.isLeafNode()||c.isEmpty())S=L.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let B;S=L.EMPTY_NODE.withIndex(this.index_),B=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let J=0;for(;B.hasNext()&&J<this.limit_;){const _e=B.getNext();if(this.withinDirectionalStart(_e)){if(!this.withinDirectionalEnd(_e))break;S=S.updateImmediateChild(_e.name,_e.node),J++}}}else{let B;S=c.withIndex(this.index_),S=S.updatePriority(L.EMPTY_NODE),B=this.reverse_?S.getReverseIterator(this.index_):S.getIterator(this.index_);let J=0;for(;B.hasNext();){const _e=B.getNext();J<this.limit_&&this.withinDirectionalStart(_e)&&this.withinDirectionalEnd(_e)?J++:S=S.updateImmediateChild(_e.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,S,v)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,v,S,B){let J;if(this.reverse_){const zt=this.index_.getCompare();J=(nn,qn)=>zt(qn,nn)}else J=this.index_.getCompare();const _e=u;(0,ie.hu)(_e.numChildren()===this.limit_,"");const Oe=new Tr(c,v),Ye=this.reverse_?_e.getFirstChild(this.index_):_e.getLastChild(this.index_),Mt=this.rangedFilter_.matches(Oe);if(_e.hasChild(c)){const zt=_e.getImmediateChild(c);let nn=S.getChildAfterChild(this.index_,Ye,this.reverse_);for(;null!=nn&&(nn.name===c||_e.hasChild(nn.name));)nn=S.getChildAfterChild(this.index_,nn,this.reverse_);const qn=null==nn?1:J(nn,Oe);if(Mt&&!v.isEmpty()&&qn>=0)return null!=B&&B.trackChildChange(Sr(c,v,zt)),_e.updateImmediateChild(c,v);{null!=B&&B.trackChildChange(fr(c,zt));const Lr=_e.updateImmediateChild(c,L.EMPTY_NODE);return null!=nn&&this.rangedFilter_.matches(nn)?(null!=B&&B.trackChildChange(br(nn.name,nn.node)),Lr.updateImmediateChild(nn.name,nn.node)):Lr}}return v.isEmpty()?u:Mt&&J(Ye,Oe)>=0?(null!=B&&(B.trackChildChange(fr(Ye.name,Ye.node)),B.trackChildChange(br(c,v))),_e.updateImmediateChild(c,v).updateImmediateChild(Ye.name,L.EMPTY_NODE)):u}}class di{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:En}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ln}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zr}copy(){const u=new di;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.startAfterSet_=this.startAfterSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.endBeforeSet_=this.endBeforeSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function ks(f,u,c){const v=f.copy();return v.startSet_=!0,void 0===u&&(u=null),v.indexStartValue_=u,null!=c?(v.startNameSet_=!0,v.indexStartName_=c):(v.startNameSet_=!1,v.indexStartName_=""),v}function q(f,u,c){const v=f.copy();return v.endSet_=!0,void 0===u&&(u=null),v.indexEndValue_=u,void 0!==c?(v.endNameSet_=!0,v.indexEndName_=c):(v.endNameSet_=!1,v.indexEndName_=""),v}function F(f,u){const c=f.copy();return c.index_=u,c}function ue(f){const u={};if(f.isDefault())return u;let c;if(f.index_===Zr?c="$priority":f.index_===gn?c="$value":f.index_===xi?c="$key":((0,ie.hu)(f.index_ instanceof Pt,"Unrecognized index type!"),c=f.index_.toString()),u.orderBy=(0,ie.Wl)(c),f.startSet_){const v=f.startAfterSet_?"startAfter":"startAt";u[v]=(0,ie.Wl)(f.indexStartValue_),f.startNameSet_&&(u[v]+=","+(0,ie.Wl)(f.indexStartName_))}if(f.endSet_){const v=f.endBeforeSet_?"endBefore":"endAt";u[v]=(0,ie.Wl)(f.indexEndValue_),f.endNameSet_&&(u[v]+=","+(0,ie.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?u.limitToFirst=f.limit_:u.limitToLast=f.limit_),u}function Be(f){const u={};if(f.startSet_&&(u.sp=f.indexStartValue_,f.startNameSet_&&(u.sn=f.indexStartName_),u.sin=!f.startAfterSet_),f.endSet_&&(u.ep=f.indexEndValue_,f.endNameSet_&&(u.en=f.indexEndName_),u.ein=!f.endBeforeSet_),f.limitSet_){u.l=f.limit_;let c=f.viewFrom_;""===c&&(c=f.isViewFromLeft()?"l":"r"),u.vf=c}return f.index_!==Zr&&(u.i=f.index_.toString()),u}class Xt extends Ps{constructor(u,c,v,S){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=v,this.appCheckTokenProvider_=S,this.log_=Je("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,ie.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,v,S){const B=u._path.toString();this.log_("Listen called for "+B+" "+u._queryIdentifier);const J=Xt.getListenId_(u,v),_e={};this.listens_[J]=_e;const Oe=ue(u._queryParams);this.restRequest_(B+".json",Oe,(Ye,Mt)=>{let zt=Mt;if(404===Ye&&(zt=null,Ye=null),null===Ye&&this.onDataUpdate_(B,zt,!1,v),(0,ie.DV)(this.listens_,J)===_e){let nn;nn=Ye?401===Ye?"permission_denied":"rest_error:"+Ye:"ok",S(nn,null)}})}unlisten(u,c){const v=Xt.getListenId_(u,c);delete this.listens_[v]}get(u){const c=ue(u._queryParams),v=u._path.toString(),S=new ie.BH;return this.restRequest_(v+".json",c,(B,J)=>{let _e=J;404===B&&(_e=null,B=null),null===B?(this.onDataUpdate_(v,_e,!1,null),S.resolve(_e)):S.reject(new Error(_e))}),S.promise}refreshAuthToken(u){}restRequest_(u,c={},v){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([S,B])=>{S&&S.accessToken&&(c.auth=S.accessToken),B&&B.token&&(c.ac=B.token);const J=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(c);this.log_("Sending REST request for "+J);const _e=new XMLHttpRequest;_e.onreadystatechange=()=>{if(v&&4===_e.readyState){this.log_("REST Response for "+J+" received. status:",_e.status,"response:",_e.responseText);let Oe=null;if(_e.status>=200&&_e.status<300){try{Oe=(0,ie.cI)(_e.responseText)}catch(Ye){Se("Failed to parse JSON response for "+J+": "+_e.responseText)}v(null,Oe)}else 401!==_e.status&&404!==_e.status&&Se("Got unsuccessful REST response for "+J+" Status: "+_e.status),v(_e.status);v=null}},_e.open("GET",J,!0),_e.send()})}}class Yr{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function W(){return{value:null,children:new Map}}function K(f,u,c){if(kt(u))f.value=c,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(u,c);else{const v=er(u);f.children.has(v)||f.children.set(v,W()),K(f.children.get(v),u=dr(u),c)}}function pe(f,u){if(kt(u))return f.value=null,f.children.clear(),!0;if(null!==f.value){if(f.value.isLeafNode())return!1;{const c=f.value;return f.value=null,c.forEachChild(Zr,(v,S)=>{K(f,new Cr(v),S)}),pe(f,u)}}if(f.children.size>0){const c=er(u);return u=dr(u),f.children.has(c)&&pe(f.children.get(c),u)&&f.children.delete(c),0===f.children.size}return!0}function be(f,u,c){null!==f.value?c(u,f.value):function Ke(f,u){f.children.forEach((c,v)=>{u(v,c)})}(f,(v,S)=>{be(S,new Cr(u.toString()+"/"+v),c)})}class yt{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&cn(this.last_,(v,S)=>{c[v]=c[v]-S}),this.last_=u,c}}class sr{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new yt(u);const v=1e4+2e4*Math.random();kn(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const u=this.statsListener_.get(),c={};let v=!1;cn(u,(S,B)=>{B>0&&(0,ie.r3)(this.statsToReport_,S)&&(c[S]=B,v=!0)}),v&&this.server_.reportStats(c),kn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Bn=(()=>{return(f=Bn||(Bn={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Bn;var f})();function hi(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class Qr{constructor(u,c,v){this.path=u,this.affectedTree=c,this.revert=v,this.type=Bn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(kt(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Cr(u));return new Qr(_n(),c,this.revert)}}return(0,ie.hu)(er(this.path)===u,"operationForChild called for unrelated child."),new Qr(dr(this.path),this.affectedTree,this.revert)}}class Hi{constructor(u,c){this.source=u,this.path=c,this.type=Bn.LISTEN_COMPLETE}operationForChild(u){return kt(this.path)?new Hi(this.source,_n()):new Hi(this.source,dr(this.path))}}class Jr{constructor(u,c,v){this.source=u,this.path=c,this.snap=v,this.type=Bn.OVERWRITE}operationForChild(u){return kt(this.path)?new Jr(this.source,_n(),this.snap.getImmediateChild(u)):new Jr(this.source,dr(this.path),this.snap)}}class es{constructor(u,c,v){this.source=u,this.path=c,this.children=v,this.type=Bn.MERGE}operationForChild(u){if(kt(this.path)){const c=this.children.subtree(new Cr(u));return c.isEmpty()?null:c.value?new Jr(this.source,_n(),c.value):new es(this.source,_n(),c)}return(0,ie.hu)(er(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new es(this.source,dr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ki{constructor(u,c,v){this.node_=u,this.fullyInitialized_=c,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(kt(u))return this.isFullyInitialized()&&!this.filtered_;const c=er(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class qi{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function Gs(f,u,c,v,S,B){const J=v.filter(_e=>_e.type===c);J.sort((_e,Oe)=>function Fo(f,u,c){if(null==u.childName||null==c.childName)throw(0,ie.g5)("Should only compare child_ events.");const v=new Tr(u.childName,u.snapshotNode),S=new Tr(c.childName,c.snapshotNode);return f.index_.compare(v,S)}(f,_e,Oe)),J.forEach(_e=>{const Oe=function Mo(f,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,f.index_)),u}(f,_e,B);S.forEach(Ye=>{Ye.respondsTo(_e.type)&&u.push(Ye.createEvent(Oe,f.query_))})})}function wo(f,u){return{eventCache:f,serverCache:u}}function Xs(f,u,c,v){return wo(new Ki(u,c,v),f.serverCache)}function us(f,u,c,v){return wo(f.eventCache,new Ki(u,c,v))}function il(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function lo(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let ca;class Ei{constructor(u,c=(()=>(ca||(ca=new qr(sn)),ca))()){this.value=u,this.children=c}static fromObject(u){let c=new Ei(null);return cn(u,(v,S)=>{c=c.set(new Cr(v),S)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:_n(),value:this.value};if(kt(u))return null;{const v=er(u),S=this.children.get(v);if(null!==S){const B=S.findRootMostMatchingPathAndValue(dr(u),c);return null!=B?{path:Et(new Cr(v),B.path),value:B.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(kt(u))return this;{const c=er(u),v=this.children.get(c);return null!==v?v.subtree(dr(u)):new Ei(null)}}set(u,c){if(kt(u))return new Ei(c,this.children);{const v=er(u),B=(this.children.get(v)||new Ei(null)).set(dr(u),c),J=this.children.insert(v,B);return new Ei(this.value,J)}}remove(u){if(kt(u))return this.children.isEmpty()?new Ei(null):new Ei(null,this.children);{const c=er(u),v=this.children.get(c);if(v){const S=v.remove(dr(u));let B;return B=S.isEmpty()?this.children.remove(c):this.children.insert(c,S),null===this.value&&B.isEmpty()?new Ei(null):new Ei(this.value,B)}return this}}get(u){if(kt(u))return this.value;{const c=er(u),v=this.children.get(c);return v?v.get(dr(u)):null}}setTree(u,c){if(kt(u))return c;{const v=er(u),B=(this.children.get(v)||new Ei(null)).setTree(dr(u),c);let J;return J=B.isEmpty()?this.children.remove(v):this.children.insert(v,B),new Ei(this.value,J)}}fold(u){return this.fold_(_n(),u)}fold_(u,c){const v={};return this.children.inorderTraversal((S,B)=>{v[S]=B.fold_(Et(u,S),c)}),c(u,this.value,v)}findOnPath(u,c){return this.findOnPath_(u,_n(),c)}findOnPath_(u,c,v){const S=!!this.value&&v(c,this.value);if(S)return S;if(kt(u))return null;{const B=er(u),J=this.children.get(B);return J?J.findOnPath_(dr(u),Et(c,B),v):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,_n(),c)}foreachOnPath_(u,c,v){if(kt(u))return this;{this.value&&v(c,this.value);const S=er(u),B=this.children.get(S);return B?B.foreachOnPath_(dr(u),Et(c,S),v):new Ei(null)}}foreach(u){this.foreach_(_n(),u)}foreach_(u,c){this.children.inorderTraversal((v,S)=>{S.foreach_(Et(u,v),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,v)=>{v.value&&u(c,v.value)})}}class eo{constructor(u){this.writeTree_=u}static empty(){return new eo(new Ei(null))}}function cs(f,u,c){if(kt(u))return new eo(new Ei(c));{const v=f.writeTree_.findRootMostValueAndPath(u);if(null!=v){const S=v.path;let B=v.value;const J=Dn(S,u);return B=B.updateChild(J,c),new eo(f.writeTree_.set(S,B))}{const S=new Ei(c),B=f.writeTree_.setTree(u,S);return new eo(B)}}}function Is(f,u,c){let v=f;return cn(c,(S,B)=>{v=cs(v,Et(u,S),B)}),v}function Ai(f,u){if(kt(u))return eo.empty();{const c=f.writeTree_.setTree(u,new Ei(null));return new eo(c)}}function da(f,u){return null!=Ia(f,u)}function Ia(f,u){const c=f.writeTree_.findRootMostValueAndPath(u);return null!=c?f.writeTree_.get(c.path).getChild(Dn(c.path,u)):null}function El(f){const u=[],c=f.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Zr,(v,S)=>{u.push(new Tr(v,S))}):f.writeTree_.children.inorderTraversal((v,S)=>{null!=S.value&&u.push(new Tr(v,S.value))}),u}function Co(f,u){if(kt(u))return f;{const c=Ia(f,u);return new eo(null!=c?new Ei(c):f.writeTree_.subtree(u))}}function to(f){return f.writeTree_.isEmpty()}function xo(f,u){return Ta(_n(),f.writeTree_,u)}function Ta(f,u,c){if(null!=u.value)return c.updateChild(f,u.value);{let v=null;return u.children.inorderTraversal((S,B)=>{".priority"===S?((0,ie.hu)(null!==B.value,"Priority writes must always be leaf nodes"),v=B.value):c=Ta(Et(f,S),B,c)}),!c.getChild(f).isEmpty()&&null!==v&&(c=c.updateChild(Et(f,".priority"),v)),c}}function Io(f,u){return Sa(u,f)}function ds(f,u){if(f.snap)return hr(f.path,u);for(const c in f.children)if(f.children.hasOwnProperty(c)&&hr(Et(f.path,c),u))return!0;return!1}function To(f){return f.visible}function Nl(f,u,c){let v=eo.empty();for(let S=0;S<f.length;++S){const B=f[S];if(u(B)){const J=B.path;let _e;if(B.snap)hr(c,J)?(_e=Dn(c,J),v=cs(v,_e,B.snap)):hr(J,c)&&(_e=Dn(J,c),v=cs(v,_n(),B.snap.getChild(_e)));else{if(!B.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(hr(c,J))_e=Dn(c,J),v=Is(v,_e,B.children);else if(hr(J,c))if(_e=Dn(J,c),kt(_e))v=Is(v,_n(),B.children);else{const Oe=(0,ie.DV)(B.children,er(_e));if(Oe){const Ye=Oe.getChild(dr(_e));v=cs(v,_n(),Ye)}}}}}return v}function ba(f,u,c,v,S){if(v||S){const B=Co(f.visibleWrites,u);return!S&&to(B)?c:S||null!=c||da(B,_n())?xo(Nl(f.allWrites,function(Ye){return(Ye.visible||S)&&(!v||!~v.indexOf(Ye.writeId))&&(hr(Ye.path,u)||hr(u,Ye.path))},u),c||L.EMPTY_NODE):null}{const B=Ia(f.visibleWrites,u);if(null!=B)return B;{const J=Co(f.visibleWrites,u);return to(J)?c:null!=c||da(J,_n())?xo(J,c||L.EMPTY_NODE):null}}}function qo(f,u,c,v){return ba(f.writeTree,f.treePath,u,c,v)}function Zo(f,u){return function Da(f,u,c){let v=L.EMPTY_NODE;const S=Ia(f.visibleWrites,u);if(S)return S.isLeafNode()||S.forEachChild(Zr,(B,J)=>{v=v.updateImmediateChild(B,J)}),v;if(c){const B=Co(f.visibleWrites,u);return c.forEachChild(Zr,(J,_e)=>{const Oe=xo(Co(B,new Cr(J)),_e);v=v.updateImmediateChild(J,Oe)}),El(B).forEach(J=>{v=v.updateImmediateChild(J.name,J.node)}),v}return El(Co(f.visibleWrites,u)).forEach(J=>{v=v.updateImmediateChild(J.name,J.node)}),v}(f.writeTree,f.treePath,u)}function Fs(f,u,c,v){return function Wa(f,u,c,v,S){(0,ie.hu)(v||S,"Either existingEventSnap or existingServerSnap must exist");const B=Et(u,c);if(da(f.visibleWrites,B))return null;{const J=Co(f.visibleWrites,B);return to(J)?S.getChild(c):xo(J,S.getChild(c))}}(f.writeTree,f.treePath,u,c,v)}function vs(f,u){return function Ko(f,u){return Ia(f.visibleWrites,u)}(f.writeTree,Et(f.treePath,u))}function bo(f,u,c){return function au(f,u,c,v){const S=Et(u,c),B=Ia(f.visibleWrites,S);return null!=B?B:v.isCompleteForChild(c)?xo(Co(f.visibleWrites,S),v.getNode().getImmediateChild(c)):null}(f.writeTree,f.treePath,u,c)}function Ol(f,u){return Sa(Et(f.treePath,u),f.writeTree)}function Sa(f,u){return{treePath:f,writeTree:u}}class za{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,v=u.childName;(0,ie.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const S=this.changeMap.get(v);if(S){const B=S.type;if("child_added"===c&&"child_removed"===B)this.changeMap.set(v,Sr(v,u.snapshotNode,S.snapshotNode));else if("child_removed"===c&&"child_added"===B)this.changeMap.delete(v);else if("child_removed"===c&&"child_changed"===B)this.changeMap.set(v,fr(v,S.oldSnap));else if("child_changed"===c&&"child_added"===B)this.changeMap.set(v,br(v,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==B)throw(0,ie.g5)("Illegal combination of changes: "+u+" occurred after "+S);this.changeMap.set(v,Sr(v,u.snapshotNode,S.oldSnap))}}else this.changeMap.set(v,u)}getChanges(){return Array.from(this.changeMap.values())}}const ol=new class wl{getCompleteChild(u){return null}getChildAfterChild(u,c,v){return null}};class Yo{constructor(u,c,v=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=v}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const v=null!=this.optCompleteServerCache_?new Ki(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bo(this.writes_,u,v)}}getChildAfterChild(u,c,v){const S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lo(this.viewCache_),B=function sa(f,u,c,v,S,B){return function Lo(f,u,c,v,S,B,J){let _e;const Oe=Co(f.visibleWrites,u),Ye=Ia(Oe,_n());if(null!=Ye)_e=Ye;else{if(null==c)return[];_e=xo(Oe,c)}if(_e=_e.withIndex(J),_e.isEmpty()||_e.isLeafNode())return[];{const Mt=[],zt=J.getCompare(),nn=B?_e.getReverseIteratorFrom(v,J):_e.getIteratorFrom(v,J);let qn=nn.getNext();for(;qn&&Mt.length<S;)0!==zt(qn,v)&&Mt.push(qn),qn=nn.getNext();return Mt}}(f.writeTree,f.treePath,u,c,v,S,B)}(this.writes_,S,c,1,v,u);return 0===B.length?null:B[0]}}function Aa(f,u,c,v,S,B){const J=u.eventCache;if(null!=vs(v,c))return u;{let _e,Oe;if(kt(c))if((0,ie.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ye=lo(u),zt=Zo(v,Ye instanceof L?Ye:L.EMPTY_NODE);_e=f.filter.updateFullNode(u.eventCache.getNode(),zt,B)}else{const Ye=qo(v,lo(u));_e=f.filter.updateFullNode(u.eventCache.getNode(),Ye,B)}else{const Ye=er(c);if(".priority"===Ye){(0,ie.hu)(1===Xi(c),"Can't have a priority with additional path components");const Mt=J.getNode();Oe=u.serverCache.getNode();const zt=Fs(v,c,Mt,Oe);_e=null!=zt?f.filter.updatePriority(Mt,zt):J.getNode()}else{const Mt=dr(c);let zt;if(J.isCompleteForChild(Ye)){Oe=u.serverCache.getNode();const nn=Fs(v,c,J.getNode(),Oe);zt=null!=nn?J.getNode().getImmediateChild(Ye).updateChild(Mt,nn):J.getNode().getImmediateChild(Ye)}else zt=bo(v,Ye,u.serverCache);_e=null!=zt?f.filter.updateChild(J.getNode(),Ye,zt,Mt,S,B):J.getNode()}}return Xs(u,_e,J.isFullyInitialized()||kt(c),f.filter.filtersNodes())}}function P(f,u,c,v,S,B,J,_e){const Oe=u.serverCache;let Ye;const Mt=J?f.filter:f.filter.getIndexedFilter();if(kt(c))Ye=Mt.updateFullNode(Oe.getNode(),v,null);else if(Mt.filtersNodes()&&!Oe.isFiltered()){const qn=Oe.getNode().updateChild(c,v);Ye=Mt.updateFullNode(Oe.getNode(),qn,null)}else{const qn=er(c);if(!Oe.isCompleteForPath(c)&&Xi(c)>1)return u;const Rr=dr(c),Vr=Oe.getNode().getImmediateChild(qn).updateChild(Rr,v);Ye=".priority"===qn?Mt.updatePriority(Oe.getNode(),Vr):Mt.updateChild(Oe.getNode(),qn,Vr,Rr,ol,null)}const zt=us(u,Ye,Oe.isFullyInitialized()||kt(c),Mt.filtersNodes());return Aa(f,zt,c,S,new Yo(S,zt,B),_e)}function D(f,u,c,v,S,B,J){const _e=u.eventCache;let Oe,Ye;const Mt=new Yo(S,u,B);if(kt(c))Ye=f.filter.updateFullNode(u.eventCache.getNode(),v,J),Oe=Xs(u,Ye,!0,f.filter.filtersNodes());else{const zt=er(c);if(".priority"===zt)Ye=f.filter.updatePriority(u.eventCache.getNode(),v),Oe=Xs(u,Ye,_e.isFullyInitialized(),_e.isFiltered());else{const nn=dr(c),qn=_e.getNode().getImmediateChild(zt);let Rr;if(kt(nn))Rr=v;else{const Lr=Mt.getCompleteChild(zt);Rr=null!=Lr?".priority"===Xr(nn)&&Lr.getChild(ut(nn)).isEmpty()?Lr:Lr.updateChild(nn,v):L.EMPTY_NODE}Oe=qn.equals(Rr)?u:Xs(u,f.filter.updateChild(_e.getNode(),zt,Rr,nn,Mt,J),_e.isFullyInitialized(),f.filter.filtersNodes())}}return Oe}function T(f,u){return f.eventCache.isCompleteForChild(u)}function Q(f,u,c){return c.foreach((v,S)=>{u=u.updateChild(v,S)}),u}function de(f,u,c,v,S,B,J,_e){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ye,Oe=u;Ye=kt(c)?v:new Ei(null).setTree(c,v);const Mt=u.serverCache.getNode();return Ye.children.inorderTraversal((zt,nn)=>{if(Mt.hasChild(zt)){const Rr=Q(0,u.serverCache.getNode().getImmediateChild(zt),nn);Oe=P(f,Oe,new Cr(zt),Rr,S,B,J,_e)}}),Ye.children.inorderTraversal((zt,nn)=>{const qn=!u.serverCache.isCompleteForChild(zt)&&null===nn.value;if(!Mt.hasChild(zt)&&!qn){const Lr=Q(0,u.serverCache.getNode().getImmediateChild(zt),nn);Oe=P(f,Oe,new Cr(zt),Lr,S,B,J,_e)}}),Oe}class vn{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const v=this.query_._queryParams,S=new _i(v.getIndex()),B=function ir(f){return f.loadsAllData()?new _i(f.getIndex()):f.hasLimit()?new ao(f):new li(f)}(v);this.processor_=function zl(f){return{filter:f}}(B);const J=c.serverCache,_e=c.eventCache,Oe=S.updateFullNode(L.EMPTY_NODE,J.getNode(),null),Ye=B.updateFullNode(L.EMPTY_NODE,_e.getNode(),null),Mt=new Ki(Oe,J.isFullyInitialized(),S.filtersNodes()),zt=new Ki(Ye,_e.isFullyInitialized(),B.filtersNodes());this.viewCache_=wo(zt,Mt),this.eventGenerator_=new qi(this.query_)}get query(){return this.query_}}function Ri(f,u){const c=lo(f.viewCache_);return c&&(f.query._queryParams.loadsAllData()||!kt(u)&&!c.getImmediateChild(er(u)).isEmpty())?c.getChild(u):null}function tn(f){return 0===f.eventRegistrations_.length}function jt(f,u,c){const v=[];if(c){(0,ie.hu)(null==u,"A cancel should cancel all event registrations.");const S=f.query._path;f.eventRegistrations_.forEach(B=>{const J=B.createCancelEvent(c,S);J&&v.push(J)})}if(u){let S=[];for(let B=0;B<f.eventRegistrations_.length;++B){const J=f.eventRegistrations_[B];if(J.matches(u)){if(u.hasAnyCallback()){S=S.concat(f.eventRegistrations_.slice(B+1));break}}else S.push(J)}f.eventRegistrations_=S}else f.eventRegistrations_=[];return v}function Fr(f,u,c,v){u.type===Bn.MERGE&&null!==u.source.queryId&&((0,ie.hu)(lo(f.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(il(f.viewCache_),"Missing event cache, even though we have a server cache"));const S=f.viewCache_,B=function Kl(f,u,c,v,S){const B=new za;let J,_e;if(c.type===Bn.OVERWRITE){const Ye=c;Ye.source.fromUser?J=D(f,u,Ye.path,Ye.snap,v,S,B):((0,ie.hu)(Ye.source.fromServer,"Unknown source."),_e=Ye.source.tagged||u.serverCache.isFiltered()&&!kt(Ye.path),J=P(f,u,Ye.path,Ye.snap,v,S,_e,B))}else if(c.type===Bn.MERGE){const Ye=c;Ye.source.fromUser?J=function H(f,u,c,v,S,B,J){let _e=u;return v.foreach((Oe,Ye)=>{const Mt=Et(c,Oe);T(u,er(Mt))&&(_e=D(f,_e,Mt,Ye,S,B,J))}),v.foreach((Oe,Ye)=>{const Mt=Et(c,Oe);T(u,er(Mt))||(_e=D(f,_e,Mt,Ye,S,B,J))}),_e}(f,u,Ye.path,Ye.children,v,S,B):((0,ie.hu)(Ye.source.fromServer,"Unknown source."),_e=Ye.source.tagged||u.serverCache.isFiltered(),J=de(f,u,Ye.path,Ye.children,v,S,_e,B))}else if(c.type===Bn.ACK_USER_WRITE){const Ye=c;J=Ye.revert?function Ft(f,u,c,v,S,B){let J;if(null!=vs(v,c))return u;{const _e=new Yo(v,u,S),Oe=u.eventCache.getNode();let Ye;if(kt(c)||".priority"===er(c)){let Mt;if(u.serverCache.isFullyInitialized())Mt=qo(v,lo(u));else{const zt=u.serverCache.getNode();(0,ie.hu)(zt instanceof L,"serverChildren would be complete if leaf node"),Mt=Zo(v,zt)}Ye=f.filter.updateFullNode(Oe,Mt,B)}else{const Mt=er(c);let zt=bo(v,Mt,u.serverCache);null==zt&&u.serverCache.isCompleteForChild(Mt)&&(zt=Oe.getImmediateChild(Mt)),Ye=null!=zt?f.filter.updateChild(Oe,Mt,zt,dr(c),_e,B):u.eventCache.getNode().hasChild(Mt)?f.filter.updateChild(Oe,Mt,L.EMPTY_NODE,dr(c),_e,B):Oe,Ye.isEmpty()&&u.serverCache.isFullyInitialized()&&(J=qo(v,lo(u)),J.isLeafNode()&&(Ye=f.filter.updateFullNode(Ye,J,B)))}return J=u.serverCache.isFullyInitialized()||null!=vs(v,_n()),Xs(u,Ye,J,f.filter.filtersNodes())}}(f,u,Ye.path,v,S,B):function fe(f,u,c,v,S,B,J){if(null!=vs(S,c))return u;const _e=u.serverCache.isFiltered(),Oe=u.serverCache;if(null!=v.value){if(kt(c)&&Oe.isFullyInitialized()||Oe.isCompleteForPath(c))return P(f,u,c,Oe.getNode().getChild(c),S,B,_e,J);if(kt(c)){let Ye=new Ei(null);return Oe.getNode().forEachChild(xi,(Mt,zt)=>{Ye=Ye.set(new Cr(Mt),zt)}),de(f,u,c,Ye,S,B,_e,J)}return u}{let Ye=new Ei(null);return v.foreach((Mt,zt)=>{const nn=Et(c,Mt);Oe.isCompleteForPath(nn)&&(Ye=Ye.set(Mt,Oe.getNode().getChild(nn)))}),de(f,u,c,Ye,S,B,_e,J)}}(f,u,Ye.path,Ye.affectedTree,v,S,B)}else{if(c.type!==Bn.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+c.type);J=function Le(f,u,c,v,S){const B=u.serverCache;return Aa(f,us(u,B.getNode(),B.isFullyInitialized()||kt(c),B.isFiltered()),c,v,ol,S)}(f,u,c.path,v,B)}const Oe=B.getChanges();return function al(f,u,c){const v=u.eventCache;if(v.isFullyInitialized()){const S=v.getNode().isLeafNode()||v.getNode().isEmpty(),B=il(f);(c.length>0||!f.eventCache.isFullyInitialized()||S&&!v.getNode().equals(B)||!v.getNode().getPriority().equals(B.getPriority()))&&c.push(vr(il(u)))}}(u,J,Oe),{viewCache:J,changes:Oe}}(f.processor_,S,u,c,v);return function oa(f,u){(0,ie.hu)(u.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(u.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,B.viewCache),(0,ie.hu)(B.viewCache.serverCache.isFullyInitialized()||!S.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=B.viewCache,Zi(f,B.changes,B.viewCache.eventCache.getNode(),null)}function Zi(f,u,c,v){return function Ni(f,u,c,v){const S=[],B=[];return u.forEach(J=>{"child_changed"===J.type&&f.index_.indexedValueChanged(J.oldSnap,J.snapshotNode)&&B.push(function wi(f,u){return{type:"child_moved",snapshotNode:u,childName:f}}(J.childName,J.snapshotNode))}),Gs(f,S,"child_removed",u,v,c),Gs(f,S,"child_added",u,v,c),Gs(f,S,"child_moved",B,v,c),Gs(f,S,"child_changed",u,v,c),Gs(f,S,"value",u,v,c),S}(f.eventGenerator_,u,c,v?[v]:f.eventRegistrations_)}let ha,pi;class aa{constructor(){this.views=new Map}}function Ka(f,u,c,v){const S=u.source.queryId;if(null!==S){const B=f.views.get(S);return(0,ie.hu)(null!=B,"SyncTree gave us an op for an invalid query."),Fr(B,u,c,v)}{let B=[];for(const J of f.views.values())B=B.concat(Fr(J,u,c,v));return B}}function lu(f,u,c,v,S){const J=f.views.get(u._queryIdentifier);if(!J){let _e=qo(c,S?v:null),Oe=!1;_e?Oe=!0:v instanceof L?(_e=Zo(c,v),Oe=!1):(_e=L.EMPTY_NODE,Oe=!1);const Ye=wo(new Ki(_e,Oe,!1),new Ki(v,S,!1));return new vn(u,Ye)}return J}function Ar(f){const u=[];for(const c of f.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function fa(f,u){let c=null;for(const v of f.views.values())c=c||Ri(v,u);return c}function rc(f,u){return u._queryParams.loadsAllData()?ll(f):f.views.get(u._queryIdentifier)}function hs(f,u){return null!=rc(f,u)}function Gn(f){return null!=ll(f)}function ll(f){for(const u of f.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let fn=1;class qa{constructor(u){this.listenProvider_=u,this.syncPointTree_=new Ei(null),this.pendingWriteTree_=function $i(){return{visibleWrites:eo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ma(f,u,c,v,S){return function rs(f,u,c,v,S){(0,ie.hu)(v>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),f.allWrites.push({path:u,snap:c,writeId:v,visible:S}),S&&(f.visibleWrites=cs(f.visibleWrites,u,c)),f.lastWriteId=v}(f.pendingWriteTree_,u,c,v,S),S?xa(f,new Jr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function Za(f,u,c=!1){const v=function sl(f,u){for(let c=0;c<f.allWrites.length;c++){const v=f.allWrites[c];if(v.writeId===u)return v}return null}(f.pendingWriteTree_,u);if(function fi(f,u){const c=f.allWrites.findIndex(_e=>_e.writeId===u);(0,ie.hu)(c>=0,"removeWrite called with nonexistent writeId.");const v=f.allWrites[c];f.allWrites.splice(c,1);let S=v.visible,B=!1,J=f.allWrites.length-1;for(;S&&J>=0;){const _e=f.allWrites[J];_e.visible&&(J>=c&&ds(_e,v.path)?S=!1:hr(v.path,_e.path)&&(B=!0)),J--}return!!S&&(B?(function uo(f){f.visibleWrites=Nl(f.allWrites,To,_n()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(v.snap?f.visibleWrites=Ai(f.visibleWrites,v.path):cn(v.children,Oe=>{f.visibleWrites=Ai(f.visibleWrites,Et(v.path,Oe))}),!0))}(f.pendingWriteTree_,u)){let B=new Ei(null);return null!=v.snap?B=B.set(_n(),!0):cn(v.children,J=>{B=B.set(new Cr(J),!0)}),xa(f,new Qr(v.path,B,c))}return[]}function Ls(f,u,c){return xa(f,new Jr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function ul(f,u,c,v,S=!1){const B=u._path,J=f.syncPointTree_.get(B);let _e=[];if(J&&("default"===u._queryIdentifier||hs(J,u))){const Oe=function Yi(f,u,c,v){const S=u._queryIdentifier,B=[];let J=[];const _e=Gn(f);if("default"===S)for(const[Oe,Ye]of f.views.entries())J=J.concat(jt(Ye,c,v)),tn(Ye)&&(f.views.delete(Oe),Ye.query._queryParams.loadsAllData()||B.push(Ye.query));else{const Oe=f.views.get(S);Oe&&(J=J.concat(jt(Oe,c,v)),tn(Oe)&&(f.views.delete(S),Oe.query._queryParams.loadsAllData()||B.push(Oe.query)))}return _e&&!Gn(f)&&B.push(new(function Fu(){return(0,ie.hu)(ha,"Reference.ts has not been loaded"),ha}())(u._repo,u._path)),{removed:B,events:J}}(J,u,c,v);(function kl(f){return 0===f.views.size})(J)&&(f.syncPointTree_=f.syncPointTree_.remove(B));const Ye=Oe.removed;if(_e=Oe.events,!S){const Mt=-1!==Ye.findIndex(nn=>nn._queryParams.loadsAllData()),zt=f.syncPointTree_.findOnPath(B,(nn,qn)=>Gn(qn));if(Mt&&!zt){const nn=f.syncPointTree_.subtree(B);if(!nn.isEmpty()){const qn=function ic(f){return f.fold((u,c,v)=>{if(c&&Gn(c))return[ll(c)];{let S=[];return c&&(S=Ar(c)),cn(v,(B,J)=>{S=S.concat(J)}),S}})}(nn);for(let Rr=0;Rr<qn.length;++Rr){const Lr=qn[Rr],Vr=Lr.query,uc=ro(f,Lr);f.listenProvider_.startListening(Na(Vr),Yl(f,Vr),uc.hashFn,uc.onComplete)}}}!zt&&Ye.length>0&&!v&&(Mt?f.listenProvider_.stopListening(Na(u),null):Ye.forEach(nn=>{const qn=f.queryToTagMap.get(Pa(nn));f.listenProvider_.stopListening(Na(nn),qn)}))}!function sc(f,u){for(let c=0;c<u.length;++c){const v=u[c];if(!v._queryParams.loadsAllData()){const S=Pa(v),B=f.queryToTagMap.get(S);f.queryToTagMap.delete(S),f.tagToQueryMap.delete(B)}}}(f,Ye)}return _e}function Do(f,u,c,v){const S=Qo(f,v);if(null!=S){const B=Ll(S),J=B.path,_e=B.queryId,Oe=Dn(J,u);return pa(f,J,new Jr(hi(_e),Oe,c))}return[]}function Zl(f,u,c,v=!1){const S=u._path;let B=null,J=!1;f.syncPointTree_.foreachOnPath(S,(nn,qn)=>{const Rr=Dn(nn,S);B=B||fa(qn,Rr),J=J||Gn(qn)});let Oe,_e=f.syncPointTree_.get(S);_e?(J=J||Gn(_e),B=B||fa(_e,_n())):(_e=new aa,f.syncPointTree_=f.syncPointTree_.set(S,_e)),null!=B?Oe=!0:(Oe=!1,B=L.EMPTY_NODE,f.syncPointTree_.subtree(S).foreachChild((qn,Rr)=>{const Lr=fa(Rr,_n());Lr&&(B=B.updateImmediateChild(qn,Lr))}));const Ye=hs(_e,u);if(!Ye&&!u._queryParams.loadsAllData()){const nn=Pa(u);(0,ie.hu)(!f.queryToTagMap.has(nn),"View does not exist, but we have a tag");const qn=function Oa(){return fn++}();f.queryToTagMap.set(nn,qn),f.tagToQueryMap.set(qn,nn)}let zt=function nc(f,u,c,v,S,B){const J=lu(f,u,v,S,B);return f.views.has(u._queryIdentifier)||f.views.set(u._queryIdentifier,J),function Dt(f,u){f.eventRegistrations_.push(u)}(J,c),function Cl(f,u){const c=f.viewCache_.eventCache,v=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Zr,(B,J)=>{v.push(br(B,J))}),c.isFullyInitialized()&&v.push(vr(c.getNode())),Zi(f,v,c.getNode(),u)}(J,c)}(_e,u,c,Io(f.pendingWriteTree_,S),B,Oe);if(!Ye&&!J&&!v){const nn=rc(_e,u);zt=zt.concat(function co(f,u,c){const v=u._path,S=Yl(f,u),B=ro(f,c),J=f.listenProvider_.startListening(Na(u),S,B.hashFn,B.onComplete),_e=f.syncPointTree_.subtree(v);if(S)(0,ie.hu)(!Gn(_e.value),"If we're adding a query, it shouldn't be shadowed");else{const Oe=_e.fold((Ye,Mt,zt)=>{if(!kt(Ye)&&Mt&&Gn(Mt))return[ll(Mt).query];{let nn=[];return Mt&&(nn=nn.concat(Ar(Mt).map(qn=>qn.query))),cn(zt,(qn,Rr)=>{nn=nn.concat(Rr)}),nn}});for(let Ye=0;Ye<Oe.length;++Ye){const Mt=Oe[Ye];f.listenProvider_.stopListening(Na(Mt),Yl(f,Mt))}}return J}(f,u,nn))}return zt}function Ru(f,u,c){const S=f.pendingWriteTree_,B=f.syncPointTree_.findOnPath(u,(J,_e)=>{const Ye=fa(_e,Dn(J,u));if(Ye)return Ye});return ba(S,u,B,c,!0)}function xa(f,u){return gt(u,f.syncPointTree_,null,Io(f.pendingWriteTree_,_n()))}function gt(f,u,c,v){if(kt(f.path))return dl(f,u,c,v);{const S=u.get(_n());null==c&&null!=S&&(c=fa(S,_n()));let B=[];const J=er(f.path),_e=f.operationForChild(J),Oe=u.children.get(J);if(Oe&&_e){const Ye=c?c.getImmediateChild(J):null,Mt=Ol(v,J);B=B.concat(gt(_e,Oe,Ye,Mt))}return S&&(B=B.concat(Ka(S,f,v,c))),B}}function dl(f,u,c,v){const S=u.get(_n());null==c&&null!=S&&(c=fa(S,_n()));let B=[];return u.children.inorderTraversal((J,_e)=>{const Oe=c?c.getImmediateChild(J):null,Ye=Ol(v,J),Mt=f.operationForChild(J);Mt&&(B=B.concat(dl(Mt,_e,Oe,Ye)))}),S&&(B=B.concat(Ka(S,f,v,c))),B}function ro(f,u){const c=u.query,v=Yl(f,c);return{hashFn:()=>(function Jt(f){return f.viewCache_.serverCache.getNode()}(u)||L.EMPTY_NODE).hash(),onComplete:S=>{if("ok"===S)return v?function Fl(f,u,c){const v=Qo(f,c);if(v){const S=Ll(v),B=S.path,J=S.queryId,_e=Dn(B,u);return pa(f,B,new Hi(hi(J),_e))}return[]}(f,c._path,v):function ql(f,u){return xa(f,new Hi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(f,c._path);{const B=function Me(f,u){let c="Unknown Error";"too_big"===f?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?c="Client doesn't have permission to access the desired data.":"unavailable"===f&&(c="The service is unavailable");const v=new Error(f+" at "+u._path.toString()+": "+c);return v.code=f.toUpperCase(),v}(S,c);return ul(f,c,null,B)}}}}function Yl(f,u){const c=Pa(u);return f.queryToTagMap.get(c)}function Pa(f){return f._path.toString()+"$"+f._queryIdentifier}function Qo(f,u){return f.tagToQueryMap.get(u)}function Ll(f){const u=f.indexOf("$");return(0,ie.hu)(-1!==u&&u<f.length-1,"Bad queryKey."),{queryId:f.substr(u+1),path:new Cr(f.substr(0,u))}}function pa(f,u,c){const v=f.syncPointTree_.get(u);return(0,ie.hu)(v,"Missing sync point for query tag that we're tracking"),Ka(v,c,Io(f.pendingWriteTree_,u),null)}function Na(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function Ms(){return(0,ie.hu)(pi,"Reference.ts has not been loaded"),pi}())(f._repo,f._path):f}class Vo{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new Vo(c)}node(){return this.node_}}class ga{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=Et(this.path_,u);return new ga(this.syncTree_,c)}node(){return Ru(this.syncTree_,this.path_)}}const fs=function(f,u,c){return f&&"object"==typeof f?((0,ie.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?Lu(f[".sv"],u,c):"object"==typeof f[".sv"]?Vu(f[".sv"],u):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},Lu=function(f,u,c){if("timestamp"===f)return c.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+f)},Vu=function(f,u,c){f.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const v=f.increment;"number"!=typeof v&&(0,ie.hu)(!1,"Unexpected increment value: "+v);const S=u.node();if((0,ie.hu)(null!=S,"Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return v;const J=S.getValue();return"number"!=typeof J?v:J+v},Ws=function(f,u,c,v){return cu(u,new ga(c,f),v)},hl=function(f,u,c){return cu(f,new Vo(u),c)};function cu(f,u,c){const v=f.getPriority().val(),S=fs(v,u.getImmediateChild(".priority"),c);let B;if(f.isLeafNode()){const J=f,_e=fs(J.getValue(),u,c);return _e!==J.getValue()||S!==J.getPriority().val()?new Qs(_e,Fe(S)):f}{const J=f;return B=J,S!==J.getPriority().val()&&(B=B.updatePriority(new Qs(S))),J.forEachChild(Zr,(_e,Oe)=>{const Ye=cu(Oe,u.getImmediateChild(_e),c);Ye!==Oe&&(B=B.updateImmediateChild(_e,Ye))}),B}}class Qa{constructor(u="",c=null,v={children:{},childCount:0}){this.name=u,this.parent=c,this.node=v}}function du(f,u){let c=u instanceof Cr?u:new Cr(u),v=f,S=er(c);for(;null!==S;){const B=(0,ie.DV)(v.node.children,S)||{children:{},childCount:0};v=new Qa(S,v,B),c=dr(c),S=er(c)}return v}function bl(f){return f.node.value}function Vs(f,u){f.node.value=u,Mu(f)}function Uu(f){return f.node.childCount>0}function hu(f,u){cn(f.node.children,(c,v)=>{u(new Qa(c,f,v))})}function fu(f,u,c,v){c&&!v&&u(f),hu(f,S=>{fu(S,u,!0,v)}),c&&v&&u(f)}function Ql(f){return new Cr(null===f.parent?f.name:Ql(f.parent)+"/"+f.name)}function Mu(f){null!==f.parent&&function Bu(f,u,c){const v=function Vl(f){return void 0===bl(f)&&!Uu(f)}(c),S=(0,ie.r3)(f.node.children,u);v&&S?(delete f.node.children[u],f.node.childCount--,Mu(f)):!v&&!S&&(f.node.children[u]=c.node,f.node.childCount++,Mu(f))}(f.parent,f.name,f)}const gu=/[\[\].#$\/\u0000-\u001F\u007F]/,ju=/[\[\].#$\u0000-\u001F\u007F]/,Ul=10485760,mu=function(f){return"string"==typeof f&&0!==f.length&&!gu.test(f)},yu=function(f){return"string"==typeof f&&0!==f.length&&!ju.test(f)},fl=function(f){return null===f||"string"==typeof f||"number"==typeof f&&!Nt(f)||f&&"object"==typeof f&&(0,ie.r3)(f,".sv")},ma=function(f,u,c,v){v&&void 0===u||Bl((0,ie.gK)(f,"value"),u,c)},Bl=function(f,u,c){const v=c instanceof Cr?new Di(c,f):c;if(void 0===u)throw new Error(f+"contains undefined "+Ns(v));if("function"==typeof u)throw new Error(f+"contains a function "+Ns(v)+" with contents = "+u.toString());if(Nt(u))throw new Error(f+"contains "+u.toString()+" "+Ns(v));if("string"==typeof u&&u.length>Ul/3&&(0,ie.ug)(u)>Ul)throw new Error(f+"contains a string greater than "+Ul+" utf8 bytes "+Ns(v)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let S=!1,B=!1;if(cn(u,(J,_e)=>{if(".value"===J)S=!0;else if(".priority"!==J&&".sv"!==J&&(B=!0,!mu(J)))throw new Error(f+" contains an invalid key ("+J+") "+Ns(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ms(f,u){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(u),f.byteLength_+=(0,ie.ug)(u),ei(f)})(v,J),Bl(f,_e,v),function ci(f){const u=f.parts_.pop();f.byteLength_-=(0,ie.ug)(u),f.parts_.length>0&&(f.byteLength_-=1)}(v)}),S&&B)throw new Error(f+' contains ".value" child '+Ns(v)+" in addition to actual children.")}},is=function(f,u,c,v){if(v&&void 0===u)return;const S=(0,ie.gK)(f,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(S+" must be an object containing the children to replace.");const B=[];cn(u,(J,_e)=>{const Oe=new Cr(J);if(Bl(S,_e,Et(c,Oe)),".priority"===Xr(Oe)&&!fl(_e))throw new Error(S+"contains an invalid value for '"+Oe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");B.push(Oe)}),function(f,u){let c,v;for(c=0;c<u.length;c++){v=u[c];const B=Ze(v);for(let J=0;J<B.length;J++)if((".priority"!==B[J]||J!==B.length-1)&&!mu(B[J]))throw new Error(f+"contains an invalid key ("+B[J]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Ir);let S=null;for(c=0;c<u.length;c++){if(v=u[c],null!==S&&hr(S,v))throw new Error(f+"contains a path "+S.toString()+" that is ancestor of another path "+v.toString());S=v}}(S,B)},Ja=function(f,u,c){if(!c||void 0!==u){if(Nt(u))throw new Error((0,ie.gK)(f,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fl(u))throw new Error((0,ie.gK)(f,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ya=function(f,u,c,v){if(!(v&&void 0===c||mu(c)))throw new Error((0,ie.gK)(f,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Xa=function(f,u,c,v){if(!(v&&void 0===c||yu(c)))throw new Error((0,ie.gK)(f,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},io=function(f,u){if(".info"===er(u))throw new Error(f+" failed = Can't modify data under /.info/")},zs=function(f,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!mu(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),yu(f)}(c))throw new Error((0,ie.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Qi{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Dl(f,u){let c=null;for(let v=0;v<u.length;v++){const S=u[v],B=S.getPath();null!==c&&!Nn(B,c.path)&&(f.eventLists_.push(c),c=null),null===c&&(c={events:[],path:B}),c.events.push(S)}c&&f.eventLists_.push(c)}function ka(f,u,c){Dl(f,c),vu(f,v=>Nn(v,u))}function Gi(f,u,c){Dl(f,c),vu(f,v=>hr(v,u)||hr(u,v))}function vu(f,u){f.recursionDepth_++;let c=!0;for(let v=0;v<f.eventLists_.length;v++){const S=f.eventLists_[v];S&&(u(S.path)?(_a(f.eventLists_[v]),f.eventLists_[v]=null):c=!1)}c&&(f.eventLists_=[]),f.recursionDepth_--}function _a(f){for(let u=0;u<f.events.length;u++){const c=f.events[u];if(null!==c){f.events[u]=null;const v=c.getEventRunner();Ge&&De("event: "+c.toString()),pn(v)}}}const Ts="repo_interrupt";class jl{constructor(u,c,v,S){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=v,this.appCheckProvider_=S,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=W(),this.transactionQueueTree_=new Qa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bs(f){const c=f.infoData_.getNode(new Cr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function va(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:bs(f)})}function Xl(f,u,c,v,S){f.dataUpdateCount++;const B=new Cr(u);c=f.interceptServerDataCallback_?f.interceptServerDataCallback_(u,c):c;let J=[];if(S)if(v){const Oe=(0,ie.UI)(c,Ye=>Fe(Ye));J=function Au(f,u,c,v){const S=Qo(f,v);if(S){const B=Ll(S),J=B.path,_e=B.queryId,Oe=Dn(J,u),Ye=Ei.fromObject(c);return pa(f,J,new es(hi(_e),Oe,Ye))}return[]}(f.serverSyncTree_,B,Oe,S)}else{const Oe=Fe(c);J=Do(f.serverSyncTree_,B,Oe,S)}else if(v){const Oe=(0,ie.UI)(c,Ye=>Fe(Ye));J=function Ya(f,u,c){const v=Ei.fromObject(c);return xa(f,new es({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,v))}(f.serverSyncTree_,B,Oe)}else{const Oe=Fe(c);J=Ls(f.serverSyncTree_,B,Oe)}let _e=B;J.length>0&&(_e=zn(f,B)),Gi(f.eventQueue_,_e,J)}function Ea(f,u){Jo(f,"connected",u),!1===u&&function eu(f){we(f,"onDisconnectEvents");const u=va(f),c=W();be(f.onDisconnect_,_n(),(S,B)=>{const J=Ws(S,B,f.serverSyncTree_,u);K(c,S,J)});let v=[];be(c,_n(),(S,B)=>{v=v.concat(Ls(f.serverSyncTree_,S,B));const J=Xo(f,S);zn(f,J)}),f.onDisconnect_=W(),Gi(f.eventQueue_,_n(),v)}(f)}function Jo(f,u,c){const v=new Cr("/.info/"+u),S=Fe(c);f.infoData_.updateSnapshot(v,S);const B=Ls(f.infoSyncTree_,v,S);Gi(f.eventQueue_,v,B)}function Po(f){return f.nextWriteId_++}function tl(f,u,c,v,S){we(f,"set",{path:u.toString(),value:c,priority:v});const B=va(f),J=Fe(c,v),_e=Ru(f.serverSyncTree_,u),Oe=hl(J,_e,B),Ye=Po(f),Mt=Ma(f.serverSyncTree_,u,Oe,Ye,!0);Dl(f.eventQueue_,Mt),f.server_.put(u.toString(),J.val(!0),(nn,qn)=>{const Rr="ok"===nn;Rr||Se("set at "+u+" failed: "+nn);const Lr=Za(f.serverSyncTree_,Ye,!Rr);Gi(f.eventQueue_,u,Lr),qe(0,S,nn,qn)});const zt=Xo(f,u);zn(f,zt),Gi(f.eventQueue_,zt,[])}function Sl(f,u,c){f.server_.onDisconnectCancel(u.toString(),(v,S)=>{"ok"===v&&pe(f.onDisconnect_,u),qe(0,c,v,S)})}function xu(f,u,c,v){const S=Fe(c);f.server_.onDisconnectPut(u.toString(),S.val(!0),(B,J)=>{"ok"===B&&K(f.onDisconnect_,u,S),qe(0,v,B,J)})}function A(f,u,c){let v;v=".info"===er(u._path)?ul(f.infoSyncTree_,u,c):ul(f.serverSyncTree_,u,c),ka(f.eventQueue_,u._path,v)}function O(f){f.persistentConnection_&&f.persistentConnection_.interrupt(Ts)}function we(f,...u){let c="";f.persistentConnection_&&(c=f.persistentConnection_.id+":"),De(c,...u)}function qe(f,u,c,v){u&&pn(()=>{if("ok"===c)u(null);else{const S=(c||"error").toUpperCase();let B=S;v&&(B+=": "+v);const J=new Error(B);J.code=S,u(J)}})}function Lt(f,u,c){return Ru(f.serverSyncTree_,u,c)||L.EMPTY_NODE}function Cn(f,u=f.transactionQueueTree_){if(u||Ti(f,u),bl(u)){const c=Ii(f,u);(0,ie.hu)(c.length>0,"Sending zero length transaction queue"),c.every(S=>0===S.status)&&function Tn(f,u,c){const v=c.map(Ye=>Ye.currentWriteId),S=Lt(f,u,v);let B=S;const J=S.hash();for(let Ye=0;Ye<c.length;Ye++){const Mt=c[Ye];(0,ie.hu)(0===Mt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Mt.status=1,Mt.retryCount++;const zt=Dn(u,Mt.path);B=B.updateChild(zt,Mt.currentOutputSnapshotRaw)}const _e=B.val(!0),Oe=u;f.server_.put(Oe.toString(),_e,Ye=>{we(f,"transaction put response",{path:Oe.toString(),status:Ye});let Mt=[];if("ok"===Ye){const zt=[];for(let nn=0;nn<c.length;nn++)c[nn].status=2,Mt=Mt.concat(Za(f.serverSyncTree_,c[nn].currentWriteId)),c[nn].onComplete&&zt.push(()=>c[nn].onComplete(null,!0,c[nn].currentOutputSnapshotResolved)),c[nn].unwatcher();Ti(f,du(f.transactionQueueTree_,u)),Cn(f,f.transactionQueueTree_),Gi(f.eventQueue_,u,Mt);for(let nn=0;nn<zt.length;nn++)pn(zt[nn])}else{if("datastale"===Ye)for(let zt=0;zt<c.length;zt++)c[zt].status=3===c[zt].status?4:0;else{Se("transaction at "+Oe.toString()+" failed: "+Ye);for(let zt=0;zt<c.length;zt++)c[zt].status=4,c[zt].abortReason=Ye}zn(f,u)}},J)}(f,Ql(u),c)}else Uu(u)&&hu(u,c=>{Cn(f,c)})}function zn(f,u){const c=Er(f,u),v=Ql(c);return function Or(f,u,c){if(0===u.length)return;const v=[];let S=[];const J=u.filter(_e=>0===_e.status).map(_e=>_e.currentWriteId);for(let _e=0;_e<u.length;_e++){const Oe=u[_e],Ye=Dn(c,Oe.path);let zt,Mt=!1;if((0,ie.hu)(null!==Ye,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Oe.status)Mt=!0,zt=Oe.abortReason,S=S.concat(Za(f.serverSyncTree_,Oe.currentWriteId,!0));else if(0===Oe.status)if(Oe.retryCount>=25)Mt=!0,zt="maxretry",S=S.concat(Za(f.serverSyncTree_,Oe.currentWriteId,!0));else{const nn=Lt(f,Oe.path,J);Oe.currentInputSnapshot=nn;const qn=u[_e].update(nn.val());if(void 0!==qn){Bl("transaction failed: Data returned ",qn,Oe.path);let Rr=Fe(qn);"object"==typeof qn&&null!=qn&&(0,ie.r3)(qn,".priority")||(Rr=Rr.updatePriority(nn.getPriority()));const Vr=Oe.currentWriteId,uc=va(f),Bc=hl(Rr,nn,uc);Oe.currentOutputSnapshotRaw=Rr,Oe.currentOutputSnapshotResolved=Bc,Oe.currentWriteId=Po(f),J.splice(J.indexOf(Vr),1),S=S.concat(Ma(f.serverSyncTree_,Oe.path,Bc,Oe.currentWriteId,Oe.applyLocally)),S=S.concat(Za(f.serverSyncTree_,Vr,!0))}else Mt=!0,zt="nodata",S=S.concat(Za(f.serverSyncTree_,Oe.currentWriteId,!0))}Gi(f.eventQueue_,c,S),S=[],Mt&&(u[_e].status=2,setTimeout(u[_e].unwatcher,Math.floor(0)),u[_e].onComplete&&v.push("nodata"===zt?()=>u[_e].onComplete(null,!1,u[_e].currentInputSnapshot):()=>u[_e].onComplete(new Error(zt),!1,null)))}Ti(f,f.transactionQueueTree_);for(let _e=0;_e<v.length;_e++)pn(v[_e]);Cn(f,f.transactionQueueTree_)}(f,Ii(f,c),v),v}function Er(f,u){let c,v=f.transactionQueueTree_;for(c=er(u);null!==c&&void 0===bl(v);)v=du(v,c),c=er(u=dr(u));return v}function Ii(f,u){const c=[];return Ks(f,u,c),c.sort((v,S)=>v.order-S.order),c}function Ks(f,u,c){const v=bl(u);if(v)for(let S=0;S<v.length;S++)c.push(v[S]);hu(u,S=>{Ks(f,S,c)})}function Ti(f,u){const c=bl(u);if(c){let v=0;for(let S=0;S<c.length;S++)2!==c[S].status&&(c[v]=c[S],v++);c.length=v,Vs(u,c.length>0?c:void 0)}hu(u,v=>{Ti(f,v)})}function Xo(f,u){const c=Ql(Er(f,u)),v=du(f.transactionQueueTree_,u);return function pu(f,u,c){let v=c?f:f.parent;for(;null!==v;){if(u(v))return!0;v=v.parent}}(v,S=>{pl(f,S)}),pl(f,v),fu(v,S=>{pl(f,S)}),c}function pl(f,u){const c=bl(u);if(c){const v=[];let S=[],B=-1;for(let J=0;J<c.length;J++)3===c[J].status||(1===c[J].status?((0,ie.hu)(B===J-1,"All SENT items should be at beginning of queue."),B=J,c[J].status=3,c[J].abortReason="set"):((0,ie.hu)(0===c[J].status,"Unexpected transaction status in abort"),c[J].unwatcher(),S=S.concat(Za(f.serverSyncTree_,c[J].currentWriteId,!0)),c[J].onComplete&&v.push(c[J].onComplete.bind(null,new Error("set"),!1,null))));-1===B?Vs(u,void 0):c.length=B+1,Gi(f.eventQueue_,Ql(u),S);for(let J=0;J<v.length;J++)pn(v[J])}}const Pu=function(f,u){const c=pd(f),v=c.namespace;return"firebase.com"===c.domain&&bt(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==c.domain&&bt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Se("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new At(c.host,c.secure,v,"ws"===c.scheme||"wss"===c.scheme,u,"",v!==c.subdomain),path:new Cr(c.pathString)}},pd=function(f){let u="",c="",v="",S="",B="",J=!0,_e="https",Oe=443;if("string"==typeof f){let Ye=f.indexOf("//");Ye>=0&&(_e=f.substring(0,Ye-1),f=f.substring(Ye+2));let Mt=f.indexOf("/");-1===Mt&&(Mt=f.length);let zt=f.indexOf("?");-1===zt&&(zt=f.length),u=f.substring(0,Math.min(Mt,zt)),Mt<zt&&(S=function wa(f){let u="";const c=f.split("/");for(let v=0;v<c.length;v++)if(c[v].length>0){let S=c[v];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch(B){}u+="/"+S}return u}(f.substring(Mt,zt)));const nn=function Uo(f){const u={};"?"===f.charAt(0)&&(f=f.substring(1));for(const c of f.split("&")){if(0===c.length)continue;const v=c.split("=");2===v.length?u[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):Se(`Invalid query segment '${c}' in query '${f}'`)}return u}(f.substring(Math.min(f.length,zt)));Ye=u.indexOf(":"),Ye>=0?(J="https"===_e||"wss"===_e,Oe=parseInt(u.substring(Ye+1),10)):Ye=u.length;const qn=u.slice(0,Ye);if("localhost"===qn.toLowerCase())c="localhost";else if(qn.split(".").length<=2)c=qn;else{const Rr=u.indexOf(".");v=u.substring(0,Rr).toLowerCase(),c=u.substring(Rr+1),B=v}"ns"in nn&&(B=nn.ns)}return{host:u,port:Oe,domain:c,subdomain:v,secure:J,scheme:_e,pathString:S,namespace:B}},gi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wi=function(){let f=0;const u=[];return function(c){const v=c===f;let S;f=c;const B=new Array(8);for(S=7;S>=0;S--)B[S]=gi.charAt(c%64),c=Math.floor(c/64);(0,ie.hu)(0===c,"Cannot push at time == 0");let J=B.join("");if(v){for(S=11;S>=0&&63===u[S];S--)u[S]=0;u[S]++}else for(S=0;S<12;S++)u[S]=Math.floor(64*Math.random());for(S=0;S<12;S++)J+=gi.charAt(u[S]);return(0,ie.hu)(20===J.length,"nextPushId: Length should be 20."),J}}();class nl{constructor(u,c,v,S){this.eventType=u,this.eventRegistration=c,this.snapshot=v,this.prevName=S}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Wl)(this.snapshot.exportVal())}}class wu{constructor(u,c,v){this.eventRegistration=u,this.error=c,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class $l{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class N{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new ie.BH;return Sl(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){io("OnDisconnect.remove",this._path);const u=new ie.BH;return xu(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){io("OnDisconnect.set",this._path),ma("OnDisconnect.set",u,this._path,!1);const c=new ie.BH;return xu(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){io("OnDisconnect.setWithPriority",this._path),ma("OnDisconnect.setWithPriority",u,this._path,!1),Ja("OnDisconnect.setWithPriority",c,!1);const v=new ie.BH;return function Hl(f,u,c,v,S){const B=Fe(c,v);f.server_.onDisconnectPut(u.toString(),B.val(!0),(J,_e)=>{"ok"===J&&K(f.onDisconnect_,u,B),qe(0,S,J,_e)})}(this._repo,this._path,u,c,v.wrapCallback(()=>{})),v.promise}update(u){io("OnDisconnect.update",this._path),is("OnDisconnect.update",u,this._path,!1);const c=new ie.BH;return function Hu(f,u,c,v){if((0,ie.xb)(c))return De("onDisconnect().update() called with empty data.  Don't do anything."),void qe(0,v,"ok",void 0);f.server_.onDisconnectMerge(u.toString(),c,(S,B)=>{"ok"===S&&cn(c,(J,_e)=>{const Oe=Fe(_e);K(f.onDisconnect_,Et(u,J),Oe)}),qe(0,v,S,B)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class E{constructor(u,c,v,S){this._repo=u,this._path=c,this._queryParams=v,this._orderByCalled=S}get key(){return kt(this._path)?null:Xr(this._path)}get ref(){return new oe(this._repo,this._path)}get _queryIdentifier(){const u=Be(this._queryParams),c=or(u);return"{}"===c?"default":c}get _queryObject(){return Be(this._queryParams)}isEqual(u){if(!((u=(0,ie.m9)(u))instanceof E))return!1;const c=this._repo===u._repo,v=Nn(this._path,u._path);return c&&v&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function lt(f){let u="";for(let c=f.pieceNum_;c<f.pieces_.length;c++)""!==f.pieces_[c]&&(u+="/"+encodeURIComponent(String(f.pieces_[c])));return u||"/"}(this._path)}}function w(f,u){if(!0===f._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function x(f){let u=null,c=null;if(f.hasStart()&&(u=f.getIndexStartValue()),f.hasEnd()&&(c=f.getIndexEndValue()),f.getIndex()===xi){const v="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",S="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(f.hasStart()){if(f.getIndexStartName()!==En)throw new Error(v);if("string"!=typeof u)throw new Error(S)}if(f.hasEnd()){if(f.getIndexEndName()!==Ln)throw new Error(v);if("string"!=typeof c)throw new Error(S)}}else if(f.getIndex()===Zr){if(null!=u&&!fl(u)||null!=c&&!fl(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ie.hu)(f.getIndex()instanceof Pt||f.getIndex()===gn,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Z(f){if(f.hasStart()&&f.hasEnd()&&f.hasLimit()&&!f.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class oe extends E{constructor(u,c){super(u,c,new di,!1)}get parent(){const u=ut(this._path);return null===u?null:new oe(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Te{constructor(u,c,v){this._node=u,this.ref=c,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Cr(u),v=p(this.ref,u);return new Te(this._node.getChild(c),v,Zr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,S)=>u(new Te(S,p(this.ref,v),Zr)))}hasChild(u){const c=new Cr(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Re(f,u){return(f=(0,ie.m9)(f))._checkNotDeleted("ref"),void 0!==u?p(f._root,u):f._root}function C(f,u){(f=(0,ie.m9)(f))._checkNotDeleted("refFromURL");const c=Pu(u,f._repo.repoInfo_.nodeAdmin);zs("refFromURL",c);const v=c.repoInfo;return!f._repo.repoInfo_.isCustomHost()&&v.host!==f._repo.repoInfo_.host&&bt("refFromURL: Host name does not match the current database: (found "+v.host+" but expected "+f._repo.repoInfo_.host+")"),Re(f,c.path.toString())}function p(f,u){return null===er((f=(0,ie.m9)(f))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Xa("child","path",c,!1)):Xa("child","path",u,!1),new oe(f._repo,Et(f._path,u));var c}function b(f,u){f=(0,ie.m9)(f),io("push",f._path),ma("push",u,f._path,!0);const c=bs(f._repo),v=Wi(c),S=p(f,v),B=p(f,v);let J;return J=null!=u?ce(B,u).then(()=>B):Promise.resolve(B),S.then=J.then.bind(J),S.catch=J.then.bind(J,void 0),S}function Y(f){return io("remove",f._path),ce(f,null)}function ce(f,u){f=(0,ie.m9)(f),io("set",f._path),ma("set",u,f._path,!1);const c=new ie.BH;return tl(f._repo,f._path,u,null,c.wrapCallback(()=>{})),c.promise}function Ve(f,u){f=(0,ie.m9)(f),io("setPriority",f._path),Ja("setPriority",u,!1);const c=new ie.BH;return tl(f._repo,Et(f._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}function rt(f,u,c){if(io("setWithPriority",f._path),ma("setWithPriority",u,f._path,!1),Ja("setWithPriority",c,!1),".length"===f.key||".keys"===f.key)throw"setWithPriority failed: "+f.key+" is a read-only object.";const v=new ie.BH;return tl(f._repo,f._path,u,c,v.wrapCallback(()=>{})),v.promise}function $t(f,u){is("update",u,f._path,!1);const c=new ie.BH;return function So(f,u,c,v){we(f,"update",{path:u.toString(),value:c});let S=!0;const B=va(f),J={};if(cn(c,(_e,Oe)=>{S=!1,J[_e]=Ws(Et(u,_e),Fe(Oe),f.serverSyncTree_,B)}),S)De("update() called with empty data.  Don't do anything."),qe(0,v,"ok",void 0);else{const _e=Po(f),Oe=function Tl(f,u,c,v){!function no(f,u,c,v){(0,ie.hu)(v>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:u,children:c,writeId:v,visible:!0}),f.visibleWrites=Is(f.visibleWrites,u,c),f.lastWriteId=v}(f.pendingWriteTree_,u,c,v);const S=Ei.fromObject(c);return xa(f,new es({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,S))}(f.serverSyncTree_,u,J,_e);Dl(f.eventQueue_,Oe),f.server_.merge(u.toString(),c,(Ye,Mt)=>{const zt="ok"===Ye;zt||Se("update at "+u+" failed: "+Ye);const nn=Za(f.serverSyncTree_,_e,!zt),qn=nn.length>0?zn(f,u):u;Gi(f.eventQueue_,qn,nn),qe(0,v,Ye,Mt)}),cn(c,Ye=>{const Mt=Xo(f,Et(u,Ye));zn(f,Mt)}),Gi(f.eventQueue_,u,[])}}(f._repo,f._path,u,c.wrapCallback(()=>{})),c.promise}function mn(f){f=(0,ie.m9)(f);const u=new $l(()=>{}),c=new Pn(u);return function el(f,u,c){const v=function cl(f,u){const c=u._path;let v=null;f.syncPointTree_.foreachOnPath(c,(Ye,Mt)=>{const zt=Dn(Ye,c);v=v||fa(Mt,zt)});let S=f.syncPointTree_.get(c);S?v=v||fa(S,_n()):(S=new aa,f.syncPointTree_=f.syncPointTree_.set(c,S));const B=null!=v,J=B?new Ki(v,!0,!1):null;return function Wt(f){return il(f.viewCache_)}(lu(S,u,Io(f.pendingWriteTree_,u._path),B?J.getNode():L.EMPTY_NODE,B))}(f.serverSyncTree_,u);return null!=v?Promise.resolve(v):f.server_.get(u).then(S=>{const B=Fe(S).withIndex(u._queryParams.getIndex());let J;if(Zl(f.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())J=Ls(f.serverSyncTree_,u._path,B);else{const _e=Yl(f.serverSyncTree_,u);J=Do(f.serverSyncTree_,u._path,B,_e)}return Gi(f.eventQueue_,u._path,J),ul(f.serverSyncTree_,u,c,null,!0),B},S=>(we(f,"get for query "+(0,ie.Wl)(u)+" failed: "+S),Promise.reject(new Error(S))))}(f._repo,f,c).then(v=>new Te(v,new oe(f._repo,f._path),f._queryParams.getIndex()))}class Pn{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const v=c._queryParams.getIndex();return new nl("value",this,new Te(u.snapshotNode,new oe(c._repo,c._path),v))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new wu(this,u,c):null}matches(u){return u instanceof Pn&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wn{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new wu(this,u,c):null}createEvent(u,c){(0,ie.hu)(null!=u.childName,"Child events should have a childName.");const v=p(new oe(c._repo,c._path),u.childName),S=c._queryParams.getIndex();return new nl(u.type,this,new Te(u.snapshotNode,v,S),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Wn&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function xr(f,u,c,v,S){let B;if("object"==typeof v&&(B=void 0,S=v),"function"==typeof v&&(B=v),S&&S.onlyOnce){const Oe=c,Ye=(Mt,zt)=>{A(f._repo,f,_e),Oe(Mt,zt)};Ye.userCallback=c.userCallback,Ye.context=c.context,c=Ye}const J=new $l(c,B||void 0),_e="value"===u?new Pn(J):new Wn(u,J);return function tu(f,u,c){let v;v=".info"===er(u._path)?Zl(f.infoSyncTree_,u,c):Zl(f.serverSyncTree_,u,c),ka(f.eventQueue_,u._path,v)}(f._repo,f,_e),()=>A(f._repo,f,_e)}function ts(f,u,c,v){return xr(f,"value",u,c,v)}function Bo(f,u,c,v){return xr(f,"child_added",u,c,v)}function ps(f,u,c,v){return xr(f,"child_changed",u,c,v)}function Fa(f,u,c,v){return xr(f,"child_moved",u,c,v)}function La(f,u,c,v){return xr(f,"child_removed",u,c,v)}function la(f,u,c){let v=null;const S=c?new $l(c):null;"value"===u?v=new Pn(S):u&&(v=new Wn(u,S)),A(f._repo,f,v)}class Ao{}class jo extends Ao{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ma("endAt",this._value,u._path,!0);const c=q(u._queryParams,this._value,this._key);if(Z(c),x(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new E(u._repo,u._path,c,u._orderByCalled)}}function Ds(f,u){return ya("endAt","key",u,!0),new jo(f,u)}class Va extends Ao{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ma("endBefore",this._value,u._path,!1);const c=function j(f,u,c){let v;return v=q(f,u,f.index_===xi||c?c:En),v.endBeforeSet_=!0,v}(u._queryParams,this._value,this._key);if(Z(c),x(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new E(u._repo,u._path,c,u._orderByCalled)}}function Cu(f,u){return ya("endBefore","key",u,!0),new Va(f,u)}class Yn extends Ao{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ma("startAt",this._value,u._path,!0);const c=ks(u._queryParams,this._value,this._key);if(Z(c),x(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new E(u._repo,u._path,c,u._orderByCalled)}}function wr(f=null,u){return ya("startAt","key",u,!0),new Yn(f,u)}class Pr extends Ao{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ma("startAfter",this._value,u._path,!1);const c=function Eo(f,u,c){let v;return v=ks(f,u,f.index_===xi||c?c:Ln),v.startAfterSet_=!0,v}(u._queryParams,this._value,this._key);if(Z(c),x(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new E(u._repo,u._path,c,u._orderByCalled)}}function mi(f,u){return ya("startAfter","key",u,!0),new Pr(f,u)}class fo extends Ao{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new E(u._repo,u._path,function Rs(f,u){const c=f.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}function gl(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fo(f)}class Ua extends Ao{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new E(u._repo,u._path,function ko(f,u){const c=f.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}function ea(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ua(f)}class ss extends Ao{constructor(u){super(),this._path=u}_apply(u){w(u,"orderByChild");const c=new Cr(this._path);if(kt(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const v=new Pt(c),S=F(u._queryParams,v);return x(S),new E(u._repo,u._path,S,!0)}}function Ca(f){if("$key"===f)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===f)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===f)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xa("orderByChild","path",f,!1),new ss(f)}class gd extends Ao{_apply(u){w(u,"orderByKey");const c=F(u._queryParams,xi);return x(c),new E(u._repo,u._path,c,!0)}}function No(){return new gd}class Iu extends Ao{_apply(u){w(u,"orderByPriority");const c=F(u._queryParams,Zr);return x(c),new E(u._repo,u._path,c,!0)}}function ta(){return new Iu}class ua extends Ao{_apply(u){w(u,"orderByValue");const c=F(u._queryParams,gn);return x(c),new E(u._repo,u._path,c,!0)}}function ml(){return new ua}class rf extends Ao{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(ma("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jo(this._value,this._key)._apply(new Yn(this._value,this._key)._apply(u))}}function _p(f,u){return ya("equalTo","key",u,!0),new rf(f,u)}function yi(f,...u){let c=(0,ie.m9)(f);for(const v of u)c=v._apply(c);return c}(function Ra(f){(0,ie.hu)(!ha,"__referenceConstructor has already been defined"),ha=f})(oe),function Il(f){(0,ie.hu)(!pi,"__referenceConstructor has already been defined"),pi=f}(oe);const Uc={};function Qd(f,u,c,v,S){let B=v||f.options.databaseURL;void 0===B&&(f.options.projectId||bt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),De("Using default host for project ",f.options.projectId),B=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Oe,Ye,J=Pu(B,S),_e=J.repoInfo;"undefined"!=typeof process&&process.env&&(Ye=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ye?(Oe=!0,B=`http://${Ye}?ns=${_e.namespace}`,J=Pu(B,S),_e=J.repoInfo):Oe=!J.repoInfo.secure;const Mt=S&&Oe?new jn(jn.OWNER):new _r(f.name,f.options,u);zs("Invalid Firebase Database URL",J),kt(J.path)||bt("Database URL must point to the root of a Firebase Database (not including a child path).");const zt=function Ep(f,u,c,v){let S=Uc[u.name];S||(S={},Uc[u.name]=S);let B=S[f.toURLString()];return B&&bt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),B=new jl(f,false,c,v),S[f.toURLString()]=B,B}(_e,f,Mt,new ur(f.name,c));return new Cp(zt,f)}class Cp{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xs(f,u,c){if(f.stats_=vi(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Xt(f.repoInfo_,(v,S,B,J)=>{Xl(f,v,S,B,J)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Ea(f,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Wl)(c)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}f.persistentConnection_=new Os(f.repoInfo_,u,(v,S,B,J)=>{Xl(f,v,S,B,J)},v=>{Ea(f,v)},v=>{!function ho(f,u){cn(u,(c,v)=>{Jo(f,c,v)})}(f,v)},f.authTokenProvider_,f.appCheckProvider_,c),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(v=>{f.server_.refreshAuthToken(v)}),f.appCheckProvider_.addTokenChangeListener(v=>{f.server_.refreshAppCheckToken(v.token)}),f.statsReporter_=function ar(f,u){const c=f.toString();return Un[c]||(Un[c]=u()),Un[c]}(f.repoInfo_,()=>new sr(f.stats_,f.server_)),f.infoData_=new Yr,f.infoSyncTree_=new qa({startListening:(v,S,B,J)=>{let _e=[];const Oe=f.infoData_.getNode(v._path);return Oe.isEmpty()||(_e=Ls(f.infoSyncTree_,v._path,Oe),setTimeout(()=>{J("ok")},0)),_e},stopListening:()=>{}}),Jo(f,"connected",!1),f.serverSyncTree_=new qa({startListening:(v,S,B,J)=>(f.server_.listen(v,B,S,(_e,Oe)=>{const Ye=J(_e,Oe);Gi(f.eventQueue_,v._path,Ye)}),[]),stopListening:(v,S)=>{f.server_.unlisten(v,S)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new oe(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function md(f,u){const c=Uc[u];(!c||c[f.key]!==f)&&bt(`Database ${u}(${f.repoInfo_}) has already been deleted.`),O(f),delete c[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&bt("Cannot call "+u+" on a deleted database.")}}function oc(){gr.IS_TRANSPORT_INITIALIZED&&Se("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function nu(){oc(),se.forceDisallow()}function Jd(){oc(),Sn.forceDisallow(),se.forceAllow()}function Ba(f=(0,V.getApp)(),u){const c=(0,V._getProvider)(f,"database").getImmediate({identifier:u});if(!c._instanceStarted){const v=(0,ie.P0)("database");v&&ac(c,...v)}return c}function ac(f,u,c,v={}){(f=(0,ie.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&bt("Cannot call useEmulator() after instance has already been initialized.");const S=f._repoInternal;let B;if(S.repoInfo_.nodeAdmin)v.mockUserToken&&bt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),B=new jn(jn.OWNER);else if(v.mockUserToken){const J="string"==typeof v.mockUserToken?v.mockUserToken:(0,ie.Sg)(v.mockUserToken,f.app.options.projectId);B=new jn(J)}!function Yd(f,u,c,v){f.repoInfo_=new At(`${u}:${c}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams,!0),v&&(f.authTokenProvider_=v)}(S,u,c,B)}function lc(f){(f=(0,ie.m9)(f))._checkNotDeleted("goOffline"),O(f._repo)}function Xd(f){(f=(0,ie.m9)(f))._checkNotDeleted("goOnline"),function ne(f){f.persistentConnection_&&f.persistentConnection_.resume(Ts)}(f._repo)}function eh(f,u){at(f,u)}const Kg={".sv":"timestamp"};function qg(){return Kg}function Us(f){return{".sv":{increment:f}}}class vc{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ec(f,u,c){var v;if(f=(0,ie.m9)(f),io("Reference.transaction",f._path),".length"===f.key||".keys"===f.key)throw"Reference.transaction failed: "+f.key+" is a read-only object.";const S=null===(v=null==c?void 0:c.applyLocally)||void 0===v||v,B=new ie.BH,_e=ts(f,()=>{});return function ht(f,u,c,v,S,B){we(f,"transaction on "+u);const J={path:u,update:c,onComplete:v,status:null,order:Vt(),applyLocally:B,retryCount:0,unwatcher:S,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},_e=Lt(f,u,void 0);J.currentInputSnapshot=_e;const Oe=J.update(_e.val());if(void 0===Oe)J.unwatcher(),J.currentOutputSnapshotRaw=null,J.currentOutputSnapshotResolved=null,J.onComplete&&J.onComplete(null,!1,J.currentInputSnapshot);else{Bl("transaction failed: Data returned ",Oe,J.path),J.status=0;const Ye=du(f.transactionQueueTree_,u),Mt=bl(Ye)||[];let zt;Mt.push(J),Vs(Ye,Mt),"object"==typeof Oe&&null!==Oe&&(0,ie.r3)(Oe,".priority")?(zt=(0,ie.DV)(Oe,".priority"),(0,ie.hu)(fl(zt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):zt=(Ru(f.serverSyncTree_,u)||L.EMPTY_NODE).getPriority().val();const nn=va(f),qn=Fe(Oe,zt),Rr=hl(qn,_e,nn);J.currentOutputSnapshotRaw=qn,J.currentOutputSnapshotResolved=Rr,J.currentWriteId=Po(f);const Lr=Ma(f.serverSyncTree_,u,Rr,J.currentWriteId,J.applyLocally);Gi(f.eventQueue_,u,Lr),Cn(f,f.transactionQueueTree_)}}(f._repo,f._path,u,(Oe,Ye,Mt)=>{let zt=null;Oe?B.reject(Oe):(zt=new Te(Mt,new oe(f._repo,f._path),Zr),B.resolve(new vc(Ye,zt)))},_e,S),B.promise}Os.prototype.simpleListen=function(f,u){this.sendRequest("q",{p:f},u)},Os.prototype.echo=function(f,u){this.sendRequest("echo",{d:f},u)},function yd(f){nt(V.SDK_VERSION),(0,V._registerComponent)(new ee.wA("database",(u,{instanceIdentifier:c})=>Qd(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,V.registerVersion)(je,"0.14.4",f),(0,V.registerVersion)(je,"0.14.4","esm2017")}()},2090:(hn,ct,U)=>{U.d(ct,{$s:()=>ni,BH:()=>Je,DV:()=>Jn,Dv:()=>Kn,G6:()=>or,GJ:()=>_r,L:()=>nt,LL:()=>Me,P0:()=>qt,Pz:()=>De,Sg:()=>Ct,UG:()=>Ht,UI:()=>nr,US:()=>je,Wj:()=>ar,Wl:()=>Zt,Yr:()=>Ot,ZB:()=>Qe,ZR:()=>Ce,aH:()=>at,b$:()=>En,cI:()=>st,dS:()=>rn,eu:()=>cn,g5:()=>ee,gK:()=>Un,gQ:()=>ze,h$:()=>He,hl:()=>Mn,hu:()=>V,jU:()=>Nt,lb:()=>mr,m9:()=>Br,ne:()=>ft,p$:()=>ve,pd:()=>We,r3:()=>jn,ru:()=>Rn,tV:()=>Ie,uI:()=>Se,ug:()=>Mr,vZ:()=>On,w1:()=>un,w9:()=>ur,xO:()=>Li,xb:()=>yn,z$:()=>bt,zI:()=>it,zd:()=>xt});const V=function(Ue,Pe){if(!Ue)throw ee(Pe)},ee=function(Ue){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ue)},ie=function(Ue){const Pe=[];let me=0;for(let ye=0;ye<Ue.length;ye++){let z=Ue.charCodeAt(ye);z<128?Pe[me++]=z:z<2048?(Pe[me++]=z>>6|192,Pe[me++]=63&z|128):55296==(64512&z)&&ye+1<Ue.length&&56320==(64512&Ue.charCodeAt(ye+1))?(z=65536+((1023&z)<<10)+(1023&Ue.charCodeAt(++ye)),Pe[me++]=z>>18|240,Pe[me++]=z>>12&63|128,Pe[me++]=z>>6&63|128,Pe[me++]=63&z|128):(Pe[me++]=z>>12|224,Pe[me++]=z>>6&63|128,Pe[me++]=63&z|128)}return Pe},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ue,Pe){if(!Array.isArray(Ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const me=Pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let z=0;z<Ue.length;z+=3){const te=Ue[z],se=z+1<Ue.length,xe=se?Ue[z+1]:0,pt=z+2<Ue.length,Bt=pt?Ue[z+2]:0;let gr=(15&xe)<<2|Bt>>6,tr=63&Bt;pt||(tr=64,se||(gr=64)),ye.push(me[te>>2],me[(3&te)<<4|xe>>4],me[gr],me[tr])}return ye.join("")},encodeString(Ue,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?btoa(Ue):this.encodeByteArray(ie(Ue),Pe)},decodeString(Ue,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?atob(Ue):function(Ue){const Pe=[];let me=0,ye=0;for(;me<Ue.length;){const z=Ue[me++];if(z<128)Pe[ye++]=String.fromCharCode(z);else if(z>191&&z<224){const te=Ue[me++];Pe[ye++]=String.fromCharCode((31&z)<<6|63&te)}else if(z>239&&z<365){const pt=((7&z)<<18|(63&Ue[me++])<<12|(63&Ue[me++])<<6|63&Ue[me++])-65536;Pe[ye++]=String.fromCharCode(55296+(pt>>10)),Pe[ye++]=String.fromCharCode(56320+(1023&pt))}else{const te=Ue[me++],se=Ue[me++];Pe[ye++]=String.fromCharCode((15&z)<<12|(63&te)<<6|63&se)}}return Pe.join("")}(this.decodeStringToByteArray(Ue,Pe))},decodeStringToByteArray(Ue,Pe){this.init_();const me=Pe?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let z=0;z<Ue.length;){const te=me[Ue.charAt(z++)],xe=z<Ue.length?me[Ue.charAt(z)]:0;++z;const Bt=z<Ue.length?me[Ue.charAt(z)]:64;++z;const Sn=z<Ue.length?me[Ue.charAt(z)]:64;if(++z,null==te||null==xe||null==Bt||null==Sn)throw new Xe;ye.push(te<<2|xe>>4),64!==Bt&&(ye.push(xe<<4&240|Bt>>2),64!==Sn&&ye.push(Bt<<6&192|Sn))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ue=0;Ue<this.ENCODED_VALS.length;Ue++)this.byteToCharMap_[Ue]=this.ENCODED_VALS.charAt(Ue),this.charToByteMap_[this.byteToCharMap_[Ue]]=Ue,this.byteToCharMapWebSafe_[Ue]=this.ENCODED_VALS_WEBSAFE.charAt(Ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ue]]=Ue,Ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ue)]=Ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ue)]=Ue)}}};class Xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function(Ue){const Pe=ie(Ue);return je.encodeByteArray(Pe,!0)},nt=function(Ue){return He(Ue).replace(/\./g,"")},Ie=function(Ue){try{return je.decodeString(Ue,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};function ve(Ue){return Qe(void 0,Ue)}function Qe(Ue,Pe){if(!(Pe instanceof Object))return Pe;switch(Pe.constructor){case Date:return new Date(Pe.getTime());case Object:void 0===Ue&&(Ue={});break;case Array:Ue=[];break;default:return Pe}for(const me in Pe)!Pe.hasOwnProperty(me)||!St(me)||(Ue[me]=Qe(Ue[me],Pe[me]));return Ue}function St(Ue){return"__proto__"!==Ue}const ot=()=>{try{return function vt(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Ue=process.env.__FIREBASE_DEFAULTS__;return Ue?JSON.parse(Ue):void 0})()||(()=>{if("undefined"==typeof document)return;let Ue;try{Ue=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(me){return}const Pe=Ue&&Ie(Ue[1]);return Pe&&JSON.parse(Pe)})()}catch(Ue){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ue}`)}},qt=Ue=>{const Pe=(Ue=>{var Pe,me;return null===(me=null===(Pe=ot())||void 0===Pe?void 0:Pe.emulatorHosts)||void 0===me?void 0:me[Ue]})(Ue);if(!Pe)return;const me=Pe.lastIndexOf(":");if(me<=0||me+1===Pe.length)throw new Error(`Invalid host ${Pe} with no separate hostname and port!`);const ye=parseInt(Pe.substring(me+1),10);return"["===Pe[0]?[Pe.substring(1,me-1),ye]:[Pe.substring(0,me),ye]},at=()=>{var Ue;return null===(Ue=ot())||void 0===Ue?void 0:Ue.config},De=Ue=>{var Pe;return null===(Pe=ot())||void 0===Pe?void 0:Pe[`_${Ue}`]};class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Pe,me)=>{this.resolve=Pe,this.reject=me})}wrapCallback(Pe){return(me,ye)=>{me?this.reject(me):this.resolve(ye),"function"==typeof Pe&&(this.promise.catch(()=>{}),1===Pe.length?Pe(me):Pe(me,ye))}}}function Ct(Ue,Pe){if(Ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=Pe||"demo-project",z=Ue.iat||0,te=Ue.sub||Ue.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:z,exp:z+3600,auth_time:z,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},Ue);return[nt(JSON.stringify({alg:"none",type:"JWT"})),nt(JSON.stringify(se)),""].join(".")}function bt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function Ht(){var Ue;const Pe=null===(Ue=ot())||void 0===Ue?void 0:Ue.forceEnvironment;if("node"===Pe)return!0;if("browser"===Pe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(me){return!1}}function Nt(){return"object"==typeof self&&self.self===self}function Rn(){const Ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ue&&void 0!==Ue.id}function En(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function un(){const Ue=bt();return Ue.indexOf("MSIE ")>=0||Ue.indexOf("Trident/")>=0}function Ot(){return!1}function or(){return!Ht()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mn(){try{return"object"==typeof indexedDB}catch(Ue){return!1}}function cn(){return new Promise((Ue,Pe)=>{try{let me=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(ye);z.onsuccess=()=>{z.result.close(),me||self.indexedDB.deleteDatabase(ye),Ue(!0)},z.onupgradeneeded=()=>{me=!1},z.onerror=()=>{var te;Pe((null===(te=z.error)||void 0===te?void 0:te.message)||"")}}catch(me){Pe(me)}})}function it(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ce extends Error{constructor(Pe,me,ye){super(me),this.code=Pe,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor(Pe,me,ye){this.service=Pe,this.serviceName=me,this.errors=ye}create(Pe,...me){const ye=me[0]||{},z=`${this.service}/${Pe}`,te=this.errors[Pe],se=te?function Ee(Ue,Pe){return Ue.replace(Ne,(me,ye)=>{const z=Pe[ye];return null!=z?String(z):`<${ye}?>`})}(te,ye):"Error";return new Ce(z,`${this.serviceName}: ${se} (${z}).`,ye)}}const Ne=/\{\$([^}]+)}/g;function st(Ue){return JSON.parse(Ue)}function Zt(Ue){return JSON.stringify(Ue)}const pn=function(Ue){let Pe={},me={},ye={},z="";try{const te=Ue.split(".");Pe=st(Ie(te[0])||""),me=st(Ie(te[1])||""),z=te[2],ye=me.d||{},delete me.d}catch(te){}return{header:Pe,claims:me,data:ye,signature:z}},ur=function(Ue){const me=pn(Ue).claims;return!!me&&"object"==typeof me&&me.hasOwnProperty("iat")},_r=function(Ue){const Pe=pn(Ue).claims;return"object"==typeof Pe&&!0===Pe.admin};function jn(Ue,Pe){return Object.prototype.hasOwnProperty.call(Ue,Pe)}function Jn(Ue,Pe){if(Object.prototype.hasOwnProperty.call(Ue,Pe))return Ue[Pe]}function yn(Ue){for(const Pe in Ue)if(Object.prototype.hasOwnProperty.call(Ue,Pe))return!1;return!0}function nr(Ue,Pe,me){const ye={};for(const z in Ue)Object.prototype.hasOwnProperty.call(Ue,z)&&(ye[z]=Pe.call(me,Ue[z],z,Ue));return ye}function On(Ue,Pe){if(Ue===Pe)return!0;const me=Object.keys(Ue),ye=Object.keys(Pe);for(const z of me){if(!ye.includes(z))return!1;const te=Ue[z],se=Pe[z];if(Vn(te)&&Vn(se)){if(!On(te,se))return!1}else if(te!==se)return!1}for(const z of ye)if(!me.includes(z))return!1;return!0}function Vn(Ue){return null!==Ue&&"object"==typeof Ue}function Li(Ue){const Pe=[];for(const[me,ye]of Object.entries(Ue))Array.isArray(ye)?ye.forEach(z=>{Pe.push(encodeURIComponent(me)+"="+encodeURIComponent(z))}):Pe.push(encodeURIComponent(me)+"="+encodeURIComponent(ye));return Pe.length?"&"+Pe.join("&"):""}function xt(Ue){const Pe={};return Ue.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[z,te]=ye.split("=");Pe[decodeURIComponent(z)]=decodeURIComponent(te)}}),Pe}function We(Ue){const Pe=Ue.indexOf("?");if(!Pe)return"";const me=Ue.indexOf("#",Pe);return Ue.substring(Pe,me>0?me:void 0)}class ze{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Pe=1;Pe<this.blockSize;++Pe)this.pad_[Pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Pe,me){me||(me=0);const ye=this.W_;if("string"==typeof Pe)for(let Sn=0;Sn<16;Sn++)ye[Sn]=Pe.charCodeAt(me)<<24|Pe.charCodeAt(me+1)<<16|Pe.charCodeAt(me+2)<<8|Pe.charCodeAt(me+3),me+=4;else for(let Sn=0;Sn<16;Sn++)ye[Sn]=Pe[me]<<24|Pe[me+1]<<16|Pe[me+2]<<8|Pe[me+3],me+=4;for(let Sn=16;Sn<80;Sn++){const gr=ye[Sn-3]^ye[Sn-8]^ye[Sn-14]^ye[Sn-16];ye[Sn]=4294967295&(gr<<1|gr>>>31)}let Bt,an,z=this.chain_[0],te=this.chain_[1],se=this.chain_[2],xe=this.chain_[3],pt=this.chain_[4];for(let Sn=0;Sn<80;Sn++){Sn<40?Sn<20?(Bt=xe^te&(se^xe),an=1518500249):(Bt=te^se^xe,an=1859775393):Sn<60?(Bt=te&se|xe&(te|se),an=2400959708):(Bt=te^se^xe,an=3395469782);const gr=(z<<5|z>>>27)+Bt+pt+an+ye[Sn]&4294967295;pt=xe,xe=se,se=4294967295&(te<<30|te>>>2),te=z,z=gr}this.chain_[0]=this.chain_[0]+z&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+xe&4294967295,this.chain_[4]=this.chain_[4]+pt&4294967295}update(Pe,me){if(null==Pe)return;void 0===me&&(me=Pe.length);const ye=me-this.blockSize;let z=0;const te=this.buf_;let se=this.inbuf_;for(;z<me;){if(0===se)for(;z<=ye;)this.compress_(Pe,z),z+=this.blockSize;if("string"==typeof Pe){for(;z<me;)if(te[se]=Pe.charCodeAt(z),++se,++z,se===this.blockSize){this.compress_(te),se=0;break}}else for(;z<me;)if(te[se]=Pe[z],++se,++z,se===this.blockSize){this.compress_(te),se=0;break}}this.inbuf_=se,this.total_+=me}digest(){const Pe=[];let me=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let z=this.blockSize-1;z>=56;z--)this.buf_[z]=255&me,me/=256;this.compress_(this.buf_);let ye=0;for(let z=0;z<5;z++)for(let te=24;te>=0;te-=8)Pe[ye]=this.chain_[z]>>te&255,++ye;return Pe}}function ft(Ue,Pe){const me=new At(Ue,Pe);return me.subscribe.bind(me)}class At{constructor(Pe,me){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=me,this.task.then(()=>{Pe(this)}).catch(ye=>{this.error(ye)})}next(Pe){this.forEachObserver(me=>{me.next(Pe)})}error(Pe){this.forEachObserver(me=>{me.error(Pe)}),this.close(Pe)}complete(){this.forEachObserver(Pe=>{Pe.complete()}),this.close()}subscribe(Pe,me,ye){let z;if(void 0===Pe&&void 0===me&&void 0===ye)throw new Error("Missing Observer.");z=function on(Ue,Pe){if("object"!=typeof Ue||null===Ue)return!1;for(const me of Pe)if(me in Ue&&"function"==typeof Ue[me])return!0;return!1}(Pe,["next","error","complete"])?Pe:{next:Pe,error:me,complete:ye},void 0===z.next&&(z.next=Dr),void 0===z.error&&(z.error=Dr),void 0===z.complete&&(z.complete=Dr);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch(se){}}),this.observers.push(z),te}unsubscribeOne(Pe){void 0===this.observers||void 0===this.observers[Pe]||(delete this.observers[Pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Pe){if(!this.finalized)for(let me=0;me<this.observers.length;me++)this.sendOne(me,Pe)}sendOne(Pe,me){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Pe])try{me(this.observers[Pe])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(Pe){this.finalized||(this.finalized=!0,void 0!==Pe&&(this.finalError=Pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dr(){}const Kn=function(Ue,Pe,me,ye){let z;if(ye<Pe?z="at least "+Pe:ye>me&&(z=0===me?"none":"no more than "+me),z)throw new Error(Ue+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+z+".")};function Un(Ue,Pe){return`${Ue} failed: ${Pe} argument `}function ar(Ue,Pe,me,ye){if((!ye||me)&&"function"!=typeof me)throw new Error(Un(Ue,Pe)+"must be a valid function.")}function mr(Ue,Pe,me,ye){if((!ye||me)&&("object"!=typeof me||null===me))throw new Error(Un(Ue,Pe)+"must be a valid context object.")}const rn=function(Ue){const Pe=[];let me=0;for(let ye=0;ye<Ue.length;ye++){let z=Ue.charCodeAt(ye);if(z>=55296&&z<=56319){const te=z-55296;ye++,V(ye<Ue.length,"Surrogate pair missing trail surrogate."),z=65536+(te<<10)+(Ue.charCodeAt(ye)-56320)}z<128?Pe[me++]=z:z<2048?(Pe[me++]=z>>6|192,Pe[me++]=63&z|128):z<65536?(Pe[me++]=z>>12|224,Pe[me++]=z>>6&63|128,Pe[me++]=63&z|128):(Pe[me++]=z>>18|240,Pe[me++]=z>>12&63|128,Pe[me++]=z>>6&63|128,Pe[me++]=63&z|128)}return Pe},Mr=function(Ue){let Pe=0;for(let me=0;me<Ue.length;me++){const ye=Ue.charCodeAt(me);ye<128?Pe++:ye<2048?Pe+=2:ye>=55296&&ye<=56319?(Pe+=4,me++):Pe+=3}return Pe};function ni(Ue,Pe=1e3,me=2){const ye=Pe*Math.pow(me,Ue),z=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+z)}function Br(Ue){return Ue&&Ue._delegate?Ue._delegate:Ue}},5089:(hn,ct,U)=>{U.d(ct,{e:()=>ke});var y=U(2340),V=U(5e3),ee=U(520),ie=U(2729);let ke=(()=>{class je{constructor(He,nt){this.http=He,this.router=nt,this.logoutloading=!1}login(He){return this.http.post(`${y.N.apiUrl}login_teacher`,He)}logout(){this.logoutloading=!0,this.http.post(`${y.N.apiUrl}logout`,{}).subscribe(He=>{localStorage.clear(),this.router.navigate(["/auth/login"]),this.logoutloading=!1,window.location.reload()})}}return je.\u0275fac=function(He){return new(He||je)(V.LFG(ee.eN),V.LFG(ie.F0))},je.\u0275prov=V.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})()},507:(hn,ct,U)=>{U.d(ct,{a:()=>ke});var y=U(1591),V=U(5e3),ee=U(2290),ie=U(2729);let ke=(()=>{class je{constructor(He,nt){this.toastr=He,this.router=nt,this.showNotification=!1,this.notificationInfo=null,this.db=(0,y.N8)(),this.messageRef=null}listenToChatUsers(He,nt,Ie){const ve=(0,y.iH)(this.db,`Subjects-Messages/${He}`);(0,y.jM)(ve,Qe=>{var St,vt;const _t=Qe.val();if(!_t)return Ie([]);const Vt=[];for(const dt in _t){const ot=Object.values(_t[dt]),Ge=ot.sort((De,Je)=>new Date(De.date).getTime()-new Date(Je.date).getTime()),qt=Ge[Ge.length-1],at=ot.some(De=>!1===De.did_read&&De.from_id!==nt&&"_1"!==De.from_id&&!De.from_display_name);dt!=localStorage.getItem("userid")&&Vt.push({userId:dt,name:(null===(St=Ge.find(De=>De.from_id!==nt&&"_1"!==De.from_id&&!De.from_display_name))||void 0===St?void 0:St.from)||"\u0637\u0627\u0644\u0628",phone:(null===(vt=Ge.find(De=>De.from_id!==nt&&"_1"!==De.from_id&&!De.from_display_name))||void 0===vt?void 0:vt.from_number)||"",hasUnread:at,lastDate:qt.date})}Vt.sort((dt,ot)=>new Date(ot.lastDate).getTime()-new Date(dt.lastDate).getTime()),Ie(Vt)})}listenToMessages(He,nt,Ie,ve){this.messageRef&&(0,y.S1)(this.messageRef);const Qe=`Subjects-Messages/${He}/${nt}`;this.messageRef=(0,y.iH)(this.db,Qe);const St=[];(0,y.yv)(this.messageRef,vt=>{const _t=vt.val(),Vt=vt.key;_t.from_id!==Ie&&"_1"!==_t.from_id&&!1===_t.did_read&&!_t.from_display_name&&(console.log(Qe),(0,y.Vx)((0,y.iH)(this.db,`${Qe}/${Vt}`),{did_read:!0})),St.push(Object.assign(Object.assign({},_t),{key:Vt}));const dt=[...St].sort((ot,Ge)=>new Date(ot.date).getTime()-new Date(Ge.date).getTime());ve([...dt])})}markMessagesAsRead(He,nt,Ie){const ve=`Subjects-Messages/${He}/${nt}`,Qe=(0,y.iH)(this.db,ve);(0,y.U2)(Qe).then(St=>{St.forEach(vt=>{const _t=vt.val();_t.from_id!==Ie&&"_1"!==_t.from_id&&!1===_t.did_read&&!_t.from_display_name&&(console.log("doneeee"),(0,y.Vx)((0,y.iH)(this.db,`${ve}/${vt.key}`),{did_read:!0}))})})}stopListeningToMessages(){this.messageRef&&((0,y.S1)(this.messageRef),this.messageRef=null)}getTeacherChatList(He,nt,Ie){let ve=[];He.forEach(Qe=>{const St=(0,y.iH)(this.db,`Subjects-Messages/${Qe}`);(0,y.yv)(St,vt=>{const _t=vt.key,Vt=(0,y.iH)(this.db,`Subjects-Messages/${Qe}/${_t}`);(0,y.yv)(Vt,dt=>{console.log("ui");const ot=dt.val();if(ot.to_id==Qe||ot.from_id==localStorage.getItem("userid")){const Ge=!ot.did_read&&ot.from_id!==nt,qt=ve.findIndex(at=>at.userId===_t&&at.materialId===Qe);if(qt>-1){const at=new Date(ve[qt].lastMessageDate).getTime();new Date(ot.date).getTime()>at&&(ve[qt].lastMessageDate=ot.date,ve[qt].lastMessage="audio"==(null==ot?void 0:ot.type)?"\u0631\u0633\u0627\u0644\u0629 \u0635\u0648\u062a\u064a\u0629":"photo"==(null==ot?void 0:ot.type)?"\u0635\u0648\u0631\u0629":ot.message_content||""),ve[qt].hasUnread=ve[qt].hasUnread||Ge}else ot.from_id!=localStorage.getItem("userid")&&ve.push({materialId:Qe,materialName:ot.material_name,userId:_t,userName:ot.from,lastMessageDate:ot.date,lastMessage:"audio"==(null==ot?void 0:ot.type)?"\u0631\u0633\u0627\u0644\u0629 \u0635\u0648\u062a\u064a\u0629":"photo"==(null==ot?void 0:ot.type)?"\u0635\u0648\u0631\u0629":ot.message_content||"",hasUnread:Ge});ve.sort((at,De)=>new Date(De.lastMessageDate).getTime()-new Date(at.lastMessageDate).getTime()),Ie([...ve])}}),(0,y.Jr)(Vt,dt=>{const ot=dt.val();console.log(ot,ve),ve=ve.map(Ge=>Ge.materialId==ot.to_id&&Ge.userId==ot.from_id?Object.assign(Object.assign({},Ge),{hasUnread:!ot.did_read,lastMessage:"audio"==(null==ot?void 0:ot.type)?"\u0631\u0633\u0627\u0644\u0629 \u0635\u0648\u062a\u064a\u0629":"photo"==(null==ot?void 0:ot.type)?"\u0635\u0648\u0631\u0629":ot.message_content||"",lastMessageDate:ot.date}):Ge),Ie([...ve])})})})}listenForNewMessages(He,nt){const Ie=new Date;He.forEach(ve=>{const Qe=(0,y.iH)(this.db,`Subjects-Messages/${ve}`);(0,y.yv)(Qe,St=>{const _t=(0,y.iH)(this.db,`Subjects-Messages/${ve}/${St.key}`);(0,y.yv)(_t,Vt=>{var dt,ot;const Ge=Vt.val();new Date(Ge.date)>Ie&&He.includes(Ge.to_id)&&Ge.from_id!==nt&&"_1"!==Ge.from_id&&!Ge.from_display_name&&(this.notificationInfo=Ge,console.log(this.notificationInfo),this.toastr.info(null===(dt=this.notificationInfo)||void 0===dt?void 0:dt.from,null===(ot=this.notificationInfo)||void 0===ot?void 0:ot.material_name).onTap.subscribe(()=>{this.router.navigate(["/all-msgs"])}))})})})}}return je.\u0275fac=function(He){return new(He||je)(V.LFG(ee._W),V.LFG(ie.F0))},je.\u0275prov=V.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})()},2169:(hn,ct,U)=>{U.d(ct,{Y:()=>ie});var y=U(2340),V=U(5e3),ee=U(520);let ie=(()=>{class ke{constructor(Xe){this.http=Xe}getHomeStages(){return this.http.get(`${y.N.apiUrl}teacher/materials`)}}return ke.\u0275fac=function(Xe){return new(Xe||ke)(V.LFG(ee.eN))},ke.\u0275prov=V.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})()},4466:(hn,ct,U)=>{U.d(ct,{m:()=>He});var y=U(9808),V=U(2729),ee=U(2382),ie=U(520),ke=U(2290),je=U(377),Xe=U(5e3);let He=(()=>{class nt{}return nt.\u0275fac=function(ve){return new(ve||nt)},nt.\u0275mod=Xe.oAB({type:nt}),nt.\u0275inj=Xe.cJS({providers:[y.uU],imports:[[je.TE,y.ez,V.Bz,ee.UX,ee.u5,ie.JF,ke.Rh.forRoot()],je.TE,ee.UX,ee.u5,ie.JF,ke.Rh]}),nt})()},2340:(hn,ct,U)=>{U.d(ct,{N:()=>y});const y={production:!0,apiUrl:"https://drastiiq8.com/demo-dev/Drasti-Backend/public/api/"}},6867:(hn,ct,U)=>{var y=U(2313),V=U(5e3),ee=U(2729);let ie=(()=>{class N{constructor(w){this.router=w}canActivate(w,x){return!localStorage.getItem("namnamToken")||(this.router.navigate(["/"]),!1)}}return N.\u0275fac=function(w){return new(w||N)(V.LFG(ee.F0))},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),ke=(()=>{class N{constructor(w){this.title=w}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - NAMNAM")}}return N.\u0275fac=function(w){return new(w||N)(V.Y36(y.Dx))},N.\u0275cmp=V.Xpm({type:N,selectors:[["app-notfound"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(w,x){1&w&&(V.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),V._uU(4,"\u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627."),V.qZA()()()())},styles:[""]}),N})(),je=(()=>{class N{constructor(w){this.router=w}canActivate(w,x){return!!localStorage.getItem("namnamToken")||(this.router.navigate(["/auth/login"]),!1)}}return N.\u0275fac=function(w){return new(w||N)(V.LFG(ee.F0))},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const Xe=[{path:"",loadChildren:()=>Promise.all([U.e(592),U.e(499)]).then(U.bind(U,6499)).then(N=>N.HomeModule),canActivate:[je]},{path:"material-chat/:id/:name",loadChildren:()=>Promise.all([U.e(592),U.e(359)]).then(U.bind(U,8359)).then(N=>N.ChattingModule),canActivate:[je]},{path:"all-msgs",loadChildren:()=>Promise.all([U.e(592),U.e(522)]).then(U.bind(U,522)).then(N=>N.AllMsgsModule),canActivate:[je]},{path:"auth",loadChildren:()=>U.e(836).then(U.bind(U,7836)).then(N=>N.AuthModule),canActivate:[ie]},{path:"**",component:ke}];let He=(()=>{class N{}return N.\u0275fac=function(w){return new(w||N)},N.\u0275mod=V.oAB({type:N}),N.\u0275inj=V.cJS({imports:[[ee.Bz.forRoot(Xe,{initialNavigation:"enabled",scrollPositionRestoration:"enabled"})],ee.Bz]}),N})();var nt=U(259),Ie=U(1591),ve=U(4004),Qe=U(4986),St=U(8306),vt=U(9646),_t=U(6451),Vt=U(3099),dt=U(3900),ot=U(5026),Ge=U(1884),qt=U(4482),at=U(5403),De=U(8421),Je=U(4671),Ct=U(5032),bt=U(7669),Nt=U(4976),Rn=U(2011),Ln=(U(9568),U(3942)),un=U(4859),sn=U(1627),Ot=U(2090);const it=new(U(1877).Yd)("@firebase/database-compat"),tt=function(N){it.warn("FIREBASE WARNING: "+N)};class Ee{constructor(E){this._delegate=E}cancel(E){(0,Ot.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Ot.Wj)("OnDisconnect.cancel","onComplete",E,!0);const w=this._delegate.cancel();return E&&w.then(()=>E(null),x=>E(x)),w}remove(E){(0,Ot.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Ot.Wj)("OnDisconnect.remove","onComplete",E,!0);const w=this._delegate.remove();return E&&w.then(()=>E(null),x=>E(x)),w}set(E,w){(0,Ot.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Ot.Wj)("OnDisconnect.set","onComplete",w,!0);const x=this._delegate.set(E);return w&&x.then(()=>w(null),Z=>w(Z)),x}setWithPriority(E,w,x){(0,Ot.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Ot.Wj)("OnDisconnect.setWithPriority","onComplete",x,!0);const Z=this._delegate.setWithPriority(E,w);return x&&Z.then(()=>x(null),oe=>x(oe)),Z}update(E,w){if((0,Ot.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(E)){const Z={};for(let oe=0;oe<E.length;++oe)Z[""+oe]=E[oe];E=Z,tt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Ot.Wj)("OnDisconnect.update","onComplete",w,!0);const x=this._delegate.update(E);return w&&x.then(()=>w(null),Z=>w(Z)),x}}class Ne{constructor(E,w){this.committed=E,this.snapshot=w}toJSON(){return(0,Ot.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class st{constructor(E,w){this._database=E,this._delegate=w}val(){return(0,Ot.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Ot.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Ot.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Ot.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(E){return(0,Ot.Dv)("DataSnapshot.child",0,1,arguments.length),E=String(E),(0,sn.FQ)("DataSnapshot.child","path",E,!1),new st(this._database,this._delegate.child(E))}hasChild(E){return(0,Ot.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,sn.FQ)("DataSnapshot.hasChild","path",E,!1),this._delegate.hasChild(E)}getPriority(){return(0,Ot.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(E){return(0,Ot.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Ot.Wj)("DataSnapshot.forEach","action",E,!1),this._delegate.forEach(w=>E(new st(this._database,w)))}hasChildren(){return(0,Ot.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Ot.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Ot.Dv)("DataSnapshot.ref",0,0,arguments.length),new pn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Zt{constructor(E,w){this.database=E,this._delegate=w}on(E,w,x,Z){var oe;(0,Ot.Dv)("Query.on",2,4,arguments.length),(0,Ot.Wj)("Query.on","callback",w,!1);const Te=Zt.getCancelAndContextArgs_("Query.on",x,Z),Re=(p,_)=>{w.call(Te.context,new st(this.database,p),_)};Re.userCallback=w,Re.context=Te.context;const C=null===(oe=Te.cancel)||void 0===oe?void 0:oe.bind(Te.context);switch(E){case"value":return(0,sn.jM)(this._delegate,Re,C),w;case"child_added":return(0,sn.yv)(this._delegate,Re,C),w;case"child_removed":return(0,sn.MQ)(this._delegate,Re,C),w;case"child_changed":return(0,sn.Jr)(this._delegate,Re,C),w;case"child_moved":return(0,sn.Vt)(this._delegate,Re,C),w;default:throw new Error((0,Ot.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(E,w,x){if((0,Ot.Dv)("Query.off",0,3,arguments.length),function(N,E,w){if(void 0!==E)switch(E){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Ot.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,E),(0,Ot.Wj)("Query.off","callback",w,!0),(0,Ot.lb)("Query.off","context",x,!0),w){const Z=()=>{};Z.userCallback=w,Z.context=x,(0,sn.S1)(this._delegate,E,Z)}else(0,sn.S1)(this._delegate,E)}get(){return(0,sn.U2)(this._delegate).then(E=>new st(this.database,E))}once(E,w,x,Z){(0,Ot.Dv)("Query.once",1,4,arguments.length),(0,Ot.Wj)("Query.once","callback",w,!0);const oe=Zt.getCancelAndContextArgs_("Query.once",x,Z),Te=new Ot.BH,Re=(p,_)=>{const b=new st(this.database,p);w&&w.call(oe.context,b,_),Te.resolve(b)};Re.userCallback=w,Re.context=oe.context;const C=p=>{oe.cancel&&oe.cancel.call(oe.context,p),Te.reject(p)};switch(E){case"value":(0,sn.jM)(this._delegate,Re,C,{onlyOnce:!0});break;case"child_added":(0,sn.yv)(this._delegate,Re,C,{onlyOnce:!0});break;case"child_removed":(0,sn.MQ)(this._delegate,Re,C,{onlyOnce:!0});break;case"child_changed":(0,sn.Jr)(this._delegate,Re,C,{onlyOnce:!0});break;case"child_moved":(0,sn.Vt)(this._delegate,Re,C,{onlyOnce:!0});break;default:throw new Error((0,Ot.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return Te.promise}limitToFirst(E){return(0,Ot.Dv)("Query.limitToFirst",1,1,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.Kk)(E)))}limitToLast(E){return(0,Ot.Dv)("Query.limitToLast",1,1,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.vh)(E)))}orderByChild(E){return(0,Ot.Dv)("Query.orderByChild",1,1,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.g2)(E)))}orderByKey(){return(0,Ot.Dv)("Query.orderByKey",0,0,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.R)()))}orderByPriority(){return(0,Ot.Dv)("Query.orderByPriority",0,0,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.HE)()))}orderByValue(){return(0,Ot.Dv)("Query.orderByValue",0,0,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.Bd)()))}startAt(E=null,w){return(0,Ot.Dv)("Query.startAt",0,2,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.e0)(E,w)))}startAfter(E=null,w){return(0,Ot.Dv)("Query.startAfter",0,2,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.TQ)(E,w)))}endAt(E=null,w){return(0,Ot.Dv)("Query.endAt",0,2,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.Wu)(E,w)))}endBefore(E=null,w){return(0,Ot.Dv)("Query.endBefore",0,2,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.Lx)(E,w)))}equalTo(E,w){return(0,Ot.Dv)("Query.equalTo",1,2,arguments.length),new Zt(this.database,(0,sn.IO)(this._delegate,(0,sn.EW)(E,w)))}toString(){return(0,Ot.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Ot.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(E){if((0,Ot.Dv)("Query.isEqual",1,1,arguments.length),!(E instanceof Zt))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(E._delegate)}static getCancelAndContextArgs_(E,w,x){const Z={cancel:void 0,context:void 0};if(w&&x)Z.cancel=w,(0,Ot.Wj)(E,"cancel",Z.cancel,!0),Z.context=x,(0,Ot.lb)(E,"context",Z.context,!0);else if(w)if("object"==typeof w&&null!==w)Z.context=w;else{if("function"!=typeof w)throw new Error((0,Ot.gK)(E,"cancelOrContext")+" must either be a cancel callback or a context object.");Z.cancel=w}return Z}get ref(){return new pn(this.database,new sn.tn(this._delegate._repo,this._delegate._path))}}class pn extends Zt{constructor(E,w){super(E,new sn.JH(w._repo,w._path,new sn.G$,!1)),this.database=E,this._delegate=w}getKey(){return(0,Ot.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(E){return(0,Ot.Dv)("Reference.child",1,1,arguments.length),"number"==typeof E&&(E=String(E)),new pn(this.database,(0,sn.iU)(this._delegate,E))}getParent(){(0,Ot.Dv)("Reference.parent",0,0,arguments.length);const E=this._delegate.parent;return E?new pn(this.database,E):null}getRoot(){return(0,Ot.Dv)("Reference.root",0,0,arguments.length),new pn(this.database,this._delegate.root)}set(E,w){(0,Ot.Dv)("Reference.set",1,2,arguments.length),(0,Ot.Wj)("Reference.set","onComplete",w,!0);const x=(0,sn.t8)(this._delegate,E);return w&&x.then(()=>w(null),Z=>w(Z)),x}update(E,w){if((0,Ot.Dv)("Reference.update",1,2,arguments.length),Array.isArray(E)){const Z={};for(let oe=0;oe<E.length;++oe)Z[""+oe]=E[oe];E=Z,tt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,sn.mI)("Reference.update",this._delegate._path),(0,Ot.Wj)("Reference.update","onComplete",w,!0);const x=(0,sn.Vx)(this._delegate,E);return w&&x.then(()=>w(null),Z=>w(Z)),x}setWithPriority(E,w,x){(0,Ot.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Ot.Wj)("Reference.setWithPriority","onComplete",x,!0);const Z=(0,sn.cy)(this._delegate,E,w);return x&&Z.then(()=>x(null),oe=>x(oe)),Z}remove(E){(0,Ot.Dv)("Reference.remove",0,1,arguments.length),(0,Ot.Wj)("Reference.remove","onComplete",E,!0);const w=(0,sn.Od)(this._delegate);return E&&w.then(()=>E(null),x=>E(x)),w}transaction(E,w,x){(0,Ot.Dv)("Reference.transaction",1,3,arguments.length),(0,Ot.Wj)("Reference.transaction","transactionUpdate",E,!1),(0,Ot.Wj)("Reference.transaction","onComplete",w,!0),function(N,E,w,x){if(void 0!==w&&"boolean"!=typeof w)throw new Error((0,Ot.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,x);const Z=(0,sn.i3)(this._delegate,E,{applyLocally:x}).then(oe=>new Ne(oe.committed,new st(this.database,oe.snapshot)));return w&&Z.then(oe=>w(null,oe.committed,oe.snapshot),oe=>w(oe,!1,null)),Z}setPriority(E,w){(0,Ot.Dv)("Reference.setPriority",1,2,arguments.length),(0,Ot.Wj)("Reference.setPriority","onComplete",w,!0);const x=(0,sn.Sl)(this._delegate,E);return w&&x.then(()=>w(null),Z=>w(Z)),x}push(E,w){(0,Ot.Dv)("Reference.push",0,2,arguments.length),(0,Ot.Wj)("Reference.push","onComplete",w,!0);const x=(0,sn.VF)(this._delegate,E),Z=x.then(Te=>new pn(this.database,Te));w&&Z.then(()=>w(null),Te=>w(Te));const oe=new pn(this.database,x);return oe.then=Z.then.bind(Z),oe.catch=Z.catch.bind(Z,void 0),oe}onDisconnect(){return(0,sn.mI)("Reference.onDisconnect",this._delegate._path),new Ee(new sn.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wn{constructor(E,w){this._delegate=E,this.app=w,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:sn.TD,forceLongPolling:sn.Ot}}useEmulator(E,w,x={}){(0,sn.dH)(this._delegate,E,w,x)}ref(E){if((0,Ot.Dv)("database.ref",0,1,arguments.length),E instanceof pn){const w=(0,sn.qT)(this._delegate,E.toString());return new pn(this,w)}{const w=(0,sn.iH)(this._delegate,E);return new pn(this,w)}}refFromURL(E){(0,Ot.Dv)("database.refFromURL",1,1,arguments.length);const x=(0,sn.qT)(this._delegate,E);return new pn(this,x)}goOffline(){return(0,Ot.Dv)("database.goOffline",0,0,arguments.length),(0,sn.Sb)(this._delegate)}goOnline(){return(0,Ot.Dv)("database.goOnline",0,0,arguments.length),(0,sn.$o)(this._delegate)}}wn.ServerValue={TIMESTAMP:(0,sn.Bt)(),increment:N=>(0,sn.nP)(N)};var ur=Object.freeze({__proto__:null,initStandalone:function kn({app:N,url:E,version:w,customAuthImpl:x,namespace:Z,nodeAdmin:oe=!1}){(0,sn.AM)(w);const Te=new un.zt("auth-internal",new un.H0("database-standalone"));return Te.setComponent(new un.wA("auth-internal",()=>x,"PRIVATE")),{instance:new wn((0,sn.wj)(N,Te,void 0,E,oe),N),namespace:Z}}});const _r=wn.ServerValue;!function jn(N){N.INTERNAL.registerComponent(new un.wA("database-compat",(E,{instanceIdentifier:w})=>{const x=E.getProvider("app-compat").getImmediate(),Z=E.getProvider("database").getImmediate({identifier:w});return new wn(Z,x)},"PUBLIC").setServiceProps({Reference:pn,Query:Zt,Database:wn,DataSnapshot:st,enableLogging:sn.U7,INTERNAL:ur,ServerValue:_r}).setMultipleInstances(!0)),N.registerVersion("@firebase/database-compat","0.3.4")}(Ln.Z);var Jn=U(1205),yn=U(6215);function ti(N){return null==N}function Li(N){return"function"==typeof N.set}function xt(N,E){return Li(E)?E:N.ref(E)}function We(N,E){if(function On(N){return"string"==typeof N}(N))return E.stringCase();if(Li(N))return E.firebaseCase();if(function Vn(N){return"function"==typeof N.exportVal}(N))return E.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof N)}function ze(N,E,w="on",x=Qe.z){return new St.y(Z=>{let oe=null;return oe=N[w](E,(Te,Re)=>{x.schedule(()=>{Z.next({snapshot:Te,prevKey:Re})}),"once"===w&&x.schedule(()=>Z.complete())},Te=>{x.schedule(()=>Z.error(Te))}),"on"===w?{unsubscribe(){null!=oe&&N.off(E,oe)}}:{unsubscribe(){}}}).pipe((0,ve.U)(Z=>{const{snapshot:oe,prevKey:Te}=Z;let Re=null;return oe.exists()&&(Re=oe.key),{type:E,payload:oe,prevKey:Te,key:Re}}),(0,Vt.B)())}function At(N,E){const w=N.length;for(let x=0;x<w;x++)if(N[x].payload.key===E)return x;return-1}function on(N,E){const{payload:w,prevKey:x,key:Z}=E,oe=At(N,Z),Te=function Yt(N,E){if(ti(E))return 0;{const w=At(N,E);return-1===w?N.length:w+1}}(N,x);switch(E.type){case"value":if(E.payload&&E.payload.exists()){let Re=null;E.payload.forEach(C=>{const p={payload:C,type:"value",prevKey:Re,key:C.key};return Re=C.key,N=[...N,p],!1})}return N;case"child_added":if(oe>-1){const Re=N[oe-1];(Re&&Re.key||null)!==x&&(N=N.filter(C=>C.payload.key!==w.key)).splice(Te,0,E)}else{if(null==x)return[E,...N];(N=N.slice()).splice(Te,0,E)}return N;case"child_removed":return N.filter(Re=>Re.payload.key!==w.key);case"child_changed":return N.map(Re=>Re.payload.key===Z?E:Re);case"child_moved":if(oe>-1){const Re=N.splice(oe,1)[0];return(N=N.slice()).splice(Te,0,Re),N}return N;default:return N}}function Dr(N){return(ti(N)||0===N.length)&&(N=["child_added","child_removed","child_changed","child_moved"]),N}function Kn(N,E,w){return function ft(N,E,w){return ze(N,"value","once",w).pipe((0,dt.w)(x=>{const Z=[(0,vt.of)(x)];return E.forEach(oe=>Z.push(ze(N,oe,"on",w))),(0,_t.T)(...Z).pipe((0,ot.R)(on,[]))}),(0,Ge.x)())}(N,E=Dr(E),w)}function Un(N,E,w){const x=(E=Dr(E)).map(Z=>ze(N,Z,"on",w));return(0,_t.T)(...x)}function rn(N,E){return function(x,Z){return We(x,{stringCase:()=>N.child(x)[E](Z),firebaseCase:()=>x[E](Z),snapshotCase:()=>x.ref[E](Z)})}}function Mr(N){return function(w){return w?We(w,{stringCase:()=>N.child(w).remove(),firebaseCase:()=>w.remove(),snapshotCase:()=>w.ref.remove()}):N.remove()}}function cr(N,E){return function(){return ze(N,"value","on",E)}}U(9260);const Nr=new V.OlP("angularfire2.realtimeDatabaseURL"),jr=new V.OlP("angularfire2.database.use-emulator");let ni=(()=>{class N{constructor(w,x,Z,oe,Te,Re,C,p,_,b,Y,ce,Ve,rt,$t){this.schedulers=Re;const mn=C,Pn=(0,Rn.on)(w,Te,x);p&&(0,Jn.nw)(Pn,Te,_,Y,ce,Ve,b,rt),this.database=(0,Rn.cc)(`${Pn.name}.database.${Z}`,"AngularFireDatabase",Pn.name,()=>{const Wn=Te.runOutsideAngular(()=>Pn.database(Z||void 0));return mn&&Wn.useEmulator(...mn),Wn},[mn])}list(w,x){const Z=this.schedulers.ngZone.runOutsideAngular(()=>xt(this.database,w));let oe=Z;return x&&(oe=x(Z)),function Xn(N,E){const w=E.schedulers.outsideAngular,x=E.schedulers.ngZone.run(()=>N.ref);return{query:N,update:rn(x,"update"),set:rn(x,"set"),push:Z=>x.push(Z),remove:Mr(x),snapshotChanges:Z=>Kn(N,Z,w).pipe(Nt.iC),stateChanges:Z=>Un(N,Z,w).pipe(Nt.iC),auditTrail:Z=>function vi(N,E,w){return function mr(N,E,w){return function ar(N,E){return ze(N,"value","on",E).pipe((0,ve.U)(w=>{let x;return w.payload.forEach(Z=>(x=Z.key,!1)),{data:w,lastKeyToLoad:x}}))}(N,w).pipe(function Se(...N){const E=(0,bt.jO)(N);return(0,qt.e)((w,x)=>{const Z=N.length,oe=new Array(Z);let Te=N.map(()=>!1),Re=!1;for(let C=0;C<Z;C++)(0,De.Xf)(N[C]).subscribe((0,at.x)(x,p=>{oe[C]=p,!Re&&!Te[C]&&(Te[C]=!0,(Re=Te.every(Je.y))&&(Te=null))},Ct.Z));w.subscribe((0,at.x)(x,C=>{if(Re){const p=[C,...oe];x.next(E?E(...p):p)}}))})}(E),(0,ve.U)(([Z,oe])=>{const Te=Z.lastKeyToLoad,Re=oe.map(C=>C.key);return{actions:oe,lastKeyToLoad:Te,loadedKeys:Re}}),function Ht(N){return(0,qt.e)((E,w)=>{let x=!1,Z=0;E.subscribe((0,at.x)(w,oe=>(x||(x=!N(oe,Z++)))&&w.next(oe)))})}(Z=>-1===Z.loadedKeys.indexOf(Z.lastKeyToLoad)),(0,ve.U)(Z=>Z.actions))}(N,Un(N,E).pipe((0,ot.R)((Z,oe)=>[...Z,oe],[])),w)}(N,Z,w).pipe(Nt.iC),valueChanges:(Z,oe)=>Kn(N,Z,w).pipe((0,ve.U)(Re=>Re.map(C=>oe&&oe.idField?Object.assign(Object.assign({},C.payload.val()),{[oe.idField]:C.key}):C.payload.val())),Nt.iC)}}(oe,this)}object(w){return function Qn(N,E){return{query:N,snapshotChanges:()=>cr(N,E.schedulers.outsideAngular)().pipe(Nt.iC),update:w=>N.ref.update(w),set:w=>N.ref.set(w),remove:()=>N.ref.remove(),valueChanges:()=>cr(N,E.schedulers.outsideAngular)().pipe(Nt.iC,(0,ve.U)(x=>x.payload.exists()?x.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>xt(this.database,w)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return N.\u0275fac=function(w){return new(w||N)(V.LFG(Rn.Dh),V.LFG(Rn.xv,8),V.LFG(Nr,8),V.LFG(V.Lbi),V.LFG(V.R0b),V.LFG(Nt.HU),V.LFG(jr,8),V.LFG(Jn.zQ,8),V.LFG(Jn.Qv,8),V.LFG(Jn.L6,8),V.LFG(Jn._Q,8),V.LFG(Jn.rT,8),V.LFG(Jn.lh,8),V.LFG(Jn.f7,8),V.LFG(yn.nm,8))},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac,providedIn:"any"}),N})();var Mi=U(2169),Br=U(507),Ue=U(5089),Pe=U(9808);function me(N,E){if(1&N){const w=V.EpF();V.TgZ(0,"div",6)(1,"a",7),V._uU(2,"\u0645\u0648\u0627\u062f\u064a"),V.qZA(),V._UZ(3,"span",8),V.TgZ(4,"a",9),V._uU(5,"\u0627\u0644\u0627\u0633\u0626\u0644\u0629"),V.qZA(),V._UZ(6,"span",8),V.TgZ(7,"button",10),V.NdJ("click",function(){return V.CHM(w),V.oxw().authService.logout()}),V._uU(8," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),V.qZA()()}if(2&N){const w=V.oxw();V.xp6(7),V.Q6J("disabled",w.authService.logoutloading)}}let ye=(()=>{class N{constructor(w){this.authService=w}ngOnInit(){}isLogin(){return!!localStorage.getItem("namnamToken")}}return N.\u0275fac=function(w){return new(w||N)(V.Y36(Ue.e))},N.\u0275cmp=V.Xpm({type:N,selectors:[["app-navbar"]],decls:7,vars:1,consts:[[1,"container","mt-2","d-md-none",2,"direction","ltr","text-align","left"],[1,"container","flx"],[1,"logoParent"],["routerLink","/","aria-label","NAMNAM"],["src","assets/0838de4f-5271-4e88-99d9-c0f89edfe1c2.jfif","alt","NAMNAM",1,"mainlogo"],["class","loginParent","style","display: flex; gap: 10px; align-items: center",4,"ngIf"],[1,"loginParent",2,"display","flex","gap","10px","align-items","center"],["routerLink","/"],[1,"mx-2"],["routerLink","/all-msgs"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(w,x){1&w&&(V.TgZ(0,"nav"),V._UZ(1,"div",0),V.TgZ(2,"div",1)(3,"div",2)(4,"a",3),V._UZ(5,"img",4),V.qZA()(),V.YNc(6,me,9,1,"div",5),V.qZA()()),2&w&&(V.xp6(6),V.Q6J("ngIf",x.isLogin()))},directives:[ee.yS,Pe.O5],styles:[""]}),N})(),z=(()=>{class N{constructor(w,x,Z,oe){this.router=w,this.dbb=x,this.homeService=Z,this.chatService=oe,this.teacherId=localStorage.getItem("userid")}ngOnInit(){this.app=(0,nt.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,Ie.N8)(this.app),localStorage.getItem("userid")&&this.listenForTeacherMessages()}listenForTeacherMessages(){this.homeService.getHomeStages().pipe((0,ve.U)(w=>{var x;let Z=[];return(null===(x=null==w?void 0:w.data)||void 0===x?void 0:x.length)&&(null==w||w.data.forEach(oe=>{var Te;Z.push(String(null===(Te=null==oe?void 0:oe.material)||void 0===Te?void 0:Te.id))})),Z})).subscribe(w=>{this.chatService.listenForNewMessages(w,localStorage.getItem("userid")||"")})}}return N.\u0275fac=function(w){return new(w||N)(V.Y36(ee.F0),V.Y36(ni),V.Y36(Mi.Y),V.Y36(Br.a))},N.\u0275cmp=V.Xpm({type:N,selectors:[["app-root"]],decls:2,vars:0,template:function(w,x){1&w&&V._UZ(0,"app-navbar")(1,"router-outlet")},directives:[ye,ee.lC],styles:[""]}),N})();var te=U(1777);const se=!1;function pt(N){return new V.vHH(3e3,se)}function Dn(){return"undefined"!=typeof window&&void 0!==window.document}function Ir(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Nn(N){switch(N.length){case 0:return new te.ZN;case 1:return N[0];default:return new te.ZE(N)}}function hr(N,E,w,x,Z={},oe={}){const Te=[],Re=[];let C=-1,p=null;if(x.forEach(_=>{const b=_.offset,Y=b==C,ce=Y&&p||{};Object.keys(_).forEach(Ve=>{let rt=Ve,$t=_[Ve];if("offset"!==Ve)switch(rt=E.normalizePropertyName(rt,Te),$t){case te.k1:$t=Z[Ve];break;case te.l3:$t=oe[Ve];break;default:$t=E.normalizeStyleValue(Ve,rt,$t,Te)}ce[rt]=$t}),Y||Re.push(ce),p=ce,C=b}),Te.length)throw function Ys(N){return new V.vHH(3502,se)}();return Re}function Di(N,E,w,x){switch(E){case"start":N.onStart(()=>x(w&&ms(w,"start",N)));break;case"done":N.onDone(()=>x(w&&ms(w,"done",N)));break;case"destroy":N.onDestroy(()=>x(w&&ms(w,"destroy",N)))}}function ms(N,E,w){const x=w.totalTime,oe=ci(N.element,N.triggerName,N.fromState,N.toState,E||N.phaseName,null==x?N.totalTime:x,!!w.disabled),Te=N._data;return null!=Te&&(oe._data=Te),oe}function ci(N,E,w,x,Z="",oe=0,Te){return{element:N,triggerName:E,fromState:w,toState:x,phaseName:Z,totalTime:oe,disabled:!!Te}}function ei(N,E,w){let x;return N instanceof Map?(x=N.get(E),x||N.set(E,x=w)):(x=N[E],x||(x=N[E]=w)),x}function Ns(N){const E=N.indexOf(":");return[N.substring(1,E),N.substr(E+1)]}let js=(N,E)=>!1,Ui=(N,E,w)=>[],mo=null;function Ro(N){const E=N.parentNode||N.host;return E===mo?null:E}(Ir()||"undefined"!=typeof Element)&&(Dn()?(mo=(()=>document.documentElement)(),js=(N,E)=>{for(;E;){if(E===N)return!0;E=Ro(E)}return!1}):js=(N,E)=>N.contains(E),Ui=(N,E,w)=>{if(w)return Array.from(N.querySelectorAll(E));const x=N.querySelector(E);return x?[x]:[]});let ys=null,Wo=!1;function Os(N){ys||(ys=function Tr(){return"undefined"!=typeof document?document.body:null}()||{},Wo=!!ys.style&&"WebkitAppearance"in ys.style);let E=!0;return ys.style&&!function na(N){return"ebkit"==N.substring(1,6)}(N)&&(E=N in ys.style,!E&&Wo&&(E="Webkit"+N.charAt(0).toUpperCase()+N.substr(1)in ys.style)),E}const Ss=js,oo=Ui;let xi=(()=>{class N{validateStyleProperty(w){return Os(w)}matchesElement(w,x){return!1}containsElement(w,x){return Ss(w,x)}getParentElement(w){return Ro(w)}query(w,x,Z){return oo(w,x,Z)}computeStyle(w,x,Z){return Z||""}animate(w,x,Z,oe,Te,Re=[],C){return new te.ZN(Z,oe)}}return N.\u0275fac=function(w){return new(w||N)},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac}),N})(),As=(()=>{class N{}return N.NOOP=new xi,N})();const _o="ng-enter",as="ng-leave",ji="ng-trigger",_s=".ng-trigger",zo="ng-animating",ws=".ng-animating";function Cs(N){if("number"==typeof N)return N;const E=N.match(/^(-?[\.\d]+)(m?s)/);return!E||E.length<2?0:Qs(parseFloat(E[1]),E[2])}function Qs(N,E){return"s"===E?1e3*N:N}function vo(N,E,w){return N.hasOwnProperty("duration")?N:function ns(N,E,w){let Z,oe=0,Te="";if("string"==typeof N){const Re=N.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Re)return E.push(pt()),{duration:0,delay:0,easing:""};Z=Qs(parseFloat(Re[1]),Re[2]);const C=Re[3];null!=C&&(oe=Qs(parseFloat(C),Re[4]));const p=Re[5];p&&(Te=p)}else Z=N;if(!w){let Re=!1,C=E.length;Z<0&&(E.push(function Bt(){return new V.vHH(3100,se)}()),Re=!0),oe<0&&(E.push(function an(){return new V.vHH(3101,se)}()),Re=!0),Re&&E.splice(C,0,pt())}return{duration:Z,delay:oe,easing:Te}}(N,E,w)}function $r(N,E={}){return Object.keys(N).forEach(w=>{E[w]=N[w]}),E}function ls(N,E,w={}){if(E)for(let x in N)w[x]=N[x];else $r(N,w);return w}function Zr(N,E,w){return w?E+":"+w+";":""}function ii(N){let E="";for(let w=0;w<N.style.length;w++){const x=N.style.item(w);E+=Zr(0,x,N.style.getPropertyValue(x))}for(const w in N.style)N.style.hasOwnProperty(w)&&!w.startsWith("_")&&(E+=Zr(0,Fe(w),N.style[w]));N.setAttribute("style",E)}function Oi(N,E,w){N.style&&(Object.keys(E).forEach(x=>{const Z=he(x);w&&!w.hasOwnProperty(x)&&(w[x]=N.style[Z]),N.style[Z]=E[x]}),Ir()&&ii(N))}function Si(N,E){N.style&&(Object.keys(E).forEach(w=>{const x=he(w);N.style[x]=""}),Ir()&&ii(N))}function Pi(N){return Array.isArray(N)?1==N.length?N[0]:(0,te.vP)(N):N}const $s=new RegExp("{{\\s*(.+?)\\s*}}","g");function si(N){let E=[];if("string"==typeof N){let w;for(;w=$s.exec(N);)E.push(w[1]);$s.lastIndex=0}return E}function L(N,E,w){const x=N.toString(),Z=x.replace($s,(oe,Te)=>{let Re=E[Te];return E.hasOwnProperty(Te)||(w.push(function gr(N){return new V.vHH(3003,se)}()),Re=""),Re.toString()});return Z==x?N:Z}function le(N){const E=[];let w=N.next();for(;!w.done;)E.push(w.value),w=N.next();return E}const $=/-+([a-z0-9])/g;function he(N){return N.replace($,(...E)=>E[1].toUpperCase())}function Fe(N){return N.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function gn(N,E,w){switch(E.type){case 7:return N.visitTrigger(E,w);case 0:return N.visitState(E,w);case 1:return N.visitTransition(E,w);case 2:return N.visitSequence(E,w);case 3:return N.visitGroup(E,w);case 4:return N.visitAnimate(E,w);case 5:return N.visitKeyframes(E,w);case 6:return N.visitStyle(E,w);case 8:return N.visitReference(E,w);case 9:return N.visitAnimateChild(E,w);case 10:return N.visitAnimateRef(E,w);case 11:return N.visitQuery(E,w);case 12:return N.visitStagger(E,w);default:throw function tr(N){return new V.vHH(3004,se)}()}}function vr(N,E){return window.getComputedStyle(N)[E]}function ir(N,E){const w=[];return"string"==typeof N?N.split(/\s*,\s*/).forEach(x=>function Rs(N,E,w){if(":"==N[0]){const C=function ko(N,E){switch(N){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(w,x)=>parseFloat(x)>parseFloat(w);case":decrement":return(w,x)=>parseFloat(x)<parseFloat(w);default:return E.push(function Ps(N){return new V.vHH(3016,se)}()),"* => *"}}(N,w);if("function"==typeof C)return void E.push(C);N=C}const x=N.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==x||x.length<4)return w.push(function gs(N){return new V.vHH(3015,se)}()),E;const Z=x[1],oe=x[2],Te=x[3];E.push(q(Z,Te));"<"==oe[0]&&!("*"==Z&&"*"==Te)&&E.push(q(Te,Z))}(x,w,E)):w.push(N),w}const ks=new Set(["true","1"]),Eo=new Set(["false","0"]);function q(N,E){const w=ks.has(N)||Eo.has(N),x=ks.has(E)||Eo.has(E);return(Z,oe)=>{let Te="*"==N||N==Z,Re="*"==E||E==oe;return!Te&&w&&"boolean"==typeof Z&&(Te=Z?ks.has(N):Eo.has(N)),!Re&&x&&"boolean"==typeof oe&&(Re=oe?ks.has(E):Eo.has(E)),Te&&Re}}const j=":self",F=new RegExp(`s*${j}s*,?`,"g");function ue(N,E,w,x){return new Xt(N).build(E,w,x)}class Xt{constructor(E){this._driver=E}build(E,w,x){const Z=new K(w);this._resetContextStyleTimingState(Z);const oe=gn(this,Pi(E),Z);return Z.unsupportedCSSPropertiesFound.size&&Z.unsupportedCSSPropertiesFound.keys(),oe}_resetContextStyleTimingState(E){E.currentQuerySelector="",E.collectedStyles={},E.collectedStyles[""]={},E.currentTime=0}visitTrigger(E,w){let x=w.queryCount=0,Z=w.depCount=0;const oe=[],Te=[];return"@"==E.name.charAt(0)&&w.errors.push(function Ci(){return new V.vHH(3006,se)}()),E.definitions.forEach(Re=>{if(this._resetContextStyleTimingState(w),0==Re.type){const C=Re,p=C.name;p.toString().split(/\s*,\s*/).forEach(_=>{C.name=_,oe.push(this.visitState(C,w))}),C.name=p}else if(1==Re.type){const C=this.visitTransition(Re,w);x+=C.queryCount,Z+=C.depCount,Te.push(C)}else w.errors.push(function Tt(){return new V.vHH(3007,se)}())}),{type:7,name:E.name,states:oe,transitions:Te,queryCount:x,depCount:Z,options:null}}visitState(E,w){const x=this.visitStyle(E.styles,w),Z=E.options&&E.options.params||null;if(x.containsDynamicStyles){const oe=new Set,Te=Z||{};x.styles.forEach(Re=>{if(be(Re)){const C=Re;Object.keys(C).forEach(p=>{si(C[p]).forEach(_=>{Te.hasOwnProperty(_)||oe.add(_)})})}}),oe.size&&(le(oe.values()),w.errors.push(function mt(N,E){return new V.vHH(3008,se)}()))}return{type:0,name:E.name,style:x,options:Z?{params:Z}:null}}visitTransition(E,w){w.queryCount=0,w.depCount=0;const x=gn(this,Pi(E.animation),w);return{type:1,matchers:ir(E.expr,w.errors),animation:x,queryCount:w.queryCount,depCount:w.depCount,options:yt(E.options)}}visitSequence(E,w){return{type:2,steps:E.steps.map(x=>gn(this,x,w)),options:yt(E.options)}}visitGroup(E,w){const x=w.currentTime;let Z=0;const oe=E.steps.map(Te=>{w.currentTime=x;const Re=gn(this,Te,w);return Z=Math.max(Z,w.currentTime),Re});return w.currentTime=Z,{type:3,steps:oe,options:yt(E.options)}}visitAnimate(E,w){const x=function Ke(N,E){if(N.hasOwnProperty("duration"))return N;if("number"==typeof N)return en(vo(N,E).duration,0,"");const w=N;if(w.split(/\s+/).some(oe=>"{"==oe.charAt(0)&&"{"==oe.charAt(1))){const oe=en(0,0,"");return oe.dynamic=!0,oe.strValue=w,oe}const Z=vo(w,E);return en(Z.duration,Z.delay,Z.easing)}(E.timings,w.errors);w.currentAnimateTimings=x;let Z,oe=E.styles?E.styles:(0,te.oB)({});if(5==oe.type)Z=this.visitKeyframes(oe,w);else{let Te=E.styles,Re=!1;if(!Te){Re=!0;const p={};x.easing&&(p.easing=x.easing),Te=(0,te.oB)(p)}w.currentTime+=x.duration+x.delay;const C=this.visitStyle(Te,w);C.isEmptyStep=Re,Z=C}return w.currentAnimateTimings=null,{type:4,timings:x,style:Z,options:null}}visitStyle(E,w){const x=this._makeStyleAst(E,w);return this._validateStyleAst(x,w),x}_makeStyleAst(E,w){const x=[];Array.isArray(E.styles)?E.styles.forEach(Te=>{"string"==typeof Te?Te==te.l3?x.push(Te):w.errors.push(function Ut(N){return new V.vHH(3002,se)}()):x.push(Te)}):x.push(E.styles);let Z=!1,oe=null;return x.forEach(Te=>{if(be(Te)){const Re=Te,C=Re.easing;if(C&&(oe=C,delete Re.easing),!Z)for(let p in Re)if(Re[p].toString().indexOf("{{")>=0){Z=!0;break}}}),{type:6,styles:x,easing:oe,offset:E.offset,containsDynamicStyles:Z,options:null}}_validateStyleAst(E,w){const x=w.currentAnimateTimings;let Z=w.currentTime,oe=w.currentTime;x&&oe>0&&(oe-=x.duration+x.delay),E.styles.forEach(Te=>{"string"!=typeof Te&&Object.keys(Te).forEach(Re=>{if(!this._driver.validateStyleProperty(Re))return delete Te[Re],void w.unsupportedCSSPropertiesFound.add(Re);const C=w.collectedStyles[w.currentQuerySelector],p=C[Re];let _=!0;p&&(oe!=Z&&oe>=p.startTime&&Z<=p.endTime&&(w.errors.push(function ln(N,E,w,x,Z){return new V.vHH(3010,se)}()),_=!1),oe=p.startTime),_&&(C[Re]={startTime:oe,endTime:Z}),w.options&&function Hs(N,E,w){const x=E.params||{},Z=si(N);Z.length&&Z.forEach(oe=>{x.hasOwnProperty(oe)||w.push(function Sn(N){return new V.vHH(3001,se)}())})}(Te[Re],w.options,w.errors)})})}visitKeyframes(E,w){const x={type:5,styles:[],options:null};if(!w.currentAnimateTimings)return w.errors.push(function bn(){return new V.vHH(3011,se)}()),x;let oe=0;const Te=[];let Re=!1,C=!1,p=0;const _=E.steps.map(mn=>{const Pn=this._makeStyleAst(mn,w);let Wn=null!=Pn.offset?Pn.offset:function pe(N){if("string"==typeof N)return null;let E=null;if(Array.isArray(N))N.forEach(w=>{if(be(w)&&w.hasOwnProperty("offset")){const x=w;E=parseFloat(x.offset),delete x.offset}});else if(be(N)&&N.hasOwnProperty("offset")){const w=N;E=parseFloat(w.offset),delete w.offset}return E}(Pn.styles),xr=0;return null!=Wn&&(oe++,xr=Pn.offset=Wn),C=C||xr<0||xr>1,Re=Re||xr<p,p=xr,Te.push(xr),Pn});C&&w.errors.push(function rr(){return new V.vHH(3012,se)}()),Re&&w.errors.push(function Kr(){return new V.vHH(3200,se)}());const b=E.steps.length;let Y=0;oe>0&&oe<b?w.errors.push(function yr(){return new V.vHH(3202,se)}()):0==oe&&(Y=1/(b-1));const ce=b-1,Ve=w.currentTime,rt=w.currentAnimateTimings,$t=rt.duration;return _.forEach((mn,Pn)=>{const Wn=Y>0?Pn==ce?1:Y*Pn:Te[Pn],xr=Wn*$t;w.currentTime=Ve+rt.delay+xr,rt.duration=xr,this._validateStyleAst(mn,w),mn.offset=Wn,x.styles.push(mn)}),x}visitReference(E,w){return{type:8,animation:gn(this,Pi(E.animation),w),options:yt(E.options)}}visitAnimateChild(E,w){return w.depCount++,{type:9,options:yt(E.options)}}visitAnimateRef(E,w){return{type:10,animation:this.visitReference(E.animation,w),options:yt(E.options)}}visitQuery(E,w){const x=w.currentQuerySelector,Z=E.options||{};w.queryCount++,w.currentQuery=E;const[oe,Te]=function Yr(N){const E=!!N.split(/\s*,\s*/).find(w=>w==j);return E&&(N=N.replace(F,"")),N=N.replace(/@\*/g,_s).replace(/@\w+/g,w=>_s+"-"+w.substr(1)).replace(/:animating/g,ws),[N,E]}(E.selector);w.currentQuerySelector=x.length?x+" "+oe:oe,ei(w.collectedStyles,w.currentQuerySelector,{});const Re=gn(this,Pi(E.animation),w);return w.currentQuery=null,w.currentQuerySelector=x,{type:11,selector:oe,limit:Z.limit||0,optional:!!Z.optional,includeSelf:Te,animation:Re,originalSelector:E.selector,options:yt(E.options)}}visitStagger(E,w){w.currentQuery||w.errors.push(function ri(){return new V.vHH(3013,se)}());const x="full"===E.timings?{duration:0,delay:0,easing:"full"}:vo(E.timings,w.errors,!0);return{type:12,animation:gn(this,Pi(E.animation),w),timings:x,options:null}}}class K{constructor(E){this.errors=E,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function be(N){return!Array.isArray(N)&&"object"==typeof N}function yt(N){return N?(N=$r(N)).params&&(N.params=function W(N){return N?$r(N):null}(N.params)):N={},N}function en(N,E,w){return{duration:N,delay:E,easing:w}}function Fn(N,E,w,x,Z,oe,Te=null,Re=!1){return{type:1,element:N,keyframes:E,preStyleProps:w,postStyleProps:x,duration:Z,delay:oe,totalTime:Z+oe,easing:Te,subTimeline:Re}}class xn{constructor(){this._map=new Map}get(E){return this._map.get(E)||[]}append(E,w){let x=this._map.get(E);x||this._map.set(E,x=[]),x.push(...w)}has(E){return this._map.has(E)}clear(){this._map.clear()}}const oi=new RegExp(":enter","g"),hi=new RegExp(":leave","g");function Qr(N,E,w,x,Z,oe={},Te={},Re,C,p=[]){return(new Hi).buildKeyframes(N,E,w,x,Z,oe,Te,Re,C,p)}class Hi{buildKeyframes(E,w,x,Z,oe,Te,Re,C,p,_=[]){p=p||new xn;const b=new es(E,w,p,Z,oe,_,[]);b.options=C,b.currentTimeline.setStyles([Te],null,b.errors,C),gn(this,x,b);const Y=b.timelines.filter(ce=>ce.containsAnimation());if(Object.keys(Re).length){let ce;for(let Ve=Y.length-1;Ve>=0;Ve--){const rt=Y[Ve];if(rt.element===w){ce=rt;break}}ce&&!ce.allowOnlyTimelineStyles()&&ce.setStyles([Re],null,b.errors,C)}return Y.length?Y.map(ce=>ce.buildKeyframes()):[Fn(w,[],[],[],0,0,"",!1)]}visitTrigger(E,w){}visitState(E,w){}visitTransition(E,w){}visitAnimateChild(E,w){const x=w.subInstructions.get(w.element);if(x){const Z=w.createSubContext(E.options),oe=w.currentTimeline.currentTime,Te=this._visitSubInstructions(x,Z,Z.options);oe!=Te&&w.transformIntoNewTimeline(Te)}w.previousNode=E}visitAnimateRef(E,w){const x=w.createSubContext(E.options);x.transformIntoNewTimeline(),this.visitReference(E.animation,x),w.transformIntoNewTimeline(x.currentTimeline.currentTime),w.previousNode=E}_visitSubInstructions(E,w,x){let oe=w.currentTimeline.currentTime;const Te=null!=x.duration?Cs(x.duration):null,Re=null!=x.delay?Cs(x.delay):null;return 0!==Te&&E.forEach(C=>{const p=w.appendInstructionToTimeline(C,Te,Re);oe=Math.max(oe,p.duration+p.delay)}),oe}visitReference(E,w){w.updateOptions(E.options,!0),gn(this,E.animation,w),w.previousNode=E}visitSequence(E,w){const x=w.subContextCount;let Z=w;const oe=E.options;if(oe&&(oe.params||oe.delay)&&(Z=w.createSubContext(oe),Z.transformIntoNewTimeline(),null!=oe.delay)){6==Z.previousNode.type&&(Z.currentTimeline.snapshotCurrentStyles(),Z.previousNode=Jr);const Te=Cs(oe.delay);Z.delayNextStep(Te)}E.steps.length&&(E.steps.forEach(Te=>gn(this,Te,Z)),Z.currentTimeline.applyStylesToKeyframe(),Z.subContextCount>x&&Z.transformIntoNewTimeline()),w.previousNode=E}visitGroup(E,w){const x=[];let Z=w.currentTimeline.currentTime;const oe=E.options&&E.options.delay?Cs(E.options.delay):0;E.steps.forEach(Te=>{const Re=w.createSubContext(E.options);oe&&Re.delayNextStep(oe),gn(this,Te,Re),Z=Math.max(Z,Re.currentTimeline.currentTime),x.push(Re.currentTimeline)}),x.forEach(Te=>w.currentTimeline.mergeTimelineCollectedStyles(Te)),w.transformIntoNewTimeline(Z),w.previousNode=E}_visitTiming(E,w){if(E.dynamic){const x=E.strValue;return vo(w.params?L(x,w.params,w.errors):x,w.errors)}return{duration:E.duration,delay:E.delay,easing:E.easing}}visitAnimate(E,w){const x=w.currentAnimateTimings=this._visitTiming(E.timings,w),Z=w.currentTimeline;x.delay&&(w.incrementTime(x.delay),Z.snapshotCurrentStyles());const oe=E.style;5==oe.type?this.visitKeyframes(oe,w):(w.incrementTime(x.duration),this.visitStyle(oe,w),Z.applyStylesToKeyframe()),w.currentAnimateTimings=null,w.previousNode=E}visitStyle(E,w){const x=w.currentTimeline,Z=w.currentAnimateTimings;!Z&&x.getCurrentStyleProperties().length&&x.forwardFrame();const oe=Z&&Z.easing||E.easing;E.isEmptyStep?x.applyEmptyStep(oe):x.setStyles(E.styles,oe,w.errors,w.options),w.previousNode=E}visitKeyframes(E,w){const x=w.currentAnimateTimings,Z=w.currentTimeline.duration,oe=x.duration,Re=w.createSubContext().currentTimeline;Re.easing=x.easing,E.styles.forEach(C=>{Re.forwardTime((C.offset||0)*oe),Re.setStyles(C.styles,C.easing,w.errors,w.options),Re.applyStylesToKeyframe()}),w.currentTimeline.mergeTimelineCollectedStyles(Re),w.transformIntoNewTimeline(Z+oe),w.previousNode=E}visitQuery(E,w){const x=w.currentTimeline.currentTime,Z=E.options||{},oe=Z.delay?Cs(Z.delay):0;oe&&(6===w.previousNode.type||0==x&&w.currentTimeline.getCurrentStyleProperties().length)&&(w.currentTimeline.snapshotCurrentStyles(),w.previousNode=Jr);let Te=x;const Re=w.invokeQuery(E.selector,E.originalSelector,E.limit,E.includeSelf,!!Z.optional,w.errors);w.currentQueryTotal=Re.length;let C=null;Re.forEach((p,_)=>{w.currentQueryIndex=_;const b=w.createSubContext(E.options,p);oe&&b.delayNextStep(oe),p===w.element&&(C=b.currentTimeline),gn(this,E.animation,b),b.currentTimeline.applyStylesToKeyframe(),Te=Math.max(Te,b.currentTimeline.currentTime)}),w.currentQueryIndex=0,w.currentQueryTotal=0,w.transformIntoNewTimeline(Te),C&&(w.currentTimeline.mergeTimelineCollectedStyles(C),w.currentTimeline.snapshotCurrentStyles()),w.previousNode=E}visitStagger(E,w){const x=w.parentContext,Z=w.currentTimeline,oe=E.timings,Te=Math.abs(oe.duration),Re=Te*(w.currentQueryTotal-1);let C=Te*w.currentQueryIndex;switch(oe.duration<0?"reverse":oe.easing){case"reverse":C=Re-C;break;case"full":C=x.currentStaggerTime}const _=w.currentTimeline;C&&_.delayNextStep(C);const b=_.currentTime;gn(this,E.animation,w),w.previousNode=E,x.currentStaggerTime=Z.currentTime-b+(Z.startTime-x.currentTimeline.startTime)}}const Jr={};class es{constructor(E,w,x,Z,oe,Te,Re,C){this._driver=E,this.element=w,this.subInstructions=x,this._enterClassName=Z,this._leaveClassName=oe,this.errors=Te,this.timelines=Re,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Jr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=C||new Ki(this._driver,w,0),Re.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(E,w){if(!E)return;const x=E;let Z=this.options;null!=x.duration&&(Z.duration=Cs(x.duration)),null!=x.delay&&(Z.delay=Cs(x.delay));const oe=x.params;if(oe){let Te=Z.params;Te||(Te=this.options.params={}),Object.keys(oe).forEach(Re=>{(!w||!Te.hasOwnProperty(Re))&&(Te[Re]=L(oe[Re],Te,this.errors))})}}_copyOptions(){const E={};if(this.options){const w=this.options.params;if(w){const x=E.params={};Object.keys(w).forEach(Z=>{x[Z]=w[Z]})}}return E}createSubContext(E=null,w,x){const Z=w||this.element,oe=new es(this._driver,Z,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Z,x||0));return oe.previousNode=this.previousNode,oe.currentAnimateTimings=this.currentAnimateTimings,oe.options=this._copyOptions(),oe.updateOptions(E),oe.currentQueryIndex=this.currentQueryIndex,oe.currentQueryTotal=this.currentQueryTotal,oe.parentContext=this,this.subContextCount++,oe}transformIntoNewTimeline(E){return this.previousNode=Jr,this.currentTimeline=this.currentTimeline.fork(this.element,E),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(E,w,x){const Z={duration:null!=w?w:E.duration,delay:this.currentTimeline.currentTime+(null!=x?x:0)+E.delay,easing:""},oe=new qi(this._driver,E.element,E.keyframes,E.preStyleProps,E.postStyleProps,Z,E.stretchStartingKeyframe);return this.timelines.push(oe),Z}incrementTime(E){this.currentTimeline.forwardTime(this.currentTimeline.duration+E)}delayNextStep(E){E>0&&this.currentTimeline.delayNextStep(E)}invokeQuery(E,w,x,Z,oe,Te){let Re=[];if(Z&&Re.push(this.element),E.length>0){E=(E=E.replace(oi,"."+this._enterClassName)).replace(hi,"."+this._leaveClassName);let p=this._driver.query(this.element,E,1!=x);0!==x&&(p=x<0?p.slice(p.length+x,p.length):p.slice(0,x)),Re.push(...p)}return!oe&&0==Re.length&&Te.push(function Hr(N){return new V.vHH(3014,se)}()),Re}}class Ki{constructor(E,w,x,Z){this._driver=E,this.element=w,this.startTime=x,this._elementTimelineStylesLookup=Z,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(w),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(w,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(E){const w=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||w?(this.forwardTime(this.currentTime+E),w&&this.snapshotCurrentStyles()):this.startTime+=E}fork(E,w){return this.applyStylesToKeyframe(),new Ki(this._driver,E,w||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(E){this.applyStylesToKeyframe(),this.duration=E,this._loadKeyframe()}_updateStyle(E,w){this._localTimelineStyles[E]=w,this._globalTimelineStyles[E]=w,this._styleSummary[E]={time:this.currentTime,value:w}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(E){E&&(this._previousKeyframe.easing=E),Object.keys(this._globalTimelineStyles).forEach(w=>{this._backFill[w]=this._globalTimelineStyles[w]||te.l3,this._currentKeyframe[w]=te.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(E,w,x,Z){w&&(this._previousKeyframe.easing=w);const oe=Z&&Z.params||{},Te=function Gs(N,E){const w={};let x;return N.forEach(Z=>{"*"===Z?(x=x||Object.keys(E),x.forEach(oe=>{w[oe]=te.l3})):ls(Z,!1,w)}),w}(E,this._globalTimelineStyles);Object.keys(Te).forEach(Re=>{const C=L(Te[Re],oe,x);this._pendingStyles[Re]=C,this._localTimelineStyles.hasOwnProperty(Re)||(this._backFill[Re]=this._globalTimelineStyles.hasOwnProperty(Re)?this._globalTimelineStyles[Re]:te.l3),this._updateStyle(Re,C)})}applyStylesToKeyframe(){const E=this._pendingStyles,w=Object.keys(E);0!=w.length&&(this._pendingStyles={},w.forEach(x=>{this._currentKeyframe[x]=E[x]}),Object.keys(this._localTimelineStyles).forEach(x=>{this._currentKeyframe.hasOwnProperty(x)||(this._currentKeyframe[x]=this._localTimelineStyles[x])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(E=>{const w=this._localTimelineStyles[E];this._pendingStyles[E]=w,this._updateStyle(E,w)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const E=[];for(let w in this._currentKeyframe)E.push(w);return E}mergeTimelineCollectedStyles(E){Object.keys(E._styleSummary).forEach(w=>{const x=this._styleSummary[w],Z=E._styleSummary[w];(!x||Z.time>x.time)&&this._updateStyle(w,Z.value)})}buildKeyframes(){this.applyStylesToKeyframe();const E=new Set,w=new Set,x=1===this._keyframes.size&&0===this.duration;let Z=[];this._keyframes.forEach((Re,C)=>{const p=ls(Re,!0);Object.keys(p).forEach(_=>{const b=p[_];b==te.k1?E.add(_):b==te.l3&&w.add(_)}),x||(p.offset=C/this.duration),Z.push(p)});const oe=E.size?le(E.values()):[],Te=w.size?le(w.values()):[];if(x){const Re=Z[0],C=$r(Re);Re.offset=0,C.offset=1,Z=[Re,C]}return Fn(this.element,Z,oe,Te,this.duration,this.startTime,this.easing,!1)}}class qi extends Ki{constructor(E,w,x,Z,oe,Te,Re=!1){super(E,w,Te.delay),this.keyframes=x,this.preStyleProps=Z,this.postStyleProps=oe,this._stretchStartingKeyframe=Re,this.timings={duration:Te.duration,delay:Te.delay,easing:Te.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let E=this.keyframes,{delay:w,duration:x,easing:Z}=this.timings;if(this._stretchStartingKeyframe&&w){const oe=[],Te=x+w,Re=w/Te,C=ls(E[0],!1);C.offset=0,oe.push(C);const p=ls(E[0],!1);p.offset=Ni(Re),oe.push(p);const _=E.length-1;for(let b=1;b<=_;b++){let Y=ls(E[b],!1);Y.offset=Ni((w+Y.offset*x)/Te),oe.push(Y)}x=Te,w=0,Z="",E=oe}return Fn(this.element,E,this.preStyleProps,this.postStyleProps,x,w,Z,!0)}}function Ni(N,E=3){const w=Math.pow(10,E-1);return Math.round(N*w)/w}class Fo{}class Xs extends Fo{normalizePropertyName(E,w){return he(E)}normalizeStyleValue(E,w,x,Z){let oe="";const Te=x.toString().trim();if(us[w]&&0!==x&&"0"!==x)if("number"==typeof x)oe="px";else{const Re=x.match(/^[+-]?[\d\.]+([a-z]*)$/);Re&&0==Re[1].length&&Z.push(function ai(N,E){return new V.vHH(3005,se)}())}return Te+oe}}const us=(()=>function il(N){const E={};return N.forEach(w=>E[w]=!0),E}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function lo(N,E,w,x,Z,oe,Te,Re,C,p,_,b,Y){return{type:0,element:N,triggerName:E,isRemovalTransition:Z,fromState:w,fromStyles:oe,toState:x,toStyles:Te,timelines:Re,queriedElements:C,preStyleProps:p,postStyleProps:_,totalTime:b,errors:Y}}const ca={};class ia{constructor(E,w,x){this._triggerName=E,this.ast=w,this._stateStyles=x}match(E,w,x,Z){return function Ei(N,E,w,x,Z){return N.some(oe=>oe(E,w,x,Z))}(this.ast.matchers,E,w,x,Z)}buildStyles(E,w,x){const Z=this._stateStyles["*"],oe=this._stateStyles[E],Te=Z?Z.buildStyles(w,x):{};return oe?oe.buildStyles(w,x):Te}build(E,w,x,Z,oe,Te,Re,C,p,_){const b=[],Y=this.ast.options&&this.ast.options.params||ca,Ve=this.buildStyles(x,Re&&Re.params||ca,b),rt=C&&C.params||ca,$t=this.buildStyles(Z,rt,b),mn=new Set,Pn=new Map,Wn=new Map,xr="void"===Z,ts={params:Object.assign(Object.assign({},Y),rt)},Bo=_?[]:Qr(E,w,this.ast.animation,oe,Te,Ve,$t,ts,p,b);let ps=0;if(Bo.forEach(La=>{ps=Math.max(La.duration+La.delay,ps)}),b.length)return lo(w,this._triggerName,x,Z,xr,Ve,$t,[],[],Pn,Wn,ps,b);Bo.forEach(La=>{const la=La.element,Ao=ei(Pn,la,{});La.preStyleProps.forEach(Ds=>Ao[Ds]=!0);const jo=ei(Wn,la,{});La.postStyleProps.forEach(Ds=>jo[Ds]=!0),la!==w&&mn.add(la)});const Fa=le(mn.values());return lo(w,this._triggerName,x,Z,xr,Ve,$t,Bo,Fa,Pn,Wn,ps)}}class eo{constructor(E,w,x){this.styles=E,this.defaultParams=w,this.normalizer=x}buildStyles(E,w){const x={},Z=$r(this.defaultParams);return Object.keys(E).forEach(oe=>{const Te=E[oe];null!=Te&&(Z[oe]=Te)}),this.styles.styles.forEach(oe=>{if("string"!=typeof oe){const Te=oe;Object.keys(Te).forEach(Re=>{let C=Te[Re];C.length>1&&(C=L(C,Z,w));const p=this.normalizer.normalizePropertyName(Re,w);C=this.normalizer.normalizeStyleValue(Re,p,C,w),x[p]=C})}}),x}}class Is{constructor(E,w,x){this.name=E,this.ast=w,this._normalizer=x,this.transitionFactories=[],this.states={},w.states.forEach(Z=>{this.states[Z.name]=new eo(Z.style,Z.options&&Z.options.params||{},x)}),da(this.states,"true","1"),da(this.states,"false","0"),w.transitions.forEach(Z=>{this.transitionFactories.push(new ia(E,Z,this.states))}),this.fallbackTransition=function Ai(N,E,w){return new ia(N,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Te,Re)=>!0],options:null,queryCount:0,depCount:0},E)}(E,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(E,w,x,Z){return this.transitionFactories.find(Te=>Te.match(E,w,x,Z))||null}matchStyles(E,w,x){return this.fallbackTransition.buildStyles(E,w,x)}}function da(N,E,w){N.hasOwnProperty(E)?N.hasOwnProperty(w)||(N[w]=N[E]):N.hasOwnProperty(w)&&(N[E]=N[w])}const Ia=new xn;class El{constructor(E,w,x){this.bodyNode=E,this._driver=w,this._normalizer=x,this._animations={},this._playersById={},this.players=[]}register(E,w){const x=[],oe=ue(this._driver,w,x,[]);if(x.length)throw function Cr(N){return new V.vHH(3503,se)}();this._animations[E]=oe}_buildPlayer(E,w,x){const Z=E.element,oe=hr(0,this._normalizer,0,E.keyframes,w,x);return this._driver.animate(Z,oe,E.duration,E.delay,E.easing,[],!0)}create(E,w,x={}){const Z=[],oe=this._animations[E];let Te;const Re=new Map;if(oe?(Te=Qr(this._driver,w,oe,_o,as,{},{},x,Ia,Z),Te.forEach(_=>{const b=ei(Re,_.element,{});_.postStyleProps.forEach(Y=>b[Y]=null)})):(Z.push(function _n(){return new V.vHH(3300,se)}()),Te=[]),Z.length)throw function er(N){return new V.vHH(3504,se)}();Re.forEach((_,b)=>{Object.keys(_).forEach(Y=>{_[Y]=this._driver.computeStyle(b,Y,te.l3)})});const p=Nn(Te.map(_=>{const b=Re.get(_.element);return this._buildPlayer(_,{},b)}));return this._playersById[E]=p,p.onDestroy(()=>this.destroy(E)),this.players.push(p),p}destroy(E){const w=this._getPlayer(E);w.destroy(),delete this._playersById[E];const x=this.players.indexOf(w);x>=0&&this.players.splice(x,1)}_getPlayer(E){const w=this._playersById[E];if(!w)throw function Xi(N){return new V.vHH(3301,se)}();return w}listen(E,w,x,Z){const oe=ci(w,"","","");return Di(this._getPlayer(E),x,oe,Z),()=>{}}command(E,w,x,Z){if("register"==x)return void this.register(E,Z[0]);if("create"==x)return void this.create(E,w,Z[0]||{});const oe=this._getPlayer(E);switch(x){case"play":oe.play();break;case"pause":oe.pause();break;case"reset":oe.reset();break;case"restart":oe.restart();break;case"finish":oe.finish();break;case"init":oe.init();break;case"setPosition":oe.setPosition(parseFloat(Z[0]));break;case"destroy":this.destroy(E)}}}const Co="ng-animate-queued",xo="ng-animate-disabled",no=[],sl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ds="__ng_removed";class uo{constructor(E,w=""){this.namespaceId=w;const x=E&&E.hasOwnProperty("value");if(this.value=function Ko(N){return null!=N?N:null}(x?E.value:E),x){const oe=$r(E);delete oe.value,this.options=oe}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(E){const w=E.params;if(w){const x=this.options.params;Object.keys(w).forEach(Z=>{null==x[Z]&&(x[Z]=w[Z])})}}}const To="void",Nl=new uo(To);class ba{constructor(E,w,x){this.id=E,this.hostElement=w,this._engine=x,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+E,vs(w,this._hostClassName)}listen(E,w,x,Z){if(!this._triggers.hasOwnProperty(w))throw function dr(N,E){return new V.vHH(3302,se)}();if(null==x||0==x.length)throw function Xr(N){return new V.vHH(3303,se)}();if(!function $i(N){return"start"==N||"done"==N}(x))throw function lt(N,E){return new V.vHH(3400,se)}();const oe=ei(this._elementListeners,E,[]),Te={name:w,phase:x,callback:Z};oe.push(Te);const Re=ei(this._engine.statesByElement,E,{});return Re.hasOwnProperty(w)||(vs(E,ji),vs(E,ji+"-"+w),Re[w]=Nl),()=>{this._engine.afterFlush(()=>{const C=oe.indexOf(Te);C>=0&&oe.splice(C,1),this._triggers[w]||delete Re[w]})}}register(E,w){return!this._triggers[E]&&(this._triggers[E]=w,!0)}_getTrigger(E){const w=this._triggers[E];if(!w)throw function Ze(N){return new V.vHH(3401,se)}();return w}trigger(E,w,x,Z=!0){const oe=this._getTrigger(w),Te=new Wa(this.id,w,E);let Re=this._engine.statesByElement.get(E);Re||(vs(E,ji),vs(E,ji+"-"+w),this._engine.statesByElement.set(E,Re={}));let C=Re[w];const p=new uo(x,this.id);if(!(x&&x.hasOwnProperty("value"))&&C&&p.absorbOptions(C.options),Re[w]=p,C||(C=Nl),p.value!==To&&C.value===p.value){if(!function za(N,E){const w=Object.keys(N),x=Object.keys(E);if(w.length!=x.length)return!1;for(let Z=0;Z<w.length;Z++){const oe=w[Z];if(!E.hasOwnProperty(oe)||N[oe]!==E[oe])return!1}return!0}(C.params,p.params)){const rt=[],$t=oe.matchStyles(C.value,C.params,rt),mn=oe.matchStyles(p.value,p.params,rt);rt.length?this._engine.reportError(rt):this._engine.afterFlush(()=>{Si(E,$t),Oi(E,mn)})}return}const Y=ei(this._engine.playersByElement,E,[]);Y.forEach(rt=>{rt.namespaceId==this.id&&rt.triggerName==w&&rt.queued&&rt.destroy()});let ce=oe.matchTransition(C.value,p.value,E,p.params),Ve=!1;if(!ce){if(!Z)return;ce=oe.fallbackTransition,Ve=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:w,transition:ce,fromState:C,toState:p,player:Te,isFallbackTransition:Ve}),Ve||(vs(E,Co),Te.onStart(()=>{sa(E,Co)})),Te.onDone(()=>{let rt=this.players.indexOf(Te);rt>=0&&this.players.splice(rt,1);const $t=this._engine.playersByElement.get(E);if($t){let mn=$t.indexOf(Te);mn>=0&&$t.splice(mn,1)}}),this.players.push(Te),Y.push(Te),Te}deregister(E){delete this._triggers[E],this._engine.statesByElement.forEach((w,x)=>{delete w[E]}),this._elementListeners.forEach((w,x)=>{this._elementListeners.set(x,w.filter(Z=>Z.name!=E))})}clearElementCache(E){this._engine.statesByElement.delete(E),this._elementListeners.delete(E);const w=this._engine.playersByElement.get(E);w&&(w.forEach(x=>x.destroy()),this._engine.playersByElement.delete(E))}_signalRemovalForInnerTriggers(E,w){const x=this._engine.driver.query(E,_s,!0);x.forEach(Z=>{if(Z[ds])return;const oe=this._engine.fetchNamespacesByElement(Z);oe.size?oe.forEach(Te=>Te.triggerLeaveAnimation(Z,w,!1,!0)):this.clearElementCache(Z)}),this._engine.afterFlushAnimationsDone(()=>x.forEach(Z=>this.clearElementCache(Z)))}triggerLeaveAnimation(E,w,x,Z){const oe=this._engine.statesByElement.get(E),Te=new Map;if(oe){const Re=[];if(Object.keys(oe).forEach(C=>{if(Te.set(C,oe[C].value),this._triggers[C]){const p=this.trigger(E,C,To,Z);p&&Re.push(p)}}),Re.length)return this._engine.markElementAsRemoved(this.id,E,!0,w,Te),x&&Nn(Re).onDone(()=>this._engine.processLeaveNode(E)),!0}return!1}prepareLeaveAnimationListeners(E){const w=this._elementListeners.get(E),x=this._engine.statesByElement.get(E);if(w&&x){const Z=new Set;w.forEach(oe=>{const Te=oe.name;if(Z.has(Te))return;Z.add(Te);const C=this._triggers[Te].fallbackTransition,p=x[Te]||Nl,_=new uo(To),b=new Wa(this.id,Te,E);this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:Te,transition:C,fromState:p,toState:_,player:b,isFallbackTransition:!0})})}}removeNode(E,w){const x=this._engine;if(E.childElementCount&&this._signalRemovalForInnerTriggers(E,w),this.triggerLeaveAnimation(E,w,!0))return;let Z=!1;if(x.totalAnimations){const oe=x.players.length?x.playersByQueriedElement.get(E):[];if(oe&&oe.length)Z=!0;else{let Te=E;for(;Te=Te.parentNode;)if(x.statesByElement.get(Te)){Z=!0;break}}}if(this.prepareLeaveAnimationListeners(E),Z)x.markElementAsRemoved(this.id,E,!1,w);else{const oe=E[ds];(!oe||oe===sl)&&(x.afterFlush(()=>this.clearElementCache(E)),x.destroyInnerAnimations(E),x._onRemovalComplete(E,w))}}insertNode(E,w){vs(E,this._hostClassName)}drainQueuedTransitions(E){const w=[];return this._queue.forEach(x=>{const Z=x.player;if(Z.destroyed)return;const oe=x.element,Te=this._elementListeners.get(oe);Te&&Te.forEach(Re=>{if(Re.name==x.triggerName){const C=ci(oe,x.triggerName,x.fromState.value,x.toState.value);C._data=E,Di(x.player,Re.phase,C,Re.callback)}}),Z.markedForDestroy?this._engine.afterFlush(()=>{Z.destroy()}):w.push(x)}),this._queue=[],w.sort((x,Z)=>{const oe=x.transition.ast.depCount,Te=Z.transition.ast.depCount;return 0==oe||0==Te?oe-Te:this._engine.driver.containsElement(x.element,Z.element)?1:-1})}destroy(E){this.players.forEach(w=>w.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,E)}elementContainsData(E){let w=!1;return this._elementListeners.has(E)&&(w=!0),w=!!this._queue.find(x=>x.element===E)||w,w}}class Da{constructor(E,w,x){this.bodyNode=E,this.driver=w,this._normalizer=x,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Z,oe)=>{}}_onRemovalComplete(E,w){this.onRemovalComplete(E,w)}get queuedPlayers(){const E=[];return this._namespaceList.forEach(w=>{w.players.forEach(x=>{x.queued&&E.push(x)})}),E}createNamespace(E,w){const x=new ba(E,w,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,w)?this._balanceNamespaceList(x,w):(this.newHostElements.set(w,x),this.collectEnterElement(w)),this._namespaceLookup[E]=x}_balanceNamespaceList(E,w){const x=this._namespaceList,Z=this.namespacesByHostElement,oe=x.length-1;if(oe>=0){let Te=!1;if(void 0!==this.driver.getParentElement){let Re=this.driver.getParentElement(w);for(;Re;){const C=Z.get(Re);if(C){const p=x.indexOf(C);x.splice(p+1,0,E),Te=!0;break}Re=this.driver.getParentElement(Re)}}else for(let Re=oe;Re>=0;Re--)if(this.driver.containsElement(x[Re].hostElement,w)){x.splice(Re+1,0,E),Te=!0;break}Te||x.unshift(E)}else x.push(E);return Z.set(w,E),E}register(E,w){let x=this._namespaceLookup[E];return x||(x=this.createNamespace(E,w)),x}registerTrigger(E,w,x){let Z=this._namespaceLookup[E];Z&&Z.register(w,x)&&this.totalAnimations++}destroy(E,w){if(!E)return;const x=this._fetchNamespace(E);this.afterFlush(()=>{this.namespacesByHostElement.delete(x.hostElement),delete this._namespaceLookup[E];const Z=this._namespaceList.indexOf(x);Z>=0&&this._namespaceList.splice(Z,1)}),this.afterFlushAnimationsDone(()=>x.destroy(w))}_fetchNamespace(E){return this._namespaceLookup[E]}fetchNamespacesByElement(E){const w=new Set,x=this.statesByElement.get(E);if(x){const Z=Object.keys(x);for(let oe=0;oe<Z.length;oe++){const Te=x[Z[oe]].namespaceId;if(Te){const Re=this._fetchNamespace(Te);Re&&w.add(Re)}}}return w}trigger(E,w,x,Z){if(Lo(w)){const oe=this._fetchNamespace(E);if(oe)return oe.trigger(w,x,Z),!0}return!1}insertNode(E,w,x,Z){if(!Lo(w))return;const oe=w[ds];if(oe&&oe.setForRemoval){oe.setForRemoval=!1,oe.setForMove=!0;const Te=this.collectedLeaveElements.indexOf(w);Te>=0&&this.collectedLeaveElements.splice(Te,1)}if(E){const Te=this._fetchNamespace(E);Te&&Te.insertNode(w,x)}Z&&this.collectEnterElement(w)}collectEnterElement(E){this.collectedEnterElements.push(E)}markElementAsDisabled(E,w){w?this.disabledNodes.has(E)||(this.disabledNodes.add(E),vs(E,xo)):this.disabledNodes.has(E)&&(this.disabledNodes.delete(E),sa(E,xo))}removeNode(E,w,x,Z){if(Lo(w)){const oe=E?this._fetchNamespace(E):null;if(oe?oe.removeNode(w,Z):this.markElementAsRemoved(E,w,!1,Z),x){const Te=this.namespacesByHostElement.get(w);Te&&Te.id!==E&&Te.removeNode(w,Z)}}else this._onRemovalComplete(w,Z)}markElementAsRemoved(E,w,x,Z,oe){this.collectedLeaveElements.push(w),w[ds]={namespaceId:E,setForRemoval:Z,hasAnimation:x,removedBeforeQueried:!1,previousTriggersValues:oe}}listen(E,w,x,Z,oe){return Lo(w)?this._fetchNamespace(E).listen(w,x,Z,oe):()=>{}}_buildInstruction(E,w,x,Z,oe){return E.transition.build(this.driver,E.element,E.fromState.value,E.toState.value,x,Z,E.fromState.options,E.toState.options,w,oe)}destroyInnerAnimations(E){let w=this.driver.query(E,_s,!0);w.forEach(x=>this.destroyActiveAnimationsForElement(x)),0!=this.playersByQueriedElement.size&&(w=this.driver.query(E,ws,!0),w.forEach(x=>this.finishActiveQueriedAnimationOnElement(x)))}destroyActiveAnimationsForElement(E){const w=this.playersByElement.get(E);w&&w.forEach(x=>{x.queued?x.markedForDestroy=!0:x.destroy()})}finishActiveQueriedAnimationOnElement(E){const w=this.playersByQueriedElement.get(E);w&&w.forEach(x=>x.finish())}whenRenderingDone(){return new Promise(E=>{if(this.players.length)return Nn(this.players).onDone(()=>E());E()})}processLeaveNode(E){var w;const x=E[ds];if(x&&x.setForRemoval){if(E[ds]=sl,x.namespaceId){this.destroyInnerAnimations(E);const Z=this._fetchNamespace(x.namespaceId);Z&&Z.clearElementCache(E)}this._onRemovalComplete(E,x.setForRemoval)}(null===(w=E.classList)||void 0===w?void 0:w.contains(xo))&&this.markElementAsDisabled(E,!1),this.driver.query(E,".ng-animate-disabled",!0).forEach(Z=>{this.markElementAsDisabled(Z,!1)})}flush(E=-1){let w=[];if(this.newHostElements.size&&(this.newHostElements.forEach((x,Z)=>this._balanceNamespaceList(x,Z)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let x=0;x<this.collectedEnterElements.length;x++)vs(this.collectedEnterElements[x],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const x=[];try{w=this._flushAnimations(x,E)}finally{for(let Z=0;Z<x.length;Z++)x[Z]()}}else for(let x=0;x<this.collectedLeaveElements.length;x++)this.processLeaveNode(this.collectedLeaveElements[x]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(x=>x()),this._flushFns=[],this._whenQuietFns.length){const x=this._whenQuietFns;this._whenQuietFns=[],w.length?Nn(w).onDone(()=>{x.forEach(Z=>Z())}):x.forEach(Z=>Z())}}reportError(E){throw function ut(N){return new V.vHH(3402,se)}()}_flushAnimations(E,w){const x=new xn,Z=[],oe=new Map,Te=[],Re=new Map,C=new Map,p=new Map,_=new Set;this.disabledNodes.forEach(Yn=>{_.add(Yn);const wr=this.driver.query(Yn,".ng-animate-queued",!0);for(let Pr=0;Pr<wr.length;Pr++)_.add(wr[Pr])});const b=this.bodyNode,Y=Array.from(this.statesByElement.keys()),ce=Fs(Y,this.collectedEnterElements),Ve=new Map;let rt=0;ce.forEach((Yn,wr)=>{const Pr=_o+rt++;Ve.set(wr,Pr),Yn.forEach(mi=>vs(mi,Pr))});const $t=[],mn=new Set,Pn=new Set;for(let Yn=0;Yn<this.collectedLeaveElements.length;Yn++){const wr=this.collectedLeaveElements[Yn],Pr=wr[ds];Pr&&Pr.setForRemoval&&($t.push(wr),mn.add(wr),Pr.hasAnimation?this.driver.query(wr,".ng-star-inserted",!0).forEach(mi=>mn.add(mi)):Pn.add(wr))}const Wn=new Map,xr=Fs(Y,Array.from(mn));xr.forEach((Yn,wr)=>{const Pr=as+rt++;Wn.set(wr,Pr),Yn.forEach(mi=>vs(mi,Pr))}),E.push(()=>{ce.forEach((Yn,wr)=>{const Pr=Ve.get(wr);Yn.forEach(mi=>sa(mi,Pr))}),xr.forEach((Yn,wr)=>{const Pr=Wn.get(wr);Yn.forEach(mi=>sa(mi,Pr))}),$t.forEach(Yn=>{this.processLeaveNode(Yn)})});const ts=[],Bo=[];for(let Yn=this._namespaceList.length-1;Yn>=0;Yn--)this._namespaceList[Yn].drainQueuedTransitions(w).forEach(Pr=>{const mi=Pr.player,fo=Pr.element;if(ts.push(mi),this.collectedEnterElements.length){const No=fo[ds];if(No&&No.setForMove){if(No.previousTriggersValues&&No.previousTriggersValues.has(Pr.triggerName)){const Iu=No.previousTriggersValues.get(Pr.triggerName),ta=this.statesByElement.get(Pr.element);ta&&ta[Pr.triggerName]&&(ta[Pr.triggerName].value=Iu)}return void mi.destroy()}}const gl=!b||!this.driver.containsElement(b,fo),Ua=Wn.get(fo),ea=Ve.get(fo),ss=this._buildInstruction(Pr,x,ea,Ua,gl);if(ss.errors&&ss.errors.length)return void Bo.push(ss);if(gl)return mi.onStart(()=>Si(fo,ss.fromStyles)),mi.onDestroy(()=>Oi(fo,ss.toStyles)),void Z.push(mi);if(Pr.isFallbackTransition)return mi.onStart(()=>Si(fo,ss.fromStyles)),mi.onDestroy(()=>Oi(fo,ss.toStyles)),void Z.push(mi);const Ca=[];ss.timelines.forEach(No=>{No.stretchStartingKeyframe=!0,this.disabledNodes.has(No.element)||Ca.push(No)}),ss.timelines=Ca,x.append(fo,ss.timelines),Te.push({instruction:ss,player:mi,element:fo}),ss.queriedElements.forEach(No=>ei(Re,No,[]).push(mi)),ss.preStyleProps.forEach((No,Iu)=>{const ta=Object.keys(No);if(ta.length){let ua=C.get(Iu);ua||C.set(Iu,ua=new Set),ta.forEach(ml=>ua.add(ml))}}),ss.postStyleProps.forEach((No,Iu)=>{const ta=Object.keys(No);let ua=p.get(Iu);ua||p.set(Iu,ua=new Set),ta.forEach(ml=>ua.add(ml))})});if(Bo.length){const Yn=[];Bo.forEach(wr=>{Yn.push(function kt(N,E){return new V.vHH(3505,se)}())}),ts.forEach(wr=>wr.destroy()),this.reportError(Yn)}const ps=new Map,Fa=new Map;Te.forEach(Yn=>{const wr=Yn.element;x.has(wr)&&(Fa.set(wr,wr),this._beforeAnimationBuild(Yn.player.namespaceId,Yn.instruction,ps))}),Z.forEach(Yn=>{const wr=Yn.element;this._getPreviousPlayers(wr,!1,Yn.namespaceId,Yn.triggerName,null).forEach(mi=>{ei(ps,wr,[]).push(mi),mi.destroy()})});const La=$t.filter(Yn=>wl(Yn,C,p)),la=new Map;Zo(la,this.driver,Pn,p,te.l3).forEach(Yn=>{wl(Yn,C,p)&&La.push(Yn)});const jo=new Map;ce.forEach((Yn,wr)=>{Zo(jo,this.driver,new Set(Yn),C,te.k1)}),La.forEach(Yn=>{const wr=la.get(Yn),Pr=jo.get(Yn);la.set(Yn,Object.assign(Object.assign({},wr),Pr))});const Ds=[],Va=[],Cu={};Te.forEach(Yn=>{const{element:wr,player:Pr,instruction:mi}=Yn;if(x.has(wr)){if(_.has(wr))return Pr.onDestroy(()=>Oi(wr,mi.toStyles)),Pr.disabled=!0,Pr.overrideTotalTime(mi.totalTime),void Z.push(Pr);let fo=Cu;if(Fa.size>1){let Ua=wr;const ea=[];for(;Ua=Ua.parentNode;){const ss=Fa.get(Ua);if(ss){fo=ss;break}ea.push(Ua)}ea.forEach(ss=>Fa.set(ss,fo))}const gl=this._buildAnimation(Pr.namespaceId,mi,ps,oe,jo,la);if(Pr.setRealPlayer(gl),fo===Cu)Ds.push(Pr);else{const Ua=this.playersByElement.get(fo);Ua&&Ua.length&&(Pr.parentPlayer=Nn(Ua)),Z.push(Pr)}}else Si(wr,mi.fromStyles),Pr.onDestroy(()=>Oi(wr,mi.toStyles)),Va.push(Pr),_.has(wr)&&Z.push(Pr)}),Va.forEach(Yn=>{const wr=oe.get(Yn.element);if(wr&&wr.length){const Pr=Nn(wr);Yn.setRealPlayer(Pr)}}),Z.forEach(Yn=>{Yn.parentPlayer?Yn.syncPlayerEvents(Yn.parentPlayer):Yn.destroy()});for(let Yn=0;Yn<$t.length;Yn++){const wr=$t[Yn],Pr=wr[ds];if(sa(wr,as),Pr&&Pr.hasAnimation)continue;let mi=[];if(Re.size){let gl=Re.get(wr);gl&&gl.length&&mi.push(...gl);let Ua=this.driver.query(wr,ws,!0);for(let ea=0;ea<Ua.length;ea++){let ss=Re.get(Ua[ea]);ss&&ss.length&&mi.push(...ss)}}const fo=mi.filter(gl=>!gl.destroyed);fo.length?bo(this,wr,fo):this.processLeaveNode(wr)}return $t.length=0,Ds.forEach(Yn=>{this.players.push(Yn),Yn.onDone(()=>{Yn.destroy();const wr=this.players.indexOf(Yn);this.players.splice(wr,1)}),Yn.play()}),Ds}elementContainsData(E,w){let x=!1;const Z=w[ds];return Z&&Z.setForRemoval&&(x=!0),this.playersByElement.has(w)&&(x=!0),this.playersByQueriedElement.has(w)&&(x=!0),this.statesByElement.has(w)&&(x=!0),this._fetchNamespace(E).elementContainsData(w)||x}afterFlush(E){this._flushFns.push(E)}afterFlushAnimationsDone(E){this._whenQuietFns.push(E)}_getPreviousPlayers(E,w,x,Z,oe){let Te=[];if(w){const Re=this.playersByQueriedElement.get(E);Re&&(Te=Re)}else{const Re=this.playersByElement.get(E);if(Re){const C=!oe||oe==To;Re.forEach(p=>{p.queued||!C&&p.triggerName!=Z||Te.push(p)})}}return(x||Z)&&(Te=Te.filter(Re=>!(x&&x!=Re.namespaceId||Z&&Z!=Re.triggerName))),Te}_beforeAnimationBuild(E,w,x){const oe=w.element,Te=w.isRemovalTransition?void 0:E,Re=w.isRemovalTransition?void 0:w.triggerName;for(const C of w.timelines){const p=C.element,_=p!==oe,b=ei(x,p,[]);this._getPreviousPlayers(p,_,Te,Re,w.toState).forEach(ce=>{const Ve=ce.getRealPlayer();Ve.beforeDestroy&&Ve.beforeDestroy(),ce.destroy(),b.push(ce)})}Si(oe,w.fromStyles)}_buildAnimation(E,w,x,Z,oe,Te){const Re=w.triggerName,C=w.element,p=[],_=new Set,b=new Set,Y=w.timelines.map(Ve=>{const rt=Ve.element;_.add(rt);const $t=rt[ds];if($t&&$t.removedBeforeQueried)return new te.ZN(Ve.duration,Ve.delay);const mn=rt!==C,Pn=function Ol(N){const E=[];return Sa(N,E),E}((x.get(rt)||no).map(ps=>ps.getRealPlayer())).filter(ps=>!!ps.element&&ps.element===rt),Wn=oe.get(rt),xr=Te.get(rt),ts=hr(0,this._normalizer,0,Ve.keyframes,Wn,xr),Bo=this._buildPlayer(Ve,ts,Pn);if(Ve.subTimeline&&Z&&b.add(rt),mn){const ps=new Wa(E,Re,rt);ps.setRealPlayer(Bo),p.push(ps)}return Bo});p.forEach(Ve=>{ei(this.playersByQueriedElement,Ve.element,[]).push(Ve),Ve.onDone(()=>function au(N,E,w){let x;if(N instanceof Map){if(x=N.get(E),x){if(x.length){const Z=x.indexOf(w);x.splice(Z,1)}0==x.length&&N.delete(E)}}else if(x=N[E],x){if(x.length){const Z=x.indexOf(w);x.splice(Z,1)}0==x.length&&delete N[E]}return x}(this.playersByQueriedElement,Ve.element,Ve))}),_.forEach(Ve=>vs(Ve,zo));const ce=Nn(Y);return ce.onDestroy(()=>{_.forEach(Ve=>sa(Ve,zo)),Oi(C,w.toStyles)}),b.forEach(Ve=>{ei(Z,Ve,[]).push(ce)}),ce}_buildPlayer(E,w,x){return w.length>0?this.driver.animate(E.element,w,E.duration,E.delay,E.easing,x):new te.ZN(E.duration,E.delay)}}class Wa{constructor(E,w,x){this.namespaceId=E,this.triggerName=w,this.element=x,this._player=new te.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(E){this._containsRealPlayer||(this._player=E,Object.keys(this._queuedCallbacks).forEach(w=>{this._queuedCallbacks[w].forEach(x=>Di(E,w,void 0,x))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(E.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(E){this.totalTime=E}syncPlayerEvents(E){const w=this._player;w.triggerCallback&&E.onStart(()=>w.triggerCallback("start")),E.onDone(()=>this.finish()),E.onDestroy(()=>this.destroy())}_queueEvent(E,w){ei(this._queuedCallbacks,E,[]).push(w)}onDone(E){this.queued&&this._queueEvent("done",E),this._player.onDone(E)}onStart(E){this.queued&&this._queueEvent("start",E),this._player.onStart(E)}onDestroy(E){this.queued&&this._queueEvent("destroy",E),this._player.onDestroy(E)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(E){this.queued||this._player.setPosition(E)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(E){const w=this._player;w.triggerCallback&&w.triggerCallback(E)}}function Lo(N){return N&&1===N.nodeType}function qo(N,E){const w=N.style.display;return N.style.display=null!=E?E:"none",w}function Zo(N,E,w,x,Z){const oe=[];w.forEach(C=>oe.push(qo(C)));const Te=[];x.forEach((C,p)=>{const _={};C.forEach(b=>{const Y=_[b]=E.computeStyle(p,b,Z);(!Y||0==Y.length)&&(p[ds]=fi,Te.push(p))}),N.set(p,_)});let Re=0;return w.forEach(C=>qo(C,oe[Re++])),Te}function Fs(N,E){const w=new Map;if(N.forEach(Re=>w.set(Re,[])),0==E.length)return w;const Z=new Set(E),oe=new Map;function Te(Re){if(!Re)return 1;let C=oe.get(Re);if(C)return C;const p=Re.parentNode;return C=w.has(p)?p:Z.has(p)?1:Te(p),oe.set(Re,C),C}return E.forEach(Re=>{const C=Te(Re);1!==C&&w.get(C).push(Re)}),w}function vs(N,E){var w;null===(w=N.classList)||void 0===w||w.add(E)}function sa(N,E){var w;null===(w=N.classList)||void 0===w||w.remove(E)}function bo(N,E,w){Nn(w).onDone(()=>N.processLeaveNode(E))}function Sa(N,E){for(let w=0;w<N.length;w++){const x=N[w];x instanceof te.ZE?Sa(x.players,E):E.push(x)}}function wl(N,E,w){const x=w.get(N);if(!x)return!1;let Z=E.get(N);return Z?x.forEach(oe=>Z.add(oe)):E.set(N,x),w.delete(N),!0}class ol{constructor(E,w,x){this.bodyNode=E,this._driver=w,this._normalizer=x,this._triggerCache={},this.onRemovalComplete=(Z,oe)=>{},this._transitionEngine=new Da(E,w,x),this._timelineEngine=new El(E,w,x),this._transitionEngine.onRemovalComplete=(Z,oe)=>this.onRemovalComplete(Z,oe)}registerTrigger(E,w,x,Z,oe){const Te=E+"-"+Z;let Re=this._triggerCache[Te];if(!Re){const C=[],_=ue(this._driver,oe,C,[]);if(C.length)throw function os(N,E){return new V.vHH(3404,se)}();Re=function cs(N,E,w){return new Is(N,E,w)}(Z,_,this._normalizer),this._triggerCache[Te]=Re}this._transitionEngine.registerTrigger(w,Z,Re)}register(E,w){this._transitionEngine.register(E,w)}destroy(E,w){this._transitionEngine.destroy(E,w)}onInsert(E,w,x,Z){this._transitionEngine.insertNode(E,w,x,Z)}onRemove(E,w,x,Z){this._transitionEngine.removeNode(E,w,Z||!1,x)}disableAnimations(E,w){this._transitionEngine.markElementAsDisabled(E,w)}process(E,w,x,Z){if("@"==x.charAt(0)){const[oe,Te]=Ns(x);this._timelineEngine.command(oe,w,Te,Z)}else this._transitionEngine.trigger(E,w,x,Z)}listen(E,w,x,Z,oe){if("@"==x.charAt(0)){const[Te,Re]=Ns(x);return this._timelineEngine.listen(Te,w,Re,oe)}return this._transitionEngine.listen(E,w,x,Z,oe)}flush(E=-1){this._transitionEngine.flush(E)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let zl=(()=>{class N{constructor(w,x,Z){this._element=w,this._startStyles=x,this._endStyles=Z,this._state=0;let oe=N.initialStylesByElement.get(w);oe||N.initialStylesByElement.set(w,oe={}),this._initialStyles=oe}start(){this._state<1&&(this._startStyles&&Oi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Oi(this._element,this._initialStyles),this._endStyles&&(Oi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(N.initialStylesByElement.delete(this._element),this._startStyles&&(Si(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Si(this._element,this._endStyles),this._endStyles=null),Oi(this._element,this._initialStyles),this._state=3)}}return N.initialStylesByElement=new WeakMap,N})();function oa(N){let E=null;const w=Object.keys(N);for(let x=0;x<w.length;x++){const Z=w[x];Kl(Z)&&(E=E||{},E[Z]=N[Z])}return E}function Kl(N){return"display"===N||"position"===N}class al{constructor(E,w,x,Z){this.element=E,this.keyframes=w,this.options=x,this._specialStyles=Z,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=x.duration,this._delay=x.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(E=>E()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const E=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,E,this.options),this._finalKeyframe=E.length?E[E.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(E,w,x){return E.animate(w,x)}onStart(E){this._onStartFns.push(E)}onDone(E){this._onDoneFns.push(E)}onDestroy(E){this._onDestroyFns.push(E)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(E=>E()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(E=>E()),this._onDestroyFns=[])}setPosition(E){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=E*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const E={};if(this.hasStarted()){const w=this._finalKeyframe;Object.keys(w).forEach(x=>{"offset"!=x&&(E[x]=this._finished?w[x]:vr(this.element,x))})}this.currentSnapshot=E}triggerCallback(E){const w="start"==E?this._onStartFns:this._onDoneFns;w.forEach(x=>x()),w.length=0}}class Aa{validateStyleProperty(E){return Os(E)}matchesElement(E,w){return!1}containsElement(E,w){return Ss(E,w)}getParentElement(E){return Ro(E)}query(E,w,x){return oo(E,w,x)}computeStyle(E,w,x){return window.getComputedStyle(E)[w]}animate(E,w,x,Z,oe,Te=[]){const C={duration:x,delay:Z,fill:0==Z?"both":"forwards"};oe&&(C.easing=oe);const p={},_=Te.filter(Y=>Y instanceof al);(function Pt(N,E){return 0===N||0===E})(x,Z)&&_.forEach(Y=>{let ce=Y.currentSnapshot;Object.keys(ce).forEach(Ve=>p[Ve]=ce[Ve])}),w=function Kt(N,E,w){const x=Object.keys(w);if(x.length&&E.length){let oe=E[0],Te=[];if(x.forEach(Re=>{oe.hasOwnProperty(Re)||Te.push(Re),oe[Re]=w[Re]}),Te.length)for(var Z=1;Z<E.length;Z++){let Re=E[Z];Te.forEach(function(C){Re[C]=vr(N,C)})}}return E}(E,w=w.map(Y=>ls(Y,!1)),p);const b=function Yo(N,E){let w=null,x=null;return Array.isArray(E)&&E.length?(w=oa(E[0]),E.length>1&&(x=oa(E[E.length-1]))):E&&(w=oa(E)),w||x?new zl(N,w,x):null}(E,w);return new al(E,w,C,b)}}let P=(()=>{class N extends te._j{constructor(w,x){super(),this._nextAnimationId=0,this._renderer=w.createRenderer(x.body,{id:"0",encapsulation:V.ifc.None,styles:[],data:{animation:[]}})}build(w){const x=this._nextAnimationId.toString();this._nextAnimationId++;const Z=Array.isArray(w)?(0,te.vP)(w):w;return H(this._renderer,null,x,"register",[Z]),new D(x,this._renderer)}}return N.\u0275fac=function(w){return new(w||N)(V.LFG(V.FYo),V.LFG(Pe.K0))},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac}),N})();class D extends te.LC{constructor(E,w){super(),this._id=E,this._renderer=w}create(E,w){return new T(this._id,E,w||{},this._renderer)}}class T{constructor(E,w,x,Z){this.id=E,this.element=w,this._renderer=Z,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",x)}_listen(E,w){return this._renderer.listen(this.element,`@@${this.id}:${E}`,w)}_command(E,...w){return H(this._renderer,this.element,this.id,E,w)}onDone(E){this._listen("done",E)}onStart(E){this._listen("start",E)}onDestroy(E){this._listen("destroy",E)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(E){this._command("setPosition",E)}getPosition(){var E,w;return null!==(w=null===(E=this._renderer.engine.players[+this.id])||void 0===E?void 0:E.getPosition())&&void 0!==w?w:0}}function H(N,E,w,x,Z){return N.setProperty(E,`@@${w}:${x}`,Z)}const Q="@",de="@.disabled";let fe=(()=>{class N{constructor(w,x,Z){this.delegate=w,this.engine=x,this._zone=Z,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),x.onRemovalComplete=(oe,Te)=>{const Re=null==Te?void 0:Te.parentNode(oe);Re&&Te.removeChild(Re,oe)}}createRenderer(w,x){const oe=this.delegate.createRenderer(w,x);if(!(w&&x&&x.data&&x.data.animation)){let _=this._rendererCache.get(oe);return _||(_=new Le("",oe,this.engine),this._rendererCache.set(oe,_)),_}const Te=x.id,Re=x.id+"-"+this._currentId;this._currentId++,this.engine.register(Re,w);const C=_=>{Array.isArray(_)?_.forEach(C):this.engine.registerTrigger(Te,Re,w,_.name,_)};return x.data.animation.forEach(C),new Ft(this,Re,oe,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(w,x,Z){w>=0&&w<this._microtaskId?this._zone.run(()=>x(Z)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(oe=>{const[Te,Re]=oe;Te(Re)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([x,Z]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return N.\u0275fac=function(w){return new(w||N)(V.LFG(V.FYo),V.LFG(ol),V.LFG(V.R0b))},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac}),N})();class Le{constructor(E,w,x){this.namespaceId=E,this.delegate=w,this.engine=x,this.destroyNode=this.delegate.destroyNode?Z=>w.destroyNode(Z):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(E,w){return this.delegate.createElement(E,w)}createComment(E){return this.delegate.createComment(E)}createText(E){return this.delegate.createText(E)}appendChild(E,w){this.delegate.appendChild(E,w),this.engine.onInsert(this.namespaceId,w,E,!1)}insertBefore(E,w,x,Z=!0){this.delegate.insertBefore(E,w,x),this.engine.onInsert(this.namespaceId,w,E,Z)}removeChild(E,w,x){this.engine.onRemove(this.namespaceId,w,this.delegate,x)}selectRootElement(E,w){return this.delegate.selectRootElement(E,w)}parentNode(E){return this.delegate.parentNode(E)}nextSibling(E){return this.delegate.nextSibling(E)}setAttribute(E,w,x,Z){this.delegate.setAttribute(E,w,x,Z)}removeAttribute(E,w,x){this.delegate.removeAttribute(E,w,x)}addClass(E,w){this.delegate.addClass(E,w)}removeClass(E,w){this.delegate.removeClass(E,w)}setStyle(E,w,x,Z){this.delegate.setStyle(E,w,x,Z)}removeStyle(E,w,x){this.delegate.removeStyle(E,w,x)}setProperty(E,w,x){w.charAt(0)==Q&&w==de?this.disableAnimations(E,!!x):this.delegate.setProperty(E,w,x)}setValue(E,w){this.delegate.setValue(E,w)}listen(E,w,x){return this.delegate.listen(E,w,x)}disableAnimations(E,w){this.engine.disableAnimations(E,w)}}class Ft extends Le{constructor(E,w,x,Z){super(w,x,Z),this.factory=E,this.namespaceId=w}setProperty(E,w,x){w.charAt(0)==Q?"."==w.charAt(1)&&w==de?this.disableAnimations(E,x=void 0===x||!!x):this.engine.process(this.namespaceId,E,w.substr(1),x):this.delegate.setProperty(E,w,x)}listen(E,w,x){if(w.charAt(0)==Q){const Z=function vn(N){switch(N){case"body":return document.body;case"document":return document;case"window":return window;default:return N}}(E);let oe=w.substr(1),Te="";return oe.charAt(0)!=Q&&([oe,Te]=function Jt(N){const E=N.indexOf(".");return[N.substring(0,E),N.substr(E+1)]}(oe)),this.engine.listen(this.namespaceId,Z,oe,Te,Re=>{this.factory.scheduleListenerCallback(Re._data||-1,x,Re)})}return this.delegate.listen(E,w,x)}}let Wt=(()=>{class N extends ol{constructor(w,x,Z){super(w.body,x,Z)}ngOnDestroy(){this.flush()}}return N.\u0275fac=function(w){return new(w||N)(V.LFG(Pe.K0),V.LFG(As),V.LFG(Fo))},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac}),N})();const Dt=new V.OlP("AnimationModuleType"),jt=[{provide:te._j,useClass:P},{provide:Fo,useFactory:function Ri(){return new Xs}},{provide:ol,useClass:Wt},{provide:V.FYo,useFactory:function tn(N,E,w){return new fe(N,E,w)},deps:[y.se,ol,V.R0b]}],Fr=[{provide:As,useFactory:()=>new Aa},{provide:Dt,useValue:"BrowserAnimations"},...jt],Cl=[{provide:As,useClass:xi},{provide:Dt,useValue:"NoopAnimations"},...jt];let Zi=(()=>{class N{static withConfig(w){return{ngModule:N,providers:w.disableAnimations?Cl:Fr}}}return N.\u0275fac=function(w){return new(w||N)},N.\u0275mod=V.oAB({type:N}),N.\u0275inj=V.cJS({providers:Fr,imports:[y.b2]}),N})();var aa=U(4466),Ra=U(520),Fu=U(1762);let kl=(()=>{class N{constructor(){}intercept(w,x){let Z=w.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("namnamToken")}`}});return x.handle(Z)}}return N.\u0275fac=function(w){return new(w||N)},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac}),N})();var Ka=U(262),lu=U(2843),nc=U(2290);let Yi=(()=>{class N{constructor(w,x){this.router=w,this.toastr=x}intercept(w,x){return x.handle(w).pipe((0,Ka.K)(Z=>{var oe,Te,Re;let C=null===(oe=null==Z?void 0:Z.error)||void 0===oe?void 0:oe.errors;if(Array.isArray(C)&&(null==C?void 0:C.length))for(let p=0;p<(null==C?void 0:C.length);p++)(null===(Te=C[p])||void 0===Te?void 0:Te.message)&&this.toastr.error(null===(Re=C[p])||void 0===Re?void 0:Re.message);else(null==C?void 0:C.message)&&this.toastr.error(null==C?void 0:C.message);return-1!==[401,403].indexOf(Z.status)&&(localStorage.clear(),window.location.reload()),(0,lu._)(Z)}))}}return N.\u0275fac=function(w){return new(w||N)(V.LFG(ee.F0),V.LFG(nc._W))},N.\u0275prov=V.Yz7({token:N,factory:N.\u0275fac}),N})();var Ar=U(3692);U(1389),U(6881);class ll{constructor(){return(0,Nt.vb)("auth")}}class Jl{constructor(E){return E}}const is="database",Xa=new V.OlP("angularfire2.database-instances");function io(N){return(E,w)=>{const x=E.runOutsideAngular(()=>N(w));return new Jl(x)}}const zs={provide:class Ja{constructor(){return(0,Nt.vb)(is)}},deps:[[new V.FiY,Xa]]},Qi={provide:Jl,useFactory:function ki(N,E){const w=(0,Nt.JM)(is,N,E);return w&&new Jl(w)},deps:[[new V.FiY,Xa],Ar.Ot]};let Dl=(()=>{class N{constructor(){(0,nt.KN)("angularfire",Nt.q4.full,"rtdb")}}return N.\u0275fac=function(w){return new(w||N)},N.\u0275mod=V.oAB({type:N}),N.\u0275inj=V.cJS({providers:[Qi,zs]}),N})();function ka(N,...E){return{ngModule:Dl,providers:[{provide:Xa,useFactory:io(N),multi:!0,deps:[V.R0b,V.zs3,Nt.HU,Ar.z6,[new V.FiY,ll],[new V.FiY,yn.nm],...E]}]}}const eu=(0,Nt.u3)(Ie.N8,!0);let wu=(()=>{class N{}return N.\u0275fac=function(w){return new(w||N)},N.\u0275mod=V.oAB({type:N,bootstrap:[z]}),N.\u0275inj=V.cJS({providers:[{provide:Ra.TP,useClass:kl,multi:!0},{provide:Ra.TP,useClass:Yi,multi:!0}],imports:[[y.b2.withServerTransition({appId:"serverApp"}),He,Zi,aa.m,Fu.yb,Jn.ww,Rn.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),ka(()=>eu())]]}),N})();U(2340).N.production&&(0,V.G48)(),y.q6().bootstrapModule(wu).catch(N=>console.error(N))},8306:(hn,ct,U)=>{U.d(ct,{y:()=>Ie});var y=U(930),V=U(727),ee=U(8822),ie=U(4671);var Xe=U(2416),He=U(576),nt=U(2806);let Ie=(()=>{class vt{constructor(Vt){Vt&&(this._subscribe=Vt)}lift(Vt){const dt=new vt;return dt.source=this,dt.operator=Vt,dt}subscribe(Vt,dt,ot){const Ge=function St(vt){return vt&&vt instanceof y.Lv||function Qe(vt){return vt&&(0,He.m)(vt.next)&&(0,He.m)(vt.error)&&(0,He.m)(vt.complete)}(vt)&&(0,V.Nn)(vt)}(Vt)?Vt:new y.Hp(Vt,dt,ot);return(0,nt.x)(()=>{const{operator:qt,source:at}=this;Ge.add(qt?qt.call(Ge,at):at?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Vt){try{return this._subscribe(Vt)}catch(dt){Vt.error(dt)}}forEach(Vt,dt){return new(dt=ve(dt))((ot,Ge)=>{const qt=new y.Hp({next:at=>{try{Vt(at)}catch(De){Ge(De),qt.unsubscribe()}},error:Ge,complete:ot});this.subscribe(qt)})}_subscribe(Vt){var dt;return null===(dt=this.source)||void 0===dt?void 0:dt.subscribe(Vt)}[ee.L](){return this}pipe(...Vt){return function je(vt){return 0===vt.length?ie.y:1===vt.length?vt[0]:function(Vt){return vt.reduce((dt,ot)=>ot(dt),Vt)}}(Vt)(this)}toPromise(Vt){return new(Vt=ve(Vt))((dt,ot)=>{let Ge;this.subscribe(qt=>Ge=qt,qt=>ot(qt),()=>dt(Ge))})}}return vt.create=_t=>new vt(_t),vt})();function ve(vt){var _t;return null!==(_t=null!=vt?vt:Xe.v.Promise)&&void 0!==_t?_t:Promise}},7579:(hn,ct,U)=>{U.d(ct,{x:()=>Xe});var y=U(8306),V=U(727);const ie=(0,U(3888).d)(nt=>function(){nt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=U(8737),je=U(2806);let Xe=(()=>{class nt extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ve){const Qe=new He(this,this);return Qe.operator=ve,Qe}_throwIfClosed(){if(this.closed)throw new ie}next(ve){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Qe of this.currentObservers)Qe.next(ve)}})}error(ve){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ve;const{observers:Qe}=this;for(;Qe.length;)Qe.shift().error(ve)}})}complete(){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ve}=this;for(;ve.length;)ve.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ve;return(null===(ve=this.observers)||void 0===ve?void 0:ve.length)>0}_trySubscribe(ve){return this._throwIfClosed(),super._trySubscribe(ve)}_subscribe(ve){return this._throwIfClosed(),this._checkFinalizedStatuses(ve),this._innerSubscribe(ve)}_innerSubscribe(ve){const{hasError:Qe,isStopped:St,observers:vt}=this;return Qe||St?V.Lc:(this.currentObservers=null,vt.push(ve),new V.w0(()=>{this.currentObservers=null,(0,ke.P)(vt,ve)}))}_checkFinalizedStatuses(ve){const{hasError:Qe,thrownError:St,isStopped:vt}=this;Qe?ve.error(St):vt&&ve.complete()}asObservable(){const ve=new y.y;return ve.source=this,ve}}return nt.create=(Ie,ve)=>new He(Ie,ve),nt})();class He extends Xe{constructor(Ie,ve){super(),this.destination=Ie,this.source=ve}next(Ie){var ve,Qe;null===(Qe=null===(ve=this.destination)||void 0===ve?void 0:ve.next)||void 0===Qe||Qe.call(ve,Ie)}error(Ie){var ve,Qe;null===(Qe=null===(ve=this.destination)||void 0===ve?void 0:ve.error)||void 0===Qe||Qe.call(ve,Ie)}complete(){var Ie,ve;null===(ve=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.complete)||void 0===ve||ve.call(Ie)}_subscribe(Ie){var ve,Qe;return null!==(Qe=null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Ie))&&void 0!==Qe?Qe:V.Lc}}},930:(hn,ct,U)=>{U.d(ct,{Hp:()=>Vt,Lv:()=>Qe});var y=U(576),V=U(727),ee=U(2416),ie=U(7849),ke=U(5032);const je=nt("C",void 0,void 0);function nt(at,De,Je){return{kind:at,value:De,error:Je}}var Ie=U(3410),ve=U(2806);class Qe extends V.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,V.Nn)(De)&&De.add(this)):this.destination=qt}static create(De,Je,Ct){return new Vt(De,Je,Ct)}next(De){this.isStopped?Ge(function He(at){return nt("N",at,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Ge(function Xe(at){return nt("E",void 0,at)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Ge(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const St=Function.prototype.bind;function vt(at,De){return St.call(at,De)}class _t{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Je}=this;if(Je.next)try{Je.next(De)}catch(Ct){dt(Ct)}}error(De){const{partialObserver:Je}=this;if(Je.error)try{Je.error(De)}catch(Ct){dt(Ct)}else dt(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Je){dt(Je)}}}class Vt extends Qe{constructor(De,Je,Ct){let bt;if(super(),(0,y.m)(De)||!De)bt={next:null!=De?De:void 0,error:null!=Je?Je:void 0,complete:null!=Ct?Ct:void 0};else{let Se;this&&ee.v.useDeprecatedNextContext?(Se=Object.create(De),Se.unsubscribe=()=>this.unsubscribe(),bt={next:De.next&&vt(De.next,Se),error:De.error&&vt(De.error,Se),complete:De.complete&&vt(De.complete,Se)}):bt=De}this.destination=new _t(bt)}}function dt(at){ee.v.useDeprecatedSynchronousErrorHandling?(0,ve.O)(at):(0,ie.h)(at)}function Ge(at,De){const{onStoppedNotification:Je}=ee.v;Je&&Ie.z.setTimeout(()=>Je(at,De))}const qt={closed:!0,next:ke.Z,error:function ot(at){throw at},complete:ke.Z}},727:(hn,ct,U)=>{U.d(ct,{Lc:()=>je,w0:()=>ke,Nn:()=>Xe});var y=U(576);const ee=(0,U(3888).d)(nt=>function(ve){nt(this),this.message=ve?`${ve.length} errors occurred during unsubscription:\n${ve.map((Qe,St)=>`${St+1}) ${Qe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ve});var ie=U(8737);class ke{constructor(Ie){this.initialTeardown=Ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ie;if(!this.closed){this.closed=!0;const{_parentage:ve}=this;if(ve)if(this._parentage=null,Array.isArray(ve))for(const vt of ve)vt.remove(this);else ve.remove(this);const{initialTeardown:Qe}=this;if((0,y.m)(Qe))try{Qe()}catch(vt){Ie=vt instanceof ee?vt.errors:[vt]}const{_finalizers:St}=this;if(St){this._finalizers=null;for(const vt of St)try{He(vt)}catch(_t){Ie=null!=Ie?Ie:[],_t instanceof ee?Ie=[...Ie,..._t.errors]:Ie.push(_t)}}if(Ie)throw new ee(Ie)}}add(Ie){var ve;if(Ie&&Ie!==this)if(this.closed)He(Ie);else{if(Ie instanceof ke){if(Ie.closed||Ie._hasParent(this))return;Ie._addParent(this)}(this._finalizers=null!==(ve=this._finalizers)&&void 0!==ve?ve:[]).push(Ie)}}_hasParent(Ie){const{_parentage:ve}=this;return ve===Ie||Array.isArray(ve)&&ve.includes(Ie)}_addParent(Ie){const{_parentage:ve}=this;this._parentage=Array.isArray(ve)?(ve.push(Ie),ve):ve?[ve,Ie]:Ie}_removeParent(Ie){const{_parentage:ve}=this;ve===Ie?this._parentage=null:Array.isArray(ve)&&(0,ie.P)(ve,Ie)}remove(Ie){const{_finalizers:ve}=this;ve&&(0,ie.P)(ve,Ie),Ie instanceof ke&&Ie._removeParent(this)}}ke.EMPTY=(()=>{const nt=new ke;return nt.closed=!0,nt})();const je=ke.EMPTY;function Xe(nt){return nt instanceof ke||nt&&"closed"in nt&&(0,y.m)(nt.remove)&&(0,y.m)(nt.add)&&(0,y.m)(nt.unsubscribe)}function He(nt){(0,y.m)(nt)?nt():nt.unsubscribe()}},2416:(hn,ct,U)=>{U.d(ct,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(hn,ct,U)=>{U.d(ct,{z:()=>ke});var y=U(8189),ee=U(7669),ie=U(8996);function ke(...je){return function V(){return(0,y.J)(1)}()((0,ie.D)(je,(0,ee.yG)(je)))}},515:(hn,ct,U)=>{U.d(ct,{E:()=>V});const V=new(U(8306).y)(ke=>ke.complete())},8996:(hn,ct,U)=>{U.d(ct,{D:()=>De});var y=U(8421),V=U(5363),ee=U(9468),je=U(8306),He=U(2202),nt=U(576),Ie=U(9672);function Qe(Je,Ct){if(!Je)throw new Error("Iterable cannot be null");return new je.y(bt=>{(0,Ie.f)(bt,Ct,()=>{const Se=Je[Symbol.asyncIterator]();(0,Ie.f)(bt,Ct,()=>{Se.next().then(Ht=>{Ht.done?bt.complete():bt.next(Ht.value)})},0,!0)})})}var St=U(3670),vt=U(8239),_t=U(1144),Vt=U(6495),dt=U(2206),ot=U(4532),Ge=U(3260);function De(Je,Ct){return Ct?function at(Je,Ct){if(null!=Je){if((0,St.c)(Je))return function ie(Je,Ct){return(0,y.Xf)(Je).pipe((0,ee.R)(Ct),(0,V.Q)(Ct))}(Je,Ct);if((0,_t.z)(Je))return function Xe(Je,Ct){return new je.y(bt=>{let Se=0;return Ct.schedule(function(){Se===Je.length?bt.complete():(bt.next(Je[Se++]),bt.closed||this.schedule())})})}(Je,Ct);if((0,vt.t)(Je))return function ke(Je,Ct){return(0,y.Xf)(Je).pipe((0,ee.R)(Ct),(0,V.Q)(Ct))}(Je,Ct);if((0,dt.D)(Je))return Qe(Je,Ct);if((0,Vt.T)(Je))return function ve(Je,Ct){return new je.y(bt=>{let Se;return(0,Ie.f)(bt,Ct,()=>{Se=Je[He.h](),(0,Ie.f)(bt,Ct,()=>{let Ht,Nt;try{({value:Ht,done:Nt}=Se.next())}catch(Rn){return void bt.error(Rn)}Nt?bt.complete():bt.next(Ht)},0,!0)}),()=>(0,nt.m)(null==Se?void 0:Se.return)&&Se.return()})}(Je,Ct);if((0,Ge.L)(Je))return function qt(Je,Ct){return Qe((0,Ge.Q)(Je),Ct)}(Je,Ct)}throw(0,ot.z)(Je)}(Je,Ct):(0,y.Xf)(Je)}},8421:(hn,ct,U)=>{U.d(ct,{Xf:()=>St});var y=U(7582),V=U(1144),ee=U(8239),ie=U(8306),ke=U(3670),je=U(2206),Xe=U(4532),He=U(6495),nt=U(3260),Ie=U(576),ve=U(7849),Qe=U(8822);function St(at){if(at instanceof ie.y)return at;if(null!=at){if((0,ke.c)(at))return function vt(at){return new ie.y(De=>{const Je=at[Qe.L]();if((0,Ie.m)(Je.subscribe))return Je.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(at);if((0,V.z)(at))return function _t(at){return new ie.y(De=>{for(let Je=0;Je<at.length&&!De.closed;Je++)De.next(at[Je]);De.complete()})}(at);if((0,ee.t)(at))return function Vt(at){return new ie.y(De=>{at.then(Je=>{De.closed||(De.next(Je),De.complete())},Je=>De.error(Je)).then(null,ve.h)})}(at);if((0,je.D)(at))return ot(at);if((0,He.T)(at))return function dt(at){return new ie.y(De=>{for(const Je of at)if(De.next(Je),De.closed)return;De.complete()})}(at);if((0,nt.L)(at))return function Ge(at){return ot((0,nt.Q)(at))}(at)}throw(0,Xe.z)(at)}function ot(at){return new ie.y(De=>{(function qt(at,De){var Je,Ct,bt,Se;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Je=(0,y.KL)(at);!(Ct=yield Je.next()).done;)if(De.next(Ct.value),De.closed)return}catch(Ht){bt={error:Ht}}finally{try{Ct&&!Ct.done&&(Se=Je.return)&&(yield Se.call(Je))}finally{if(bt)throw bt.error}}De.complete()})})(at,De).catch(Je=>De.error(Je))})}},6451:(hn,ct,U)=>{U.d(ct,{T:()=>je});var y=U(8189),V=U(8421),ee=U(515),ie=U(7669),ke=U(8996);function je(...Xe){const He=(0,ie.yG)(Xe),nt=(0,ie._6)(Xe,1/0),Ie=Xe;return Ie.length?1===Ie.length?(0,V.Xf)(Ie[0]):(0,y.J)(nt)((0,ke.D)(Ie,He)):ee.E}},9646:(hn,ct,U)=>{U.d(ct,{of:()=>ee});var y=U(7669),V=U(8996);function ee(...ie){const ke=(0,y.yG)(ie);return(0,V.D)(ie,ke)}},2843:(hn,ct,U)=>{U.d(ct,{_:()=>ee});var y=U(8306),V=U(576);function ee(ie,ke){const je=(0,V.m)(ie)?ie:()=>ie,Xe=He=>He.error(je());return new y.y(ke?He=>ke.schedule(Xe,0,He):Xe)}},5403:(hn,ct,U)=>{U.d(ct,{x:()=>V});var y=U(930);function V(ie,ke,je,Xe,He){return new ee(ie,ke,je,Xe,He)}class ee extends y.Lv{constructor(ke,je,Xe,He,nt,Ie){super(ke),this.onFinalize=nt,this.shouldUnsubscribe=Ie,this._next=je?function(ve){try{je(ve)}catch(Qe){ke.error(Qe)}}:super._next,this._error=He?function(ve){try{He(ve)}catch(Qe){ke.error(Qe)}finally{this.unsubscribe()}}:super._error,this._complete=Xe?function(){try{Xe()}catch(ve){ke.error(ve)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ke;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:je}=this;super.unsubscribe(),!je&&(null===(ke=this.onFinalize)||void 0===ke||ke.call(this))}}}},262:(hn,ct,U)=>{U.d(ct,{K:()=>ie});var y=U(8421),V=U(5403),ee=U(4482);function ie(ke){return(0,ee.e)((je,Xe)=>{let Ie,He=null,nt=!1;He=je.subscribe((0,V.x)(Xe,void 0,void 0,ve=>{Ie=(0,y.Xf)(ke(ve,ie(ke)(je))),He?(He.unsubscribe(),He=null,Ie.subscribe(Xe)):nt=!0})),nt&&(He.unsubscribe(),He=null,Ie.subscribe(Xe))})}},4351:(hn,ct,U)=>{U.d(ct,{b:()=>ee});var y=U(5577),V=U(576);function ee(ie,ke){return(0,V.m)(ke)?(0,y.z)(ie,ke,1):(0,y.z)(ie,1)}},6590:(hn,ct,U)=>{U.d(ct,{d:()=>ee});var y=U(4482),V=U(5403);function ee(ie){return(0,y.e)((ke,je)=>{let Xe=!1;ke.subscribe((0,V.x)(je,He=>{Xe=!0,je.next(He)},()=>{Xe||je.next(ie),je.complete()}))})}},1884:(hn,ct,U)=>{U.d(ct,{x:()=>ie});var y=U(4671),V=U(4482),ee=U(5403);function ie(je,Xe=y.y){return je=null!=je?je:ke,(0,V.e)((He,nt)=>{let Ie,ve=!0;He.subscribe((0,ee.x)(nt,Qe=>{const St=Xe(Qe);(ve||!je(Ie,St))&&(ve=!1,Ie=St,nt.next(Qe))}))})}function ke(je,Xe){return je===Xe}},9300:(hn,ct,U)=>{U.d(ct,{h:()=>ee});var y=U(4482),V=U(5403);function ee(ie,ke){return(0,y.e)((je,Xe)=>{let He=0;je.subscribe((0,V.x)(Xe,nt=>ie.call(ke,nt,He++)&&Xe.next(nt)))})}},590:(hn,ct,U)=>{U.d(ct,{P:()=>Xe});var y=U(6805),V=U(9300),ee=U(5698),ie=U(6590),ke=U(8068),je=U(4671);function Xe(He,nt){const Ie=arguments.length>=2;return ve=>ve.pipe(He?(0,V.h)((Qe,St)=>He(Qe,St,ve)):je.y,(0,ee.q)(1),Ie?(0,ie.d)(nt):(0,ke.T)(()=>new y.K))}},4004:(hn,ct,U)=>{U.d(ct,{U:()=>ee});var y=U(4482),V=U(5403);function ee(ie,ke){return(0,y.e)((je,Xe)=>{let He=0;je.subscribe((0,V.x)(Xe,nt=>{Xe.next(ie.call(ke,nt,He++))}))})}},8189:(hn,ct,U)=>{U.d(ct,{J:()=>ee});var y=U(5577),V=U(4671);function ee(ie=1/0){return(0,y.z)(V.y,ie)}},5577:(hn,ct,U)=>{U.d(ct,{z:()=>He});var y=U(4004),V=U(8421),ee=U(4482),ie=U(9672),ke=U(5403),Xe=U(576);function He(nt,Ie,ve=1/0){return(0,Xe.m)(Ie)?He((Qe,St)=>(0,y.U)((vt,_t)=>Ie(Qe,vt,St,_t))((0,V.Xf)(nt(Qe,St))),ve):("number"==typeof Ie&&(ve=Ie),(0,ee.e)((Qe,St)=>function je(nt,Ie,ve,Qe,St,vt,_t,Vt){const dt=[];let ot=0,Ge=0,qt=!1;const at=()=>{qt&&!dt.length&&!ot&&Ie.complete()},De=Ct=>ot<Qe?Je(Ct):dt.push(Ct),Je=Ct=>{vt&&Ie.next(Ct),ot++;let bt=!1;(0,V.Xf)(ve(Ct,Ge++)).subscribe((0,ke.x)(Ie,Se=>{null==St||St(Se),vt?De(Se):Ie.next(Se)},()=>{bt=!0},void 0,()=>{if(bt)try{for(ot--;dt.length&&ot<Qe;){const Se=dt.shift();_t?(0,ie.f)(Ie,_t,()=>Je(Se)):Je(Se)}at()}catch(Se){Ie.error(Se)}}))};return nt.subscribe((0,ke.x)(Ie,De,()=>{qt=!0,at()})),()=>{null==Vt||Vt()}}(Qe,St,nt,ve)))}},5363:(hn,ct,U)=>{U.d(ct,{Q:()=>ie});var y=U(9672),V=U(4482),ee=U(5403);function ie(ke,je=0){return(0,V.e)((Xe,He)=>{Xe.subscribe((0,ee.x)(He,nt=>(0,y.f)(He,ke,()=>He.next(nt),je),()=>(0,y.f)(He,ke,()=>He.complete(),je),nt=>(0,y.f)(He,ke,()=>He.error(nt),je)))})}},5026:(hn,ct,U)=>{U.d(ct,{R:()=>ie});var y=U(4482),V=U(5403);function ee(ke,je,Xe,He,nt){return(Ie,ve)=>{let Qe=Xe,St=je,vt=0;Ie.subscribe((0,V.x)(ve,_t=>{const Vt=vt++;St=Qe?ke(St,_t,Vt):(Qe=!0,_t),He&&ve.next(St)},nt&&(()=>{Qe&&ve.next(St),ve.complete()})))}}function ie(ke,je){return(0,y.e)(ee(ke,je,arguments.length>=2,!0))}},3099:(hn,ct,U)=>{U.d(ct,{B:()=>ke});var y=U(8421),V=U(7579),ee=U(930),ie=U(4482);function ke(Xe={}){const{connector:He=(()=>new V.x),resetOnError:nt=!0,resetOnComplete:Ie=!0,resetOnRefCountZero:ve=!0}=Xe;return Qe=>{let St,vt,_t,Vt=0,dt=!1,ot=!1;const Ge=()=>{null==vt||vt.unsubscribe(),vt=void 0},qt=()=>{Ge(),St=_t=void 0,dt=ot=!1},at=()=>{const De=St;qt(),null==De||De.unsubscribe()};return(0,ie.e)((De,Je)=>{Vt++,!ot&&!dt&&Ge();const Ct=_t=null!=_t?_t:He();Je.add(()=>{Vt--,0===Vt&&!ot&&!dt&&(vt=je(at,ve))}),Ct.subscribe(Je),!St&&Vt>0&&(St=new ee.Hp({next:bt=>Ct.next(bt),error:bt=>{ot=!0,Ge(),vt=je(qt,nt,bt),Ct.error(bt)},complete:()=>{dt=!0,Ge(),vt=je(qt,Ie),Ct.complete()}}),(0,y.Xf)(De).subscribe(St))})(Qe)}}function je(Xe,He,...nt){if(!0===He)return void Xe();if(!1===He)return;const Ie=new ee.Hp({next:()=>{Ie.unsubscribe(),Xe()}});return He(...nt).subscribe(Ie)}},8675:(hn,ct,U)=>{U.d(ct,{O:()=>ie});var y=U(7272),V=U(7669),ee=U(4482);function ie(...ke){const je=(0,V.yG)(ke);return(0,ee.e)((Xe,He)=>{(je?(0,y.z)(ke,Xe,je):(0,y.z)(ke,Xe)).subscribe(He)})}},9468:(hn,ct,U)=>{U.d(ct,{R:()=>V});var y=U(4482);function V(ee,ie=0){return(0,y.e)((ke,je)=>{je.add(ee.schedule(()=>ke.subscribe(je),ie))})}},3900:(hn,ct,U)=>{U.d(ct,{w:()=>ie});var y=U(8421),V=U(4482),ee=U(5403);function ie(ke,je){return(0,V.e)((Xe,He)=>{let nt=null,Ie=0,ve=!1;const Qe=()=>ve&&!nt&&He.complete();Xe.subscribe((0,ee.x)(He,St=>{null==nt||nt.unsubscribe();let vt=0;const _t=Ie++;(0,y.Xf)(ke(St,_t)).subscribe(nt=(0,ee.x)(He,Vt=>He.next(je?je(St,Vt,_t,vt++):Vt),()=>{nt=null,Qe()}))},()=>{ve=!0,Qe()}))})}},5698:(hn,ct,U)=>{U.d(ct,{q:()=>ie});var y=U(515),V=U(4482),ee=U(5403);function ie(ke){return ke<=0?()=>y.E:(0,V.e)((je,Xe)=>{let He=0;je.subscribe((0,ee.x)(Xe,nt=>{++He<=ke&&(Xe.next(nt),ke<=He&&Xe.complete())}))})}},8505:(hn,ct,U)=>{U.d(ct,{b:()=>ke});var y=U(576),V=U(4482),ee=U(5403),ie=U(4671);function ke(je,Xe,He){const nt=(0,y.m)(je)||Xe||He?{next:je,error:Xe,complete:He}:je;return nt?(0,V.e)((Ie,ve)=>{var Qe;null===(Qe=nt.subscribe)||void 0===Qe||Qe.call(nt);let St=!0;Ie.subscribe((0,ee.x)(ve,vt=>{var _t;null===(_t=nt.next)||void 0===_t||_t.call(nt,vt),ve.next(vt)},()=>{var vt;St=!1,null===(vt=nt.complete)||void 0===vt||vt.call(nt),ve.complete()},vt=>{var _t;St=!1,null===(_t=nt.error)||void 0===_t||_t.call(nt,vt),ve.error(vt)},()=>{var vt,_t;St&&(null===(vt=nt.unsubscribe)||void 0===vt||vt.call(nt)),null===(_t=nt.finalize)||void 0===_t||_t.call(nt)}))}):ie.y}},8068:(hn,ct,U)=>{U.d(ct,{T:()=>ie});var y=U(6805),V=U(4482),ee=U(5403);function ie(je=ke){return(0,V.e)((Xe,He)=>{let nt=!1;Xe.subscribe((0,ee.x)(He,Ie=>{nt=!0,He.next(Ie)},()=>nt?He.complete():He.error(je())))})}function ke(){return new y.K}},4408:(hn,ct,U)=>{U.d(ct,{o:()=>ke});var y=U(727);class V extends y.w0{constructor(Xe,He){super()}schedule(Xe,He=0){return this}}const ee={setInterval(je,Xe,...He){const{delegate:nt}=ee;return(null==nt?void 0:nt.setInterval)?nt.setInterval(je,Xe,...He):setInterval(je,Xe,...He)},clearInterval(je){const{delegate:Xe}=ee;return((null==Xe?void 0:Xe.clearInterval)||clearInterval)(je)},delegate:void 0};var ie=U(8737);class ke extends V{constructor(Xe,He){super(Xe,He),this.scheduler=Xe,this.work=He,this.pending=!1}schedule(Xe,He=0){var nt;if(this.closed)return this;this.state=Xe;const Ie=this.id,ve=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(ve,Ie,He)),this.pending=!0,this.delay=He,this.id=null!==(nt=this.id)&&void 0!==nt?nt:this.requestAsyncId(ve,this.id,He),this}requestAsyncId(Xe,He,nt=0){return ee.setInterval(Xe.flush.bind(Xe,this),nt)}recycleAsyncId(Xe,He,nt=0){if(null!=nt&&this.delay===nt&&!1===this.pending)return He;null!=He&&ee.clearInterval(He)}execute(Xe,He){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const nt=this._execute(Xe,He);if(nt)return nt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Xe,He){let Ie,nt=!1;try{this.work(Xe)}catch(ve){nt=!0,Ie=ve||new Error("Scheduled action threw falsy error")}if(nt)return this.unsubscribe(),Ie}unsubscribe(){if(!this.closed){const{id:Xe,scheduler:He}=this,{actions:nt}=He;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(nt,this),null!=Xe&&(this.id=this.recycleAsyncId(He,Xe,null)),this.delay=null,super.unsubscribe()}}}},7565:(hn,ct,U)=>{U.d(ct,{v:()=>ee});var y=U(6063);class V{constructor(ke,je=V.now){this.schedulerActionCtor=ke,this.now=je}schedule(ke,je=0,Xe){return new this.schedulerActionCtor(this,ke).schedule(Xe,je)}}V.now=y.l.now;class ee extends V{constructor(ke,je=V.now){super(ke,je),this.actions=[],this._active=!1}flush(ke){const{actions:je}=this;if(this._active)return void je.push(ke);let Xe;this._active=!0;do{if(Xe=ke.execute(ke.state,ke.delay))break}while(ke=je.shift());if(this._active=!1,Xe){for(;ke=je.shift();)ke.unsubscribe();throw Xe}}}},4986:(hn,ct,U)=>{U.d(ct,{z:()=>ee});var y=U(4408);const ee=new(U(7565).v)(y.o)},6063:(hn,ct,U)=>{U.d(ct,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(hn,ct,U)=>{U.d(ct,{z:()=>y});const y={setTimeout(V,ee,...ie){const{delegate:ke}=y;return(null==ke?void 0:ke.setTimeout)?ke.setTimeout(V,ee,...ie):setTimeout(V,ee,...ie)},clearTimeout(V){const{delegate:ee}=y;return((null==ee?void 0:ee.clearTimeout)||clearTimeout)(V)},delegate:void 0}},2202:(hn,ct,U)=>{U.d(ct,{h:()=>V});const V=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(hn,ct,U)=>{U.d(ct,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(hn,ct,U)=>{U.d(ct,{K:()=>V});const V=(0,U(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(hn,ct,U)=>{U.d(ct,{_6:()=>je,jO:()=>ie,yG:()=>ke});var y=U(576);function ee(Xe){return Xe[Xe.length-1]}function ie(Xe){return(0,y.m)(ee(Xe))?Xe.pop():void 0}function ke(Xe){return function V(Xe){return Xe&&(0,y.m)(Xe.schedule)}(ee(Xe))?Xe.pop():void 0}function je(Xe,He){return"number"==typeof ee(Xe)?Xe.pop():He}},4742:(hn,ct,U)=>{U.d(ct,{D:()=>ke});const{isArray:y}=Array,{getPrototypeOf:V,prototype:ee,keys:ie}=Object;function ke(Xe){if(1===Xe.length){const He=Xe[0];if(y(He))return{args:He,keys:null};if(function je(Xe){return Xe&&"object"==typeof Xe&&V(Xe)===ee}(He)){const nt=ie(He);return{args:nt.map(Ie=>He[Ie]),keys:nt}}}return{args:Xe,keys:null}}},8737:(hn,ct,U)=>{function y(V,ee){if(V){const ie=V.indexOf(ee);0<=ie&&V.splice(ie,1)}}U.d(ct,{P:()=>y})},3888:(hn,ct,U)=>{function y(V){const ie=V(ke=>{Error.call(ke),ke.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}U.d(ct,{d:()=>y})},1810:(hn,ct,U)=>{function y(V,ee){return V.reduce((ie,ke,je)=>(ie[ke]=ee[je],ie),{})}U.d(ct,{n:()=>y})},2806:(hn,ct,U)=>{U.d(ct,{O:()=>ie,x:()=>ee});var y=U(2416);let V=null;function ee(ke){if(y.v.useDeprecatedSynchronousErrorHandling){const je=!V;if(je&&(V={errorThrown:!1,error:null}),ke(),je){const{errorThrown:Xe,error:He}=V;if(V=null,Xe)throw He}}else ke()}function ie(ke){y.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ke)}},9672:(hn,ct,U)=>{function y(V,ee,ie,ke=0,je=!1){const Xe=ee.schedule(function(){ie(),je?V.add(this.schedule(null,ke)):this.unsubscribe()},ke);if(V.add(Xe),!je)return Xe}U.d(ct,{f:()=>y})},4671:(hn,ct,U)=>{function y(V){return V}U.d(ct,{y:()=>y})},1144:(hn,ct,U)=>{U.d(ct,{z:()=>y});const y=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(hn,ct,U)=>{U.d(ct,{D:()=>V});var y=U(576);function V(ee){return Symbol.asyncIterator&&(0,y.m)(null==ee?void 0:ee[Symbol.asyncIterator])}},576:(hn,ct,U)=>{function y(V){return"function"==typeof V}U.d(ct,{m:()=>y})},3670:(hn,ct,U)=>{U.d(ct,{c:()=>ee});var y=U(8822),V=U(576);function ee(ie){return(0,V.m)(ie[y.L])}},6495:(hn,ct,U)=>{U.d(ct,{T:()=>ee});var y=U(2202),V=U(576);function ee(ie){return(0,V.m)(null==ie?void 0:ie[y.h])}},8239:(hn,ct,U)=>{U.d(ct,{t:()=>V});var y=U(576);function V(ee){return(0,y.m)(null==ee?void 0:ee.then)}},3260:(hn,ct,U)=>{U.d(ct,{L:()=>ie,Q:()=>ee});var y=U(7582),V=U(576);function ee(ke){return(0,y.FC)(this,arguments,function*(){const Xe=ke.getReader();try{for(;;){const{value:He,done:nt}=yield(0,y.qq)(Xe.read());if(nt)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(He)}}finally{Xe.releaseLock()}})}function ie(ke){return(0,V.m)(null==ke?void 0:ke.getReader)}},4482:(hn,ct,U)=>{U.d(ct,{A:()=>V,e:()=>ee});var y=U(576);function V(ie){return(0,y.m)(null==ie?void 0:ie.lift)}function ee(ie){return ke=>{if(V(ke))return ke.lift(function(je){try{return ie(je,this)}catch(Xe){this.error(Xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(hn,ct,U)=>{U.d(ct,{Z:()=>ie});var y=U(4004);const{isArray:V}=Array;function ie(ke){return(0,y.U)(je=>function ee(ke,je){return V(je)?ke(...je):ke(je)}(ke,je))}},5032:(hn,ct,U)=>{function y(){}U.d(ct,{Z:()=>y})},7849:(hn,ct,U)=>{U.d(ct,{h:()=>ee});var y=U(2416),V=U(3410);function ee(ie){V.z.setTimeout(()=>{const{onUnhandledError:ke}=y.v;if(!ke)throw ie;ke(ie)})}},4532:(hn,ct,U)=>{function y(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(ct,{z:()=>y})},1777:(hn,ct,U)=>{U.d(ct,{LC:()=>V,SB:()=>nt,X$:()=>ie,ZE:()=>Ge,ZN:()=>ot,_j:()=>y,eR:()=>ve,jt:()=>ke,k1:()=>qt,l3:()=>ee,oB:()=>He,vP:()=>Xe});class y{}class V{}const ee="*";function ie(at,De){return{type:7,name:at,definitions:De,options:{}}}function ke(at,De=null){return{type:4,styles:De,timings:at}}function Xe(at,De=null){return{type:2,steps:at,options:De}}function He(at){return{type:6,styles:at,offset:null}}function nt(at,De,Je){return{type:0,name:at,styles:De,options:Je}}function ve(at,De,Je=null){return{type:1,expr:at,animation:De,options:Je}}function dt(at){Promise.resolve(null).then(at)}class ot{constructor(De=0,Je=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=De+Je}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(De=>De()),this._onDoneFns=[])}onStart(De){this._onStartFns.push(De)}onDone(De){this._onDoneFns.push(De)}onDestroy(De){this._onDestroyFns.push(De)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(De=>De()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(De=>De()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(De){this._position=this.totalTime?De*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(De){const Je="start"==De?this._onStartFns:this._onDoneFns;Je.forEach(Ct=>Ct()),Je.length=0}}class Ge{constructor(De){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=De;let Je=0,Ct=0,bt=0;const Se=this.players.length;0==Se?dt(()=>this._onFinish()):this.players.forEach(Ht=>{Ht.onDone(()=>{++Je==Se&&this._onFinish()}),Ht.onDestroy(()=>{++Ct==Se&&this._onDestroy()}),Ht.onStart(()=>{++bt==Se&&this._onStart()})}),this.totalTime=this.players.reduce((Ht,Nt)=>Math.max(Ht,Nt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(De=>De()),this._onDoneFns=[])}init(){this.players.forEach(De=>De.init())}onStart(De){this._onStartFns.push(De)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(De=>De()),this._onStartFns=[])}onDone(De){this._onDoneFns.push(De)}onDestroy(De){this._onDestroyFns.push(De)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(De=>De.play())}pause(){this.players.forEach(De=>De.pause())}restart(){this.players.forEach(De=>De.restart())}finish(){this._onFinish(),this.players.forEach(De=>De.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(De=>De.destroy()),this._onDestroyFns.forEach(De=>De()),this._onDestroyFns=[])}reset(){this.players.forEach(De=>De.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(De){const Je=De*this.totalTime;this.players.forEach(Ct=>{const bt=Ct.totalTime?Math.min(1,Je/Ct.totalTime):1;Ct.setPosition(bt)})}getPosition(){const De=this.players.reduce((Je,Ct)=>null===Je||Ct.totalTime>Je.totalTime?Ct:Je,null);return null!=De?De.getPosition():0}beforeDestroy(){this.players.forEach(De=>{De.beforeDestroy&&De.beforeDestroy()})}triggerCallback(De){const Je="start"==De?this._onStartFns:this._onDoneFns;Je.forEach(Ct=>Ct()),Je.length=0}}const qt="!"},9808:(hn,ct,U)=>{U.d(ct,{Do:()=>at,EM:()=>Oi,HT:()=>ke,JF:()=>si,JJ:()=>Oo,K0:()=>Xe,Mx:()=>bi,O5:()=>dr,PC:()=>hr,PM:()=>Js,S$:()=>dt,V_:()=>Ie,Ye:()=>De,b0:()=>qt,bD:()=>Cs,ez:()=>ws,lw:()=>He,mk:()=>os,mr:()=>Ge,q:()=>ee,qS:()=>lr,sg:()=>_n,uU:()=>Os,w_:()=>je});var y=U(5e3);let V=null;function ee(){return V}function ke(L){V||(V=L)}class je{}const Xe=new y.OlP("DocumentToken");let He=(()=>{class L{historyGo($){throw new Error("Not implemented")}}return L.\u0275fac=function($){return new($||L)},L.\u0275prov=y.Yz7({token:L,factory:function(){return function nt(){return(0,y.LFG)(ve)}()},providedIn:"platform"}),L})();const Ie=new y.OlP("Location Initialized");let ve=(()=>{class L extends He{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState($){const he=ee().getGlobalEventTarget(this._doc,"window");return he.addEventListener("popstate",$,!1),()=>he.removeEventListener("popstate",$)}onHashChange($){const he=ee().getGlobalEventTarget(this._doc,"window");return he.addEventListener("hashchange",$,!1),()=>he.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,he,Fe){Qe()?this._history.pushState($,he,Fe):this.location.hash=Fe}replaceState($,he,Fe){Qe()?this._history.replaceState($,he,Fe):this.location.hash=Fe}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return L.\u0275fac=function($){return new($||L)(y.LFG(Xe))},L.\u0275prov=y.Yz7({token:L,factory:function(){return function St(){return new ve((0,y.LFG)(Xe))}()},providedIn:"platform"}),L})();function Qe(){return!!window.history.pushState}function vt(L,le){if(0==L.length)return le;if(0==le.length)return L;let $=0;return L.endsWith("/")&&$++,le.startsWith("/")&&$++,2==$?L+le.substring(1):1==$?L+le:L+"/"+le}function _t(L){const le=L.match(/#|\?|$/),$=le&&le.index||L.length;return L.slice(0,$-("/"===L[$-1]?1:0))+L.slice($)}function Vt(L){return L&&"?"!==L[0]?"?"+L:L}let dt=(()=>{class L{historyGo($){throw new Error("Not implemented")}}return L.\u0275fac=function($){return new($||L)},L.\u0275prov=y.Yz7({token:L,factory:function(){return function ot(L){const le=(0,y.LFG)(Xe).location;return new qt((0,y.LFG)(He),le&&le.origin||"")}()},providedIn:"root"}),L})();const Ge=new y.OlP("appBaseHref");let qt=(()=>{class L extends dt{constructor($,he){if(super(),this._platformLocation=$,this._removeListenerFns=[],null==he&&(he=this._platformLocation.getBaseHrefFromDOM()),null==he)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=he}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return vt(this._baseHref,$)}path($=!1){const he=this._platformLocation.pathname+Vt(this._platformLocation.search),Fe=this._platformLocation.hash;return Fe&&$?`${he}${Fe}`:he}pushState($,he,Fe,Pt){const Kt=this.prepareExternalUrl(Fe+Vt(Pt));this._platformLocation.pushState($,he,Kt)}replaceState($,he,Fe,Pt){const Kt=this.prepareExternalUrl(Fe+Vt(Pt));this._platformLocation.replaceState($,he,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var he,Fe;null===(Fe=(he=this._platformLocation).historyGo)||void 0===Fe||Fe.call(he,$)}}return L.\u0275fac=function($){return new($||L)(y.LFG(He),y.LFG(Ge,8))},L.\u0275prov=y.Yz7({token:L,factory:L.\u0275fac}),L})(),at=(()=>{class L extends dt{constructor($,he){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=he&&(this._baseHref=he)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let he=this._platformLocation.hash;return null==he&&(he="#"),he.length>0?he.substring(1):he}prepareExternalUrl($){const he=vt(this._baseHref,$);return he.length>0?"#"+he:he}pushState($,he,Fe,Pt){let Kt=this.prepareExternalUrl(Fe+Vt(Pt));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.pushState($,he,Kt)}replaceState($,he,Fe,Pt){let Kt=this.prepareExternalUrl(Fe+Vt(Pt));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.replaceState($,he,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var he,Fe;null===(Fe=(he=this._platformLocation).historyGo)||void 0===Fe||Fe.call(he,$)}}return L.\u0275fac=function($){return new($||L)(y.LFG(He),y.LFG(Ge,8))},L.\u0275prov=y.Yz7({token:L,factory:L.\u0275fac}),L})(),De=(()=>{class L{constructor($,he){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=$;const Fe=this._platformStrategy.getBaseHref();this._platformLocation=he,this._baseHref=_t(bt(Fe)),this._platformStrategy.onPopState(Pt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Pt.state,type:Pt.type})})}path($=!1){return this.normalize(this._platformStrategy.path($))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo($,he=""){return this.path()==this.normalize($+Vt(he))}normalize($){return L.stripTrailingSlash(function Ct(L,le){return L&&le.startsWith(L)?le.substring(L.length):le}(this._baseHref,bt($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._platformStrategy.prepareExternalUrl($)}go($,he="",Fe=null){this._platformStrategy.pushState(Fe,"",$,he),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Vt(he)),Fe)}replaceState($,he="",Fe=null){this._platformStrategy.replaceState(Fe,"",$,he),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Vt(he)),Fe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo($=0){var he,Fe;null===(Fe=(he=this._platformStrategy).historyGo)||void 0===Fe||Fe.call(he,$)}onUrlChange($){this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(he=>{this._notifyUrlChangeListeners(he.url,he.state)}))}_notifyUrlChangeListeners($="",he){this._urlChangeListeners.forEach(Fe=>Fe($,he))}subscribe($,he,Fe){return this._subject.subscribe({next:$,error:he,complete:Fe})}}return L.normalizeQueryParams=Vt,L.joinWithSlash=vt,L.stripTrailingSlash=_t,L.\u0275fac=function($){return new($||L)(y.LFG(dt),y.LFG(He))},L.\u0275prov=y.Yz7({token:L,factory:function(){return function Je(){return new De((0,y.LFG)(dt),(0,y.LFG)(He))}()},providedIn:"root"}),L})();function bt(L){return L.replace(/\/index.html$/,"")}var Ht=(()=>((Ht=Ht||{})[Ht.Decimal=0]="Decimal",Ht[Ht.Percent=1]="Percent",Ht[Ht.Currency=2]="Currency",Ht[Ht.Scientific=3]="Scientific",Ht))(),Rn=(()=>((Rn=Rn||{})[Rn.Format=0]="Format",Rn[Rn.Standalone=1]="Standalone",Rn))(),En=(()=>((En=En||{})[En.Narrow=0]="Narrow",En[En.Abbreviated=1]="Abbreviated",En[En.Wide=2]="Wide",En[En.Short=3]="Short",En))(),Ln=(()=>((Ln=Ln||{})[Ln.Short=0]="Short",Ln[Ln.Medium=1]="Medium",Ln[Ln.Long=2]="Long",Ln[Ln.Full=3]="Full",Ln))(),un=(()=>((un=un||{})[un.Decimal=0]="Decimal",un[un.Group=1]="Group",un[un.List=2]="List",un[un.PercentSign=3]="PercentSign",un[un.PlusSign=4]="PlusSign",un[un.MinusSign=5]="MinusSign",un[un.Exponential=6]="Exponential",un[un.SuperscriptingExponent=7]="SuperscriptingExponent",un[un.PerMille=8]="PerMille",un[un.Infinity=9]="Infinity",un[un.NaN=10]="NaN",un[un.TimeSeparator=11]="TimeSeparator",un[un.CurrencyDecimal=12]="CurrencyDecimal",un[un.CurrencyGroup=13]="CurrencyGroup",un))();function Me(L,le){return On((0,y.cg1)(L)[y.wAp.DateFormat],le)}function Ee(L,le){return On((0,y.cg1)(L)[y.wAp.TimeFormat],le)}function Ne(L,le){return On((0,y.cg1)(L)[y.wAp.DateTimeFormat],le)}function st(L,le){const $=(0,y.cg1)(L),he=$[y.wAp.NumberSymbols][le];if(void 0===he){if(le===un.CurrencyDecimal)return $[y.wAp.NumberSymbols][un.Decimal];if(le===un.CurrencyGroup)return $[y.wAp.NumberSymbols][un.Group]}return he}function jn(L){if(!L[y.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${L[y.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function On(L,le){for(let $=le;$>-1;$--)if(void 0!==L[$])return L[$];throw new Error("Locale data API: locale data undefined")}function Vn(L){const[le,$]=L.split(":");return{hours:+le,minutes:+$}}const We=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ze={},ft=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var At=(()=>((At=At||{})[At.Short=0]="Short",At[At.ShortGMT=1]="ShortGMT",At[At.Long=2]="Long",At[At.Extended=3]="Extended",At))(),Yt=(()=>((Yt=Yt||{})[Yt.FullYear=0]="FullYear",Yt[Yt.Month=1]="Month",Yt[Yt.Date=2]="Date",Yt[Yt.Hours=3]="Hours",Yt[Yt.Minutes=4]="Minutes",Yt[Yt.Seconds=5]="Seconds",Yt[Yt.FractionalSeconds=6]="FractionalSeconds",Yt[Yt.Day=7]="Day",Yt))(),on=(()=>((on=on||{})[on.DayPeriods=0]="DayPeriods",on[on.Days=1]="Days",on[on.Months=2]="Months",on[on.Eras=3]="Eras",on))();function Dr(L,le,$,he){let Fe=function te(L){if(xe(L))return L;if("number"==typeof L&&!isNaN(L))return new Date(L);if("string"==typeof L){if(L=L.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(L)){const[Fe,Pt=1,Kt=1]=L.split("-").map(gn=>+gn);return Kn(Fe,Pt-1,Kt)}const $=parseFloat(L);if(!isNaN(L-$))return new Date($);let he;if(he=L.match(We))return function se(L){const le=new Date(0);let $=0,he=0;const Fe=L[8]?le.setUTCFullYear:le.setFullYear,Pt=L[8]?le.setUTCHours:le.setHours;L[9]&&($=Number(L[9]+L[10]),he=Number(L[9]+L[11])),Fe.call(le,Number(L[1]),Number(L[2])-1,Number(L[3]));const Kt=Number(L[4]||0)-$,gn=Number(L[5]||0)-he,vr=Number(L[6]||0),br=Math.floor(1e3*parseFloat("0."+(L[7]||0)));return Pt.call(le,Kt,gn,vr,br),le}(he)}const le=new Date(L);if(!xe(le))throw new Error(`Unable to convert "${L}" into a date`);return le}(L);le=Un($,le)||le;let gn,Kt=[];for(;le;){if(gn=ft.exec(le),!gn){Kt.push(le);break}{Kt=Kt.concat(gn.slice(1));const fr=Kt.pop();if(!fr)break;le=fr}}let vr=Fe.getTimezoneOffset();he&&(vr=me(he,vr),Fe=function z(L,le,$){const he=$?-1:1,Fe=L.getTimezoneOffset();return function ye(L,le){return(L=new Date(L.getTime())).setMinutes(L.getMinutes()+le),L}(L,he*(me(le,Fe)-Fe))}(Fe,he,!0));let br="";return Kt.forEach(fr=>{const Sr=function Pe(L){if(Ue[L])return Ue[L];let le;switch(L){case"G":case"GG":case"GGG":le=Xn(on.Eras,En.Abbreviated);break;case"GGGG":le=Xn(on.Eras,En.Wide);break;case"GGGGG":le=Xn(on.Eras,En.Narrow);break;case"y":le=rn(Yt.FullYear,1,0,!1,!0);break;case"yy":le=rn(Yt.FullYear,2,0,!0,!0);break;case"yyy":le=rn(Yt.FullYear,3,0,!1,!0);break;case"yyyy":le=rn(Yt.FullYear,4,0,!1,!0);break;case"Y":le=Br(1);break;case"YY":le=Br(2,!0);break;case"YYY":le=Br(3);break;case"YYYY":le=Br(4);break;case"M":case"L":le=rn(Yt.Month,1,1);break;case"MM":case"LL":le=rn(Yt.Month,2,1);break;case"MMM":le=Xn(on.Months,En.Abbreviated);break;case"MMMM":le=Xn(on.Months,En.Wide);break;case"MMMMM":le=Xn(on.Months,En.Narrow);break;case"LLL":le=Xn(on.Months,En.Abbreviated,Rn.Standalone);break;case"LLLL":le=Xn(on.Months,En.Wide,Rn.Standalone);break;case"LLLLL":le=Xn(on.Months,En.Narrow,Rn.Standalone);break;case"w":le=Mi(1);break;case"ww":le=Mi(2);break;case"W":le=Mi(1,!0);break;case"d":le=rn(Yt.Date,1);break;case"dd":le=rn(Yt.Date,2);break;case"c":case"cc":le=rn(Yt.Day,1);break;case"ccc":le=Xn(on.Days,En.Abbreviated,Rn.Standalone);break;case"cccc":le=Xn(on.Days,En.Wide,Rn.Standalone);break;case"ccccc":le=Xn(on.Days,En.Narrow,Rn.Standalone);break;case"cccccc":le=Xn(on.Days,En.Short,Rn.Standalone);break;case"E":case"EE":case"EEE":le=Xn(on.Days,En.Abbreviated);break;case"EEEE":le=Xn(on.Days,En.Wide);break;case"EEEEE":le=Xn(on.Days,En.Narrow);break;case"EEEEEE":le=Xn(on.Days,En.Short);break;case"a":case"aa":case"aaa":le=Xn(on.DayPeriods,En.Abbreviated);break;case"aaaa":le=Xn(on.DayPeriods,En.Wide);break;case"aaaaa":le=Xn(on.DayPeriods,En.Narrow);break;case"b":case"bb":case"bbb":le=Xn(on.DayPeriods,En.Abbreviated,Rn.Standalone,!0);break;case"bbbb":le=Xn(on.DayPeriods,En.Wide,Rn.Standalone,!0);break;case"bbbbb":le=Xn(on.DayPeriods,En.Narrow,Rn.Standalone,!0);break;case"B":case"BB":case"BBB":le=Xn(on.DayPeriods,En.Abbreviated,Rn.Format,!0);break;case"BBBB":le=Xn(on.DayPeriods,En.Wide,Rn.Format,!0);break;case"BBBBB":le=Xn(on.DayPeriods,En.Narrow,Rn.Format,!0);break;case"h":le=rn(Yt.Hours,1,-12);break;case"hh":le=rn(Yt.Hours,2,-12);break;case"H":le=rn(Yt.Hours,1);break;case"HH":le=rn(Yt.Hours,2);break;case"m":le=rn(Yt.Minutes,1);break;case"mm":le=rn(Yt.Minutes,2);break;case"s":le=rn(Yt.Seconds,1);break;case"ss":le=rn(Yt.Seconds,2);break;case"S":le=rn(Yt.FractionalSeconds,1);break;case"SS":le=rn(Yt.FractionalSeconds,2);break;case"SSS":le=rn(Yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":le=Qn(At.Short);break;case"ZZZZZ":le=Qn(At.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":le=Qn(At.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":le=Qn(At.Long);break;default:return null}return Ue[L]=le,le}(fr);br+=Sr?Sr(Fe,$,vr):"''"===fr?"'":fr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),br}function Kn(L,le,$){const he=new Date(0);return he.setFullYear(L,le,$),he.setHours(0,0,0),he}function Un(L,le){const $=function Ot(L){return(0,y.cg1)(L)[y.wAp.LocaleId]}(L);if(ze[$]=ze[$]||{},ze[$][le])return ze[$][le];let he="";switch(le){case"shortDate":he=Me(L,Ln.Short);break;case"mediumDate":he=Me(L,Ln.Medium);break;case"longDate":he=Me(L,Ln.Long);break;case"fullDate":he=Me(L,Ln.Full);break;case"shortTime":he=Ee(L,Ln.Short);break;case"mediumTime":he=Ee(L,Ln.Medium);break;case"longTime":he=Ee(L,Ln.Long);break;case"fullTime":he=Ee(L,Ln.Full);break;case"short":const Fe=Un(L,"shortTime"),Pt=Un(L,"shortDate");he=vi(Ne(L,Ln.Short),[Fe,Pt]);break;case"medium":const Kt=Un(L,"mediumTime"),gn=Un(L,"mediumDate");he=vi(Ne(L,Ln.Medium),[Kt,gn]);break;case"long":const vr=Un(L,"longTime"),br=Un(L,"longDate");he=vi(Ne(L,Ln.Long),[vr,br]);break;case"full":const fr=Un(L,"fullTime"),Sr=Un(L,"fullDate");he=vi(Ne(L,Ln.Full),[fr,Sr])}return he&&(ze[$][le]=he),he}function vi(L,le){return le&&(L=L.replace(/\{([^}]+)}/g,function($,he){return null!=le&&he in le?le[he]:$})),L}function ar(L,le,$="-",he,Fe){let Pt="";(L<0||Fe&&L<=0)&&(Fe?L=1-L:(L=-L,Pt=$));let Kt=String(L);for(;Kt.length<le;)Kt="0"+Kt;return he&&(Kt=Kt.substr(Kt.length-le)),Pt+Kt}function rn(L,le,$=0,he=!1,Fe=!1){return function(Pt,Kt){let gn=function Mr(L,le){switch(L){case Yt.FullYear:return le.getFullYear();case Yt.Month:return le.getMonth();case Yt.Date:return le.getDate();case Yt.Hours:return le.getHours();case Yt.Minutes:return le.getMinutes();case Yt.Seconds:return le.getSeconds();case Yt.FractionalSeconds:return le.getMilliseconds();case Yt.Day:return le.getDay();default:throw new Error(`Unknown DateType value "${L}".`)}}(L,Pt);if(($>0||gn>-$)&&(gn+=$),L===Yt.Hours)0===gn&&-12===$&&(gn=12);else if(L===Yt.FractionalSeconds)return function mr(L,le){return ar(L,3).substr(0,le)}(gn,le);const vr=st(Kt,un.MinusSign);return ar(gn,le,vr,he,Fe)}}function Xn(L,le,$=Rn.Format,he=!1){return function(Fe,Pt){return function cr(L,le,$,he,Fe,Pt){switch($){case on.Months:return function cn(L,le,$){const he=(0,y.cg1)(L),Pt=On([he[y.wAp.MonthsFormat],he[y.wAp.MonthsStandalone]],le);return On(Pt,$)}(le,Fe,he)[L.getMonth()];case on.Days:return function Mn(L,le,$){const he=(0,y.cg1)(L),Pt=On([he[y.wAp.DaysFormat],he[y.wAp.DaysStandalone]],le);return On(Pt,$)}(le,Fe,he)[L.getDay()];case on.DayPeriods:const Kt=L.getHours(),gn=L.getMinutes();if(Pt){const br=function Jn(L){const le=(0,y.cg1)(L);return jn(le),(le[y.wAp.ExtraData][2]||[]).map(he=>"string"==typeof he?Vn(he):[Vn(he[0]),Vn(he[1])])}(le),fr=function yn(L,le,$){const he=(0,y.cg1)(L);jn(he);const Pt=On([he[y.wAp.ExtraData][0],he[y.wAp.ExtraData][1]],le)||[];return On(Pt,$)||[]}(le,Fe,he),Sr=br.findIndex(wi=>{if(Array.isArray(wi)){const[_i,li]=wi,ao=Kt>=_i.hours&&gn>=_i.minutes,di=Kt<li.hours||Kt===li.hours&&gn<li.minutes;if(_i.hours<li.hours){if(ao&&di)return!0}else if(ao||di)return!0}else if(wi.hours===Kt&&wi.minutes===gn)return!0;return!1});if(-1!==Sr)return fr[Sr]}return function or(L,le,$){const he=(0,y.cg1)(L),Pt=On([he[y.wAp.DayPeriodsFormat],he[y.wAp.DayPeriodsStandalone]],le);return On(Pt,$)}(le,Fe,he)[Kt<12?0:1];case on.Eras:return function it(L,le){return On((0,y.cg1)(L)[y.wAp.Eras],le)}(le,he)[L.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${$}`)}}(Fe,Pt,L,le,$,he)}}function Qn(L){return function(le,$,he){const Fe=-1*he,Pt=st($,un.MinusSign),Kt=Fe>0?Math.floor(Fe/60):Math.ceil(Fe/60);switch(L){case At.Short:return(Fe>=0?"+":"")+ar(Kt,2,Pt)+ar(Math.abs(Fe%60),2,Pt);case At.ShortGMT:return"GMT"+(Fe>=0?"+":"")+ar(Kt,1,Pt);case At.Long:return"GMT"+(Fe>=0?"+":"")+ar(Kt,2,Pt)+":"+ar(Math.abs(Fe%60),2,Pt);case At.Extended:return 0===he?"Z":(Fe>=0?"+":"")+ar(Kt,2,Pt)+":"+ar(Math.abs(Fe%60),2,Pt);default:throw new Error(`Unknown zone width "${L}"`)}}}function Vi(L){return Kn(L.getFullYear(),L.getMonth(),L.getDate()+(4-L.getDay()))}function Mi(L,le=!1){return function($,he){let Fe;if(le){const Pt=new Date($.getFullYear(),$.getMonth(),1).getDay()-1,Kt=$.getDate();Fe=1+Math.floor((Kt+Pt)/7)}else{const Pt=Vi($),Kt=function ni(L){const le=Kn(L,0,1).getDay();return Kn(L,0,1+(le<=4?4:11)-le)}(Pt.getFullYear()),gn=Pt.getTime()-Kt.getTime();Fe=1+Math.round(gn/6048e5)}return ar(Fe,L,st(he,un.MinusSign))}}function Br(L,le=!1){return function($,he){return ar(Vi($).getFullYear(),L,st(he,un.MinusSign),le)}}const Ue={};function me(L,le){L=L.replace(/:/g,"");const $=Date.parse("Jan 01, 1970 00:00:00 "+L)/6e4;return isNaN($)?le:$}function xe(L){return L instanceof Date&&!isNaN(L.valueOf())}const pt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ri(L){const le=parseInt(L);if(isNaN(le))throw new Error("Invalid integer literal when parsing "+L);return le}function lr(L,le,$){return(0,y.dwT)(L,le,$)}function bi(L,le){le=encodeURIComponent(le);for(const $ of L.split(";")){const he=$.indexOf("="),[Fe,Pt]=-1==he?[$,""]:[$.slice(0,he),$.slice(he+1)];if(Fe.trim()===le)return decodeURIComponent(Pt)}return null}let os=(()=>{class L{constructor($,he,Fe,Pt){this._iterableDiffers=$,this._keyValueDiffers=he,this._ngEl=Fe,this._renderer=Pt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,y.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(he=>this._toggleClass(he.key,he.currentValue)),$.forEachChangedItem(he=>this._toggleClass(he.key,he.currentValue)),$.forEachRemovedItem(he=>{he.previousValue&&this._toggleClass(he.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(he=>{if("string"!=typeof he.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,y.AaK)(he.item)}`);this._toggleClass(he.item,!0)}),$.forEachRemovedItem(he=>this._toggleClass(he.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(he=>this._toggleClass(he,!0)):Object.keys($).forEach(he=>this._toggleClass(he,!!$[he])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(he=>this._toggleClass(he,!1)):Object.keys($).forEach(he=>this._toggleClass(he,!1)))}_toggleClass($,he){($=$.trim())&&$.split(/\s+/g).forEach(Fe=>{he?this._renderer.addClass(this._ngEl.nativeElement,Fe):this._renderer.removeClass(this._ngEl.nativeElement,Fe)})}}return L.\u0275fac=function($){return new($||L)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),L})();class Cr{constructor(le,$,he,Fe){this.$implicit=le,this.ngForOf=$,this.index=he,this.count=Fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _n=(()=>{class L{constructor($,he,Fe){this._viewContainer=$,this._template=he,this._differs=Fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const he=this._viewContainer;$.forEachOperation((Fe,Pt,Kt)=>{if(null==Fe.previousIndex)he.createEmbeddedView(this._template,new Cr(Fe.item,this._ngForOf,-1,-1),null===Kt?void 0:Kt);else if(null==Kt)he.remove(null===Pt?void 0:Pt);else if(null!==Pt){const gn=he.get(Pt);he.move(gn,Kt),er(gn,Fe)}});for(let Fe=0,Pt=he.length;Fe<Pt;Fe++){const gn=he.get(Fe).context;gn.index=Fe,gn.count=Pt,gn.ngForOf=this._ngForOf}$.forEachIdentityChange(Fe=>{er(he.get(Fe.currentIndex),Fe)})}static ngTemplateContextGuard($,he){return!0}}return L.\u0275fac=function($){return new($||L)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),L})();function er(L,le){L.context.$implicit=le.item}let dr=(()=>{class L{constructor($,he){this._viewContainer=$,this._context=new Xr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=he}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){lt("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){lt("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,he){return!0}}return L.\u0275fac=function($){return new($||L)(y.Y36(y.s_b),y.Y36(y.Rgc))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),L})();class Xr{constructor(){this.$implicit=null,this.ngIf=null}}function lt(L,le){if(le&&!le.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,y.AaK)(le)}'.`)}let hr=(()=>{class L{constructor($,he,Fe){this._ngEl=$,this._differs=he,this._renderer=Fe,this._ngStyle=null,this._differ=null}set ngStyle($){this._ngStyle=$,!this._differ&&$&&(this._differ=this._differs.find($).create())}ngDoCheck(){if(this._differ){const $=this._differ.diff(this._ngStyle);$&&this._applyChanges($)}}_setStyle($,he){const[Fe,Pt]=$.split(".");null!=(he=null!=he&&Pt?`${he}${Pt}`:he)?this._renderer.setStyle(this._ngEl.nativeElement,Fe,he):this._renderer.removeStyle(this._ngEl.nativeElement,Fe)}_applyChanges($){$.forEachRemovedItem(he=>this._setStyle(he.key,null)),$.forEachAddedItem(he=>this._setStyle(he.key,he.currentValue)),$.forEachChangedItem(he=>this._setStyle(he.key,he.currentValue))}}return L.\u0275fac=function($){return new($||L)(y.Y36(y.SBq),y.Y36(y.aQg),y.Y36(y.Qsj))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),L})();function ci(L,le){return new y.vHH(2100,"")}const Wo=new y.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Os=(()=>{class L{constructor($,he){this.locale=$,this.defaultTimezone=he}transform($,he="mediumDate",Fe,Pt){var Kt;if(null==$||""===$||$!=$)return null;try{return Dr($,he,Pt||this.locale,null!==(Kt=null!=Fe?Fe:this.defaultTimezone)&&void 0!==Kt?Kt:void 0)}catch(gn){throw ci()}}}return L.\u0275fac=function($){return new($||L)(y.Y36(y.soG,16),y.Y36(Wo,24))},L.\u0275pipe=y.Yjl({name:"date",type:L,pure:!0}),L})(),Oo=(()=>{class L{constructor($){this._locale=$}transform($,he,Fe){if(!function as(L){return!(null==L||""===L||L!=L)}($))return null;Fe=Fe||this._locale;try{return function ln(L,le,$){return function mt(L,le,$,he,Fe,Pt,Kt=!1){let gn="",vr=!1;if(isFinite(L)){let br=function Kr(L){let he,Fe,Pt,Kt,gn,le=Math.abs(L)+"",$=0;for((Fe=le.indexOf("."))>-1&&(le=le.replace(".","")),(Pt=le.search(/e/i))>0?(Fe<0&&(Fe=Pt),Fe+=+le.slice(Pt+1),le=le.substring(0,Pt)):Fe<0&&(Fe=le.length),Pt=0;"0"===le.charAt(Pt);Pt++);if(Pt===(gn=le.length))he=[0],Fe=1;else{for(gn--;"0"===le.charAt(gn);)gn--;for(Fe-=Pt,he=[],Kt=0;Pt<=gn;Pt++,Kt++)he[Kt]=Number(le.charAt(Pt))}return Fe>22&&(he=he.splice(0,21),$=Fe-1,Fe=1),{digits:he,exponent:$,integerLen:Fe}}(L);Kt&&(br=function rr(L){if(0===L.digits[0])return L;const le=L.digits.length-L.integerLen;return L.exponent?L.exponent+=2:(0===le?L.digits.push(0,0):1===le&&L.digits.push(0),L.integerLen+=2),L}(br));let fr=le.minInt,Sr=le.minFrac,wi=le.maxFrac;if(Pt){const Rs=Pt.match(pt);if(null===Rs)throw new Error(`${Pt} is not a valid digit info`);const ko=Rs[1],ks=Rs[3],Eo=Rs[5];null!=ko&&(fr=ri(ko)),null!=ks&&(Sr=ri(ks)),null!=Eo?wi=ri(Eo):null!=ks&&Sr>wi&&(wi=Sr)}!function yr(L,le,$){if(le>$)throw new Error(`The minimum number of digits after fraction (${le}) is higher than the maximum (${$}).`);let he=L.digits,Fe=he.length-L.integerLen;const Pt=Math.min(Math.max(le,Fe),$);let Kt=Pt+L.integerLen,gn=he[Kt];if(Kt>0){he.splice(Math.max(L.integerLen,Kt));for(let Sr=Kt;Sr<he.length;Sr++)he[Sr]=0}else{Fe=Math.max(0,Fe),L.integerLen=1,he.length=Math.max(1,Kt=Pt+1),he[0]=0;for(let Sr=1;Sr<Kt;Sr++)he[Sr]=0}if(gn>=5)if(Kt-1<0){for(let Sr=0;Sr>Kt;Sr--)he.unshift(0),L.integerLen++;he.unshift(1),L.integerLen++}else he[Kt-1]++;for(;Fe<Math.max(0,Pt);Fe++)he.push(0);let vr=0!==Pt;const br=le+L.integerLen,fr=he.reduceRight(function(Sr,wi,_i,li){return li[_i]=(wi+=Sr)<10?wi:wi-10,vr&&(0===li[_i]&&_i>=br?li.pop():vr=!1),wi>=10?1:0},0);fr&&(he.unshift(fr),L.integerLen++)}(br,Sr,wi);let _i=br.digits,li=br.integerLen;const ao=br.exponent;let di=[];for(vr=_i.every(Rs=>!Rs);li<fr;li++)_i.unshift(0);for(;li<0;li++)_i.unshift(0);li>0?di=_i.splice(li,_i.length):(di=_i,_i=[0]);const ir=[];for(_i.length>=le.lgSize&&ir.unshift(_i.splice(-le.lgSize,_i.length).join(""));_i.length>le.gSize;)ir.unshift(_i.splice(-le.gSize,_i.length).join(""));_i.length&&ir.unshift(_i.join("")),gn=ir.join(st($,he)),di.length&&(gn+=st($,Fe)+di.join("")),ao&&(gn+=st($,un.Exponential)+"+"+ao)}else gn=st($,un.Infinity);return gn=L<0&&!vr?le.negPre+gn+le.negSuf:le.posPre+gn+le.posSuf,gn}(L,function bn(L,le="-"){const $={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},he=L.split(";"),Fe=he[0],Pt=he[1],Kt=-1!==Fe.indexOf(".")?Fe.split("."):[Fe.substring(0,Fe.lastIndexOf("0")+1),Fe.substring(Fe.lastIndexOf("0")+1)],gn=Kt[0],vr=Kt[1]||"";$.posPre=gn.substr(0,gn.indexOf("#"));for(let fr=0;fr<vr.length;fr++){const Sr=vr.charAt(fr);"0"===Sr?$.minFrac=$.maxFrac=fr+1:"#"===Sr?$.maxFrac=fr+1:$.posSuf+=Sr}const br=gn.split(",");if($.gSize=br[1]?br[1].length:0,$.lgSize=br[2]||br[1]?(br[2]||br[1]).length:0,Pt){const fr=Fe.length-$.posPre.length-$.posSuf.length,Sr=Pt.indexOf("#");$.negPre=Pt.substr(0,Sr).replace(/'/g,""),$.negSuf=Pt.substr(Sr+fr).replace(/'/g,"")}else $.negPre=le+$.posPre,$.negSuf=$.posSuf;return $}(function Zt(L,le){return(0,y.cg1)(L)[y.wAp.NumberFormats][le]}(le,Ht.Decimal),st(le,un.MinusSign)),le,un.Group,un.Decimal,$)}(function ji(L){if("string"==typeof L&&!isNaN(Number(L)-parseFloat(L)))return Number(L);if("number"!=typeof L)throw new Error(`${L} is not a number`);return L}($),Fe,he)}catch(Pt){throw ci()}}}return L.\u0275fac=function($){return new($||L)(y.Y36(y.soG,16))},L.\u0275pipe=y.Yjl({name:"number",type:L,pure:!0}),L})();let ws=(()=>{class L{}return L.\u0275fac=function($){return new($||L)},L.\u0275mod=y.oAB({type:L}),L.\u0275inj=y.cJS({}),L})();const Cs="browser";function Js(L){return"server"===L}let Oi=(()=>{class L{}return L.\u0275prov=(0,y.Yz7)({token:L,providedIn:"root",factory:()=>new Si((0,y.LFG)(Xe),window)}),L})();class Si{constructor(le,$){this.document=le,this.window=$,this.offset=()=>[0,0]}setOffset(le){this.offset=Array.isArray(le)?()=>le:le}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(le){this.supportsScrolling()&&this.window.scrollTo(le[0],le[1])}scrollToAnchor(le){if(!this.supportsScrolling())return;const $=function Hs(L,le){const $=L.getElementById(le)||L.getElementsByName(le)[0];if($)return $;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const he=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let Fe=he.currentNode;for(;Fe;){const Pt=Fe.shadowRoot;if(Pt){const Kt=Pt.getElementById(le)||Pt.querySelector(`[name="${le}"]`);if(Kt)return Kt}Fe=he.nextNode()}}return null}(this.document,le);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(le){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=le)}}scrollToElement(le){const $=le.getBoundingClientRect(),he=$.left+this.window.pageXOffset,Fe=$.top+this.window.pageYOffset,Pt=this.offset();this.window.scrollTo(he-Pt[0],Fe-Pt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const le=Pi(this.window.history)||Pi(Object.getPrototypeOf(this.window.history));return!(!le||!le.writable&&!le.set)}catch(le){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(le){return!1}}}function Pi(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class si{}},520:(hn,ct,U)=>{U.d(ct,{JF:()=>Vn,TP:()=>Ot,eN:()=>un});var y=U(9808),V=U(5e3),ee=U(9646),ie=U(8306),ke=U(4351),je=U(9300),Xe=U(4004);class He{}class nt{}class Ie{constructor(We){this.normalizedNames=new Map,this.lazyUpdate=null,We?this.lazyInit="string"==typeof We?()=>{this.headers=new Map,We.split("\n").forEach(ze=>{const ft=ze.indexOf(":");if(ft>0){const At=ze.slice(0,ft),Yt=At.toLowerCase(),on=ze.slice(ft+1).trim();this.maybeSetNormalizedName(At,Yt),this.headers.has(Yt)?this.headers.get(Yt).push(on):this.headers.set(Yt,[on])}})}:()=>{this.headers=new Map,Object.keys(We).forEach(ze=>{let ft=We[ze];const At=ze.toLowerCase();"string"==typeof ft&&(ft=[ft]),ft.length>0&&(this.headers.set(At,ft),this.maybeSetNormalizedName(ze,At))})}:this.headers=new Map}has(We){return this.init(),this.headers.has(We.toLowerCase())}get(We){this.init();const ze=this.headers.get(We.toLowerCase());return ze&&ze.length>0?ze[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(We){return this.init(),this.headers.get(We.toLowerCase())||null}append(We,ze){return this.clone({name:We,value:ze,op:"a"})}set(We,ze){return this.clone({name:We,value:ze,op:"s"})}delete(We,ze){return this.clone({name:We,value:ze,op:"d"})}maybeSetNormalizedName(We,ze){this.normalizedNames.has(ze)||this.normalizedNames.set(ze,We)}init(){this.lazyInit&&(this.lazyInit instanceof Ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(We=>this.applyUpdate(We)),this.lazyUpdate=null))}copyFrom(We){We.init(),Array.from(We.headers.keys()).forEach(ze=>{this.headers.set(ze,We.headers.get(ze)),this.normalizedNames.set(ze,We.normalizedNames.get(ze))})}clone(We){const ze=new Ie;return ze.lazyInit=this.lazyInit&&this.lazyInit instanceof Ie?this.lazyInit:this,ze.lazyUpdate=(this.lazyUpdate||[]).concat([We]),ze}applyUpdate(We){const ze=We.name.toLowerCase();switch(We.op){case"a":case"s":let ft=We.value;if("string"==typeof ft&&(ft=[ft]),0===ft.length)return;this.maybeSetNormalizedName(We.name,ze);const At=("a"===We.op?this.headers.get(ze):void 0)||[];At.push(...ft),this.headers.set(ze,At);break;case"d":const Yt=We.value;if(Yt){let on=this.headers.get(ze);if(!on)return;on=on.filter(Dr=>-1===Yt.indexOf(Dr)),0===on.length?(this.headers.delete(ze),this.normalizedNames.delete(ze)):this.headers.set(ze,on)}else this.headers.delete(ze),this.normalizedNames.delete(ze)}}forEach(We){this.init(),Array.from(this.normalizedNames.keys()).forEach(ze=>We(this.normalizedNames.get(ze),this.headers.get(ze)))}}class ve{encodeKey(We){return _t(We)}encodeValue(We){return _t(We)}decodeKey(We){return decodeURIComponent(We)}decodeValue(We){return decodeURIComponent(We)}}const St=/%(\d[a-f0-9])/gi,vt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function _t(xt){return encodeURIComponent(xt).replace(St,(We,ze)=>{var ft;return null!==(ft=vt[ze])&&void 0!==ft?ft:We})}function Vt(xt){return`${xt}`}class dt{constructor(We={}){if(this.updates=null,this.cloneFrom=null,this.encoder=We.encoder||new ve,We.fromString){if(We.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Qe(xt,We){const ze=new Map;return xt.length>0&&xt.replace(/^\?/,"").split("&").forEach(At=>{const Yt=At.indexOf("="),[on,Dr]=-1==Yt?[We.decodeKey(At),""]:[We.decodeKey(At.slice(0,Yt)),We.decodeValue(At.slice(Yt+1))],Kn=ze.get(on)||[];Kn.push(Dr),ze.set(on,Kn)}),ze}(We.fromString,this.encoder)}else We.fromObject?(this.map=new Map,Object.keys(We.fromObject).forEach(ze=>{const ft=We.fromObject[ze];this.map.set(ze,Array.isArray(ft)?ft:[ft])})):this.map=null}has(We){return this.init(),this.map.has(We)}get(We){this.init();const ze=this.map.get(We);return ze?ze[0]:null}getAll(We){return this.init(),this.map.get(We)||null}keys(){return this.init(),Array.from(this.map.keys())}append(We,ze){return this.clone({param:We,value:ze,op:"a"})}appendAll(We){const ze=[];return Object.keys(We).forEach(ft=>{const At=We[ft];Array.isArray(At)?At.forEach(Yt=>{ze.push({param:ft,value:Yt,op:"a"})}):ze.push({param:ft,value:At,op:"a"})}),this.clone(ze)}set(We,ze){return this.clone({param:We,value:ze,op:"s"})}delete(We,ze){return this.clone({param:We,value:ze,op:"d"})}toString(){return this.init(),this.keys().map(We=>{const ze=this.encoder.encodeKey(We);return this.map.get(We).map(ft=>ze+"="+this.encoder.encodeValue(ft)).join("&")}).filter(We=>""!==We).join("&")}clone(We){const ze=new dt({encoder:this.encoder});return ze.cloneFrom=this.cloneFrom||this,ze.updates=(this.updates||[]).concat(We),ze}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(We=>this.map.set(We,this.cloneFrom.map.get(We))),this.updates.forEach(We=>{switch(We.op){case"a":case"s":const ze=("a"===We.op?this.map.get(We.param):void 0)||[];ze.push(Vt(We.value)),this.map.set(We.param,ze);break;case"d":if(void 0===We.value){this.map.delete(We.param);break}{let ft=this.map.get(We.param)||[];const At=ft.indexOf(Vt(We.value));-1!==At&&ft.splice(At,1),ft.length>0?this.map.set(We.param,ft):this.map.delete(We.param)}}}),this.cloneFrom=this.updates=null)}}class Ge{constructor(){this.map=new Map}set(We,ze){return this.map.set(We,ze),this}get(We){return this.map.has(We)||this.map.set(We,We.defaultValue()),this.map.get(We)}delete(We){return this.map.delete(We),this}has(We){return this.map.has(We)}keys(){return this.map.keys()}}function at(xt){return"undefined"!=typeof ArrayBuffer&&xt instanceof ArrayBuffer}function De(xt){return"undefined"!=typeof Blob&&xt instanceof Blob}function Je(xt){return"undefined"!=typeof FormData&&xt instanceof FormData}class bt{constructor(We,ze,ft,At){let Yt;if(this.url=ze,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=We.toUpperCase(),function qt(xt){switch(xt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||At?(this.body=void 0!==ft?ft:null,Yt=At):Yt=ft,Yt&&(this.reportProgress=!!Yt.reportProgress,this.withCredentials=!!Yt.withCredentials,Yt.responseType&&(this.responseType=Yt.responseType),Yt.headers&&(this.headers=Yt.headers),Yt.context&&(this.context=Yt.context),Yt.params&&(this.params=Yt.params)),this.headers||(this.headers=new Ie),this.context||(this.context=new Ge),this.params){const on=this.params.toString();if(0===on.length)this.urlWithParams=ze;else{const Dr=ze.indexOf("?");this.urlWithParams=ze+(-1===Dr?"?":Dr<ze.length-1?"&":"")+on}}else this.params=new dt,this.urlWithParams=ze}serializeBody(){return null===this.body?null:at(this.body)||De(this.body)||Je(this.body)||function Ct(xt){return"undefined"!=typeof URLSearchParams&&xt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof dt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Je(this.body)?null:De(this.body)?this.body.type||null:at(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(We={}){var ze;const ft=We.method||this.method,At=We.url||this.url,Yt=We.responseType||this.responseType,on=void 0!==We.body?We.body:this.body,Dr=void 0!==We.withCredentials?We.withCredentials:this.withCredentials,Kn=void 0!==We.reportProgress?We.reportProgress:this.reportProgress;let Un=We.headers||this.headers,vi=We.params||this.params;const ar=null!==(ze=We.context)&&void 0!==ze?ze:this.context;return void 0!==We.setHeaders&&(Un=Object.keys(We.setHeaders).reduce((mr,rn)=>mr.set(rn,We.setHeaders[rn]),Un)),We.setParams&&(vi=Object.keys(We.setParams).reduce((mr,rn)=>mr.set(rn,We.setParams[rn]),vi)),new bt(ft,At,on,{params:vi,headers:Un,context:ar,reportProgress:Kn,responseType:Yt,withCredentials:Dr})}}var Se=(()=>((Se=Se||{})[Se.Sent=0]="Sent",Se[Se.UploadProgress=1]="UploadProgress",Se[Se.ResponseHeader=2]="ResponseHeader",Se[Se.DownloadProgress=3]="DownloadProgress",Se[Se.Response=4]="Response",Se[Se.User=5]="User",Se))();class Ht{constructor(We,ze=200,ft="OK"){this.headers=We.headers||new Ie,this.status=void 0!==We.status?We.status:ze,this.statusText=We.statusText||ft,this.url=We.url||null,this.ok=this.status>=200&&this.status<300}}class Nt extends Ht{constructor(We={}){super(We),this.type=Se.ResponseHeader}clone(We={}){return new Nt({headers:We.headers||this.headers,status:void 0!==We.status?We.status:this.status,statusText:We.statusText||this.statusText,url:We.url||this.url||void 0})}}class Rn extends Ht{constructor(We={}){super(We),this.type=Se.Response,this.body=void 0!==We.body?We.body:null}clone(We={}){return new Rn({body:void 0!==We.body?We.body:this.body,headers:We.headers||this.headers,status:void 0!==We.status?We.status:this.status,statusText:We.statusText||this.statusText,url:We.url||this.url||void 0})}}class En extends Ht{constructor(We){super(We,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${We.url||"(unknown url)"}`:`Http failure response for ${We.url||"(unknown url)"}: ${We.status} ${We.statusText}`,this.error=We.error||null}}function Ln(xt,We){return{body:We,headers:xt.headers,context:xt.context,observe:xt.observe,params:xt.params,reportProgress:xt.reportProgress,responseType:xt.responseType,withCredentials:xt.withCredentials}}let un=(()=>{class xt{constructor(ze){this.handler=ze}request(ze,ft,At={}){let Yt;if(ze instanceof bt)Yt=ze;else{let Kn,Un;Kn=At.headers instanceof Ie?At.headers:new Ie(At.headers),At.params&&(Un=At.params instanceof dt?At.params:new dt({fromObject:At.params})),Yt=new bt(ze,ft,void 0!==At.body?At.body:null,{headers:Kn,context:At.context,params:Un,reportProgress:At.reportProgress,responseType:At.responseType||"json",withCredentials:At.withCredentials})}const on=(0,ee.of)(Yt).pipe((0,ke.b)(Kn=>this.handler.handle(Kn)));if(ze instanceof bt||"events"===At.observe)return on;const Dr=on.pipe((0,je.h)(Kn=>Kn instanceof Rn));switch(At.observe||"body"){case"body":switch(Yt.responseType){case"arraybuffer":return Dr.pipe((0,Xe.U)(Kn=>{if(null!==Kn.body&&!(Kn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Kn.body}));case"blob":return Dr.pipe((0,Xe.U)(Kn=>{if(null!==Kn.body&&!(Kn.body instanceof Blob))throw new Error("Response is not a Blob.");return Kn.body}));case"text":return Dr.pipe((0,Xe.U)(Kn=>{if(null!==Kn.body&&"string"!=typeof Kn.body)throw new Error("Response is not a string.");return Kn.body}));default:return Dr.pipe((0,Xe.U)(Kn=>Kn.body))}case"response":return Dr;default:throw new Error(`Unreachable: unhandled observe type ${At.observe}}`)}}delete(ze,ft={}){return this.request("DELETE",ze,ft)}get(ze,ft={}){return this.request("GET",ze,ft)}head(ze,ft={}){return this.request("HEAD",ze,ft)}jsonp(ze,ft){return this.request("JSONP",ze,{params:(new dt).append(ft,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ze,ft={}){return this.request("OPTIONS",ze,ft)}patch(ze,ft,At={}){return this.request("PATCH",ze,Ln(At,ft))}post(ze,ft,At={}){return this.request("POST",ze,Ln(At,ft))}put(ze,ft,At={}){return this.request("PUT",ze,Ln(At,ft))}}return xt.\u0275fac=function(ze){return new(ze||xt)(V.LFG(He))},xt.\u0275prov=V.Yz7({token:xt,factory:xt.\u0275fac}),xt})();class sn{constructor(We,ze){this.next=We,this.interceptor=ze}handle(We){return this.interceptor.intercept(We,this.next)}}const Ot=new V.OlP("HTTP_INTERCEPTORS");let or=(()=>{class xt{intercept(ze,ft){return ft.handle(ze)}}return xt.\u0275fac=function(ze){return new(ze||xt)},xt.\u0275prov=V.Yz7({token:xt,factory:xt.\u0275fac}),xt})();const st=/^\)\]\}',?\n/;let pn=(()=>{class xt{constructor(ze){this.xhrFactory=ze}handle(ze){if("JSONP"===ze.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ie.y(ft=>{const At=this.xhrFactory.build();if(At.open(ze.method,ze.urlWithParams),ze.withCredentials&&(At.withCredentials=!0),ze.headers.forEach((rn,Mr)=>At.setRequestHeader(rn,Mr.join(","))),ze.headers.has("Accept")||At.setRequestHeader("Accept","application/json, text/plain, */*"),!ze.headers.has("Content-Type")){const rn=ze.detectContentTypeHeader();null!==rn&&At.setRequestHeader("Content-Type",rn)}if(ze.responseType){const rn=ze.responseType.toLowerCase();At.responseType="json"!==rn?rn:"text"}const Yt=ze.serializeBody();let on=null;const Dr=()=>{if(null!==on)return on;const rn=At.statusText||"OK",Mr=new Ie(At.getAllResponseHeaders()),Xn=function Zt(xt){return"responseURL"in xt&&xt.responseURL?xt.responseURL:/^X-Request-URL:/m.test(xt.getAllResponseHeaders())?xt.getResponseHeader("X-Request-URL"):null}(At)||ze.url;return on=new Nt({headers:Mr,status:At.status,statusText:rn,url:Xn}),on},Kn=()=>{let{headers:rn,status:Mr,statusText:Xn,url:cr}=Dr(),Qn=null;204!==Mr&&(Qn=void 0===At.response?At.responseText:At.response),0===Mr&&(Mr=Qn?200:0);let Nr=Mr>=200&&Mr<300;if("json"===ze.responseType&&"string"==typeof Qn){const jr=Qn;Qn=Qn.replace(st,"");try{Qn=""!==Qn?JSON.parse(Qn):null}catch(ni){Qn=jr,Nr&&(Nr=!1,Qn={error:ni,text:Qn})}}Nr?(ft.next(new Rn({body:Qn,headers:rn,status:Mr,statusText:Xn,url:cr||void 0})),ft.complete()):ft.error(new En({error:Qn,headers:rn,status:Mr,statusText:Xn,url:cr||void 0}))},Un=rn=>{const{url:Mr}=Dr(),Xn=new En({error:rn,status:At.status||0,statusText:At.statusText||"Unknown Error",url:Mr||void 0});ft.error(Xn)};let vi=!1;const ar=rn=>{vi||(ft.next(Dr()),vi=!0);let Mr={type:Se.DownloadProgress,loaded:rn.loaded};rn.lengthComputable&&(Mr.total=rn.total),"text"===ze.responseType&&!!At.responseText&&(Mr.partialText=At.responseText),ft.next(Mr)},mr=rn=>{let Mr={type:Se.UploadProgress,loaded:rn.loaded};rn.lengthComputable&&(Mr.total=rn.total),ft.next(Mr)};return At.addEventListener("load",Kn),At.addEventListener("error",Un),At.addEventListener("timeout",Un),At.addEventListener("abort",Un),ze.reportProgress&&(At.addEventListener("progress",ar),null!==Yt&&At.upload&&At.upload.addEventListener("progress",mr)),At.send(Yt),ft.next({type:Se.Sent}),()=>{At.removeEventListener("error",Un),At.removeEventListener("abort",Un),At.removeEventListener("load",Kn),At.removeEventListener("timeout",Un),ze.reportProgress&&(At.removeEventListener("progress",ar),null!==Yt&&At.upload&&At.upload.removeEventListener("progress",mr)),At.readyState!==At.DONE&&At.abort()}})}}return xt.\u0275fac=function(ze){return new(ze||xt)(V.LFG(y.JF))},xt.\u0275prov=V.Yz7({token:xt,factory:xt.\u0275fac}),xt})();const wn=new V.OlP("XSRF_COOKIE_NAME"),kn=new V.OlP("XSRF_HEADER_NAME");class ur{}let _r=(()=>{class xt{constructor(ze,ft,At){this.doc=ze,this.platform=ft,this.cookieName=At,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ze=this.doc.cookie||"";return ze!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,y.Mx)(ze,this.cookieName),this.lastCookieString=ze),this.lastToken}}return xt.\u0275fac=function(ze){return new(ze||xt)(V.LFG(y.K0),V.LFG(V.Lbi),V.LFG(wn))},xt.\u0275prov=V.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),jn=(()=>{class xt{constructor(ze,ft){this.tokenService=ze,this.headerName=ft}intercept(ze,ft){const At=ze.url.toLowerCase();if("GET"===ze.method||"HEAD"===ze.method||At.startsWith("http://")||At.startsWith("https://"))return ft.handle(ze);const Yt=this.tokenService.getToken();return null!==Yt&&!ze.headers.has(this.headerName)&&(ze=ze.clone({headers:ze.headers.set(this.headerName,Yt)})),ft.handle(ze)}}return xt.\u0275fac=function(ze){return new(ze||xt)(V.LFG(ur),V.LFG(kn))},xt.\u0275prov=V.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),Jn=(()=>{class xt{constructor(ze,ft){this.backend=ze,this.injector=ft,this.chain=null}handle(ze){if(null===this.chain){const ft=this.injector.get(Ot,[]);this.chain=ft.reduceRight((At,Yt)=>new sn(At,Yt),this.backend)}return this.chain.handle(ze)}}return xt.\u0275fac=function(ze){return new(ze||xt)(V.LFG(nt),V.LFG(V.zs3))},xt.\u0275prov=V.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),On=(()=>{class xt{static disable(){return{ngModule:xt,providers:[{provide:jn,useClass:or}]}}static withOptions(ze={}){return{ngModule:xt,providers:[ze.cookieName?{provide:wn,useValue:ze.cookieName}:[],ze.headerName?{provide:kn,useValue:ze.headerName}:[]]}}}return xt.\u0275fac=function(ze){return new(ze||xt)},xt.\u0275mod=V.oAB({type:xt}),xt.\u0275inj=V.cJS({providers:[jn,{provide:Ot,useExisting:jn,multi:!0},{provide:ur,useClass:_r},{provide:wn,useValue:"XSRF-TOKEN"},{provide:kn,useValue:"X-XSRF-TOKEN"}]}),xt})(),Vn=(()=>{class xt{}return xt.\u0275fac=function(ze){return new(ze||xt)},xt.\u0275mod=V.oAB({type:xt}),xt.\u0275inj=V.cJS({providers:[un,{provide:He,useClass:Jn},pn,{provide:nt,useExisting:pn}],imports:[[On.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),xt})()},5e3:(hn,ct,U)=>{U.d(ct,{$8M:()=>Zi,$Z:()=>zf,AFp:()=>dw,ALo:()=>NE,AaK:()=>He,AsE:()=>Sg,BQk:()=>Pd,CHM:()=>Yr,CRH:()=>$E,CZH:()=>L0,CqO:()=>Xf,EJc:()=>NC,EiD:()=>_e,EpF:()=>Yf,F4k:()=>Jf,FYo:()=>Hg,FiY:()=>gu,G48:()=>nI,Gf:()=>jE,GfV:()=>t,Gpc:()=>ve,JOm:()=>_a,JVY:()=>_p,L6k:()=>yi,LAX:()=>Uc,LFG:()=>Vs,LSH:()=>qn,Lbi:()=>MC,MAs:()=>lg,NdJ:()=>Nd,OlP:()=>Yi,Oqu:()=>Ld,PXZ:()=>qC,Q6J:()=>Kf,QGY:()=>Qf,Qsj:()=>y_,R0b:()=>_c,RDi:()=>Pi,Rgc:()=>Wg,SBq:()=>qd,Sil:()=>kC,Suo:()=>HE,TTD:()=>as,TgZ:()=>sd,Tol:()=>Mv,Udp:()=>Lh,VKq:()=>DE,VLi:()=>WC,W1O:()=>KE,WLB:()=>SE,X6Q:()=>tI,XFs:()=>yn,Xpm:()=>Vi,Y36:()=>Nh,YKP:()=>zi,YNc:()=>ny,Yjl:()=>se,Yz7:()=>Me,ZZ4:()=>Q0,_Bn:()=>Jh,_UZ:()=>gg,_Vd:()=>Xh,_c5:()=>_I,_uU:()=>xc,aQg:()=>J0,c2e:()=>xC,cJS:()=>Ne,cg1:()=>Hd,d8E:()=>Hy,dDg:()=>yw,deG:()=>Ar,dqk:()=>Un,dwT:()=>Hv,eBb:()=>vp,eFA:()=>Ew,ekj:()=>bg,evT:()=>nm,g9A:()=>fw,h0i:()=>Wr,hGG:()=>vI,hij:()=>rp,iGM:()=>BE,ifc:()=>At,ip1:()=>cw,kL8:()=>$y,lG2:()=>te,mCW:()=>nu,n5z:()=>Fr,oAB:()=>me,oJD:()=>zt,oxw:()=>yg,pB0:()=>Zd,q3G:()=>Mt,q4F:()=>s,qLn:()=>$c,qOj:()=>Dh,qZA:()=>qf,qzn:()=>ml,sBO:()=>rI,sIi:()=>Yu,s_b:()=>v_,soG:()=>U0,tBr:()=>Bu,tb:()=>pw,tp0:()=>Ul,uIk:()=>ig,vHH:()=>_t,vpe:()=>Vc,wAp:()=>Ur,xi3:()=>OE,xp6:()=>lm,yhl:()=>rf,ynx:()=>od,z2F:()=>W0,z3N:()=>ua,zSh:()=>Eh,zs3:()=>Zu});var y=U(7579),V=U(727),ee=U(8306),ie=U(6451),ke=U(3099);function je(n){for(let i in n)if(n[i]===je)return i;throw Error("Could not find renamed property on target object.")}function Xe(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function nt(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Ie=je({__forward_ref__:je});function ve(n){return n.__forward_ref__=ve,n.toString=function(){return He(this())},n}function Qe(n){return St(n)?n():n}function St(n){return"function"==typeof n&&n.hasOwnProperty(Ie)&&n.__forward_ref__===ve}class _t extends Error{constructor(i,o){super(function Vt(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function dt(n){return"string"==typeof n?n:null==n?"":String(n)}function ot(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():dt(n)}function De(n,i){const o=i?` in ${i}`:"";throw new _t(-201,`No provider for ${ot(n)} found${o}`)}function Mn(n,i){null==n&&function cn(n,i,o,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${o} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function Me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ne(n){return{providers:n.providers||[],imports:n.imports||[]}}function st(n){return Zt(n,ur)||Zt(n,jn)}function Zt(n,i){return n.hasOwnProperty(i)?n[i]:null}function kn(n){return n&&(n.hasOwnProperty(_r)||n.hasOwnProperty(Jn))?n[_r]:null}const ur=je({\u0275prov:je}),_r=je({\u0275inj:je}),jn=je({ngInjectableDef:je}),Jn=je({ngInjectorDef:je});var yn=(()=>((yn=yn||{})[yn.Default=0]="Default",yn[yn.Host=1]="Host",yn[yn.Self=2]="Self",yn[yn.SkipSelf=4]="SkipSelf",yn[yn.Optional=8]="Optional",yn))();let nr;function Vn(n){const i=nr;return nr=n,i}function ti(n,i,o){const l=st(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&yn.Optional?null:void 0!==i?i:void De(He(n),"Injector")}function xt(n){return{toString:n}.toString()}var We=(()=>((We=We||{})[We.OnPush=0]="OnPush",We[We.Default=1]="Default",We))(),At=(()=>{return(n=At||(At={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",At;var n})();const Yt="undefined"!=typeof globalThis&&globalThis,on="undefined"!=typeof window&&window,Dr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Un=Yt||"undefined"!=typeof global&&global||on||Dr,mr={},rn=[],Mr=je({\u0275cmp:je}),Xn=je({\u0275dir:je}),cr=je({\u0275pipe:je}),Qn=je({\u0275mod:je}),Nr=je({\u0275fac:je}),jr=je({__NG_ELEMENT_ID__:je});let ni=0;function Vi(n){return xt(()=>{const o={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===We.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||At.Emulated,id:"c",styles:n.styles||rn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,m=n.features,I=n.pipes;return l.id+=ni++,l.inputs=z(n.inputs,o),l.outputs=z(n.outputs),m&&m.forEach(M=>M(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(Br):null,l.pipeDefs=I?()=>("function"==typeof I?I():I).map(Ue):null,l})}function Br(n){return xe(n)||function pt(n){return n[Xn]||null}(n)}function Ue(n){return function Bt(n){return n[cr]||null}(n)}const Pe={};function me(n){return xt(()=>{const i={type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Pe[n.id]=n.type),i})}function z(n,i){if(null==n)return mr;const o={};for(const l in n)if(n.hasOwnProperty(l)){let h=n[l],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),o[h]=l,i&&(i[h]=m)}return o}const te=Vi;function se(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function xe(n){return n[Mr]||null}function an(n,i){const o=n[Qn]||null;if(!o&&!0===i)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return o}function ut(n){return Array.isArray(n)&&"object"==typeof n[1]}function Et(n){return Array.isArray(n)&&!0===n[1]}function kt(n){return 0!=(8&n.flags)}function Dn(n){return 2==(2&n.flags)}function Ir(n){return 1==(1&n.flags)}function Nn(n){return null!==n.template}function hr(n){return 0!=(512&n[2])}function qr(n,i){return n.hasOwnProperty(Nr)?n[Nr]:null}class _o{constructor(i,o,l){this.previousValue=i,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function as(){return ji}function ji(n){return n.type.prototype.ngOnChanges&&(n.setInput=zo),_s}function _s(){const n=Cs(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===mr)n.previous=i;else for(let l in i)o[l]=i[l];n.current=null,this.ngOnChanges(i)}}function zo(n,i,o,l){const h=Cs(n)||function Qs(n,i){return n[ws]=i}(n,{previous:mr,current:null}),m=h.current||(h.current={}),I=h.previous,M=this.declaredInputs[o],k=I[M];m[M]=new _o(k&&k.currentValue,i,I===mr),n[l]=i}as.ngInherit=!0;const ws="__ngSimpleChanges__";function Cs(n){return n[ws]||null}let Si;function Pi(n){Si=n}function Hs(){return void 0!==Si?Si:"undefined"!=typeof document?document:void 0}function si(n){return!!n.listen}const L={createRenderer:(n,i)=>Hs()};function $(n){for(;Array.isArray(n);)n=n[0];return n}function Pt(n,i){return $(i[n])}function Kt(n,i){return $(i[n.index])}function vr(n,i){return n.data[i]}function br(n,i){return n[i]}function fr(n,i){const o=i[n];return ut(o)?o:o[0]}function Sr(n){return 4==(4&n[2])}function wi(n){return 128==(128&n[2])}function li(n,i){return null==i?null:n[i]}function ao(n){n[18]=0}function di(n,i){n[5]+=i;let o=n,l=n[3];for(;null!==l&&(1===i&&1===o[5]||-1===i&&0===o[5]);)l[5]+=i,o=l,l=l[3]}const ir={lFrame:il(null),bindingsEnabled:!0};function j(){return ir.bindingsEnabled}function Be(){return ir.lFrame.lView}function Xt(){return ir.lFrame.tView}function Yr(n){return ir.lFrame.contextLView=n,n[8]}function W(){let n=K();for(;null!==n&&64===n.type;)n=n.parent;return n}function K(){return ir.lFrame.currentTNode}function be(n,i){const o=ir.lFrame;o.currentTNode=n,o.isParent=i}function Ke(){return ir.lFrame.isParent}function yt(){ir.lFrame.isParent=!1}function Bn(){const n=ir.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function hi(){return ir.lFrame.bindingIndex++}function Qr(n){const i=ir.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function es(n,i){const o=ir.lFrame;o.bindingIndex=o.bindingRootIndex=n,qi(i)}function qi(n){ir.lFrame.currentDirectiveIndex=n}function Ni(n){const i=ir.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function Gs(){return ir.lFrame.currentQueryIndex}function Mo(n){ir.lFrame.currentQueryIndex=n}function Fo(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function wo(n,i,o){if(o&yn.SkipSelf){let h=i,m=n;for(;!(h=h.parent,null!==h||o&yn.Host||(h=Fo(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;i=h,n=m}const l=ir.lFrame=us();return l.currentTNode=i,l.lView=n,!0}function Xs(n){const i=us(),o=n[1];ir.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function us(){const n=ir.lFrame,i=null===n?null:n.child;return null===i?il(n):i}function il(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function lo(){const n=ir.lFrame;return ir.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ca=lo;function ia(){const n=lo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cs(){return ir.lFrame.selectedIndex}function Is(n){ir.lFrame.selectedIndex=n}function Ai(){const n=ir.lFrame;return vr(n.tView,n.selectedIndex)}function Ta(n,i){for(let o=i.directiveStart,l=i.directiveEnd;o<l;o++){const m=n.data[o].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:M,ngAfterViewInit:k,ngAfterViewChecked:re,ngOnDestroy:ae}=m;I&&(n.contentHooks||(n.contentHooks=[])).push(-o,I),M&&((n.contentHooks||(n.contentHooks=[])).push(o,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,M)),k&&(n.viewHooks||(n.viewHooks=[])).push(-o,k),re&&((n.viewHooks||(n.viewHooks=[])).push(o,re),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,re)),null!=ae&&(n.destroyHooks||(n.destroyHooks=[])).push(o,ae)}}function Io(n,i,o){sl(n,i,3,o)}function rs(n,i,o,l){(3&n[2])===o&&sl(n,i,o,l)}function no(n,i){let o=n[2];(3&o)===i&&(o&=2047,o+=1,n[2]=o)}function sl(n,i,o,l){const m=null!=l?l:-1,I=i.length-1;let M=0;for(let k=void 0!==l?65535&n[18]:0;k<I;k++)if("number"==typeof i[k+1]){if(M=i[k],null!=l&&M>=l)break}else i[k]<0&&(n[18]+=65536),(M<m||-1==m)&&(fi(n,o,i,k),n[18]=(4294901760&n[18])+k+2),k++}function fi(n,i,o,l){const h=o[l]<0,m=o[l+1],M=n[h?-o[l]:o[l]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{m.call(M)}finally{}}}else try{m.call(M)}finally{}}class uo{constructor(i,o,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function $i(n,i,o){const l=si(n);let h=0;for(;h<o.length;){const m=o[h];if("number"==typeof m){if(0!==m)break;h++;const I=o[h++],M=o[h++],k=o[h++];l?n.setAttribute(i,M,k,I):i.setAttributeNS(I,M,k)}else{const I=m,M=o[++h];Zo(I)?l&&n.setProperty(i,I,M):l?n.setAttribute(i,I,M):i.setAttribute(I,M),h++}}return h}function qo(n){return 3===n||4===n||6===n}function Zo(n){return 64===n.charCodeAt(0)}function Fs(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let l=0;l<i.length;l++){const h=i[l];"number"==typeof h?o=h:0===o||vs(n,o,h,null,-1===o||2===o?i[++l]:null)}}return n}function vs(n,i,o,l,h){let m=0,I=n.length;if(-1===i)I=-1;else for(;m<n.length;){const M=n[m++];if("number"==typeof M){if(M===i){I=-1;break}if(M>i){I=m-1;break}}}for(;m<n.length;){const M=n[m];if("number"==typeof M)break;if(M===o){if(null===l)return void(null!==h&&(n[m+1]=h));if(l===n[m+1])return void(n[m+2]=h)}m++,null!==l&&m++,null!==h&&m++}-1!==I&&(n.splice(I,0,i),m=I+1),n.splice(m++,0,o),null!==l&&n.splice(m++,0,l),null!==h&&n.splice(m++,0,h)}function sa(n){return-1!==n}function bo(n){return 32767&n}function Sa(n,i){let o=function Ol(n){return n>>16}(n),l=i;for(;o>0;)l=l[15],o--;return l}let za=!0;function wl(n){const i=za;return za=n,i}let oa=0;function al(n,i){const o=P(n,i);if(-1!==o)return o;const l=i[1];l.firstCreatePass&&(n.injectorIndex=i.length,Aa(l.data,n),Aa(i,null),Aa(l.blueprint,null));const h=D(n,i),m=n.injectorIndex;if(sa(h)){const I=bo(h),M=Sa(h,i),k=M[1].data;for(let re=0;re<8;re++)i[m+re]=M[I+re]|k[I+re]}return i[m+8]=h,m}function Aa(n,i){n.push(0,0,0,0,0,0,0,0,i)}function P(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function D(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,l=null,h=i;for(;null!==h;){const m=h[1],I=m.type;if(l=2===I?m.declTNode:1===I?h[6]:null,null===l)return-1;if(o++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return-1}function T(n,i,o){!function Kl(n,i,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(jr)&&(l=o[jr]),null==l&&(l=o[jr]=oa++);const h=255&l;i.data[n+(h>>5)]|=1<<h}(n,i,o)}function Q(n,i,o){if(o&yn.Optional)return n;De(i,"NodeInjector")}function de(n,i,o,l){if(o&yn.Optional&&void 0===l&&(l=null),0==(o&(yn.Self|yn.Host))){const h=n[9],m=Vn(void 0);try{return h?h.get(i,l,o&yn.Optional):ti(i,l,o&yn.Optional)}finally{Vn(m)}}return Q(l,i,o)}function fe(n,i,o,l=yn.Default,h){if(null!==n){const m=function Ri(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(jr)?n[jr]:void 0;return"number"==typeof i?i>=0?255&i:Ft:i}(o);if("function"==typeof m){if(!wo(i,n,l))return l&yn.Host?Q(h,o,l):de(i,o,l,h);try{const I=m(l);if(null!=I||l&yn.Optional)return I;De(o)}finally{ca()}}else if("number"==typeof m){let I=null,M=P(n,i),k=-1,re=l&yn.Host?i[16][6]:null;for((-1===M||l&yn.SkipSelf)&&(k=-1===M?D(n,i):i[M+8],-1!==k&&Dt(l,!1)?(I=i[1],M=bo(k),i=Sa(k,i)):M=-1);-1!==M;){const ae=i[1];if(tn(m,M,ae.data)){const Ae=vn(M,i,o,I,l,re);if(Ae!==Le)return Ae}k=i[M+8],-1!==k&&Dt(l,i[1].data[M+8]===re)&&tn(m,M,i)?(I=ae,M=bo(k),i=Sa(k,i)):M=-1}}}return de(i,o,l,h)}const Le={};function Ft(){return new jt(W(),Be())}function vn(n,i,o,l,h,m){const I=i[1],M=I.data[n+8],ae=Jt(M,I,o,null==l?Dn(M)&&za:l!=I&&0!=(3&M.type),h&yn.Host&&m===M);return null!==ae?Wt(i,I,ae,M):Le}function Jt(n,i,o,l,h){const m=n.providerIndexes,I=i.data,M=1048575&m,k=n.directiveStart,ae=m>>20,et=h?M+ae:n.directiveEnd;for(let wt=l?M:M+ae;wt<et;wt++){const Qt=I[wt];if(wt<k&&o===Qt||wt>=k&&Qt.type===o)return wt}if(h){const wt=I[k];if(wt&&Nn(wt)&&wt.type===o)return k}return null}function Wt(n,i,o,l){let h=n[o];const m=i.data;if(function To(n){return n instanceof uo}(h)){const I=h;I.resolving&&function Ge(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new _t(-200,`Circular dependency in DI detected for ${n}${o}`)}(ot(m[o]));const M=wl(I.canSeeViewProviders);I.resolving=!0;const k=I.injectImpl?Vn(I.injectImpl):null;wo(n,l,yn.Default);try{h=n[o]=I.factory(void 0,m,n,l),i.firstCreatePass&&o>=l.directiveStart&&function xo(n,i,o){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:m}=i.type.prototype;if(l){const I=ji(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,I),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,I)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),m&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m))}(o,m[o],i)}finally{null!==k&&Vn(k),wl(M),I.resolving=!1,ca()}}return h}function tn(n,i,o){return!!(o[i+(n>>5)]&1<<n)}function Dt(n,i){return!(n&yn.Self||n&yn.Host&&i)}class jt{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,l){return fe(this._tNode,this._lView,i,l,o)}}function Fr(n){return xt(()=>{const i=n.prototype.constructor,o=i[Nr]||Cl(i),l=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==l;){const m=h[Nr]||Cl(h);if(m&&m!==o)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Cl(n){return St(n)?()=>{const i=Cl(Qe(n));return i&&i()}:qr(n)}function Zi(n){return function H(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const l=o.length;let h=0;for(;h<l;){const m=o[h];if(qo(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<l&&"string"==typeof o[h];)h++;else{if(m===i)return o[h+1];h+=2}}}return null}(W(),n)}const aa="__parameters__";function Ka(n,i,o){return xt(()=>{const l=function kl(n){return function(...o){if(n){const l=n(...o);for(const h in l)this[h]=l[h]}}}(i);function h(...m){if(this instanceof h)return l.apply(this,m),this;const I=new h(...m);return M.annotation=I,M;function M(k,re,ae){const Ae=k.hasOwnProperty(aa)?k[aa]:Object.defineProperty(k,aa,{value:[]})[aa];for(;Ae.length<=ae;)Ae.push(null);return(Ae[ae]=Ae[ae]||[]).push(I),k}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Yi{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Me({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ar=new Yi("AnalyzeForEntryComponents");function Ls(n,i){void 0===i&&(i=n);for(let o=0;o<n.length;o++){let l=n[o];Array.isArray(l)?(i===n&&(i=n.slice(0,o)),Ls(l,i)):i!==n&&i.push(l)}return i}function Ya(n,i){n.forEach(o=>Array.isArray(o)?Ya(o,i):i(o))}function ql(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Fl(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function gt(n,i,o){let l=ro(n,i);return l>=0?n[1|l]=o:(l=~l,function Zl(n,i,o,l){let h=n.length;if(h==i)n.push(o,l);else if(1===h)n.push(l,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=o,n[i+1]=l}}(n,l,i,o)),l}function dl(n,i){const o=ro(n,i);if(o>=0)return n[1|o]}function ro(n,i){return function Pa(n,i,o){let l=0,h=n.length>>o;for(;h!==l;){const m=l+(h-l>>1),I=n[m<<o];if(i===I)return m<<o;I>i?h=m:l=m+1}return~(h<<o)}(n,i,1)}const ga={},uu="__NG_DI_FLAG__",fs="ngTempTokenPath",Vu=/\n/gm,hl="__source",cu=je({provide:String,useValue:je});let Qa;function du(n){const i=Qa;return Qa=n,i}function bl(n,i=yn.Default){if(void 0===Qa)throw new _t(203,"");return null===Qa?ti(n,void 0,i):Qa.get(n,i&yn.Optional?null:void 0,i)}function Vs(n,i=yn.Default){return(function On(){return nr}()||bl)(Qe(n),i)}const Vl=Vs;function hu(n){const i=[];for(let o=0;o<n.length;o++){const l=Qe(n[o]);if(Array.isArray(l)){if(0===l.length)throw new _t(900,"");let h,m=yn.Default;for(let I=0;I<l.length;I++){const M=l[I],k=pu(M);"number"==typeof k?-1===k?h=M.token:m|=k:h=M}i.push(Vs(h,m))}else i.push(Vs(l))}return i}function fu(n,i){return n[uu]=i,n.prototype[uu]=i,n}function pu(n){return n[uu]}const Bu=fu(Ka("Inject",n=>({token:n})),-1),gu=fu(Ka("Optional"),8),Ul=fu(Ka("SkipSelf"),4);var _a=(()=>((_a=_a||{})[_a.Important=1]="Important",_a[_a.DashCase=2]="DashCase",_a))();const Ea="__ngContext__";function ho(n,i){n[Ea]=i}function Po(n){const i=function Jo(n){return n[Ea]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function O(n,i){return undefined(n,i)}function qe(n){const i=n[3];return Et(i)?i[3]:i}function Cn(n){return zn(n[13])}function Tn(n){return zn(n[4])}function zn(n){for(;null!==n&&!Et(n);)n=n[4];return n}function Er(n,i,o,l,h){if(null!=l){let m,I=!1;Et(l)?m=l:ut(l)&&(I=!0,l=l[0]);const M=$(l);0===n&&null!==o?null==h?oe(i,o,M):Z(i,o,M,h||null,!0):1===n&&null!==o?Z(i,o,M,h||null,!0):2===n?function Wn(n,i,o){const l=C(n,i);l&&function Re(n,i,o,l){si(n)?n.removeChild(i,o,l):i.removeChild(o)}(n,l,i,o)}(i,M,I):3===n&&i.destroyNode(M),null!=m&&function Fa(n,i,o,l,h){const m=o[7];m!==$(o)&&Er(i,n,l,m,h);for(let M=10;M<o.length;M++){const k=o[M];ts(k[1],k,n,i,l,m)}}(i,n,m,o,h)}}function Xo(n,i,o){if(si(n))return n.createElement(i,o);{const l=null!==o?function Oi(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(o):null;return null===l?n.createElement(i):n.createElementNS(l,i)}}function Wi(n,i){const o=n[9],l=o.indexOf(i),h=i[3];1024&i[2]&&(i[2]&=-1025,di(h,-1)),o.splice(l,1)}function nl(n,i){if(n.length<=10)return;const o=10+i,l=n[o];if(l){const h=l[17];null!==h&&h!==n&&Wi(h,l),i>0&&(n[o-1][4]=l[4]);const m=Fl(n,10+i);!function pl(n,i){ts(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(l[1],l);const I=m[19];null!==I&&I.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function wu(n,i){if(!(256&i[2])){const o=i[11];si(o)&&o.destroyNode&&ts(n,i,o,3,null,null),function Pu(n){let i=n[13];if(!i)return $l(n[1],n);for(;i;){let o=null;if(ut(i))o=i[13];else{const l=i[10];l&&(o=l)}if(!o){for(;i&&!i[4]&&i!==n;)ut(i)&&$l(i[1],i),i=i[3];null===i&&(i=n),ut(i)&&$l(i[1],i),o=i&&i[4]}i=o}}(i)}}function $l(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function E(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let l=0;l<o.length;l+=2){const h=i[o[l]];if(!(h instanceof uo)){const m=o[l+1];if(Array.isArray(m))for(let I=0;I<m.length;I+=2){const M=h[m[I]],k=m[I+1];try{k.call(M)}finally{}}else try{m.call(h)}finally{}}}}(n,i),function N(n,i){const o=n.cleanup,l=i[7];let h=-1;if(null!==o)for(let m=0;m<o.length-1;m+=2)if("string"==typeof o[m]){const I=o[m+1],M="function"==typeof I?I(i):$(i[I]),k=l[h=o[m+2]],re=o[m+3];"boolean"==typeof re?M.removeEventListener(o[m],k,re):re>=0?l[h=re]():l[h=-re].unsubscribe(),m+=2}else{const I=l[h=o[m+1]];o[m].call(I)}if(null!==l){for(let m=h+1;m<l.length;m++)l[m]();i[7]=null}}(n,i),1===i[1].type&&si(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&Et(i[3])){o!==i[3]&&Wi(o,i);const l=i[19];null!==l&&l.detachView(n)}}}function w(n,i,o){return function x(n,i,o){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return o[0];if(2&l.flags){const h=n.data[l.directiveStart].encapsulation;if(h===At.None||h===At.Emulated)return null}return Kt(l,o)}(n,i.parent,o)}function Z(n,i,o,l,h){si(n)?n.insertBefore(i,o,l,h):i.insertBefore(o,l,h)}function oe(n,i,o){si(n)?n.appendChild(i,o):i.appendChild(o)}function Te(n,i,o,l,h){null!==l?Z(n,i,o,l,h):oe(n,i,o)}function C(n,i){return si(n)?n.parentNode(i):i.parentNode}let jo,mi,Y=function b(n,i,o){return 40&n.type?Kt(n,o):null};function rt(n,i,o,l){const h=w(n,l,i),m=i[11],M=function _(n,i,o){return Y(n,i,o)}(l.parent||i[6],l,i);if(null!=h)if(Array.isArray(o))for(let k=0;k<o.length;k++)Te(m,h,o[k],M,!1);else Te(m,h,o,M,!1)}function $t(n,i){if(null!==i){const o=i.type;if(3&o)return Kt(i,n);if(4&o)return Pn(-1,n[i.index]);if(8&o){const l=i.child;if(null!==l)return $t(n,l);{const h=n[i.index];return Et(h)?Pn(-1,h):$(h)}}if(32&o)return O(i,n)()||$(n[i.index]);{const l=mn(n,i);return null!==l?Array.isArray(l)?l[0]:$t(qe(n[16]),l):$t(n,i.next)}}return null}function mn(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Pn(n,i){const o=10+n+1;if(o<i.length){const l=i[o],h=l[1].firstChild;if(null!==h)return $t(l,h)}return i[7]}function xr(n,i,o,l,h,m,I){for(;null!=o;){const M=l[o.index],k=o.type;if(I&&0===i&&(M&&ho($(M),l),o.flags|=4),64!=(64&o.flags))if(8&k)xr(n,i,o.child,l,h,m,!1),Er(i,n,h,M,m);else if(32&k){const re=O(o,l);let ae;for(;ae=re();)Er(i,n,h,ae,m);Er(i,n,h,M,m)}else 16&k?ps(n,i,l,o,h,m):Er(i,n,h,M,m);o=I?o.projectionNext:o.next}}function ts(n,i,o,l,h,m){xr(o,l,n.firstChild,i,h,m,!1)}function ps(n,i,o,l,h,m){const I=o[16],k=I[6].projection[l.projection];if(Array.isArray(k))for(let re=0;re<k.length;re++)Er(i,n,h,k[re],m);else xr(n,i,k,I[3],h,m,!0)}function la(n,i,o){si(n)?n.setAttribute(i,"style",o):i.style.cssText=o}function Ao(n,i,o){si(n)?""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o):i.className=o}function Va(n){var i;return(null===(i=function Ds(){if(void 0===jo&&(jo=null,Un.trustedTypes))try{jo=Un.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return jo}())||void 0===i?void 0:i.createHTML(n))||n}function gl(n){var i;return(null===(i=function fo(){if(void 0===mi&&(mi=null,Un.trustedTypes))try{mi=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return mi}())||void 0===i?void 0:i.createHTML(n))||n}class ss{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ca extends ss{getTypeName(){return"HTML"}}class gd extends ss{getTypeName(){return"Style"}}class No extends ss{getTypeName(){return"Script"}}class Iu extends ss{getTypeName(){return"URL"}}class ta extends ss{getTypeName(){return"ResourceURL"}}function ua(n){return n instanceof ss?n.changingThisBreaksApplicationSecurity:n}function ml(n,i){const o=rf(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function rf(n){return n instanceof ss&&n.getTypeName()||null}function _p(n){return new Ca(n)}function yi(n){return new gd(n)}function vp(n){return new No(n)}function Uc(n){return new Iu(n)}function Zd(n){return new ta(n)}class Qd{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Va(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class md{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const l=this.inertDocument.createElement("body");o.appendChild(l)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Va(i),o;const l=this.inertDocument.createElement("body");return l.innerHTML=Va(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(i){const o=i.attributes;for(let h=o.length-1;0<h;h--){const I=o.item(h).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&i.removeAttribute(I)}let l=i.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const wp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,oc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function nu(n){return(n=String(n)).match(wp)||n.match(oc)?n:"unsafe:"+n}function Ba(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function ac(...n){const i={};for(const o of n)for(const l in o)o.hasOwnProperty(l)&&(i[l]=!0);return i}const lc=Ba("area,br,col,hr,img,wbr"),Xd=Ba("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),eh=Ba("rp,rt"),Us=ac(lc,ac(Xd,Ba("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ac(eh,Ba("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ac(eh,Xd)),vc=Ba("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ec=Ba("srcset"),f=ac(vc,Ec,Ba("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ba("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),u=Ba("script,style,template");class c{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,l=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?l=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,l&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Us.hasOwnProperty(o))return this.sanitizedSomething=!0,!u.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const l=i.attributes;for(let h=0;h<l.length;h++){const m=l.item(h),I=m.name,M=I.toLowerCase();if(!f.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let k=m.value;vc[M]&&(k=nu(k)),Ec[M]&&(n=k,k=(n=String(n)).split(",").map(i=>nu(i.trim())).join(", ")),this.buf.push(" ",I,'="',B(k),'"')}var n;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Us.hasOwnProperty(o)&&!lc.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(B(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S=/([^\#-~ |!])/g;function B(n){return n.replace(/&/g,"&amp;").replace(v,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(S,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let J;function _e(n,i){let o=null;try{J=J||function Yd(n){const i=new md(n);return function Ep(){try{return!!(new window.DOMParser).parseFromString(Va(""),"text/html")}catch(n){return!1}}()?new Qd(i):i}(n);let l=i?String(i):"";o=J.getInertBodyElement(l);let h=5,m=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=m,m=o.innerHTML,o=J.getInertBodyElement(l)}while(l!==m);return Va((new c).sanitizeChildren(Oe(o)||o))}finally{if(o){const l=Oe(o)||o;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Oe(n){return"content"in n&&function Ye(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Mt=(()=>((Mt=Mt||{})[Mt.NONE=0]="NONE",Mt[Mt.HTML=1]="HTML",Mt[Mt.STYLE=2]="STYLE",Mt[Mt.SCRIPT=3]="SCRIPT",Mt[Mt.URL=4]="URL",Mt[Mt.RESOURCE_URL=5]="RESOURCE_URL",Mt))();function zt(n){const i=nh();return i?gl(i.sanitize(Mt.HTML,n)||""):ml(n,"HTML")?gl(ua(n)):_e(Hs(),dt(n))}function qn(n){const i=nh();return i?i.sanitize(Mt.URL,n)||"":ml(n,"URL")?ua(n):nu(dt(n))}function nh(){const n=Be();return n&&n[12]}function Hc(n){return n.ngOriginalError}function ih(n,...i){n.error(...i)}class $c{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),l=function rh(n){return n&&n.ngErrorLogger||ih}(i);l(this._console,"ERROR",i),o&&l(this._console,"ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Hc(i);for(;o&&Hc(o);)o=Hc(o);return o||null}}const M_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Un))();function nm(n){return n.ownerDocument}function Al(n){return n instanceof Function?n():n}function Tp(n,i,o){let l=n.length;for(;;){const h=n.indexOf(i,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const m=i.length;if(h+m===l||n.charCodeAt(h+m)<=32)return h}o=h+1}}const Nu="ng-template";function bp(n,i,o){let l=0;for(;l<n.length;){let h=n[l++];if(o&&"class"===h){if(h=n[l],-1!==Tp(h.toLowerCase(),i,0))return!0}else if(1===h){for(;l<n.length&&"string"==typeof(h=n[l++]);)if(h.toLowerCase()===i)return!0;return!1}}return!1}function Dp(n){return 4===n.type&&n.value!==Nu}function sh(n,i,o){return i===(4!==n.type||o?n.value:Nu)}function im(n,i,o){let l=4;const h=n.attrs||[],m=function oh(n){for(let i=0;i<n.length;i++)if(qo(n[i]))return i;return n.length}(h);let I=!1;for(let M=0;M<i.length;M++){const k=i[M];if("number"!=typeof k){if(!I)if(4&l){if(l=2|1&l,""!==k&&!sh(n,k,o)||""===k&&1===i.length){if(Tu(l))return!1;I=!0}}else{const re=8&l?k:i[++M];if(8&l&&null!==n.attrs){if(!bp(n.attrs,re,o)){if(Tu(l))return!1;I=!0}continue}const Ae=sm(8&l?"class":k,h,Dp(n),o);if(-1===Ae){if(Tu(l))return!1;I=!0;continue}if(""!==re){let et;et=Ae>m?"":h[Ae+1].toLowerCase();const wt=8&l?et:null;if(wt&&-1!==Tp(wt,re,0)||2&l&&re!==et){if(Tu(l))return!1;I=!0}}}}else{if(!I&&!Tu(l)&&!Tu(k))return!1;if(I&&Tu(k))continue;I=!1,l=k|1&l}}return Tu(l)||I}function Tu(n){return 0==(1&n)}function sm(n,i,o,l){if(null===i)return-1;let h=0;if(l||!o){let m=!1;for(;h<i.length;){const I=i[h];if(I===n)return h;if(3===I||6===I)m=!0;else{if(1===I||2===I){let M=i[++h];for(;"string"==typeof M;)M=i[++h];continue}if(4===I)break;if(0===I){h+=4;continue}}h+=m?1:2}return-1}return function Sp(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const l=n[o];if("number"==typeof l)return-1;if(l===i)return o;o++}return-1}(i,n)}function om(n,i,o=!1){for(let l=0;l<i.length;l++)if(im(n,i[l],o))return!0;return!1}function Ap(n,i){return n?":not("+i.trim()+")":i}function Rp(n){let i=n[0],o=1,l=2,h="",m=!1;for(;o<n.length;){let I=n[o];if("string"==typeof I)if(2&l){const M=n[++o];h+="["+I+(M.length>0?'="'+M+'"':"")+"]"}else 8&l?h+="."+I:4&l&&(h+=" "+I);else""!==h&&!Tu(I)&&(i+=Ap(m,h),h=""),l=I,m=m||!Tu(l);o++}return""!==h&&(i+=Ap(m,h)),i}const ui={};function lm(n){um(Xt(),Be(),cs()+n,!1)}function um(n,i,o,l){if(!l)if(3==(3&i[2])){const m=n.preOrderCheckHooks;null!==m&&Io(i,m,o)}else{const m=n.preOrderHooks;null!==m&&rs(i,m,0,o)}Is(o)}function Ou(n,i){return n<<17|i<<2}function yl(n){return n>>17&32767}function lf(n){return 2|n}function rl(n){return(131068&n)>>2}function uf(n,i){return-131069&n|i<<2}function cf(n){return 1|n}function kp(n,i){const o=n.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const h=o[l],m=o[l+1];if(-1!==m){const I=n.data[m];Mo(h),I.contentQueries(2,i[m],m)}}}function Tc(n,i,o,l,h,m,I,M,k,re){const ae=i.blueprint.slice();return ae[0]=h,ae[2]=140|l,ao(ae),ae[3]=ae[15]=n,ae[8]=o,ae[10]=I||n&&n[10],ae[11]=M||n&&n[11],ae[12]=k||n&&n[12]||null,ae[9]=re||n&&n[9]||null,ae[6]=m,ae[16]=2==i.type?n[16]:ae,ae}function dc(n,i,o,l,h){let m=n.data[i];if(null===m)m=function mf(n,i,o,l,h){const m=K(),I=Ke(),k=n.data[i]=function bm(n,i,o,l,h,m){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?m:m&&m.parent,o,i,l,h);return null===n.firstChild&&(n.firstChild=k),null!==m&&(I?null==m.child&&null!==k.parent&&(m.child=k):null===m.next&&(m.next=k)),k}(n,i,o,l,h),function Hi(){return ir.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=o,m.value=l,m.attrs=h;const I=function pe(){const n=ir.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();m.injectorIndex=null===I?-1:I.injectorIndex}return be(m,!0),m}function ru(n,i,o,l){if(0===o)return-1;const h=i.length;for(let m=0;m<o;m++)i.push(l),n.blueprint.push(l),n.data.push(null);return h}function Wu(n,i,o){Xs(i);try{const l=n.viewQuery;null!==l&&bf(1,l,o);const h=n.template;null!==h&&wm(n,i,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&kp(n,i),n.staticViewQueries&&bf(2,n.viewQuery,o);const m=n.components;null!==m&&function Em(n,i){for(let o=0;o<i.length;o++)Vp(n,i[o])}(i,m)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[2]&=-5,ia()}}function Kc(n,i,o,l){const h=i[2];if(256!=(256&h)){Xs(i);try{ao(i),function Gr(n){return ir.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&wm(n,i,o,2,l);const I=3==(3&h);if(I){const re=n.preOrderCheckHooks;null!==re&&Io(i,re,null)}else{const re=n.preOrderHooks;null!==re&&rs(i,re,0,null),no(i,0)}if(function tv(n){for(let i=Cn(n);null!==i;i=Tn(i)){if(!i[2])continue;const o=i[9];for(let l=0;l<o.length;l++){const h=o[l],m=h[3];0==(1024&h[2])&&di(m,1),h[2]|=1024}}}(i),function Nm(n){for(let i=Cn(n);null!==i;i=Tn(i))for(let o=10;o<i.length;o++){const l=i[o],h=l[1];wi(l)&&Kc(h,l,h.template,l[8])}}(i),null!==n.contentQueries&&kp(n,i),I){const re=n.contentCheckHooks;null!==re&&Io(i,re)}else{const re=n.contentHooks;null!==re&&rs(i,re,1),no(i,1)}!function vm(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const h=o[l];if(h<0)Is(~h);else{const m=h,I=o[++l],M=o[++l];es(I,m),M(2,i[m])}}}finally{Is(-1)}}(n,i);const M=n.components;null!==M&&function _l(n,i){for(let o=0;o<i.length;o++)Om(n,i[o])}(i,M);const k=n.viewQuery;if(null!==k&&bf(2,k,l),I){const re=n.viewCheckHooks;null!==re&&Io(i,re)}else{const re=n.viewHooks;null!==re&&rs(i,re,2),no(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-73,1024&i[2]&&(i[2]&=-1025,di(i[3],-1))}finally{ia()}}}function qc(n,i,o,l){const h=i[10],I=Sr(i);try{!I&&h.begin&&h.begin(),I&&Wu(n,i,l),Kc(n,i,o,l)}finally{!I&&h.end&&h.end()}}function wm(n,i,o,l,h){const m=cs(),I=2&l;try{Is(-1),I&&i.length>20&&um(n,i,20,!1),o(l,h)}finally{Is(m)}}function Zc(n,i,o){if(kt(i)){const h=i.directiveEnd;for(let m=i.directiveStart;m<h;m++){const I=n.data[m];I.contentQueries&&I.contentQueries(1,o[m],m)}}}function yf(n,i,o){!j()||(function Q_(n,i,o,l){const h=o.directiveStart,m=o.directiveEnd;n.firstCreatePass||al(o,i),ho(l,i);const I=o.initialInputs;for(let M=h;M<m;M++){const k=n.data[M],re=Nn(k);re&&xm(i,o,k);const ae=Wt(i,n,M,o);ho(ae,i),null!==I&&mh(0,M-h,ae,k,0,I),re&&(fr(o.index,i)[8]=ae)}}(n,i,o,Kt(o,i)),128==(128&o.flags)&&function J_(n,i,o){const l=o.directiveStart,h=o.directiveEnd,I=o.index,M=function Ki(){return ir.lFrame.currentDirectiveIndex}();try{Is(I);for(let k=l;k<h;k++){const re=n.data[k],ae=i[k];qi(k),(null!==re.hostBindings||0!==re.hostVars||null!==re.hostAttrs)&&Rm(re,ae)}}finally{Is(-1),qi(M)}}(n,i,o))}function zu(n,i,o=Kt){const l=i.localNames;if(null!==l){let h=i.index+1;for(let m=0;m<l.length;m+=2){const I=l[m+1],M=-1===I?o(i,n):n[I];n[h++]=M}}}function Fp(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=_f(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function _f(n,i,o,l,h,m,I,M,k,re){const ae=20+l,Ae=ae+h,et=function Cm(n,i){const o=[];for(let l=0;l<i;l++)o.push(l<n?null:ui);return o}(ae,Ae),wt="function"==typeof re?re():re;return et[1]={type:n,blueprint:et,template:o,queries:null,viewQuery:M,declTNode:i,data:et.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:k,consts:wt,incompleteFirstPass:!1}}function hh(n,i,o,l){const h=Vm(i);null===o?h.push(l):(h.push(o),n.firstCreatePass&&Df(n).push(l,h.length-1))}function Dm(n,i,o){for(let l in n)if(n.hasOwnProperty(l)){const h=n[l];(o=null===o?{}:o).hasOwnProperty(l)?o[l].push(i,h):o[l]=[i,h]}return o}function Gl(n,i,o,l,h,m,I,M){const k=Kt(i,o);let ae,re=i.inputs;!M&&null!=re&&(ae=re[l])?(Hp(n,o,ae,l,h),Dn(i)&&function Yc(n,i){const o=fr(i,n);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(l=function z_(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),h=null!=I?I(h,i.value||"",l):h,si(m)?m.setProperty(k,l,h):Zo(l)||(k.setProperty?k.setProperty(l,h):k[l]=h))}function Lp(n,i,o,l){let h=!1;if(j()){const m=function X_(n,i,o){const l=n.directiveRegistry;let h=null;if(l)for(let m=0;m<l.length;m++){const I=l[m];om(o,I.selectors,!1)&&(h||(h=[]),T(al(o,i),n,I.type),Nn(I)?(Ef(n,o),h.unshift(I)):h.push(I))}return h}(n,i,o),I=null===l?null:{"":-1};if(null!==m){h=!0,ph(o,n.data.length,m.length);for(let ae=0;ae<m.length;ae++){const Ae=m[ae];Ae.providersResolver&&Ae.providersResolver(Ae)}let M=!1,k=!1,re=ru(n,i,m.length,null);for(let ae=0;ae<m.length;ae++){const Ae=m[ae];o.mergedAttrs=Fs(o.mergedAttrs,Ae.hostAttrs),Mm(n,o,i,re,Ae),wf(re,Ae,I),null!==Ae.contentQueries&&(o.flags|=8),(null!==Ae.hostBindings||null!==Ae.hostAttrs||0!==Ae.hostVars)&&(o.flags|=128);const et=Ae.type.prototype;!M&&(et.ngOnChanges||et.ngOnInit||et.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),M=!0),!k&&(et.ngOnChanges||et.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),k=!0),re++}!function Sm(n,i){const l=i.directiveEnd,h=n.data,m=i.attrs,I=[];let M=null,k=null;for(let re=i.directiveStart;re<l;re++){const ae=h[re],Ae=ae.inputs,et=null===m||Dp(i)?null:Cf(Ae,m);I.push(et),M=Dm(Ae,re,M),k=Dm(ae.outputs,re,k)}null!==M&&(M.hasOwnProperty("class")&&(i.flags|=16),M.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=I,i.inputs=M,i.outputs=k}(n,o)}I&&function ev(n,i,o){if(i){const l=n.localNames=[];for(let h=0;h<i.length;h+=2){const m=o[i[h+1]];if(null==m)throw new _t(-301,!1);l.push(i[h],m)}}}(o,l,I)}return o.mergedAttrs=Fs(o.mergedAttrs,o.attrs),h}function vf(n,i,o,l,h,m){const I=m.hostBindings;if(I){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const k=~i.index;(function ja(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(M)!=k&&M.push(k),M.push(l,h,I)}}function Rm(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Ef(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function wf(n,i,o){if(o){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)o[i.exportAs[l]]=n;Nn(i)&&(o[""]=n)}}function ph(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}function Mm(n,i,o,l,h){n.data[l]=h;const m=h.factory||(h.factory=qr(h.type)),I=new uo(m,Nn(h),null);n.blueprint[l]=I,o[l]=I,vf(n,i,0,l,ru(n,o,h.hostVars,ui),h)}function xm(n,i,o){const l=Kt(i,n),h=Fp(o),m=n[10],I=yh(n,Tc(n,h,null,o.onPush?64:16,l,i,m,m.createRenderer(l,o),null,null));n[i.index]=I}function bu(n,i,o,l,h,m){const I=Kt(n,i);!function gh(n,i,o,l,h,m,I){if(null==m)si(n)?n.removeAttribute(i,h,o):i.removeAttribute(h);else{const M=null==I?dt(m):I(m,l||"",h);si(n)?n.setAttribute(i,h,M,o):o?i.setAttributeNS(o,h,M):i.setAttribute(h,M)}}(i[11],I,m,n.value,o,l,h)}function mh(n,i,o,l,h,m){const I=m[i];if(null!==I){const M=l.setInput;for(let k=0;k<I.length;){const re=I[k++],ae=I[k++],Ae=I[k++];null!==M?l.setInput(o,Ae,re,ae):o[ae]=Ae}}}function Cf(n,i){let o=null,l=0;for(;l<i.length;){const h=i[l];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],i[l+1])),l+=2}else l+=2;else l+=4}return o}function If(n,i,o,l){return new Array(n,!0,!1,i,null,0,l,o,null,null)}function Om(n,i){const o=fr(i,n);if(wi(o)){const l=o[1];80&o[2]?Kc(l,o,l.template,o[8]):o[5]>0&&Tf(o)}}function Tf(n){for(let l=Cn(n);null!==l;l=Tn(l))for(let h=10;h<l.length;h++){const m=l[h];if(1024&m[2]){const I=m[1];Kc(I,m,I.template,m[8])}else m[5]>0&&Tf(m)}const o=n[1].components;if(null!==o)for(let l=0;l<o.length;l++){const h=fr(o[l],n);wi(h)&&h[5]>0&&Tf(h)}}function Vp(n,i){const o=fr(i,n),l=o[1];(function nv(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(l,o),Wu(l,o,o[8])}function yh(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Up(n){for(;n;){n[2]|=64;const i=qe(n);if(hr(n)&&!i)return n;n=i}return null}function Qc(n){!function Bp(n){for(let i=0;i<n.components.length;i++){const o=n.components[i],l=Po(o),h=l[1];qc(h,l,h.template,o)}}(n[8])}function bf(n,i,o){Mo(0),i(n,o)}const Lm=(()=>Promise.resolve(null))();function Vm(n){return n[7]||(n[7]=[])}function Df(n){return n.cleanup||(n.cleanup=[])}function Sf(n,i){const o=n[9],l=o?o.get($c,null):null;l&&l.handleError(i)}function Hp(n,i,o,l,h){for(let m=0;m<o.length;){const I=o[m++],M=o[m++],k=i[I],re=n.data[I];null!==re.setInput?re.setInput(k,h,l,M):k[M]=h}}function Ku(n,i,o){const l=Pt(i,n);!function Ks(n,i,o){si(n)?n.setValue(i,o):i.textContent=o}(n[11],l,o)}function Cd(n,i,o){let l=o?n.styles:null,h=o?n.classes:null,m=0;if(null!==i)for(let I=0;I<i.length;I++){const M=i[I];"number"==typeof M?m=M:1==m?h=nt(h,M):2==m&&(l=nt(l,M+": "+i[++I]+";"))}o?n.styles=l:n.stylesWithoutHost=l,o?n.classes=h:n.classesWithoutHost=h}const vh=new Yi("INJECTOR",-1);class Rf{get(i,o=ga){if(o===ga){const l=new Error(`NullInjectorError: No provider for ${He(i)}!`);throw l.name="NullInjectorError",l}return o}}const Eh=new Yi("Set Injector scope."),Id={},iv={};let Mf;function wh(){return void 0===Mf&&(Mf=new Rf),Mf}function xf(n,i=null,o=null,l){const h=Bm(n,i,o,l);return h._resolveInjectorDefTypes(),h}function Bm(n,i=null,o=null,l){return new sv(n,o,i||wh(),l)}class sv{constructor(i,o,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];o&&Ya(o,M=>this.processProvider(M,i,o)),Ya([i],M=>this.processInjectorType(M,[],m)),this.records.set(vh,qu(void 0,this));const I=this.records.get(Eh);this.scope=null!=I?I.value:null,this.source=h||("object"==typeof i?null:He(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=ga,l=yn.Default){this.assertNotDestroyed();const h=du(this),m=Vn(void 0);try{if(!(l&yn.SkipSelf)){let M=this.records.get(i);if(void 0===M){const k=function cv(n){return"function"==typeof n||"object"==typeof n&&n instanceof Yi}(i)&&st(i);M=k&&this.injectableDefInScope(k)?qu(Ha(i),Id):null,this.records.set(i,M)}if(null!=M)return this.hydrate(i,M)}return(l&yn.Self?wh():this.parent).get(i,o=l&yn.Optional&&o===ga?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[fs]=I[fs]||[]).unshift(He(i)),h)throw I;return function Ql(n,i,o,l){const h=n[fs];throw i[hl]&&h.unshift(i[hl]),n.message=function Mu(n,i,o,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=He(i);if(Array.isArray(i))h=i.map(He).join(" -> ");else if("object"==typeof i){let m=[];for(let I in i)if(i.hasOwnProperty(I)){let M=i[I];m.push(I+":"+("string"==typeof M?JSON.stringify(M):He(M)))}h=`{${m.join(", ")}}`}return`${o}${l?"("+l+")":""}[${h}]: ${n.replace(Vu,"\n  ")}`}("\n"+n.message,h,o,l),n.ngTokenPath=h,n[fs]=null,n}(I,i,"R3InjectorError",this.source)}throw I}finally{Vn(m),du(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((l,h)=>i.push(He(h))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _t(205,!1)}processInjectorType(i,o,l){if(!(i=Qe(i)))return!1;let h=kn(i);const m=null==h&&i.ngModule||void 0,I=void 0===m?i:m,M=-1!==l.indexOf(I);if(void 0!==m&&(h=kn(m)),null==h)return!1;if(null!=h.imports&&!M){let ae;l.push(I);try{Ya(h.imports,Ae=>{this.processInjectorType(Ae,o,l)&&(void 0===ae&&(ae=[]),ae.push(Ae))})}finally{}if(void 0!==ae)for(let Ae=0;Ae<ae.length;Ae++){const{ngModule:et,providers:wt}=ae[Ae];Ya(wt,Qt=>this.processProvider(Qt,et,wt||rn))}}this.injectorDefTypes.add(I);const k=qr(I)||(()=>new I);this.records.set(I,qu(k,Id));const re=h.providers;if(null!=re&&!M){const ae=i;Ya(re,Ae=>this.processProvider(Ae,ae,re))}return void 0!==m&&void 0!==i.providers}processProvider(i,o,l){let h=Td(i=Qe(i))?i:Qe(i&&i.provide);const m=function jm(n,i,o){return Pf(n)?qu(void 0,n.useValue):qu(Ch(n),Id)}(i);if(Td(i)||!0!==i.multi)this.records.get(h);else{let I=this.records.get(h);I||(I=qu(void 0,Id,!0),I.factory=()=>hu(I.multi),this.records.set(h,I)),h=i,I.multi.push(i)}this.records.set(h,m)}hydrate(i,o){return o.value===Id&&(o.value=iv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Gp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Qe(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Ha(n){const i=st(n),o=null!==i?i.factory:qr(n);if(null!==o)return o;if(n instanceof Yi)throw new _t(204,!1);if(n instanceof Function)return function ov(n){const i=n.length;if(i>0)throw function ul(n,i){const o=[];for(let l=0;l<n;l++)o.push(i);return o}(i,"?"),new _t(204,!1);const o=function pn(n){const i=n&&(n[ur]||n[jn]);if(i){const o=function wn(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new _t(204,!1)}function Ch(n,i,o){let l;if(Td(n)){const h=Qe(n);return qr(h)||Ha(h)}if(Pf(n))l=()=>Qe(n.useValue);else if(function av(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...hu(n.deps||[]));else if(function Hm(n){return!(!n||!n.useExisting)}(n))l=()=>Vs(Qe(n.useExisting));else{const h=Qe(n&&(n.useClass||n.provide));if(!function uv(n){return!!n.deps}(n))return qr(h)||Ha(h);l=()=>new h(...hu(n.deps))}return l}function qu(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Pf(n){return null!==n&&"object"==typeof n&&cu in n}function Td(n){return"function"==typeof n}let Zu=(()=>{class n{static create(o,l){var h;if(Array.isArray(o))return xf({name:""},l,o,"");{const m=null!==(h=o.name)&&void 0!==h?h:"";return xf({name:m},o.parent,o.providers,m)}}}return n.THROW_IF_NOT_FOUND=ga,n.NULL=new Rf,n.\u0275prov=Me({token:n,providedIn:"any",factory:()=>Vs(vh)}),n.__NG_ELEMENT_ID__=-1,n})();function fv(n,i){Ta(Po(n)[1],W())}function Dh(n){let i=function qm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const l=[n];for(;i;){let h;if(Nn(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new _t(903,"");h=i.\u0275dir}if(h){if(o){l.push(h);const I=n;I.inputs=Sh(n.inputs),I.declaredInputs=Sh(n.declaredInputs),I.outputs=Sh(n.outputs);const M=h.hostBindings;M&&Zm(n,M);const k=h.viewQuery,re=h.contentQueries;if(k&&gv(n,k),re&&Xp(n,re),Xe(n.inputs,h.inputs),Xe(n.declaredInputs,h.declaredInputs),Xe(n.outputs,h.outputs),Nn(h)&&h.data.animation){const ae=n.data;ae.animation=(ae.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let I=0;I<m.length;I++){const M=m[I];M&&M.ngInherit&&M(n),M===Dh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function pv(n){let i=0,o=null;for(let l=n.length-1;l>=0;l--){const h=n[l];h.hostVars=i+=h.hostVars,h.hostAttrs=Fs(h.hostAttrs,o=Fs(o,h.hostAttrs))}}(l)}function Sh(n){return n===mr?{}:n===rn?[]:n}function gv(n,i){const o=n.viewQuery;n.viewQuery=o?(l,h)=>{i(l,h),o(l,h)}:i}function Xp(n,i){const o=n.contentQueries;n.contentQueries=o?(l,h,m)=>{i(l,h,m),o(l,h,m)}:i}function Zm(n,i){const o=n.hostBindings;n.hostBindings=o?(l,h)=>{i(l,h),o(l,h)}:i}let hc=null;function iu(){if(!hc){const n=Un.Symbol;if(n&&n.iterator)hc=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const l=i[o];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(hc=l)}}}return hc}function Yu(n){return!!Dc(n)&&(Array.isArray(n)||!(n instanceof Map)&&iu()in n)}function Dc(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Qu(n,i,o){return n[i]=o}function $a(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function fc(n,i,o,l){const h=$a(n,i,o);return $a(n,i+1,l)||h}function ig(n,i,o,l){const h=Be();return $a(h,hi(),i)&&(Xt(),bu(Ai(),h,n,i,o,l)),ig}function Ac(n,i,o,l,h,m){const M=fc(n,function oi(){return ir.lFrame.bindingIndex}(),o,h);return Qr(2),M?i+dt(o)+l+dt(h)+m:ui}function ny(n,i,o,l,h,m,I,M){const k=Be(),re=Xt(),ae=n+20,Ae=re.firstCreatePass?function og(n,i,o,l,h,m,I,M,k){const re=i.consts,ae=dc(i,n,4,I||null,li(re,M));Lp(i,o,ae,li(re,k)),Ta(i,ae);const Ae=ae.tViews=_f(2,ae,l,h,m,i.directiveRegistry,i.pipeRegistry,null,i.schemas,re);return null!==i.queries&&(i.queries.template(i,ae),Ae.queries=i.queries.embeddedTView(ae)),ae}(ae,re,k,i,o,l,h,m,I):re.data[ae];be(Ae,!1);const et=k[11].createComment("");rt(re,k,et,Ae),ho(et,k),yh(k,k[ae]=If(et,k,et,Ae)),Ir(Ae)&&yf(re,k,Ae),null!=I&&zu(k,Ae,M)}function lg(n){return br(function Fn(){return ir.lFrame.contextLView}(),20+n)}function Nh(n,i=yn.Default){const o=Be();return null===o?Vs(n,i):fe(W(),o,Qe(n),i)}function zf(){throw new Error("invalid")}function Kf(n,i,o){const l=Be();return $a(l,hi(),i)&&Gl(Xt(),Ai(),l,n,i,l[11],o,!1),Kf}function Mc(n,i,o,l,h){const I=h?"class":"style";Hp(n,o,i.inputs[I],I,l)}function sd(n,i,o,l){const h=Be(),m=Xt(),I=20+n,M=h[11],k=h[I]=Xo(M,i,function to(){return ir.lFrame.currentNamespace}()),re=m.firstCreatePass?function fy(n,i,o,l,h,m,I){const M=i.consts,re=dc(i,n,2,h,li(M,m));return Lp(i,o,re,li(M,I)),null!==re.attrs&&Cd(re,re.attrs,!1),null!==re.mergedAttrs&&Cd(re,re.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,re),re}(I,m,h,0,i,o,l):m.data[I];be(re,!0);const ae=re.mergedAttrs;null!==ae&&$i(M,k,ae);const Ae=re.classes;null!==Ae&&Ao(M,k,Ae);const et=re.styles;return null!==et&&la(M,k,et),64!=(64&re.flags)&&rt(m,h,k,re),0===function ks(){return ir.lFrame.elementDepthCount}()&&ho(k,h),function Eo(){ir.lFrame.elementDepthCount++}(),Ir(re)&&(yf(m,h,re),Zc(m,re,h)),null!==l&&zu(h,re),sd}function qf(){let n=W();Ke()?yt():(n=n.parent,be(n,!1));const i=n;!function q(){ir.lFrame.elementDepthCount--}();const o=Xt();return o.firstCreatePass&&(Ta(o,n),kt(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Wa(n){return 0!=(16&n.flags)}(i)&&Mc(o,i,Be(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function au(n){return 0!=(32&n.flags)}(i)&&Mc(o,i,Be(),i.stylesWithoutHost,!1),qf}function gg(n,i,o,l){return sd(n,i,o,l),qf(),gg}function od(n,i,o){const l=Be(),h=Xt(),m=n+20,I=h.firstCreatePass?function Dv(n,i,o,l,h){const m=i.consts,I=li(m,l),M=dc(i,n,8,"ng-container",I);return null!==I&&Cd(M,I,!0),Lp(i,o,M,li(m,h)),null!==i.queries&&i.queries.elementStart(i,M),M}(m,h,l,i,o):h.data[m];be(I,!0);const M=l[m]=l[11].createComment("");return rt(h,l,M,I),ho(M,l),Ir(I)&&(yf(h,l,I),Zc(h,I,l)),null!=o&&zu(l,I),od}function Pd(){let n=W();const i=Xt();return Ke()?yt():(n=n.parent,be(n,!1)),i.firstCreatePass&&(Ta(i,n),kt(n)&&i.queries.elementEnd(n)),Pd}function Yf(){return Be()}function Qf(n){return!!n&&"function"==typeof n.then}function Jf(n){return!!n&&"function"==typeof n.subscribe}const Xf=Jf;function Nd(n,i,o,l){const h=Be(),m=Xt(),I=W();return function Oh(n,i,o,l,h,m,I,M){const k=Ir(l),ae=n.firstCreatePass&&Df(n),Ae=i[8],et=Vm(i);let wt=!0;if(3&l.type||M){const $n=Kt(l,i),pr=M?M($n):$n,dn=et.length,kr=M?Ji=>M($(Ji[l.index])):l.index;if(si(o)){let Ji=null;if(!M&&k&&(Ji=function py(n,i,o,l){const h=n.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const I=h[m];if(I===o&&h[m+1]===l){const M=i[7],k=h[m+2];return M.length>k?M[k]:null}"string"==typeof I&&(m+=2)}return null}(n,i,h,l.index)),null!==Ji)(Ji.__ngLastListenerFn__||Ji).__ngNextListenerFn__=m,Ji.__ngLastListenerFn__=m,wt=!1;else{m=kh(l,i,Ae,m,!1);const Bs=o.listen(pr,h,m);et.push(m,Bs),ae&&ae.push(h,kr,dn,dn+1)}}else m=kh(l,i,Ae,m,!0),pr.addEventListener(h,m,I),et.push(m),ae&&ae.push(h,kr,dn,I)}else m=kh(l,i,Ae,m,!1);const Qt=l.outputs;let An;if(wt&&null!==Qt&&(An=Qt[h])){const $n=An.length;if($n)for(let pr=0;pr<$n;pr+=2){const ku=i[An[pr]][An[pr+1]].subscribe(m),nf=et.length;et.push(m,ku),ae&&ae.push(h,l.index,nf,-(nf+1))}}}(m,h,h[11],I,n,i,!!o,l),Nd}function mg(n,i,o,l){try{return!1!==o(l)}catch(h){return Sf(n,h),!1}}function kh(n,i,o,l,h){return function m(I){if(I===Function)return l;const M=2&n.flags?fr(n.index,i):i;0==(32&i[2])&&Up(M);let k=mg(i,0,l,I),re=m.__ngNextListenerFn__;for(;re;)k=mg(i,0,re,I)&&k,re=re.__ngNextListenerFn__;return h&&!1===k&&(I.preventDefault(),I.returnValue=!1),k}}function yg(n=1){return function Ei(n){return(ir.lFrame.contextLView=function eo(n,i){for(;n>0;)i=i[15],n--;return i}(n,ir.lFrame.contextLView))[8]}(n)}function Tg(n,i,o,l,h){const m=n[o+1],I=null===i;let M=l?yl(m):rl(m),k=!1;for(;0!==M&&(!1===k||I);){const ae=n[M+1];Cy(n[M],i)&&(k=!0,n[M+1]=l?cf(ae):lf(ae)),M=l?yl(ae):rl(ae)}k&&(n[o+1]=l?lf(m):cf(m))}function Cy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&ro(n,i)>=0}const $o={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Fi(n){return n.substring($o.key,$o.keyEnd)}function kd(n,i){const o=$o.textEnd;return o===i?-1:(i=$o.keyEnd=function Dy(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,$o.key=i,o),Rl(n,i,o))}function Rl(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function Lh(n,i,o){return Es(n,i,o,!1),Lh}function bg(n,i){return Es(n,i,null,!0),bg}function Mv(n){!function Du(n,i,o,l){const h=Xt(),m=Qr(2);h.firstUpdatePass&&Ry(h,null,m,l);const I=Be();if(o!==ui&&$a(I,m,o)){const M=h.data[cs()];if(kv(M,l)&&!Ay(h,m)){let k=l?M.classesWithoutHost:M.stylesWithoutHost;null!==k&&(o=nt(k,o||"")),Mc(h,M,I,o,l)}else!function Py(n,i,o,l,h,m,I,M){h===ui&&(h=rn);let k=0,re=0,ae=0<h.length?h[0]:null,Ae=0<m.length?m[0]:null;for(;null!==ae||null!==Ae;){const et=k<h.length?h[k+1]:void 0,wt=re<m.length?m[re+1]:void 0;let An,Qt=null;ae===Ae?(k+=2,re+=2,et!==wt&&(Qt=Ae,An=wt)):null===Ae||null!==ae&&ae<Ae?(k+=2,Qt=ae):(re+=2,Qt=Ae,An=wt),null!==Qt&&Fd(n,i,o,l,Qt,An,I,M),ae=k<h.length?h[k]:null,Ae=re<m.length?m[re]:null}}(h,M,I,I[11],I[m+1],I[m+1]=function Ov(n,i,o){if(null==o||""===o)return rn;const l=[],h=ua(o);if(Array.isArray(h))for(let m=0;m<h.length;m++)n(l,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&n(l,m,h[m]);else"string"==typeof h&&i(l,h);return l}(n,i,o),l,m)}}(gt,pc,n,!0)}function pc(n,i){for(let o=function Ty(n){return function Ga(n){$o.key=0,$o.keyEnd=0,$o.value=0,$o.valueEnd=0,$o.textEnd=n.length}(n),kd(n,Rl(n,0,$o.textEnd))}(i);o>=0;o=kd(i,o))gt(n,Fi(i),!0)}function Es(n,i,o,l){const h=Be(),m=Xt(),I=Qr(2);m.firstUpdatePass&&Ry(m,n,I,l),i!==ui&&$a(h,I,i)&&Fd(m,m.data[cs()],h,h[11],n,h[I+1]=function gc(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=He(ua(n)))),n}(i,o),l,I)}function Ay(n,i){return i>=n.expandoStartIndex}function Ry(n,i,o,l){const h=n.data;if(null===h[o+1]){const m=h[cs()],I=Ay(n,o);kv(m,l)&&null===i&&!I&&(i=!1),i=function My(n,i,o,l){const h=Ni(n);let m=l?i.residualClasses:i.residualStyles;if(null===h)0===(l?i.classBindings:i.styleBindings)&&(o=np(o=Dg(null,n,i,o,l),i.attrs,l),m=null);else{const I=i.directiveStylingLast;if(-1===I||n[I]!==h)if(o=Dg(h,n,i,o,l),null===m){let k=function xv(n,i,o){const l=o?i.classBindings:i.styleBindings;if(0!==rl(l))return n[yl(l)]}(n,i,l);void 0!==k&&Array.isArray(k)&&(k=Dg(null,n,i,k[1],l),k=np(k,i.attrs,l),function Pv(n,i,o,l){n[yl(o?i.classBindings:i.styleBindings)]=l}(n,i,l,k))}else m=function Nv(n,i,o){let l;const h=i.directiveEnd;for(let m=1+i.directiveStylingLast;m<h;m++)l=np(l,n[m].hostAttrs,o);return np(l,i.attrs,o)}(n,i,l)}return void 0!==m&&(l?i.residualClasses=m:i.residualStyles=m),o}(h,m,i,l),function Ig(n,i,o,l,h,m){let I=m?i.classBindings:i.styleBindings,M=yl(I),k=rl(I);n[l]=o;let ae,re=!1;if(Array.isArray(o)){const Ae=o;ae=Ae[1],(null===ae||ro(Ae,ae)>0)&&(re=!0)}else ae=o;if(h)if(0!==k){const et=yl(n[M+1]);n[l+1]=Ou(et,M),0!==et&&(n[et+1]=uf(n[et+1],l)),n[M+1]=function L_(n,i){return 131071&n|i<<17}(n[M+1],l)}else n[l+1]=Ou(M,0),0!==M&&(n[M+1]=uf(n[M+1],l)),M=l;else n[l+1]=Ou(k,0),0===M?M=l:n[k+1]=uf(n[k+1],l),k=l;re&&(n[l+1]=lf(n[l+1])),Tg(n,ae,l,!0),Tg(n,ae,l,!1),function wy(n,i,o,l,h){const m=h?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof i&&ro(m,i)>=0&&(o[l+1]=cf(o[l+1]))}(i,ae,n,l,m),I=Ou(M,k),m?i.classBindings=I:i.styleBindings=I}(h,m,i,o,I,l)}}function Dg(n,i,o,l,h){let m=null;const I=o.directiveEnd;let M=o.directiveStylingLast;for(-1===M?M=o.directiveStart:M++;M<I&&(m=i[M],l=np(l,m.hostAttrs,h),m!==n);)M++;return null!==n&&(o.directiveStylingLast=M),l}function np(n,i,o){const l=o?1:2;let h=-1;if(null!==i)for(let m=0;m<i.length;m++){const I=i[m];"number"==typeof I?h=I:h===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),gt(n,I,!!o||i[++m]))}return void 0===n?null:n}function Fd(n,i,o,l,h,m,I,M){if(!(3&i.type))return;const k=n.data,re=k[M+1];su(function dm(n){return 1==(1&n)}(re)?Ny(k,i,o,h,rl(re),I):void 0)||(su(m)||function Mp(n){return 2==(2&n)}(re)&&(m=Ny(k,null,o,h,M,I)),function La(n,i,o,l,h){const m=si(n);if(i)h?m?n.addClass(o,l):o.classList.add(l):m?n.removeClass(o,l):o.classList.remove(l);else{let I=-1===l.indexOf("-")?void 0:_a.DashCase;if(null==h)m?n.removeStyle(o,l,I):o.style.removeProperty(l);else{const M="string"==typeof h&&h.endsWith("!important");M&&(h=h.slice(0,-10),I|=_a.Important),m?n.setStyle(o,l,h,I):o.style.setProperty(l,h,M?"important":"")}}}(l,I,Pt(cs(),o),h,m))}function Ny(n,i,o,l,h,m){const I=null===i;let M;for(;h>0;){const k=n[h],re=Array.isArray(k),ae=re?k[1]:k,Ae=null===ae;let et=o[h+1];et===ui&&(et=Ae?rn:void 0);let wt=Ae?dl(et,l):ae===l?et:void 0;if(re&&!su(wt)&&(wt=dl(k,l)),su(wt)&&(M=wt,I))return M;const Qt=n[h+1];h=I?yl(Qt):rl(Qt)}if(null!==i){let k=m?i.residualClasses:i.residualStyles;null!=k&&(M=dl(k,l))}return M}function su(n){return void 0!==n}function kv(n,i){return 0!=(n.flags&(i?16:32))}function xc(n,i=""){const o=Be(),l=Xt(),h=n+20,m=l.firstCreatePass?dc(l,h,1,i,null):l.data[h],I=o[h]=function Ii(n,i){return si(n)?n.createText(i):n.createTextNode(i)}(o[11],i);rt(l,o,I,m),be(m,!1)}function Ld(n){return rp("",n,""),Ld}function rp(n,i,o){const l=Be(),h=function Sc(n,i,o,l){return $a(n,hi(),o)?i+dt(o)+l:ui}(l,n,i,o);return h!==ui&&Ku(l,cs(),h),rp}function Sg(n,i,o,l,h){const m=Be(),I=Ac(m,n,i,o,l,h);return I!==ui&&Ku(m,cs(),I),Sg}function Hy(n,i,o){const l=Be();if($a(l,hi(),i)){const m=Xt(),I=Ai();Gl(m,I,l,n,i,function Um(n,i,o){return(null===n||Nn(n))&&(o=function he(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[i.index])),o[11]}(Ni(m.data),I,l),o,!0)}return Hy}const yc=void 0;var ap=["en",[["a","p"],["AM","PM"],yc],[["AM","PM"],yc,yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yc,"{1} 'at' {0}",yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jv(n){const o=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let jd={};function Hv(n,i,o){"string"!=typeof i&&(o=i,i=n[Ur.LocaleId]),i=i.toLowerCase().replace(/_/g,"-"),jd[i]=n,o&&(jd[i][Ur.ExtraData]=o)}function Hd(n){const i=function Gy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=$h(i);if(o)return o;const l=i.split("-")[0];if(o=$h(l),o)return o;if("en"===l)return ap;throw new Error(`Missing locale data for the locale "${n}".`)}function $y(n){return Hd(n)[Ur.PluralCase]}function $h(n){return n in jd||(jd[n]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[n]),jd[n]}var Ur=(()=>((Ur=Ur||{})[Ur.LocaleId=0]="LocaleId",Ur[Ur.DayPeriodsFormat=1]="DayPeriodsFormat",Ur[Ur.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ur[Ur.DaysFormat=3]="DaysFormat",Ur[Ur.DaysStandalone=4]="DaysStandalone",Ur[Ur.MonthsFormat=5]="MonthsFormat",Ur[Ur.MonthsStandalone=6]="MonthsStandalone",Ur[Ur.Eras=7]="Eras",Ur[Ur.FirstDayOfWeek=8]="FirstDayOfWeek",Ur[Ur.WeekendRange=9]="WeekendRange",Ur[Ur.DateFormat=10]="DateFormat",Ur[Ur.TimeFormat=11]="TimeFormat",Ur[Ur.DateTimeFormat=12]="DateTimeFormat",Ur[Ur.NumberSymbols=13]="NumberSymbols",Ur[Ur.NumberFormats=14]="NumberFormats",Ur[Ur.CurrencyCode=15]="CurrencyCode",Ur[Ur.CurrencySymbol=16]="CurrencySymbol",Ur[Ur.CurrencyName=17]="CurrencyName",Ur[Ur.Currencies=18]="Currencies",Ur[Ur.Directionality=19]="Directionality",Ur[Ur.PluralCase=20]="PluralCase",Ur[Ur.ExtraData=21]="ExtraData",Ur))();const Gh="en-US";let $v=Gh;function Lg(n,i,o,l,h){if(n=Qe(n),Array.isArray(n))for(let m=0;m<n.length;m++)Lg(n[m],i,o,l,h);else{const m=Xt(),I=Be();let M=Td(n)?n:Qe(n.provide),k=Ch(n);const re=W(),ae=1048575&re.providerIndexes,Ae=re.directiveStart,et=re.providerIndexes>>20;if(Td(n)||!n.multi){const wt=new uo(k,h,Nh),Qt=Vg(M,i,h?ae:ae+et,Ae);-1===Qt?(T(al(re,I),m,M),tc(m,n,i.length),i.push(M),re.directiveStart++,re.directiveEnd++,h&&(re.providerIndexes+=1048576),o.push(wt),I.push(wt)):(o[Qt]=wt,I[Qt]=wt)}else{const wt=Vg(M,i,ae+et,Ae),Qt=Vg(M,i,ae,ae+et),An=wt>=0&&o[wt],$n=Qt>=0&&o[Qt];if(h&&!$n||!h&&!An){T(al(re,I),m,M);const pr=function Bg(n,i,o,l,h){const m=new uo(n,o,Nh);return m.multi=[],m.index=i,m.componentProviders=0,d_(m,h,l&&!o),m}(h?h_:y0,o.length,h,l,k);!h&&$n&&(o[Qt].providerFactory=pr),tc(m,n,i.length,0),i.push(M),re.directiveStart++,re.directiveEnd++,h&&(re.providerIndexes+=1048576),o.push(pr),I.push(pr)}else tc(m,n,wt>-1?wt:Qt,d_(o[h?Qt:wt],k,!h&&l));!h&&l&&$n&&o[Qt].componentProviders++}}}function tc(n,i,o,l){const h=Td(i),m=function lv(n){return!!n.useClass}(i);if(h||m){const k=(m?Qe(i.useClass):i).prototype.ngOnDestroy;if(k){const re=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const ae=re.indexOf(o);-1===ae?re.push(o,[l,k]):re[ae+1].push(l,k)}else re.push(o,k)}}}function d_(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Vg(n,i,o,l){for(let h=o;h<l;h++)if(i[h]===n)return h;return-1}function y0(n,i,o,l){return Ug(this.multi,[])}function h_(n,i,o,l){const h=this.multi;let m;if(this.providerFactory){const I=this.providerFactory.componentProviders,M=Wt(o,o[1],this.providerFactory.index,l);m=M.slice(0,I),Ug(h,m);for(let k=I;k<M.length;k++)m.push(M[k])}else m=[],Ug(h,m);return m}function Ug(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function Jh(n,i=[]){return o=>{o.providersResolver=(l,h)=>function m0(n,i,o){const l=Xt();if(l.firstCreatePass){const h=Nn(n);Lg(o,l.data,l.blueprint,h,!0),Lg(i,l.data,l.blueprint,h,!1)}}(l,h?h(n):n,i)}}class p_{}class m_{resolveComponentFactory(i){throw function jg(n){const i=Error(`No component factory found for ${He(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Xh=(()=>{class n{}return n.NULL=new m_,n})();function v0(){return fd(W(),Be())}function fd(n,i){return new qd(Kt(n,i))}let qd=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=v0,n})();function E0(n){return n instanceof qd?n.nativeElement:n}class Hg{}let y_=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function r(){const n=Be(),o=fr(W().index,n);return function w0(n){return n[11]}(ut(o)?o:n)}(),n})(),e=(()=>{class n{}return n.\u0275prov=Me({token:n,providedIn:"root",factory:()=>null}),n})();class t{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const s=new t("13.3.12"),a={};function d(n,i,o,l,h=!1){for(;null!==o;){const m=i[o.index];if(null!==m&&l.push($(m)),Et(m))for(let M=10;M<m.length;M++){const k=m[M],re=k[1].firstChild;null!==re&&d(k[1],k,re,l)}const I=o.type;if(8&I)d(n,i,o.child,l);else if(32&I){const M=O(o,i);let k;for(;k=M();)l.push(k)}else if(16&I){const M=mn(i,o);if(Array.isArray(M))l.push(...M);else{const k=qe(i[16]);d(k[1],k,M,l,!0)}}o=h?o.projectionNext:o.next}return l}class g{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return d(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Et(i)){const o=i[8],l=o?o.indexOf(this):-1;l>-1&&(nl(i,l),Fl(o,l))}this._attachedToViewContainer=!1}wu(this._lView[1],this._lView)}onDestroy(i){hh(this._lView[1],this._lView,null,i)}markForCheck(){Up(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function bc(n,i,o){const l=i[10];l.begin&&l.begin();try{Kc(n,i,n.template,o)}catch(h){throw Sf(i,h),h}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _t(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uo(n,i){ts(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new _t(902,"");this._appRef=i}}class R extends g{constructor(i){super(i),this._view=i}detectChanges(){Qc(this._view)}checkNoChanges(){}get context(){return null}}class G extends Xh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=xe(i);return new It(o,this.ngModule)}}function X(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class It extends p_{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function am(n){return n.map(Rp).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return X(this.componentDef.inputs)}get outputs(){return X(this.componentDef.outputs)}create(i,o,l,h){const m=(h=h||this.ngModule)?function $e(n,i){return{get:(o,l,h)=>{const m=n.get(o,a,h);return m!==a||l===a?m:i.get(o,l,h)}}}(i,h.injector):i,I=m.get(Hg,L),M=m.get(e,null),k=I.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",ae=l?function Tm(n,i,o){if(si(n))return n.selectRootElement(i,o===At.ShadowDom);let l="string"==typeof i?n.querySelector(i):i;return l.textContent="",l}(k,l,this.componentDef.encapsulation):Xo(I.createRenderer(null,this.componentDef),re,function ge(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(re)),Ae=this.componentDef.onPush?576:528,et=function Jp(n,i){return{components:[],scheduler:n||M_,clean:Lm,playerHandler:i||null,flags:0}}(),wt=_f(0,null,null,1,0,null,null,null,null,null),Qt=Tc(null,wt,et,Ae,null,null,I,k,M,m);let An,$n;Xs(Qt);try{const pr=function zm(n,i,o,l,h,m){const I=o[1];o[20]=n;const k=dc(I,20,2,"#host",null),re=k.mergedAttrs=i.hostAttrs;null!==re&&(Cd(k,re,!0),null!==n&&($i(h,n,re),null!==k.classes&&Ao(h,n,k.classes),null!==k.styles&&la(h,n,k.styles)));const ae=l.createRenderer(n,i),Ae=Tc(o,Fp(i),null,i.onPush?64:16,o[20],k,l,ae,m||null,null);return I.firstCreatePass&&(T(al(k,o),I,i.type),Ef(I,k),ph(k,o.length,1)),yh(o,Ae),o[20]=Ae}(ae,this.componentDef,Qt,I,k);if(ae)if(l)$i(k,ae,["ng-version",s.full]);else{const{attrs:dn,classes:kr}=function F_(n){const i=[],o=[];let l=1,h=2;for(;l<n.length;){let m=n[l];if("string"==typeof m)2===h?""!==m&&i.push(m,n[++l]):8===h&&o.push(m);else{if(!Tu(h))break;h=m}l++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);dn&&$i(k,ae,dn),kr&&kr.length>0&&Ao(k,ae,kr.join(" "))}if($n=vr(wt,20),void 0!==o){const dn=$n.projection=[];for(let kr=0;kr<this.ngContentSelectors.length;kr++){const Ji=o[kr];dn.push(null!=Ji?Array.from(Ji):null)}}An=function Qp(n,i,o,l,h){const m=o[1],I=function Y_(n,i,o){const l=W();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Mm(n,l,i,ru(n,i,1,null),o));const h=Wt(i,n,l.directiveStart,l);ho(h,i);const m=Kt(l,i);return m&&ho(m,i),h}(m,o,i);if(l.components.push(I),n[8]=I,h&&h.forEach(k=>k(I,i)),i.contentQueries){const k=W();i.contentQueries(1,I,k.directiveStart)}const M=W();return!m.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Is(M.index),vf(o[1],M,0,M.directiveStart,M.directiveEnd,i),Rm(i,I)),I}(pr,this.componentDef,Qt,et,[fv]),Wu(wt,Qt,null)}finally{ia()}return new Hn(this.componentType,An,fd($n,Qt),Qt,$n)}}class Hn extends class f_{}{constructor(i,o,l,h,m){super(),this.location=l,this._rootLView=h,this._tNode=m,this.instance=o,this.hostView=this.changeDetectorRef=new R(h),this.componentType=i}get injector(){return new jt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Wr{}class zi{}const zr=new Map;class bE extends Wr{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new G(this);const l=an(i);this._bootstrapComponents=Al(l.bootstrap),this._r3Injector=Bm(i,o,[{provide:Wr,useValue:this},{provide:Xh,useValue:this.componentFactoryResolver}],He(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Zu.THROW_IF_NOT_FOUND,l=yn.Default){return i===Zu||i===Wr||i===vh?this:this._r3Injector.get(i,o,l)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class I0 extends zi{constructor(i){super(),this.moduleType=i,null!==an(i)&&function Zs(n){const i=new Set;!function o(l){const h=an(l,!0),m=h.id;null!==m&&(function qs(n,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${n} - ${He(i)} vs ${He(i.name)}`)}(m,zr.get(m),l),zr.set(m,l));const I=Al(h.imports);for(const M of I)i.has(M)||(i.add(M),o(M))}(n)}(i)}create(i){return new bE(this.moduleType,i)}}function DE(n,i,o,l){return function AE(n,i,o,l,h,m){const I=i+o;return $a(n,I,h)?Qu(n,I+1,m?l.call(m,h):l(h)):$g(n,I+1)}(Be(),Bn(),n,i,o,l)}function SE(n,i,o,l,h){return RE(Be(),Bn(),n,i,o,l,h)}function $g(n,i){const o=n[i];return o===ui?void 0:o}function RE(n,i,o,l,h,m,I){const M=i+o;return fc(n,M,h,m)?Qu(n,M+2,I?l.call(I,h,m):l(h,m)):$g(n,M+2)}function NE(n,i){const o=Xt();let l;const h=n+20;o.firstCreatePass?(l=function qw(n,i){if(i)for(let o=i.length-1;o>=0;o--){const l=i[o];if(n===l.name)return l}}(i,o.pipeRegistry),o.data[h]=l,l.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,l.onDestroy)):l=o.data[h];const m=l.factory||(l.factory=qr(l.type)),I=Vn(Nh);try{const M=wl(!1),k=m();return wl(M),function ag(n,i,o,l){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=l}(o,Be(),h,k),k}finally{Vn(I)}}function OE(n,i,o,l){const h=n+20,m=Be(),I=br(m,h);return function Gg(n,i){return n[1].data[i].pure}(m,h)?RE(m,Bn(),i,I.transform,o,l,I):I.transform(o,l)}function T0(n){return i=>{setTimeout(n,void 0,i)}}const Vc=class Xw extends y.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,l){var h,m,I;let M=i,k=o||(()=>null),re=l;if(i&&"object"==typeof i){const Ae=i;M=null===(h=Ae.next)||void 0===h?void 0:h.bind(Ae),k=null===(m=Ae.error)||void 0===m?void 0:m.bind(Ae),re=null===(I=Ae.complete)||void 0===I?void 0:I.bind(Ae)}this.__isAsync&&(k=T0(k),M&&(M=T0(M)),re&&(re=T0(re)));const ae=super.subscribe({next:M,error:k,complete:re});return i instanceof V.w0&&i.add(ae),ae}};function eC(){return this._results[iu()]()}class b0{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=iu(),l=b0.prototype;l[o]||(l[o]=eC)}get changes(){return this._changes||(this._changes=new Vc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const l=this;l.dirty=!1;const h=Ls(i);(this._changesDetected=!function Za(n,i,o){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let h=n[l],m=i[l];if(o&&(h=o(h),m=o(m)),m!==h)return!1}return!0}(l._results,h,o))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Wg=(()=>{class n{}return n.__NG_ELEMENT_ID__=rC,n})();const tC=Wg,nC=class extends tC{constructor(i,o,l){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(i){const o=this._declarationTContainer.tViews,l=Tc(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(o)),Wu(o,l,i),new g(l)}};function rC(){return __(W(),Be())}function __(n,i){return 4&n.type?new nC(i,n,fd(n,i)):null}let v_=(()=>{class n{}return n.__NG_ELEMENT_ID__=iC,n})();function iC(){return LE(W(),Be())}const sC=v_,kE=class extends sC{constructor(i,o,l){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=l}get element(){return fd(this._hostTNode,this._hostLView)}get injector(){return new jt(this._hostTNode,this._hostLView)}get parentInjector(){const i=D(this._hostTNode,this._hostLView);if(sa(i)){const o=Sa(i,this._hostLView),l=bo(i);return new jt(o[1].data[l+8],o)}return new jt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=FE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,l){const h=i.createEmbeddedView(o||{});return this.insert(h,l),h}createComponent(i,o,l,h,m){const I=i&&!function Ma(n){return"function"==typeof n}(i);let M;if(I)M=o;else{const Ae=o||{};M=Ae.index,l=Ae.injector,h=Ae.projectableNodes,m=Ae.ngModuleRef}const k=I?i:new It(xe(i)),re=l||this.parentInjector;if(!m&&null==k.ngModule){const et=(I?re:this.parentInjector).get(Wr,null);et&&(m=et)}const ae=k.create(re,h,void 0,m);return this.insert(ae.hostView,M),ae}insert(i,o){const l=i._lView,h=l[1];if(function _i(n){return Et(n[3])}(l)){const ae=this.indexOf(i);if(-1!==ae)this.detach(ae);else{const Ae=l[3],et=new kE(Ae,Ae[6],Ae[3]);et.detach(et.indexOf(i))}}const m=this._adjustIndex(o),I=this._lContainer;!function pd(n,i,o,l){const h=10+l,m=o.length;l>0&&(o[h-1][4]=i),l<m-10?(i[4]=o[h],ql(o,10+l,i)):(o.push(i),i[4]=null),i[3]=o;const I=i[17];null!==I&&o!==I&&function gi(n,i){const o=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===o?n[9]=[i]:o.push(i)}(I,i);const M=i[19];null!==M&&M.insertView(n),i[2]|=128}(h,l,I,m);const M=Pn(m,I),k=l[11],re=C(k,I[7]);return null!==re&&function wa(n,i,o,l,h,m){l[0]=h,l[6]=i,ts(n,l,o,1,h,m)}(h,I[6],k,l,re,M),i.attachToViewContainerRef(),ql(D0(I),m,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=FE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),l=nl(this._lContainer,o);l&&(Fl(D0(this._lContainer),o),wu(l[1],l))}detach(i){const o=this._adjustIndex(i,-1),l=nl(this._lContainer,o);return l&&null!=Fl(D0(this._lContainer),o)?new g(l):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function FE(n){return n[8]}function D0(n){return n[8]||(n[8]=[])}function LE(n,i){let o;const l=i[n.index];if(Et(l))o=l;else{let h;if(8&n.type)h=$(l);else{const m=i[11];h=m.createComment("");const I=Kt(n,i);Z(m,C(m,I),h,function p(n,i){return si(n)?n.nextSibling(i):i.nextSibling}(m,I),!1)}i[n.index]=o=If(l,i,h,n),yh(i,o)}return new kE(o,n,i)}class S0{constructor(i){this.queryList=i,this.matches=null}clone(){return new S0(this.queryList)}setDirty(){this.queryList.setDirty()}}class A0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const l=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let m=0;m<l;m++){const I=o.getByIndex(m);h.push(this.queries[I.indexInDeclarationView].clone())}return new A0(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==zE(i,o).matches&&this.queries[o].setDirty()}}class VE{constructor(i,o,l=null){this.predicate=i,this.flags=o,this.read=l}}class R0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let l=0;l<this.length;l++){const h=null!==o?o.length:0,m=this.getByIndex(l).embeddedTView(i,h);m&&(m.indexInDeclarationView=l,null!==o?o.push(m):o=[m])}return null!==o?new R0(o):null}template(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class M0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new M0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const m=l[h];this.matchTNodeWithReadOption(i,o,lC(o,m)),this.matchTNodeWithReadOption(i,o,Jt(o,i,m,!1,!1))}else l===Wg?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Jt(o,i,l,!1,!1))}matchTNodeWithReadOption(i,o,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===qd||h===v_||h===Wg&&4&o.type)this.addMatch(o.index,-2);else{const m=Jt(o,i,h,!1,!1);null!==m&&this.addMatch(o.index,m)}else this.addMatch(o.index,l)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function lC(n,i){const o=n.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===i)return o[l+1];return null}function cC(n,i,o,l){return-1===o?function uC(n,i){return 11&n.type?fd(n,i):4&n.type?__(n,i):null}(i,n):-2===o?function dC(n,i,o){return o===qd?fd(i,n):o===Wg?__(i,n):o===v_?LE(i,n):void 0}(n,i,l):Wt(n,n[1],o,i)}function UE(n,i,o,l){const h=i[19].queries[l];if(null===h.matches){const m=n.data,I=o.matches,M=[];for(let k=0;k<I.length;k+=2){const re=I[k];M.push(re<0?null:cC(i,m[re],I[k+1],o.metadata.read))}h.matches=M}return h.matches}function x0(n,i,o,l){const h=n.queries.getByIndex(o),m=h.matches;if(null!==m){const I=UE(n,i,h,o);for(let M=0;M<m.length;M+=2){const k=m[M];if(k>0)l.push(I[M/2]);else{const re=m[M+1],ae=i[-k];for(let Ae=10;Ae<ae.length;Ae++){const et=ae[Ae];et[17]===et[3]&&x0(et[1],et,re,l)}if(null!==ae[9]){const Ae=ae[9];for(let et=0;et<Ae.length;et++){const wt=Ae[et];x0(wt[1],wt,re,l)}}}}}return l}function BE(n){const i=Be(),o=Xt(),l=Gs();Mo(l+1);const h=zE(o,l);if(n.dirty&&Sr(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const m=h.crossesNgTemplate?x0(o,i,l,[]):UE(o,i,h,l);n.reset(m,E0),n.notifyOnChanges()}return!0}return!1}function jE(n,i,o){const l=Xt();l.firstCreatePass&&(WE(l,new VE(n,i,o),-1),2==(2&i)&&(l.staticViewQueries=!0)),GE(l,Be(),i)}function HE(n,i,o,l){const h=Xt();if(h.firstCreatePass){const m=W();WE(h,new VE(i,o,l),m.index),function fC(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}GE(h,Be(),o)}function $E(){return function hC(n,i){return n[19].queries[i].queryList}(Be(),Gs())}function GE(n,i,o){const l=new b0(4==(4&o));hh(n,i,l,l.destroy),null===i[19]&&(i[19]=new A0),i[19].queries.push(new S0(l))}function WE(n,i,o){null===n.queries&&(n.queries=new R0),n.queries.track(new M0(i,o))}function zE(n,i){return n.queries.getByIndex(i)}function KE(n,i){return __(n,i)}function C_(...n){}const cw=new Yi("Application Initializer");let L0=(()=>{class n{constructor(o){this.appInits=o,this.resolve=C_,this.reject=C_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Qf(m))o.push(m);else if(Xf(m)){const I=new Promise((M,k)=>{m.subscribe({complete:M,error:k})});o.push(I)}}Promise.all(o).then(()=>{l()}).catch(h=>{this.reject(h)}),0===o.length&&l(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Vs(cw,8))},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dw=new Yi("AppId",{providedIn:"root",factory:function hw(){return`${V0()}${V0()}${V0()}`}});function V0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fw=new Yi("Platform Initializer"),MC=new Yi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pw=new Yi("appBootstrapListener");let xC=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const U0=new Yi("LocaleId",{providedIn:"root",factory:()=>Vl(U0,yn.Optional|yn.SkipSelf)||function PC(){return"undefined"!=typeof $localize&&$localize.locale||Gh}()}),NC=new Yi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class OC{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let kC=(()=>{class n{compileModuleSync(o){return new I0(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),m=Al(an(o).declarations).reduce((I,M)=>{const k=xe(M);return k&&I.push(new It(k)),I},[]);return new OC(l,m)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LC=(()=>Promise.resolve(0))();function B0(n){"undefined"==typeof Zone?LC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class _c{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vc(!1),this.onMicrotaskEmpty=new Vc(!1),this.onStable=new Vc(!1),this.onError=new Vc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&o,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function VC(){let n=Un.requestAnimationFrame,i=Un.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function jC(n){const i=()=>{!function BC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Un,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,H0(n),n.isCheckStableRunning=!0,j0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),H0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,h,m,I,M)=>{try{return gw(n),o.invokeTask(h,m,I,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&i(),mw(n)}},onInvoke:(o,l,h,m,I,M,k)=>{try{return gw(n),o.invoke(h,m,I,M,k)}finally{n.shouldCoalesceRunChangeDetection&&i(),mw(n)}},onHasTask:(o,l,h,m)=>{o.hasTask(h,m),l===h&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,H0(n),j0(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(o,l,h,m)=>(o.handleError(h,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_c.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_c.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,l){return this._inner.run(i,o,l)}runTask(i,o,l,h){const m=this._inner,I=m.scheduleEventTask("NgZoneEvent: "+h,i,UC,C_,C_);try{return m.runTask(I,o,l)}finally{m.cancelTask(I)}}runGuarded(i,o,l){return this._inner.runGuarded(i,o,l)}runOutsideAngular(i){return this._outer.run(i)}}const UC={};function j0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function H0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function gw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mw(n){n._nesting--,j0(n)}class HC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vc,this.onMicrotaskEmpty=new Vc,this.onStable=new Vc,this.onError=new Vc}run(i,o,l){return i.apply(o,l)}runGuarded(i,o,l){return i.apply(o,l)}runOutsideAngular(i){return i()}runTask(i,o,l,h){return i.apply(o,l)}}let yw=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_c.assertNotInAngularZone(),B0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())B0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,h){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==m),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:m,updateCb:h})}whenStable(o,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,l,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(Vs(_c))},n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})(),$C=(()=>{class n{constructor(){this._applications=new Map,$0.addToWindow(this)}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return $0.findTestabilityInTree(this,o,l)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class GC{addToWindow(i){}findTestabilityInTree(i,o,l){return null}}function WC(n){$0=n}let $0=new GC,ef=null;const _w=new Yi("AllowMultipleToken"),vw=new Yi("PlatformOnDestroy");class qC{constructor(i,o){this.name=i,this.token=o}}function Ew(n,i,o=[]){const l=`Platform: ${i}`,h=new Yi(l);return(m=[])=>{let I=G0();if(!I||I.injector.get(_w,!1)){const M=[...o,...m,{provide:h,useValue:!0}];n?n(M):function ZC(n){if(ef&&!ef.get(_w,!1))throw new _t(400,"");ef=n;const i=n.get(ww),o=n.get(fw,null);o&&o.forEach(l=>l())}(function QC(n=[],i){return Zu.create({name:i,providers:[{provide:Eh,useValue:"platform"},{provide:vw,useValue:()=>ef=null},...n]})}(M,l))}return function YC(n){const i=G0();if(!i)throw new _t(401,"");return i}()}}function G0(){var n;return null!==(n=null==ef?void 0:ef.get(ww))&&void 0!==n?n:null}let ww=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const M=function JC(n,i){let o;return o="noop"===n?new HC:("zone.js"===n?void 0:n)||new _c({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),k=[{provide:_c,useValue:M}];return M.run(()=>{const re=Zu.create({providers:k,parent:this.injector,name:o.moduleType.name}),ae=o.create(re),Ae=ae.injector.get($c,null);if(!Ae)throw new _t(402,"");return M.runOutsideAngular(()=>{const et=M.onError.subscribe({next:wt=>{Ae.handleError(wt)}});ae.onDestroy(()=>{z0(this._modules,ae),et.unsubscribe()})}),function XC(n,i,o){try{const l=o();return Qf(l)?l.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(Ae,M,()=>{const et=ae.injector.get(L0);return et.runInitializers(),et.donePromise.then(()=>(function wE(n){Mn(n,"Expected localeId to be defined"),"string"==typeof n&&($v=n.toLowerCase().replace(/_/g,"-"))}(ae.injector.get(U0,Gh)||Gh),this._moduleDoBootstrap(ae),ae))})})}bootstrapModule(o,l=[]){const h=Cw({},l);return function zC(n,i,o){const l=new I0(o);return Promise.resolve(l)}(0,0,o).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(o){const l=o.injector.get(W0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new _t(403,"");o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _t(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(vw,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Vs(Zu))},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Cw(n,i){return Array.isArray(i)?i.reduce(Cw,n):Object.assign(Object.assign({},n),i)}let W0=(()=>{class n{constructor(o,l,h,m){this._zone=o,this._injector=l,this._exceptionHandler=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new ee.y(k=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{k.next(this._stable),k.complete()})}),M=new ee.y(k=>{let re;this._zone.runOutsideAngular(()=>{re=this._zone.onStable.subscribe(()=>{_c.assertNotInAngularZone(),B0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,k.next(!0))})})});const ae=this._zone.onUnstable.subscribe(()=>{_c.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{k.next(!1)}))});return()=>{re.unsubscribe(),ae.unsubscribe()}});this.isStable=(0,ie.T)(I,M.pipe((0,ke.B)()))}bootstrap(o,l){if(!this._initStatus.done)throw new _t(405,"");let h;h=o instanceof p_?o:this._injector.get(Xh).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const m=function KC(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Wr),M=h.create(Zu.NULL,[],l||h.selector,m),k=M.location.nativeElement,re=M.injector.get(yw,null),ae=re&&M.injector.get($C);return re&&ae&&ae.registerApplication(k,re),M.onDestroy(()=>{this.detachView(M.hostView),z0(this.components,M),ae&&ae.unregisterApplication(k)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new _t(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;z0(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(pw,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(Vs(_c),Vs(Zu),Vs($c),Vs(L0))},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z0(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let Tw=!0,bw=!1;function tI(){return bw=!0,Tw}function nI(){if(bw)throw new Error("Cannot enable prod mode after platform setup.");Tw=!1}let rI=(()=>{class n{}return n.__NG_ELEMENT_ID__=iI,n})();function iI(n){return function sI(n,i,o){if(Dn(n)&&!o){const l=fr(n.index,i);return new g(l,l)}return 47&n.type?new g(i[16],i):null}(W(),Be(),16==(16&n))}class Rw{constructor(){}supports(i){return Yu(i)}create(i){return new dI(i)}}const cI=(n,i)=>i;class dI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||cI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,l=this._removalsHead,h=0,m=null;for(;o||l;){const I=!l||o&&o.currentIndex<xw(l,h,m)?o:l,M=xw(I,h,m),k=I.currentIndex;if(I===l)h--,l=l._nextRemoved;else if(o=o._next,null==I.previousIndex)h++;else{m||(m=[]);const re=M-h,ae=k-h;if(re!=ae){for(let et=0;et<re;et++){const wt=et<m.length?m[et]:m[et]=0,Qt=wt+et;ae<=Qt&&Qt<re&&(m[et]=wt+1)}m[I.previousIndex]=ae-re}}M!==k&&i(I,M,k)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Yu(i))throw new _t(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,m,I,o=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let M=0;M<this.length;M++)m=i[M],I=this._trackByFn(M,m),null!==o&&Object.is(o.trackById,I)?(l&&(o=this._verifyReinsertion(o,m,I,M)),Object.is(o.item,m)||this._addIdentityChange(o,m)):(o=this._mismatch(o,m,I,M),l=!0),o=o._next}else h=0,function Ym(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[iu()]();let l;for(;!(l=o.next()).done;)i(l.value)}}(i,M=>{I=this._trackByFn(h,M),null!==o&&Object.is(o.trackById,I)?(l&&(o=this._verifyReinsertion(o,M,I,h)),Object.is(o.item,M)||this._addIdentityChange(o,M)):(o=this._mismatch(o,M,I,h),l=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,l,h){let m;return null===i?m=this._itTail:(m=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,m,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,m,h)):i=this._addAfter(new hI(o,l),m,h),i}_verifyReinsertion(i,o,l,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?i=this._reinsertAfter(m,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,m=i._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(i,o,l),this._addToMoves(i,l),i}_moveAfter(i,o,l){return this._unlink(i),this._insertAfter(i,o,l),this._addToMoves(i,l),i}_addAfter(i,o,l){return this._insertAfter(i,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,l){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Mw),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,l=i._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class hI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const o=i._prevDup,l=i._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class Mw{constructor(){this.map=new Map}put(i){const o=i.trackById;let l=this.map.get(o);l||(l=new fI,this.map.set(o,l)),l.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xw(n,i,o){const l=n.previousIndex;if(null===l)return l;let h=0;return o&&l<o.length&&(h=o[l]),l+i+h}class Pw{constructor(){}supports(i){return i instanceof Map||Dc(i)}create(){return new pI}}class pI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Dc(i)))throw new _t(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const m=this._getOrCreateRecordForKey(h,l);o=this._insertBeforeOrAppend(o,m)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const l=i._prev;return o._next=i,o._prev=l,i._prev=o,l&&(l._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const m=h._prev,I=h._next;return m&&(m._next=I),I&&(I._prev=m),h._next=null,h._prev=null,h}const l=new gI(i);return this._records.set(i,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(l=>o(i[l],l))}}class gI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Nw(){return new Q0([new Rw])}let Q0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(null!=l){const h=l.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||Nw()),deps:[[n,new Ul,new gu]]}}find(o){const l=this.factories.find(h=>h.supports(o));if(null!=l)return l;throw new _t(901,"")}}return n.\u0275prov=Me({token:n,providedIn:"root",factory:Nw}),n})();function Ow(){return new J0([new Pw])}let J0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(l){const h=l.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||Ow()),deps:[[n,new Ul,new gu]]}}find(o){const l=this.factories.find(m=>m.supports(o));if(l)return l;throw new _t(901,"")}}return n.\u0275prov=Me({token:n,providedIn:"root",factory:Ow}),n})();const _I=Ew(null,"core",[]);let vI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Vs(W0))},n.\u0275mod=me({type:n}),n.\u0275inj=Ne({}),n})()},2382:(hn,ct,U)=>{U.d(ct,{Fj:()=>at,qu:()=>ks,u:()=>ji,cw:()=>dr,sg:()=>xi,u5:()=>ir,JJ:()=>We,JL:()=>ze,UX:()=>Rs,kI:()=>Ht,_Y:()=>Ns});var y=U(5e3),V=U(9808),ee=U(8996),ie=U(8306),ke=U(4742),je=U(8421),Xe=U(7669),He=U(5403),nt=U(3268),Ie=U(1810),Qe=U(4004);let St=(()=>{class q{constructor(F,ue){this._renderer=F,this._elementRef=ue,this.onChange=Be=>{},this.onTouched=()=>{}}setProperty(F,ue){this._renderer.setProperty(this._elementRef.nativeElement,F,ue)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return q.\u0275fac=function(F){return new(F||q)(y.Y36(y.Qsj),y.Y36(y.SBq))},q.\u0275dir=y.lG2({type:q}),q})(),vt=(()=>{class q extends St{}return q.\u0275fac=function(){let j;return function(ue){return(j||(j=y.n5z(q)))(ue||q)}}(),q.\u0275dir=y.lG2({type:q,features:[y.qOj]}),q})();const _t=new y.OlP("NgValueAccessor"),ot={provide:_t,useExisting:(0,y.Gpc)(()=>at),multi:!0},qt=new y.OlP("CompositionEventMode");let at=(()=>{class q extends St{constructor(F,ue,Be){super(F,ue),this._compositionMode=Be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ge(){const q=(0,V.q)()?(0,V.q)().getUserAgent():"";return/android (\d+)/.test(q.toLowerCase())}())}writeValue(F){this.setProperty("value",null==F?"":F)}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return q.\u0275fac=function(F){return new(F||q)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(qt,8))},q.\u0275dir=y.lG2({type:q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,ue){1&F&&y.NdJ("input",function(Xt){return ue._handleInput(Xt.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Xt){return ue._compositionEnd(Xt.target.value)})},features:[y._Bn([ot]),y.qOj]}),q})();function De(q){return null==q||0===q.length}function Je(q){return null!=q&&"number"==typeof q.length}const Ct=new y.OlP("NgValidators"),bt=new y.OlP("NgAsyncValidators"),Se=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ht{static min(j){return function Nt(q){return j=>{if(De(j.value)||De(q))return null;const F=parseFloat(j.value);return!isNaN(F)&&F<q?{min:{min:q,actual:j.value}}:null}}(j)}static max(j){return function Rn(q){return j=>{if(De(j.value)||De(q))return null;const F=parseFloat(j.value);return!isNaN(F)&&F>q?{max:{max:q,actual:j.value}}:null}}(j)}static required(j){return function En(q){return De(q.value)?{required:!0}:null}(j)}static requiredTrue(j){return function Ln(q){return!0===q.value?null:{required:!0}}(j)}static email(j){return function un(q){return De(q.value)||Se.test(q.value)?null:{email:!0}}(j)}static minLength(j){return function sn(q){return j=>De(j.value)||!Je(j.value)?null:j.value.length<q?{minlength:{requiredLength:q,actualLength:j.value.length}}:null}(j)}static maxLength(j){return function Ot(q){return j=>Je(j.value)&&j.value.length>q?{maxlength:{requiredLength:q,actualLength:j.value.length}}:null}(j)}static pattern(j){return function or(q){if(!q)return Mn;let j,F;return"string"==typeof q?(F="","^"!==q.charAt(0)&&(F+="^"),F+=q,"$"!==q.charAt(q.length-1)&&(F+="$"),j=new RegExp(F)):(F=q.toString(),j=q),ue=>{if(De(ue.value))return null;const Be=ue.value;return j.test(Be)?null:{pattern:{requiredPattern:F,actualValue:Be}}}}(j)}static nullValidator(j){return null}static compose(j){return Ne(j)}static composeAsync(j){return Zt(j)}}function Mn(q){return null}function cn(q){return null!=q}function it(q){const j=(0,y.QGY)(q)?(0,ee.D)(q):q;return(0,y.CqO)(j),j}function tt(q){let j={};return q.forEach(F=>{j=null!=F?Object.assign(Object.assign({},j),F):j}),0===Object.keys(j).length?null:j}function Ce(q,j){return j.map(F=>F(q))}function Ee(q){return q.map(j=>function Me(q){return!q.validate}(j)?j:F=>j.validate(F))}function Ne(q){if(!q)return null;const j=q.filter(cn);return 0==j.length?null:function(F){return tt(Ce(F,j))}}function st(q){return null!=q?Ne(Ee(q)):null}function Zt(q){if(!q)return null;const j=q.filter(cn);return 0==j.length?null:function(F){return function ve(...q){const j=(0,Xe.jO)(q),{args:F,keys:ue}=(0,ke.D)(q),Be=new ie.y(Xt=>{const{length:Yr}=F;if(!Yr)return void Xt.complete();const W=new Array(Yr);let K=Yr,pe=Yr;for(let be=0;be<Yr;be++){let Ke=!1;(0,je.Xf)(F[be]).subscribe((0,He.x)(Xt,yt=>{Ke||(Ke=!0,pe--),W[be]=yt},()=>K--,void 0,()=>{(!K||!Ke)&&(pe||Xt.next(ue?(0,Ie.n)(ue,W):W),Xt.complete())}))}});return j?Be.pipe((0,nt.Z)(j)):Be}(Ce(F,j).map(it)).pipe((0,Qe.U)(tt))}}function pn(q){return null!=q?Zt(Ee(q)):null}function wn(q,j){return null===q?[j]:Array.isArray(q)?[...q,j]:[q,j]}function kn(q){return q._rawValidators}function ur(q){return q._rawAsyncValidators}function _r(q){return q?Array.isArray(q)?q:[q]:[]}function jn(q,j){return Array.isArray(q)?q.includes(j):q===j}function Jn(q,j){const F=_r(j);return _r(q).forEach(Be=>{jn(F,Be)||F.push(Be)}),F}function yn(q,j){return _r(j).filter(F=>!jn(q,F))}class nr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(j){this._rawValidators=j||[],this._composedValidatorFn=st(this._rawValidators)}_setAsyncValidators(j){this._rawAsyncValidators=j||[],this._composedAsyncValidatorFn=pn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(j){this._onDestroyCallbacks.push(j)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(j=>j()),this._onDestroyCallbacks=[]}reset(j){this.control&&this.control.reset(j)}hasError(j,F){return!!this.control&&this.control.hasError(j,F)}getError(j,F){return this.control?this.control.getError(j,F):null}}class On extends nr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vn extends nr{get formDirective(){return null}get path(){return null}}class ti{constructor(j){this._cd=j}is(j){var F,ue,Be;return"submitted"===j?!!(null===(F=this._cd)||void 0===F?void 0:F.submitted):!!(null===(Be=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===Be?void 0:Be[j])}}let We=(()=>{class q extends ti{constructor(F){super(F)}}return q.\u0275fac=function(F){return new(F||q)(y.Y36(On,2))},q.\u0275dir=y.lG2({type:q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,ue){2&F&&y.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[y.qOj]}),q})(),ze=(()=>{class q extends ti{constructor(F){super(F)}}return q.\u0275fac=function(F){return new(F||q)(y.Y36(Vn,10))},q.\u0275dir=y.lG2({type:q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,ue){2&F&&y.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[y.qOj]}),q})();function ni(q,j){Ue(q,j),j.valueAccessor.writeValue(q.value),function me(q,j){j.valueAccessor.registerOnChange(F=>{q._pendingValue=F,q._pendingChange=!0,q._pendingDirty=!0,"change"===q.updateOn&&z(q,j)})}(q,j),function te(q,j){const F=(ue,Be)=>{j.valueAccessor.writeValue(ue),Be&&j.viewToModelUpdate(ue)};q.registerOnChange(F),j._registerOnDestroy(()=>{q._unregisterOnChange(F)})}(q,j),function ye(q,j){j.valueAccessor.registerOnTouched(()=>{q._pendingTouched=!0,"blur"===q.updateOn&&q._pendingChange&&z(q,j),"submit"!==q.updateOn&&q.markAsTouched()})}(q,j),function Br(q,j){if(j.valueAccessor.setDisabledState){const F=ue=>{j.valueAccessor.setDisabledState(ue)};q.registerOnDisabledChange(F),j._registerOnDestroy(()=>{q._unregisterOnDisabledChange(F)})}}(q,j)}function Vi(q,j,F=!0){const ue=()=>{};j.valueAccessor&&(j.valueAccessor.registerOnChange(ue),j.valueAccessor.registerOnTouched(ue)),Pe(q,j),q&&(j._invokeOnDestroyCallbacks(),q._registerOnCollectionChange(()=>{}))}function Mi(q,j){q.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(j)})}function Ue(q,j){const F=kn(q);null!==j.validator?q.setValidators(wn(F,j.validator)):"function"==typeof F&&q.setValidators([F]);const ue=ur(q);null!==j.asyncValidator?q.setAsyncValidators(wn(ue,j.asyncValidator)):"function"==typeof ue&&q.setAsyncValidators([ue]);const Be=()=>q.updateValueAndValidity();Mi(j._rawValidators,Be),Mi(j._rawAsyncValidators,Be)}function Pe(q,j){let F=!1;if(null!==q){if(null!==j.validator){const Be=kn(q);if(Array.isArray(Be)&&Be.length>0){const Xt=Be.filter(Yr=>Yr!==j.validator);Xt.length!==Be.length&&(F=!0,q.setValidators(Xt))}}if(null!==j.asyncValidator){const Be=ur(q);if(Array.isArray(Be)&&Be.length>0){const Xt=Be.filter(Yr=>Yr!==j.asyncValidator);Xt.length!==Be.length&&(F=!0,q.setAsyncValidators(Xt))}}}const ue=()=>{};return Mi(j._rawValidators,ue),Mi(j._rawAsyncValidators,ue),F}function z(q,j){q._pendingDirty&&q.markAsDirty(),q.setValue(q._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(q._pendingValue),q._pendingChange=!1}function Tt(q,j){const F=q.indexOf(j);F>-1&&q.splice(F,1)}const Rt="VALID",ln="INVALID",bn="PENDING",rr="DISABLED";function yr(q){return(Ps(q)?q.validators:q)||null}function ri(q){return Array.isArray(q)?st(q):q||null}function Hr(q,j){return(Ps(j)?j.asyncValidators:q)||null}function gs(q){return Array.isArray(q)?pn(q):q||null}function Ps(q){return null!=q&&!Array.isArray(q)&&"object"==typeof q}const lr=q=>q instanceof Xi,bi=q=>q instanceof dr,os=q=>q instanceof Xr;function Ys(q){return lr(q)?q.value:q.getRawValue()}function Cr(q,j){const F=bi(q),ue=q.controls;if(!(F?Object.keys(ue):ue).length)throw new y.vHH(1e3,"");if(!ue[j])throw new y.vHH(1001,"")}function _n(q,j){bi(q),q._forEachChild((ue,Be)=>{if(void 0===j[Be])throw new y.vHH(1002,"")})}class er{constructor(j,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=j,this._rawAsyncValidators=F,this._composedValidatorFn=ri(this._rawValidators),this._composedAsyncValidatorFn=gs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===Rt}get invalid(){return this.status===ln}get pending(){return this.status==bn}get disabled(){return this.status===rr}get enabled(){return this.status!==rr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._rawValidators=j,this._composedValidatorFn=ri(j)}setAsyncValidators(j){this._rawAsyncValidators=j,this._composedAsyncValidatorFn=gs(j)}addValidators(j){this.setValidators(Jn(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(Jn(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(yn(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(yn(j,this._rawAsyncValidators))}hasValidator(j){return jn(this._rawValidators,j)}hasAsyncValidator(j){return jn(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=bn,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=rr,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:F})),this._onDisabledChange.forEach(ue=>ue(!0))}enable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=Rt,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:F})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rt||this.status===bn)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rr:Rt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=bn,this._hasOwnPendingAsyncValidator=!0;const F=it(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,F={}){this.errors=j,this._updateControlsErrors(!1!==F.emitEvent)}get(j){return function Kr(q,j,F){if(null==j||(Array.isArray(j)||(j=j.split(F)),Array.isArray(j)&&0===j.length))return null;let ue=q;return j.forEach(Be=>{ue=bi(ue)?ue.controls.hasOwnProperty(Be)?ue.controls[Be]:null:os(ue)&&ue.at(Be)||null}),ue}(this,j,".")}getError(j,F){const ue=F?this.get(F):this;return ue&&ue.errors?ue.errors[j]:null}hasError(j,F){return!!this.getError(j,F)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?rr:this.errors?ln:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bn)?bn:this._anyControlsHaveStatus(ln)?ln:Rt}_anyControlsHaveStatus(j){return this._anyControls(F=>F.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_isBoxedValue(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){Ps(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Xi extends er{constructor(j=null,F,ue){super(yr(F),Hr(ue,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(j),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ps(F)&&F.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(j)?j.value:j)}setValue(j,F={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(j,F={}){this.setValue(j,F)}reset(j=this.defaultValue,F={}){this._applyFormState(j),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){Tt(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){Tt(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){this._isBoxedValue(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}}class dr extends er{constructor(j,F,ue){super(yr(F),Hr(ue,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,F){return this.controls[j]?this.controls[j]:(this.controls[j]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(j,F,ue={}){this.registerControl(j,F),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(j,F={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(j,F,ue={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],F&&this.registerControl(j,F),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,F={}){_n(this,j),Object.keys(j).forEach(ue=>{Cr(this,ue),this.controls[ue].setValue(j[ue],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(Object.keys(j).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue(j[ue],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j={},F={}){this._forEachChild((ue,Be)=>{ue.reset(j[Be],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(j,F,ue)=>(j[ue]=Ys(F),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(F,ue)=>!!ue._syncPendingControls()||F);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){Object.keys(this.controls).forEach(F=>{const ue=this.controls[F];ue&&j(ue,F)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const F of Object.keys(this.controls)){const ue=this.controls[F];if(this.contains(F)&&j(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},(j,F,ue)=>((F.enabled||this.disabled)&&(j[ue]=F.value),j))}_reduceChildren(j,F){let ue=j;return this._forEachChild((Be,Xt)=>{ue=F(ue,Be,Xt)}),ue}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Xr extends er{constructor(j,F,ue){super(yr(F),Hr(ue,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(j){return this.controls[j]}push(j,F={}){this.controls.push(j),this._registerControl(j),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(j,F,ue={}){this.controls.splice(j,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(j,F={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(j,F,ue={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),F&&(this.controls.splice(j,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(j,F={}){_n(this,j),j.forEach((ue,Be)=>{Cr(this,Be),this.at(Be).setValue(ue,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(j.forEach((ue,Be)=>{this.at(Be)&&this.at(Be).patchValue(ue,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j=[],F={}){this._forEachChild((ue,Be)=>{ue.reset(j[Be],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(j=>Ys(j))}clear(j={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:j.emitEvent}))}_syncPendingControls(){let j=this.controls.reduce((F,ue)=>!!ue._syncPendingControls()||F,!1);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){this.controls.forEach((F,ue)=>{j(F,ue)})}_updateValue(){this.value=this.controls.filter(j=>j.enabled||this.disabled).map(j=>j.value)}_anyControls(j){return this.controls.some(F=>F.enabled&&j(F))}_setUpControls(){this._forEachChild(j=>this._registerControl(j))}_allControlsDisabled(){for(const j of this.controls)if(j.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(j){j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)}}let Ns=(()=>{class q{}return q.\u0275fac=function(F){return new(F||q)},q.\u0275dir=y.lG2({type:q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),q})(),yo=(()=>{class q{}return q.\u0275fac=function(F){return new(F||q)},q.\u0275mod=y.oAB({type:q}),q.\u0275inj=y.cJS({}),q})();const Tr=new y.OlP("NgModelWithFormControlWarning"),ra={provide:Vn,useExisting:(0,y.Gpc)(()=>xi)};let xi=(()=>{class q extends Vn{constructor(F,ue){super(),this.validators=F,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(F),this._setAsyncValidators(ue)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const ue=this.form.get(F.path);return ni(ue,F),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),ue}getControl(F){return this.form.get(F.path)}removeControl(F){Vi(F.control||null,F,!1),Tt(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,ue){this.form.get(F.path).setValue(ue)}onSubmit(F){return this.submitted=!0,function ai(q,j){q._syncPendingControls(),j.forEach(F=>{const ue=F.control;"submit"===ue.updateOn&&ue._pendingChange&&(F.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(F),!1}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const ue=F.control,Be=this.form.get(F.path);ue!==Be&&(Vi(ue||null,F),lr(Be)&&(ni(Be,F),F.control=Be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const ue=this.form.get(F.path);(function se(q,j){Ue(q,j)})(ue,F),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const ue=this.form.get(F.path);ue&&function xe(q,j){return Pe(q,j)}(ue,F)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ue(this.form,this),this._oldForm&&Pe(this._oldForm,this)}_checkFormPresent(){}}return q.\u0275fac=function(F){return new(F||q)(y.Y36(Ct,10),y.Y36(bt,10))},q.\u0275dir=y.lG2({type:q,selectors:[["","formGroup",""]],hostBindings:function(F,ue){1&F&&y.NdJ("submit",function(Xt){return ue.onSubmit(Xt)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([ra]),y.qOj,y.TTD]}),q})();const as={provide:On,useExisting:(0,y.Gpc)(()=>ji)};let ji=(()=>{class q extends On{constructor(F,ue,Be,Xt,Yr){super(),this._ngModelWarningConfig=Yr,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(ue),this._setAsyncValidators(Be),this.valueAccessor=function Ci(q,j){if(!j)return null;let F,ue,Be;return Array.isArray(j),j.forEach(Xt=>{Xt.constructor===at?F=Xt:function tr(q){return Object.getPrototypeOf(q.constructor)===vt}(Xt)?ue=Xt:Be=Xt}),Be||ue||F||null}(0,Xt)}set isDisabled(F){}ngOnChanges(F){this._added||this._setUpControl(),function gr(q,j){if(!q.hasOwnProperty("model"))return!1;const F=q.model;return!!F.isFirstChange()||!Object.is(j,F.currentValue)}(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return function jr(q,j){return[...j.path,q]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return q._ngModelWarningSentOnce=!1,q.\u0275fac=function(F){return new(F||q)(y.Y36(Vn,13),y.Y36(Ct,10),y.Y36(bt,10),y.Y36(_t,10),y.Y36(Tr,8))},q.\u0275dir=y.lG2({type:q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([as]),y.qOj,y.TTD]}),q})(),di=(()=>{class q{}return q.\u0275fac=function(F){return new(F||q)},q.\u0275mod=y.oAB({type:q}),q.\u0275inj=y.cJS({imports:[[yo]]}),q})(),ir=(()=>{class q{}return q.\u0275fac=function(F){return new(F||q)},q.\u0275mod=y.oAB({type:q}),q.\u0275inj=y.cJS({imports:[di]}),q})(),Rs=(()=>{class q{static withConfig(F){return{ngModule:q,providers:[{provide:Tr,useValue:F.warnOnNgModelWithFormControl}]}}}return q.\u0275fac=function(F){return new(F||q)},q.\u0275mod=y.oAB({type:q}),q.\u0275inj=y.cJS({imports:[di]}),q})(),ks=(()=>{class q{group(F,ue=null){const Be=this._reduceControls(F);let W,Xt=null,Yr=null;return null!=ue&&(function ko(q){return void 0!==q.asyncValidators||void 0!==q.validators||void 0!==q.updateOn}(ue)?(Xt=null!=ue.validators?ue.validators:null,Yr=null!=ue.asyncValidators?ue.asyncValidators:null,W=null!=ue.updateOn?ue.updateOn:void 0):(Xt=null!=ue.validator?ue.validator:null,Yr=null!=ue.asyncValidator?ue.asyncValidator:null)),new dr(Be,{asyncValidators:Yr,updateOn:W,validators:Xt})}control(F,ue,Be){return new Xi(F,ue,Be)}array(F,ue,Be){const Xt=F.map(Yr=>this._createControl(Yr));return new Xr(Xt,ue,Be)}_reduceControls(F){const ue={};return Object.keys(F).forEach(Be=>{ue[Be]=this._createControl(F[Be])}),ue}_createControl(F){return lr(F)||bi(F)||os(F)?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}}return q.\u0275fac=function(F){return new(F||q)},q.\u0275prov=y.Yz7({token:q,factory:q.\u0275fac,providedIn:Rs}),q})()},2313:(hn,ct,U)=>{U.d(ct,{Dx:()=>Vn,H7:()=>Ue,b2:()=>jn,q6:()=>ur,se:()=>Ln});var y=U(9808),V=U(5e3);class ee extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ie extends ee{static makeCurrent(){(0,y.HT)(new ie)}onAndCancel(te,se,xe){return te.addEventListener(se,xe,!1),()=>{te.removeEventListener(se,xe,!1)}}dispatchEvent(te,se){te.dispatchEvent(se)}remove(te){te.parentNode&&te.parentNode.removeChild(te)}createElement(te,se){return(se=se||this.getDefaultDocument()).createElement(te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(te){return te.nodeType===Node.ELEMENT_NODE}isShadowRoot(te){return te instanceof DocumentFragment}getGlobalEventTarget(te,se){return"window"===se?window:"document"===se?te:"body"===se?te.body:null}getBaseHref(te){const se=function je(){return ke=ke||document.querySelector("base"),ke?ke.getAttribute("href"):null}();return null==se?null:function He(z){Xe=Xe||document.createElement("a"),Xe.setAttribute("href",z);const te=Xe.pathname;return"/"===te.charAt(0)?te:`/${te}`}(se)}resetBaseElement(){ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(te){return(0,y.Mx)(document.cookie,te)}}let Xe,ke=null;const nt=new V.OlP("TRANSITION_ID"),ve=[{provide:V.ip1,useFactory:function Ie(z,te,se){return()=>{se.get(V.CZH).donePromise.then(()=>{const xe=(0,y.q)(),pt=te.querySelectorAll(`style[ng-transition="${z}"]`);for(let Bt=0;Bt<pt.length;Bt++)xe.remove(pt[Bt])})}},deps:[nt,y.K0,V.zs3],multi:!0}];class Qe{static init(){(0,V.VLi)(new Qe)}addToWindow(te){V.dqk.getAngularTestability=(xe,pt=!0)=>{const Bt=te.findTestabilityInTree(xe,pt);if(null==Bt)throw new Error("Could not find testability for element.");return Bt},V.dqk.getAllAngularTestabilities=()=>te.getAllTestabilities(),V.dqk.getAllAngularRootElements=()=>te.getAllRootElements(),V.dqk.frameworkStabilizers||(V.dqk.frameworkStabilizers=[]),V.dqk.frameworkStabilizers.push(xe=>{const pt=V.dqk.getAllAngularTestabilities();let Bt=pt.length,an=!1;const Sn=function(gr){an=an||gr,Bt--,0==Bt&&xe(an)};pt.forEach(function(gr){gr.whenStable(Sn)})})}findTestabilityInTree(te,se,xe){if(null==se)return null;const pt=te.getTestability(se);return null!=pt?pt:xe?(0,y.q)().isShadowRoot(se)?this.findTestabilityInTree(te,se.host,!0):this.findTestabilityInTree(te,se.parentElement,!0):null}}let St=(()=>{class z{build(){return new XMLHttpRequest}}return z.\u0275fac=function(se){return new(se||z)},z.\u0275prov=V.Yz7({token:z,factory:z.\u0275fac}),z})();const vt=new V.OlP("EventManagerPlugins");let _t=(()=>{class z{constructor(se,xe){this._zone=xe,this._eventNameToPlugin=new Map,se.forEach(pt=>pt.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,xe,pt){return this._findPluginFor(xe).addEventListener(se,xe,pt)}addGlobalEventListener(se,xe,pt){return this._findPluginFor(xe).addGlobalEventListener(se,xe,pt)}getZone(){return this._zone}_findPluginFor(se){const xe=this._eventNameToPlugin.get(se);if(xe)return xe;const pt=this._plugins;for(let Bt=0;Bt<pt.length;Bt++){const an=pt[Bt];if(an.supports(se))return this._eventNameToPlugin.set(se,an),an}throw new Error(`No event manager plugin found for event ${se}`)}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(vt),V.LFG(V.R0b))},z.\u0275prov=V.Yz7({token:z,factory:z.\u0275fac}),z})();class Vt{constructor(te){this._doc=te}addGlobalEventListener(te,se,xe){const pt=(0,y.q)().getGlobalEventTarget(this._doc,te);if(!pt)throw new Error(`Unsupported event target ${pt} for event ${se}`);return this.addEventListener(pt,se,xe)}}let dt=(()=>{class z{constructor(){this._stylesSet=new Set}addStyles(se){const xe=new Set;se.forEach(pt=>{this._stylesSet.has(pt)||(this._stylesSet.add(pt),xe.add(pt))}),this.onStylesAdded(xe)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return z.\u0275fac=function(se){return new(se||z)},z.\u0275prov=V.Yz7({token:z,factory:z.\u0275fac}),z})(),ot=(()=>{class z extends dt{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,xe,pt){se.forEach(Bt=>{const an=this._doc.createElement("style");an.textContent=Bt,pt.push(xe.appendChild(an))})}addHost(se){const xe=[];this._addStylesToHost(this._stylesSet,se,xe),this._hostNodes.set(se,xe)}removeHost(se){const xe=this._hostNodes.get(se);xe&&xe.forEach(Ge),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((xe,pt)=>{this._addStylesToHost(se,pt,xe)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(Ge))}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(y.K0))},z.\u0275prov=V.Yz7({token:z,factory:z.\u0275fac}),z})();function Ge(z){(0,y.q)().remove(z)}const qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},at=/%COMP%/g;function Nt(z,te,se){for(let xe=0;xe<te.length;xe++){let pt=te[xe];Array.isArray(pt)?Nt(z,pt,se):(pt=pt.replace(at,z),se.push(pt))}return se}function Rn(z){return te=>{if("__ngUnwrap__"===te)return z;!1===z(te)&&(te.preventDefault(),te.returnValue=!1)}}let Ln=(()=>{class z{constructor(se,xe,pt){this.eventManager=se,this.sharedStylesHost=xe,this.appId=pt,this.rendererByCompId=new Map,this.defaultRenderer=new un(se)}createRenderer(se,xe){if(!se||!xe)return this.defaultRenderer;switch(xe.encapsulation){case V.ifc.Emulated:{let pt=this.rendererByCompId.get(xe.id);return pt||(pt=new or(this.eventManager,this.sharedStylesHost,xe,this.appId),this.rendererByCompId.set(xe.id,pt)),pt.applyToHost(se),pt}case 1:case V.ifc.ShadowDom:return new Mn(this.eventManager,this.sharedStylesHost,se,xe);default:if(!this.rendererByCompId.has(xe.id)){const pt=Nt(xe.id,xe.styles,[]);this.sharedStylesHost.addStyles(pt),this.rendererByCompId.set(xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(_t),V.LFG(ot),V.LFG(V.AFp))},z.\u0275prov=V.Yz7({token:z,factory:z.\u0275fac}),z})();class un{constructor(te){this.eventManager=te,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(te,se){return se?document.createElementNS(qt[se]||se,te):document.createElement(te)}createComment(te){return document.createComment(te)}createText(te){return document.createTextNode(te)}appendChild(te,se){te.appendChild(se)}insertBefore(te,se,xe){te&&te.insertBefore(se,xe)}removeChild(te,se){te&&te.removeChild(se)}selectRootElement(te,se){let xe="string"==typeof te?document.querySelector(te):te;if(!xe)throw new Error(`The selector "${te}" did not match any elements`);return se||(xe.textContent=""),xe}parentNode(te){return te.parentNode}nextSibling(te){return te.nextSibling}setAttribute(te,se,xe,pt){if(pt){se=pt+":"+se;const Bt=qt[pt];Bt?te.setAttributeNS(Bt,se,xe):te.setAttribute(se,xe)}else te.setAttribute(se,xe)}removeAttribute(te,se,xe){if(xe){const pt=qt[xe];pt?te.removeAttributeNS(pt,se):te.removeAttribute(`${xe}:${se}`)}else te.removeAttribute(se)}addClass(te,se){te.classList.add(se)}removeClass(te,se){te.classList.remove(se)}setStyle(te,se,xe,pt){pt&(V.JOm.DashCase|V.JOm.Important)?te.style.setProperty(se,xe,pt&V.JOm.Important?"important":""):te.style[se]=xe}removeStyle(te,se,xe){xe&V.JOm.DashCase?te.style.removeProperty(se):te.style[se]=""}setProperty(te,se,xe){te[se]=xe}setValue(te,se){te.nodeValue=se}listen(te,se,xe){return"string"==typeof te?this.eventManager.addGlobalEventListener(te,se,Rn(xe)):this.eventManager.addEventListener(te,se,Rn(xe))}}class or extends un{constructor(te,se,xe,pt){super(te),this.component=xe;const Bt=Nt(pt+"-"+xe.id,xe.styles,[]);se.addStyles(Bt),this.contentAttr=function Se(z){return"_ngcontent-%COMP%".replace(at,z)}(pt+"-"+xe.id),this.hostAttr=function Ht(z){return"_nghost-%COMP%".replace(at,z)}(pt+"-"+xe.id)}applyToHost(te){super.setAttribute(te,this.hostAttr,"")}createElement(te,se){const xe=super.createElement(te,se);return super.setAttribute(xe,this.contentAttr,""),xe}}class Mn extends un{constructor(te,se,xe,pt){super(te),this.sharedStylesHost=se,this.hostEl=xe,this.shadowRoot=xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Bt=Nt(pt.id,pt.styles,[]);for(let an=0;an<Bt.length;an++){const Sn=document.createElement("style");Sn.textContent=Bt[an],this.shadowRoot.appendChild(Sn)}}nodeOrShadowRoot(te){return te===this.hostEl?this.shadowRoot:te}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(te,se){return super.appendChild(this.nodeOrShadowRoot(te),se)}insertBefore(te,se,xe){return super.insertBefore(this.nodeOrShadowRoot(te),se,xe)}removeChild(te,se){return super.removeChild(this.nodeOrShadowRoot(te),se)}parentNode(te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(te)))}}let cn=(()=>{class z extends Vt{constructor(se){super(se)}supports(se){return!0}addEventListener(se,xe,pt){return se.addEventListener(xe,pt,!1),()=>this.removeEventListener(se,xe,pt)}removeEventListener(se,xe,pt){return se.removeEventListener(xe,pt)}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(y.K0))},z.\u0275prov=V.Yz7({token:z,factory:z.\u0275fac}),z})();const it=["alt","control","meta","shift"],Ce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Me={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ee={alt:z=>z.altKey,control:z=>z.ctrlKey,meta:z=>z.metaKey,shift:z=>z.shiftKey};let Ne=(()=>{class z extends Vt{constructor(se){super(se)}supports(se){return null!=z.parseEventName(se)}addEventListener(se,xe,pt){const Bt=z.parseEventName(xe),an=z.eventCallback(Bt.fullKey,pt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(se,Bt.domEventName,an))}static parseEventName(se){const xe=se.toLowerCase().split("."),pt=xe.shift();if(0===xe.length||"keydown"!==pt&&"keyup"!==pt)return null;const Bt=z._normalizeKey(xe.pop());let an="";if(it.forEach(gr=>{const tr=xe.indexOf(gr);tr>-1&&(xe.splice(tr,1),an+=gr+".")}),an+=Bt,0!=xe.length||0===Bt.length)return null;const Sn={};return Sn.domEventName=pt,Sn.fullKey=an,Sn}static getEventFullKey(se){let xe="",pt=function st(z){let te=z.key;if(null==te){if(te=z.keyIdentifier,null==te)return"Unidentified";te.startsWith("U+")&&(te=String.fromCharCode(parseInt(te.substring(2),16)),3===z.location&&Me.hasOwnProperty(te)&&(te=Me[te]))}return Ce[te]||te}(se);return pt=pt.toLowerCase()," "===pt?pt="space":"."===pt&&(pt="dot"),it.forEach(Bt=>{Bt!=pt&&Ee[Bt](se)&&(xe+=Bt+".")}),xe+=pt,xe}static eventCallback(se,xe,pt){return Bt=>{z.getEventFullKey(Bt)===se&&pt.runGuarded(()=>xe(Bt))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(y.K0))},z.\u0275prov=V.Yz7({token:z,factory:z.\u0275fac}),z})();const ur=(0,V.eFA)(V._c5,"browser",[{provide:V.Lbi,useValue:y.bD},{provide:V.g9A,useValue:function Zt(){ie.makeCurrent(),Qe.init()},multi:!0},{provide:y.K0,useFactory:function wn(){return(0,V.RDi)(document),document},deps:[]}]),_r=[{provide:V.zSh,useValue:"root"},{provide:V.qLn,useFactory:function pn(){return new V.qLn},deps:[]},{provide:vt,useClass:cn,multi:!0,deps:[y.K0,V.R0b,V.Lbi]},{provide:vt,useClass:Ne,multi:!0,deps:[y.K0]},{provide:Ln,useClass:Ln,deps:[_t,ot,V.AFp]},{provide:V.FYo,useExisting:Ln},{provide:dt,useExisting:ot},{provide:ot,useClass:ot,deps:[y.K0]},{provide:V.dDg,useClass:V.dDg,deps:[V.R0b]},{provide:_t,useClass:_t,deps:[vt,V.R0b]},{provide:y.JF,useClass:St,deps:[]}];let jn=(()=>{class z{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:z,providers:[{provide:V.AFp,useValue:se.appId},{provide:nt,useExisting:V.AFp},ve]}}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(z,12))},z.\u0275mod=V.oAB({type:z}),z.\u0275inj=V.cJS({providers:_r,imports:[y.ez,V.hGG]}),z})(),Vn=(()=>{class z{constructor(se){this._doc=se}getTitle(){return this._doc.title}setTitle(se){this._doc.title=se||""}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(y.K0))},z.\u0275prov=V.Yz7({token:z,factory:function(se){let xe=null;return xe=se?new se:function On(){return new Vn((0,V.LFG)(y.K0))}(),xe},providedIn:"root"}),z})();"undefined"!=typeof window&&window;let Ue=(()=>{class z{}return z.\u0275fac=function(se){return new(se||z)},z.\u0275prov=V.Yz7({token:z,factory:function(se){let xe=null;return xe=se?new(se||z):V.LFG(me),xe},providedIn:"root"}),z})(),me=(()=>{class z extends Ue{constructor(se){super(),this._doc=se}sanitize(se,xe){if(null==xe)return null;switch(se){case V.q3G.NONE:return xe;case V.q3G.HTML:return(0,V.qzn)(xe,"HTML")?(0,V.z3N)(xe):(0,V.EiD)(this._doc,String(xe)).toString();case V.q3G.STYLE:return(0,V.qzn)(xe,"Style")?(0,V.z3N)(xe):xe;case V.q3G.SCRIPT:if((0,V.qzn)(xe,"Script"))return(0,V.z3N)(xe);throw new Error("unsafe value used in a script context");case V.q3G.URL:return(0,V.yhl)(xe),(0,V.qzn)(xe,"URL")?(0,V.z3N)(xe):(0,V.mCW)(String(xe));case V.q3G.RESOURCE_URL:if((0,V.qzn)(xe,"ResourceURL"))return(0,V.z3N)(xe);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,V.JVY)(se)}bypassSecurityTrustStyle(se){return(0,V.L6k)(se)}bypassSecurityTrustScript(se){return(0,V.eBb)(se)}bypassSecurityTrustUrl(se){return(0,V.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,V.pB0)(se)}}return z.\u0275fac=function(se){return new(se||z)(V.LFG(y.K0))},z.\u0275prov=V.Yz7({token:z,factory:function(se){let xe=null;return xe=se?new se:function Pe(z){return new me(z.get(y.K0))}(V.LFG(V.zs3)),xe},providedIn:"root"}),z})()},2729:(hn,ct,U)=>{U.d(ct,{gz:()=>lt,F0:()=>rs,rH:()=>fi,yS:()=>ds,Bz:()=>vs,lC:()=>ii});var y=U(5e3),V=U(8996),ee=U(9646),ie=U(7579);class ke extends ie.x{constructor(D){super(),this._value=D}get value(){return this.getValue()}_subscribe(D){const T=super._subscribe(D);return!T.closed&&D.next(this._value),T}getValue(){const{hasError:D,thrownError:T,_value:H}=this;if(D)throw T;return this._throwIfClosed(),H}next(D){super.next(this._value=D)}}var je=U(8306),Xe=U(4742),He=U(4671),nt=U(3268),Ie=U(7669),ve=U(1810),Qe=U(5403),St=U(9672);function Vt(P,D,T){P?(0,St.f)(T,P,D):D()}var dt=U(2843),ot=U(6805),Ge=U(7272),qt=U(8421);function at(P){return new je.y(D=>{(0,qt.Xf)(P()).subscribe(D)})}var De=U(515),Je=U(727),Ct=U(4482);function bt(){return(0,Ct.e)((P,D)=>{let T=null;P._refCount++;const H=(0,Qe.x)(D,void 0,void 0,void 0,()=>{if(!P||P._refCount<=0||0<--P._refCount)return void(T=null);const Q=P._connection,de=T;T=null,Q&&(!de||Q===de)&&Q.unsubscribe(),D.unsubscribe()});P.subscribe(H),H.closed||(T=P.connect())})}class Se extends je.y{constructor(D,T){super(),this.source=D,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,Ct.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,null==D||D.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Je.w0;const T=this.getSubject();D.add(this.source.subscribe((0,Qe.x)(T,void 0,()=>{this._teardown(),T.complete()},H=>{this._teardown(),T.error(H)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Je.w0.EMPTY)}return D}refCount(){return bt()(this)}}var Ht=U(4004),Nt=U(3900),Rn=U(5698),En=U(8675),Ln=U(5026),un=U(9300),sn=U(262),Ot=U(4351);function or(P){return P<=0?()=>De.E:(0,Ct.e)((D,T)=>{let H=[];D.subscribe((0,Qe.x)(T,Q=>{H.push(Q),P<H.length&&H.shift()},()=>{for(const Q of H)T.next(Q);T.complete()},void 0,()=>{H=null}))})}var Mn=U(8068),cn=U(6590),tt=U(590),Ce=U(5577),Me=U(8505),Ne=U(8189),st=U(9808);class Zt{constructor(D,T){this.id=D,this.url=T}}class pn extends Zt{constructor(D,T,H="imperative",Q=null){super(D,T),this.navigationTrigger=H,this.restoredState=Q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wn extends Zt{constructor(D,T,H){super(D,T),this.urlAfterRedirects=H}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kn extends Zt{constructor(D,T,H){super(D,T),this.reason=H}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ur extends Zt{constructor(D,T,H){super(D,T),this.error=H}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _r extends Zt{constructor(D,T,H,Q){super(D,T),this.urlAfterRedirects=H,this.state=Q}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends Zt{constructor(D,T,H,Q){super(D,T),this.urlAfterRedirects=H,this.state=Q}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jn extends Zt{constructor(D,T,H,Q,de){super(D,T),this.urlAfterRedirects=H,this.state=Q,this.shouldActivate=de}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yn extends Zt{constructor(D,T,H,Q){super(D,T),this.urlAfterRedirects=H,this.state=Q}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nr extends Zt{constructor(D,T,H,Q){super(D,T),this.urlAfterRedirects=H,this.state=Q}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class On{constructor(D){this.route=D}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vn{constructor(D){this.route=D}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ti{constructor(D){this.snapshot=D}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Li{constructor(D){this.snapshot=D}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xt{constructor(D){this.snapshot=D}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class We{constructor(D){this.snapshot=D}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ze{constructor(D,T,H){this.routerEvent=D,this.position=T,this.anchor=H}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ft="primary";class At{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const T=this.params[D];return Array.isArray(T)?T[0]:T}return null}getAll(D){if(this.has(D)){const T=this.params[D];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Yt(P){return new At(P)}const on="ngNavigationCancelingError";function Dr(P){const D=Error("NavigationCancelingError: "+P);return D[on]=!0,D}function Un(P,D,T){const H=T.path.split("/");if(H.length>P.length||"full"===T.pathMatch&&(D.hasChildren()||H.length<P.length))return null;const Q={};for(let de=0;de<H.length;de++){const fe=H[de],Le=P[de];if(fe.startsWith(":"))Q[fe.substring(1)]=Le;else if(fe!==Le.path)return null}return{consumed:P.slice(0,H.length),posParams:Q}}function ar(P,D){const T=P?Object.keys(P):void 0,H=D?Object.keys(D):void 0;if(!T||!H||T.length!=H.length)return!1;let Q;for(let de=0;de<T.length;de++)if(Q=T[de],!mr(P[Q],D[Q]))return!1;return!0}function mr(P,D){if(Array.isArray(P)&&Array.isArray(D)){if(P.length!==D.length)return!1;const T=[...P].sort(),H=[...D].sort();return T.every((Q,de)=>H[de]===Q)}return P===D}function rn(P){return Array.prototype.concat.apply([],P)}function Mr(P){return P.length>0?P[P.length-1]:null}function cr(P,D){for(const T in P)P.hasOwnProperty(T)&&D(P[T],T)}function Qn(P){return(0,y.CqO)(P)?P:(0,y.QGY)(P)?(0,V.D)(Promise.resolve(P)):(0,ee.of)(P)}const jr={exact:function Br(P,D,T){if(!pt(P.segments,D.segments)||!ye(P.segments,D.segments,T)||P.numberOfChildren!==D.numberOfChildren)return!1;for(const H in D.children)if(!P.children[H]||!Br(P.children[H],D.children[H],T))return!1;return!0},subset:Pe},ni={exact:function Mi(P,D){return ar(P,D)},subset:function Ue(P,D){return Object.keys(D).length<=Object.keys(P).length&&Object.keys(D).every(T=>mr(P[T],D[T]))},ignored:()=>!0};function Vi(P,D,T){return jr[T.paths](P.root,D.root,T.matrixParams)&&ni[T.queryParams](P.queryParams,D.queryParams)&&!("exact"===T.fragment&&P.fragment!==D.fragment)}function Pe(P,D,T){return me(P,D,D.segments,T)}function me(P,D,T,H){if(P.segments.length>T.length){const Q=P.segments.slice(0,T.length);return!(!pt(Q,T)||D.hasChildren()||!ye(Q,T,H))}if(P.segments.length===T.length){if(!pt(P.segments,T)||!ye(P.segments,T,H))return!1;for(const Q in D.children)if(!P.children[Q]||!Pe(P.children[Q],D.children[Q],H))return!1;return!0}{const Q=T.slice(0,P.segments.length),de=T.slice(P.segments.length);return!!(pt(P.segments,Q)&&ye(P.segments,Q,H)&&P.children[ft])&&me(P.children[ft],D,de,H)}}function ye(P,D,T){return D.every((H,Q)=>ni[T](P[Q].parameters,H.parameters))}class z{constructor(D,T,H){this.root=D,this.queryParams=T,this.fragment=H}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yt(this.queryParams)),this._queryParamMap}toString(){return gr.serialize(this)}}class te{constructor(D,T){this.segments=D,this.children=T,this.parent=null,cr(T,(H,Q)=>H.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tr(this)}}class se{constructor(D,T){this.path=D,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Yt(this.parameters)),this._parameterMap}toString(){return bn(this)}}function pt(P,D){return P.length===D.length&&P.every((T,H)=>T.path===D[H].path)}class an{}class Sn{parse(D){const T=new bi(D);return new z(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(D){const T=`/${ai(D.root,!0)}`,H=function Kr(P){const D=Object.keys(P).map(T=>{const H=P[T];return Array.isArray(H)?H.map(Q=>`${Tt(T)}=${Tt(Q)}`).join("&"):`${Tt(T)}=${Tt(H)}`}).filter(T=>!!T);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${T}${H}${"string"==typeof D.fragment?`#${function mt(P){return encodeURI(P)}(D.fragment)}`:""}`}}const gr=new Sn;function tr(P){return P.segments.map(D=>bn(D)).join("/")}function ai(P,D){if(!P.hasChildren())return tr(P);if(D){const T=P.children[ft]?ai(P.children[ft],!1):"",H=[];return cr(P.children,(Q,de)=>{de!==ft&&H.push(`${de}:${ai(Q,!1)}`)}),H.length>0?`${T}(${H.join("//")})`:T}{const T=function Bt(P,D){let T=[];return cr(P.children,(H,Q)=>{Q===ft&&(T=T.concat(D(H,Q)))}),cr(P.children,(H,Q)=>{Q!==ft&&(T=T.concat(D(H,Q)))}),T}(P,(H,Q)=>Q===ft?[ai(P.children[ft],!1)]:[`${Q}:${ai(H,!1)}`]);return 1===Object.keys(P.children).length&&null!=P.children[ft]?`${tr(P)}/${T[0]}`:`${tr(P)}/(${T.join("//")})`}}function Ci(P){return encodeURIComponent(P).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tt(P){return Ci(P).replace(/%3B/gi,";")}function Ut(P){return Ci(P).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rt(P){return decodeURIComponent(P)}function ln(P){return Rt(P.replace(/\+/g,"%20"))}function bn(P){return`${Ut(P.path)}${function rr(P){return Object.keys(P).map(D=>`;${Ut(D)}=${Ut(P[D])}`).join("")}(P.parameters)}`}const yr=/^[^\/()?;=#]+/;function ri(P){const D=P.match(yr);return D?D[0]:""}const Hr=/^[^=?&#]+/,Ps=/^[^&#]+/;class bi{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let H={};return this.peekStartsWith("(")&&(H=this.parseParens(!1)),(D.length>0||Object.keys(T).length>0)&&(H[ft]=new te(D,T)),H}parseSegment(){const D=ri(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(D),new se(Rt(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const T=ri(this.remaining);if(!T)return;this.capture(T);let H="";if(this.consumeOptional("=")){const Q=ri(this.remaining);Q&&(H=Q,this.capture(H))}D[Rt(T)]=Rt(H)}parseQueryParam(D){const T=function gs(P){const D=P.match(Hr);return D?D[0]:""}(this.remaining);if(!T)return;this.capture(T);let H="";if(this.consumeOptional("=")){const fe=function lr(P){const D=P.match(Ps);return D?D[0]:""}(this.remaining);fe&&(H=fe,this.capture(H))}const Q=ln(T),de=ln(H);if(D.hasOwnProperty(Q)){let fe=D[Q];Array.isArray(fe)||(fe=[fe],D[Q]=fe),fe.push(de)}else D[Q]=de}parseParens(D){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const H=ri(this.remaining),Q=this.remaining[H.length];if("/"!==Q&&")"!==Q&&";"!==Q)throw new Error(`Cannot parse url '${this.url}'`);let de;H.indexOf(":")>-1?(de=H.substr(0,H.indexOf(":")),this.capture(de),this.capture(":")):D&&(de=ft);const fe=this.parseChildren();T[de]=1===Object.keys(fe).length?fe[ft]:new te([],fe),this.consumeOptional("//")}return T}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new Error(`Expected "${D}".`)}}class os{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const T=this.pathFromRoot(D);return T.length>1?T[T.length-2]:null}children(D){const T=Ys(D,this._root);return T?T.children.map(H=>H.value):[]}firstChild(D){const T=Ys(D,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(D){const T=Cr(D,this._root);return T.length<2?[]:T[T.length-2].children.map(Q=>Q.value).filter(Q=>Q!==D)}pathFromRoot(D){return Cr(D,this._root).map(T=>T.value)}}function Ys(P,D){if(P===D.value)return D;for(const T of D.children){const H=Ys(P,T);if(H)return H}return null}function Cr(P,D){if(P===D.value)return[D];for(const T of D.children){const H=Cr(P,T);if(H.length)return H.unshift(D),H}return[]}class _n{constructor(D,T){this.value=D,this.children=T}toString(){return`TreeNode(${this.value})`}}function er(P){const D={};return P&&P.children.forEach(T=>D[T.value.outlet]=T),D}class Xi extends os{constructor(D,T){super(D),this.snapshot=T,Dn(this,D)}toString(){return this.snapshot.toString()}}function dr(P,D){const T=function Xr(P,D){const fe=new Et([],{},{},"",{},ft,D,null,P.root,-1,{});return new kt("",new _n(fe,[]))}(P,D),H=new ke([new se("",{})]),Q=new ke({}),de=new ke({}),fe=new ke({}),Le=new ke(""),Ft=new lt(H,Q,fe,Le,de,ft,D,T.root);return Ft.snapshot=T.root,new Xi(new _n(Ft,[]),T)}class lt{constructor(D,T,H,Q,de,fe,Le,Ft){this.url=D,this.params=T,this.queryParams=H,this.fragment=Q,this.data=de,this.outlet=fe,this.component=Le,this._futureSnapshot=Ft}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ht.U)(D=>Yt(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ht.U)(D=>Yt(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ze(P,D="emptyOnly"){const T=P.pathFromRoot;let H=0;if("always"!==D)for(H=T.length-1;H>=1;){const Q=T[H],de=T[H-1];if(Q.routeConfig&&""===Q.routeConfig.path)H--;else{if(de.component)break;H--}}return function ut(P){return P.reduce((D,T)=>({params:Object.assign(Object.assign({},D.params),T.params),data:Object.assign(Object.assign({},D.data),T.data),resolve:Object.assign(Object.assign({},D.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(H))}class Et{constructor(D,T,H,Q,de,fe,Le,Ft,vn,Jt,Wt){this.url=D,this.params=T,this.queryParams=H,this.fragment=Q,this.data=de,this.outlet=fe,this.component=Le,this.routeConfig=Ft,this._urlSegment=vn,this._lastPathIndex=Jt,this._resolve=Wt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(H=>H.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kt extends os{constructor(D,T){super(T),this.url=D,Dn(this,T)}toString(){return Ir(this._root)}}function Dn(P,D){D.value._routerState=P,D.children.forEach(T=>Dn(P,T))}function Ir(P){const D=P.children.length>0?` { ${P.children.map(Ir).join(", ")} } `:"";return`${P.value}${D}`}function Nn(P){if(P.snapshot){const D=P.snapshot,T=P._futureSnapshot;P.snapshot=T,ar(D.queryParams,T.queryParams)||P.queryParams.next(T.queryParams),D.fragment!==T.fragment&&P.fragment.next(T.fragment),ar(D.params,T.params)||P.params.next(T.params),function vi(P,D){if(P.length!==D.length)return!1;for(let T=0;T<P.length;++T)if(!ar(P[T],D[T]))return!1;return!0}(D.url,T.url)||P.url.next(T.url),ar(D.data,T.data)||P.data.next(T.data)}else P.snapshot=P._futureSnapshot,P.data.next(P._futureSnapshot.data)}function hr(P,D){const T=ar(P.params,D.params)&&function xe(P,D){return pt(P,D)&&P.every((T,H)=>ar(T.parameters,D[H].parameters))}(P.url,D.url);return T&&!(!P.parent!=!D.parent)&&(!P.parent||hr(P.parent,D.parent))}function ms(P,D,T){if(T&&P.shouldReuseRoute(D.value,T.value.snapshot)){const H=T.value;H._futureSnapshot=D.value;const Q=function ci(P,D,T){return D.children.map(H=>{for(const Q of T.children)if(P.shouldReuseRoute(H.value,Q.value.snapshot))return ms(P,H,Q);return ms(P,H)})}(P,D,T);return new _n(H,Q)}{if(P.shouldAttach(D.value)){const de=P.retrieve(D.value);if(null!==de){const fe=de.route;return fe.value._futureSnapshot=D.value,fe.children=D.children.map(Le=>ms(P,Le)),fe}}const H=function ei(P){return new lt(new ke(P.url),new ke(P.params),new ke(P.queryParams),new ke(P.fragment),new ke(P.data),P.outlet,P.component,P)}(D.value),Q=D.children.map(de=>ms(P,de));return new _n(H,Q)}}function js(P){return"object"==typeof P&&null!=P&&!P.outlets&&!P.segmentPath}function Ui(P){return"object"==typeof P&&null!=P&&P.outlets}function mo(P,D,T,H,Q){let de={};if(H&&cr(H,(Le,Ft)=>{de[Ft]=Array.isArray(Le)?Le.map(vn=>`${vn}`):`${Le}`}),P===D)return new z(T,de,Q);const fe=Ro(P,D,T);return new z(fe,de,Q)}function Ro(P,D,T){const H={};return cr(P.children,(Q,de)=>{H[de]=Q===D?T:Ro(Q,D,T)}),new te(P.segments,H)}class yo{constructor(D,T,H){if(this.isAbsolute=D,this.numberOfDoubleDots=T,this.commands=H,D&&H.length>0&&js(H[0]))throw new Error("Root segment cannot have matrix parameters");const Q=H.find(Ui);if(Q&&Q!==Mr(H))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ys{constructor(D,T,H){this.segmentGroup=D,this.processChildren=T,this.index=H}}function Ss(P,D,T){if(P||(P=new te([],{})),0===P.segments.length&&P.hasChildren())return oo(P,D,T);const H=function ra(P,D,T){let H=0,Q=D;const de={match:!1,pathIndex:0,commandIndex:0};for(;Q<P.segments.length;){if(H>=T.length)return de;const fe=P.segments[Q],Le=T[H];if(Ui(Le))break;const Ft=`${Le}`,vn=H<T.length-1?T[H+1]:null;if(Q>0&&void 0===Ft)break;if(Ft&&vn&&"object"==typeof vn&&void 0===vn.outlets){if(!Oo(Ft,vn,fe))return de;H+=2}else{if(!Oo(Ft,{},fe))return de;H++}Q++}return{match:!0,pathIndex:Q,commandIndex:H}}(P,D,T),Q=T.slice(H.commandIndex);if(H.match&&H.pathIndex<P.segments.length){const de=new te(P.segments.slice(0,H.pathIndex),{});return de.children[ft]=new te(P.segments.slice(H.pathIndex),P.children),oo(de,0,Q)}return H.match&&0===Q.length?new te(P.segments,{}):H.match&&!P.hasChildren()?xi(P,D,T):H.match?oo(P,0,Q):xi(P,D,T)}function oo(P,D,T){if(0===T.length)return new te(P.segments,{});{const H=function Tr(P){return Ui(P[0])?P[0].outlets:{[ft]:P}}(T),Q={};return cr(H,(de,fe)=>{"string"==typeof de&&(de=[de]),null!==de&&(Q[fe]=Ss(P.children[fe],D,de))}),cr(P.children,(de,fe)=>{void 0===H[fe]&&(Q[fe]=de)}),new te(P.segments,Q)}}function xi(P,D,T){const H=P.segments.slice(0,D);let Q=0;for(;Q<T.length;){const de=T[Q];if(Ui(de)){const Ft=As(de.outlets);return new te(H,Ft)}if(0===Q&&js(T[0])){H.push(new se(P.segments[D].path,Bi(T[0]))),Q++;continue}const fe=Ui(de)?de.outlets[ft]:`${de}`,Le=Q<T.length-1?T[Q+1]:null;fe&&Le&&js(Le)?(H.push(new se(fe,Bi(Le))),Q+=2):(H.push(new se(fe,{})),Q++)}return new te(H,{})}function As(P){const D={};return cr(P,(T,H)=>{"string"==typeof T&&(T=[T]),null!==T&&(D[H]=xi(new te([],{}),0,T))}),D}function Bi(P){const D={};return cr(P,(T,H)=>D[H]=`${T}`),D}function Oo(P,D,T){return P==T.path&&ar(D,T.parameters)}class _o{constructor(D,T,H,Q){this.routeReuseStrategy=D,this.futureState=T,this.currState=H,this.forwardEvent=Q}activate(D){const T=this.futureState._root,H=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,H,D),Nn(this.futureState.root),this.activateChildRoutes(T,H,D)}deactivateChildRoutes(D,T,H){const Q=er(T);D.children.forEach(de=>{const fe=de.value.outlet;this.deactivateRoutes(de,Q[fe],H),delete Q[fe]}),cr(Q,(de,fe)=>{this.deactivateRouteAndItsChildren(de,H)})}deactivateRoutes(D,T,H){const Q=D.value,de=T?T.value:null;if(Q===de)if(Q.component){const fe=H.getContext(Q.outlet);fe&&this.deactivateChildRoutes(D,T,fe.children)}else this.deactivateChildRoutes(D,T,H);else de&&this.deactivateRouteAndItsChildren(T,H)}deactivateRouteAndItsChildren(D,T){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,T):this.deactivateRouteAndOutlet(D,T)}detachAndStoreRouteSubtree(D,T){const H=T.getContext(D.value.outlet),Q=H&&D.value.component?H.children:T,de=er(D);for(const fe of Object.keys(de))this.deactivateRouteAndItsChildren(de[fe],Q);if(H&&H.outlet){const fe=H.outlet.detach(),Le=H.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:fe,route:D,contexts:Le})}}deactivateRouteAndOutlet(D,T){const H=T.getContext(D.value.outlet),Q=H&&D.value.component?H.children:T,de=er(D);for(const fe of Object.keys(de))this.deactivateRouteAndItsChildren(de[fe],Q);H&&H.outlet&&(H.outlet.deactivate(),H.children.onOutletDeactivated(),H.attachRef=null,H.resolver=null,H.route=null)}activateChildRoutes(D,T,H){const Q=er(T);D.children.forEach(de=>{this.activateRoutes(de,Q[de.value.outlet],H),this.forwardEvent(new We(de.value.snapshot))}),D.children.length&&this.forwardEvent(new Li(D.value.snapshot))}activateRoutes(D,T,H){const Q=D.value,de=T?T.value:null;if(Nn(Q),Q===de)if(Q.component){const fe=H.getOrCreateContext(Q.outlet);this.activateChildRoutes(D,T,fe.children)}else this.activateChildRoutes(D,T,H);else if(Q.component){const fe=H.getOrCreateContext(Q.outlet);if(this.routeReuseStrategy.shouldAttach(Q.snapshot)){const Le=this.routeReuseStrategy.retrieve(Q.snapshot);this.routeReuseStrategy.store(Q.snapshot,null),fe.children.onOutletReAttached(Le.contexts),fe.attachRef=Le.componentRef,fe.route=Le.route.value,fe.outlet&&fe.outlet.attach(Le.componentRef,Le.route.value),Nn(Le.route.value),this.activateChildRoutes(D,null,fe.children)}else{const Le=function as(P){for(let D=P.parent;D;D=D.parent){const T=D.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(Q.snapshot),Ft=Le?Le.module.componentFactoryResolver:null;fe.attachRef=null,fe.route=Q,fe.resolver=Ft,fe.outlet&&fe.outlet.activateWith(Q,Ft),this.activateChildRoutes(D,null,fe.children)}}else this.activateChildRoutes(D,null,H)}}class ji{constructor(D,T){this.routes=D,this.module=T}}function _s(P){return"function"==typeof P}function ws(P){return P instanceof z}const $r=Symbol("INITIAL_VALUE");function Js(){return(0,Nt.w)(P=>function vt(...P){const D=(0,Ie.yG)(P),T=(0,Ie.jO)(P),{args:H,keys:Q}=(0,Xe.D)(P);if(0===H.length)return(0,V.D)([],D);const de=new je.y(function _t(P,D,T=He.y){return H=>{Vt(D,()=>{const{length:Q}=P,de=new Array(Q);let fe=Q,Le=Q;for(let Ft=0;Ft<Q;Ft++)Vt(D,()=>{const vn=(0,V.D)(P[Ft],D);let Jt=!1;vn.subscribe((0,Qe.x)(H,Wt=>{de[Ft]=Wt,Jt||(Jt=!0,Le--),Le||H.next(T(de.slice()))},()=>{--fe||H.complete()}))},H)},H)}}(H,D,Q?fe=>(0,ve.n)(Q,fe):He.y));return T?de.pipe((0,nt.Z)(T)):de}(P.map(D=>D.pipe((0,Rn.q)(1),(0,En.O)($r)))).pipe((0,Ln.R)((D,T)=>{let H=!1;return T.reduce((Q,de,fe)=>Q!==$r?Q:(de===$r&&(H=!0),H||!1!==de&&fe!==T.length-1&&!ws(de)?Q:de),D)},$r),(0,un.h)(D=>D!==$r),(0,Ht.U)(D=>ws(D)?D:!0===D),(0,Rn.q)(1)))}class ls{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zr,this.attachRef=null}}class Zr{constructor(){this.contexts=new Map}onChildOutletCreated(D,T){const H=this.getOrCreateContext(D);H.outlet=T,this.contexts.set(D,H)}onChildOutletDestroyed(D){const T=this.getContext(D);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let T=this.getContext(D);return T||(T=new ls,this.contexts.set(D,T)),T}getContext(D){return this.contexts.get(D)||null}}let ii=(()=>{class P{constructor(T,H,Q,de,fe){this.parentContexts=T,this.location=H,this.resolver=Q,this.changeDetector=fe,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=de||ft,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,H){this.activated=T,this._activatedRoute=H,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,H){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const fe=(H=H||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),Le=this.parentContexts.getOrCreateContext(this.name).children,Ft=new Oi(T,Le,this.location.injector);this.activated=this.location.createComponent(fe,this.location.length,Ft),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return P.\u0275fac=function(T){return new(T||P)(y.Y36(Zr),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},P.\u0275dir=y.lG2({type:P,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),P})();class Oi{constructor(D,T,H){this.route=D,this.childContexts=T,this.parent=H}get(D,T){return D===lt?this.route:D===Zr?this.childContexts:this.parent.get(D,T)}}let Si=(()=>{class P{}return P.\u0275fac=function(T){return new(T||P)},P.\u0275cmp=y.Xpm({type:P,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,H){1&T&&y._UZ(0,"router-outlet")},directives:[ii],encapsulation:2}),P})();function Pi(P,D=""){for(let T=0;T<P.length;T++){const H=P[T];Hs(H,$s(D,H))}}function Hs(P,D){P.children&&Pi(P.children,D)}function $s(P,D){return D?P||D.path?P&&!D.path?`${P}/`:!P&&D.path?D.path:`${P}/${D.path}`:"":P}function si(P){const D=P.children&&P.children.map(si),T=D?Object.assign(Object.assign({},P),{children:D}):Object.assign({},P);return!T.component&&(D||T.loadChildren)&&T.outlet&&T.outlet!==ft&&(T.component=Si),T}function L(P){return P.outlet||ft}function le(P,D){const T=P.filter(H=>L(H)===D);return T.push(...P.filter(H=>L(H)!==D)),T}const $={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function he(P,D,T){var H;if(""===D.path)return"full"===D.pathMatch&&(P.hasChildren()||T.length>0)?Object.assign({},$):{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const de=(D.matcher||Un)(T,P,D);if(!de)return Object.assign({},$);const fe={};cr(de.posParams,(Ft,vn)=>{fe[vn]=Ft.path});const Le=de.consumed.length>0?Object.assign(Object.assign({},fe),de.consumed[de.consumed.length-1].parameters):fe;return{matched:!0,consumedSegments:de.consumed,remainingSegments:T.slice(de.consumed.length),parameters:Le,positionalParamSegments:null!==(H=de.posParams)&&void 0!==H?H:{}}}function Fe(P,D,T,H,Q="corrected"){if(T.length>0&&function gn(P,D,T){return T.some(H=>br(P,D,H)&&L(H)!==ft)}(P,T,H)){const fe=new te(D,function Kt(P,D,T,H){const Q={};Q[ft]=H,H._sourceSegment=P,H._segmentIndexShift=D.length;for(const de of T)if(""===de.path&&L(de)!==ft){const fe=new te([],{});fe._sourceSegment=P,fe._segmentIndexShift=D.length,Q[L(de)]=fe}return Q}(P,D,H,new te(T,P.children)));return fe._sourceSegment=P,fe._segmentIndexShift=D.length,{segmentGroup:fe,slicedSegments:[]}}if(0===T.length&&function vr(P,D,T){return T.some(H=>br(P,D,H))}(P,T,H)){const fe=new te(P.segments,function Pt(P,D,T,H,Q,de){const fe={};for(const Le of H)if(br(P,T,Le)&&!Q[L(Le)]){const Ft=new te([],{});Ft._sourceSegment=P,Ft._segmentIndexShift="legacy"===de?P.segments.length:D.length,fe[L(Le)]=Ft}return Object.assign(Object.assign({},Q),fe)}(P,D,T,H,P.children,Q));return fe._sourceSegment=P,fe._segmentIndexShift=D.length,{segmentGroup:fe,slicedSegments:T}}const de=new te(P.segments,P.children);return de._sourceSegment=P,de._segmentIndexShift=D.length,{segmentGroup:de,slicedSegments:T}}function br(P,D,T){return(!(P.hasChildren()||D.length>0)||"full"!==T.pathMatch)&&""===T.path}function fr(P,D,T,H){return!!(L(P)===H||H!==ft&&br(D,T,P))&&("**"===P.path||he(D,P,T).matched)}function Sr(P,D,T){return 0===D.length&&!P.children[T]}class wi{constructor(D){this.segmentGroup=D||null}}class _i{constructor(D){this.urlTree=D}}function li(P){return(0,dt._)(new wi(P))}function ao(P){return(0,dt._)(new _i(P))}class ko{constructor(D,T,H,Q,de){this.configLoader=T,this.urlSerializer=H,this.urlTree=Q,this.config=de,this.allowRedirects=!0,this.ngModule=D.get(y.h0i)}apply(){const D=Fe(this.urlTree.root,[],[],this.config).segmentGroup,T=new te(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,T,ft).pipe((0,Ht.U)(de=>this.createUrlTree(Eo(de),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,sn.K)(de=>{if(de instanceof _i)return this.allowRedirects=!1,this.match(de.urlTree);throw de instanceof wi?this.noMatchError(de):de}))}match(D){return this.expandSegmentGroup(this.ngModule,this.config,D.root,ft).pipe((0,Ht.U)(Q=>this.createUrlTree(Eo(Q),D.queryParams,D.fragment))).pipe((0,sn.K)(Q=>{throw Q instanceof wi?this.noMatchError(Q):Q}))}noMatchError(D){return new Error(`Cannot match any routes. URL Segment: '${D.segmentGroup}'`)}createUrlTree(D,T,H){const Q=D.segments.length>0?new te([],{[ft]:D}):D;return new z(Q,T,H)}expandSegmentGroup(D,T,H,Q){return 0===H.segments.length&&H.hasChildren()?this.expandChildren(D,T,H).pipe((0,Ht.U)(de=>new te([],de))):this.expandSegment(D,H,T,H.segments,Q,!0)}expandChildren(D,T,H){const Q=[];for(const de of Object.keys(H.children))"primary"===de?Q.unshift(de):Q.push(de);return(0,V.D)(Q).pipe((0,Ot.b)(de=>{const fe=H.children[de],Le=le(T,de);return this.expandSegmentGroup(D,Le,fe,de).pipe((0,Ht.U)(Ft=>({segment:Ft,outlet:de})))}),(0,Ln.R)((de,fe)=>(de[fe.outlet]=fe.segment,de),{}),function it(P,D){const T=arguments.length>=2;return H=>H.pipe(P?(0,un.h)((Q,de)=>P(Q,de,H)):He.y,or(1),T?(0,cn.d)(D):(0,Mn.T)(()=>new ot.K))}())}expandSegment(D,T,H,Q,de,fe){return(0,V.D)(H).pipe((0,Ot.b)(Le=>this.expandSegmentAgainstRoute(D,T,H,Le,Q,de,fe).pipe((0,sn.K)(vn=>{if(vn instanceof wi)return(0,ee.of)(null);throw vn}))),(0,tt.P)(Le=>!!Le),(0,sn.K)((Le,Ft)=>{if(Le instanceof ot.K||"EmptyError"===Le.name)return Sr(T,Q,de)?(0,ee.of)(new te([],{})):li(T);throw Le}))}expandSegmentAgainstRoute(D,T,H,Q,de,fe,Le){return fr(Q,T,de,fe)?void 0===Q.redirectTo?this.matchSegmentAgainstRoute(D,T,Q,de,fe):Le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,T,H,Q,de,fe):li(T):li(T)}expandSegmentAgainstRouteUsingRedirect(D,T,H,Q,de,fe){return"**"===Q.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,H,Q,fe):this.expandRegularSegmentAgainstRouteUsingRedirect(D,T,H,Q,de,fe)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,T,H,Q){const de=this.applyRedirectCommands([],H.redirectTo,{});return H.redirectTo.startsWith("/")?ao(de):this.lineralizeSegments(H,de).pipe((0,Ce.z)(fe=>{const Le=new te(fe,{});return this.expandSegment(D,Le,T,fe,Q,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,T,H,Q,de,fe){const{matched:Le,consumedSegments:Ft,remainingSegments:vn,positionalParamSegments:Jt}=he(T,Q,de);if(!Le)return li(T);const Wt=this.applyRedirectCommands(Ft,Q.redirectTo,Jt);return Q.redirectTo.startsWith("/")?ao(Wt):this.lineralizeSegments(Q,Wt).pipe((0,Ce.z)(Ri=>this.expandSegment(D,T,H,Ri.concat(vn),fe,!1)))}matchSegmentAgainstRoute(D,T,H,Q,de){if("**"===H.path)return H.loadChildren?(H._loadedConfig?(0,ee.of)(H._loadedConfig):this.configLoader.load(D.injector,H)).pipe((0,Ht.U)(Wt=>(H._loadedConfig=Wt,new te(Q,{})))):(0,ee.of)(new te(Q,{}));const{matched:fe,consumedSegments:Le,remainingSegments:Ft}=he(T,H,Q);return fe?this.getChildConfig(D,H,Q).pipe((0,Ce.z)(Jt=>{const Wt=Jt.module,Ri=Jt.routes,{segmentGroup:tn,slicedSegments:Dt}=Fe(T,Le,Ft,Ri),jt=new te(tn.segments,tn.children);if(0===Dt.length&&jt.hasChildren())return this.expandChildren(Wt,Ri,jt).pipe((0,Ht.U)(ha=>new te(Le,ha)));if(0===Ri.length&&0===Dt.length)return(0,ee.of)(new te(Le,{}));const Fr=L(H)===de;return this.expandSegment(Wt,jt,Ri,Dt,Fr?ft:de,!0).pipe((0,Ht.U)(Zi=>new te(Le.concat(Zi.segments),Zi.children)))})):li(T)}getChildConfig(D,T,H){return T.children?(0,ee.of)(new ji(T.children,D)):T.loadChildren?void 0!==T._loadedConfig?(0,ee.of)(T._loadedConfig):this.runCanLoadGuards(D.injector,T,H).pipe((0,Ce.z)(Q=>Q?this.configLoader.load(D.injector,T).pipe((0,Ht.U)(de=>(T._loadedConfig=de,de))):function ir(P){return(0,dt._)(Dr(`Cannot load children because the guard of the route "path: '${P.path}'" returned false`))}(T))):(0,ee.of)(new ji([],D))}runCanLoadGuards(D,T,H){const Q=T.canLoad;if(!Q||0===Q.length)return(0,ee.of)(!0);const de=Q.map(fe=>{const Le=D.get(fe);let Ft;if(function Cs(P){return P&&_s(P.canLoad)}(Le))Ft=Le.canLoad(T,H);else{if(!_s(Le))throw new Error("Invalid CanLoad guard");Ft=Le(T,H)}return Qn(Ft)});return(0,ee.of)(de).pipe(Js(),(0,Me.b)(fe=>{if(!ws(fe))return;const Le=Dr(`Redirecting to "${this.urlSerializer.serialize(fe)}"`);throw Le.url=fe,Le}),(0,Ht.U)(fe=>!0===fe))}lineralizeSegments(D,T){let H=[],Q=T.root;for(;;){if(H=H.concat(Q.segments),0===Q.numberOfChildren)return(0,ee.of)(H);if(Q.numberOfChildren>1||!Q.children[ft])return(0,dt._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D.redirectTo}'`));Q=Q.children[ft]}}applyRedirectCommands(D,T,H){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),D,H)}applyRedirectCreatreUrlTree(D,T,H,Q){const de=this.createSegmentGroup(D,T.root,H,Q);return new z(de,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(D,T){const H={};return cr(D,(Q,de)=>{if("string"==typeof Q&&Q.startsWith(":")){const Le=Q.substring(1);H[de]=T[Le]}else H[de]=Q}),H}createSegmentGroup(D,T,H,Q){const de=this.createSegments(D,T.segments,H,Q);let fe={};return cr(T.children,(Le,Ft)=>{fe[Ft]=this.createSegmentGroup(D,Le,H,Q)}),new te(de,fe)}createSegments(D,T,H,Q){return T.map(de=>de.path.startsWith(":")?this.findPosParam(D,de,Q):this.findOrReturn(de,H))}findPosParam(D,T,H){const Q=H[T.path.substring(1)];if(!Q)throw new Error(`Cannot redirect to '${D}'. Cannot find '${T.path}'.`);return Q}findOrReturn(D,T){let H=0;for(const Q of T){if(Q.path===D.path)return T.splice(H),Q;H++}return D}}function Eo(P){const D={};for(const H of Object.keys(P.children)){const de=Eo(P.children[H]);(de.segments.length>0||de.hasChildren())&&(D[H]=de)}return function ks(P){if(1===P.numberOfChildren&&P.children[ft]){const D=P.children[ft];return new te(P.segments.concat(D.segments),D.children)}return P}(new te(P.segments,D))}class j{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class F{constructor(D,T){this.component=D,this.route=T}}function ue(P,D,T){const H=P._root;return W(H,D?D._root:null,T,[H.value])}function Xt(P,D,T){const H=function Yr(P){if(!P)return null;for(let D=P.parent;D;D=D.parent){const T=D.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(D);return(H?H.module.injector:T).get(P)}function W(P,D,T,H,Q={canDeactivateChecks:[],canActivateChecks:[]}){const de=er(D);return P.children.forEach(fe=>{(function K(P,D,T,H,Q={canDeactivateChecks:[],canActivateChecks:[]}){const de=P.value,fe=D?D.value:null,Le=T?T.getContext(P.value.outlet):null;if(fe&&de.routeConfig===fe.routeConfig){const Ft=function pe(P,D,T){if("function"==typeof T)return T(P,D);switch(T){case"pathParamsChange":return!pt(P.url,D.url);case"pathParamsOrQueryParamsChange":return!pt(P.url,D.url)||!ar(P.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hr(P,D)||!ar(P.queryParams,D.queryParams);default:return!hr(P,D)}}(fe,de,de.routeConfig.runGuardsAndResolvers);Ft?Q.canActivateChecks.push(new j(H)):(de.data=fe.data,de._resolvedData=fe._resolvedData),W(P,D,de.component?Le?Le.children:null:T,H,Q),Ft&&Le&&Le.outlet&&Le.outlet.isActivated&&Q.canDeactivateChecks.push(new F(Le.outlet.component,fe))}else fe&&be(D,Le,Q),Q.canActivateChecks.push(new j(H)),W(P,null,de.component?Le?Le.children:null:T,H,Q)})(fe,de[fe.value.outlet],T,H.concat([fe.value]),Q),delete de[fe.value.outlet]}),cr(de,(fe,Le)=>be(fe,T.getContext(Le),Q)),Q}function be(P,D,T){const H=er(P),Q=P.value;cr(H,(de,fe)=>{be(de,Q.component?D?D.children.getContext(fe):null:D,T)}),T.canDeactivateChecks.push(new F(Q.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,Q))}class Gr{}function hi(P){return new je.y(D=>D.error(P))}class Hi{constructor(D,T,H,Q,de,fe){this.rootComponentType=D,this.config=T,this.urlTree=H,this.url=Q,this.paramsInheritanceStrategy=de,this.relativeLinkResolution=fe}recognize(){const D=Fe(this.urlTree.root,[],[],this.config.filter(fe=>void 0===fe.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,D,ft);if(null===T)return null;const H=new Et([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ft,this.rootComponentType,null,this.urlTree.root,-1,{}),Q=new _n(H,T),de=new kt(this.url,Q);return this.inheritParamsAndData(de._root),de}inheritParamsAndData(D){const T=D.value,H=Ze(T,this.paramsInheritanceStrategy);T.params=Object.freeze(H.params),T.data=Object.freeze(H.data),D.children.forEach(Q=>this.inheritParamsAndData(Q))}processSegmentGroup(D,T,H){return 0===T.segments.length&&T.hasChildren()?this.processChildren(D,T):this.processSegment(D,T,T.segments,H)}processChildren(D,T){const H=[];for(const de of Object.keys(T.children)){const fe=T.children[de],Le=le(D,de),Ft=this.processSegmentGroup(Le,fe,de);if(null===Ft)return null;H.push(...Ft)}const Q=qi(H);return function Jr(P){P.sort((D,T)=>D.value.outlet===ft?-1:T.value.outlet===ft?1:D.value.outlet.localeCompare(T.value.outlet))}(Q),Q}processSegment(D,T,H,Q){for(const de of D){const fe=this.processSegmentAgainstRoute(de,T,H,Q);if(null!==fe)return fe}return Sr(T,H,Q)?[]:null}processSegmentAgainstRoute(D,T,H,Q){if(D.redirectTo||!fr(D,T,H,Q))return null;let de,fe=[],Le=[];if("**"===D.path){const tn=H.length>0?Mr(H).parameters:{};de=new Et(H,tn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fo(D),L(D),D.component,D,Gs(T),Mo(T)+H.length,wo(D))}else{const tn=he(T,D,H);if(!tn.matched)return null;fe=tn.consumedSegments,Le=tn.remainingSegments,de=new Et(fe,tn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fo(D),L(D),D.component,D,Gs(T),Mo(T)+fe.length,wo(D))}const Ft=function es(P){return P.children?P.children:P.loadChildren?P._loadedConfig.routes:[]}(D),{segmentGroup:vn,slicedSegments:Jt}=Fe(T,fe,Le,Ft.filter(tn=>void 0===tn.redirectTo),this.relativeLinkResolution);if(0===Jt.length&&vn.hasChildren()){const tn=this.processChildren(Ft,vn);return null===tn?null:[new _n(de,tn)]}if(0===Ft.length&&0===Jt.length)return[new _n(de,[])];const Wt=L(D)===Q,Ri=this.processSegment(Ft,vn,Jt,Wt?ft:Q);return null===Ri?null:[new _n(de,Ri)]}}function Ki(P){const D=P.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function qi(P){const D=[],T=new Set;for(const H of P){if(!Ki(H)){D.push(H);continue}const Q=D.find(de=>H.value.routeConfig===de.value.routeConfig);void 0!==Q?(Q.children.push(...H.children),T.add(Q)):D.push(H)}for(const H of T){const Q=qi(H.children);D.push(new _n(H.value,Q))}return D.filter(H=>!T.has(H))}function Gs(P){let D=P;for(;D._sourceSegment;)D=D._sourceSegment;return D}function Mo(P){let D=P,T=D._segmentIndexShift?D._segmentIndexShift:0;for(;D._sourceSegment;)D=D._sourceSegment,T+=D._segmentIndexShift?D._segmentIndexShift:0;return T-1}function Fo(P){return P.data||{}}function wo(P){return P.resolve||{}}function ca(P){return[...Object.keys(P),...Object.getOwnPropertySymbols(P)]}function Ei(P){return(0,Nt.w)(D=>{const T=P(D);return T?(0,V.D)(T).pipe((0,Ht.U)(()=>D)):(0,ee.of)(D)})}class Is extends class cs{shouldDetach(D){return!1}store(D,T){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,T){return D.routeConfig===T.routeConfig}}{}const Ai=new y.OlP("ROUTES");class da{constructor(D,T,H,Q){this.injector=D,this.compiler=T,this.onLoadStartListener=H,this.onLoadEndListener=Q}load(D,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const Q=this.loadModuleFactory(T.loadChildren).pipe((0,Ht.U)(de=>{this.onLoadEndListener&&this.onLoadEndListener(T);const fe=de.create(D);return new ji(rn(fe.injector.get(Ai,void 0,y.XFs.Self|y.XFs.Optional)).map(si),fe)}),(0,sn.K)(de=>{throw T._loader$=void 0,de}));return T._loader$=new Se(Q,()=>new ie.x).pipe(bt()),T._loader$}loadModuleFactory(D){return Qn(D()).pipe((0,Ce.z)(T=>T instanceof y.YKP?(0,ee.of)(T):(0,V.D)(this.compiler.compileModuleAsync(T))))}}class El{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,T){return D}}function Co(P){throw P}function to(P,D,T){return D.parse("/")}function xo(P,D){return(0,ee.of)(null)}const Ta={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Io={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rs=(()=>{class P{constructor(T,H,Q,de,fe,Le,Ft){this.rootComponentType=T,this.urlSerializer=H,this.rootContexts=Q,this.location=de,this.config=Ft,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ie.x,this.errorHandler=Co,this.malformedUriErrorHandler=to,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xo,afterPreactivation:xo},this.urlHandlingStrategy=new El,this.routeReuseStrategy=new Is,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=fe.get(y.h0i),this.console=fe.get(y.c2e);const Wt=fe.get(y.R0b);this.isNgZoneEnabled=Wt instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(Ft),this.currentUrlTree=function Nr(){return new z(new te([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new da(fe,Le,Ri=>this.triggerEvent(new On(Ri)),Ri=>this.triggerEvent(new Vn(Ri))),this.routerState=dr(this.currentUrlTree,this.rootComponentType),this.transitions=new ke({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const H=this.events;return T.pipe((0,un.h)(Q=>0!==Q.id),(0,Ht.U)(Q=>Object.assign(Object.assign({},Q),{extractedUrl:this.urlHandlingStrategy.extract(Q.rawUrl)})),(0,Nt.w)(Q=>{let de=!1,fe=!1;return(0,ee.of)(Q).pipe((0,Me.b)(Le=>{this.currentNavigation={id:Le.id,initialUrl:Le.currentRawUrl,extractedUrl:Le.extractedUrl,trigger:Le.source,extras:Le.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Nt.w)(Le=>{const Ft=this.browserUrlTree.toString(),vn=!this.navigated||Le.extractedUrl.toString()!==Ft||Ft!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||vn)&&this.urlHandlingStrategy.shouldProcessUrl(Le.rawUrl))return sl(Le.source)&&(this.browserUrlTree=Le.extractedUrl),(0,ee.of)(Le).pipe((0,Nt.w)(Wt=>{const Ri=this.transitions.getValue();return H.next(new pn(Wt.id,this.serializeUrl(Wt.extractedUrl),Wt.source,Wt.restoredState)),Ri!==this.transitions.getValue()?De.E:Promise.resolve(Wt)}),function q(P,D,T,H){return(0,Nt.w)(Q=>function Rs(P,D,T,H,Q){return new ko(P,D,T,H,Q).apply()}(P,D,T,Q.extractedUrl,H).pipe((0,Ht.U)(de=>Object.assign(Object.assign({},Q),{urlAfterRedirects:de}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(Wt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Wt.urlAfterRedirects})}),function Xs(P,D,T,H,Q){return(0,Ce.z)(de=>function Qr(P,D,T,H,Q="emptyOnly",de="legacy"){try{const fe=new Hi(P,D,T,H,Q,de).recognize();return null===fe?hi(new Gr):(0,ee.of)(fe)}catch(fe){return hi(fe)}}(P,D,de.urlAfterRedirects,T(de.urlAfterRedirects),H,Q).pipe((0,Ht.U)(fe=>Object.assign(Object.assign({},de),{targetSnapshot:fe}))))}(this.rootComponentType,this.config,Wt=>this.serializeUrl(Wt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(Wt=>{if("eager"===this.urlUpdateStrategy){if(!Wt.extras.skipLocationChange){const tn=this.urlHandlingStrategy.merge(Wt.urlAfterRedirects,Wt.rawUrl);this.setBrowserUrl(tn,Wt)}this.browserUrlTree=Wt.urlAfterRedirects}const Ri=new _r(Wt.id,this.serializeUrl(Wt.extractedUrl),this.serializeUrl(Wt.urlAfterRedirects),Wt.targetSnapshot);H.next(Ri)}));if(vn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ri,extractedUrl:tn,source:Dt,restoredState:jt,extras:Fr}=Le,Cl=new pn(Ri,this.serializeUrl(tn),Dt,jt);H.next(Cl);const Zi=dr(tn,this.rootComponentType).snapshot;return(0,ee.of)(Object.assign(Object.assign({},Le),{targetSnapshot:Zi,urlAfterRedirects:tn,extras:Object.assign(Object.assign({},Fr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Le.rawUrl,Le.resolve(null),De.E}),Ei(Le=>{const{targetSnapshot:Ft,id:vn,extractedUrl:Jt,rawUrl:Wt,extras:{skipLocationChange:Ri,replaceUrl:tn}}=Le;return this.hooks.beforePreactivation(Ft,{navigationId:vn,appliedUrlTree:Jt,rawUrlTree:Wt,skipLocationChange:!!Ri,replaceUrl:!!tn})}),(0,Me.b)(Le=>{const Ft=new jn(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot);this.triggerEvent(Ft)}),(0,Ht.U)(Le=>Object.assign(Object.assign({},Le),{guards:ue(Le.targetSnapshot,Le.currentSnapshot,this.rootContexts)})),function Ke(P,D){return(0,Ce.z)(T=>{const{targetSnapshot:H,currentSnapshot:Q,guards:{canActivateChecks:de,canDeactivateChecks:fe}}=T;return 0===fe.length&&0===de.length?(0,ee.of)(Object.assign(Object.assign({},T),{guardsResult:!0})):function yt(P,D,T,H){return(0,V.D)(P).pipe((0,Ce.z)(Q=>function oi(P,D,T,H,Q){const de=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!de||0===de.length)return(0,ee.of)(!0);const fe=de.map(Le=>{const Ft=Xt(Le,D,Q);let vn;if(function ns(P){return P&&_s(P.canDeactivate)}(Ft))vn=Qn(Ft.canDeactivate(P,D,T,H));else{if(!_s(Ft))throw new Error("Invalid CanDeactivate guard");vn=Qn(Ft(P,D,T,H))}return vn.pipe((0,tt.P)())});return(0,ee.of)(fe).pipe(Js())}(Q.component,Q.route,T,D,H)),(0,tt.P)(Q=>!0!==Q,!0))}(fe,H,Q,P).pipe((0,Ce.z)(Le=>Le&&function zo(P){return"boolean"==typeof P}(Le)?function en(P,D,T,H){return(0,V.D)(D).pipe((0,Ot.b)(Q=>(0,Ge.z)(function xn(P,D){return null!==P&&D&&D(new ti(P)),(0,ee.of)(!0)}(Q.route.parent,H),function Fn(P,D){return null!==P&&D&&D(new xt(P)),(0,ee.of)(!0)}(Q.route,H),function Bn(P,D,T){const H=D[D.length-1],de=D.slice(0,D.length-1).reverse().map(fe=>function Be(P){const D=P.routeConfig?P.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:P,guards:D}:null}(fe)).filter(fe=>null!==fe).map(fe=>at(()=>{const Le=fe.guards.map(Ft=>{const vn=Xt(Ft,fe.node,T);let Jt;if(function vo(P){return P&&_s(P.canActivateChild)}(vn))Jt=Qn(vn.canActivateChild(H,P));else{if(!_s(vn))throw new Error("Invalid CanActivateChild guard");Jt=Qn(vn(H,P))}return Jt.pipe((0,tt.P)())});return(0,ee.of)(Le).pipe(Js())}));return(0,ee.of)(de).pipe(Js())}(P,Q.path,T),function sr(P,D,T){const H=D.routeConfig?D.routeConfig.canActivate:null;if(!H||0===H.length)return(0,ee.of)(!0);const Q=H.map(de=>at(()=>{const fe=Xt(de,D,T);let Le;if(function Qs(P){return P&&_s(P.canActivate)}(fe))Le=Qn(fe.canActivate(D,P));else{if(!_s(fe))throw new Error("Invalid CanActivate guard");Le=Qn(fe(D,P))}return Le.pipe((0,tt.P)())}));return(0,ee.of)(Q).pipe(Js())}(P,Q.route,T))),(0,tt.P)(Q=>!0!==Q,!0))}(H,de,P,D):(0,ee.of)(Le)),(0,Ht.U)(Le=>Object.assign(Object.assign({},T),{guardsResult:Le})))})}(this.ngModule.injector,Le=>this.triggerEvent(Le)),(0,Me.b)(Le=>{if(ws(Le.guardsResult)){const vn=Dr(`Redirecting to "${this.serializeUrl(Le.guardsResult)}"`);throw vn.url=Le.guardsResult,vn}const Ft=new Jn(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot,!!Le.guardsResult);this.triggerEvent(Ft)}),(0,un.h)(Le=>!!Le.guardsResult||(this.restoreHistory(Le),this.cancelNavigationTransition(Le,""),!1)),Ei(Le=>{if(Le.guards.canActivateChecks.length)return(0,ee.of)(Le).pipe((0,Me.b)(Ft=>{const vn=new yn(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);this.triggerEvent(vn)}),(0,Nt.w)(Ft=>{let vn=!1;return(0,ee.of)(Ft).pipe(function us(P,D){return(0,Ce.z)(T=>{const{targetSnapshot:H,guards:{canActivateChecks:Q}}=T;if(!Q.length)return(0,ee.of)(T);let de=0;return(0,V.D)(Q).pipe((0,Ot.b)(fe=>function il(P,D,T,H){return function lo(P,D,T,H){const Q=ca(P);if(0===Q.length)return(0,ee.of)({});const de={};return(0,V.D)(Q).pipe((0,Ce.z)(fe=>function ia(P,D,T,H){const Q=Xt(P,D,H);return Qn(Q.resolve?Q.resolve(D,T):Q(D,T))}(P[fe],D,T,H).pipe((0,Me.b)(Le=>{de[fe]=Le}))),or(1),(0,Ce.z)(()=>ca(de).length===Q.length?(0,ee.of)(de):De.E))}(P._resolve,P,D,H).pipe((0,Ht.U)(de=>(P._resolvedData=de,P.data=Object.assign(Object.assign({},P.data),Ze(P,T).resolve),null)))}(fe.route,H,P,D)),(0,Me.b)(()=>de++),or(1),(0,Ce.z)(fe=>de===Q.length?(0,ee.of)(T):De.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>vn=!0,complete:()=>{vn||(this.restoreHistory(Ft),this.cancelNavigationTransition(Ft,"At least one route resolver didn't emit any value."))}}))}),(0,Me.b)(Ft=>{const vn=new nr(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);this.triggerEvent(vn)}))}),Ei(Le=>{const{targetSnapshot:Ft,id:vn,extractedUrl:Jt,rawUrl:Wt,extras:{skipLocationChange:Ri,replaceUrl:tn}}=Le;return this.hooks.afterPreactivation(Ft,{navigationId:vn,appliedUrlTree:Jt,rawUrlTree:Wt,skipLocationChange:!!Ri,replaceUrl:!!tn})}),(0,Ht.U)(Le=>{const Ft=function Di(P,D,T){const H=ms(P,D._root,T?T._root:void 0);return new Xi(H,D)}(this.routeReuseStrategy,Le.targetSnapshot,Le.currentRouterState);return Object.assign(Object.assign({},Le),{targetRouterState:Ft})}),(0,Me.b)(Le=>{this.currentUrlTree=Le.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Le.urlAfterRedirects,Le.rawUrl),this.routerState=Le.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Le.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Le),this.browserUrlTree=Le.urlAfterRedirects)}),((P,D,T)=>(0,Ht.U)(H=>(new _o(D,H.targetRouterState,H.currentRouterState,T).activate(P),H)))(this.rootContexts,this.routeReuseStrategy,Le=>this.triggerEvent(Le)),(0,Me.b)({next(){de=!0},complete(){de=!0}}),function Ee(P){return(0,Ct.e)((D,T)=>{try{D.subscribe(T)}finally{T.add(P)}})}(()=>{var Le;de||fe||this.cancelNavigationTransition(Q,`Navigation ID ${Q.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Le=this.currentNavigation)||void 0===Le?void 0:Le.id)===Q.id&&(this.currentNavigation=null)}),(0,sn.K)(Le=>{if(fe=!0,function Kn(P){return P&&P[on]}(Le)){const Ft=ws(Le.url);Ft||(this.navigated=!0,this.restoreHistory(Q,!0));const vn=new kn(Q.id,this.serializeUrl(Q.extractedUrl),Le.message);H.next(vn),Ft?setTimeout(()=>{const Jt=this.urlHandlingStrategy.merge(Le.url,this.rawUrlTree),Wt={skipLocationChange:Q.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sl(Q.source)};this.scheduleNavigation(Jt,"imperative",null,Wt,{resolve:Q.resolve,reject:Q.reject,promise:Q.promise})},0):Q.resolve(!1)}else{this.restoreHistory(Q,!0);const Ft=new ur(Q.id,this.serializeUrl(Q.extractedUrl),Le);H.next(Ft);try{Q.resolve(this.errorHandler(Le))}catch(vn){Q.reject(vn)}}return De.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const H="popstate"===T.type?"popstate":"hashchange";"popstate"===H&&setTimeout(()=>{var Q;const de={replaceUrl:!0},fe=(null===(Q=T.state)||void 0===Q?void 0:Q.navigationId)?T.state:null;if(fe){const Ft=Object.assign({},fe);delete Ft.navigationId,delete Ft.\u0275routerPageId,0!==Object.keys(Ft).length&&(de.state=Ft)}const Le=this.parseUrl(T.url);this.scheduleNavigation(Le,H,fe,de)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){Pi(T),this.config=T.map(si),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,H={}){const{relativeTo:Q,queryParams:de,fragment:fe,queryParamsHandling:Le,preserveFragment:Ft}=H,vn=Q||this.routerState.root,Jt=Ft?this.currentUrlTree.fragment:fe;let Wt=null;switch(Le){case"merge":Wt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),de);break;case"preserve":Wt=this.currentUrlTree.queryParams;break;default:Wt=de||null}return null!==Wt&&(Wt=this.removeEmptyProps(Wt)),function Ns(P,D,T,H,Q){if(0===T.length)return mo(D.root,D.root,D.root,H,Q);const de=function na(P){if("string"==typeof P[0]&&1===P.length&&"/"===P[0])return new yo(!0,0,P);let D=0,T=!1;const H=P.reduce((Q,de,fe)=>{if("object"==typeof de&&null!=de){if(de.outlets){const Le={};return cr(de.outlets,(Ft,vn)=>{Le[vn]="string"==typeof Ft?Ft.split("/"):Ft}),[...Q,{outlets:Le}]}if(de.segmentPath)return[...Q,de.segmentPath]}return"string"!=typeof de?[...Q,de]:0===fe?(de.split("/").forEach((Le,Ft)=>{0==Ft&&"."===Le||(0==Ft&&""===Le?T=!0:".."===Le?D++:""!=Le&&Q.push(Le))}),Q):[...Q,de]},[]);return new yo(T,D,H)}(T);if(de.toRoot())return mo(D.root,D.root,new te([],{}),H,Q);const fe=function Wo(P,D,T){if(P.isAbsolute)return new ys(D.root,!0,0);if(-1===T.snapshot._lastPathIndex){const de=T.snapshot._urlSegment;return new ys(de,de===D.root,0)}const H=js(P.commands[0])?0:1;return function Os(P,D,T){let H=P,Q=D,de=T;for(;de>Q;){if(de-=Q,H=H.parent,!H)throw new Error("Invalid number of '../'");Q=H.segments.length}return new ys(H,!1,Q-de)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+H,P.numberOfDoubleDots)}(de,D,P),Le=fe.processChildren?oo(fe.segmentGroup,fe.index,de.commands):Ss(fe.segmentGroup,fe.index,de.commands);return mo(D.root,fe.segmentGroup,Le,H,Q)}(vn,this.currentUrlTree,T,Wt,null!=Jt?Jt:null)}navigateByUrl(T,H={skipLocationChange:!1}){const Q=ws(T)?T:this.parseUrl(T),de=this.urlHandlingStrategy.merge(Q,this.rawUrlTree);return this.scheduleNavigation(de,"imperative",null,H)}navigate(T,H={skipLocationChange:!1}){return function no(P){for(let D=0;D<P.length;D++){const T=P[D];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${D}`)}}(T),this.navigateByUrl(this.createUrlTree(T,H),H)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let H;try{H=this.urlSerializer.parse(T)}catch(Q){H=this.malformedUriErrorHandler(Q,this.urlSerializer,T)}return H}isActive(T,H){let Q;if(Q=!0===H?Object.assign({},Ta):!1===H?Object.assign({},Io):H,ws(T))return Vi(this.currentUrlTree,T,Q);const de=this.parseUrl(T);return Vi(this.currentUrlTree,de,Q)}removeEmptyProps(T){return Object.keys(T).reduce((H,Q)=>{const de=T[Q];return null!=de&&(H[Q]=de),H},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new wn(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,H,Q,de,fe){var Le,Ft;if(this.disposed)return Promise.resolve(!1);let vn,Jt,Wt;fe?(vn=fe.resolve,Jt=fe.reject,Wt=fe.promise):Wt=new Promise((Dt,jt)=>{vn=Dt,Jt=jt});const Ri=++this.navigationId;let tn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Q=this.location.getState()),tn=Q&&Q.\u0275routerPageId?Q.\u0275routerPageId:de.replaceUrl||de.skipLocationChange?null!==(Le=this.browserPageId)&&void 0!==Le?Le:0:(null!==(Ft=this.browserPageId)&&void 0!==Ft?Ft:0)+1):tn=0,this.setTransition({id:Ri,targetPageId:tn,source:H,restoredState:Q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:de,resolve:vn,reject:Jt,promise:Wt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Wt.catch(Dt=>Promise.reject(Dt))}setBrowserUrl(T,H){const Q=this.urlSerializer.serialize(T),de=Object.assign(Object.assign({},H.extras.state),this.generateNgRouterState(H.id,H.targetPageId));this.location.isCurrentPathEqualTo(Q)||H.extras.replaceUrl?this.location.replaceState(Q,"",de):this.location.go(Q,"",de)}restoreHistory(T,H=!1){var Q,de;if("computed"===this.canceledNavigationResolution){const fe=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Q=this.currentNavigation)||void 0===Q?void 0:Q.finalUrl)||0===fe?this.currentUrlTree===(null===(de=this.currentNavigation)||void 0===de?void 0:de.finalUrl)&&0===fe&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(fe)}else"replace"===this.canceledNavigationResolution&&(H&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,H){const Q=new kn(T.id,this.serializeUrl(T.extractedUrl),H);this.triggerEvent(Q),T.resolve(!1)}generateNgRouterState(T,H){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:H}:{navigationId:T}}}return P.\u0275fac=function(T){y.$Z()},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac}),P})();function sl(P){return"imperative"!==P}let fi=(()=>{class P{constructor(T,H,Q,de,fe){this.router=T,this.route=H,this.tabIndexAttribute=Q,this.renderer=de,this.el=fe,this.commands=null,this.onChanges=new ie.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){if(null!=this.tabIndexAttribute)return;const H=this.renderer,Q=this.el.nativeElement;null!==T?H.setAttribute(Q,"tabindex",T):H.removeAttribute(Q,"tabindex")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const T={skipLocationChange:uo(this.skipLocationChange),replaceUrl:uo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,T),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:uo(this.preserveFragment)})}}return P.\u0275fac=function(T){return new(T||P)(y.Y36(rs),y.Y36(lt),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq))},P.\u0275dir=y.lG2({type:P,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,H){1&T&&y.NdJ("click",function(){return H.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),P})(),ds=(()=>{class P{constructor(T,H,Q){this.router=T,this.route=H,this.locationStrategy=Q,this.commands=null,this.href=null,this.onChanges=new ie.x,this.subscription=T.events.subscribe(de=>{de instanceof wn&&this.updateTargetUrlAndHref()})}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:null}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,H,Q,de,fe){if(0!==T||H||Q||de||fe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Le={skipLocationChange:uo(this.skipLocationChange),replaceUrl:uo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Le),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:uo(this.preserveFragment)})}}return P.\u0275fac=function(T){return new(T||P)(y.Y36(rs),y.Y36(lt),y.Y36(st.S$))},P.\u0275dir=y.lG2({type:P,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,H){1&T&&y.NdJ("click",function(de){return H.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&T&&y.uIk("target",H.target)("href",H.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),P})();function uo(P){return""===P||!!P}class ba{}class Wa{preload(D,T){return(0,ee.of)(null)}}let au=(()=>{class P{constructor(T,H,Q,de){this.router=T,this.injector=Q,this.preloadingStrategy=de,this.loader=new da(Q,H,Ft=>T.triggerEvent(new On(Ft)),Ft=>T.triggerEvent(new Vn(Ft)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,un.h)(T=>T instanceof wn),(0,Ot.b)(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(y.h0i);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,H){const Q=[];for(const de of H)if(de.loadChildren&&!de.canLoad&&de._loadedConfig){const fe=de._loadedConfig;Q.push(this.processRoutes(fe.module,fe.routes))}else de.loadChildren&&!de.canLoad?Q.push(this.preloadConfig(T,de)):de.children&&Q.push(this.processRoutes(T,de.children));return(0,V.D)(Q).pipe((0,Ne.J)(),(0,Ht.U)(de=>{}))}preloadConfig(T,H){return this.preloadingStrategy.preload(H,()=>(H._loadedConfig?(0,ee.of)(H._loadedConfig):this.loader.load(T.injector,H)).pipe((0,Ce.z)(de=>(H._loadedConfig=de,this.processRoutes(de.module,de.routes)))))}}return P.\u0275fac=function(T){return new(T||P)(y.LFG(rs),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(ba))},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac}),P})(),Ko=(()=>{class P{constructor(T,H,Q={}){this.router=T,this.viewportScroller=H,this.options=Q,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Q.scrollPositionRestoration=Q.scrollPositionRestoration||"disabled",Q.anchorScrolling=Q.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof pn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof wn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof ze&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,H){this.router.triggerEvent(new ze(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,H))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return P.\u0275fac=function(T){y.$Z()},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac}),P})();const $i=new y.OlP("ROUTER_CONFIGURATION"),qo=new y.OlP("ROUTER_FORROOT_GUARD"),Zo=[st.Ye,{provide:an,useClass:Sn},{provide:rs,useFactory:function za(P,D,T,H,Q,de,fe={},Le,Ft){const vn=new rs(null,P,D,T,H,Q,rn(de));return Le&&(vn.urlHandlingStrategy=Le),Ft&&(vn.routeReuseStrategy=Ft),function wl(P,D){P.errorHandler&&(D.errorHandler=P.errorHandler),P.malformedUriErrorHandler&&(D.malformedUriErrorHandler=P.malformedUriErrorHandler),P.onSameUrlNavigation&&(D.onSameUrlNavigation=P.onSameUrlNavigation),P.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=P.paramsInheritanceStrategy),P.relativeLinkResolution&&(D.relativeLinkResolution=P.relativeLinkResolution),P.urlUpdateStrategy&&(D.urlUpdateStrategy=P.urlUpdateStrategy),P.canceledNavigationResolution&&(D.canceledNavigationResolution=P.canceledNavigationResolution)}(fe,vn),fe.enableTracing&&vn.events.subscribe(Jt=>{var Wt,Ri;null===(Wt=console.group)||void 0===Wt||Wt.call(console,`Router Event: ${Jt.constructor.name}`),console.log(Jt.toString()),console.log(Jt),null===(Ri=console.groupEnd)||void 0===Ri||Ri.call(console)}),vn},deps:[an,Zr,st.Ye,y.zs3,y.Sil,Ai,$i,[class Ia{},new y.FiY],[class eo{},new y.FiY]]},Zr,{provide:lt,useFactory:function ol(P){return P.routerState.root},deps:[rs]},au,Wa,class Da{preload(D,T){return T().pipe((0,sn.K)(()=>(0,ee.of)(null)))}},{provide:$i,useValue:{enableTracing:!1}}];function Fs(){return new y.PXZ("Router",rs)}let vs=(()=>{class P{constructor(T,H){}static forRoot(T,H){return{ngModule:P,providers:[Zo,Sa(T),{provide:qo,useFactory:Ol,deps:[[rs,new y.FiY,new y.tp0]]},{provide:$i,useValue:H||{}},{provide:st.S$,useFactory:bo,deps:[st.lw,[new y.tBr(st.mr),new y.FiY],$i]},{provide:Ko,useFactory:sa,deps:[rs,st.EM,$i]},{provide:ba,useExisting:H&&H.preloadingStrategy?H.preloadingStrategy:Wa},{provide:y.PXZ,multi:!0,useFactory:Fs},[Yo,{provide:y.ip1,multi:!0,useFactory:zl,deps:[Yo]},{provide:Kl,useFactory:oa,deps:[Yo]},{provide:y.tb,multi:!0,useExisting:Kl}]]}}static forChild(T){return{ngModule:P,providers:[Sa(T)]}}}return P.\u0275fac=function(T){return new(T||P)(y.LFG(qo,8),y.LFG(rs,8))},P.\u0275mod=y.oAB({type:P}),P.\u0275inj=y.cJS({}),P})();function sa(P,D,T){return T.scrollOffset&&D.setOffset(T.scrollOffset),new Ko(P,D,T)}function bo(P,D,T={}){return T.useHash?new st.Do(P,D):new st.b0(P,D)}function Ol(P){return"guarded"}function Sa(P){return[{provide:y.deG,multi:!0,useValue:P},{provide:Ai,multi:!0,useValue:P}]}let Yo=(()=>{class P{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ie.x}appInitializer(){return this.injector.get(st.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let H=null;const Q=new Promise(Le=>H=Le),de=this.injector.get(rs),fe=this.injector.get($i);return"disabled"===fe.initialNavigation?(de.setUpLocationChangeListener(),H(!0)):"enabled"===fe.initialNavigation||"enabledBlocking"===fe.initialNavigation?(de.hooks.afterPreactivation=()=>this.initNavigation?(0,ee.of)(null):(this.initNavigation=!0,H(!0),this.resultOfPreactivationDone),de.initialNavigation()):H(!0),Q})}bootstrapListener(T){const H=this.injector.get($i),Q=this.injector.get(au),de=this.injector.get(Ko),fe=this.injector.get(rs),Le=this.injector.get(y.z2F);T===Le.components[0]&&(("enabledNonBlocking"===H.initialNavigation||void 0===H.initialNavigation)&&fe.initialNavigation(),Q.setUpPreloading(),de.init(),fe.resetRootComponentType(Le.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return P.\u0275fac=function(T){return new(T||P)(y.LFG(y.zs3))},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac}),P})();function zl(P){return P.appInitializer.bind(P)}function oa(P){return P.bootstrapListener.bind(P)}const Kl=new y.OlP("Router Initializer")},3942:(hn,ct,U)=>{U.d(ct,{Z:()=>_t});var y=U(2090),V=U(4859),ee=U(6881),ie=U(1877);class ke{constructor(dt,ot){this._delegate=dt,this.firebase=ot,(0,ee._addComponent)(dt,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=dt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(dt){this._delegate.automaticDataCollectionEnabled=dt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(dt=>{this._delegate.checkDestroyed(),dt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(dt,ot=ee._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const qt=this._delegate.container.getProvider(dt);return!qt.isInitialized()&&"EXPLICIT"===(null===(Ge=qt.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&qt.initialize(),qt.getImmediate({identifier:ot})}_removeServiceInstance(dt,ot=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(dt).clearInstance(ot)}_addComponent(dt){(0,ee._addComponent)(this._delegate,dt)}_addOrOverwriteComponent(dt){(0,ee._addOrOverwriteComponent)(this._delegate,dt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xe=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ie=function nt(){const Vt=function He(Vt){const dt={},ot={__esModule:!0,initializeApp:function at(bt,Se={}){const Ht=ee.initializeApp(bt,Se);if((0,y.r3)(dt,Ht.name))return dt[Ht.name];const Nt=new Vt(Ht,ot);return dt[Ht.name]=Nt,Nt},app:qt,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function Je(bt){const Se=bt.name,Ht=Se.replace("-compat","");if(ee._registerComponent(bt)&&"PUBLIC"===bt.type){const Nt=(Rn=qt())=>{if("function"!=typeof Rn[Ht])throw Xe.create("invalid-app-argument",{appName:Se});return Rn[Ht]()};void 0!==bt.serviceProps&&(0,y.ZB)(Nt,bt.serviceProps),ot[Ht]=Nt,Vt.prototype[Ht]=function(...Rn){return this._getService.bind(this,Se).apply(this,bt.multipleInstances?Rn:[])}}return"PUBLIC"===bt.type?ot[Ht]:null},removeApp:function Ge(bt){delete dt[bt]},useAsService:function Ct(bt,Se){return"serverAuth"===Se?null:Se},modularAPIs:ee}};function qt(bt){if(!(0,y.r3)(dt,bt=bt||ee._DEFAULT_ENTRY_NAME))throw Xe.create("no-app",{appName:bt});return dt[bt]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function De(){return Object.keys(dt).map(bt=>dt[bt])}}),qt.App=Vt,ot}(ke);return Vt.INTERNAL=Object.assign(Object.assign({},Vt.INTERNAL),{createFirebaseNamespace:nt,extendNamespace:function dt(ot){(0,y.ZB)(Vt,ot)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),Vt}(),ve=new ie.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Vt=self.firebase.SDK_VERSION;Vt&&Vt.indexOf("LITE")>=0&&ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _t=Ie;!function vt(Vt){(0,ee.registerVersion)("@firebase/app-compat","0.2.13",Vt)}()},6881:(hn,ct,U)=>{U.r(ct),U.d(ct,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>rn,_DEFAULT_ENTRY_NAME:()=>xt,_addComponent:()=>At,_addOrOverwriteComponent:()=>Yt,_apps:()=>ze,_clearComponents:()=>Un,_components:()=>ft,_getProvider:()=>Dr,_registerComponent:()=>on,_removeServiceInstance:()=>Kn,deleteApp:()=>Qn,getApp:()=>Xn,getApps:()=>cr,initializeApp:()=>Mr,onLog:()=>ni,registerVersion:()=>jr,setLogLevel:()=>Vi});var y=U(5861),V=U(4859),ee=U(1877),ie=U(2090);let je,Xe;const Ie=new WeakMap,ve=new WeakMap,Qe=new WeakMap,St=new WeakMap,vt=new WeakMap;let dt={get(Tt,mt,Ut){if(Tt instanceof IDBTransaction){if("done"===mt)return ve.get(Tt);if("objectStoreNames"===mt)return Tt.objectStoreNames||Qe.get(Tt);if("store"===mt)return Ut.objectStoreNames[1]?void 0:Ut.objectStore(Ut.objectStoreNames[0])}return at(Tt[mt])},set:(Tt,mt,Ut)=>(Tt[mt]=Ut,!0),has:(Tt,mt)=>Tt instanceof IDBTransaction&&("done"===mt||"store"===mt)||mt in Tt};function qt(Tt){return"function"==typeof Tt?function Ge(Tt){return Tt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function nt(){return Xe||(Xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Tt)?function(...mt){return Tt.apply(De(this),mt),at(Ie.get(this))}:function(...mt){return at(Tt.apply(De(this),mt))}:function(mt,...Ut){const Rt=Tt.call(De(this),mt,...Ut);return Qe.set(Rt,mt.sort?mt.sort():[mt]),at(Rt)}}(Tt):(Tt instanceof IDBTransaction&&function Vt(Tt){if(ve.has(Tt))return;const mt=new Promise((Ut,Rt)=>{const ln=()=>{Tt.removeEventListener("complete",bn),Tt.removeEventListener("error",rr),Tt.removeEventListener("abort",rr)},bn=()=>{Ut(),ln()},rr=()=>{Rt(Tt.error||new DOMException("AbortError","AbortError")),ln()};Tt.addEventListener("complete",bn),Tt.addEventListener("error",rr),Tt.addEventListener("abort",rr)});ve.set(Tt,mt)}(Tt),((Tt,mt)=>mt.some(Ut=>Tt instanceof Ut))(Tt,function He(){return je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Tt,dt):Tt)}function at(Tt){if(Tt instanceof IDBRequest)return function _t(Tt){const mt=new Promise((Ut,Rt)=>{const ln=()=>{Tt.removeEventListener("success",bn),Tt.removeEventListener("error",rr)},bn=()=>{Ut(at(Tt.result)),ln()},rr=()=>{Rt(Tt.error),ln()};Tt.addEventListener("success",bn),Tt.addEventListener("error",rr)});return mt.then(Ut=>{Ut instanceof IDBCursor&&Ie.set(Ut,Tt)}).catch(()=>{}),vt.set(mt,Tt),mt}(Tt);if(St.has(Tt))return St.get(Tt);const mt=qt(Tt);return mt!==Tt&&(St.set(Tt,mt),vt.set(mt,Tt)),mt}const De=Tt=>vt.get(Tt),bt=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Ht=new Map;function Nt(Tt,mt){if(!(Tt instanceof IDBDatabase)||mt in Tt||"string"!=typeof mt)return;if(Ht.get(mt))return Ht.get(mt);const Ut=mt.replace(/FromIndex$/,""),Rt=mt!==Ut,ln=Se.includes(Ut);if(!(Ut in(Rt?IDBIndex:IDBObjectStore).prototype)||!ln&&!bt.includes(Ut))return;const bn=function(){var rr=(0,y.Z)(function*(Kr,...yr){const ri=this.transaction(Kr,ln?"readwrite":"readonly");let Hr=ri.store;return Rt&&(Hr=Hr.index(yr.shift())),(yield Promise.all([Hr[Ut](...yr),ln&&ri.done]))[0]});return function(yr){return rr.apply(this,arguments)}}();return Ht.set(mt,bn),bn}!function ot(Tt){dt=Tt(dt)}(Tt=>D_(b_({},Tt),{get:(mt,Ut,Rt)=>Nt(mt,Ut)||Tt.get(mt,Ut,Rt),has:(mt,Ut)=>!!Nt(mt,Ut)||Tt.has(mt,Ut)}));class Rn{constructor(mt){this.container=mt}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function En(Tt){const mt=Tt.getComponent();return"VERSION"===(null==mt?void 0:mt.type)}(Ut)){const Rt=Ut.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(Ut=>Ut).join(" ")}}const Ln="@firebase/app",sn=new ee.Yd("@firebase/app"),xt="[DEFAULT]",We={[Ln]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ze=new Map,ft=new Map;function At(Tt,mt){try{Tt.container.addComponent(mt)}catch(Ut){sn.debug(`Component ${mt.name} failed to register with FirebaseApp ${Tt.name}`,Ut)}}function Yt(Tt,mt){Tt.container.addOrOverwriteComponent(mt)}function on(Tt){const mt=Tt.name;if(ft.has(mt))return sn.debug(`There were multiple attempts to register component ${mt}.`),!1;ft.set(mt,Tt);for(const Ut of ze.values())At(Ut,Tt);return!0}function Dr(Tt,mt){const Ut=Tt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ut&&Ut.triggerHeartbeat(),Tt.container.getProvider(mt)}function Kn(Tt,mt,Ut=xt){Dr(Tt,mt).clearInstance(Ut)}function Un(){ft.clear()}const ar=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mr{constructor(mt,Ut,Rt){this._isDeleted=!1,this._options=Object.assign({},mt),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this.checkDestroyed(),this._automaticDataCollectionEnabled=mt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(mt){this._isDeleted=mt}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}const rn="9.23.0";function Mr(Tt,mt={}){let Ut=Tt;"object"!=typeof mt&&(mt={name:mt});const Rt=Object.assign({name:xt,automaticDataCollectionEnabled:!1},mt),ln=Rt.name;if("string"!=typeof ln||!ln)throw ar.create("bad-app-name",{appName:String(ln)});if(Ut||(Ut=(0,ie.aH)()),!Ut)throw ar.create("no-options");const bn=ze.get(ln);if(bn){if((0,ie.vZ)(Ut,bn.options)&&(0,ie.vZ)(Rt,bn.config))return bn;throw ar.create("duplicate-app",{appName:ln})}const rr=new V.H0(ln);for(const yr of ft.values())rr.addComponent(yr);const Kr=new mr(Ut,Rt,rr);return ze.set(ln,Kr),Kr}function Xn(Tt=xt){const mt=ze.get(Tt);if(!mt&&Tt===xt&&(0,ie.aH)())return Mr();if(!mt)throw ar.create("no-app",{appName:Tt});return mt}function cr(){return Array.from(ze.values())}function Qn(Tt){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,y.Z)(function*(Tt){const mt=Tt.name;ze.has(mt)&&(ze.delete(mt),yield Promise.all(Tt.container.getProviders().map(Ut=>Ut.delete())),Tt.isDeleted=!0)})).apply(this,arguments)}function jr(Tt,mt,Ut){var Rt;let ln=null!==(Rt=We[Tt])&&void 0!==Rt?Rt:Tt;Ut&&(ln+=`-${Ut}`);const bn=ln.match(/\s|\//),rr=mt.match(/\s|\//);if(bn||rr){const Kr=[`Unable to register library "${ln}" with version "${mt}":`];return bn&&Kr.push(`library name "${ln}" contains illegal characters (whitespace or "/")`),bn&&rr&&Kr.push("and"),rr&&Kr.push(`version name "${mt}" contains illegal characters (whitespace or "/")`),void sn.warn(Kr.join(" "))}on(new V.wA(`${ln}-version`,()=>({library:ln,version:mt}),"VERSION"))}function ni(Tt,mt){if(null!==Tt&&"function"!=typeof Tt)throw ar.create("invalid-log-argument");(0,ee.Am)(Tt,mt)}function Vi(Tt){(0,ee.Ub)(Tt)}const Ue="firebase-heartbeat-store";let Pe=null;function me(){return Pe||(Pe=function Je(Tt,mt,{blocked:Ut,upgrade:Rt,blocking:ln,terminated:bn}={}){const rr=indexedDB.open(Tt,mt),Kr=at(rr);return Rt&&rr.addEventListener("upgradeneeded",yr=>{Rt(at(rr.result),yr.oldVersion,yr.newVersion,at(rr.transaction),yr)}),Ut&&rr.addEventListener("blocked",yr=>Ut(yr.oldVersion,yr.newVersion,yr)),Kr.then(yr=>{bn&&yr.addEventListener("close",()=>bn()),ln&&yr.addEventListener("versionchange",ri=>ln(ri.oldVersion,ri.newVersion,ri))}).catch(()=>{}),Kr}("firebase-heartbeat-database",1,{upgrade:(Tt,mt)=>{0===mt&&Tt.createObjectStore(Ue)}}).catch(Tt=>{throw ar.create("idb-open",{originalErrorMessage:Tt.message})})),Pe}function z(){return(z=(0,y.Z)(function*(Tt){try{return yield(yield me()).transaction(Ue).objectStore(Ue).get(xe(Tt))}catch(mt){if(mt instanceof ie.ZR)sn.warn(mt.message);else{const Ut=ar.create("idb-get",{originalErrorMessage:null==mt?void 0:mt.message});sn.warn(Ut.message)}}})).apply(this,arguments)}function te(Tt,mt){return se.apply(this,arguments)}function se(){return(se=(0,y.Z)(function*(Tt,mt){try{const Rt=(yield me()).transaction(Ue,"readwrite");yield Rt.objectStore(Ue).put(mt,xe(Tt)),yield Rt.done}catch(Ut){if(Ut instanceof ie.ZR)sn.warn(Ut.message);else{const Rt=ar.create("idb-set",{originalErrorMessage:null==Ut?void 0:Ut.message});sn.warn(Rt.message)}}})).apply(this,arguments)}function xe(Tt){return`${Tt.name}!${Tt.options.appId}`}class an{constructor(mt){this.container=mt,this._heartbeatsCache=null;const Ut=this.container.getProvider("app").getImmediate();this._storage=new tr(Ut),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}triggerHeartbeat(){var mt=this;return(0,y.Z)(function*(){const Rt=mt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ln=Sn();if(null===mt._heartbeatsCache&&(mt._heartbeatsCache=yield mt._heartbeatsCachePromise),mt._heartbeatsCache.lastSentHeartbeatDate!==ln&&!mt._heartbeatsCache.heartbeats.some(bn=>bn.date===ln))return mt._heartbeatsCache.heartbeats.push({date:ln,agent:Rt}),mt._heartbeatsCache.heartbeats=mt._heartbeatsCache.heartbeats.filter(bn=>{const rr=new Date(bn.date).valueOf();return Date.now()-rr<=2592e6}),mt._storage.overwrite(mt._heartbeatsCache)})()}getHeartbeatsHeader(){var mt=this;return(0,y.Z)(function*(){if(null===mt._heartbeatsCache&&(yield mt._heartbeatsCachePromise),null===mt._heartbeatsCache||0===mt._heartbeatsCache.heartbeats.length)return"";const Ut=Sn(),{heartbeatsToSend:Rt,unsentEntries:ln}=function gr(Tt,mt=1024){const Ut=[];let Rt=Tt.slice();for(const ln of Tt){const bn=Ut.find(rr=>rr.agent===ln.agent);if(bn){if(bn.dates.push(ln.date),ai(Ut)>mt){bn.dates.pop();break}}else if(Ut.push({agent:ln.agent,dates:[ln.date]}),ai(Ut)>mt){Ut.pop();break}Rt=Rt.slice(1)}return{heartbeatsToSend:Ut,unsentEntries:Rt}}(mt._heartbeatsCache.heartbeats),bn=(0,ie.L)(JSON.stringify({version:2,heartbeats:Rt}));return mt._heartbeatsCache.lastSentHeartbeatDate=Ut,ln.length>0?(mt._heartbeatsCache.heartbeats=ln,yield mt._storage.overwrite(mt._heartbeatsCache)):(mt._heartbeatsCache.heartbeats=[],mt._storage.overwrite(mt._heartbeatsCache)),bn})()}}function Sn(){return(new Date).toISOString().substring(0,10)}class tr{constructor(mt){this.app=mt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var mt=this;return(0,y.Z)(function*(){return(yield mt._canUseIndexedDBPromise)&&(yield function ye(Tt){return z.apply(this,arguments)}(mt.app))||{heartbeats:[]}})()}overwrite(mt){var Ut=this;return(0,y.Z)(function*(){var Rt;if(yield Ut._canUseIndexedDBPromise){const bn=yield Ut.read();return te(Ut.app,{lastSentHeartbeatDate:null!==(Rt=mt.lastSentHeartbeatDate)&&void 0!==Rt?Rt:bn.lastSentHeartbeatDate,heartbeats:mt.heartbeats})}})()}add(mt){var Ut=this;return(0,y.Z)(function*(){var Rt;if(yield Ut._canUseIndexedDBPromise){const bn=yield Ut.read();return te(Ut.app,{lastSentHeartbeatDate:null!==(Rt=mt.lastSentHeartbeatDate)&&void 0!==Rt?Rt:bn.lastSentHeartbeatDate,heartbeats:[...bn.heartbeats,...mt.heartbeats]})}})()}}function ai(Tt){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Tt})).length}!function Ci(Tt){on(new V.wA("platform-logger",mt=>new Rn(mt),"PRIVATE")),on(new V.wA("heartbeat",mt=>new an(mt),"PRIVATE")),jr(Ln,"0.9.13",Tt),jr(Ln,"0.9.13","esm2017"),jr("fire-js","")}("")},4859:(hn,ct,U)=>{U.d(ct,{H0:()=>He,wA:()=>ee,zt:()=>ke});var y=U(5861),V=U(2090);class ee{constructor(Ie,ve,Qe){this.name=Ie,this.instanceFactory=ve,this.type=Qe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ie){return this.instantiationMode=Ie,this}setMultipleInstances(Ie){return this.multipleInstances=Ie,this}setServiceProps(Ie){return this.serviceProps=Ie,this}setInstanceCreatedCallback(Ie){return this.onInstanceCreated=Ie,this}}const ie="[DEFAULT]";class ke{constructor(Ie,ve){this.name=Ie,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ie){const ve=this.normalizeInstanceIdentifier(Ie);if(!this.instancesDeferred.has(ve)){const Qe=new V.BH;if(this.instancesDeferred.set(ve,Qe),this.isInitialized(ve)||this.shouldAutoInitialize())try{const St=this.getOrInitializeService({instanceIdentifier:ve});St&&Qe.resolve(St)}catch(St){}}return this.instancesDeferred.get(ve).promise}getImmediate(Ie){var ve;const Qe=this.normalizeInstanceIdentifier(null==Ie?void 0:Ie.identifier),St=null!==(ve=null==Ie?void 0:Ie.optional)&&void 0!==ve&&ve;if(!this.isInitialized(Qe)&&!this.shouldAutoInitialize()){if(St)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Qe})}catch(vt){if(St)return null;throw vt}}getComponent(){return this.component}setComponent(Ie){if(Ie.name!==this.name)throw Error(`Mismatching Component ${Ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ie,this.shouldAutoInitialize()){if(function Xe(nt){return"EAGER"===nt.instantiationMode}(Ie))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(ve){}for(const[ve,Qe]of this.instancesDeferred.entries()){const St=this.normalizeInstanceIdentifier(ve);try{const vt=this.getOrInitializeService({instanceIdentifier:St});Qe.resolve(vt)}catch(vt){}}}}clearInstance(Ie=ie){this.instancesDeferred.delete(Ie),this.instancesOptions.delete(Ie),this.instances.delete(Ie)}delete(){var Ie=this;return(0,y.Z)(function*(){const ve=Array.from(Ie.instances.values());yield Promise.all([...ve.filter(Qe=>"INTERNAL"in Qe).map(Qe=>Qe.INTERNAL.delete()),...ve.filter(Qe=>"_delete"in Qe).map(Qe=>Qe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ie=ie){return this.instances.has(Ie)}getOptions(Ie=ie){return this.instancesOptions.get(Ie)||{}}initialize(Ie={}){const{options:ve={}}=Ie,Qe=this.normalizeInstanceIdentifier(Ie.instanceIdentifier);if(this.isInitialized(Qe))throw Error(`${this.name}(${Qe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const St=this.getOrInitializeService({instanceIdentifier:Qe,options:ve});for(const[vt,_t]of this.instancesDeferred.entries())Qe===this.normalizeInstanceIdentifier(vt)&&_t.resolve(St);return St}onInit(Ie,ve){var Qe;const St=this.normalizeInstanceIdentifier(ve),vt=null!==(Qe=this.onInitCallbacks.get(St))&&void 0!==Qe?Qe:new Set;vt.add(Ie),this.onInitCallbacks.set(St,vt);const _t=this.instances.get(St);return _t&&Ie(_t,St),()=>{vt.delete(Ie)}}invokeOnInitCallbacks(Ie,ve){const Qe=this.onInitCallbacks.get(ve);if(Qe)for(const St of Qe)try{St(Ie,ve)}catch(vt){}}getOrInitializeService({instanceIdentifier:Ie,options:ve={}}){let Qe=this.instances.get(Ie);if(!Qe&&this.component&&(Qe=this.component.instanceFactory(this.container,{instanceIdentifier:(nt=Ie,nt===ie?void 0:nt),options:ve}),this.instances.set(Ie,Qe),this.instancesOptions.set(Ie,ve),this.invokeOnInitCallbacks(Qe,Ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ie,Qe)}catch(St){}var nt;return Qe||null}normalizeInstanceIdentifier(Ie=ie){return this.component?this.component.multipleInstances?Ie:ie:Ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(Ie){this.name=Ie,this.providers=new Map}addComponent(Ie){const ve=this.getProvider(Ie.name);if(ve.isComponentSet())throw new Error(`Component ${Ie.name} has already been registered with ${this.name}`);ve.setComponent(Ie)}addOrOverwriteComponent(Ie){this.getProvider(Ie.name).isComponentSet()&&this.providers.delete(Ie.name),this.addComponent(Ie)}getProvider(Ie){if(this.providers.has(Ie))return this.providers.get(Ie);const ve=new ke(Ie,this);return this.providers.set(Ie,ve),ve}getProviders(){return Array.from(this.providers.values())}}},1877:(hn,ct,U)=>{U.d(ct,{Am:()=>nt,Ub:()=>He,Yd:()=>Xe,in:()=>V});const y=[];var V=(()=>{return(Ie=V||(V={}))[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",V;var Ie})();const ee={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ie=V.INFO,ke={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},je=(Ie,ve,...Qe)=>{if(ve<Ie.logLevel)return;const St=(new Date).toISOString(),vt=ke[ve];if(!vt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[vt](`[${St}]  ${Ie.name}:`,...Qe)};class Xe{constructor(ve){this.name=ve,this._logLevel=ie,this._logHandler=je,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in V))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?ee[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...ve),this._logHandler(this,V.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...ve),this._logHandler(this,V.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,V.INFO,...ve),this._logHandler(this,V.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,V.WARN,...ve),this._logHandler(this,V.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...ve),this._logHandler(this,V.ERROR,...ve)}}function He(Ie){y.forEach(ve=>{ve.setLogLevel(Ie)})}function nt(Ie,ve){for(const Qe of y){let St=null;ve&&ve.level&&(St=ee[ve.level]),Qe.userLogHandler=null===Ie?null:(vt,_t,...Vt)=>{const dt=Vt.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch(Ge){return null}}).filter(ot=>ot).join(" ");_t>=(null!=St?St:vt.logLevel)&&Ie({level:V[_t].toLowerCase(),message:dt,args:Vt,type:vt.name})}}}},259:(hn,ct,U)=>{U.d(ct,{C6:()=>y.getApps,KN:()=>y.registerVersion,Mq:()=>y.getApp,ZF:()=>y.initializeApp});var y=U(6881);(0,y.registerVersion)("firebase","9.23.0","app")},9260:(hn,ct,U)=>{U.d(ct,{Z:()=>y.Z});var y=U(3942);y.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(hn,ct,U)=>{U.r(ct);var y=U(5861),V=U(3942),ee=U(1389),ie=U(2090),Xe=(U(6881),U(1877),U(4859));function He(){return window}function ve(){return(ve=(0,y.Z)(function*(me,ye,z){var te;const{BuildInfo:se}=He();(0,ee.as)(ye.sessionId,"AuthEvent did not contain a session ID");const xe=yield ot(ye.sessionId),pt={};return(0,ee.at)()?pt.ibi=se.packageName:(0,ee.au)()?pt.apn=se.packageName:(0,ee.av)(me,"operation-not-supported-in-this-environment"),se.displayName&&(pt.appDisplayName=se.displayName),pt.sessionId=xe,(0,ee.aw)(me,z,ye.type,void 0,null!==(te=ye.eventId)&&void 0!==te?te:void 0,pt)})).apply(this,arguments)}function St(){return(St=(0,y.Z)(function*(me){const{BuildInfo:ye}=He(),z={};(0,ee.at)()?z.iosBundleId=ye.packageName:(0,ee.au)()?z.androidPackageName=ye.packageName:(0,ee.av)(me,"operation-not-supported-in-this-environment"),yield(0,ee.ax)(me,z)})).apply(this,arguments)}function Vt(){return(Vt=(0,y.Z)(function*(me,ye,z){const{cordova:te}=He();let se=()=>{};try{yield new Promise((xe,pt)=>{let Bt=null;function an(){var tr;xe();const ai=null===(tr=te.plugins.browsertab)||void 0===tr?void 0:tr.close;"function"==typeof ai&&ai(),"function"==typeof(null==z?void 0:z.close)&&z.close()}function Sn(){Bt||(Bt=window.setTimeout(()=>{pt((0,ee.az)(me,"redirect-cancelled-by-user"))},2e3))}function gr(){"visible"===(null==document?void 0:document.visibilityState)&&Sn()}ye.addPassiveListener(an),document.addEventListener("resume",Sn,!1),(0,ee.au)()&&document.addEventListener("visibilitychange",gr,!1),se=()=>{ye.removePassiveListener(an),document.removeEventListener("resume",Sn,!1),document.removeEventListener("visibilitychange",gr,!1),Bt&&window.clearTimeout(Bt)}})}finally{se()}})).apply(this,arguments)}function ot(me){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,y.Z)(function*(me){const ye=qt(me),z=yield crypto.subtle.digest("SHA-256",ye);return Array.from(new Uint8Array(z)).map(se=>se.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qt(me){if((0,ee.as)(/[0-9a-zA-Z]+/.test(me),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(me);const ye=new ArrayBuffer(me.length),z=new Uint8Array(ye);for(let te=0;te<me.length;te++)z[te]=me.charCodeAt(te);return z}class De extends ee.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ye=>{this.resolveInialized=ye})}addPassiveListener(ye){this.passiveListeners.add(ye)}removePassiveListener(ye){this.passiveListeners.delete(ye)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ye){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(ye)),super.onEvent(ye)}initialized(){var ye=this;return(0,y.Z)(function*(){yield ye.initPromise})()}}function bt(me){return Se.apply(this,arguments)}function Se(){return(Se=(0,y.Z)(function*(me){const ye=yield Rn()._get(En(me));return ye&&(yield Rn()._remove(En(me))),ye})).apply(this,arguments)}function Nt(){const me=[],ye="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const te=Math.floor(Math.random()*ye.length);me.push(ye.charAt(te))}return me.join("")}function Rn(){return(0,ee.aC)(ee.b)}function En(me){return(0,ee.aD)("authEvent",me.config.apiKey,me.name)}function sn(me){if(!(null==me?void 0:me.includes("?")))return{};const[ye,...z]=me.split("?");return(0,ie.zd)(z.join("?"))}function cn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ee.az)("no-auth-event")}}function Ee(){var me;return(null===(me=null==self?void 0:self.location)||void 0===me?void 0:me.protocol)||null}function st(me=(0,ie.z$)()){return!("file:"!==Ee()&&"ionic:"!==Ee()&&"capacitor:"!==Ee()||!me.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){try{const me=self.localStorage,ye=ee.aL();if(me)return me.setItem(ye,"1"),me.removeItem(ye),!function kn(me=(0,ie.z$)()){return function pn(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function wn(me=(0,ie.z$)()){return/Edge\/\d+/.test(me)}(me)}()||(0,ie.hl)()}catch(me){return _r()&&(0,ie.hl)()}return!1}function _r(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function Ne(){return"http:"===Ee()||"https:"===Ee()}()||(0,ie.ru)()||st())&&!function Zt(){return(0,ie.b$)()||(0,ie.UG)()}()&&ur()&&!_r()}function Jn(){return st()&&"undefined"!=typeof document}function nr(){return(nr=(0,y.Z)(function*(){return!!Jn()&&new Promise(me=>{const ye=setTimeout(()=>{me(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ye),me(!0)})})})).apply(this,arguments)}const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},ti=ee.aA,Li="persistence";function We(me){return ze.apply(this,arguments)}function ze(){return(ze=(0,y.Z)(function*(me){yield me._initializationPromise;const ye=At(),z=ee.aD(Li,me.config.apiKey,me.name);ye&&ye.setItem(z,me._getPersistence())})).apply(this,arguments)}function At(){var me;try{return(null===(me=function On(){return"undefined"!=typeof window?window:null}())||void 0===me?void 0:me.sessionStorage)||null}catch(ye){return null}}const Yt=ee.aA;class on{constructor(){this.browserResolver=ee.aC(ee.k),this.cordovaResolver=ee.aC(class or{constructor(){this._redirectPersistence=ee.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ee.aE,this._overrideRedirectResult=ee.aF}_initialize(ye){var z=this;return(0,y.Z)(function*(){const te=ye._key();let se=z.eventManagers.get(te);return se||(se=new De(ye),z.eventManagers.set(te,se),z.attachCallbackListeners(ye,se)),se})()}_openPopup(ye){(0,ee.av)(ye,"operation-not-supported-in-this-environment")}_openRedirect(ye,z,te,se){var xe=this;return(0,y.Z)(function*(){!function dt(me){var ye,z,te,se,xe,pt,Bt,an,Sn,gr;const tr=He();(0,ee.aA)("function"==typeof(null===(ye=null==tr?void 0:tr.universalLinks)||void 0===ye?void 0:ye.subscribe),me,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ee.aA)(void 0!==(null===(z=null==tr?void 0:tr.BuildInfo)||void 0===z?void 0:z.packageName),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ee.aA)("function"==typeof(null===(xe=null===(se=null===(te=null==tr?void 0:tr.cordova)||void 0===te?void 0:te.plugins)||void 0===se?void 0:se.browsertab)||void 0===xe?void 0:xe.openUrl),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.aA)("function"==typeof(null===(an=null===(Bt=null===(pt=null==tr?void 0:tr.cordova)||void 0===pt?void 0:pt.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===an?void 0:an.isAvailable),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.aA)("function"==typeof(null===(gr=null===(Sn=null==tr?void 0:tr.cordova)||void 0===Sn?void 0:Sn.InAppBrowser)||void 0===gr?void 0:gr.open),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ye);const pt=yield xe._initialize(ye);yield pt.initialized(),pt.resetRedirect(),(0,ee.aG)(),yield xe._originValidation(ye);const Bt=function Je(me,ye,z=null){return{type:ye,eventId:z,urlResponse:null,sessionId:Nt(),postBody:null,tenantId:me.tenantId,error:(0,ee.az)(me,"no-auth-event")}}(ye,te,se);yield function Ct(me,ye){return Rn()._set(En(me),ye)}(ye,Bt);const an=yield function Ie(me,ye,z){return ve.apply(this,arguments)}(ye,Bt,z),Sn=yield function vt(me){const{cordova:ye}=He();return new Promise(z=>{ye.plugins.browsertab.isAvailable(te=>{let se=null;te?ye.plugins.browsertab.openUrl(me):se=ye.InAppBrowser.open(me,(0,ee.ay)()?"_blank":"_system","location=yes"),z(se)})})}(an);return function _t(me,ye,z){return Vt.apply(this,arguments)}(ye,pt,Sn)})()}_isIframeWebStorageSupported(ye,z){throw new Error("Method not implemented.")}_originValidation(ye){const z=ye._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function Qe(me){return St.apply(this,arguments)}(ye)),this.originValidationPromises[z]}attachCallbackListeners(ye,z){const{universalLinks:te,handleOpenURL:se,BuildInfo:xe}=He(),pt=setTimeout((0,y.Z)(function*(){yield bt(ye),z.onEvent(cn())}),500),Bt=function(){var gr=(0,y.Z)(function*(tr){clearTimeout(pt);const ai=yield bt(ye);let Ci=null;ai&&(null==tr?void 0:tr.url)&&(Ci=function Ht(me,ye){var z,te;const se=function un(me){const ye=sn(me),z=ye.link?decodeURIComponent(ye.link):void 0,te=sn(z).link,se=ye.deep_link_id?decodeURIComponent(ye.deep_link_id):void 0;return sn(se).link||se||te||z||me}(ye);if(se.includes("/__/auth/callback")){const xe=sn(se),pt=xe.firebaseError?function Ln(me){try{return JSON.parse(me)}catch(ye){return null}}(decodeURIComponent(xe.firebaseError)):null,Bt=null===(te=null===(z=null==pt?void 0:pt.code)||void 0===z?void 0:z.split("auth/"))||void 0===te?void 0:te[1],an=Bt?(0,ee.az)(Bt):null;return an?{type:me.type,eventId:me.eventId,tenantId:me.tenantId,error:an,urlResponse:null,sessionId:null,postBody:null}:{type:me.type,eventId:me.eventId,tenantId:me.tenantId,sessionId:me.sessionId,urlResponse:se,postBody:null}}return null}(ai,tr.url)),z.onEvent(Ci||cn())});return function(ai){return gr.apply(this,arguments)}}();void 0!==te&&"function"==typeof te.subscribe&&te.subscribe(null,Bt);const an=se,Sn=`${xe.packageName.toLowerCase()}://`;He().handleOpenURL=function(){var gr=(0,y.Z)(function*(tr){if(tr.toLowerCase().startsWith(Sn)&&Bt({url:tr}),"function"==typeof an)try{an(tr)}catch(ai){console.error(ai)}});return function(tr){return gr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ee.a,this._completeRedirectFn=ee.aE,this._overrideRedirectResult=ee.aF}_initialize(ye){var z=this;return(0,y.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(ye)})()}_openPopup(ye,z,te,se){var xe=this;return(0,y.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openPopup(ye,z,te,se)})()}_openRedirect(ye,z,te,se){var xe=this;return(0,y.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openRedirect(ye,z,te,se)})()}_isIframeWebStorageSupported(ye,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ye,z)}_originValidation(ye){return this.assertedUnderlyingResolver._originValidation(ye)}get _shouldInitProactively(){return Jn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ye=this;return(0,y.Z)(function*(){if(ye.underlyingResolver)return;const z=yield function yn(){return nr.apply(this,arguments)}();ye.underlyingResolver=z?ye.cordovaResolver:ye.browserResolver})()}}function Dr(me){return me.unwrap()}function Un(me){return ar(me)}function ar(me){const{_tokenResponse:ye}=me instanceof ie.ZR?me.customData:me;if(!ye)return null;if(!(me instanceof ie.ZR)&&"temporaryProof"in ye&&"phoneNumber"in ye)return ee.P.credentialFromResult(me);const z=ye.providerId;if(!z||z===ee.p.PASSWORD)return null;let te;switch(z){case ee.p.GOOGLE:te=ee.V;break;case ee.p.FACEBOOK:te=ee.U;break;case ee.p.GITHUB:te=ee.W;break;case ee.p.TWITTER:te=ee.Z;break;default:const{oauthIdToken:se,oauthAccessToken:xe,oauthTokenSecret:pt,pendingToken:Bt,nonce:an}=ye;return xe||pt||se||Bt?Bt?z.startsWith("saml.")?ee.aO._create(z,Bt):ee.L._fromParams({providerId:z,signInMethod:z,pendingToken:Bt,idToken:se,accessToken:xe}):new ee.X(z).credential({idToken:se,accessToken:xe,rawNonce:an}):null}return me instanceof ie.ZR?te.credentialFromError(me):te.credentialFromResult(me)}function mr(me,ye){return ye.catch(z=>{throw z instanceof ie.ZR&&function vi(me,ye){var z;const te=null===(z=ye.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===(null==ye?void 0:ye.code))ye.resolver=new Xn(me,ee.aq(me,ye));else if(te){const se=ar(ye),xe=ye;se&&(xe.credential=se,xe.tenantId=te.tenantId||void 0,xe.email=te.email||void 0,xe.phoneNumber=te.phoneNumber||void 0)}}(me,z),z}).then(z=>{const se=z.user;return{operationType:z.operationType,credential:Un(z),additionalUserInfo:ee.ao(z),user:cr.getOrCreate(se)}})}function rn(me,ye){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,y.Z)(function*(me,ye){const z=yield ye;return{verificationId:z.verificationId,confirm:te=>mr(me,z.confirm(te))}})).apply(this,arguments)}class Xn{constructor(ye,z){this.resolver=z,this.auth=function Kn(me){return me.wrapped()}(ye)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ye){return mr(Dr(this.auth),this.resolver.resolveSignIn(ye))}}class cr{constructor(ye){this._delegate=ye,this.multiFactor=ee.ar(ye)}static getOrCreate(ye){return cr.USER_MAP.has(ye)||cr.USER_MAP.set(ye,new cr(ye)),cr.USER_MAP.get(ye)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ye){return this._delegate.getIdTokenResult(ye)}getIdToken(ye){return this._delegate.getIdToken(ye)}linkAndRetrieveDataWithCredential(ye){return this.linkWithCredential(ye)}linkWithCredential(ye){var z=this;return(0,y.Z)(function*(){return mr(z.auth,ee.a0(z._delegate,ye))})()}linkWithPhoneNumber(ye,z){var te=this;return(0,y.Z)(function*(){return rn(te.auth,ee.l(te._delegate,ye,z))})()}linkWithPopup(ye){var z=this;return(0,y.Z)(function*(){return mr(z.auth,ee.d(z._delegate,ye,on))})()}linkWithRedirect(ye){var z=this;return(0,y.Z)(function*(){return yield We(ee.aH(z.auth)),ee.g(z._delegate,ye,on)})()}reauthenticateAndRetrieveDataWithCredential(ye){return this.reauthenticateWithCredential(ye)}reauthenticateWithCredential(ye){var z=this;return(0,y.Z)(function*(){return mr(z.auth,ee.a1(z._delegate,ye))})()}reauthenticateWithPhoneNumber(ye,z){return rn(this.auth,ee.r(this._delegate,ye,z))}reauthenticateWithPopup(ye){return mr(this.auth,ee.e(this._delegate,ye,on))}reauthenticateWithRedirect(ye){var z=this;return(0,y.Z)(function*(){return yield We(ee.aH(z.auth)),ee.h(z._delegate,ye,on)})()}sendEmailVerification(ye){return ee.ae(this._delegate,ye)}unlink(ye){var z=this;return(0,y.Z)(function*(){return yield ee.an(z._delegate,ye),z})()}updateEmail(ye){return ee.aj(this._delegate,ye)}updatePassword(ye){return ee.ak(this._delegate,ye)}updatePhoneNumber(ye){return ee.u(this._delegate,ye)}updateProfile(ye){return ee.ai(this._delegate,ye)}verifyBeforeUpdateEmail(ye,z){return ee.af(this._delegate,ye,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cr.USER_MAP=new WeakMap;const Qn=ee.aA;let Nr=(()=>{class me{constructor(z,te){if(this.app=z,te.isInitialized())return this._delegate=te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:se}=z.options;Qn(se,"invalid-api-key",{appName:z.name}),Qn(se,"invalid-api-key",{appName:z.name});const xe="undefined"!=typeof window?on:void 0;this._delegate=te.initialize({options:{persistence:ni(se,z.name),popupRedirectResolver:xe}}),this._delegate._updateErrorMap(ee.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,te){ee.I(this._delegate,z,te)}applyActionCode(z){return ee.a5(this._delegate,z)}checkActionCode(z){return ee.a6(this._delegate,z)}confirmPasswordReset(z,te){return ee.a4(this._delegate,z,te)}createUserWithEmailAndPassword(z,te){var se=this;return(0,y.Z)(function*(){return mr(se._delegate,ee.a8(se._delegate,z,te))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return ee.ad(this._delegate,z)}isSignInWithEmailLink(z){return ee.ab(this._delegate,z)}getRedirectResult(){var z=this;return(0,y.Z)(function*(){Qn(jn(),z._delegate,"operation-not-supported-in-this-environment");const te=yield ee.j(z._delegate,on);return te?mr(z._delegate,Promise.resolve(te)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function it(me,ye){(0,ee.aH)(me)._logFramework(ye)}(this._delegate,z)}onAuthStateChanged(z,te,se){const{next:xe,error:pt,complete:Bt}=jr(z,te,se);return this._delegate.onAuthStateChanged(xe,pt,Bt)}onIdTokenChanged(z,te,se){const{next:xe,error:pt,complete:Bt}=jr(z,te,se);return this._delegate.onIdTokenChanged(xe,pt,Bt)}sendSignInLinkToEmail(z,te){return ee.aa(this._delegate,z,te)}sendPasswordResetEmail(z,te){return ee.a3(this._delegate,z,te||void 0)}setPersistence(z){var te=this;return(0,y.Z)(function*(){let se;switch(function xt(me,ye){ti(Object.values(Vn).includes(ye),me,"invalid-persistence-type"),(0,ie.b$)()?ti(ye!==Vn.SESSION,me,"unsupported-persistence-type"):(0,ie.UG)()?ti(ye===Vn.NONE,me,"unsupported-persistence-type"):_r()?ti(ye===Vn.NONE||ye===Vn.LOCAL&&(0,ie.hl)(),me,"unsupported-persistence-type"):ti(ye===Vn.NONE||ur(),me,"unsupported-persistence-type")}(te._delegate,z),z){case Vn.SESSION:se=ee.a;break;case Vn.LOCAL:se=(yield ee.aC(ee.i)._isAvailable())?ee.i:ee.b;break;case Vn.NONE:se=ee.N;break;default:return ee.av("argument-error",{appName:te._delegate.name})}return te._delegate.setPersistence(se)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return mr(this._delegate,ee._(this._delegate))}signInWithCredential(z){return mr(this._delegate,ee.$(this._delegate,z))}signInWithCustomToken(z){return mr(this._delegate,ee.a2(this._delegate,z))}signInWithEmailAndPassword(z,te){return mr(this._delegate,ee.a9(this._delegate,z,te))}signInWithEmailLink(z,te){return mr(this._delegate,ee.ac(this._delegate,z,te))}signInWithPhoneNumber(z,te){return rn(this._delegate,ee.s(this._delegate,z,te))}signInWithPopup(z){var te=this;return(0,y.Z)(function*(){return Qn(jn(),te._delegate,"operation-not-supported-in-this-environment"),mr(te._delegate,ee.c(te._delegate,z,on))})()}signInWithRedirect(z){var te=this;return(0,y.Z)(function*(){return Qn(jn(),te._delegate,"operation-not-supported-in-this-environment"),yield We(te._delegate),ee.f(te._delegate,z,on)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return ee.a7(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return me.Persistence=Vn,me})();function jr(me,ye,z){let te=me;"function"!=typeof me&&({next:te,error:ye,complete:z}=me);const se=te;return{next:pt=>se(pt&&cr.getOrCreate(pt)),error:ye,complete:z}}function ni(me,ye){const z=function ft(me,ye){const z=At();if(!z)return[];const te=ee.aD(Li,me,ye);switch(z.getItem(te)){case Vn.NONE:return[ee.N];case Vn.LOCAL:return[ee.i,ee.a];case Vn.SESSION:return[ee.a];default:return[]}}(me,ye);if("undefined"!=typeof self&&!z.includes(ee.i)&&z.push(ee.i),"undefined"!=typeof window)for(const te of[ee.b,ee.a])z.includes(te)||z.push(te);return z.includes(ee.N)||z.push(ee.N),z}class Vi{constructor(){this.providerId="phone",this._delegate=new ee.P(Dr(V.Z.auth()))}static credential(ye,z){return ee.P.credential(ye,z)}verifyPhoneNumber(ye,z){return this._delegate.verifyPhoneNumber(ye,z)}unwrap(){return this._delegate}}Vi.PHONE_SIGN_IN_METHOD=ee.P.PHONE_SIGN_IN_METHOD,Vi.PROVIDER_ID=ee.P.PROVIDER_ID;const Mi=ee.aA;class Br{constructor(ye,z,te=V.Z.app()){var se;Mi(null===(se=te.options)||void 0===se?void 0:se.apiKey,"invalid-api-key",{appName:te.name}),this._delegate=new ee.R(ye,z,te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pe(me){me.INTERNAL.registerComponent(new Xe.wA("auth-compat",ye=>{const z=ye.getProvider("app-compat").getImmediate(),te=ye.getProvider("auth");return new Nr(z,te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee.A.EMAIL_SIGNIN,PASSWORD_RESET:ee.A.PASSWORD_RESET,RECOVER_EMAIL:ee.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee.A.VERIFY_EMAIL}},EmailAuthProvider:ee.Q,FacebookAuthProvider:ee.U,GithubAuthProvider:ee.W,GoogleAuthProvider:ee.V,OAuthProvider:ee.X,SAMLAuthProvider:ee.Y,PhoneAuthProvider:Vi,PhoneMultiFactorGenerator:ee.m,RecaptchaVerifier:Br,TwitterAuthProvider:ee.Z,Auth:Nr,AuthCredential:ee.J,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),me.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},1591:(hn,ct,U)=>{U.d(ct,{Jr:()=>y.Jr,N8:()=>y.N8,S1:()=>y.S1,U2:()=>y.U2,Vx:()=>y.Vx,iH:()=>y.iH,jM:()=>y.jM,t8:()=>y.t8,yv:()=>y.yv});var y=U(1627)},2290:(hn,ct,U)=>{U.d(ct,{Rh:()=>or,_W:()=>un});var y=U(5e3),V=U(1777),ee=U(7579),ie=U(9808),ke=U(2313);const je=["toast-component",""];function Xe(Ce,Me){if(1&Ce){const Ee=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){return y.CHM(Ee),y.oxw().remove()}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function He(Ce,Me){if(1&Ce&&(y.ynx(0),y._uU(1),y.BQk()),2&Ce){const Ee=y.oxw(2);y.xp6(1),y.hij("[",Ee.duplicatesCount+1,"]")}}function nt(Ce,Me){if(1&Ce&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,He,2,1,"ng-container",4),y.qZA()),2&Ce){const Ee=y.oxw();y.Tol(Ee.options.titleClass),y.uIk("aria-label",Ee.title),y.xp6(1),y.hij(" ",Ee.title," "),y.xp6(1),y.Q6J("ngIf",Ee.duplicatesCount)}}function Ie(Ce,Me){if(1&Ce&&y._UZ(0,"div",7),2&Ce){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.Q6J("innerHTML",Ee.message,y.oJD)}}function ve(Ce,Me){if(1&Ce&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&Ce){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.uIk("aria-label",Ee.message),y.xp6(1),y.hij(" ",Ee.message," ")}}function Qe(Ce,Me){if(1&Ce&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&Ce){const Ee=y.oxw();y.xp6(1),y.Udp("width",Ee.width+"%")}}function St(Ce,Me){if(1&Ce){const Ee=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){return y.CHM(Ee),y.oxw().remove()}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function vt(Ce,Me){if(1&Ce&&(y.ynx(0),y._uU(1),y.BQk()),2&Ce){const Ee=y.oxw(2);y.xp6(1),y.hij("[",Ee.duplicatesCount+1,"]")}}function _t(Ce,Me){if(1&Ce&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,vt,2,1,"ng-container",4),y.qZA()),2&Ce){const Ee=y.oxw();y.Tol(Ee.options.titleClass),y.uIk("aria-label",Ee.title),y.xp6(1),y.hij(" ",Ee.title," "),y.xp6(1),y.Q6J("ngIf",Ee.duplicatesCount)}}function Vt(Ce,Me){if(1&Ce&&y._UZ(0,"div",7),2&Ce){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.Q6J("innerHTML",Ee.message,y.oJD)}}function dt(Ce,Me){if(1&Ce&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&Ce){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.uIk("aria-label",Ee.message),y.xp6(1),y.hij(" ",Ee.message," ")}}function ot(Ce,Me){if(1&Ce&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&Ce){const Ee=y.oxw();y.xp6(1),y.Udp("width",Ee.width+"%")}}class at{constructor(Me,Ee){this.component=Me,this.injector=Ee}attach(Me,Ee){return this._attachedHost=Me,Me.attach(this,Ee)}detach(){const Me=this._attachedHost;if(Me)return this._attachedHost=void 0,Me.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Me){this._attachedHost=Me}}class Je{constructor(Me,Ee,Ne,st,Zt,pn){this.toastId=Me,this.config=Ee,this.message=Ne,this.title=st,this.toastType=Zt,this.toastRef=pn,this._onTap=new ee.x,this._onAction=new ee.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Me){this._onAction.next(Me)}onAction(){return this._onAction.asObservable()}}const Ct={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},bt=new y.OlP("ToastConfig");class Se{constructor(Me){this._overlayRef=Me,this.duplicatesCount=0,this._afterClosed=new ee.x,this._activate=new ee.x,this._manualClose=new ee.x,this._resetTimeout=new ee.x,this._countDuplicate=new ee.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Me,Ee){Me&&this._resetTimeout.next(),Ee&&this._countDuplicate.next(++this.duplicatesCount)}}class Ht{constructor(Me,Ee){this._toastPackage=Me,this._parentInjector=Ee}get(Me,Ee,Ne){return Me===Je?this._toastPackage:this._parentInjector.get(Me,Ee,Ne)}}class Nt extends class De{attach(Me,Ee){return this._attachedPortal=Me,this.attachComponentPortal(Me,Ee)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Me){this._disposeFn=Me}}{constructor(Me,Ee,Ne){super(),this._hostDomElement=Me,this._componentFactoryResolver=Ee,this._appRef=Ne}attachComponentPortal(Me,Ee){const Ne=this._componentFactoryResolver.resolveComponentFactory(Me.component);let st;return st=Ne.create(Me.injector),this._appRef.attachView(st.hostView),this.setDisposeFn(()=>{this._appRef.detachView(st.hostView),st.destroy()}),Ee?this._hostDomElement.insertBefore(this._getComponentRootNode(st),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(st)),st}_getComponentRootNode(Me){return Me.hostView.rootNodes[0]}}class Rn{constructor(Me){this._portalHost=Me}attach(Me,Ee=!0){return this._portalHost.attach(Me,Ee)}detach(){return this._portalHost.detach()}}let En=(()=>{class Ce{constructor(Ee){this._document=Ee}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Ee=this._document.createElement("div");Ee.classList.add("overlay-container"),Ee.setAttribute("aria-live","polite"),this._document.body.appendChild(Ee),this._containerElement=Ee}}return Ce.\u0275fac=function(Ee){return new(Ee||Ce)(y.LFG(ie.K0))},Ce.\u0275prov=y.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})(),Ln=(()=>{class Ce{constructor(Ee,Ne,st,Zt){this._overlayContainer=Ee,this._componentFactoryResolver=Ne,this._appRef=st,this._document=Zt,this._paneElements=new Map}create(Ee,Ne){return this._createOverlayRef(this.getPaneElement(Ee,Ne))}getPaneElement(Ee="",Ne){return this._paneElements.get(Ne)||this._paneElements.set(Ne,{}),this._paneElements.get(Ne)[Ee]||(this._paneElements.get(Ne)[Ee]=this._createPaneElement(Ee,Ne)),this._paneElements.get(Ne)[Ee]}_createPaneElement(Ee,Ne){const st=this._document.createElement("div");return st.id="toast-container",st.classList.add(Ee),st.classList.add("toast-container"),Ne?Ne.getContainerElement().appendChild(st):this._overlayContainer.getContainerElement().appendChild(st),st}_createPortalHost(Ee){return new Nt(Ee,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Ee){return new Rn(this._createPortalHost(Ee))}}return Ce.\u0275fac=function(Ee){return new(Ee||Ce)(y.LFG(En),y.LFG(y._Vd),y.LFG(y.z2F),y.LFG(ie.K0))},Ce.\u0275prov=y.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})(),un=(()=>{class Ce{constructor(Ee,Ne,st,Zt,pn){this.overlay=Ne,this._injector=st,this.sanitizer=Zt,this.ngZone=pn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Ee.default),Ee.config),Ee.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Ee.default.iconClasses),Ee.config.iconClasses))}show(Ee,Ne,st={},Zt=""){return this._preBuildNotification(Zt,Ee,Ne,this.applyConfig(st))}success(Ee,Ne,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Ee,Ne,this.applyConfig(st))}error(Ee,Ne,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Ee,Ne,this.applyConfig(st))}info(Ee,Ne,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Ee,Ne,this.applyConfig(st))}warning(Ee,Ne,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Ee,Ne,this.applyConfig(st))}clear(Ee){for(const Ne of this.toasts)if(void 0!==Ee){if(Ne.toastId===Ee)return void Ne.toastRef.manualClose()}else Ne.toastRef.manualClose()}remove(Ee){const Ne=this._findToast(Ee);if(!Ne||(Ne.activeToast.toastRef.close(),this.toasts.splice(Ne.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const st=this.toasts[this.currentlyActive].toastRef;st.isInactive()||(this.currentlyActive=this.currentlyActive+1,st.activate())}return!0}findDuplicate(Ee="",Ne="",st,Zt){const{includeTitleDuplicates:pn}=this.toastrConfig;for(const wn of this.toasts){const kn=pn&&wn.title===Ee;if((!pn||kn)&&wn.message===Ne)return wn.toastRef.onDuplicate(st,Zt),wn}return null}applyConfig(Ee={}){return Object.assign(Object.assign({},this.toastrConfig),Ee)}_findToast(Ee){for(let Ne=0;Ne<this.toasts.length;Ne++)if(this.toasts[Ne].toastId===Ee)return{index:Ne,activeToast:this.toasts[Ne]};return null}_preBuildNotification(Ee,Ne,st,Zt){return Zt.onActivateTick?this.ngZone.run(()=>this._buildNotification(Ee,Ne,st,Zt)):this._buildNotification(Ee,Ne,st,Zt)}_buildNotification(Ee,Ne,st,Zt){if(!Zt.toastComponent)throw new Error("toastComponent required");const pn=this.findDuplicate(st,Ne,this.toastrConfig.resetTimeoutOnDuplicate&&Zt.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&st||Ne)&&this.toastrConfig.preventDuplicates&&null!==pn)return pn;this.previousToastMessage=Ne;let wn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(wn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const kn=this.overlay.create(Zt.positionClass,this.overlayContainer);this.index=this.index+1;let ur=Ne;Ne&&Zt.enableHtml&&(ur=this.sanitizer.sanitize(y.q3G.HTML,Ne));const _r=new Se(kn),jn=new Je(this.index,Zt,ur,st,Ee,_r),Jn=new Ht(jn,this._injector),yn=new at(Zt.toastComponent,Jn),nr=kn.attach(yn,this.toastrConfig.newestOnTop);_r.componentInstance=nr.instance;const On={toastId:this.index,title:st||"",message:Ne||"",toastRef:_r,onShown:_r.afterActivate(),onHidden:_r.afterClosed(),onTap:jn.onTap(),onAction:jn.onAction(),portal:nr};return wn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{On.toastRef.activate()})),this.toasts.push(On),On}}return Ce.\u0275fac=function(Ee){return new(Ee||Ce)(y.LFG(bt),y.LFG(Ln),y.LFG(y.zs3),y.LFG(ke.H7),y.LFG(y.R0b))},Ce.\u0275prov=y.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})(),sn=(()=>{class Ce{constructor(Ee,Ne,st){this.toastrService=Ee,this.toastPackage=Ne,this.ngZone=st,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=Ne.message,this.title=Ne.title,this.options=Ne.config,this.originalTimeout=Ne.config.timeOut,this.toastClasses=`${Ne.toastType} ${Ne.config.toastClass}`,this.sub=Ne.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ne.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ne.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ne.toastRef.countDuplicate().subscribe(Zt=>{this.duplicatesCount=Zt})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ee=(new Date).getTime();this.width=(this.hideTime-Ee)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Ee,Ne){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Ee),Ne)):this.timeout=setTimeout(()=>Ee(),Ne)}outsideInterval(Ee,Ne){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Ee),Ne)):this.intervalId=setInterval(()=>Ee(),Ne)}runInsideAngular(Ee){this.ngZone?this.ngZone.run(()=>Ee()):Ee()}}return Ce.\u0275fac=function(Ee){return new(Ee||Ce)(y.Y36(un),y.Y36(Je),y.Y36(y.R0b))},Ce.\u0275cmp=y.Xpm({type:Ce,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Ee,Ne){1&Ee&&y.NdJ("click",function(){return Ne.tapToast()})("mouseenter",function(){return Ne.stickAround()})("mouseleave",function(){return Ne.delayedHideToast()}),2&Ee&&(y.d8E("@flyInOut",Ne.state),y.Tol(Ne.toastClasses),y.Udp("display",Ne.displayStyle))},attrs:je,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ee,Ne){1&Ee&&(y.YNc(0,Xe,3,0,"button",0),y.YNc(1,nt,3,5,"div",1),y.YNc(2,Ie,1,3,"div",2),y.YNc(3,ve,2,4,"div",3),y.YNc(4,Qe,2,2,"div",4)),2&Ee&&(y.Q6J("ngIf",Ne.options.closeButton),y.xp6(1),y.Q6J("ngIf",Ne.title),y.xp6(1),y.Q6J("ngIf",Ne.message&&Ne.options.enableHtml),y.xp6(1),y.Q6J("ngIf",Ne.message&&!Ne.options.enableHtml),y.xp6(1),y.Q6J("ngIf",Ne.options.progressBar))},directives:[ie.O5],encapsulation:2,data:{animation:[(0,V.X$)("flyInOut",[(0,V.SB)("inactive",(0,V.oB)({opacity:0})),(0,V.SB)("active",(0,V.oB)({opacity:1})),(0,V.SB)("removed",(0,V.oB)({opacity:0})),(0,V.eR)("inactive => active",(0,V.jt)("{{ easeTime }}ms {{ easing }}")),(0,V.eR)("active => removed",(0,V.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Ce})();const Ot=Object.assign(Object.assign({},Ct),{toastComponent:sn});let or=(()=>{class Ce{static forRoot(Ee={}){return{ngModule:Ce,providers:[{provide:bt,useValue:{default:Ot,config:Ee}}]}}}return Ce.\u0275fac=function(Ee){return new(Ee||Ce)},Ce.\u0275mod=y.oAB({type:Ce}),Ce.\u0275inj=y.cJS({imports:[[ie.ez]]}),Ce})(),cn=(()=>{class Ce{constructor(Ee,Ne,st){this.toastrService=Ee,this.toastPackage=Ne,this.appRef=st,this.width=-1,this.toastClasses="",this.state="inactive",this.message=Ne.message,this.title=Ne.title,this.options=Ne.config,this.originalTimeout=Ne.config.timeOut,this.toastClasses=`${Ne.toastType} ${Ne.config.toastClass}`,this.sub=Ne.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ne.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ne.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ne.toastRef.countDuplicate().subscribe(Zt=>{this.duplicatesCount=Zt})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ee=(new Date).getTime();this.width=(this.hideTime-Ee)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Ce.\u0275fac=function(Ee){return new(Ee||Ce)(y.Y36(un),y.Y36(Je),y.Y36(y.z2F))},Ce.\u0275cmp=y.Xpm({type:Ce,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Ee,Ne){1&Ee&&y.NdJ("click",function(){return Ne.tapToast()})("mouseenter",function(){return Ne.stickAround()})("mouseleave",function(){return Ne.delayedHideToast()}),2&Ee&&(y.Tol(Ne.toastClasses),y.Udp("display",Ne.displayStyle))},attrs:je,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ee,Ne){1&Ee&&(y.YNc(0,St,3,0,"button",0),y.YNc(1,_t,3,5,"div",1),y.YNc(2,Vt,1,3,"div",2),y.YNc(3,dt,2,4,"div",3),y.YNc(4,ot,2,2,"div",4)),2&Ee&&(y.Q6J("ngIf",Ne.options.closeButton),y.xp6(1),y.Q6J("ngIf",Ne.title),y.xp6(1),y.Q6J("ngIf",Ne.message&&Ne.options.enableHtml),y.xp6(1),y.Q6J("ngIf",Ne.message&&!Ne.options.enableHtml),y.xp6(1),y.Q6J("ngIf",Ne.options.progressBar))},directives:[ie.O5],encapsulation:2}),Ce})();Object.assign(Object.assign({},Ct),{toastComponent:cn})},5861:(hn,ct,U)=>{function y(ee,ie,ke,je,Xe,He,nt){try{var Ie=ee[He](nt),ve=Ie.value}catch(Qe){return void ke(Qe)}Ie.done?ie(ve):Promise.resolve(ve).then(je,Xe)}function V(ee){return function(){var ie=this,ke=arguments;return new Promise(function(je,Xe){var He=ee.apply(ie,ke);function nt(ve){y(He,je,Xe,nt,Ie,"next",ve)}function Ie(ve){y(He,je,Xe,nt,Ie,"throw",ve)}nt(void 0)})}}U.d(ct,{Z:()=>V})},7582:(hn,ct,U)=>{function ie(it,tt){var Ce={};for(var Me in it)Object.prototype.hasOwnProperty.call(it,Me)&&tt.indexOf(Me)<0&&(Ce[Me]=it[Me]);if(null!=it&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(Me=Object.getOwnPropertySymbols(it);Ee<Me.length;Ee++)tt.indexOf(Me[Ee])<0&&Object.prototype.propertyIsEnumerable.call(it,Me[Ee])&&(Ce[Me[Ee]]=it[Me[Ee]])}return Ce}function Qe(it,tt,Ce,Me){return new(Ce||(Ce=Promise))(function(Ne,st){function Zt(kn){try{wn(Me.next(kn))}catch(ur){st(ur)}}function pn(kn){try{wn(Me.throw(kn))}catch(ur){st(ur)}}function wn(kn){kn.done?Ne(kn.value):function Ee(Ne){return Ne instanceof Ce?Ne:new Ce(function(st){st(Ne)})}(kn.value).then(Zt,pn)}wn((Me=Me.apply(it,tt||[])).next())})}function at(it){return this instanceof at?(this.v=it,this):new at(it)}function De(it,tt,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,Me=Ce.apply(it,tt||[]),Ne=[];return Ee=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Zt("next"),Zt("throw"),Zt("return",function st(jn){return function(Jn){return Promise.resolve(Jn).then(jn,ur)}}),Ee[Symbol.asyncIterator]=function(){return this},Ee;function Zt(jn,Jn){Me[jn]&&(Ee[jn]=function(yn){return new Promise(function(nr,On){Ne.push([jn,yn,nr,On])>1||pn(jn,yn)})},Jn&&(Ee[jn]=Jn(Ee[jn])))}function pn(jn,Jn){try{!function wn(jn){jn.value instanceof at?Promise.resolve(jn.value.v).then(kn,ur):_r(Ne[0][2],jn)}(Me[jn](Jn))}catch(yn){_r(Ne[0][3],yn)}}function kn(jn){pn("next",jn)}function ur(jn){pn("throw",jn)}function _r(jn,Jn){jn(Jn),Ne.shift(),Ne.length&&pn(Ne[0][0],Ne[0][1])}}function Ct(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,tt=it[Symbol.asyncIterator];return tt?tt.call(it):(it=function Vt(it){var tt="function"==typeof Symbol&&Symbol.iterator,Ce=tt&&it[tt],Me=0;if(Ce)return Ce.call(it);if(it&&"number"==typeof it.length)return{next:function(){return it&&Me>=it.length&&(it=void 0),{value:it&&it[Me++],done:!it}}};throw new TypeError(tt?"Object is not iterable.":"Symbol.iterator is not defined.")}(it),Ce={},Me("next"),Me("throw"),Me("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Me(Ne){Ce[Ne]=it[Ne]&&function(st){return new Promise(function(Zt,pn){!function Ee(Ne,st,Zt,pn){Promise.resolve(pn).then(function(wn){Ne({value:wn,done:Zt})},st)}(Zt,pn,(st=it[Ne](st)).done,st.value)})}}}U.d(ct,{FC:()=>De,KL:()=>Ct,_T:()=>ie,mG:()=>Qe,qq:()=>at}),"function"==typeof SuppressedError&&SuppressedError}},hn=>{hn(hn.s=6867)}]);