"use strict";var wI=Object.defineProperty,CI=Object.defineProperties,II=Object.getOwnPropertyDescriptors,Lw=Object.getOwnPropertySymbols,TI=Object.prototype.hasOwnProperty,bI=Object.prototype.propertyIsEnumerable,Vw=(fn,ct,$)=>ct in fn?wI(fn,ct,{enumerable:!0,configurable:!0,writable:!0,value:$}):fn[ct]=$,$_=(fn,ct)=>{for(var $ in ct||(ct={}))TI.call(ct,$)&&Vw(fn,$,ct[$]);if(Lw)for(var $ of Lw(ct))bI.call(ct,$)&&Vw(fn,$,ct[$]);return fn},G_=(fn,ct)=>CI(fn,II(ct));(self.webpackChunkdrasti_teacher_dashboard=self.webpackChunkdrasti_teacher_dashboard||[]).push([[179],{6215:(fn,ct,$)=>{$.d(ct,{nm:()=>Xr});var y=$(4976),Ue=($(5e3),$(3692),$(259),$(5861)),Ke=$(6881),Je=$(4859),Ge=$(2090),at=$(1877);const be=new Map,Ce={activated:!1,tokenObservers:[]},tt={initialized:!1,enabled:!1};function Lt(Xe){return be.get(Xe)||Object.assign({},Ce)}function ht(){return tt}class Me{constructor(Ze,rt,_t,Ot,In){if(this.operation=Ze,this.retryPolicy=rt,this.getWaitDuration=_t,this.lowerBound=Ot,this.upperBound=In,this.pending=null,this.nextErrorWaitInterval=Ot,Ot>In)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ze){var rt=this;return(0,Ue.Z)(function*(){rt.stop();try{rt.pending=new Ge.BH,yield function it(Xe){return new Promise(Ze=>{setTimeout(Ze,Xe)})}(rt.getNextRun(Ze)),rt.pending.resolve(),yield rt.pending.promise,rt.pending=new Ge.BH,yield rt.operation(),rt.pending.resolve(),yield rt.pending.promise,rt.process(!0).catch(()=>{})}catch(_t){rt.retryPolicy(_t)?rt.process(!1).catch(()=>{}):rt.stop()}})()}getNextRun(Ze){if(Ze)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const rt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),rt}}}const pt=new Ge.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ut(Xe){if(!Lt(Xe).activated)throw pt.create("use-before-activation",{appName:Xe.name})}function Ht(Xe,Ze){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,Ue.Z)(function*({url:Xe,body:Ze},rt){const _t={"Content-Type":"application/json"},Ot=rt.getImmediate({optional:!0});if(Ot){const ui=yield Ot.getHeartbeatsHeader();ui&&(_t["X-Firebase-Client"]=ui)}const In={method:"POST",body:JSON.stringify(Ze),headers:_t};let Lr,hr;try{Lr=yield fetch(Xe,In)}catch(ui){throw pt.create("fetch-network-error",{originalErrorMessage:null==ui?void 0:ui.message})}if(200!==Lr.status)throw pt.create("fetch-status-error",{httpStatus:Lr.status});try{hr=yield Lr.json()}catch(ui){throw pt.create("fetch-parse-error",{originalErrorMessage:null==ui?void 0:ui.message})}const br=hr.ttl.match(/^([\d.]+)(s)$/);if(!br||!br[2]||isNaN(Number(br[1])))throw pt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${hr.ttl}`});const di=1e3*Number(br[1]),Ks=Date.now();return{token:hr.token,expireTimeMillis:Ks+di,issuedAtTimeMillis:Ks}})).apply(this,arguments)}function Ln(Xe,Ze){const{projectId:rt,appId:_t,apiKey:Ot}=Xe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${rt}/apps/${_t}:exchangeDebugToken?key=${Ot}`,body:{debug_token:Ze}}}const an="firebase-app-check-store";let Qe=null;function ve(){return Qe||(Qe=new Promise((Xe,Ze)=>{try{const rt=indexedDB.open("firebase-app-check-database",1);rt.onsuccess=_t=>{Xe(_t.target.result)},rt.onerror=_t=>{var Ot;Ze(pt.create("storage-open",{originalErrorMessage:null===(Ot=_t.target.error)||void 0===Ot?void 0:Ot.message}))},rt.onupgradeneeded=_t=>{0===_t.oldVersion&&_t.target.result.createObjectStore(an,{keyPath:"compositeKey"})}}catch(rt){Ze(pt.create("storage-open",{originalErrorMessage:null==rt?void 0:rt.message}))}}),Qe)}function cn(){return(cn=(0,Ue.Z)(function*(Xe,Ze){const _t=(yield ve()).transaction(an,"readwrite"),In=_t.objectStore(an).put({compositeKey:Xe,value:Ze});return new Promise((Lr,hr)=>{In.onsuccess=br=>{Lr()},_t.onerror=br=>{var di;hr(pt.create("storage-set",{originalErrorMessage:null===(di=br.target.error)||void 0===di?void 0:di.message}))}})})).apply(this,arguments)}const or=new at.Yd("@firebase/app-check");function wn(Xe,Ze){return(0,Ge.hl)()?function Ee(Xe,Ze){return function tn(Xe,Ze){return cn.apply(this,arguments)}(function pr(Xe){return`${Xe.options.appId}-${Xe.name}`}(Xe),Ze)}(Xe,Ze).catch(rt=>{or.warn(`Failed to write token to IndexedDB. Error: ${rt}`)}):Promise.resolve()}function On(){return ht().enabled}function li(){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,Ue.Z)(function*(){const Xe=ht();if(Xe.enabled&&Xe.token)return Xe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fe={error:"UNKNOWN_ERROR"};function ze(Xe){return Ge.US.encodeString(JSON.stringify(Xe),!1)}function lt(Xe){return At.apply(this,arguments)}function At(){return(At=(0,Ue.Z)(function*(Xe,Ze=!1){const rt=Xe.app;Ut(rt);const _t=Lt(rt);let In,Ot=_t.token;if(Ot&&!Ar(Ot)&&(_t.token=void 0,Ot=void 0),!Ot){const br=yield _t.cachedTokenPromise;br&&(Ar(br)?Ot=br:yield wn(rt,void 0))}if(!Ze&&Ot&&Ar(Ot))return{token:Ot.token};let hr,Lr=!1;if(On()){_t.exchangeTokenPromise||(_t.exchangeTokenPromise=Ht(Ln(rt,yield li()),Xe.heartbeatServiceProvider).finally(()=>{_t.exchangeTokenPromise=void 0}),Lr=!0);const br=yield _t.exchangeTokenPromise;return yield wn(rt,br),_t.token=br,{token:br.token}}try{_t.exchangeTokenPromise||(_t.exchangeTokenPromise=_t.provider.getToken().finally(()=>{_t.exchangeTokenPromise=void 0}),Lr=!0),Ot=yield Lt(rt).exchangeTokenPromise}catch(br){"appCheck/throttled"===br.code?or.warn(br.message):or.error(br),In=br}return Ot?In?hr=Ar(Ot)?{token:Ot.token,internalError:In}:Yt(In):(hr={token:Ot.token},_t.token=Ot,yield wn(rt,Ot)):hr=Yt(In),Lr&&Tr(rt,hr),hr})).apply(this,arguments)}function nn(){return(nn=(0,Ue.Z)(function*(Xe){const Ze=Xe.app;Ut(Ze);const{provider:rt}=Lt(Ze);if(On()){const _t=yield li(),{token:Ot}=yield Ht(Ln(Ze,_t),Xe.heartbeatServiceProvider);return{token:Ot}}{const{token:_t}=yield rt.getToken();return{token:_t}}})).apply(this,arguments)}function er(Xe,Ze){const rt=Lt(Xe),_t=rt.tokenObservers.filter(Ot=>Ot.next!==Ze);0===_t.length&&rt.tokenRefresher&&rt.tokenRefresher.isRunning()&&rt.tokenRefresher.stop(),rt.tokenObservers=_t}function Mn(Xe){const{app:Ze}=Xe,rt=Lt(Ze);let _t=rt.tokenRefresher;_t||(_t=function ci(Xe){const{app:Ze}=Xe;return new Me((0,Ue.Z)(function*(){let _t;if(_t=Lt(Ze).token?yield lt(Xe,!0):yield lt(Xe),_t.error)throw _t.error;if(_t.internalError)throw _t.internalError}),()=>!0,()=>{const rt=Lt(Ze);if(rt.token){let _t=rt.token.issuedAtTimeMillis+.5*(rt.token.expireTimeMillis-rt.token.issuedAtTimeMillis)+3e5;return _t=Math.min(_t,rt.token.expireTimeMillis-3e5),Math.max(0,_t-Date.now())}return 0},3e4,96e4)}(Xe),rt.tokenRefresher=_t),!_t.isRunning()&&rt.isTokenAutoRefreshEnabled&&_t.start()}function Tr(Xe,Ze){const rt=Lt(Xe).tokenObservers;for(const _t of rt)try{"EXTERNAL"===_t.type&&null!=Ze.error?_t.error(Ze.error):_t.next(Ze)}catch(Ot){}}function Ar(Xe){return Xe.expireTimeMillis-Date.now()>0}function Yt(Xe){return{token:ze(Fe),error:Xe}}class Rr{constructor(Ze,rt){this.app=Ze,this.heartbeatServiceProvider=rt}_delete(){const{tokenObservers:Ze}=Lt(this.app);for(const rt of Ze)er(this.app,rt.next);return Promise.resolve()}}const Dt="app-check-internal";!function sn(){(0,Ke._registerComponent)(new Je.wA("app-check",Xe=>function lr(Xe,Ze){return new Rr(Xe,Ze)}(Xe.getProvider("app").getImmediate(),Xe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Xe,Ze,rt)=>{Xe.getProvider(Dt).initialize()})),(0,Ke._registerComponent)(new Je.wA(Dt,Xe=>function _r(Xe){return{getToken:Ze=>lt(Xe,Ze),getLimitedUseToken:()=>function Wt(Xe){return nn.apply(this,arguments)}(Xe),addTokenListener:Ze=>function Ur(Xe,Ze,rt,_t){const{app:Ot}=Xe,In=Lt(Ot);if(In.tokenObservers=[...In.tokenObservers,{next:rt,error:_t,type:Ze}],In.token&&Ar(In.token)){const hr=In.token;Promise.resolve().then(()=>{rt({token:hr.token}),Mn(Xe)}).catch(()=>{})}In.cachedTokenPromise.then(()=>Mn(Xe))}(Xe,"INTERNAL",Ze),removeTokenListener:Ze=>er(Xe.app,Ze)}}(Xe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ke.registerVersion)("@firebase/app-check","0.8.0")}();class Xr{constructor(){return(0,y.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(fn,ct,$)=>{$.d(ct,{Ot:()=>X,z6:()=>ie});var y=$(259);$(5e3);class X{constructor(we){return we}}class ie{constructor(){return(0,y.C6)()}}},1205:(fn,ct,$)=>{$.d(ct,{zQ:()=>rn,ww:()=>Zr,rT:()=>bt,f7:()=>Ht,L6:()=>et,_Q:()=>Ut,lh:()=>Fn,Qv:()=>pt,nw:()=>Nn});var y=$(5e3),B=$(7579),X=$(9646),ie=$(8306),Ue=$(8996),Ke=$(6451),Je=$(5363),Ge=$(3900),at=$(4004),be=$(6063);class Ce extends B.x{constructor(fr=1/0,Xn=1/0,an=be.l){super(),this._bufferSize=fr,this._windowTime=Xn,this._timestampProvider=an,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Xn===1/0,this._bufferSize=Math.max(1,fr),this._windowTime=Math.max(1,Xn)}next(fr){const{isStopped:Xn,_buffer:an,_infiniteTimeWindow:nt,_timestampProvider:Qe,_windowTime:ve}=this;Xn||(an.push(fr),!nt&&an.push(Qe.now()+ve)),this._trimBuffer(),super.next(fr)}_subscribe(fr){this._throwIfClosed(),this._trimBuffer();const Xn=this._innerSubscribe(fr),{_infiniteTimeWindow:an,_buffer:nt}=this,Qe=nt.slice();for(let ve=0;ve<Qe.length&&!fr.closed;ve+=an?1:2)fr.next(Qe[ve]);return this._checkFinalizedStatuses(fr),Xn}_trimBuffer(){const{_bufferSize:fr,_timestampProvider:Xn,_buffer:an,_infiniteTimeWindow:nt}=this,Qe=(nt?1:2)*fr;if(fr<1/0&&Qe<an.length&&an.splice(0,an.length-Qe),!nt){const ve=Xn.now();let De=0;for(let Ee=1;Ee<an.length&&an[Ee]<=ve;Ee+=2)De=Ee;De&&an.splice(0,De+1)}}}var tt=$(3099);function Lt(Ln,fr,Xn){let an,nt=!1;return Ln&&"object"==typeof Ln?({bufferSize:an=1/0,windowTime:fr=1/0,refCount:nt=!1,scheduler:Xn}=Ln):an=null!=Ln?Ln:1/0,(0,tt.B)({connector:()=>new Ce(an,fr,Xn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:nt})}var ft=$(590),ht=$(576);function Bt(Ln,fr){return(0,ht.m)(fr)?(0,Ge.w)(()=>Ln,fr):(0,Ge.w)(()=>Ln)}var mt=$(9468),Ft=$(9300),dn=$(4976),Xt=$(2011),we=$(9808),Me=$(6215),it=$(9260);const pt=new y.OlP("angularfire2.auth.use-emulator"),et=new y.OlP("angularfire2.auth.settings"),Ut=new y.OlP("angularfire2.auth.tenant-id"),bt=new y.OlP("angularfire2.auth.langugage-code"),Fn=new y.OlP("angularfire2.auth.use-device-language"),Ht=new y.OlP("angularfire.auth.persistence"),Nn=(Ln,fr,Xn,an,nt,Qe,ve,De)=>(0,Xt.cc)(`${Ln.name}.auth`,"AngularFireAuth",Ln.name,()=>{const Ee=fr.runOutsideAngular(()=>Ln.auth());if(Xn&&Ee.useEmulator(...Xn),an&&(Ee.tenantId=an),Ee.languageCode=nt,Qe&&Ee.useDeviceLanguage(),ve)for(const[xe,gt]of Object.entries(ve))Ee.settings[xe]=gt;return De&&Ee.setPersistence(De),Ee},[Xn,an,nt,Qe,ve,De]);let rn=(()=>{class Ln{constructor(Xn,an,nt,Qe,ve,De,Ee,xe,gt,tn,cn,Sn){const Wn=new B.x,pr=(0,X.of)(void 0).pipe((0,Je.Q)(ve.outsideAngular),(0,Ge.w)(()=>Qe.runOutsideAngular(()=>Promise.resolve().then($.bind($,9568)))),(0,at.U)(()=>(0,Xt.on)(Xn,Qe,an)),(0,at.U)(or=>Nn(or,Qe,De,xe,gt,tn,Ee,cn)),Lt({bufferSize:1,refCount:!1}));if((0,we.PM)(nt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,X.of)(null);else{pr.pipe((0,ft.P)()).subscribe();const jn=pr.pipe((0,Ge.w)(Jn=>Jn.getRedirectResult().then(Dn=>Dn,()=>null)),dn.iC,Lt({bufferSize:1,refCount:!1})),Fr=pr.pipe((0,Ge.w)(Jn=>new ie.y(Dn=>({unsubscribe:Qe.runOutsideAngular(()=>Jn.onAuthStateChanged(On=>Dn.next(On),On=>Dn.error(On),()=>Dn.complete()))})))),wn=pr.pipe((0,Ge.w)(Jn=>new ie.y(Dn=>({unsubscribe:Qe.runOutsideAngular(()=>Jn.onIdTokenChanged(On=>Dn.next(On),On=>Dn.error(On),()=>Dn.complete()))}))));this.authState=jn.pipe(Bt(Fr),(0,mt.R)(ve.outsideAngular),(0,Je.Q)(ve.insideAngular)),this.user=jn.pipe(Bt(wn),(0,mt.R)(ve.outsideAngular),(0,Je.Q)(ve.insideAngular)),this.idToken=this.user.pipe((0,Ge.w)(Jn=>Jn?(0,Ue.D)(Jn.getIdToken()):(0,X.of)(null))),this.idTokenResult=this.user.pipe((0,Ge.w)(Jn=>Jn?(0,Ue.D)(Jn.getIdTokenResult()):(0,X.of)(null))),this.credential=(0,Ke.T)(jn,Wn,this.authState.pipe((0,Ft.h)(Jn=>!Jn))).pipe((0,at.U)(Jn=>(null==Jn?void 0:Jn.user)?Jn:null),(0,mt.R)(ve.outsideAngular),(0,Je.Q)(ve.insideAngular))}return(0,Xt.pX)(this,pr,Qe,{spy:{apply:(or,jn,Fr)=>{(or.startsWith("signIn")||or.startsWith("createUser"))&&Fr.then(wn=>Wn.next(wn))}}})}}return Ln.\u0275fac=function(Xn){return new(Xn||Ln)(y.LFG(Xt.Dh),y.LFG(Xt.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(dn.HU),y.LFG(pt,8),y.LFG(et,8),y.LFG(Ut,8),y.LFG(bt,8),y.LFG(Fn,8),y.LFG(Ht,8),y.LFG(Me.nm,8))},Ln.\u0275prov=y.Yz7({token:Ln,factory:Ln.\u0275fac,providedIn:"any"}),Ln})(),Zr=(()=>{class Ln{constructor(){it.Z.registerVersion("angularfire",dn.q4.full,"auth-compat")}}return Ln.\u0275fac=function(Xn){return new(Xn||Ln)},Ln.\u0275mod=y.oAB({type:Ln}),Ln.\u0275inj=y.cJS({providers:[rn]}),Ln})()},2255:(fn,ct,$)=>{$.d(ct,{ST:()=>k_,yb:()=>C0});var y=$(5e3),B=$(4986),X=$(8306),ie=$(8996),Ue=$(9646),Ke=$(4976),Je=$(8675),Ge=$(4482),at=$(5403);function be(){return(0,Ge.e)((r,e)=>{let t,s=!1;r.subscribe((0,at.x)(e,a=>{const d=t;t=a,s&&e.next([d,a]),s=!0}))})}var Ce=$(4004),tt=$(5026),Lt=$(4671);function ht(r,e){return r===e}var bt,Bt=$(9300),mt=$(2011),Ft=$(9808),Xt=($(9568),$(3942)),we=$(5861),Me=$(6881),it=$(4859),Et=$(1877),pt=$(2090),et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ut={},Fn=Fn||{},Ht=et||self;function Nn(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function rn(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Ln="closure_uid_"+(1e9*Math.random()>>>0),fr=0;function Xn(r,e,t){return r.call.apply(r.bind,arguments)}function an(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function nt(r,e,t){return(nt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xn:an).apply(null,arguments)}function Qe(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function ve(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,d){for(var g=Array(arguments.length-2),A=2;A<arguments.length;A++)g[A-2]=arguments[A];return e.prototype[a].apply(s,g)}}function De(){this.s=this.s,this.o=this.o}De.prototype.s=!1,De.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Zr(r){Object.prototype.hasOwnProperty.call(r,Ln)&&r[Ln]||(r[Ln]=++fr)}(this)},De.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xe=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function gt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function tn(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Nn(s)){const a=r.length||0,d=s.length||0;r.length=a+d;for(let g=0;g<d;g++)r[a+g]=s[g]}else r.push(s)}}function cn(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var Sn=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Ht.addEventListener("test",()=>{},e),Ht.removeEventListener("test",()=>{},e)}catch(t){}return r}();function Wn(r){return/^[\s\xa0]*$/.test(r)}function pr(){var r=Ht.navigator;return r&&(r=r.userAgent)?r:""}function or(r){return-1!=pr().indexOf(r)}function jn(r){return jn[" "](r),r}jn[" "]=function(){};var Fe,r,wn=or("Opera"),Jn=or("Trident")||or("MSIE"),Dn=or("Edge"),On=Dn||Jn,li=or("Gecko")&&!(-1!=pr().toLowerCase().indexOf("webkit")&&!or("Edge"))&&!(or("Trident")||or("MSIE"))&&!or("Edge"),Xi=-1!=pr().toLowerCase().indexOf("webkit")&&!or("Edge");function Pt(){var r=Ht.document;return r?r.documentMode:void 0}e:{var ze="",lt=(r=pr(),li?/rv:([^\);]+)(\)|;)/.exec(r):Dn?/Edge\/([\d\.]+)/.exec(r):Jn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Xi?/WebKit\/(\S+)/.exec(r):wn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(lt&&(ze=lt?lt[1]:""),Jn){var At=Pt();if(null!=At&&At>parseFloat(ze)){Fe=String(At);break e}}Fe=ze}var Ur=Ht.document&&Jn&&(Pt()||parseInt(Fe,10))||void 0;function er(r,e){if(cn.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(li){e:{try{jn(e.nodeName);var a=!0;break e}catch(d){}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Mn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&er.$.h.call(this)}}ve(er,cn);var Mn={2:"touch",3:"pen",4:"mouse"};er.prototype.h=function(){er.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var ci="closure_listenable_"+(1e6*Math.random()|0),Tr=0;function Ar(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Tr,this.fa=this.ia=!1}function Yt(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Rr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function _r(r){const e={};for(const t in r)e[t]=r[t];return e}const tr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wr(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let d=0;d<tr.length;d++)t=tr[d],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Qr(r){this.src=r,this.g={},this.h=0}function fi(r,e){var t=e.type;if(t in r.g){var d,s=r.g[t],a=xe(s,e);(d=0<=a)&&Array.prototype.splice.call(s,a,1),d&&(Yt(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Fi(r,e,t,s){for(var a=0;a<r.length;++a){var d=r[a];if(!d.fa&&d.listener==e&&d.capture==!!t&&d.la==s)return a}return-1}Qr.prototype.add=function(r,e,t,s,a){var d=r.toString();(r=this.g[d])||(r=this.g[d]=[],this.h++);var g=Fi(r,e,s,a);return-1<g?(e=r[g],t||(e.ia=!1)):((e=new Ar(e,this.src,d,!!s,a)).ia=t,r.push(e)),e};var Ri="closure_lm_"+(1e6*Math.random()|0),zr={};function Pe(r,e,t,s,a){if(s&&s.once)return ge(r,e,t,s,a);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Pe(r,e[d],t,s,a);return null}return t=gn(t),r&&r[ci]?r.O(e,t,rn(s)?!!s.capture:!!s,a):Ae(r,e,t,!1,s,a)}function Ae(r,e,t,s,a,d){if(!e)throw Error("Invalid event type");var g=rn(a)?!!a.capture:!!a,A=dt(r);if(A||(r[Ri]=A=new Qr(r)),(t=A.add(e,t,s,g,d)).proxy)return t;if(s=function he(){const e=Se;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Sn||(a=g),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(se(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function ge(r,e,t,s,a){if(Array.isArray(e)){for(var d=0;d<e.length;d++)ge(r,e[d],t,s,a);return null}return t=gn(t),r&&r[ci]?r.P(e,t,rn(s)?!!s.capture:!!s,a):Ae(r,e,t,!0,s,a)}function G(r,e,t,s,a){if(Array.isArray(e))for(var d=0;d<e.length;d++)G(r,e[d],t,s,a);else s=rn(s)?!!s.capture:!!s,t=gn(t),r&&r[ci]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Fi(d=r.g[e],t,s,a))&&(Yt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete r.g[e],r.h--))):r&&(r=dt(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Fi(e,t,s,a)),(t=-1<r?e[r]:null)&&ne(t))}function ne(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[ci])fi(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(se(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=dt(e))?(fi(t,r),0==t.h&&(t.src=null,e[Ri]=null)):Yt(r)}}}function se(r){return r in zr?zr[r]:zr[r]="on"+r}function Se(r,e){if(r.fa)r=!0;else{e=new er(e,this);var t=r.listener,s=r.la||r.src;r.ia&&ne(r),r=t.call(s,e)}return r}function dt(r){return(r=r[Ri])instanceof Qr?r:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(r){return"function"==typeof r?r:(r[zt]||(r[zt]=function(e){return r.handleEvent(e)}),r[zt])}function un(){De.call(this),this.i=new Qr(this),this.S=this,this.J=null}function Rn(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new cn(e,r);else if(e instanceof cn)e.target=e.target||r;else{var a=e;Wr(e=new cn(s,r),a)}if(a=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];a=$n(g,s,!0,e)&&a}if(a=$n(g=e.g=r,s,!0,e)&&a,a=$n(g,s,!1,e)&&a,t)for(d=0;d<t.length;d++)a=$n(g=e.g=t[d],s,!1,e)&&a}function $n(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.fa&&g.capture==t){var A=g.listener,H=g.la||g.src;g.ia&&fi(r.i,g),a=!1!==A.call(H,s)&&a}}return a&&!s.defaultPrevented}ve(un,De),un.prototype[ci]=!0,un.prototype.removeEventListener=function(r,e,t,s){G(this,r,e,t,s)},un.prototype.N=function(){if(un.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Yt(t[s]);delete r.g[e],r.h--}}this.J=null},un.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},un.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Jr=Ht.JSON.stringify;function Tt(){var r=vr;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Vt=new class Pi{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Dt,r=>r.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function sn(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function Tn(r){Ht.setTimeout(()=>{throw r},0)}let ar,Xr=!1,vr=new class yt{constructor(){this.h=this.g=null}add(e,t){const s=Vt.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Br=()=>{const r=Ht.Promise.resolve(void 0);ar=()=>{r.then(ai)}};var ai=()=>{for(var r;r=Tt();){try{r.h.call(r.g)}catch(t){Tn(t)}var e=Vt;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Xr=!1};function es(r,e){un.call(this),this.h=r||1,this.g=e||Ht,this.j=nt(this.qb,this),this.l=Date.now()}function ms(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function dr(r,e,t){if("function"==typeof r)t&&(r=nt(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=nt(r.handleEvent,r)}return 2147483647<Number(e)?-1:Ht.setTimeout(r,e||0)}function zi(r){r.g=dr(()=>{r.g=null,r.i&&(r.i=!1,zi(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}ve(es,un),(bt=es.prototype).ga=!1,bt.T=null,bt.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Rn(this,"tick"),this.ga&&(ms(this),this.start()))}},bt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.N=function(){es.$.N.call(this),ms(this),delete this.g};class Cs extends De{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(r){De.call(this),this.h=r,this.g={}}ve(ks,De);var Mr=[];function _n(r,e,t,s){Array.isArray(t)||(t&&(Mr[0]=t.toString()),t=Mr);for(var a=0;a<t.length;a++){var d=Pe(e,t[a],s||r.handleEvent,!1,r.h||r);if(!d)break;r.g[d.key]=d}}function ir(r){Rr(r.g,function(e,t){this.g.hasOwnProperty(t)&&ne(e)},r),r.g={}}function $i(){this.g=!0}function Xe(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rt(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var d=a[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<a.length;g++)a[g]=""}}}return Jr(t)}catch(A){return e}}(r,t)+(s?" "+s:"")})}ks.prototype.N=function(){ks.$.N.call(this),ir(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$i.prototype.Ea=function(){this.g=!1},$i.prototype.info=function(){};var _t={},Ot=null;function In(){return Ot=Ot||new un}function Lr(r){cn.call(this,_t.Ta,r)}function hr(r){const e=In();Rn(e,new Lr(e))}function br(r,e){cn.call(this,_t.STAT_EVENT,r),this.stat=e}function di(r){const e=In();Rn(e,new br(e,r))}function Ks(r,e){cn.call(this,_t.Ua,r),this.size=e}function ui(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){r()},e)}_t.Ta="serverreachability",ve(Lr,cn),_t.STAT_EVENT="statevent",ve(br,cn),_t.Ua="timingevent",ve(Ks,cn);var Wi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ds={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fs(){}function ho(){}Fs.prototype.h=null;var Ao,So={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fo(){cn.call(this,"d")}function ca(){cn.call(this,"c")}function Vo(){}function hs(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new ks(this),this.P=Ls,this.V=new es(r=On?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kr}function kr(){this.i=null,this.g="",this.h=!1}ve(fo,cn),ve(ca,cn),ve(Vo,Fs),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Ao=new Vo;var Ls=45e3,ro={},io={};function Vi(r,e,t){r.L=1,r.v=ts(Is(e)),r.s=t,r.S=!0,Vs(r,null)}function Vs(r,e){r.G=Date.now(),Uo(r),r.A=Is(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Pr(t.i,"t",s),r.C=0,t=r.l.J,r.h=new kr,r.g=ta(r.l,t?e:null,!r.s),0<r.O&&(r.M=new Cs(nt(r.Pa,r,r.g),r.O)),_n(r.U,r.g,"readystatechange",r.nb),e=r.I?_r(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),hr(),function xr(r,e,t,s,a,d){r.info(function(){if(r.g)if(d)for(var g="",A=d.split("&"),H=0;H<A.length;H++){var Q=A[H].split("=");if(1<Q.length){var de=Q[0];Q=Q[1];var Ve=de.split("_");g=2<=Ve.length&&"type"==Ve[1]?g+(de+"=")+Q+"&":g+(de+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+g})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Gi(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Pa(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=ri(r,t),a==io){4==e&&(r.o=4,di(14),s=!1),Xe(r.j,r.m,null,"[Incomplete Response]");break}if(a==ro){r.o=4,di(15),Xe(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}Xe(r.j,r.m,a,null),ys(r,a)}Gi(r)&&a!=io&&a!=ro&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,di(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Mi(e),e.M=!0,di(11))):(Xe(r.j,r.m,t,"[Invalid Chunked Response]"),qs(r),As(r))}function ri(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?io:(t=Number(e.substring(t,s)),isNaN(t)?ro:(s+=1)+t>e.length?io:(e=e.slice(s,s+t),r.C=s+t,e))}function Uo(r){r.Y=Date.now()+r.P,so(r,r.P)}function so(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=ui(nt(r.lb,r),e)}function Ss(r){r.B&&(Ht.clearTimeout(r.B),r.B=null)}function As(r){0==r.l.H||r.J||Ys(r.l,r)}function qs(r){Ss(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,ms(r.V),ir(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function ys(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||Bn(t.i,r)))if(!r.K&&Bn(t.i,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch(Q){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=ui(nt(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<r.G))break e;Oi(t),xo(t)}ea(t),di(18)}if(1>=Ni(t.i)&&t.oa){try{t.oa()}catch(Q){}t.oa=void 0}}else $o(t,11)}else if((r.K||t.g==r)&&Oi(t),!Wn(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let Q=a[e];if(t.V=Q[0],Q=Q[1],2==t.H)if("c"==Q[0]){t.K=Q[1],t.pa=Q[2];const de=Q[3];null!=de&&(t.ra=de,t.l.info("VER="+t.ra));const Ve=Q[4];null!=Ve&&(t.Ga=Ve,t.l.info("SVER="+t.Ga));const St=Q[5];null!=St&&"number"==typeof St&&0<St&&(t.L=s=1.5*St,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const $t=r.g;if($t){const En=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(En){var d=s.i;d.g||-1==En.indexOf("spdy")&&-1==En.indexOf("quic")&&-1==En.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(ns(d,d.h),d.h=null))}if(s.F){const kn=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;kn&&(s.Da=kn,Kr(s.I,s.F,kn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var g=r;if((s=t).wa=gu(s,s.J?s.pa:null,s.Y),g.K){Mo(s.i,g);var A=g,H=s.L;H&&A.setTimeout(H),A.B&&(Ss(A),Uo(A)),s.g=g}else $a(s);0<t.j.length&&$s(t)}else"stop"!=Q[0]&&"close"!=Q[0]||$o(t,7);else 3==t.H&&("stop"==Q[0]||"close"==Q[0]?"stop"==Q[0]?$o(t,7):Hs(t):"noop"!=Q[0]&&t.h&&t.h.Aa(Q),t.A=0)}hr()}catch(Q){}}function Bo(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Nn(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Ro(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if("undefined"!=typeof Map&&r instanceof Map)return Array.from(r.keys());if(!("undefined"!=typeof Set&&r instanceof Set)){if(Nn(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function vo(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if("undefined"!=typeof Map&&r instanceof Map||"undefined"!=typeof Set&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Nn(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,d=0;d<a;d++)e.call(void 0,s[d],t&&t[d],r)}(bt=hs.prototype).setTimeout=function(r){this.P=r},bt.nb=function(r){r=r.target;const e=this.M;e&&3==$r(r)?e.l():this.Pa(r)},bt.Pa=function(r){try{if(r==this.g)e:{const de=$r(this.g);var e=this.g.Ia();if(this.g.da(),!(3>de)&&(3!=de||On||this.g&&(this.h.h||this.g.ja()||qi(this.g)))){this.J||4!=de||7==e||hr(),Ss(this);var t=this.g.da();this.ca=t;t:if(Gi(this)){var s=qi(this.g);r="";var a=s.length,d=4==$r(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qs(this),As(this);var g="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:d&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==t,function ti(r,e,t,s,a,d,g){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.W,de,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wn(A)){var Q=A;break t}}Q=null}if(!(t=Q)){this.i=!1,this.o=3,di(12),qs(this),As(this);break e}Xe(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ys(this,t)}this.S?(Pa(this,de,g),On&&this.i&&3==de&&(_n(this.U,this.V,"tick",this.mb),this.V.start())):(Xe(this.j,this.m,g,null),ys(this,g)),4==de&&qs(this),this.i&&!this.J&&(4==de?Ys(this.l,this):(this.i=!1,Uo(this)))}else(function Si(r){const e={};r=(r.g&&2<=$r(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<r.length;s++){if(Wn(r[s]))continue;var t=sn(r[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const d=e[a]||[];e[a]=d,d.push(t)}!function lr(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<g.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),qs(this),As(this)}}}catch(de){}},bt.mb=function(){if(this.g){var r=$r(this.g),e=this.g.ja();this.C<e.length&&(Ss(this),Pa(this,r,e),this.i&&4!=r&&Uo(this))}},bt.cancel=function(){this.J=!0,qs(this)},bt.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Ze(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(hr(),di(17)),qs(this),this.o=2,As(this)):so(this,this.Y-r)};var Us=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bs(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Bs){this.h=r.h,ii(this,r.j),this.s=r.s,this.g=r.g,Eo(this,r.m),this.l=r.l;var e=r.i,t=new Rt;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Zs(this,t),this.o=r.o}else r&&(e=String(r).match(Us))?(this.h=!1,ii(this,e[1]||"",!0),this.s=Ts(e[2]||""),this.g=Ts(e[3]||"",!0),Eo(this,e[4]),this.l=Ts(e[5]||"",!0),Zs(this,e[6]||"",!0),this.o=Ts(e[7]||"")):(this.h=!1,this.i=new Rt(null,this.h))}function Is(r){return new Bs(r)}function ii(r,e,t){r.j=t?Ts(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Eo(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Zs(r,e,t){e instanceof Rt?(r.i=e,function Vr(r,e){e&&!r.j&&(jt(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(bn(this,s),Pr(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=js(e,ce)),r.i=new Rt(e,r.h))}function Kr(r,e,t){r.i.set(e,t)}function ts(r){return Kr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Ts(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function js(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Ei),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Ei(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Bs.prototype.toString=function(){var r=[],e=this.j;e&&r.push(js(e,F,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(js(e,F,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(js(t,"/"==t.charAt(0)?j:ae,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",js(t,Oe)),r.join("")};var F=/[#\/\?@]/g,ae=/[#\?:]/g,j=/[#\?]/g,ce=/[#\?@]/g,Oe=/#/g;function Rt(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function jt(r){r.g||(r.g=new Map,r.h=0,r.i&&function Ki(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var d=r[t].substring(0,s);a=r[t].substring(s+1)}else d=r[t];e(d,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bn(r,e){jt(r),e=gr(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function jr(r,e){return jt(r),e=gr(r,e),r.g.has(e)}function Pr(r,e,t){bn(r,e),0<t.length&&(r.i=null,r.g.set(gr(r,e),gt(t)),r.h+=t.length)}function gr(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function bi(r){this.l=r||pi,r=Ht.PerformanceNavigationTiming?0<(r=Ht.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ka&&Ht.g.Ka()&&Ht.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=Rt.prototype).add=function(r,e){jt(this),this.i=null,r=gr(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},bt.forEach=function(r,e){jt(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},bt.ta=function(){jt(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let d=0;d<a.length;d++)t.push(e[s])}return t},bt.Z=function(r){jt(this);let e=[];if("string"==typeof r)jr(this,r)&&(e=e.concat(this.g.get(gr(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},bt.set=function(r,e){return jt(this),this.i=null,jr(this,r=gr(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},bt.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const d=encodeURIComponent(String(s)),g=this.Z(s);for(s=0;s<g.length;s++){var a=d;""!==g[s]&&(a+="="+encodeURIComponent(String(g[s]))),r.push(a)}}return this.i=r.join("&")};var pi=10;function oo(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Ni(r){return r.h?1:r.g?r.g.size:0}function Bn(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function ns(r,e){r.g?r.g.add(e):r.h=e}function Mo(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function ao(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return gt(r.i)}function K(){this.g=new class{stringify(r){return Ht.JSON.stringify(r,void 0)}parse(r){return Ht.JSON.parse(r,void 0)}}}function V(r,e,t){const s=t||"";try{Bo(r,function(a,d){let g=a;rn(a)&&(g=Jr(a)),e.push(s+d+"="+encodeURIComponent(g))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function ue(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(d){}}function ke(r){this.l=r.fc||null,this.j=r.ob||!1}function Kt(r,e){un.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=gi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bi.prototype.cancel=function(){if(this.i=ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},ve(ke,Fs),ke.prototype.g=function(){return new Kt(this.l,this.j)},ke.prototype.i=function(r){return function(){return r}}({}),ve(Kt,un);var gi=0;function z(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function W(r){r.readyState=4,r.l=null,r.j=null,r.A=null,fe(r)}function fe(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(bt=Kt.prototype).open=function(r,e){if(this.readyState!=gi)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,fe(this)},bt.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Ht).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,W(this)),this.readyState=gi},bt.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,fe(this)),this.g&&(this.readyState=3,fe(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},bt.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?W(this):fe(this),3==this.readyState&&z(this)}},bt.Za=function(r){this.g&&(this.response=this.responseText=r,W(this))},bt.Ya=function(r){this.g&&(this.response=r,W(this))},bt.ka=function(){this.g&&W(this)},bt.setRequestHeader=function(r,e){this.v.append(r,e)},bt.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(Kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Ie=Ht.JSON.parse;function Le(r){un.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=It,this.L=this.M=!1}ve(Le,un);var It="",Qt=/^https?$/i,Vn=["POST","PUT"];function cr(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Gn(r),Di(r)}function Gn(r){r.F||(r.F=!0,Rn(r,"complete"),Rn(r,"error"))}function mi(r){if(r.h&&void 0!==Fn&&(!r.C[1]||4!=$r(r)||2!=r.da()))if(r.v&&4==$r(r))dr(r.La,0,r);else if(Rn(r,"readystatechange"),4==$r(r)){r.h=!1;try{const g=r.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===g){var a=String(r.I).match(Us)[1]||null;!a&&Ht.self&&Ht.self.location&&(a=Ht.self.location.protocol.slice(0,-1)),s=!Qt.test(a?a.toLowerCase():"")}t=s}if(t)Rn(r,"complete"),Rn(r,"success");else{r.m=6;try{var d=2<$r(r)?r.g.statusText:""}catch(A){d=""}r.j=d+" ["+r.da()+"]",Gn(r)}}finally{Di(r)}}}function Di(r,e){if(r.g){Ti(r);const t=r.g,s=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||Rn(r,"ready");try{t.onreadystatechange=s}catch(a){}}}function Ti(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Ht.clearTimeout(r.A),r.A=null)}function $r(r){return r.g?r.g.readyState:0}function qi(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case It:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Rs(r){let e="";return Rr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function as(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Rs(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Kr(r,e,t))}function Ui(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function rs(r){this.Ga=0,this.j=[],this.l=new $i,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ui("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ui("baseRetryDelayMs",5e3,r),this.hb=Ui("retryDelaySeedMs",1e4,r),this.eb=Ui("forwardChannelMaxRetries",2,r),this.xa=Ui("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new bi(r&&r.concurrentRequestLimit),this.Ja=new K,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Hs(r){if(Zo(r),3==r.H){var e=r.W++,t=Is(r.I);if(Kr(t,"SID",r.K),Kr(t,"RID",e),Kr(t,"TYPE","terminate"),da(r,t),(e=new hs(r,r.l,e)).L=2,e.v=ts(Is(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon)try{t=Ht.navigator.sendBeacon(e.v.toString(),"")}catch(s){}!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=ta(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Uo(e)}Na(r)}function xo(r){r.g&&(Mi(r),r.g.cancel(),r.g=null)}function Zo(r){xo(r),r.u&&(Ht.clearTimeout(r.u),r.u=null),Oi(r),r.i.cancel(),r.m&&("number"==typeof r.m&&Ht.clearTimeout(r.m),r.m=null)}function $s(r){if(!oo(r.i)&&!r.m){r.m=!0;var e=r.Na;ar||Br(),Xr||(ar(),Xr=!0),vr.add(e,r),r.C=0}}function _s(r,e){var t;t=e?e.m:r.W++;const s=Is(r.I);Kr(s,"SID",r.K),Kr(s,"RID",t),Kr(s,"AID",r.V),da(r,s),r.o&&r.s&&as(s,r.o,r.s),t=new hs(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=Po(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),ns(r.i,t),Vi(t,s,e)}function da(r,e){r.na&&Rr(r.na,function(t,s){Kr(e,s,t)}),r.h&&Bo({},function(t,s){Kr(e,s,t)})}function Po(r,e,t){t=Math.min(r.j.length,t);var s=r.h?nt(r.h.Va,r.h,r):null;e:{var a=r.j;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=a[0].g,g.push("ofs="+d)):d=0:g.push("ofs="+d);let A=!0;for(let H=0;H<t;H++){let Q=a[H].g;const de=a[H].map;if(Q-=d,0>Q)d=Math.max(0,a[H].g-100),A=!1;else try{V(de,g,"req"+Q+"_")}catch(Ve){s&&s(de)}}if(A){s=g.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,s}function $a(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;ar||Br(),Xr||(ar(),Xr=!0),vr.add(e,r),r.A=0}}function ea(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=ui(nt(r.Ma,r),Bi(r,r.A)),r.A++,0))}function Mi(r){null!=r.B&&(Ht.clearTimeout(r.B),r.B=null)}function uo(r){r.g=new hs(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Is(r.wa);Kr(e,"RID","rpc"),Kr(e,"SID",r.K),Kr(e,"AID",r.V),Kr(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&Kr(e,"TO",r.qa),Kr(e,"TYPE","xmlhttp"),da(r,e),r.o&&r.s&&as(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.v=ts(Is(e)),t.s=null,t.S=!0,Vs(t,r)}function Oi(r){null!=r.v&&(Ht.clearTimeout(r.v),r.v=null)}function Ys(r,e){var t=null;if(r.g==e){Oi(r),Mi(r),r.g=null;var s=2}else{if(!Bn(r.i,e))return;t=e.F,Mo(r.i,e),s=1}if(0!=r.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;Rn(s=In(),new Ks(s,t)),$s(r)}else $a(r);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function Ho(r,e){return!(Ni(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=ui(nt(r.Na,r,e),Bi(r,r.C)),r.C++,0)))}(r,e)||2==s&&ea(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),a){case 1:$o(r,5);break;case 4:$o(r,10);break;case 3:$o(r,6);break;default:$o(r,2)}}function Bi(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function $o(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var s=nt(r.pb,r);t||(t=new Bs("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||ii(t,"https"),ts(t)),function O(r,e){const t=new $i;if(Ht.Image){const s=new Image;s.onload=Qe(ue,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Qe(ue,t,s,"TestLoadImage: error",!1,e),s.onabort=Qe(ue,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Qe(ue,t,s,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else di(2);r.H=0,r.h&&r.h.za(e),Na(r),Zo(r)}function Na(r){if(r.H=0,r.ma=[],r.h){const e=ao(r.i);(0!=e.length||0!=r.j.length)&&(tn(r.ma,e),tn(r.ma,r.j),r.i.i.length=0,gt(r.j),r.j.length=0),r.h.ya()}}function gu(r,e,t){var s=t instanceof Bs?Is(t):new Bs(t);if(""!=s.g)e&&(s.g=e+"."+s.g),Eo(s,s.m);else{var a=Ht.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var d=new Bs(null);s&&ii(d,s),e&&(d.g=e),a&&Eo(d,a),t&&(d.l=t),s=d}return e=r.Da,(t=r.F)&&e&&Kr(s,t,e),Kr(s,"VER",r.ra),da(r,s),s}function ta(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Le(t&&r.Ha&&!r.va?new ke({ob:!0}):r.va)).Oa(r.J),e}function Ga(){}function po(){if(Jn&&!(10<=Number(Ur)))throw Error("Environmental error: no available transport.")}function Ms(r,e){un.call(this),this.g=new rs(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Wn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Yo(this)}function ha(r){fo.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Zi(){ca.call(this),this.status=1}function Yo(r){this.g=r}function go(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Go(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var d=r.g[3],g=(e=r.g[0])+(d^(t=r.g[1])&((a=r.g[2])^d))+s[0]+3614090360&4294967295;g=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=t+(g<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(a^d&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(t^a^d)+s[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(a^(t|~d))+s[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(a^(t|~d))+s[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(a^(t|~d))+s[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((d=(e=t+((g=e+(a^(t|~d))+s[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((a=d+((g=a+(e^(d|~t))+s[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(g<<21&4294967295|g>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+d&4294967295}function si(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var d=0|r[a];s&&d==e||(t[a]=d,s=!1)}this.g=t}(bt=Le.prototype).Oa=function(r){this.M=r},bt.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ao.g(),this.C=function os(r){return r.h||(r.h=r.i())}(this.u?this.u:Ao),this.g.onreadystatechange=nt(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(d){return void cr(this,d)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const d of s.keys())t.set(d,s.get(d))}s=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),a=Ht.FormData&&r instanceof Ht.FormData,!(0<=xe(Vn,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,g]of t)this.g.setRequestHeader(d,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ti(this),0<this.B&&((this.L=function xn(r){return Jn&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nt(this.ua,this)):this.A=dr(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(d){cr(this,d)}},bt.ua=function(){void 0!==Fn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rn(this,"timeout"),this.abort(8))},bt.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,Rn(this,"complete"),Rn(this,"abort"),Di(this))},bt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Di(this,!0)),Le.$.N.call(this)},bt.La=function(){this.s||(this.G||this.v||this.l?mi(this):this.kb())},bt.kb=function(){mi(this)},bt.isActive=function(){return!!this.g},bt.da=function(){try{return 2<$r(this)?this.g.status:-1}catch(r){return-1}},bt.ja=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},bt.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Ie(e)}},bt.Ia=function(){return this.m},bt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=rs.prototype).ra=8,bt.H=1,bt.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new hs(this,this.l,r);let d=this.s;if(this.U&&(d?(d=_r(d),Wr(d,this.U)):d=this.U),null!==this.o||this.O||(a.I=d,d=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Po(this,a,e),Kr(t=Is(this.I),"RID",r),Kr(t,"CVER",22),this.F&&Kr(t,"X-HTTP-Session-Id",this.F),da(this,t),d&&(this.O?e="headers="+encodeURIComponent(String(Rs(d)))+"&"+e:this.o&&as(t,this.o,d)),ns(this.i,a),this.bb&&Kr(t,"TYPE","init"),this.P?(Kr(t,"$req",e),Kr(t,"SID","null"),a.aa=!0,Vi(a,t,null)):Vi(a,t,e),this.H=2}}else 3==this.H&&(r?_s(this,r):0==this.j.length||oo(this.i)||_s(this))},bt.Ma=function(){if(this.u=null,uo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=ui(nt(this.jb,this),r)}},bt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,di(10),xo(this),uo(this))},bt.ib=function(){null!=this.v&&(this.v=null,xo(this),ea(this),di(19))},bt.pb=function(r){r?(this.l.info("Successfully pinged google.com"),di(2)):(this.l.info("Failed to ping google.com"),di(1))},bt.isActive=function(){return!!this.h&&this.h.isActive(this)},(bt=Ga.prototype).Ba=function(){},bt.Aa=function(){},bt.za=function(){},bt.ya=function(){},bt.isActive=function(){return!0},bt.Va=function(){},po.prototype.g=function(r,e){return new Ms(r,e)},ve(Ms,un),Ms.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;di(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=gu(r,null,r.Y),$s(r)},Ms.prototype.close=function(){Hs(this.g)},Ms.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Jr(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&$s(e)},Ms.prototype.N=function(){this.g.h=null,delete this.j,Hs(this.g),delete this.g,Ms.$.N.call(this)},ve(ha,fo),ve(Zi,ca),ve(Yo,Ga),Yo.prototype.Ba=function(){Rn(this.g,"a")},Yo.prototype.Aa=function(r){Rn(this.g,new ha(r))},Yo.prototype.za=function(r){Rn(this.g,new Zi)},Yo.prototype.ya=function(){Rn(this.g,"b")},ve(go,function Du(){this.blockSize=-1}),go.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},go.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,d=0;d<e;){if(0==a)for(;d<=t;)Go(this,r,d),d+=this.blockSize;if("string"==typeof r){for(;d<e;)if(s[a++]=r.charCodeAt(d++),a==this.blockSize){Go(this,s),a=0;break}}else for(;d<e;)if(s[a++]=r[d++],a==this.blockSize){Go(this,s),a=0;break}}this.h=a,this.i+=e},go.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var yl={};function Uu(r){return-128<=r&&128>r?function Fr(r,e){var t=yl;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new si([0|e],0>e?-1:0)}):new si([0|r],0>r?-1:0)}function wo(r){if(isNaN(r)||!isFinite(r))return tu;if(0>r)return vs(wo(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=mu;return new si(e,0)}var mu=4294967296,tu=Uu(0),yu=Uu(1),nc=Uu(16777216);function Qs(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Js(r){return-1==r.h}function vs(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new si(t,~r.h).add(yu)}function mo(r,e){return r.add(vs(e))}function fa(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Oa(r,e){this.g=r,this.h=e}function Qo(r,e){if(Qs(e))throw Error("division by zero");if(Qs(r))return new Oa(tu,tu);if(Js(r))return e=Qo(vs(r),e),new Oa(vs(e.g),vs(e.h));if(Js(e))return e=Qo(r,vs(e)),new Oa(vs(e.g),e.h);if(30<r.g.length){if(Js(r)||Js(e))throw Error("slowDivide_ only works with positive integers.");for(var t=yu,s=e;0>=s.X(r);)t=_u(t),s=_u(s);var a=Jo(t,1),d=Jo(s,1);for(s=Jo(s,2),t=Jo(t,2);!Qs(s);){var g=d.add(s);0>=g.X(r)&&(a=a.add(t),d=g),s=Jo(s,1),t=Jo(t,1)}return e=mo(r,a.R(e)),new Oa(a,e)}for(a=tu;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),g=(d=wo(t)).R(e);Js(g)||0<g.X(r);)g=(d=wo(t-=s)).R(e);Qs(d)&&(d=yu),a=a.add(d),r=mo(r,g)}return new Oa(a,r)}function _u(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new si(t,r.h)}function Jo(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],d=0;d<s;d++)a[d]=0<e?r.D(d+t)>>>e|r.D(d+t+1)<<32-e:r.D(d+t);return new si(a,r.h)}(bt=si.prototype).ea=function(){if(Js(this))return-vs(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:mu+s)*e,e*=mu}return r},bt.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Qs(this))return"0";if(Js(this))return"-"+vs(this).toString(r);for(var e=wo(Math.pow(r,6)),t=this,s="";;){var a=Qo(t,e).g,d=((0<(t=mo(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Qs(t=a))return d+s;for(;6>d.length;)d="0"+d;s=d+s}},bt.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},bt.X=function(r){return Js(r=mo(this,r))?-1:Qs(r)?0:1},bt.abs=function(){return Js(this)?vs(this):this},bt.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var d=s+(65535&this.D(a))+(65535&r.D(a)),g=(d>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=g>>>16,t[a]=(g&=65535)<<16|(d&=65535)}return new si(t,-2147483648&t[t.length-1]?-1:0)},bt.R=function(r){if(Qs(this)||Qs(r))return tu;if(Js(this))return Js(r)?vs(this).R(vs(r)):vs(vs(this).R(r));if(Js(r))return vs(this.R(vs(r)));if(0>this.X(nc)&&0>r.X(nc))return wo(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var d=this.D(s)>>>16,g=65535&this.D(s),A=r.D(a)>>>16,H=65535&r.D(a);t[2*s+2*a]+=g*H,fa(t,2*s+2*a),t[2*s+2*a+1]+=d*H,fa(t,2*s+2*a+1),t[2*s+2*a+1]+=g*A,fa(t,2*s+2*a+1),t[2*s+2*a+2]+=d*A,fa(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new si(t,0)},bt.gb=function(r){return Qo(this,r).h},bt.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new si(t,this.h&r.h)},bt.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new si(t,this.h|r.h)},bt.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new si(t,this.h^r.h)},po.prototype.createWebChannel=po.prototype.g,Ms.prototype.send=Ms.prototype.u,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,ds.COMPLETE="complete",ho.EventType=So,So.OPEN="a",So.CLOSE="b",So.ERROR="c",So.MESSAGE="d",un.prototype.listen=un.prototype.O,Le.prototype.listenOnce=Le.prototype.P,Le.prototype.getLastError=Le.prototype.Sa,Le.prototype.getLastErrorCode=Le.prototype.Ia,Le.prototype.getStatus=Le.prototype.da,Le.prototype.getResponseJson=Le.prototype.Wa,Le.prototype.getResponseText=Le.prototype.ja,Le.prototype.send=Le.prototype.ha,Le.prototype.setWithCredentials=Le.prototype.Oa,go.prototype.digest=go.prototype.l,go.prototype.reset=go.prototype.reset,go.prototype.update=go.prototype.j,si.prototype.add=si.prototype.add,si.prototype.multiply=si.prototype.R,si.prototype.modulo=si.prototype.gb,si.prototype.compare=si.prototype.X,si.prototype.toNumber=si.prototype.ea,si.prototype.toString=si.prototype.toString,si.prototype.getBits=si.prototype.D,si.fromNumber=wo,si.fromString=function Su(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return vs(Su(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=wo(Math.pow(e,8)),s=tu,a=0;a<r.length;a+=8){var d=Math.min(8,r.length-a),g=parseInt(r.substring(a,a+d),e);8>d?(d=wo(Math.pow(e,d)),s=s.R(d).add(wo(g))):s=(s=s.R(t)).add(wo(g))}return s};var vu=Ut.createWebChannelTransport=function(){return new po},Au=Ut.getStatEventTarget=function(){return In()},Eu=Ut.ErrorCode=Wi,pa=Ut.EventType=ds,Bu=Ut.Event=_t,nu=Ut.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ju=Ut.FetchXmlHttpFactory=ke,ka=Ut.WebChannel=ho,Hu=Ut.XhrIo=Le,x=Ut.Md5=go,D=Ut.Integer=si;const I="@firebase/firestore";class U{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}U.UNAUTHENTICATED=new U(null),U.GOOGLE_CREDENTIALS=new U("google-credentials-uid"),U.FIRST_PARTY=new U("first-party-uid"),U.MOCK_USER=new U("mock-user");let Y="9.23.0";const le=new Et.Yd("@firebase/firestore");function Re(){return le.logLevel}function $e(r,...e){if(le.logLevel<=Et.in.DEBUG){const t=e.map(Kn);le.debug(`Firestore (${Y}): ${r}`,...t)}}function en(r,...e){if(le.logLevel<=Et.in.ERROR){const t=e.map(Kn);le.error(`Firestore (${Y}): ${r}`,...t)}}function yr(r,...e){if(le.logLevel<=Et.in.WARN){const t=e.map(Kn);le.warn(`Firestore (${Y}): ${r}`,...t)}}function Kn(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function ln(r="Unexpected state"){const e=`FIRESTORE (${Y}) INTERNAL ASSERTION FAILED: `+r;throw en(e),new Error(e)}function pn(r,e){r||ln()}function yn(r,e){return r}const vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends pt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ra{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ga{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(U.UNAUTHENTICATED))}shutdown(){}}class za{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jl{constructor(e){this.t=e,this.currentUser=U.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const d=Q=>this.i!==a?(a=this.i,t(Q)):Promise.resolve();let g=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Yr,e.enqueueRetryable(()=>d(this.currentUser))};const A=()=>{const Q=g;e.enqueueRetryable((0,we.Z)(function*(){yield Q.promise,yield d(s.currentUser)}))},H=Q=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(Q=>H(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?H(Q):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Yr)}},0),A()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pn("string"==typeof s.accessToken),new ra(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pn(null===e||"string"==typeof e),new U(e)}}class $u{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=U.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Wa{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new $u(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(U.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ru{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=d=>{null!=d.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.T;return this.T=d.token,$e("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const a=d=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.I.onInit(d=>a(d)),setTimeout(()=>{if(!this.appCheck){const d=this.I.getImmediate({optional:!0});d?a(d):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pn("string"==typeof t.token),this.T=t.token,new Ru(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _l(r){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Ka{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=_l(40);for(let d=0;d<a.length;++d)s.length<20&&a[d]<t&&(s+=e.charAt(a[d]%e.length))}return s}}function Hr(r,e){return r<e?-1:r>e?1:0}function wu(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function Fa(r){return r+"\0"}class fs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zt(vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zt(vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zt(vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zt(vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fs.fromMillis(Date.now())}static fromDate(e){return fs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new fs(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Hr(this.nanoseconds,e.nanoseconds):Hr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nr(e)}static min(){return new nr(new fs(0,0))}static max(){return new nr(new fs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class La{constructor(e,t,s){void 0===t?t=0:t>e.length&&ln(),void 0===s?s=e.length-t:s>e.length-t&&ln(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===La.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof La?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const d=e.get(a),g=t.get(a);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xi extends La{construct(e,t,s){return new xi(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Zt(vt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new xi(t)}static emptyPath(){return new xi([])}}const Os=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yi extends La{construct(e,t,s){return new Yi(e,t,s)}static isValidIdentifier(e){return Os.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yi(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const d=()=>{if(0===s.length)throw new Zt(vt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let g=!1;for(;a<e.length;){const A=e[a];if("\\"===A){if(a+1===e.length)throw new Zt(vt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[a+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Zt(vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=H,a+=2}else"`"===A?(g=!g,a++):"."!==A||g?(s+=A,a++):(d(),a++)}if(d(),g)throw new Zt(vt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yi(t)}static emptyPath(){return new Yi([])}}class Cn{constructor(e){this.path=e}static fromPath(e){return new Cn(xi.fromString(e))}static fromName(e){return new Cn(xi.fromString(e).popFirst(5))}static empty(){return new Cn(xi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Cn(new xi(e.slice()))}}class Gu{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function ma(r){return r.fields.find(e=>2===e.kind)}function bs(r){return r.fields.filter(e=>2!==e.kind)}Gu.UNKNOWN_ID=-1;class zu{constructor(e,t){this.fieldPath=e,this.kind=t}}class ya{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ya(0,Co.min())}}function xu(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=nr.fromTimestamp(1e9===s?new fs(t+1,0):new fs(t,s));return new Co(a,Cn.empty(),e)}function vl(r){return new Co(r.readTime,r.key,-1)}class Co{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Co(nr.min(),Cn.empty(),-1)}static max(){return new Co(nr.max(),Cn.empty(),-1)}}function Wu(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Cn.comparator(r.documentKey,e.documentKey),0!==t?t:Hr(r.largestBatchId,e.largestBatchId))}const El="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ua{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xs(r){return ru.apply(this,arguments)}function ru(){return ru=(0,we.Z)(function*(r){if(r.code!==vt.FAILED_PRECONDITION||r.message!==El)throw r;$e("LocalStore","Unexpectedly lost primary lease")}),ru.apply(this,arguments)}class wt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wt((s,a)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,a)},this.catchCallback=d=>{this.wrapFailure(t,d).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof wt?t:wt.resolve(t)}catch(t){return wt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):wt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):wt.reject(t)}static resolve(e){return new wt((t,s)=>{t(e)})}static reject(e){return new wt((t,s)=>{s(e)})}static waitFor(e){return new wt((t,s)=>{let a=0,d=0,g=!1;e.forEach(A=>{++a,A.next(()=>{++d,g&&d===a&&t()},H=>s(H))}),g=!0,d===a&&t()})}static or(e){let t=wt.resolve(!1);for(const s of e)t=t.next(a=>a?wt.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,d)=>{s.push(t.call(this,a,d))}),this.waitFor(s)}static mapArray(e,t){return new wt((s,a)=>{const d=e.length,g=new Array(d);let A=0;for(let H=0;H<d;H++){const Q=H;t(e[Q]).next(de=>{g[Q]=de,++A,A===d&&s(g)},de=>a(de))}})}static doWhile(e,t){return new wt((s,a)=>{const d=()=>{!0===e()?t().next(()=>{d()},a):s()};d()})}}class qa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Yr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ca(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=sa(s.target.error);this.v.reject(new Ca(e,a))}}static open(e,t,s,a){try{return new qa(t,e.transaction(a,s))}catch(d){throw new Ca(t,d)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ic(t)}}class Io{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Io.S((0,pt.z$)())&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),zo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,pt.hl)())return!1;if(Io.C())return!0;const e=(0,pt.z$)(),t=Io.S(e),s=0<t&&t<10,a=Io.N(e),d=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,we.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{a(new Ca(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const A=g.target.error;a("VersionError"===A.name?new Zt(vt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new Zt(vt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new Ca(e,A))},d.onupgradeneeded=g=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.V.O(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var d=this;return(0,we.Z)(function*(){const g="readonly"===t;let A=0;for(;;){++A;try{d.db=yield d.$(e);const H=qa.open(d.db,e,g?"readonly":"readwrite",s),Q=a(H).next(de=>(H.P(),de)).catch(de=>(H.abort(de),wt.reject(de))).toPromise();return Q.catch(()=>{}),yield H.R,Q}catch(H){const Q=H,de="FirebaseError"!==Q.name&&A<3;if($e("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",de),d.close(),!de)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iu{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return zo(this.L.delete())}}class Ca extends Zt{constructor(e,t){super(vt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ia(r){return"IndexedDbTransactionError"===r.name}class ic{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),zo(s)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),zo(this.store.add(e))}get(e){return zo(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),zo(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),zo(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),d=[];return this.W(a,(g,A)=>{d.push(A)}).next(()=>d)}{const a=this.store.getAll(s.range);return new wt((d,g)=>{a.onerror=A=>{g(A.target.error)},a.onsuccess=A=>{d(A.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new wt((a,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{a(g.target.result)}})}J(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(d,g,A)=>A.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new wt((s,a)=>{t.onerror=d=>{const g=sa(d.target.error);a(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(A=>{A?g.continue():s()}):s()}})}W(e,t){const s=[];return new wt((a,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const A=g.target.result;if(!A)return void a();const H=new iu(A),Q=t(A.primaryKey,A.value,H);if(Q instanceof wt){const de=Q.catch(Ve=>(H.done(),wt.reject(Ve)));s.push(de)}H.isDone?a():null===H.K?A.continue():A.continue(H.K)}}).next(()=>wt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zo(r){return new wt((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=sa(s.target.error);t(a)}})}let wl=!1;function sa(r){const e=Io.S((0,pt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new Zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wl||(wl=!0,setTimeout(()=>{throw s},0)),s}}return r}class Pu{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){ia(s)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield xs(s)}yield t.et(6e4)}))}}class Ia{constructor(e,t){this.localStore=e,this.persistence=t}nt(){var e=this;return(0,we.Z)(function*(t=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>e.st(s,t))}).apply(this,arguments)}st(e,t){const s=new Set;let a=t,d=!0;return wt.doWhile(()=>!0===d&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return $e("IndexBackiller",`Processing collection: ${g}`),this.it(e,g,a).next(A=>{a-=A,s.add(g)});d=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.rt(a,d)).next(A=>($e("IndexBackiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(e,t,A))).next(()=>g.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,d)=>{const g=vl(d);Wu(g,s)>0&&(s=g)}),new Co(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Xs=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function su(r){return null==r}function Xo(r){return 0===r&&1/r==-1/0}function rl(r){return"number"==typeof r&&Number.isInteger(r)&&!Xo(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function To(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Za(e)),e=Ta(r.get(t),e);return Za(e)}function Ta(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const d=r.charAt(a);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function Za(r){return r+"\x01\x01"}function ba(r){const e=r.length;if(pn(e>=2),2===e)return pn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),xi.emptyPath();const t=e-2,s=[];let a="";for(let d=0;d<e;){const g=r.indexOf("\x01",d);switch((g<0||g>t)&&ln(),r.charAt(g+1)){case"\x01":const A=r.substring(d,g);let H;0===a.length?H=A:(a+=A,H=a,a=""),s.push(H);break;case"\x10":a+=r.substring(d,g),a+="\0";break;case"\x11":a+=r.substring(d,g+1);break;default:ln()}d=g+2}return new xi(s)}const Ba=["userId","batchId"];function ou(r,e){return[r,To(e)]}function Ya(r,e,t){return[r,To(e),t]}const Gs={},Cl=["prefixPath","collectionGroup","readTime","documentId"],Cu=["prefixPath","collectionGroup","documentId"],Ku=["collectionGroup","readTime","prefixPath","documentId"],qu=["canonicalId","targetId"],Zu=["targetId","path"],Nu=["path","targetId"],il=["collectionId","parent"],Il=["indexId","uid"],Yu=["uid","sequenceNumber"],sl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],au=["indexId","uid","orderedDocumentKey"],q=["userId","collectionPath","documentId"],E=["userId","collectionPath","largestBatchId"],C=["userId","collectionGroup","largestBatchId"],k=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],re=[...k,"documentOverlays"],ye=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Be=ye,je=[...Be,"indexConfiguration","indexState","indexEntries"];class st extends Ua{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Nt(r,e){const t=yn(r);return Io.M(t.ht,e)}function Pn(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function qn(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function mr(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class rr{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Er(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Er(this.root,e,this.comparator,!1)}getReverseIterator(){return new Er(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Er(this.root,e,this.comparator,!0)}}class Er{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?s(e.key,t):1,t&&a&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,t,s,a,d){this.key=e,this.value=t,this.color=null!=s?s:ur.RED,this.left=null!=a?a:ur.EMPTY,this.right=null!=d?d:ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,d){return new ur(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const d=s(e,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===d?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ur.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ln();const e=this.left.check();if(e!==this.right.check())throw ln();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1,ur.EMPTY=new class{constructor(){this.size=0}get key(){throw ln()}get value(){throw ln()}get color(){throw ln()}get left(){throw ln()}get right(){throw ln()}copy(r,e,t,s,a){return this}insert(r,e,t){return new ur(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wr{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ai(this.data.getIterator())}getIteratorFrom(e){return new Ai(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof wr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(0!==this.comparator(a,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wr(this.comparator);return t.data=e,t}}class Ai{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function us(r){return r.hasNext()?r.getNext():void 0}class hi{constructor(e){this.fields=e,e.sort(Yi.comparator)}static empty(){return new hi([])}unionWith(e){let t=new wr(Yi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wu(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ps extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class is{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw"undefined"!=typeof DOMException&&a instanceof DOMException?new Ps("Invalid base64 string: "+a):a}}(e);return new is(t)}static fromUint8Array(e){const t=function(s){let a="";for(let d=0;d<s.length;++d)a+=String.fromCharCode(s[d]);return a}(e);return new is(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}is.EMPTY_BYTE_STRING=new is("");const No=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(r){if(pn(!!r),"string"==typeof r){let e=0;const t=No.exec(r);if(pn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yi(r.seconds),nanos:yi(r.nanos)}}function yi(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function eo(r){return"string"==typeof r?is.fromBase64String(r):is.fromUint8Array(r)}function oa(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ps(r){const e=r.mapValue.fields.__previous_value__;return oa(e)?ps(e):e}function yo(r){const e=ji(r.mapValue.fields.__local_write_time__.timestampValue);return new fs(e.seconds,e.nanos)}class Sa{constructor(e,t,s,a,d,g,A,H,Q){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=A,this.longPollingOptions=H,this.useFetchStreams=Q}}class Oo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}const Hn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sr={nullValue:"NULL_VALUE"};function Dr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?oa(r)?4:Yn(r)?9007199254740991:10:ln()}function ni(r,e){if(r===e)return!0;const t=Dr(r);if(t!==Dr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return yo(r).isEqual(yo(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const d=ji(s.timestampValue),g=ji(a.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,eo(r.bytesValue).isEqual(eo(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return yi(s.geoPointValue.latitude)===yi(a.geoPointValue.latitude)&&yi(s.geoPointValue.longitude)===yi(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return yi(s.integerValue)===yi(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const d=yi(s.doubleValue),g=yi(a.doubleValue);return d===g?Xo(d)===Xo(g):isNaN(d)&&isNaN(g)}return!1}(r,e);case 9:return wu(r.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:return function(s,a){const d=s.mapValue.fields||{},g=a.mapValue.fields||{};if(Pn(d)!==Pn(g))return!1;for(const A in d)if(d.hasOwnProperty(A)&&(void 0===g[A]||!ni(d[A],g[A])))return!1;return!0}(r,e);default:return ln()}var a}function ws(r,e){return void 0!==(r.values||[]).find(t=>ni(t,e))}function lo(r,e){if(r===e)return 0;const t=Dr(r),s=Dr(e);if(t!==s)return Hr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Hr(r.booleanValue,e.booleanValue);case 2:return function(a,d){const g=yi(a.integerValue||a.doubleValue),A=yi(d.integerValue||d.doubleValue);return g<A?-1:g>A?1:g===A?0:isNaN(g)?isNaN(A)?0:-1:1}(r,e);case 3:return Wo(r.timestampValue,e.timestampValue);case 4:return Wo(yo(r),yo(e));case 5:return Hr(r.stringValue,e.stringValue);case 6:return function(a,d){const g=eo(a),A=eo(d);return g.compareTo(A)}(r.bytesValue,e.bytesValue);case 7:return function(a,d){const g=a.split("/"),A=d.split("/");for(let H=0;H<g.length&&H<A.length;H++){const Q=Hr(g[H],A[H]);if(0!==Q)return Q}return Hr(g.length,A.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,d){const g=Hr(yi(a.latitude),yi(d.latitude));return 0!==g?g:Hr(yi(a.longitude),yi(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,d){const g=a.values||[],A=d.values||[];for(let H=0;H<g.length&&H<A.length;++H){const Q=lo(g[H],A[H]);if(Q)return Q}return Hr(g.length,A.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,d){if(a===Hn.mapValue&&d===Hn.mapValue)return 0;if(a===Hn.mapValue)return 1;if(d===Hn.mapValue)return-1;const g=a.fields||{},A=Object.keys(g),H=d.fields||{},Q=Object.keys(H);A.sort(),Q.sort();for(let de=0;de<A.length&&de<Q.length;++de){const Ve=Hr(A[de],Q[de]);if(0!==Ve)return Ve;const St=lo(g[A[de]],H[Q[de]]);if(0!==St)return St}return Hr(A.length,Q.length)}(r.mapValue,e.mapValue);default:throw ln()}}function Wo(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Hr(r,e);const t=ji(r),s=ji(e),a=Hr(t.seconds,s.seconds);return 0!==a?a:Hr(t.nanos,s.nanos)}function ko(r){return b(r)}function b(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=ji(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?eo(r.bytesValue).toBase64():"referenceValue"in r?Cn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",d=!0;for(const g of s.values||[])d?d=!1:a+=",",a+=b(g);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let d="{",g=!0;for(const A of a)g?g=!1:d+=",",d+=`${A}:${b(s.fields[A])}`;return d+"}"}(r.mapValue):ln();var e}function J(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function _e(r){return!!r&&"integerValue"in r}function He(r){return!!r&&"arrayValue"in r}function ut(r){return!!r&&"nullValue"in r}function kt(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mn(r){return!!r&&"mapValue"in r}function vn(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return qn(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=vn(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vn(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Yn(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function ei(r){return"nullValue"in r?sr:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?J(Oo.empty(),Cn.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:ln()}function Nr(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?J(Oo.empty(),Cn.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Hn:ln()}function bo(r,e){const t=lo(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function co(r,e){const t=lo(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ds{constructor(e){this.value=e}static empty(){return new Ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!mn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vn(t)}setAll(e){let t=Yi.emptyPath(),s={},a=[];e.forEach((g,A)=>{if(!t.isImmediateParentOf(A)){const H=this.getFieldsMap(t);this.applyChanges(H,s,a),s={},a=[],t=A.popLast()}g?s[A.lastSegment()]=vn(g):a.push(A.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,s,a)}delete(e){const t=this.field(e.popLast());mn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];mn(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){qn(t,(a,d)=>e[a]=d);for(const a of s)delete e[a]}clone(){return new Ds(vn(this.value))}}function Iu(r){const e=[];return qn(r.fields,(t,s)=>{const a=new Yi([t]);if(mn(s)){const d=Iu(s.mapValue).fields;if(0===d.length)e.push(a);else for(const g of d)e.push(a.child(g))}else e.push(a)}),new hi(e)}class Hi{constructor(e,t,s,a,d,g,A){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=d,this.data=g,this.documentState=A}static newInvalidDocument(e){return new Hi(e,0,nr.min(),nr.min(),nr.min(),Ds.empty(),0)}static newFoundDocument(e,t,s,a){return new Hi(e,1,t,nr.min(),s,a,0)}static newNoDocument(e,t){return new Hi(e,2,t,nr.min(),nr.min(),Ds.empty(),0)}static newUnknownDocument(e,t){return new Hi(e,3,t,nr.min(),nr.min(),Ds.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Do{constructor(e,t){this.position=e,this.inclusive=t}}function ja(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const d=e[a],g=r.position[a];if(s=d.field.isKeyField()?Cn.comparator(Cn.fromName(g.referenceValue),t.key):lo(g,t.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function ol(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ni(r.position[t],e.position[t]))return!1;return!0}class Hl{constructor(e,t="asc"){this.field=e,this.dir=t}}function sc(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class oc{}class _i extends oc{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Hd(e,t,s):"array-contains"===t?new R(e,s):"in"===t?new te(e,s):"not-in"===t?new pe(e,s):"array-contains-any"===t?new ot(e,s):new _i(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new T(e,s):new p(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lo(t,this.value)):null!==t&&Dr(this.value)===Dr(t)&&this.matchesComparison(lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ln()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Qi extends oc{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Qi(e,t)}matches(e){return uu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function uu(r){return"and"===r.op}function xc(r){return"or"===r.op}function _a(r){return Tl(r)&&uu(r)}function Tl(r){for(const e of r.filters)if(e instanceof Qi)return!1;return!0}function lu(r){if(r instanceof _i)return r.field.canonicalString()+r.op.toString()+ko(r.value);if(_a(r))return r.filters.map(e=>lu(e)).join(",");{const e=r.filters.map(t=>lu(t)).join(",");return`${r.op}(${e})`}}function cu(r,e){return r instanceof _i?(t=r,(s=e)instanceof _i&&t.op===s.op&&t.field.isEqual(s.field)&&ni(t.value,s.value)):r instanceof Qi?function(t,s){return s instanceof Qi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,d,g)=>a&&cu(d,s.filters[g]),!0)}(r,e):void ln();var t,s}function Aa(r,e){const t=r.filters.concat(e);return Qi.create(t,r.op)}function Ou(r){return r instanceof _i?`${(e=r).field.canonicalString()} ${e.op} ${ko(e.value)}`:r instanceof Qi?function(e){return e.op.toString()+" {"+e.getFilters().map(Ou).join(" ,")+"}"}(r):"Filter";var e}class Hd extends _i{constructor(e,t,s){super(e,t,s),this.key=Cn.fromName(s.referenceValue)}matches(e){const t=Cn.comparator(e.key,this.key);return this.matchesComparison(t)}}class T extends _i{constructor(e,t){super(e,"in",t),this.keys=v(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class p extends _i{constructor(e,t){super(e,"not-in",t),this.keys=v(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function v(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Cn.fromName(s.referenceValue))}class R extends _i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return He(t)&&ws(t.arrayValue,this.value)}}class te extends _i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ws(this.value.arrayValue,t)}}class pe extends _i{constructor(e,t){super(e,"not-in",t)}matches(e){if(ws(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ws(this.value.arrayValue,t)}}class ot extends _i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!He(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ws(this.value.arrayValue,s))}}class xt{constructor(e,t=null,s=[],a=[],d=null,g=null,A=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=d,this.startAt=g,this.endAt=A,this.dt=null}}function hn(r,e=null,t=[],s=[],a=null,d=null,g=null){return new xt(r,e,t,s,a,d,g)}function Un(r){const e=yn(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>lu(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),su(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ko(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ko(s)).join(",")),e.dt=t}return e.dt}function Cr(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!sc(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!cu(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ol(r.startAt,e.startAt)&&ol(r.endAt,e.endAt)}function Or(r){return Cn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function ki(r,e){return r.filters.filter(t=>t instanceof _i&&t.field.isEqual(e))}function aa(r,e,t){let s=sr,a=!0;for(const d of ki(r,e)){let g=sr,A=!0;switch(d.op){case"<":case"<=":g=ei(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,A=!1;break;case"!=":case"not-in":g=sr}bo({value:s,inclusive:a},{value:g,inclusive:A})<0&&(s=g,a=A)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const g=t.position[d];bo({value:s,inclusive:a},{value:g,inclusive:t.inclusive})<0&&(s=g,a=t.inclusive);break}return{value:s,inclusive:a}}function al(r,e,t){let s=Hn,a=!0;for(const d of ki(r,e)){let g=Hn,A=!0;switch(d.op){case">=":case">":g=Nr(d.value),A=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,A=!1;break;case"!=":case"not-in":g=Hn}co({value:s,inclusive:a},{value:g,inclusive:A})>0&&(s=g,a=A)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const g=t.position[d];co({value:s,inclusive:a},{value:g,inclusive:t.inclusive})>0&&(s=g,a=t.inclusive);break}return{value:s,inclusive:a}}class Ra{constructor(e,t=null,s=[],a=[],d=null,g="F",A=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=d,this.limitType=g,this.startAt=A,this.endAt=H,this.wt=null,this._t=null}}function Pc(r,e,t,s,a,d,g,A){return new Ra(r,e,t,s,a,d,g,A)}function bl(r){return new Ra(r)}function ac(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Dl(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function ku(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function $l(r){return null!==r.collectionGroup}function va(r){const e=yn(r);if(null===e.wt){e.wt=[];const t=ku(e),s=Dl(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Hl(t)),e.wt.push(new Hl(Yi.keyField(),"asc"));else{let a=!1;for(const d of e.explicitOrderBy)e.wt.push(d),d.field.isKeyField()&&(a=!0);if(!a){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Hl(Yi.keyField(),d))}}}return e.wt}function Ea(r){const e=yn(r);if(!e._t)if("F"===e.limitType)e._t=hn(e.path,e.collectionGroup,va(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of va(e))t.push(new Hl(d.field,"desc"===d.dir?"asc":"desc"));const s=e.endAt?new Do(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Do(e.startAt.position,e.startAt.inclusive):null;e._t=hn(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function uc(r,e){e.getFirstInequalityField(),ku(r);const t=r.filters.concat([e]);return new Ra(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function lc(r,e,t){return new Ra(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Gl(r,e){return Cr(Ea(r),Ea(e))&&r.limitType===e.limitType}function nd(r){return`${Un(Ea(r))}|lt:${r.limitType}`}function Nc(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Ou(s)).join(", ")}]`),su(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ko(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ko(s)).join(",")),`Target(${t})`}(Ea(r))}; limitType=${r.limitType})`}function Oc(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Cn.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of va(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,d,g){const A=ja(a,d,g);return a.inclusive?A<=0:A<0}(t.startAt,va(t),s)||t.endAt&&!function(a,d,g){const A=ja(a,d,g);return a.inclusive?A>=0:A>0}(t.endAt,va(t),s)));var t,s}function $d(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Zh(r){return(e,t)=>{let s=!1;for(const a of va(r)){const d=zl(a,e,t);if(0!==d)return d;s=s||a.field.isKeyField()}return 0}}function zl(r,e,t){const s=r.field.isKeyField()?Cn.comparator(e.key,t.key):function(a,d,g){const A=d.data.field(a),H=g.data.field(a);return null!==A&&null!==H?lo(A,H):ln()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ln()}}class Sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,d]of s)if(this.equalsFn(a,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return void(a[d]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){qn(this.inner,(t,s)=>{for(const[a,d]of s)e(a,d)})}isEmpty(){return mr(this.inner)}size(){return this.innerSize}}const up=new rr(Cn.comparator);function du(){return up}const Yh=new rr(Cn.comparator);function rd(...r){let e=Yh;for(const t of r)e=e.insert(t.key,t);return e}function Qu(r){let e=Yh;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Qa(){return id()}function Gd(){return id()}function id(){return new Sl(r=>r.toString(),(r,e)=>r.isEqual(e))}const hm=new rr(Cn.comparator),lp=new wr(Cn.comparator);function vi(...r){let e=lp;for(const t of r)e=e.add(t);return e}const Qh=new wr(Hr);function sd(){return Qh}function Jh(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xo(e)?"-0":e}}function Xh(r){return{integerValue:""+r}}function ef(r,e){return rl(e)?Xh(e):Jh(r,e)}class od{constructor(){this._=void 0}}function fm(r,e,t){return r instanceof cc?function(s,a){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&oa(a)&&(a=ps(a)),a&&(d.fields.__previous_value__=a),{mapValue:d}}(t,e):r instanceof Ma?dc(r,e):r instanceof Wl?nf(r,e):function(s,a){const d=kc(s,a),g=cp(d)+cp(s.gt);return _e(d)&&_e(s.gt)?Xh(g):Jh(s.serializer,g)}(r,e)}function tf(r,e,t){return r instanceof Ma?dc(r,e):r instanceof Wl?nf(r,e):t}function kc(r,e){return r instanceof hc?_e(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class cc extends od{}class Ma extends od{constructor(e){super(),this.elements=e}}function dc(r,e){const t=dp(e);for(const s of r.elements)t.some(a=>ni(a,s))||t.push(s);return{arrayValue:{values:t}}}class Wl extends od{constructor(e){super(),this.elements=e}}function nf(r,e){let t=dp(e);for(const s of r.elements)t=t.filter(a=>!ni(a,s));return{arrayValue:{values:t}}}class hc extends od{constructor(e,t){super(),this.serializer=e,this.gt=t}}function cp(r){return yi(r.integerValue||r.doubleValue)}function dp(r){return He(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class zd{constructor(e,t){this.field=e,this.transform=t}}class Wd{constructor(e,t){this.version=e,this.transformResults=t}}class to{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new to}static exists(e){return new to(void 0,e)}static updateTime(e){return new to(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class af{}function f(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Mt(r.key,to.none()):new L(r.key,r.data,to.none());{const t=r.data,s=Ds.empty();let a=new wr(Yi.comparator);for(let d of e.fields)if(!a.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?s.delete(d):s.set(d,g),a=a.add(d)}return new Z(r.key,s,new hi(a.toArray()),to.none())}}function l(r,e,t){r instanceof L?function(s,a,d){const g=s.value.clone(),A=Ne(s.fieldTransforms,a,d.transformResults);g.setAll(A),a.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,t):r instanceof Z?function(s,a,d){if(!sf(s.precondition,a))return void a.convertToUnknownDocument(d.version);const g=Ne(s.fieldTransforms,a,d.transformResults),A=a.data;A.setAll(me(s)),A.setAll(g),a.convertToFoundDocument(d.version,A).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function c(r,e,t,s){return r instanceof L?function(a,d,g,A){if(!sf(a.precondition,d))return g;const H=a.value.clone(),Q=qe(a.fieldTransforms,A,d);return H.setAll(Q),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null}(r,e,t,s):r instanceof Z?function(a,d,g,A){if(!sf(a.precondition,d))return g;const H=qe(a.fieldTransforms,A,d),Q=d.data;return Q.setAll(me(a)),Q.setAll(H),d.convertToFoundDocument(d.version,Q).setHasLocalMutations(),null===g?null:g.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(de=>de.field))}(r,e,t,s):(g=t,sf(r.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function _(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),d=kc(s.transform,a||null);null!=d&&(null===t&&(t=Ds.empty()),t.set(s.field,d))}return t||null}function S(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&wu(t,s,(a,d)=>function rf(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof Ma&&s instanceof Ma||t instanceof Wl&&s instanceof Wl?wu(t.elements,s.elements,ni):t instanceof hc&&s instanceof hc?ni(t.gt,s.gt):t instanceof cc&&s instanceof cc);var t,s}(a,d))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class L extends af{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Z extends af{constructor(e,t,s,a,d=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function me(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Ne(r,e,t){const s=new Map;pn(r.length===t.length);for(let a=0;a<t.length;a++){const d=r[a],g=d.transform,A=e.data.field(d.field);s.set(d.field,tf(g,A,t[a]))}return s}function qe(r,e,t){const s=new Map;for(const a of r){const d=a.transform,g=t.data.field(a.field);s.set(a.field,fm(d,g,e))}return s}class Mt extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gt extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jt{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const d=this.mutations[a];d.key.isEqual(e.key)&&l(d,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=c(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=c(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Gd();return this.mutations.forEach(a=>{const d=e.get(a.key),g=d.overlayedDocument;let A=this.applyToLocalView(g,d.mutatedFields);A=t.has(a.key)?null:A;const H=f(g,A);null!==H&&s.set(a.key,H),g.isValidDocument()||g.convertToNoDocument(nr.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vi())}isEqual(e){return this.batchId===e.batchId&&wu(this.mutations,e.mutations,(t,s)=>S(t,s))&&wu(this.baseMutations,e.baseMutations,(t,s)=>S(t,s))}}class Zn{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){pn(e.mutations.length===s.length);let a=hm;const d=e.mutations;for(let g=0;g<d.length;g++)a=a.insert(d[g].key,s[g].version);return new Zn(e,t,s,a)}}class Sr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wa{constructor(e,t){this.count=e,this.unchangedNames=t}}var no,Li;function ad(r){switch(r){default:return ln();case vt.CANCELLED:case vt.UNKNOWN:case vt.DEADLINE_EXCEEDED:case vt.RESOURCE_EXHAUSTED:case vt.INTERNAL:case vt.UNAVAILABLE:case vt.UNAUTHENTICATED:return!1;case vt.INVALID_ARGUMENT:case vt.NOT_FOUND:case vt.ALREADY_EXISTS:case vt.PERMISSION_DENIED:case vt.FAILED_PRECONDITION:case vt.ABORTED:case vt.OUT_OF_RANGE:case vt.UNIMPLEMENTED:case vt.DATA_LOSS:return!0}}function hp(r){if(void 0===r)return en("GRPC error has no .code"),vt.UNKNOWN;switch(r){case no.OK:return vt.OK;case no.CANCELLED:return vt.CANCELLED;case no.UNKNOWN:return vt.UNKNOWN;case no.DEADLINE_EXCEEDED:return vt.DEADLINE_EXCEEDED;case no.RESOURCE_EXHAUSTED:return vt.RESOURCE_EXHAUSTED;case no.INTERNAL:return vt.INTERNAL;case no.UNAVAILABLE:return vt.UNAVAILABLE;case no.UNAUTHENTICATED:return vt.UNAUTHENTICATED;case no.INVALID_ARGUMENT:return vt.INVALID_ARGUMENT;case no.NOT_FOUND:return vt.NOT_FOUND;case no.ALREADY_EXISTS:return vt.ALREADY_EXISTS;case no.PERMISSION_DENIED:return vt.PERMISSION_DENIED;case no.FAILED_PRECONDITION:return vt.FAILED_PRECONDITION;case no.ABORTED:return vt.ABORTED;case no.OUT_OF_RANGE:return vt.OUT_OF_RANGE;case no.UNIMPLEMENTED:return vt.UNIMPLEMENTED;case no.DATA_LOSS:return vt.DATA_LOSS;default:return ln()}}(Li=no||(no={}))[Li.OK=0]="OK",Li[Li.CANCELLED=1]="CANCELLED",Li[Li.UNKNOWN=2]="UNKNOWN",Li[Li.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Li[Li.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Li[Li.NOT_FOUND=5]="NOT_FOUND",Li[Li.ALREADY_EXISTS=6]="ALREADY_EXISTS",Li[Li.PERMISSION_DENIED=7]="PERMISSION_DENIED",Li[Li.UNAUTHENTICATED=16]="UNAUTHENTICATED",Li[Li.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Li[Li.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Li[Li.ABORTED=10]="ABORTED",Li[Li.OUT_OF_RANGE=11]="OUT_OF_RANGE",Li[Li.UNIMPLEMENTED=12]="UNIMPLEMENTED",Li[Li.INTERNAL=13]="INTERNAL",Li[Li.UNAVAILABLE=14]="UNAVAILABLE",Li[Li.DATA_LOSS=15]="DATA_LOSS";class pm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return fc}static getOrCreateInstance(){return null===fc&&(fc=new pm),fc}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let fc=null;function uf(){return new TextEncoder}const z_=new D([4294967295,4294967295],0);function gm(r){const e=uf().encode(r),t=new x;return t.update(e),new Uint8Array(t.digest())}function lf(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new D([t,s],0),new D([a,d],0)]}class fp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Kd(`Invalid padding: ${t}`);if(s<0)throw new Kd(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Kd(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Kd(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=D.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(D.fromNumber(s)));return 1===a.compare(z_)&&(a=new D([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=gm(e),[s,a]=lf(t);for(let d=0;d<this.hashCount;d++){const g=this.Et(s,a,d);if(!this.At(g))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),g=new fp(d,a,t);return s.forEach(A=>g.insert(A)),g}insert(e){if(0===this.It)return;const t=gm(e),[s,a]=lf(t);for(let d=0;d<this.hashCount;d++){const g=this.Et(s,a,d);this.Rt(g)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Kd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pc{constructor(e,t,s,a,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,qd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new pc(nr.min(),a,new rr(Hr),du(),vi())}}class qd{constructor(e,t,s,a,d){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new qd(s,t,vi(),vi(),vi())}}class cf{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class mm{constructor(e,t){this.targetId=e,this.Vt=t}}class ym{constructor(e,t,s=is.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class _m{constructor(){this.St=0,this.Dt=Em(),this.Ct=is.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=vi(),t=vi(),s=vi();return this.Dt.forEach((a,d)=>{switch(d){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:ln()}}),new qd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Em()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class W_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=du(),this.zt=vm(),this.Wt=new rr(Hr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:ln()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,d=this.se(s);if(d){const g=d.target;if(Or(g))if(0===a){const A=new Cn(g.path);this.Yt(s,A,Hi.newNoDocument(A,nr.min()))}else pn(1===a);else{const A=this.ie(s);if(A!==a){const H=this.re(e,A);0!==H&&(this.ee(s),this.Wt=this.Wt.insert(s,2===H?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=pm.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(Q,de,Ve){var St,$t,En,kn,Qn,oi;const cs={localCacheCount:de,existenceFilterCount:Ve.count},Ci=Ve.unchangedNames;return Ci&&(cs.bloomFilter={applied:0===Q,hashCount:null!==(St=null==Ci?void 0:Ci.hashCount)&&void 0!==St?St:0,bitmapLength:null!==(kn=null===(En=null===($t=null==Ci?void 0:Ci.bits)||void 0===$t?void 0:$t.bitmap)||void 0===En?void 0:En.length)&&void 0!==kn?kn:0,padding:null!==(oi=null===(Qn=null==Ci?void 0:Ci.bits)||void 0===Qn?void 0:Qn.padding)&&void 0!==oi?oi:0}),cs}(H,A,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:d="",padding:g=0},hashCount:A=0}=s;let H,Q;try{H=eo(d).toUint8Array()}catch(de){if(de instanceof Ps)return yr("Decoding the base64 bloom filter in existence filter failed ("+de.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw de}try{Q=new fp(H,g,A)}catch(de){return yr(de instanceof Kd?"BloomFilter error: ":"Applying bloom filter failed: ",de),1}return 0===Q.It?1:a!==t-this.oe(e.targetId,Q)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(d=>{const g=this.Gt.ue(),A=`projects/${g.projectId}/databases/${g.database}/documents/${d.path.canonicalString()}`;t.vt(A)||(this.Yt(e,d,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((d,g)=>{const A=this.se(g);if(A){if(d.current&&Or(A.target)){const H=new Cn(A.target.path);null!==this.jt.get(H)||this.ae(g,H)||this.Yt(g,H,Hi.newNoDocument(H,e))}d.Mt&&(t.set(g,d.Ot()),d.Ft())}});let s=vi();this.zt.forEach((d,g)=>{let A=!0;g.forEachWhile(H=>{const Q=this.se(H);return!Q||"TargetPurposeLimboResolution"===Q.purpose||(A=!1,!1)}),A&&(s=s.add(d))}),this.jt.forEach((d,g)=>g.setReadTime(e));const a=new pc(e,t,this.Wt,this.jt,s);return this.jt=du(),this.zt=vm(),this.Wt=new rr(Hr),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new _m,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new wr(Hr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new _m),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function vm(){return new rr(Cn.comparator)}function Em(){return new rr(Cn.comparator)}const K_={asc:"ASCENDING",desc:"DESCENDING"},q_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ud={and:"AND",or:"OR"};class Al{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wm(r,e){return r.useProto3Json||su(e)?e:{value:e}}function Zd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pp(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function aE(r,e){return Zd(r,e.toTimestamp())}function Ko(r){return pn(!!r),nr.fromTimestamp(function(e){const t=ji(e);return new fs(t.seconds,t.nanos)}(r))}function Cm(r,e){return(t=r,new xi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gp(r){const e=xi.fromString(r);return pn(pf(e)),e}function Yd(r,e){return Cm(r.databaseId,e.path)}function ul(r,e){const t=gp(e);if(t.get(1)!==r.databaseId.projectId)throw new Zt(vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Zt(vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Cn(Tm(t))}function mp(r,e){return Cm(r.databaseId,e)}function Im(r){const e=gp(r);return 4===e.length?xi.emptyPath():Tm(e)}function hu(r){return new xi(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Tm(r){return pn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function yp(r,e,t){return{name:Yd(r,e),fields:t.value.mapValue.fields}}function bm(r,e,t){const s=ul(r,e.name),a=Ko(e.updateTime),d=e.createTime?Ko(e.createTime):nr.min(),g=new Ds({mapValue:{fields:e.fields}}),A=Hi.newFoundDocument(s,a,d,g);return t&&A.setHasCommittedMutations(),t?A.setHasCommittedMutations():A}function Qd(r,e){let t;if(e instanceof L)t={update:yp(r,e.key,e.value)};else if(e instanceof Mt)t={delete:Yd(r,e.key)};else if(e instanceof Z)t={update:yp(r,e.key,e.data),updateMask:ql(e.fieldMask)};else{if(!(e instanceof Gt))return ln();t={verify:Yd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,d){const g=d.transform;if(g instanceof cc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ma)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Wl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof hc)return{fieldPath:d.field.canonicalString(),increment:g.gt};throw ln()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:aE(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:ln()),t;var a}function df(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?to.updateTime(Ko(a.updateTime)):void 0!==a.exists?to.exists(a.exists):to.none():to.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(d,g){let A=null;"setToServerValue"in g?(pn("REQUEST_TIME"===g.setToServerValue),A=new cc):"appendMissingElements"in g?A=new Ma(g.appendMissingElements.values||[]):"removeAllFromArray"in g?A=new Wl(g.removeAllFromArray.values||[]):"increment"in g?A=new hc(d,g.increment):ln();const H=Yi.fromServerFormat(g.fieldPath);return new zd(H,A)}(r,a)):[];var a;if(e.update){const a=ul(r,e.update.name),d=new Ds({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new hi((e.updateMask.fieldPaths||[]).map(Q=>Yi.fromServerFormat(Q)));return new Z(a,d,g,t,s)}return new L(a,d,t,s)}if(e.delete){const a=ul(r,e.delete);return new Mt(a,t)}if(e.verify){const a=ul(r,e.verify);return new Gt(a,t)}return ln()}function Dm(r,e){return{documents:[mp(r,e.path)]}}function _p(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=mp(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=mp(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(H){if(0!==H.length)return ff(Qi.create(H,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const d=function(H){if(0!==H.length)return H.map(Q=>{return{field:Kl((de=Q).field),direction:Am(de.dir)};var de})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=wm(r,e.limit);var A,H;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(A=e.startAt).inclusive,values:A.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function wi(r){let e=Im(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){pn(1===s);const de=t.from[0];de.allDescendants?a=de.collectionId:e=e.child(de.collectionId)}let d=[];t.where&&(d=function(de){const Ve=vp(de);return Ve instanceof Qi&&_a(Ve)?Ve.getFilters():[Ve]}(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(de=>{return new Hl(ld((Ve=de).field),function(St){switch(St){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ve.direction));var Ve}));let A=null;t.limit&&(A=function(de){let Ve;return Ve="object"==typeof de?de.value:de,su(Ve)?null:Ve}(t.limit));let H=null;var de;t.startAt&&(H=new Do((de=t.startAt).values||[],!!de.before));let Q=null;return t.endAt&&(Q=function(de){return new Do(de.values||[],!de.before)}(t.endAt)),Pc(e,a,g,d,A,"F",H,Q)}function vp(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ld(e.unaryFilter.field);return _i.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=ld(e.unaryFilter.field);return _i.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ld(e.unaryFilter.field);return _i.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ld(e.unaryFilter.field);return _i.create(d,"!=",{nullValue:"NULL_VALUE"});default:return ln()}}(r):void 0!==r.fieldFilter?_i.create(ld((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ln()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Qi.create(e.compositeFilter.filters.map(t=>vp(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ln()}}(e.compositeFilter.op))}(r):ln();var e}function Am(r){return K_[r]}function hf(r){return q_[r]}function ll(r){return ud[r]}function Kl(r){return{fieldPath:r.canonicalString()}}function ld(r){return Yi.fromServerFormat(r.fieldPath)}function ff(r){return r instanceof _i?function(e){if("=="===e.op){if(kt(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NAN"}};if(ut(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kt(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NOT_NAN"}};if(ut(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(e.field),op:hf(e.op),value:e.value}}}(r):r instanceof Qi?function(e){const t=e.getFilters().map(s=>ff(s));return 1===t.length?t[0]:{compositeFilter:{op:ll(e.op),filters:t}}}(r):ln()}function ql(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pf(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Rl{constructor(e,t,s,a,d=nr.min(),g=nr.min(),A=is.EMPTY_BYTE_STRING,H=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=A,this.expectedCount=H}withSequenceNumber(e){return new Rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gf{constructor(e){this.fe=e}}function Ep(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Yd(a=r.fe,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Zd(a,d.version.toTimestamp()),createTime:Zd(a,d.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Ml(e.version)};else{if(!e.isUnknownDocument())return ln();s.unknownDocument={path:t.path.toArray(),version:Ml(e.version)}}var a,d;return s}function wp(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ml(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xl(r){const e=new fs(r.seconds,r.nanoseconds);return nr.fromTimestamp(e)}function Zl(r,e){const t=(e.baseMutations||[]).map(d=>df(r.fe,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const s=e.mutations.map(d=>df(r.fe,d)),a=fs.fromMillis(e.localWriteTimeMs);return new Jt(e.batchId,a,t,s)}function Fc(r){const e=xl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?xl(r.lastLimboFreeSnapshotVersion):nr.min();let s;var a;return void 0!==r.query.documents?(pn(1===(a=r.query).documents.length),s=Ea(bl(Im(a.documents[0])))):s=Ea(wi(r.query)),new Rl(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,is.fromBase64String(r.resumeToken))}function mf(r,e){const t=Ml(e.snapshotVersion),s=Ml(e.lastLimboFreeSnapshotVersion);let a;a=Or(e.target)?Dm(r.fe,e.target):_p(r.fe,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Un(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Rm(r){const e=wi({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?lc(e,e.limit,"L"):e}function Cp(r,e){return new Sr(e.largestBatchId,df(r.fe,e.overlayMutation))}function Mm(r,e){const t=e.path.lastSegment();return[r,To(e.path.popLast()),t]}function xm(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Ml(s.readTime),documentKey:To(s.documentKey.path),largestBatchId:s.largestBatchId}}class J_{getBundleMetadata(e,t){return Ip(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:xl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Ip(e).put({bundleId:(s=t).id,createTime:Ml(Ko(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return X_(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Rm(a.bundledQuery),readTime:xl(a.readTime)};var a})}saveNamedQuery(e,t){return X_(e).put({name:(s=t).name,readTime:Ml(Ko(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Ip(r){return Nt(r,"bundles")}function X_(r){return Nt(r,"namedQueries")}class yf{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new yf(e,t.uid||"")}getOverlay(e,t){return _f(e).get(Mm(this.userId,t)).next(s=>s?Cp(this.serializer,s):null)}getOverlays(e,t){const s=Qa();return wt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((d,g)=>{const A=new Sr(t,g);a.push(this.we(e,A))}),wt.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(g=>a.add(To(g.getCollectionPath())));const d=[];return a.forEach(g=>{const A=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(_f(e).J("collectionPathOverlayIndex",A))}),wt.waitFor(d)}getOverlaysForCollection(e,t,s){const a=Qa(),d=To(t),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return _f(e).j("collectionPathOverlayIndex",g).next(A=>{for(const H of A){const Q=Cp(this.serializer,H);a.set(Q.getKey(),Q)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const d=Qa();let g;const A=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _f(e).X({index:"collectionGroupOverlayIndex",range:A},(H,Q,de)=>{const Ve=Cp(this.serializer,Q);d.size()<a||Ve.largestBatchId===g?(d.set(Ve.getKey(),Ve),g=Ve.largestBatchId):de.done()}).next(()=>d)}we(e,t){return _f(e).put(function(s,a,d){const[g,A,H]=Mm(a,d.mutation.key);return{userId:a,collectionPath:A,documentId:H,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Qd(s.fe,d.mutation)}}(this.serializer,this.userId,t))}}function _f(r){return Nt(r,"documentOverlays")}class gc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(yi(e.integerValue));else if("doubleValue"in e){const s=yi(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),Xo(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(eo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Yn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ln()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Cn.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Pm(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function Nm(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const d=Pm(255&t[a]);if(s+=d,8!==d)break}return s}(r);return Math.ceil(e/8)}gc.Ve=new gc;class Tp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Nm(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Nm(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,a,!1),new Uint8Array(d.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class lE{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class cE{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class vf{constructor(){this.je=new Tp,this.ze=new lE(this.je),this.We=new cE(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class cd{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new cd(this.indexId,this.documentKey,this.arrayValue,s)}}function Lc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=ev(r.arrayValue,e.arrayValue),0!==t?t:(t=ev(r.directionalValue,e.directionalValue),0!==t?t:Cn.comparator(r.documentKey,e.documentKey)))}function ev(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class dE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){pn(e.collectionGroup===this.collectionId);const t=ma(e);if(void 0!==t&&!this.en(t))return!1;const s=bs(e);let a=new Set,d=0,g=0;for(;d<s.length&&this.en(s[d]);++d)a=a.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const A=s[d];if(!this.nn(this.Ze,A)||!this.sn(this.Ye[g++],A))return!1}++d}for(;d<s.length;++d){const A=s[d];if(g>=this.Ye.length||!this.sn(this.Ye[g++],A))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function tv(r){var e,t;if(pn(r instanceof _i||r instanceof Qi),r instanceof _i){if(r instanceof te){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(d=>_i.create(r.field,"==",d)))||[];return Qi.create(a,"or")}return r}const s=r.filters.map(a=>tv(a));return Qi.create(s,r.op)}function hE(r){if(0===r.getFilters().length)return[];const e=bp(tv(r));return pn(Ef(e)),Om(e)||Pl(e)?[e]:e.getFilters()}function Om(r){return r instanceof _i}function Pl(r){return r instanceof Qi&&_a(r)}function Ef(r){return Om(r)||Pl(r)||function(e){if(e instanceof Qi&&xc(e)){for(const t of e.getFilters())if(!Om(t)&&!Pl(t))return!1;return!0}return!1}(r)}function bp(r){if(pn(r instanceof _i||r instanceof Qi),r instanceof _i)return r;if(1===r.filters.length)return bp(r.filters[0]);const e=r.filters.map(s=>bp(s));let t=Qi.create(e,r.op);return t=Jd(t),Ef(t)?t:(pn(t instanceof Qi),pn(uu(t)),pn(t.filters.length>1),t.filters.reduce((s,a)=>wf(s,a)))}function wf(r,e){let t;return pn(r instanceof _i||r instanceof Qi),pn(e instanceof _i||e instanceof Qi),t=r instanceof _i?e instanceof _i?Qi.create([r,e],"and"):Cf(r,e):e instanceof _i?Cf(e,r):function(s,a){if(pn(s.filters.length>0&&a.filters.length>0),uu(s)&&uu(a))return Aa(s,a.getFilters());const d=xc(s)?s:a,g=xc(s)?a:s,A=d.filters.map(H=>wf(H,g));return Qi.create(A,"or")}(r,e),Jd(t)}function Cf(r,e){if(uu(e))return Aa(e,r.getFilters());{const t=e.filters.map(s=>wf(r,s));return Qi.create(t,"or")}}function Jd(r){if(pn(r instanceof _i||r instanceof Qi),r instanceof _i)return r;const e=r.getFilters();if(1===e.length)return Jd(e[0]);if(Tl(r))return r;const t=e.map(a=>Jd(a)),s=[];return t.forEach(a=>{a instanceof _i?s.push(a):a instanceof Qi&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Qi.create(s,r.op)}class Dp{constructor(){this.rn=new Sp}addToCollectionParentIndex(e,t){return this.rn.add(t),wt.resolve()}getCollectionParents(e,t){return wt.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return wt.resolve()}deleteFieldIndex(e,t){return wt.resolve()}getDocumentsMatchingTarget(e,t){return wt.resolve(null)}getIndexType(e,t){return wt.resolve(0)}getFieldIndexes(e,t){return wt.resolve([])}getNextCollectionGroupToUpdate(e){return wt.resolve(null)}getMinOffset(e,t){return wt.resolve(Co.min())}getMinOffsetFromCollectionGroup(e,t){return wt.resolve(Co.min())}updateCollectionGroup(e,t,s){return wt.resolve()}updateIndexEntries(e,t){return wt.resolve()}}class Sp{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new wr(xi.comparator),d=!a.has(s);return this.index[t]=a.add(s),d}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new wr(xi.comparator)).toArray()}}const cl=new Uint8Array(0);class km{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Sp,this.un=new Sl(s=>Un(s),(s,a)=>Cr(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const d={collectionId:s,parent:To(a)};return Fm(e).put(d)}return wt.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Fa(t),""],!1,!0);return Fm(e).j(a).next(d=>{for(const g of d){if(g.collectionId!==t)break;s.push(ba(g.parent))}return s})}addFieldIndex(e,t){const s=If(e),a={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])};var g;delete a.indexId;const d=s.add(a);if(t.indexState){const g=dd(e);return d.next(A=>{g.put(xm(A,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const s=If(e),a=dd(e),d=Vc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Vc(e);let a=!0;const d=new Map;return wt.forEach(this.cn(t),g=>this.an(e,g).next(A=>{a&&(a=!!A),d.set(g,A)})).next(()=>{if(a){let g=vi();const A=[];return wt.forEach(d,(H,Q)=>{var de;$e("IndexedDbIndexManager",`Using index ${de=H,`id=${de.indexId}|cg=${de.collectionGroup}|f=${de.fields.map(Ci=>`${Ci.fieldPath}:${Ci.kind}`).join(",")}`} to execute ${Un(t)}`);const Ve=function(Ci,Lo){const _o=ma(Lo);if(void 0===_o)return null;for(const zs of ki(Ci,_o.fieldPath))switch(zs.op){case"array-contains-any":return zs.value.arrayValue.values||[];case"array-contains":return[zs.value]}return null}(Q,H),St=function(Ci,Lo){const _o=new Map;for(const zs of bs(Lo))for(const pu of ki(Ci,zs.fieldPath))switch(pu.op){case"==":case"in":_o.set(zs.fieldPath.canonicalString(),pu.value);break;case"not-in":case"!=":return _o.set(zs.fieldPath.canonicalString(),pu.value),Array.from(_o.values())}return null}(Q,H),$t=function(Ci,Lo){const _o=[];let zs=!0;for(const pu of bs(Lo)){const Rc=0===pu.kind?aa(Ci,pu.fieldPath,Ci.startAt):al(Ci,pu.fieldPath,Ci.startAt);_o.push(Rc.value),zs&&(zs=Rc.inclusive)}return new Do(_o,zs)}(Q,H),En=function(Ci,Lo){const _o=[];let zs=!0;for(const pu of bs(Lo)){const Rc=0===pu.kind?al(Ci,pu.fieldPath,Ci.endAt):aa(Ci,pu.fieldPath,Ci.endAt);_o.push(Rc.value),zs&&(zs=Rc.inclusive)}return new Do(_o,zs)}(Q,H),kn=this.hn(H,Q,$t),Qn=this.hn(H,Q,En),oi=this.ln(H,Q,St),cs=this.fn(H.indexId,Ve,kn,$t.inclusive,Qn,En.inclusive,oi);return wt.forEach(cs,Ci=>s.H(Ci,t.limit).next(Lo=>{Lo.forEach(_o=>{const zs=Cn.fromSegments(_o.documentKey);g.has(zs)||(g=g.add(zs),A.push(zs))})}))}).next(()=>A)}return wt.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:hE(Qi.create(e.filters,"and")).map(s=>hn(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,d,g,A){const H=(null!=t?t.length:1)*Math.max(s.length,d.length),Q=H/(null!=t?t.length:1),de=[];for(let Ve=0;Ve<H;++Ve){const St=t?this.dn(t[Ve/Q]):cl,$t=this.wn(e,St,s[Ve%Q],a),En=this._n(e,St,d[Ve%Q],g),kn=A.map(Qn=>this.wn(e,St,Qn,!0));de.push(...this.createRange($t,En,kn))}return de}wn(e,t,s,a){const d=new cd(e,Cn.empty(),t,s);return a?d:d.Je()}_n(e,t,s,a){const d=new cd(e,Cn.empty(),t,s);return a?d.Je():d}an(e,t){const s=new dE(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(d=>{let g=null;for(const A of d)s.tn(A)&&(!g||A.fields.length>g.fields.length)&&(g=A);return g})}getIndexType(e,t){let s=2;const a=this.cn(t);return wt.forEach(a,d=>this.an(e,d).next(g=>{g?0!==s&&g.fields.length<function(A){let H=new wr(Yi.comparator),Q=!1;for(const de of A.filters)for(const Ve of de.getFlattenedFilters())Ve.field.isKeyField()||("array-contains"===Ve.op||"array-contains-any"===Ve.op?Q=!0:H=H.add(Ve.field));for(const de of A.orderBy)de.field.isKeyField()||(H=H.add(de.field));return H.size+(Q?1:0)}(d)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new vf;for(const a of bs(e)){const d=t.data.field(a.fieldPath);if(null==d)return null;const g=s.He(a.kind);gc.Ve._e(d,g)}return s.Qe()}dn(e){const t=new vf;return gc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new vf;return gc.Ve._e(J(this.databaseId,t),s.He(function(a){const d=bs(a);return 0===d.length?0:d[d.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new vf);let d=0;for(const g of bs(e)){const A=s[d++];for(const H of a)if(this.yn(t,g.fieldPath)&&He(A))a=this.pn(a,g,A);else{const Q=H.He(g.kind);gc.Ve._e(A,Q)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],d=[];for(const g of s.arrayValue.values||[])for(const A of a){const H=new vf;H.seed(A.Qe()),gc.Ve._e(g,H.He(t.kind)),d.push(H)}return d}yn(e,t){return!!e.filters.find(s=>s instanceof _i&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=If(e),a=dd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(d=>{const g=[];return wt.forEach(d,A=>a.get([A.indexId,this.uid]).next(H=>{g.push(function(Q,de){const Ve=de?new ya(de.sequenceNumber,new Co(xl(de.readTime),new Cn(ba(de.documentKey)),de.largestBatchId)):ya.empty(),St=Q.fields.map(([$t,En])=>new zu(Yi.fromServerFormat($t),En));return new Gu(Q.indexId,Q.collectionGroup,St,Ve)}(A,H))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const d=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==d?d:Hr(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=If(e),d=dd(e);return this.Tn(e).next(g=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(A=>wt.forEach(A,H=>d.put(xm(H.indexId,this.user,g,s)))))}updateIndexEntries(e,t){const s=new Map;return wt.forEach(t,(a,d)=>{const g=s.get(a.collectionGroup);return(g?wt.resolve(g):this.getFieldIndexes(e,a.collectionGroup)).next(A=>(s.set(a.collectionGroup,A),wt.forEach(A,H=>this.En(e,a,H).next(Q=>{const de=this.An(d,H);return Q.isEqual(de)?wt.resolve():this.vn(e,d,H,Q,de)}))))})}Rn(e,t,s,a){return Vc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Vc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Vc(e);let d=new wr(Lc);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(g,A)=>{d=d.add(new cd(s.indexId,t,A.arrayValue,A.directionalValue))}).next(()=>d)}An(e,t){let s=new wr(Lc);const a=this.mn(t,e);if(null==a)return s;const d=ma(t);if(null!=d){const g=e.data.field(d.fieldPath);if(He(g))for(const A of g.arrayValue.values||[])s=s.add(new cd(t.indexId,e.key,this.dn(A),a))}else s=s.add(new cd(t.indexId,e.key,cl,a));return s}vn(e,t,s,a,d){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(A,H,Q,de,Ve){const St=A.getIterator(),$t=H.getIterator();let En=us(St),kn=us($t);for(;En||kn;){let Qn=!1,oi=!1;if(En&&kn){const cs=Q(En,kn);cs<0?oi=!0:cs>0&&(Qn=!0)}else null!=En?oi=!0:Qn=!0;Qn?(de(kn),kn=us($t)):oi?(Ve(En),En=us(St)):(En=us(St),kn=us($t))}}(a,d,Lc,A=>{g.push(this.Rn(e,t,s,A))},A=>{g.push(this.Pn(e,t,s,A))}),wt.waitFor(g)}Tn(e){let t=1;return dd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,d)=>{d.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((g,A)=>Lc(g,A)).filter((g,A,H)=>!A||0!==Lc(g,H[A-1]));const a=[];a.push(e);for(const g of s){const A=Lc(g,e),H=Lc(g,t);if(0===A)a[0]=e.Je();else if(A>0&&H<0)a.push(g),a.push(g.Je());else if(H>0)break}a.push(t);const d=[];for(let g=0;g<a.length;g+=2){if(this.bn(a[g],a[g+1]))return[];d.push(IDBKeyRange.bound([a[g].indexId,this.uid,a[g].arrayValue,a[g].directionalValue,cl,[]],[a[g+1].indexId,this.uid,a[g+1].arrayValue,a[g+1].directionalValue,cl,[]]))}return d}bn(e,t){return Lc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Lm)}getMinOffset(e,t){return wt.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||ln())).next(Lm)}}function Fm(r){return Nt(r,"collectionParents")}function Vc(r){return Nt(r,"indexEntries")}function If(r){return Nt(r,"indexConfiguration")}function dd(r){return Nt(r,"indexState")}function Lm(r){pn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;Wu(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Co(e.readTime,e.documentKey,t)}const Vm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ua{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uc(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let A=0;const H=s.X({range:g},(de,Ve,St)=>(A++,St.delete()));d.push(H.next(()=>{pn(1===A)}));const Q=[];for(const de of t.mutations){const Ve=Ya(e,de.key.path,t.batchId);d.push(a.delete(Ve)),Q.push(de.key)}return wt.waitFor(d).next(()=>Q)}function hd(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ln();e=r.noDocument}return JSON.stringify(e).length}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class Yl{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){pn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Yl(d,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).X({index:"userMutationsIndex",range:s},(a,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const d=pd(e),g=Fu(e);return g.add({}).next(A=>{pn("number"==typeof A);const H=new Jt(A,t,s,a),Q=function(St,$t,En){const kn=En.baseMutations.map(oi=>Qd(St.fe,oi)),Qn=En.mutations.map(oi=>Qd(St.fe,oi));return{userId:$t,batchId:En.batchId,localWriteTimeMs:En.localWriteTime.toMillis(),baseMutations:kn,mutations:Qn}}(this.serializer,this.userId,H),de=[];let Ve=new wr((St,$t)=>Hr(St.canonicalString(),$t.canonicalString()));for(const St of a){const $t=Ya(this.userId,St.key.path,A);Ve=Ve.add(St.key.path.popLast()),de.push(g.put(Q)),de.push(d.put($t,Gs))}return Ve.forEach(St=>{de.push(this.indexManager.addToCollectionParentIndex(e,St))}),e.addOnCommittedListener(()=>{this.Vn[A]=H.keys()}),wt.waitFor(de).next(()=>H)})}lookupMutationBatch(e,t){return Fu(e).get(t).next(s=>s?(pn(s.userId===this.userId),Zl(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?wt.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return Fu(e).X({index:"userMutationsIndex",range:a},(g,A,H)=>{A.userId===this.userId&&(pn(A.batchId>=s),d=Zl(this.serializer,A)),H.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Fu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).j("userMutationsIndex",t).next(s=>s.map(a=>Zl(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ou(this.userId,t.path),a=IDBKeyRange.lowerBound(s),d=[];return pd(e).X({range:a},(g,A,H)=>{const[Q,de,Ve]=g,St=ba(de);if(Q===this.userId&&t.path.isEqual(St))return Fu(e).get(Ve).next($t=>{if(!$t)throw ln();pn($t.userId===this.userId),d.push(Zl(this.serializer,$t))});H.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new wr(Hr);const a=[];return t.forEach(d=>{const g=ou(this.userId,d.path),A=IDBKeyRange.lowerBound(g),H=pd(e).X({range:A},(Q,de,Ve)=>{const[St,$t,En]=Q,kn=ba($t);St===this.userId&&d.path.isEqual(kn)?s=s.add(En):Ve.done()});a.push(H)}),wt.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,d=ou(this.userId,s),g=IDBKeyRange.lowerBound(d);let A=new wr(Hr);return pd(e).X({range:g},(H,Q,de)=>{const[Ve,St,$t]=H,En=ba(St);Ve===this.userId&&s.isPrefixOf(En)?En.length===a&&(A=A.add($t)):de.done()}).next(()=>this.Dn(e,A))}Dn(e,t){const s=[],a=[];return t.forEach(d=>{a.push(Fu(e).get(d).next(g=>{if(null===g)throw ln();pn(g.userId===this.userId),s.push(Zl(this.serializer,g))}))}),wt.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Uc(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),wt.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return wt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return pd(e).X({range:s},(d,g,A)=>{if(d[0]===this.userId){const H=ba(d[1]);a.push(H)}else A.done()}).next(()=>{pn(0===a.length)})})}containsKey(e,t){return fd(e,this.userId,t)}xn(e){return Ap(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fd(r,e,t){const s=ou(e,t.path),a=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return pd(r).X({range:d,Y:!0},(A,H,Q)=>{const[de,Ve,St]=A;de===e&&Ve===a&&(g=!0),Q.done()}).next(()=>g)}function Fu(r){return Nt(r,"mutations")}function pd(r){return Nt(r,"documentMutations")}function Ap(r){return Nt(r,"mutationQueues")}class mc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new mc(0)}static Mn(){return new mc(-1)}}class Rp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new mc(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>nr.fromTimestamp(new fs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(pn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const d=[];return yc(e).X((g,A)=>{const H=Fc(A);H.sequenceNumber<=t&&null===s.get(H.targetId)&&(a++,d.push(this.removeTargetData(e,H)))}).next(()=>wt.waitFor(d)).next(()=>a)}forEachTarget(e,t){return yc(e).X((s,a)=>{const d=Fc(a);t(d)})}$n(e){return Mp(e).get("targetGlobalKey").next(t=>(pn(null!==t),t))}On(e,t){return Mp(e).put("targetGlobalKey",t)}Fn(e,t){return yc(e).put(mf(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Un(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return yc(e).X({range:a,index:"queryTargetsIndex"},(g,A,H)=>{const Q=Fc(A);Cr(t,Q.target)&&(d=Q,H.done())}).next(()=>d)}addMatchingKeys(e,t,s){const a=[],d=dl(e);return t.forEach(g=>{const A=To(g.path);a.push(d.put({targetId:s,path:A})),a.push(this.referenceDelegate.addReference(e,s,g))}),wt.waitFor(a)}removeMatchingKeys(e,t,s){const a=dl(e);return wt.forEach(t,d=>{const g=To(d.path);return wt.waitFor([a.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,t){const s=dl(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=dl(e);let d=vi();return a.X({range:s,Y:!0},(g,A,H)=>{const Q=ba(g[1]),de=new Cn(Q);d=d.add(de)}).next(()=>d)}containsKey(e,t){const s=To(t.path),a=IDBKeyRange.bound([s],[Fa(s)],!1,!0);let d=0;return dl(e).X({index:"documentTargetsIndex",Y:!0,range:a},([g,A],H,Q)=>{0!==g&&(d++,Q.done())}).next(()=>d>0)}le(e,t){return yc(e).get(t).next(s=>s?Fc(s):null)}}function yc(r){return Nt(r,"targets")}function Mp(r){return Nt(r,"targetGlobal")}function dl(r){return Nt(r,"targetDocuments")}function Um([r,e],[t,s]){const a=Hr(r,t);return 0===a?Hr(e,s):a}class Bm{constructor(e){this.Ln=e,this.buffer=new wr(Um),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Um(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nv{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){ia(s)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield xs(s)}yield t.Qn(3e5)}))}}class jm{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return wt.resolve(Xs.ct);const s=new Bm(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(Vm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,d,g,A,H,Q;const de=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ve=>(Ve>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ve}`),a=this.params.maximumSequenceNumbersToCollect):a=Ve,g=Date.now(),this.nthSequenceNumber(e,a))).next(Ve=>(s=Ve,A=Date.now(),this.removeTargets(e,s,t))).next(Ve=>(d=Ve,H=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ve=>(Q=Date.now(),Re()<=Et.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-de}ms\n\tDetermined least recently used ${a} in `+(A-g)+`ms\n\tRemoved ${d} targets in `+(H-A)+`ms\n\tRemoved ${Ve} documents in `+(Q-H)+`ms\nTotal Duration: ${Q-de}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:d,documentsRemoved:Ve})))}}class rv{constructor(e,t){this.db=e,this.garbageCollector=function xp(r,e){return new jm(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Xd(e,s)}removeReference(e,t,s){return Xd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Xd(e,t)}Xn(e,t){return function(s,a){let d=!1;return Ap(s).Z(g=>fd(s,g,a).next(A=>(A&&(d=!0),wt.resolve(!A)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let d=0;return this.Yn(e,(g,A)=>{if(A<=t){const H=this.Xn(e,g).next(Q=>{if(!Q)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,nr.min()),dl(e).delete([0,To(g.path)])))});a.push(H)}}).next(()=>wt.waitFor(a)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Xd(e,t)}Yn(e,t){const s=dl(e);let a,d=Xs.ct;return s.X({index:"documentTargetsIndex"},([g,A],{path:H,sequenceNumber:Q})=>{0===g?(d!==Xs.ct&&t(new Cn(ba(a)),d),d=Q,a=H):d=Xs.ct}).next(()=>{d!==Xs.ct&&t(new Cn(ba(a)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xd(r,e){return dl(r).put((s=r.currentSequenceNumber,{targetId:0,path:To(e.path),sequenceNumber:s}));var s}class Hm{constructor(){this.changes=new Sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?wt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return gd(e).put(s)}removeEntry(e,t,s){return gd(e).delete(function(a,d){const g=a.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],wp(d),g[g.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Hi.newInvalidDocument(t);return gd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Tf(t))},(a,d)=>{s=this.ts(t,d)}).next(()=>s)}es(e,t){let s={size:0,document:Hi.newInvalidDocument(t)};return gd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Tf(t))},(a,d)=>{s={document:this.ts(t,d),size:hd(d)}}).next(()=>s)}getEntries(e,t){let s=du();return this.ns(e,t,(a,d)=>{const g=this.ts(a,d);s=s.insert(a,g)}).next(()=>s)}ss(e,t){let s=du(),a=new rr(Cn.comparator);return this.ns(e,t,(d,g)=>{const A=this.ts(d,g);s=s.insert(d,A),a=a.insert(d,hd(g))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return wt.resolve();let a=new wr(ov);t.forEach(H=>a=a.add(H));const d=IDBKeyRange.bound(Tf(a.first()),Tf(a.last())),g=a.getIterator();let A=g.getNext();return gd(e).X({index:"documentKeyIndex",range:d},(H,Q,de)=>{const Ve=Cn.fromSegments([...Q.prefixPath,Q.collectionGroup,Q.documentId]);for(;A&&ov(A,Ve)<0;)s(A,null),A=g.getNext();A&&A.isEqual(Ve)&&(s(A,Q),A=g.hasNext()?g.getNext():null),A?de.G(Tf(A)):de.done()}).next(()=>{for(;A;)s(A,null),A=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const d=t.path,g=[d.popLast().toArray(),d.lastSegment(),wp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],A=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gd(e).j(IDBKeyRange.bound(g,A,!0)).next(H=>{let Q=du();for(const de of H){const Ve=this.ts(Cn.fromSegments(de.prefixPath.concat(de.collectionGroup,de.documentId)),de);Ve.isFoundDocument()&&(Oc(t,Ve)||a.has(Ve.key))&&(Q=Q.insert(Ve.key,Ve))}return Q})}getAllFromCollectionGroup(e,t,s,a){let d=du();const g=Pp(t,s),A=Pp(t,Co.max());return gd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,A,!0)},(H,Q,de)=>{const Ve=this.ts(Cn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);d=d.insert(Ve.key,Ve),d.size===a&&de.done()}).next(()=>d)}newChangeBuffer(e){return new sv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $m(e).get("remoteDocumentGlobalKey").next(t=>(pn(!!t),t))}Zn(e,t){return $m(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function uE(r,e){let t;if(e.document)t=bm(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Cn.fromSegments(e.noDocument.path),a=xl(e.noDocument.readTime);t=Hi.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ln();{const s=Cn.fromSegments(e.unknownDocument.path),a=xl(e.unknownDocument.version);t=Hi.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new fs(s[0],s[1]);return nr.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(nr.min()))return s}return Hi.newInvalidDocument(e)}}function Tu(r){return new iv(r)}class sv extends Hm{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Sl(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new wr((d,g)=>Hr(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const A=this.us.get(d);if(t.push(this.os.removeEntry(e,d,A.readTime)),g.isValidDocument()){const H=Ep(this.os.serializer,g);a=a.add(d.path.popLast()),s+=hd(H)-A.size,t.push(this.os.addEntry(e,d,H))}else if(s-=A.size,this.trackRemovals){const H=Ep(this.os.serializer,g.convertToNoDocument(nr.min()));t.push(this.os.addEntry(e,d,H))}}),a.forEach(d=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.os.updateMetadata(e,s)),wt.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((d,g)=>{this.us.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function $m(r){return Nt(r,"remoteDocumentGlobal")}function gd(r){return Nt(r,"remoteDocumentsV14")}function Tf(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pp(r,e){const t=e.documentKey.path.toArray();return[r,wp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ov(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let d=0;d<t.length-2&&d<s.length-2;++d)if(a=Hr(t[d],s[d]),a)return a;return a=Hr(t.length,s.length),a||(a=Hr(t[t.length-2],s[s.length-2]),a||Hr(t[t.length-1],s[s.length-1]))}class av{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bf{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&c(s.mutation,a,hi.empty(),fs.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,vi()).next(()=>s))}getLocalViewOfDocuments(e,t,s=vi()){const a=Qa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(d=>{let g=rd();return d.forEach((A,H)=>{g=g.insert(A,H.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const s=Qa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,vi()))}populateOverlays(e,t,s){const a=[];return s.forEach(d=>{t.has(d)||a.push(d)}),this.documentOverlayCache.getOverlays(e,a).next(d=>{d.forEach((g,A)=>{t.set(g,A)})})}computeViews(e,t,s,a){let d=du();const g=id(),A=id();return t.forEach((H,Q)=>{const de=s.get(Q.key);a.has(Q.key)&&(void 0===de||de.mutation instanceof Z)?d=d.insert(Q.key,Q):void 0!==de?(g.set(Q.key,de.mutation.getFieldMask()),c(de.mutation,Q,de.mutation.getFieldMask(),fs.now())):g.set(Q.key,hi.empty())}),this.recalculateAndSaveOverlays(e,d).next(H=>(H.forEach((Q,de)=>g.set(Q,de)),t.forEach((Q,de)=>{var Ve;return A.set(Q,new av(de,null!==(Ve=g.get(Q))&&void 0!==Ve?Ve:null))}),A))}recalculateAndSaveOverlays(e,t){const s=id();let a=new rr((g,A)=>g-A),d=vi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const A of g)A.keys().forEach(H=>{const Q=t.get(H);if(null===Q)return;let de=s.get(H)||hi.empty();de=A.applyToLocalView(Q,de),s.set(H,de);const Ve=(a.get(A.batchId)||vi()).add(H);a=a.insert(A.batchId,Ve)})}).next(()=>{const g=[],A=a.getReverseIterator();for(;A.hasNext();){const H=A.getNext(),Q=H.key,de=H.value,Ve=Gd();de.forEach(St=>{if(!d.has(St)){const $t=f(t.get(St),s.get(St));null!==$t&&Ve.set(St,$t),d=d.add(St)}}),g.push(this.documentOverlayCache.saveOverlays(e,Q,Ve))}return wt.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Cn.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):$l(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(d=>{const g=a-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-d.size):wt.resolve(Qa());let A=-1,H=d;return g.next(Q=>wt.forEach(Q,(de,Ve)=>(A<Ve.largestBatchId&&(A=Ve.largestBatchId),d.get(de)?wt.resolve():this.remoteDocumentCache.getEntry(e,de).next(St=>{H=H.insert(de,St)}))).next(()=>this.populateOverlays(e,Q,d)).next(()=>this.computeViews(e,H,Q,vi())).next(de=>({batchId:A,changes:Qu(de)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Cn(t)).next(s=>{let a=rd();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let d=rd();return this.indexManager.getCollectionParents(e,a).next(g=>wt.forEach(g,A=>{const H=(Q=t,de=A.child(a),new Ra(de,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,de;return this.getDocumentsMatchingCollectionQuery(e,H,s).next(Q=>{Q.forEach((de,Ve)=>{d=d.insert(de,Ve)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(a=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(d=>{a.forEach((A,H)=>{const Q=H.getKey();null===d.get(Q)&&(d=d.insert(Q,Hi.newInvalidDocument(Q)))});let g=rd();return d.forEach((A,H)=>{const Q=a.get(A);void 0!==Q&&c(Q.mutation,H,hi.empty(),fs.now()),Oc(t,H)&&(g=g.insert(A,H))}),g})}}class Gm{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return wt.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Ko(s.createTime)}),wt.resolve()}getNamedQuery(e,t){return wt.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:Rm(s.bundledQuery),readTime:Ko(s.readTime)}),wt.resolve();var s}}class uv{constructor(){this.overlays=new rr(Cn.comparator),this.ls=new Map}getOverlay(e,t){return wt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Qa();return wt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,d)=>{this.we(e,t,d)}),wt.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(d=>this.overlays=this.overlays.remove(d)),this.ls.delete(s)),wt.resolve()}getOverlaysForCollection(e,t,s){const a=Qa(),d=t.length+1,g=new Cn(t.child("")),A=this.overlays.getIteratorFrom(g);for(;A.hasNext();){const H=A.getNext().value,Q=H.getKey();if(!t.isPrefixOf(Q.path))break;Q.path.length===d&&H.largestBatchId>s&&a.set(H.getKey(),H)}return wt.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let d=new rr((Q,de)=>Q-de);const g=this.overlays.getIterator();for(;g.hasNext();){const Q=g.getNext().value;if(Q.getKey().getCollectionGroup()===t&&Q.largestBatchId>s){let de=d.get(Q.largestBatchId);null===de&&(de=Qa(),d=d.insert(Q.largestBatchId,de)),de.set(Q.getKey(),Q)}}const A=Qa(),H=d.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((Q,de)=>A.set(Q,de)),!(A.size()>=a)););return wt.resolve(A)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const g=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new Sr(t,s));let d=this.ls.get(t);void 0===d&&(d=vi(),this.ls.set(t,d)),this.ls.set(t,d.add(s.key))}}class Np{constructor(){this.fs=new wr(xa.ds),this.ws=new wr(xa._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new xa(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new xa(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Cn(new xi([])),s=new xa(t,e),a=new xa(t,e+1),d=[];return this.ws.forEachInRange([s,a],g=>{this.ys(g),d.push(g.key)}),d}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Cn(new xi([])),s=new xa(t,e),a=new xa(t,e+1);let d=vi();return this.ws.forEachInRange([s,a],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new xa(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class xa{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Cn.comparator(e.key,t.key)||Hr(e.As,t.As)}static _s(e,t){return Hr(e.As,t.As)||Cn.comparator(e.key,t.key)}}class zm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new wr(xa.ds)}checkEmpty(e){return wt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const d=this.vs;this.vs++;const g=new Jt(d,t,s,a);this.mutationQueue.push(g);for(const A of a)this.Rs=this.Rs.add(new xa(A.key,d)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return wt.resolve(g)}lookupMutationBatch(e,t){return wt.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),d=a<0?0:a;return wt.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xa(t,0),a=new xa(t,Number.POSITIVE_INFINITY),d=[];return this.Rs.forEachInRange([s,a],g=>{const A=this.Ps(g.As);d.push(A)}),wt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new wr(Hr);return t.forEach(a=>{const d=new xa(a,0),g=new xa(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([d,g],A=>{s=s.add(A.As)})}),wt.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let d=s;Cn.isDocumentKey(d)||(d=d.child(""));const g=new xa(new Cn(d),0);let A=new wr(Hr);return this.Rs.forEachWhile(H=>{const Q=H.key.path;return!!s.isPrefixOf(Q)&&(Q.length===a&&(A=A.add(H.As)),!0)},g),wt.resolve(this.Vs(A))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){pn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return wt.forEach(t.mutations,a=>{const d=new xa(a.key,t.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new xa(t,0),a=this.Rs.firstAfterOrEqual(s);return wt.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return wt.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lv{constructor(e){this.Ds=e,this.docs=new rr(Cn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),d=a?a.size:0,g=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return wt.resolve(s?s.document.mutableCopy():Hi.newInvalidDocument(t))}getEntries(e,t){let s=du();return t.forEach(a=>{const d=this.docs.get(a);s=s.insert(a,d?d.document.mutableCopy():Hi.newInvalidDocument(a))}),wt.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let d=du();const g=t.path,A=new Cn(g.child("")),H=this.docs.getIteratorFrom(A);for(;H.hasNext();){const{key:Q,value:{document:de}}=H.getNext();if(!g.isPrefixOf(Q.path))break;Q.path.length>g.length+1||Wu(vl(de),s)<=0||(a.has(de.key)||Oc(t,de))&&(d=d.insert(de.key,de.mutableCopy()))}return wt.resolve(d)}getAllFromCollectionGroup(e,t,s,a){ln()}Cs(e,t){return wt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Wm(this)}getSize(e){return wt.resolve(this.size)}}class Wm extends Hm{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),wt.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class cv{constructor(e){this.persistence=e,this.xs=new Sl(t=>Un(t),Cr),this.lastRemoteSnapshotVersion=nr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Np,this.targetCount=0,this.Ms=mc.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),wt.resolve()}getLastRemoteSnapshotVersion(e){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wt.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),wt.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new mc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,wt.resolve()}updateTargetData(e,t){return this.Fn(t),wt.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,wt.resolve()}removeTargets(e,t,s){let a=0;const d=[];return this.xs.forEach((g,A)=>{A.sequenceNumber<=t&&null===s.get(A.targetId)&&(this.xs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,A.targetId)),a++)}),wt.waitFor(d).next(()=>a)}getTargetCount(e){return wt.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return wt.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),wt.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,d=[];return a&&t.forEach(g=>{d.push(a.markPotentiallyOrphaned(e,g))}),wt.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),wt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return wt.resolve(s)}containsKey(e,t){return wt.resolve(this.ks.containsKey(t))}}class Op{constructor(e,t){this.$s={},this.overlays={},this.Os=new Xs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new cv(this),this.indexManager=new Dp,this.remoteDocumentCache=new lv(s=>this.referenceDelegate.Ls(s)),this.serializer=new gf(t),this.qs=new Gm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new zm(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){$e("MemoryPersistence","Starting transaction:",e);const a=new Km(this.Os.next());return this.referenceDelegate.Us(),s(a).next(d=>this.referenceDelegate.Ks(a).next(()=>d)).toPromise().then(d=>(a.raiseOnCommittedEvent(),d))}Gs(e,t){return wt.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class Km extends Ua{constructor(e){super(),this.currentSequenceNumber=e}}class eh{constructor(e){this.persistence=e,this.Qs=new Np,this.js=null}static zs(e){return new eh(e)}get Ws(){if(this.js)return this.js;throw ln()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),wt.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),wt.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),wt.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(d=>this.Ws.add(d.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.Ws,s=>{const a=Cn.fromPath(s);return this.Hs(e,a).next(d=>{d||t.removeEntry(a,nr.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return wt.or([()=>wt.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Nl{constructor(e){this.serializer=e}O(e,t,s,a){const d=new qa("createOrUpgrade",t);var A;s<1&&a>=1&&(e.createObjectStore("owner"),(A=e).createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ba,{unique:!0}),A.createObjectStore("documentMutations"),Sf(e),function(A){A.createObjectStore("remoteDocuments")}(e));let g=wt.resolve();return s<3&&a>=3&&(0!==s&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),Sf(e)),g=g.next(()=>function(A){const H=A.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nr.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",Q)}(d))),s<4&&a>=4&&(0!==s&&(g=g.next(()=>function(A,H){return H.store("mutations").j().next(Q=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ba,{unique:!0});const de=H.store("mutations"),Ve=Q.map(St=>de.put(St));return wt.waitFor(Ve)})}(e,d))),g=g.next(()=>{!function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(g=g.next(()=>this.Ys(d))),s<6&&a>=6&&(g=g.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(d)))),s<7&&a>=7&&(g=g.next(()=>this.Zs(d))),s<8&&a>=8&&(g=g.next(()=>this.ti(e,d))),s<9&&a>=9&&(g=g.next(()=>{!function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(g=g.next(()=>this.ei(d))),s<11&&a>=11&&(g=g.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(g=g.next(()=>{!function(A){const H=A.createObjectStore("documentOverlays",{keyPath:q});H.createIndex("collectionPathOverlayIndex",E,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",C,{unique:!1})}(e)})),s<13&&a>=13&&(g=g.next(()=>function(A){const H=A.createObjectStore("remoteDocumentsV14",{keyPath:Cl});H.createIndex("documentKeyIndex",Cu),H.createIndex("collectionGroupIndex",Ku)}(e)).next(()=>this.ni(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(g=g.next(()=>this.si(e,d))),s<15&&a>=15&&(g=g.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:Il}).createIndex("sequenceNumberIndex",Yu,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:sl}).createIndex("documentKeyIndex",au,{unique:!1})}(e))),g}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=hd(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>wt.forEach(a,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",g).next(A=>wt.forEach(A,H=>{pn(H.userId===d.userId);const Q=Zl(this.serializer,H);return Uc(e,d.userId,Q).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const d=[];return s.X((g,A)=>{const H=new xi(g),Q=[0,To(H)];d.push(t.get(Q).next(de=>de?wt.resolve():t.put({targetId:0,path:To(H),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>wt.waitFor(d))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:il});const s=t.store("collectionParents"),a=new Sp,d=g=>{if(a.add(g)){const A=g.lastSegment(),H=g.popLast();return s.put({collectionId:A,parent:To(H)})}};return t.store("remoteDocuments").X({Y:!0},(g,A)=>{const H=new xi(g);return d(H.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([g,A,H],Q)=>{const de=ba(A);return d(de.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const d=Fc(a),g=mf(this.serializer,d);return t.put(g)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((d,g)=>{const A=t.store("remoteDocumentsV14"),H=(Q=g,Q.document?new Cn(xi.fromString(Q.document.name).popFirst(5)):Q.noDocument?Cn.fromSegments(Q.noDocument.path):Q.unknownDocument?Cn.fromSegments(Q.unknownDocument.path):ln()).path.toArray();var Q;const de={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};a.push(A.put(de))}).next(()=>wt.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Tu(this.serializer),d=new Op(eh.zs,this.serializer.fe);return s.j().next(g=>{const A=new Map;return g.forEach(H=>{var Q;let de=null!==(Q=A.get(H.userId))&&void 0!==Q?Q:vi();Zl(this.serializer,H).keys().forEach(Ve=>de=de.add(Ve)),A.set(H.userId,de)}),wt.forEach(A,(H,Q)=>{const de=new U(Q),Ve=yf.de(this.serializer,de),St=d.getIndexManager(de),$t=Yl.de(de,this.serializer,St,d.referenceDelegate);return new bf(a,$t,Ve,St).recalculateAndSaveOverlaysForDocumentKeys(new st(t,Xs.ct),H).next()})})}}function Sf(r){r.createObjectStore("targetDocuments",{keyPath:Zu}).createIndex("documentTargetsIndex",Nu,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qu,{unique:!0}),r.createObjectStore("targetGlobal")}const kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fp{constructor(e,t,s,a,d,g,A,H,Q,de,Ve=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=d,this.window=g,this.document=A,this.ri=Q,this.oi=de,this.ui=Ve,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=St=>Promise.resolve(),!Fp.D())throw new Zt(vt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rv(this,a),this.di=t+"main",this.serializer=new gf(H),this.wi=new Io(this.di,this.ui,new Nl(this.serializer)),this.Bs=new Rp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Tu(this.serializer),this.qs=new J_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===de&&en("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zt(vt.FAILED_PRECONDITION,kp);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Xs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,we.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,we.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>th(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ia(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Af(e).get("owner").next(t=>wt.resolve(this.Ri(t)))}Pi(e){return th(e).delete(this.clientId)}bi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Nt(s,"clientMetadata");return a.j().next(d=>{const g=e.Si(d,18e5),A=d.filter(H=>-1===g.indexOf(H));return wt.forEach(A,H=>a.delete(H.clientId)).next(()=>A)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?wt.resolve(!0):Af(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Zt(vt.FAILED_PRECONDITION,kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||th(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const g=!this.inForeground&&a.inForeground,A=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||g&&A)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new st(t,Xs.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>th(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Yl.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new km(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return yf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){$e("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",d=15===(g=this.ui)?je:14===g?Be:13===g?ye:12===g?re:11===g?k:void ln();var g;let A;return this.wi.runTransaction(e,a,d,H=>(A=new st(H,this.Os?this.Os.next():Xs.ct),"readwrite-primary"===t?this.Ti(A).next(Q=>!!Q||this.Ei(A)).next(Q=>{if(!Q)throw en(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Zt(vt.FAILED_PRECONDITION,El);return s(A)}).next(Q=>this.vi(A).next(()=>Q)):this.Oi(A).next(()=>s(A)))).then(H=>(A.raiseOnCommittedEvent(),H))}Oi(e){return Af(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Zt(vt.FAILED_PRECONDITION,kp)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Af(e).put("owner",t)}static D(){return Io.D()}Ai(e){const t=Af(e);return t.get("owner").next(s=>this.Ri(s)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):wt.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(en(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,pt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return $e("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return en("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){en("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Af(r){return Nt(r,"owner")}function th(r){return Nt(r,"clientMetadata")}function Lp(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Vp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=vi(),a=vi();for(const d of t.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:a=a.add(d.doc.key)}return new Vp(e,t.fromCache,s,a)}}class qm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(d=>d||this.Gi(e,t,a,s)).next(d=>d||this.Qi(e,t))}Ki(e,t){if(ac(t))return wt.resolve(null);let s=Ea(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=lc(t,null,"F"),s=Ea(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=vi(...d);return this.Ui.getDocuments(e,g).next(A=>this.indexManager.getMinOffset(e,s).next(H=>{const Q=this.ji(t,A);return this.zi(t,Q,g,H.readTime)?this.Ki(e,lc(t,null,"F")):this.Wi(e,Q,t,H)}))})))}Gi(e,t,s,a){return ac(t)||a.isEqual(nr.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(d=>{const g=this.ji(t,d);return this.zi(t,g,s,a)?this.Qi(e,t):(Re()<=Et.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Nc(t)),this.Wi(e,g,t,xu(a,-1)))})}ji(e,t){let s=new wr(Zh(e));return t.forEach((a,d)=>{Oc(e,d)&&(s=s.add(d))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(a)>0)}Qi(e,t){return Re()<=Et.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Nc(t)),this.Ui.getDocumentsMatchingQuery(e,t,Co.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class Up{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new rr(Hr),this.Yi=new Sl(d=>Un(d),Cr),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bf(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Zm(r,e,t,s){return new Up(r,e,t,s)}function Ym(r,e){return md.apply(this,arguments)}function md(){return md=(0,we.Z)(function*(r,e){const t=yn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(d=>(a=d,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],A=[];let H=vi();for(const Q of a){g.push(Q.batchId);for(const de of Q.mutations)H=H.add(de.key)}for(const Q of d){A.push(Q.batchId);for(const de of Q.mutations)H=H.add(de.key)}return t.localDocuments.getDocuments(s,H).next(Q=>({er:Q,removedBatchIds:g,addedBatchIds:A}))})})}),md.apply(this,arguments)}function Bp(r,e){const t=yn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),d=t.Zi.newChangeBuffer({trackRemovals:!0});return function(g,A,H,Q){const de=H.batch,Ve=de.keys();let St=wt.resolve();return Ve.forEach($t=>{St=St.next(()=>Q.getEntry(A,$t)).next(En=>{const kn=H.docVersions.get($t);pn(null!==kn),En.version.compareTo(kn)<0&&(de.applyToRemoteDocument(En,H),En.isValidDocument()&&(En.setReadTime(H.commitVersion),Q.addEntry(En)))})}),St.next(()=>g.mutationQueue.removeMutationBatch(A,de))}(t,s,e,d).next(()=>d.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let A=vi();for(let H=0;H<g.mutationResults.length;++H)g.mutationResults[H].transformResults.length>0&&(A=A.add(g.batch.mutations[H].key));return A}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function Qm(r){const e=yn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function jp(r,e){const t=yn(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const A=[];e.targetChanges.forEach((de,Ve)=>{const St=a.get(Ve);if(!St)return;A.push(t.Bs.removeMatchingKeys(d,de.removedDocuments,Ve).next(()=>t.Bs.addMatchingKeys(d,de.addedDocuments,Ve)));let $t=St.withSequenceNumber(d.currentSequenceNumber);var En,kn,Qn;null!==e.targetMismatches.get(Ve)?$t=$t.withResumeToken(is.EMPTY_BYTE_STRING,nr.min()).withLastLimboFreeSnapshotVersion(nr.min()):de.resumeToken.approximateByteSize()>0&&($t=$t.withResumeToken(de.resumeToken,s)),a=a.insert(Ve,$t),kn=$t,Qn=de,(0===(En=St).resumeToken.approximateByteSize()||kn.snapshotVersion.toMicroseconds()-En.snapshotVersion.toMicroseconds()>=3e8||Qn.addedDocuments.size+Qn.modifiedDocuments.size+Qn.removedDocuments.size>0)&&A.push(t.Bs.updateTargetData(d,$t))});let H=du(),Q=vi();if(e.documentUpdates.forEach(de=>{e.resolvedLimboDocuments.has(de)&&A.push(t.persistence.referenceDelegate.updateLimboDocument(d,de))}),A.push(Rf(d,g,e.documentUpdates).next(de=>{H=de.nr,Q=de.sr})),!s.isEqual(nr.min())){const de=t.Bs.getLastRemoteSnapshotVersion(d).next(Ve=>t.Bs.setTargetsMetadata(d,d.currentSequenceNumber,s));A.push(de)}return wt.waitFor(A).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,H,Q)).next(()=>H)}).then(d=>(t.Ji=a,d))}function Rf(r,e,t){let s=vi(),a=vi();return t.forEach(d=>s=s.add(d)),e.getEntries(r,s).next(d=>{let g=du();return t.forEach((A,H)=>{const Q=d.get(A);H.isFoundDocument()!==Q.isFoundDocument()&&(a=a.add(A)),H.isNoDocument()&&H.version.isEqual(nr.min())?(e.removeEntry(A,H.readTime),g=g.insert(A,H)):!Q.isValidDocument()||H.version.compareTo(Q.version)>0||0===H.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(H),g=g.insert(A,H)):$e("LocalStore","Ignoring outdated watch update for ",A,". Current version:",Q.version," Watch version:",H.version)}),{nr:g,sr:a}})}function Jm(r,e){const t=yn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function nh(r,e){const t=yn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(d=>d?(a=d,wt.resolve(a)):t.Bs.allocateTargetId(s).next(g=>(a=new Rl(e,g,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function rh(r,e,t){return ih.apply(this,arguments)}function ih(){return ih=(0,we.Z)(function*(r,e,t){const s=yn(r),a=s.Ji.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,a)))}catch(g){if(!ia(g))throw g;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),ih.apply(this,arguments)}function Hp(r,e,t){const s=yn(r);let a=nr.min(),d=vi();return s.persistence.runTransaction("Execute query","readonly",g=>function(A,H,Q){const de=yn(A),Ve=de.Yi.get(Q);return void 0!==Ve?wt.resolve(de.Ji.get(Ve)):de.Bs.getTargetData(H,Q)}(s,g,Ea(e)).next(A=>{if(A)return a=A.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(g,A.targetId).next(H=>{d=H})}).next(()=>s.Hi.getDocumentsMatchingQuery(g,e,t?a:nr.min(),t?d:vi())).next(A=>(Gp(s,$d(e),A),{documents:A,ir:d})))}function Xm(r,e){const t=yn(r),s=yn(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",d=>s.le(d,e).next(g=>g?g.target:null))}function $p(r,e){const t=yn(r),s=t.Xi.get(e)||nr.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,xu(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Gp(t,e,a),a))}function Gp(r,e,t){let s=r.Xi.get(e)||nr.min();t.forEach((a,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),r.Xi.set(e,s)}function Mf(){return Mf=(0,we.Z)(function*(r,e,t,s){const a=yn(r);let d=vi(),g=du();for(const Q of t){const de=e.rr(Q.metadata.name);Q.document&&(d=d.add(de));const Ve=e.ur(Q);Ve.setReadTime(e.cr(Q.metadata.readTime)),g=g.insert(de,Ve)}const A=a.Zi.newChangeBuffer({trackRemovals:!0}),H=yield nh(a,(Q=s,Ea(bl(xi.fromString(`__bundle__/docs/${Q}`)))));var Q;return a.persistence.runTransaction("Apply bundle documents","readwrite",Q=>Rf(Q,A,g).next(de=>(A.apply(Q),de)).next(de=>a.Bs.removeMatchingKeysForTargetId(Q,H.targetId).next(()=>a.Bs.addMatchingKeys(Q,d,H.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(Q,de.nr,de.sr)).next(()=>de.nr)))}),Mf.apply(this,arguments)}function ty(r,e){return hl.apply(this,arguments)}function hl(){return hl=(0,we.Z)(function*(r,e,t=vi()){const s=yield nh(r,Ea(Rm(e.bundledQuery))),a=yn(r);return a.persistence.runTransaction("Save named query","readwrite",d=>{const g=Ko(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return a.qs.saveNamedQuery(d,e);const A=s.withResumeToken(is.EMPTY_BYTE_STRING,g);return a.Ji=a.Ji.insert(A.targetId,A),a.Bs.updateTargetData(d,A).next(()=>a.Bs.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>a.Bs.addMatchingKeys(d,t,s.targetId)).next(()=>a.qs.saveNamedQuery(d,e))})}),hl.apply(this,arguments)}function sh(r,e){return`firestore_clients_${r}_${e}`}function ny(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function zp(r,e){return`firestore_targets_${r}_${e}`}class Wp{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let d,g="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return g&&a.error&&(g="string"==typeof a.error.message&&"string"==typeof a.error.code,g&&(d=new Zt(a.error.code,a.error.message))),g?new Wp(e,t,a.state,d):(en("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(a=new Zt(s.error.code,s.error.message))),d?new Bc(e,s.state,a):(en("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,d=sd();for(let g=0;a&&g<s.activeTargetIds.length;++g)a=rl(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return a?new oh(e,d):(en("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ah{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ah(t.clientId,t.onlineState):(en("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jc{constructor(){this.activeTargetIds=sd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kp{constructor(e,t,s,a,d){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new rr(Hr),this.started=!1,this.yr=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.pr=sh(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new jc),this.Tr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(A){return`firestore_bundle_loaded_v2_${A}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const d=e.getItem(sh(e.persistenceKey,a));if(d){const g=oh.ar(a,d);g&&(e.gr=e.gr.insert(g.clientId,g))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(zp(this.persistenceKey,e));if(s){const a=Bc.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zp(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if($e("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void en("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(d){let g=Xs.ct;if(null!=d)try{const A=JSON.parse(d);pn("number"==typeof A),g=A}catch(A){en("SharedClientState","Failed to read sequence number from WebStorage",A)}return g}(s.newValue);a!==Xs.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(d=>t.syncEngine.Qr(d)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new Wp(this.currentUser,e,t,s),d=ny(this.persistenceKey,this.currentUser,e);this.setItem(d,a.hr())}Cr(e){const t=ny(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=zp(this.persistenceKey,e),d=new Bc(e,t,s);this.setItem(a,d.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return oh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Wp.ar(new U(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return Bc.ar(a,t)}br(e){return ah.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),d=this.Sr(s),g=[],A=[];return d.forEach(H=>{a.has(H)||g.push(H)}),a.forEach(H=>{d.has(H)||A.push(H)}),this.syncEngine.Wr(g,A).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=sd();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class xf{constructor(){this.Hr=new jc,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new jc,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ry{Yr(e){}shutdown(){}}class qp{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uh=null;function Zp(){return null===uh?uh=268435456+Math.round(2147483648*Math.random()):uh++,"0x"+uh.toString(16)}const Yp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ja="WebChannelConnection";class iy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,d){const g=Zp(),A=this.To(e,t);$e("RestConnection",`Sending RPC '${e}' ${g}:`,A,s);const H={};return this.Eo(H,a,d),this.Ao(e,A,H,s).then(Q=>($e("RestConnection",`Received RPC '${e}' ${g}: `,Q),Q),Q=>{throw yr("RestConnection",`RPC '${e}' ${g} failed with error: `,Q,"url: ",A,"request:",s),Q})}vo(e,t,s,a,d,g){return this.Io(e,t,s,a,d)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Y,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,d)=>e[d]=a),s&&s.headers.forEach((a,d)=>e[d]=a)}To(e,t){return`${this.mo}/v1/${t}:${Yp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const d=Zp();return new Promise((g,A)=>{const H=new Hu;H.setWithCredentials(!0),H.listenOnce(pa.COMPLETE,()=>{try{switch(H.getLastErrorCode()){case Eu.NO_ERROR:const de=H.getResponseJson();$e(Ja,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(de)),g(de);break;case Eu.TIMEOUT:$e(Ja,`RPC '${e}' ${d} timed out`),A(new Zt(vt.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:const Ve=H.getStatus();if($e(Ja,`RPC '${e}' ${d} failed with status:`,Ve,"response text:",H.getResponseText()),Ve>0){let St=H.getResponseJson();Array.isArray(St)&&(St=St[0]);const $t=null==St?void 0:St.error;if($t&&$t.status&&$t.message){const En=function(kn){const Qn=kn.toLowerCase().replace(/_/g,"-");return Object.values(vt).indexOf(Qn)>=0?Qn:vt.UNKNOWN}($t.status);A(new Zt(En,$t.message))}else A(new Zt(vt.UNKNOWN,"Server responded with status "+H.getStatus()))}else A(new Zt(vt.UNAVAILABLE,"Connection failed."));break;default:ln()}}finally{$e(Ja,`RPC '${e}' ${d} completed.`)}});const Q=JSON.stringify(a);$e(Ja,`RPC '${e}' ${d} sending request:`,a),H.send(t,"POST",Q,s,15)})}Ro(e,t,s){const a=Zp(),d=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=vu(),A=Au(),H={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Q=this.longPollingOptions.timeoutSeconds;void 0!==Q&&(H.longPollingTimeout=Math.round(1e3*Q)),this.useFetchStreams&&(H.xmlHttpFactory=new ju({})),this.Eo(H.initMessageHeaders,t,s),H.encodeInitMessageHeaders=!0;const de=d.join("");$e(Ja,`Creating RPC '${e}' stream ${a}: ${de}`,H);const Ve=g.createWebChannel(de,H);let St=!1,$t=!1;const En=new dv({ro:Qn=>{$t?$e(Ja,`Not sending because RPC '${e}' stream ${a} is closed:`,Qn):(St||($e(Ja,`Opening RPC '${e}' stream ${a} transport.`),Ve.open(),St=!0),$e(Ja,`RPC '${e}' stream ${a} sending:`,Qn),Ve.send(Qn))},oo:()=>Ve.close()}),kn=(Qn,oi,cs)=>{Qn.listen(oi,Ci=>{try{cs(Ci)}catch(Lo){setTimeout(()=>{throw Lo},0)}})};return kn(Ve,ka.EventType.OPEN,()=>{$t||$e(Ja,`RPC '${e}' stream ${a} transport opened.`)}),kn(Ve,ka.EventType.CLOSE,()=>{$t||($t=!0,$e(Ja,`RPC '${e}' stream ${a} transport closed`),En.wo())}),kn(Ve,ka.EventType.ERROR,Qn=>{$t||($t=!0,yr(Ja,`RPC '${e}' stream ${a} transport errored:`,Qn),En.wo(new Zt(vt.UNAVAILABLE,"The operation could not be completed")))}),kn(Ve,ka.EventType.MESSAGE,Qn=>{var oi;if(!$t){const cs=Qn.data[0];pn(!!cs);const Ci=cs,Lo=Ci.error||(null===(oi=Ci[0])||void 0===oi?void 0:oi.error);if(Lo){$e(Ja,`RPC '${e}' stream ${a} received error:`,Lo);const _o=Lo.status;let zs=function(Rc){const op=no[Rc];if(void 0!==op)return hp(op)}(_o),pu=Lo.message;void 0===zs&&(zs=vt.INTERNAL,pu="Unknown error status: "+_o+" with message "+Lo.message),$t=!0,En.wo(new Zt(zs,pu)),Ve.close()}else $e(Ja,`RPC '${e}' stream ${a} received:`,cs),En._o(cs)}}),kn(A,Bu.STAT_EVENT,Qn=>{Qn.stat===nu.PROXY?$e(Ja,`RPC '${e}' stream ${a} detected buffering proxy`):Qn.stat===nu.NOPROXY&&$e(Ja,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{En.fo()},0),En}}function Hc(){return"undefined"!=typeof window?window:null}function lh(){return"undefined"!=typeof document?document:null}function ch(r){return new Al(r,!0)}class Qp{constructor(e,t,s=1e3,a=1.5,d=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=d,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&$e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class $c{constructor(e,t,s,a,d,g,A,H){this.ii=e,this.$o=s,this.Oo=a,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=A,this.listener=H,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Qp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,we.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,we.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,we.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===vt.RESOURCE_EXHAUSTED?(en(t.toString()),en("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===vt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Zt(vt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,we.Z)(function*(){e.state=0,e.start()}))}tu(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hv extends $c{constructor(e,t,s,a,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,g),this.serializer=d}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Y_(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:ln(),a=e.targetChange.targetIds||[],d=function(H,Q){return H.useProto3Json?(pn(void 0===Q||"string"==typeof Q),is.fromBase64String(Q||"")):(pn(void 0===Q||Q instanceof Uint8Array),is.fromUint8Array(Q||new Uint8Array))}(r,e.targetChange.resumeToken),g=e.targetChange.cause,A=g&&function(H){const Q=void 0===H.code?vt.UNKNOWN:hp(H.code);return new Zt(Q,H.message||"")}(g);t=new ym(s,a,d,A||null)}else if("documentChange"in e){const s=e.documentChange,a=ul(r,s.document.name),d=Ko(s.document.updateTime),g=s.document.createTime?Ko(s.document.createTime):nr.min(),A=new Ds({mapValue:{fields:s.document.fields}}),H=Hi.newFoundDocument(a,d,g,A);t=new cf(s.targetIds||[],s.removedTargetIds||[],H.key,H)}else if("documentDelete"in e){const s=e.documentDelete,a=ul(r,s.document),d=s.readTime?Ko(s.readTime):nr.min(),g=Hi.newNoDocument(a,d);t=new cf([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,a=ul(r,s.document);t=new cf([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return ln();{const s=e.filter,{count:a=0,unchangedNames:d}=s,g=new wa(a,d);t=new mm(s.targetId,g)}}var H;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return nr.min();const d=a.targetChange;return d.targetIds&&d.targetIds.length?nr.min():d.readTime?Ko(d.readTime):nr.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=hu(this.serializer),t.addTarget=function(a,d){let g;const A=d.target;if(g=Or(A)?{documents:Dm(a,A)}:{query:_p(a,A)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=pp(a,d.resumeToken);const H=wm(a,d.expectedCount);null!==H&&(g.expectedCount=H)}else if(d.snapshotVersion.compareTo(nr.min())>0){g.readTime=Zd(a,d.snapshotVersion.toTimestamp());const H=wm(a,d.expectedCount);null!==H&&(g.expectedCount=H)}return g}(this.serializer,e);const s=function Sm(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ln()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=hu(this.serializer),t.removeTarget=e,this.Wo(t)}}class fv extends $c{constructor(e,t,s,a,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,g),this.serializer=d,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Q_(r,e){return r&&r.length>0?(pn(void 0!==e),r.map(t=>function(s,a){let d=Ko(s.updateTime?s.updateTime:a);return d.isEqual(nr.min())&&(d=Ko(a)),new Wd(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ko(e.commitTime);return this.listener.cu(s,t)}return pn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=hu(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Qd(this.serializer,s))};this.Wo(t)}}class pv extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Zt(vt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,d])=>this.connection.Io(e,t,s,a,d)).catch(a=>{throw"FirebaseError"===a.name?(a.code===vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Zt(vt.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.vo(e,t,s,d,g,a)).catch(d=>{throw"FirebaseError"===d.name?(d.code===vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Zt(vt.UNKNOWN,d.toString())})}terminate(){this.lu=!0}}class Jp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(en(t),this.mu=!1):$e("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class sy{constructor(e,t,s,a,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=d,this.Pu.Yr(A=>{s.enqueueAndForget((0,we.Z)(function*(){var H;_c(g)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,we.Z)(function*(Q){const de=yn(Q);de.vu.add(4),yield Gc(de),de.bu.set("Unknown"),de.vu.delete(4),yield yd(de)}),function(Q){return H.apply(this,arguments)})(g))}))}),this.bu=new Jp(s,a)}}function yd(r){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,we.Z)(function*(r){if(_c(r))for(const e of r.Ru)yield e(!0)}),Pf.apply(this,arguments)}function Gc(r){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,we.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Xp.apply(this,arguments)}function Nf(r,e){const t=yn(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Of(t)?oy(t):vd(t).Ko()&&eg(t,e))}function dh(r,e){const t=yn(r),s=vd(t);t.Au.delete(e),s.Ko()&&tg(t,e),0===t.Au.size&&(s.Ko()?s.jo():_c(t)&&t.bu.set("Unknown"))}function eg(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vd(r).su(e)}function tg(r,e){r.Vu.qt(e),vd(r).iu(e)}function oy(r){r.Vu=new W_({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),vd(r).start(),r.bu.gu()}function Of(r){return _c(r)&&!vd(r).Uo()&&r.Au.size>0}function _c(r){return 0===yn(r).vu.size}function ay(r){r.Vu=void 0}function fE(r){return uy.apply(this,arguments)}function uy(){return uy=(0,we.Z)(function*(r){r.Au.forEach((e,t)=>{eg(r,e)})}),uy.apply(this,arguments)}function ng(r,e){return rg.apply(this,arguments)}function rg(){return rg=(0,we.Z)(function*(r,e){ay(r),Of(r)?(r.bu.Iu(e),oy(r)):r.bu.set("Unknown")}),rg.apply(this,arguments)}function ly(r,e,t){return kf.apply(this,arguments)}function kf(){return kf=(0,we.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof ym&&2===e.state&&e.cause)try{yield(s=(0,we.Z)(function*(a,d){const g=d.cause;for(const A of d.targetIds)a.Au.has(A)&&(yield a.remoteSyncer.rejectListen(A,g),a.Au.delete(A),a.Vu.removeTarget(A))}),function(a,d){return s.apply(this,arguments)})(r,e)}catch(s){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield ig(r,s)}else if(e instanceof cf?r.Vu.Ht(e):e instanceof mm?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(nr.min()))try{const s=yield Qm(r.localStore);t.compareTo(s)>=0&&(yield function(a,d){const g=a.Vu.ce(d);return g.targetChanges.forEach((A,H)=>{if(A.resumeToken.approximateByteSize()>0){const Q=a.Au.get(H);Q&&a.Au.set(H,Q.withResumeToken(A.resumeToken,d))}}),g.targetMismatches.forEach((A,H)=>{const Q=a.Au.get(A);if(!Q)return;a.Au.set(A,Q.withResumeToken(is.EMPTY_BYTE_STRING,Q.snapshotVersion)),tg(a,A);const de=new Rl(Q.target,A,H,Q.sequenceNumber);eg(a,de)}),a.remoteSyncer.applyRemoteEvent(g)}(r,t))}catch(s){$e("RemoteStore","Failed to raise snapshot:",s),yield ig(r,s)}var s}),kf.apply(this,arguments)}function ig(r,e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,we.Z)(function*(r,e,t){if(!ia(e))throw e;r.vu.add(1),yield Gc(r),r.bu.set("Offline"),t||(t=()=>Qm(r.localStore)),r.asyncQueue.enqueueRetryable((0,we.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield yd(r)}))}),Lu.apply(this,arguments)}function mv(r,e){return e().catch(t=>ig(r,t,e))}function hh(r){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,we.Z)(function*(r){const e=yn(r),t=Xu(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;cy(e);)try{const a=yield Jm(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,dy(e,a)}catch(a){yield ig(e,a)}hy(e)&&yv(e)}),Ff.apply(this,arguments)}function cy(r){return _c(r)&&r.Eu.length<10}function dy(r,e){r.Eu.push(e);const t=Xu(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function hy(r){return _c(r)&&!Xu(r).Uo()&&r.Eu.length>0}function yv(r){Xu(r).start()}function fy(r){return fh.apply(this,arguments)}function fh(){return fh=(0,we.Z)(function*(r){Xu(r).hu()}),fh.apply(this,arguments)}function _v(r){return ph.apply(this,arguments)}function ph(){return ph=(0,we.Z)(function*(r){const e=Xu(r);for(const t of r.Eu)e.uu(t.mutations)}),ph.apply(this,arguments)}function vv(r,e,t){return sg.apply(this,arguments)}function sg(){return sg=(0,we.Z)(function*(r,e,t){const s=r.Eu.shift(),a=Zn.from(s,e,t);yield mv(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield hh(r)}),sg.apply(this,arguments)}function Ev(r,e){return og.apply(this,arguments)}function og(){return og=(0,we.Z)(function*(r,e){var t;e&&Xu(r).ou&&(yield(t=(0,we.Z)(function*(s,a){if(ad(d=a.code)&&d!==vt.ABORTED){const g=s.Eu.shift();Xu(s).Qo(),yield mv(s,()=>s.remoteSyncer.rejectFailedWrite(g.batchId,a)),yield hh(s)}var d}),function(s,a){return t.apply(this,arguments)})(r,e)),hy(r)&&yv(r)}),og.apply(this,arguments)}function py(r,e){return ag.apply(this,arguments)}function ag(){return ag=(0,we.Z)(function*(r,e){const t=yn(r);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const s=_c(t);t.vu.add(3),yield Gc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield yd(t)}),ag.apply(this,arguments)}function _d(r,e){return vc.apply(this,arguments)}function vc(){return vc=(0,we.Z)(function*(r,e){const t=yn(r);e?(t.vu.delete(2),yield yd(t)):e||(t.vu.add(2),yield Gc(t),t.bu.set("Unknown"))}),vc.apply(this,arguments)}function vd(r){return r.Su||(r.Su=function(e,t,s){const a=yn(e);return a.fu(),new hv(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fE.bind(null,r),ao:ng.bind(null,r),nu:ly.bind(null,r)}),r.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(r.Su.Qo(),Of(r)?oy(r):r.bu.set("Unknown")):(yield r.Su.stop(),ay(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function Xu(r){return r.Du||(r.Du=function(e,t,s){const a=yn(e);return a.fu(),new fv(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fy.bind(null,r),ao:Ev.bind(null,r),au:_v.bind(null,r),cu:vv.bind(null,r)}),r.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(r.Du.Qo(),yield hh(r)):(yield r.Du.stop(),r.Eu.length>0&&($e("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class ug{constructor(e,t,s,a,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=d,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,s,a,d){const g=Date.now()+s,A=new ug(e,t,g,a,d);return A.start(s),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zt(vt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ed(r,e){if(en("AsyncQueue",`${e}: ${r}`),ia(r))return new Zt(vt.UNAVAILABLE,`${e}: ${r}`);throw r}class Ec{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Cn.comparator(t.key,s.key):(t,s)=>Cn.comparator(t.key,s.key),this.keyedMap=rd(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Ec(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(!a.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Ec;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class fl{constructor(){this.Cu=new rr(Cn.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ln():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ol{constructor(e,t,s,a,d,g,A,H,Q){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=A,this.excludesMetadataChanges=H,this.hasCachedResults=Q}static fromInitialDocuments(e,t,s,a,d){const g=[];return t.forEach(A=>{g.push({type:0,doc:A})}),new Ol(e,t,Ec.emptySet(t),g,s,a,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Xa{constructor(){this.Nu=void 0,this.listeners=[]}}class zc{constructor(){this.queries=new Sl(e=>nd(e),Gl),this.onlineState="Unknown",this.ku=new Set}}function wd(r,e){return bu.apply(this,arguments)}function bu(){return bu=(0,we.Z)(function*(r,e){const t=yn(r),s=e.query;let a=!1,d=t.queries.get(s);if(d||(a=!0,d=new Xa),a)try{d.Nu=yield t.onListen(s)}catch(g){const A=Ed(g,`Initialization of query '${Nc(e.query)}' failed`);return void e.onError(A)}t.queries.set(s,d),d.listeners.push(e),e.Mu(t.onlineState),d.Nu&&e.$u(d.Nu)&&Cc(t)}),bu.apply(this,arguments)}function gh(r,e){return wc.apply(this,arguments)}function wc(){return wc=(0,we.Z)(function*(r,e){const t=yn(r),s=e.query;let a=!1;const d=t.queries.get(s);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),a=0===d.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),wc.apply(this,arguments)}function Cd(r,e){const t=yn(r);let s=!1;for(const a of e){const g=t.queries.get(a.query);if(g){for(const A of g.listeners)A.$u(a)&&(s=!0);g.Nu=a}}s&&Cc(t)}function Id(r,e,t){const s=yn(r),a=s.queries.get(e);if(a)for(const d of a.listeners)d.onError(t);s.queries.delete(e)}function Cc(r){r.ku.forEach(e=>{e.next()})}class Ic{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Td{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Wc{constructor(e){this.serializer=e}rr(e){return ul(this.serializer,e)}ur(e){return e.metadata.exists?bm(this.serializer,e.document,!1):Hi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ko(e)}}class bd{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kc(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=xi.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new Wc(this.serializer);for(const a of e)if(a.metadata.queries){const d=s.rr(a.metadata.name);for(const g of a.metadata.queries){const A=(t.get(g)||vi()).add(d);t.set(g,A)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function ey(r,e,t,s){return Mf.apply(this,arguments)}(e.localStore,new Wc(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield ty(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Kc(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class lg{constructor(e){this.key=e}}class cg{constructor(e){this.key=e}}class dg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=vi(),this.mutatedKeys=vi(),this.tc=Zh(e),this.ec=new Ec(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new fl,a=t?t.ec:this.ec;let d=t?t.mutatedKeys:this.mutatedKeys,g=a,A=!1;const H="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,Q="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((de,Ve)=>{const St=a.get(de),$t=Oc(this.query,Ve)?Ve:null,En=!!St&&this.mutatedKeys.has(St.key),kn=!!$t&&($t.hasLocalMutations||this.mutatedKeys.has($t.key)&&$t.hasCommittedMutations);let Qn=!1;St&&$t?St.data.isEqual($t.data)?En!==kn&&(s.track({type:3,doc:$t}),Qn=!0):this.rc(St,$t)||(s.track({type:2,doc:$t}),Qn=!0,(H&&this.tc($t,H)>0||Q&&this.tc($t,Q)<0)&&(A=!0)):!St&&$t?(s.track({type:0,doc:$t}),Qn=!0):St&&!$t&&(s.track({type:1,doc:St}),Qn=!0,(H||Q)&&(A=!0)),Qn&&($t?(g=g.add($t),d=kn?d.add(de):d.delete(de)):(g=g.delete(de),d=d.delete(de)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const de="F"===this.query.limitType?g.last():g.first();g=g.delete(de.key),d=d.delete(de.key),s.track({type:1,doc:de})}return{ec:g,ic:s,zi:A,mutatedKeys:d}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const d=e.ic.xu();d.sort((Q,de)=>function(Ve,St){const $t=En=>{switch(En){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ln()}};return $t(Ve)-$t(St)}(Q.type,de.type)||this.tc(Q.doc,de.doc)),this.oc(s);const g=t?this.uc():[],A=0===this.Zu.size&&this.current?1:0,H=A!==this.Xu;return this.Xu=A,0!==d.length||H?{snapshot:new Ol(this.query,e.ec,a,d,e.mutatedKeys,0===A,H,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:g}:{cc:g}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new fl,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=vi(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new cg(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new lg(s))}),t}hc(e){this.Yu=e.ir,this.Zu=vi();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ol.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class gy{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class my{constructor(e){this.key=e,this.fc=!1}}class yy{constructor(e,t,s,a,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.dc={},this.wc=new Sl(A=>nd(A),Gl),this._c=new Map,this.mc=new Set,this.gc=new rr(Cn.comparator),this.yc=new Map,this.Ic=new Np,this.Tc={},this.Ec=new Map,this.Ac=mc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function _y(r,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,we.Z)(function*(r,e){const t=Ig(r);let s,a;const d=t.wc.get(e);if(d)s=d.targetId,t.sharedClientState.addLocalQueryTarget(s),a=d.view.lc();else{const g=yield nh(t.localStore,Ea(e)),A=t.sharedClientState.addLocalQueryTarget(g.targetId);s=g.targetId,a=yield Vf(t,e,s,"current"===A,g.resumeToken),t.isPrimaryClient&&Nf(t.remoteStore,g)}return a}),Lf.apply(this,arguments)}function Vf(r,e,t,s,a){return hg.apply(this,arguments)}function hg(){return hg=(0,we.Z)(function*(r,e,t,s,a){r.Rc=(Ve,St,$t)=>{return(En=(0,we.Z)(function*(kn,Qn,oi,cs){let Ci=Qn.view.sc(oi);Ci.zi&&(Ci=yield Hp(kn.localStore,Qn.query,!1).then(({documents:zs})=>Qn.view.sc(zs,Ci)));const Lo=cs&&cs.targetChanges.get(Qn.targetId),_o=Qn.view.applyChanges(Ci,kn.isPrimaryClient,Lo);return Eg(kn,Qn.targetId,_o.cc),_o.snapshot}),function(kn,Qn,oi,cs){return En.apply(this,arguments)})(r,Ve,St,$t);var En};const d=yield Hp(r.localStore,e,!0),g=new dg(e,d.ir),A=g.sc(d.documents),H=qd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),Q=g.applyChanges(A,r.isPrimaryClient,H);Eg(r,t,Q.cc);const de=new gy(e,t,g);return r.wc.set(e,de),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),Q.snapshot}),hg.apply(this,arguments)}function vy(r,e){return fg.apply(this,arguments)}function fg(){return fg=(0,we.Z)(function*(r,e){const t=yn(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(d=>!Gl(d,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield rh(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),dh(t.remoteStore,s.targetId),yh(t,s.targetId)}).catch(xs))):(yh(t,s.targetId),yield rh(t.localStore,s.targetId,!0))}),fg.apply(this,arguments)}function Uf(){return Uf=(0,we.Z)(function*(r,e,t){const s=My(r);try{const a=yield function(d,g){const A=yn(d),H=fs.now(),Q=g.reduce((St,$t)=>St.add($t.key),vi());let de,Ve;return A.persistence.runTransaction("Locally write mutations","readwrite",St=>{let $t=du(),En=vi();return A.Zi.getEntries(St,Q).next(kn=>{$t=kn,$t.forEach((Qn,oi)=>{oi.isValidDocument()||(En=En.add(Qn))})}).next(()=>A.localDocuments.getOverlayedDocuments(St,$t)).next(kn=>{de=kn;const Qn=[];for(const oi of g){const cs=_(oi,de.get(oi.key).overlayedDocument);null!=cs&&Qn.push(new Z(oi.key,cs,Iu(cs.value.mapValue),to.exists(!0)))}return A.mutationQueue.addMutationBatch(St,H,Qn,g)}).next(kn=>{Ve=kn;const Qn=kn.applyToLocalDocumentSet(de,En);return A.documentOverlayCache.saveOverlays(St,kn.batchId,Qn)})}).then(()=>({batchId:Ve.batchId,changes:Qu(de)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,g,A){let H=d.Tc[d.currentUser.toKey()];H||(H=new rr(Hr)),H=H.insert(g,A),d.Tc[d.currentUser.toKey()]=H}(s,a.batchId,t),yield Ql(s,a.changes),yield hh(s.remoteStore)}catch(a){const d=Ed(a,"Failed to persist write");t.reject(d)}}),Uf.apply(this,arguments)}function wy(r,e){return pg.apply(this,arguments)}function pg(){return pg=(0,we.Z)(function*(r,e){const t=yn(r);try{const s=yield jp(t.localStore,e);e.targetChanges.forEach((a,d)=>{const g=t.yc.get(d);g&&(pn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?g.fc=!0:a.modifiedDocuments.size>0?pn(g.fc):a.removedDocuments.size>0&&(pn(g.fc),g.fc=!1))}),yield Ql(t,s,e)}catch(s){yield xs(s)}}),pg.apply(this,arguments)}function gg(r,e,t){const s=yn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((d,g)=>{const A=g.view.Mu(e);A.snapshot&&a.push(A.snapshot)}),function(d,g){const A=yn(d);A.onlineState=g;let H=!1;A.queries.forEach((Q,de)=>{for(const Ve of de.listeners)Ve.Mu(g)&&(H=!0)}),H&&Cc(A)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function wv(r,e,t){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,we.Z)(function*(r,e,t){const s=yn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),d=a&&a.key;if(d){let g=new rr(Cn.comparator);g=g.insert(d,Hi.newNoDocument(d,nr.min()));const A=vi().add(d),H=new pc(nr.min(),new Map,new rr(Hr),g,A);yield wy(s,H),s.gc=s.gc.remove(d),s.yc.delete(e),Ty(s)}else yield rh(s.localStore,e,!1).then(()=>yh(s,e,t)).catch(xs)}),Bf.apply(this,arguments)}function Cv(r,e){return mg.apply(this,arguments)}function mg(){return mg=(0,we.Z)(function*(r,e){const t=yn(r),s=e.batch.batchId;try{const a=yield Bp(t.localStore,e);Cy(t,s,null),vg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Ql(t,a)}catch(a){yield xs(a)}}),mg.apply(this,arguments)}function pE(r,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,we.Z)(function*(r,e,t){const s=yn(r);try{const a=yield function(d,g){const A=yn(d);return A.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let Q;return A.mutationQueue.lookupMutationBatch(H,g).next(de=>(pn(null!==de),Q=de.keys(),A.mutationQueue.removeMutationBatch(H,de))).next(()=>A.mutationQueue.performConsistencyCheck(H)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(H,Q,g)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,Q)).next(()=>A.localDocuments.getDocuments(H,Q))})}(s.localStore,e);Cy(s,e,t),vg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Ql(s,a)}catch(a){yield xs(a)}}),yg.apply(this,arguments)}function mh(){return mh=(0,we.Z)(function*(r,e){const t=yn(r);_c(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const g=yn(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",A=>g.mutationQueue.getHighestUnacknowledgedBatchId(A))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=Ed(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),mh.apply(this,arguments)}function vg(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function Cy(r,e,t){const s=yn(r);let a=s.Tc[s.currentUser.toKey()];if(a){const d=a.get(e);d&&(t?d.reject(t):d.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function yh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||Iv(r,s)})}function Iv(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(dh(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),Ty(r))}function Eg(r,e,t){for(const s of t)s instanceof lg?(r.Ic.addReference(s.key,e),Iy(r,s)):s instanceof cg?($e("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||Iv(r,s.key)):ln()}function Iy(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||($e("SyncEngine","New document in limbo: "+t),r.mc.add(s),Ty(r))}function Ty(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new Cn(xi.fromString(e)),s=r.Ac.next();r.yc.set(s,new my(t)),r.gc=r.gc.insert(t,s),Nf(r.remoteStore,new Rl(Ea(bl(t.path)),s,"TargetPurposeLimboResolution",Xs.ct))}}function Ql(r,e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,we.Z)(function*(r,e,t){const s=yn(r),a=[],d=[],g=[];var A;s.wc.isEmpty()||(s.wc.forEach((A,H)=>{g.push(s.Rc(H,e,t).then(Q=>{if((Q||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(H.targetId,(null==Q?void 0:Q.fromCache)?"not-current":"current"),Q){a.push(Q);const de=Vp.Li(H.targetId,Q);d.push(de)}}))}),yield Promise.all(g),s.dc.nu(a),yield(A=(0,we.Z)(function*(H,Q){const de=yn(H);try{yield de.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ve=>wt.forEach(Q,St=>wt.forEach(St.Fi,$t=>de.persistence.referenceDelegate.addReference(Ve,St.targetId,$t)).next(()=>wt.forEach(St.Bi,$t=>de.persistence.referenceDelegate.removeReference(Ve,St.targetId,$t)))))}catch(Ve){if(!ia(Ve))throw Ve;$e("LocalStore","Failed to update sequence numbers: "+Ve)}for(const Ve of Q){const St=Ve.targetId;if(!Ve.fromCache){const $t=de.Ji.get(St),kn=$t.withLastLimboFreeSnapshotVersion($t.snapshotVersion);de.Ji=de.Ji.insert(St,kn)}}}),function(H,Q){return A.apply(this,arguments)})(s.localStore,d))}),Tc.apply(this,arguments)}function Tv(r,e){return jf.apply(this,arguments)}function jf(){return jf=(0,we.Z)(function*(r,e){const t=yn(r);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const s=yield Ym(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(g=>{g.forEach(A=>{A.reject(new Zt(vt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ql(t,s.er)}var a}),jf.apply(this,arguments)}function bv(r,e){const t=yn(r),s=t.yc.get(e);if(s&&s.fc)return vi().add(s.key);{let a=vi();const d=t._c.get(e);if(!d)return a;for(const g of d){const A=t.wc.get(g);a=a.unionWith(A.view.nc)}return a}}function by(r,e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,we.Z)(function*(r,e){const t=yn(r),s=yield Hp(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&Eg(t,e.targetId,a.cc),a}),Dd.apply(this,arguments)}function Dv(r,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,we.Z)(function*(r,e){const t=yn(r);return $p(t.localStore,e).then(s=>Ql(t,s))}),Hf.apply(this,arguments)}function Sv(r,e,t,s){return wg.apply(this,arguments)}function wg(){return wg=(0,we.Z)(function*(r,e,t,s){const a=yn(r),d=yield function(g,A){const H=yn(g),Q=yn(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",de=>Q.Sn(de,A).next(Ve=>Ve?H.localDocuments.getDocuments(de,Ve):wt.resolve(null)))}(a.localStore,e);var A;null!==d?("pending"===t?yield hh(a.remoteStore):"acknowledged"===t||"rejected"===t?(Cy(a,e,s||null),vg(a,e),A=e,yn(yn(a.localStore).mutationQueue).Cn(A)):ln(),yield Ql(a,d)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),wg.apply(this,arguments)}function Cg(){return Cg=(0,we.Z)(function*(r,e){const t=yn(r);if(Ig(t),My(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Dy(t,s.toArray());t.vc=!0,yield _d(t.remoteStore,!0);for(const d of a)Nf(t.remoteStore,d)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?s.push(g):a=a.then(()=>(yh(t,g),rh(t.localStore,g,!0))),dh(t.remoteStore,g)}),yield a,yield Dy(t,s),function(d){const g=yn(d);g.yc.forEach((A,H)=>{dh(g.remoteStore,H)}),g.Ic.Ts(),g.yc=new Map,g.gc=new rr(Cn.comparator)}(t),t.vc=!1,yield _d(t.remoteStore,!1)}}),Cg.apply(this,arguments)}function Dy(r,e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,we.Z)(function*(r,e,t){const s=yn(r),a=[],d=[];for(const g of e){let A;const H=s._c.get(g);if(H&&0!==H.length){A=yield nh(s.localStore,Ea(H[0]));for(const Q of H){const de=s.wc.get(Q),Ve=yield by(s,de);Ve.snapshot&&d.push(Ve.snapshot)}}else{const Q=yield Xm(s.localStore,g);A=yield nh(s.localStore,Q),yield Vf(s,Sy(Q),g,!1,A.resumeToken)}a.push(A)}return s.dc.nu(d),a}),$f.apply(this,arguments)}function Sy(r){return Pc(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Ay(r){const e=yn(r);return yn(yn(e.localStore).persistence).$i()}function Ry(r,e,t,s){return _h.apply(this,arguments)}function _h(){return _h=(0,we.Z)(function*(r,e,t,s){const a=yn(r);if(a.vc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const d=a._c.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield $p(a.localStore,$d(d[0])),A=pc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,is.EMPTY_BYTE_STRING);yield Ql(a,g,A);break}case"rejected":yield rh(a.localStore,e,!0),yh(a,e,s);break;default:ln()}}),_h.apply(this,arguments)}function gE(r,e,t){return vh.apply(this,arguments)}function vh(){return vh=(0,we.Z)(function*(r,e,t){const s=Ig(r);if(s.vc){for(const a of e){if(s._c.has(a)){$e("SyncEngine","Adding an already active target "+a);continue}const d=yield Xm(s.localStore,a),g=yield nh(s.localStore,d);yield Vf(s,Sy(d),g.targetId,!1,g.resumeToken),Nf(s.remoteStore,g)}for(const a of t)s._c.has(a)&&(yield rh(s.localStore,a,!1).then(()=>{dh(s.remoteStore,a),yh(s,a)}).catch(xs))}}),vh.apply(this,arguments)}function Ig(r){const e=yn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=wy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wv.bind(null,e),e.dc.nu=Cd.bind(null,e.eventManager),e.dc.Pc=Id.bind(null,e.eventManager),e}function My(r){const e=yn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pE.bind(null,e),e}class Sd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.serializer=ch(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Zm(this.persistence,new qm,e.initialUser,this.serializer)}createPersistence(e){return new Op(eh.zs,this.serializer)}createSharedClientState(e){return new xf}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wh extends Sd{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,we.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield My(s.Vc.syncEngine),yield hh(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Zm(this.persistence,new qm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new nv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new Ia(t,this.persistence);return new Pu(e.asyncQueue,s)}createPersistence(e){const t=Lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new Fp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Hc(),lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new xf}}class xy extends wh{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,we.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Kp&&(s.sharedClientState.syncEngine={jr:Sv.bind(null,a),zr:Ry.bind(null,a),Wr:gE.bind(null,a),$i:Ay.bind(null,a),Qr:Dv.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var d=(0,we.Z)(function*(g){yield function Av(r,e){return Cg.apply(this,arguments)}(s.Vc.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Hc();if(!Kp.D(t))throw new Zt(vt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Jl{initialize(e,t){var s=this;return(0,we.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>gg(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Tv.bind(null,s.syncEngine),yield _d(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zc}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=new iy(e.databaseInfo);return new pv(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,d=A=>gg(this.syncEngine,A,0),g=qp.D()?new qp:new ry,new sy(t,s,a,d,g);var t,s,a,d,g}createSyncEngine(e,t){return function(s,a,d,g,A,H,Q){const de=new yy(s,a,d,g,A,H);return Q&&(de.vc=!0),de}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const s=yn(t);$e("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield Gc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ch(r,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ad{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mE{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Yr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const d=yield e.$c(a);return new Td(JSON.parse(d),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,we.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Rv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Zt(vt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,we.Z)(function*(d,g){const A=yn(d),H=hu(A.serializer)+"/documents",Q={documents:g.map($t=>Yd(A.serializer,$t))},de=yield A.vo("BatchGetDocuments",H,Q,g.length),Ve=new Map;de.forEach($t=>{const En=function Z_(r,e){return"found"in e?function(t,s){pn(!!s.found);const a=ul(t,s.found.name),d=Ko(s.found.updateTime),g=s.found.createTime?Ko(s.found.createTime):nr.min(),A=new Ds({mapValue:{fields:s.found.fields}});return Hi.newFoundDocument(a,d,g,A)}(r,e):"missing"in e?function(t,s){pn(!!s.missing),pn(!!s.readTime);const a=ul(t,s.missing),d=Ko(s.readTime);return Hi.newNoDocument(a,d)}(r,e):ln()}(A.serializer,$t);Ve.set(En.key.toString(),En)});const St=[];return g.forEach($t=>{const En=Ve.get($t.toString());pn(!!En),St.push(En)}),St}),function(d,g){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mt(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const d=Cn.fromPath(a);e.mutations.push(new Gt(d,e.precondition(d)))}),yield(s=(0,we.Z)(function*(a,d){const g=yn(a),A=hu(g.serializer)+"/documents",H={writes:d.map(Q=>Qd(g.serializer,Q))};yield g.Io("Commit",A,H)}),function(a,d){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ln();t=nr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Zt(vt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nr.min())?to.exists(!1):to.updateTime(t):to.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nr.min()))throw new Zt(vt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return to.updateTime(t)}return to.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gf{constructor(e,t,s,a,d){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=d,this.Bc=s.maxAttempts,this.qo=new Qp(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,we.Z)(function*(){const t=new Rv(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(d=>{e.Uc(d)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!su(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ad(t)}return!1}}class zf{constructor(e,t,s,a){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=U.UNAUTHENTICATED,this.clientId=Ka.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var g=(0,we.Z)(function*(A){$e("FirestoreClient","Received user=",A.uid),yield d.authCredentialListener(A),d.user=A});return function(A){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(s,g=>($e("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zt(vt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Ed(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Ih(r,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,we.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,we.Z)(function*(d){s.isEqual(d)||(yield Ym(e.localStore,d),s=d)});return function(d){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),Wf.apply(this,arguments)}function Th(r,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,we.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield bh(r);$e("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>py(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,d)=>py(e.remoteStore,d)),r._onlineComponents=e}),Kf.apply(this,arguments)}function bg(r){return"FirebaseError"===r.name?r.code===vt.FAILED_PRECONDITION||r.code===vt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function bh(r){return qf.apply(this,arguments)}function qf(){return qf=(0,we.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ih(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!bg(t))throw t;yr("Error using user provided cache. Falling back to memory cache: "+t),yield Ih(r,new Sd)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield Ih(r,new Sd);return r._offlineComponents}),qf.apply(this,arguments)}function Zf(r){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,we.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield Th(r,r._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield Th(r,new Jl))),r._onlineComponents}),Yf.apply(this,arguments)}function Dg(r){return bh(r).then(e=>e.persistence)}function Rd(r){return bh(r).then(e=>e.localStore)}function Sg(r){return Zf(r).then(e=>e.remoteStore)}function Ag(r){return Zf(r).then(e=>e.syncEngine)}function Md(r){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,we.Z)(function*(r){const e=yield Zf(r),t=e.eventManager;return t.onListen=_y.bind(null,e.syncEngine),t.onUnlisten=vy.bind(null,e.syncEngine),t}),Qf.apply(this,arguments)}function Mg(r,e,t={}){const s=new Yr;return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(a,d,g,A,H){const Q=new Ad({next:Ve=>{d.enqueueAndForget(()=>gh(a,de));const St=Ve.docs.has(g);!St&&Ve.fromCache?H.reject(new Zt(vt.UNAVAILABLE,"Failed to get document because the client is offline.")):St&&Ve.fromCache&&A&&"server"===A.source?H.reject(new Zt(vt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Ve)},error:Ve=>H.reject(Ve)}),de=new Ic(bl(g.path),Q,{includeMetadataChanges:!0,Ku:!0});return wd(a,de)}(yield Md(r),r.asyncQueue,e,t,s)})),s.promise}function xg(r,e,t={}){const s=new Yr;return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(a,d,g,A,H){const Q=new Ad({next:Ve=>{d.enqueueAndForget(()=>gh(a,de)),Ve.fromCache&&"server"===A.source?H.reject(new Zt(vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Ve)},error:Ve=>H.reject(Ve)}),de=new Ic(g,Q,{includeMetadataChanges:!0,Ku:!0});return wd(a,de)}(yield Md(r),r.asyncQueue,e,t,s)})),s.promise}function Uy(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const By=new Map;function Jf(r,e,t){if(!t)throw new Zt(vt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function jy(r,e,t,s){if(!0===e&&!0===s)throw new Zt(vt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function la(r){if(!Cn.isDocumentKey(r))throw new Zt(vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Pg(r){if(Cn.isDocumentKey(r))throw new Zt(vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Xf(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":ln()}function Ji(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Zt(vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xf(r);throw new Zt(vt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Ng(r,e){if(e<=0)throw new Zt(vt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Hy{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Zt(vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zt(vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Uy(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Zt(vt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Zt(vt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Zt(vt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zt(vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zt(vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ga;switch(t.type){case"firstParty":return new Wa(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Zt(vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=By.get(e);t&&($e("ComponentProvider","Removing Datastore"),By.delete(e),t.terminate())}(this),Promise.resolve()}}class Ns{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ns(this.firestore,e,this._key)}}class Ha{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ha(this.firestore,e,this._query)}}class kl extends Ha{constructor(e,t,s){super(e,t,bl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ns(this.firestore,null,new Cn(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function kg(r,e,...t){if(r=(0,pt.m9)(r),Jf("collection","path",e),r instanceof xd){const s=xi.fromString(e,...t);return Pg(s),new kl(r,null,s)}{if(!(r instanceof Ns||r instanceof kl))throw new Zt(vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(xi.fromString(e,...t));return Pg(s),new kl(r.firestore,null,s)}}function Dh(r,e,...t){if(r=(0,pt.m9)(r),1===arguments.length&&(e=Ka.A()),Jf("doc","path",e),r instanceof xd){const s=xi.fromString(e,...t);return la(s),new Ns(r,null,new Cn(s))}{if(!(r instanceof Ns||r instanceof kl))throw new Zt(vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(xi.fromString(e,...t));return la(s),new Ns(r.firestore,r instanceof kl?r.converter:null,new Cn(s))}}function xv(r,e){return r=(0,pt.m9)(r),e=(0,pt.m9)(e),(r instanceof Ns||r instanceof kl)&&(e instanceof Ns||e instanceof kl)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Sh(r,e){return r=(0,pt.m9)(r),e=(0,pt.m9)(e),r instanceof Ha&&e instanceof Ha&&r.firestore===e.firestore&&Gl(r._query,e._query)&&r.converter===e.converter}class Fg{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Qp(this,"async_queue_retry"),this.Xc=()=>{const t=lh();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=lh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=lh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Yr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,we.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ia(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,en("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=ug.createAndSchedule(this,e,t,s,d=>this.na(d));return this.zc.push(a),a}Zc(){this.Wc&&ln()}verifyOperationInProgress(){}sa(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function el(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class Pv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ls extends xd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Fg,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Lg(this),this._firestoreClient.terminate()}}function qo(r){return r._firestoreClient||Lg(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Lg(r){var e,t,s;const a=r._freezeSettings(),d=(A=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Sa(r._databaseId,A,r._persistenceKey,(Q=a).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,Uy(Q.experimentalLongPollingOptions),Q.useFetchStreams));var A,Q;r._firestoreClient=new zf(r._authCredentials,r._appCheckCredentials,r._queue,d),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Gy(r,e,t){const s=new Yr;return r.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Ih(r,t),yield Th(r,e),s.resolve()}catch(a){const d=a;if(!bg(d))throw d;yr("Error enabling indexeddb cache. Falling back to memory cache: "+d),s.reject(d)}})).then(()=>s.promise)}function Ug(r){if(r._initialized||r._terminated)throw new Zt(vt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(is.fromBase64String(e))}catch(t){throw new Zt(vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(is.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Zt(vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ul{constructor(e){this._methodName=e}}class Pd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zt(vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zt(vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Hr(this._lat,e._lat)||Hr(this._long,e._long)}}const Ky=/^__.*__$/;class qy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Z(e,this.data,this.fieldMask,t,this.fieldTransforms):new L(e,this.data,t,this.fieldTransforms)}}class Bg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Z(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jg(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ln()}}class Rh{constructor(e,t,s,a,d,g){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===d&&this.ua(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Rh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return np(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(jg(this.ca)&&Ky.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Zy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ch(e)}ya(e,t,s,a=!1){return new Rh({ca:e,methodName:t,ga:s,path:Yi.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dc(r){const e=r._freezeSettings(),t=ch(r._databaseId);return new Zy(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ep(r,e,t,s,a,d={}){const g=r.ya(d.merge||d.mergeFields?2:0,e,t,a);zg("Data must be an object, but it was:",g,s);const A=Jy(s,g);let H,Q;if(d.merge)H=new hi(g.fieldMask),Q=g.fieldTransforms;else if(d.mergeFields){const de=[];for(const Ve of d.mergeFields){const St=xh(e,Ve,t);if(!g.contains(St))throw new Zt(vt.INVALID_ARGUMENT,`Field '${St}' is specified in your field mask but missing from your input data.`);Wg(de,St)||de.push(St)}H=new hi(de),Q=g.fieldTransforms.filter(Ve=>H.covers(Ve.field))}else H=null,Q=g.fieldTransforms;return new qy(new Ds(A),H,Q)}class Mh extends Ul{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}function Yy(r,e,t){return new Rh({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Hg extends Ul{_toFieldTransform(e){return new zd(e.path,new cc)}isEqual(e){return e instanceof Hg}}class Bv extends Ul{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Yy(this,e,!0),s=this.pa.map(d=>qc(d,t)),a=new Ma(s);return new zd(e.path,a)}isEqual(e){return this===e}}class jv extends Ul{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Yy(this,e,!0),s=this.pa.map(d=>qc(d,t)),a=new Wl(s);return new zd(e.path,a)}isEqual(e){return this===e}}class Hv extends Ul{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new hc(e.serializer,ef(e.serializer,this.Ia));return new zd(e.path,t)}isEqual(e){return this===e}}function $g(r,e,t,s){const a=r.ya(1,e,t);zg("Data must be an object, but it was:",a,s);const d=[],g=Ds.empty();qn(s,(H,Q)=>{const de=tp(e,H,t);Q=(0,pt.m9)(Q);const Ve=a.da(de);if(Q instanceof Mh)d.push(de);else{const St=qc(Q,Ve);null!=St&&(d.push(de),g.set(de,St))}});const A=new hi(d);return new Bg(g,A,a.fieldTransforms)}function Gg(r,e,t,s,a,d){const g=r.ya(1,e,t),A=[xh(e,s,t)],H=[a];if(d.length%2!=0)throw new Zt(vt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let St=0;St<d.length;St+=2)A.push(xh(e,d[St])),H.push(d[St+1]);const Q=[],de=Ds.empty();for(let St=A.length-1;St>=0;--St)if(!Wg(Q,A[St])){const $t=A[St];let En=H[St];En=(0,pt.m9)(En);const kn=g.da($t);if(En instanceof Mh)Q.push($t);else{const Qn=qc(En,kn);null!=Qn&&(Q.push($t),de.set($t,Qn))}}const Ve=new hi(Q);return new Bg(de,Ve,g.fieldTransforms)}function Qy(r,e,t,s=!1){return qc(t,r.ya(s?4:3,e))}function qc(r,e){if(Xy(r=(0,pt.m9)(r)))return zg("Unsupported field value:",e,r),Jy(r,e);if(r instanceof Ul)return function(t,s){if(!jg(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let d=0;for(const g of t){let A=qc(g,s.wa(d));null==A&&(A={nullValue:"NULL_VALUE"}),a.push(A),d++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,pt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ef(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=fs.fromDate(t);return{timestampValue:Zd(s.serializer,a)}}if(t instanceof fs){const a=new fs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zd(s.serializer,a)}}if(t instanceof Pd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pl)return{bytesValue:pp(s.serializer,t._byteString)};if(t instanceof Ns){const a=s.databaseId,d=t.firestore._databaseId;if(!d.isEqual(a))throw s._a(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Cm(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Xf(t)}`)}(r,e)}function Jy(r,e){const t={};return mr(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qn(r,(s,a)=>{const d=qc(a,e.ha(s));null!=d&&(t[s]=d)}),{mapValue:{fields:t}}}function Xy(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof fs||r instanceof Pd||r instanceof pl||r instanceof Ns||r instanceof Ul)}function zg(r,e,t){if(!Xy(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Xf(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function xh(r,e,t){if((e=(0,pt.m9)(e))instanceof Vl)return e._internalPath;if("string"==typeof e)return tp(r,e);throw np("Field path arguments must be of type string or ",r,!1,void 0,t)}const $v=new RegExp("[~\\*/\\[\\]]");function tp(r,e,t){if(e.search($v)>=0)throw np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Vl(...e.split("."))._internalPath}catch(s){throw np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function np(r,e,t,s,a){const d=s&&!s.isEmpty(),g=void 0!==a;let A=`Function ${e}() called with invalid data`;t&&(A+=" (via `toFirestore()`)"),A+=". ";let H="";return(d||g)&&(H+=" (found",d&&(H+=` in field ${s}`),g&&(H+=` in document ${a}`),H+=")"),new Zt(vt.INVALID_ARGUMENT,A+r+H)}function Wg(r,e){return r.some(t=>t.isEqual(e))}class Nd{constructor(e,t,s,a,d){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Ns(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new e_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ph("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class e_ extends Nd{data(){return super.data()}}function Ph(r,e){return"string"==typeof e?tp(r,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}function Kg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Zt(vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class Od extends rp{}function Xl(r,e,...t){let s=[];e instanceof rp&&s.push(e),s=s.concat(t),function(a){const d=a.filter(A=>A instanceof Sc).length,g=a.filter(A=>A instanceof kd).length;if(d>1||d>0&&g>0)throw new Zt(vt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class kd extends Od{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new kd(e,t,s)}_apply(e){const t=this._parse(e);return kh(e._query,t),new Ha(e.firestore,e.converter,uc(e._query,t))}_parse(e){const t=Dc(e.firestore);return function(a,d,g,A,H,Q,de){let Ve;if(H.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new Zt(vt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){i_(de,Q);const St=[];for(const $t of de)St.push(Oh(A,a,$t));Ve={arrayValue:{values:St}}}else Ve=Oh(A,a,de)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||i_(de,Q),Ve=Qy(g,"where",de,"in"===Q||"not-in"===Q);return _i.create(H,Q,Ve)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Sc extends rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Qi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let d=s;const g=a.getFlattenedFilters();for(const A of g)kh(d,A),d=uc(d,A)}(e._query,t),new Ha(e.firestore,e.converter,uc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qg extends Od{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qg(e,t)}_apply(e){const t=function(s,a,d){if(null!==s.startAt)throw new Zt(vt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Zt(vt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new Hl(a,d);return function(A,H){if(null===Dl(A)){const Q=ku(A);null!==Q&&Fh(0,Q,H.field)}}(s,g),g}(e._query,this._field,this._direction);return new Ha(e.firestore,e.converter,function(s,a){const d=s.explicitOrderBy.concat([a]);return new Ra(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Zg extends Od{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Zg(e,t,s)}_apply(e){return new Ha(e.firestore,e.converter,lc(e._query,this._limit,this._limitType))}}class Nh extends Od{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Nh(e,t,s)}_apply(e){const t=r_(e,this.type,this._docOrFields,this._inclusive);return new Ha(e.firestore,e.converter,(a=t,new Ra((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Gr extends Od{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Gr(e,t,s)}_apply(e){const t=r_(e,this.type,this._docOrFields,this._inclusive);return new Ha(e.firestore,e.converter,(a=t,new Ra((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function r_(r,e,t,s){if(t[0]=(0,pt.m9)(t[0]),t[0]instanceof Nd)return function(a,d,g,A,H){if(!A)throw new Zt(vt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const Q=[];for(const de of va(a))if(de.field.isKeyField())Q.push(J(d,A.key));else{const Ve=A.data.field(de.field);if(oa(Ve))throw new Zt(vt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+de.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ve){const St=de.field.canonicalString();throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${St}' (used as the orderBy) does not exist.`)}Q.push(Ve)}return new Do(Q,H)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Dc(r.firestore);return function(d,g,A,H,Q,de){const Ve=d.explicitOrderBy;if(Q.length>Ve.length)throw new Zt(vt.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const St=[];for(let $t=0;$t<Q.length;$t++){const En=Q[$t];if(Ve[$t].field.isKeyField()){if("string"!=typeof En)throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof En}`);if(!$l(d)&&-1!==En.indexOf("/"))throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${En}' contains a slash.`);const kn=d.path.child(xi.fromString(En));if(!Cn.isDocumentKey(kn))throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${kn}' is not because it contains an odd number of segments.`);const Qn=new Cn(kn);St.push(J(g,Qn))}else{const kn=Qy(A,H,En);St.push(kn)}}return new Do(St,de)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Oh(r,e,t){if("string"==typeof(t=(0,pt.m9)(t))){if(""===t)throw new Zt(vt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$l(e)&&-1!==t.indexOf("/"))throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(xi.fromString(t));if(!Cn.isDocumentKey(s))throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return J(r,new Cn(s))}if(t instanceof Ns)return J(r,t._key);throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(t)}.`)}function i_(r,e){if(!Array.isArray(r)||0===r.length)throw new Zt(vt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kh(r,e){if(e.isInequality()){const s=ku(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const d=Dl(r);null!==d&&Fh(0,a,d)}const t=function(s,a){for(const d of s)for(const g of d.getFlattenedFilters())if(a.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Zt(vt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Fh(r,e,t){if(!t.isEqual(e))throw new Zt(vt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class s_{convertValue(e,t="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ln()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return qn(e,(a,d)=>{s[a]=this.convertValue(d,t)}),s}convertGeoPoint(e){return new Pd(yi(e.latitude),yi(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ps(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(yo(e));default:return null}}convertTimestamp(e){const t=ji(e);return new fs(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=xi.fromString(e);pn(pf(s));const a=new Oo(s.get(1),s.get(3)),d=new Cn(s.popFirst(5));return a.isEqual(t)||en(`Document ${d} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Lh(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Wv extends s_{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ns(this.firestore,null,t)}}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ec extends Nd{constructor(e,t,s,a,d,g){super(e,t,s,a,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ph("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Vh extends ec{data(e={}){return super.data(e)}}class tl{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Zc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Vh(this._firestore,this._userDataWriter,s.key,s,new Zc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zt(vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new Vh(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Zc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>a||3!==g.type).map(g=>{const A=new Vh(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Zc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let H=-1,Q=-1;return 0!==g.type&&(H=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),Q=d.indexOf(g.doc.key)),{type:Yv(g.type),doc:A,oldIndex:H,newIndex:Q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Yv(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ln()}}function a_(r,e){return r instanceof ec&&e instanceof ec?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof tl&&e instanceof tl&&r._firestore===e._firestore&&Sh(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class gl extends s_{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ns(this.firestore,null,t)}}function Vd(r,e,t){r=Ji(r,Ns);const s=Ji(r.firestore,ls),a=Lh(r.converter,e,t);return Yc(s,[ep(Dc(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,to.none())])}function d_(r,e,t,...s){r=Ji(r,Ns);const a=Ji(r.firestore,ls),d=Dc(a);let g;return g="string"==typeof(e=(0,pt.m9)(e))||e instanceof Vl?Gg(d,"updateDoc",r._key,e,t,s):$g(d,"updateDoc",r._key,e),Yc(a,[g.toMutation(r._key,to.exists(!0))])}function Qg(r,...e){var t,s,a;r=(0,pt.m9)(r);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||el(e[g])||(d=e[g],g++);const A={includeMetadataChanges:d.includeMetadataChanges};if(el(e[g])){const Ve=e[g];e[g]=null===(t=Ve.next)||void 0===t?void 0:t.bind(Ve),e[g+1]=null===(s=Ve.error)||void 0===s?void 0:s.bind(Ve),e[g+2]=null===(a=Ve.complete)||void 0===a?void 0:a.bind(Ve)}let H,Q,de;if(r instanceof Ns)Q=Ji(r.firestore,ls),de=bl(r._key.path),H={next:Ve=>{e[g]&&e[g](Jg(Q,r,Ve))},error:e[g+1],complete:e[g+2]};else{const Ve=Ji(r,Ha);Q=Ji(Ve.firestore,ls),de=Ve._query;const St=new gl(Q);H={next:$t=>{e[g]&&e[g](new tl(Q,St,Ve,$t))},error:e[g+1],complete:e[g+2]},Kg(r._query)}return function(Ve,St,$t,En){const kn=new Ad(En),Qn=new Ic(St,kn,$t);return Ve.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return wd(yield Md(Ve),Qn)})),()=>{kn.Dc(),Ve.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return gh(yield Md(Ve),Qn)}))}}(qo(Q),de,A,H)}function Yc(r,e){return function(t,s){const a=new Yr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Ey(r,e,t){return Uf.apply(this,arguments)}(yield Ag(t),s,a)})),a.promise}(qo(r),e)}function Jg(r,e,t){const s=t.docs.get(e._key),a=new gl(r);return new ec(r,a,e._key,s,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}const a0={maxAttempts:5};class p_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dc(e)}set(e,t,s){this._verifyNotCommitted();const a=Ac(e,this._firestore),d=Lh(a.converter,t,s),g=ep(this._dataReader,"WriteBatch.set",a._key,d,null!==a.converter,s);return this._mutations.push(g.toMutation(a._key,to.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const d=Ac(e,this._firestore);let g;return g="string"==typeof(t=(0,pt.m9)(t))||t instanceof Vl?Gg(this._dataReader,"WriteBatch.update",d._key,t,s,a):$g(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,to.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ac(e,this._firestore);return this._mutations=this._mutations.concat(new Mt(t._key,to.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zt(vt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ac(r,e){if((r=(0,pt.m9)(r)).firestore!==e)throw new Zt(vt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class u0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dc(e)}get(e){const t=Ac(e,this._firestore),s=new Wv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return ln();const d=a[0];if(d.isFoundDocument())return new Nd(this._firestore,s,d.key,d,t.converter);if(d.isNoDocument())return new Nd(this._firestore,s,t._key,null,t.converter);throw ln()})}set(e,t,s){const a=Ac(e,this._firestore),d=Lh(a.converter,t,s),g=ep(this._dataReader,"Transaction.set",a._key,d,null!==a.converter,s);return this._transaction.set(a._key,g),this}update(e,t,s,...a){const d=Ac(e,this._firestore);let g;return g="string"==typeof(t=(0,pt.m9)(t))||t instanceof Vl?Gg(this._dataReader,"Transaction.update",d._key,t,s,a):$g(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Ac(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ac(e,this._firestore),s=new gl(this._firestore);return super.get(e).then(a=>new ec(this._firestore,s,t._key,a._document,new Zc(!1,!1),t.converter))}}function jh(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Zt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function v_(){if("undefined"==typeof Uint8Array)throw new Zt("unimplemented","Uint8Arrays are not available in this environment.")}function em(){if(!function Da(){return"undefined"!=typeof atob}())throw new Zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){Y=Me.SDK_VERSION,(0,Me._registerComponent)(new it.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const d=t.getProvider("app").getImmediate(),g=new ls(new jl(t.getProvider("auth-internal")),new rc(t.getProvider("app-check-internal")),function(A,H){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Zt(vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(A.options.projectId,H)}(d,s),d);return a=Object.assign({useFetchStreams:e},a),g._setSettings(a),g},"PUBLIC").setMultipleInstances(!0)),(0,Me.registerVersion)(I,"3.13.0",r),(0,Me.registerVersion)(I,"3.13.0","esm2017")}();class Bd{constructor(e){this._delegate=e}static fromBase64String(e){return em(),new Bd(pl.fromBase64String(e))}static fromUint8Array(e){return v_(),new Bd(pl.fromUint8Array(e))}toBase64(){return em(),this._delegate.toBase64()}toUint8Array(){return v_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tm(r){return function p0(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class g0{enableIndexedDbPersistence(e,t){return function Nv(r,e){Ug(r=Ji(r,ls));const t=qo(r);if(t._uninitializedComponentsProvider)throw new Zt(vt.FAILED_PRECONDITION,"SDK cache is already specified.");yr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new Jl;return Gy(t,a,new wh(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ov(r){Ug(r=Ji(r,ls));const e=qo(r);if(e._uninitializedComponentsProvider)throw new Zt(vt.FAILED_PRECONDITION,"SDK cache is already specified.");yr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new Jl;return Gy(e,s,new xy(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kv(r){if(r._initialized&&!r._terminated)throw new Zt(vt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(s){if(!Io.D())return Promise.resolve();const a=s+"main";yield Io.delete(a)}),function(s){return t.apply(this,arguments)})(Lp(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ip{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&yr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Og(r,e,t,s={}){var a;const d=(r=Ji(r,xd))._getSettings(),g=`${e}:${t}`;if("firestore.googleapis.com"!==d.host&&d.host!==g&&yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},d),{host:g,ssl:!1})),s.mockUserToken){let A,H;if("string"==typeof s.mockUserToken)A=s.mockUserToken,H=U.MOCK_USER;else{A=(0,pt.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const Q=s.mockUserToken.sub||s.mockUserToken.user_id;if(!Q)throw new Zt(vt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");H=new U(Q)}r._authCredentials=new za(new ra(A,H))}}(this._delegate,e,t,s)}enableNetwork(){return function Ah(r){return function Rg(r){return r.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Dg(r),t=yield Sg(r);return e.setNetworkEnabled(!0),function(s){const a=yn(s);return a.vu.delete(0),yd(a)}(t)}))}(qo(r=Ji(r,ls)))}(this._delegate)}disableNetwork(){return function Fv(r){return function Ny(r){return r.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Dg(r),t=yield Sg(r);return e.setNetworkEnabled(!1),(s=(0,we.Z)(function*(a){const d=yn(a);d.vu.add(0),yield Gc(d),d.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(qo(r=Ji(r,ls)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,jy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Vg(r){return function(e){const t=new Yr;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function _g(r,e){return mh.apply(this,arguments)}(yield Ag(e),t)})),t.promise}(qo(r=Ji(r,ls)))}(this._delegate)}onSnapshotsInSync(e){return function h_(r,e){return function Fy(r,e){const t=new Ad(e);return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return s=yield Md(r),a=t,yn(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return s=yield Md(r),a=t,void yn(s).ku.delete(a);var s,a}))}}(qo(r=Ji(r,ls)),el(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jc(this,kg(this._delegate,e))}catch(t){throw fu(t,"collection()","Firestore.collection()")}}doc(e){try{return new nl(this,Dh(this._delegate,e))}catch(t){throw fu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eu(this,function Mv(r,e){if(r=Ji(r,xd),Jf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Zt(vt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ha(r,null,(t=e,new Ra(xi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function g_(r,e,t){r=Ji(r,ls);const s=Object.assign(Object.assign({},a0),t);return function(a){if(a.maxAttempts<1)throw new Zt(vt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,d,g){const A=new Yr;return a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const H=yield function Py(r){return Zf(r).then(e=>e.datastore)}(a);new Gf(a.asyncQueue,H,g,d,A).run()})),A.promise}(qo(r),a=>e(new u0(r,a)),s)}(this._delegate,t=>e(new w_(this,t)))}batch(){return qo(this._delegate),new C_(new p_(this._delegate,e=>Yc(this._delegate,e)))}loadBundle(e){return function Vv(r,e){const t=qo(r=Ji(r,ls)),s=new Pv;return function Ly(r,e,t,s){const a=function(d,g){let A;return A="string"==typeof d?uf().encode(d):d,H=function(H,Q){if(H instanceof Uint8Array)return Ch(H,Q);if(H instanceof ArrayBuffer)return Ch(new Uint8Array(H),Q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),new mE(H,g);var H}(t,ch(e));r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function Eh(r,e,t){const s=yn(r);var a;(a=(0,we.Z)(function*(d,g,A){try{const H=yield g.getMetadata();if(yield function(St,$t){const En=yn(St),kn=Ko($t.createTime);return En.persistence.runTransaction("hasNewerBundle","readonly",Qn=>En.qs.getBundleMetadata(Qn,$t.id)).then(Qn=>!!Qn&&Qn.createTime.compareTo(kn)>=0)}(d.localStore,H))return yield g.close(),A._completeWith({taskState:"Success",documentsLoaded:(St=H).totalDocuments,bytesLoaded:St.totalBytes,totalDocuments:St.totalDocuments,totalBytes:St.totalBytes}),Promise.resolve(new Set);A._updateProgress(Kc(H));const Q=new bd(H,d.localStore,g.serializer);let de=yield g.bc();for(;de;){const St=yield Q.zu(de);St&&A._updateProgress(St),de=yield g.bc()}const Ve=yield Q.complete();return yield Ql(d,Ve.Ju,void 0),yield function(St,$t){const En=yn(St);return En.persistence.runTransaction("Save bundle","readwrite",kn=>En.qs.saveBundleMetadata(kn,$t))}(d.localStore,H),A._completeWith(Ve.progress),Promise.resolve(Ve.Hu)}catch(H){return yr("SyncEngine",`Loading bundle failed with ${H}`),A._failWith(H),Promise.resolve(new Set)}var St}),function(d,g,A){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Ag(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function zy(r,e){return function Vy(r,e){return r.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,s){const a=yn(t);return a.persistence.runTransaction("Get named query","readonly",d=>a.qs.getNamedQuery(d,s))}(yield Rd(r),e)}))}(qo(r=Ji(r,ls)),e).then(t=>t?new Ha(r,null,t.query):null)}(this._delegate,e).then(t=>t?new eu(this,t):null)}}class sp extends s_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bd(new pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return nl.forKey(t,this.firestore,null)}}class w_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sp(e)}get(e){const t=Xc(e);return this._delegate.get(t).then(s=>new Hh(this._firestore,new ec(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Xc(e);return s?(jh("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=Xc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=Xc(e);return this._delegate.delete(t),this}}class C_{constructor(e){this._delegate=e}set(e,t,s){const a=Xc(e);return s?(jh("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=Xc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=Xc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qc{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Vh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jd(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Qc.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let d=a.get(t);return d||(d=new Qc(e,new sp(e),t),a.set(t,d)),d}}Qc.INSTANCES=new WeakMap;class nl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nl(t,new Ns(t._delegate,s,new Cn(e)))}static forKey(e,t,s){return new nl(t,new Ns(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Jc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jc(this.firestore,kg(this._delegate,e))}catch(t){throw fu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,pt.m9)(e))instanceof Ns&&xv(this._delegate,e)}set(e,t){t=jh("DocumentReference.set",t);try{return t?Vd(this._delegate,e,t):Vd(this._delegate,e)}catch(s){throw fu(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?d_(this._delegate,e):d_(this._delegate,e,t,...s)}catch(a){throw fu(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Xv(r){return Yc(Ji(r.firestore,ls),[new Mt(r._key,to.none())])}(this._delegate)}onSnapshot(...e){const t=I_(e),s=T_(e,a=>new Hh(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Qg(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function u_(r){r=Ji(r,Ns);const e=Ji(r.firestore,ls),t=qo(e),s=new gl(e);return function Oy(r,e){const t=new Yr;return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(s=(0,we.Z)(function*(a,d,g){try{const A=yield function(H,Q){const de=yn(H);return de.persistence.runTransaction("read document","readonly",Ve=>de.localDocuments.getDocument(Ve,Q))}(a,d);A.isFoundDocument()?g.resolve(A):A.isNoDocument()?g.resolve(null):g.reject(new Zt(vt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(A){const H=Ed(A,`Failed to get document '${d} from cache`);g.reject(H)}}),function(a,d,g){return s.apply(this,arguments)})(yield Rd(r),e,t);var s})),t.promise}(t,r._key).then(a=>new ec(e,s,r._key,a,new Zc(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function l_(r){r=Ji(r,Ns);const e=Ji(r.firestore,ls);return Mg(qo(e),r._key,{source:"server"}).then(t=>Jg(e,r,t))}(this._delegate):function Qv(r){r=Ji(r,Ns);const e=Ji(r.firestore,ls);return Mg(qo(e),r._key).then(t=>Jg(e,r,t))}(this._delegate),t.then(s=>new Hh(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new nl(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}function fu(r,e,t){return r.message=r.message.replace(e,t),r}function I_(r){for(const e of r)if("object"==typeof e&&!tm(e))return e;return{}}function T_(r,e){var t,s;let a;return a=tm(r[0])?r[0]:tm(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:d=>{a.next&&a.next(e(d))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Hh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return a_(this._delegate,e._delegate)}}class jd extends Hh{data(e){const t=this._delegate.data(e);return function na(r,e){r||ln()}(void 0!==t),t}}class eu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sp(e)}where(e,t,s){try{return new eu(this.firestore,Xl(this._delegate,function t_(r,e,t){const s=e,a=Ph("where",r);return kd._create(a,s,t)}(e,t,s)))}catch(a){throw fu(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eu(this.firestore,Xl(this._delegate,function Ld(r,e="asc"){const t=e,s=Ph("orderBy",r);return qg._create(s,t)}(e,t)))}catch(s){throw fu(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eu(this.firestore,Xl(this._delegate,function Yg(r){return Ng("limit",r),Zg._create("limit",r,"F")}(e)))}catch(t){throw fu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eu(this.firestore,Xl(this._delegate,function vE(r){return Ng("limitToLast",r),Zg._create("limitToLast",r,"L")}(e)))}catch(t){throw fu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eu(this.firestore,Xl(this._delegate,function n_(...r){return Nh._create("startAt",r,!0)}(...e)))}catch(t){throw fu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eu(this.firestore,Xl(this._delegate,function EE(...r){return Nh._create("startAfter",r,!1)}(...e)))}catch(t){throw fu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eu(this.firestore,Xl(this._delegate,function Gv(...r){return Gr._create("endBefore",r,!1)}(...e)))}catch(t){throw fu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eu(this.firestore,Xl(this._delegate,function zv(...r){return Gr._create("endAt",r,!0)}(...e)))}catch(t){throw fu(t,"endAt()","Query.endAt()")}}isEqual(e){return Sh(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Jv(r){r=Ji(r,Ha);const e=Ji(r.firestore,ls),t=qo(e),s=new gl(e);return function ky(r,e){const t=new Yr;return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(s=(0,we.Z)(function*(a,d,g){try{const A=yield Hp(a,d,!0),H=new dg(d,A.ir),Q=H.sc(A.documents),de=H.applyChanges(Q,!1);g.resolve(de.snapshot)}catch(A){const H=Ed(A,`Failed to execute query '${d} against cache`);g.reject(H)}}),function(a,d,g){return s.apply(this,arguments)})(yield Rd(r),e,t);var s})),t.promise}(t,r._query).then(a=>new tl(e,s,r,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function Uh(r){r=Ji(r,Ha);const e=Ji(r.firestore,ls),t=qo(e),s=new gl(e);return xg(t,r._query,{source:"server"}).then(a=>new tl(e,s,r,a))}(this._delegate):function c_(r){r=Ji(r,Ha);const e=Ji(r.firestore,ls),t=qo(e),s=new gl(e);return Kg(r._query),xg(t,r._query).then(a=>new tl(e,s,r,a))}(this._delegate),t.then(s=>new nm(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=I_(e),s=T_(e,a=>new nm(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Qg(this._delegate,t,s)}withConverter(e){return new eu(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}class m0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new m0(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new jd(this._firestore,s))})}isEqual(e){return a_(this._delegate,e._delegate)}}class Jc extends eu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nl(this.firestore,e):null}doc(e){try{return new nl(this.firestore,void 0===e?Dh(this._delegate):Dh(this._delegate,e))}catch(t){throw fu(t,"doc()","CollectionReference.doc()")}}add(e){return function e0(r,e){const t=Ji(r.firestore,ls),s=Dh(r),a=Lh(r.converter,e);return Yc(t,[ep(Dc(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,to.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new nl(this.firestore,t))}isEqual(e){return xv(this._delegate,e._delegate)}withConverter(e){return new Jc(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}function Xc(r){return Ji(r,Ns)}class rm{constructor(...e){this._delegate=new Vl(...e)}static documentId(){return new rm(Yi.keyField().canonicalString())}isEqual(e){return(e=(0,pt.m9)(e))instanceof Vl&&this._delegate._internalPath.isEqual(e._internalPath)}}class ed{constructor(e){this._delegate=e}static serverTimestamp(){const e=function c0(){return new Hg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ed(e)}static delete(){const e=function l0(){return new Mh("deleteField")}();return e._methodName="FieldValue.delete",new ed(e)}static arrayUnion(...e){const t=function Ud(...r){return new Bv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new ed(t)}static arrayRemove(...e){const t=function d0(...r){return new jv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new ed(t)}static increment(e){const t=function m_(r){return new Hv("increment",r)}(e);return t._methodName="FieldValue.increment",new ed(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const im={Firestore:ip,GeoPoint:Pd,Timestamp:fs,Blob:Bd,Transaction:w_,WriteBatch:C_,DocumentReference:nl,DocumentSnapshot:Hh,Query:eu,QueryDocumentSnapshot:jd,QuerySnapshot:nm,CollectionReference:Jc,FieldPath:rm,FieldValue:ed,setLogLevel:function E_(r){!function We(r){le.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function b_(r){(function sm(r,e){r.INTERNAL.registerComponent(new it.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},im)))})(r,(e,t)=>new ip(e,t,new g0)),r.registerVersion("@firebase/firestore-compat","0.3.12")}(Xt.Z);var Bl=$(1205),y0=$(6215),_0=$(9260);function D_(r,e){return function om(r,e=B.z){return new X.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function am(r,e){return D_(r,e).pipe((0,Ce.U)(t=>({payload:t,type:"query"})))}function $h(r,e){return am(r,e).pipe((0,Je.O)(void 0),be(),(0,Ce.U)(([t,s])=>{const a=s.payload.docChanges(),d=a.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((g,A)=>{const H=a.find(de=>de.doc.ref.isEqual(g.ref)),Q=null==t?void 0:t.payload.docs.find(de=>de.ref.isEqual(g.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(g.metadata)||!H&&Q&&JSON.stringify(Q.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:A,newIndex:A,type:"modified",doc:g}})}),d}))}function A_(r,e,t){return $h(r,t).pipe((0,tt.R)((s,a)=>function R_(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function v0(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return M_(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return M_(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return M_(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(d=>d.payload),e),[]),function ft(r,e=Lt.y){return r=null!=r?r:ht,(0,Ge.e)((t,s)=>{let a,d=!0;t.subscribe((0,at.x)(s,g=>{const A=e(g);(d||!r(a,A))&&(d=!1,a=A,s.next(g))}))})}(),(0,Ce.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function M_(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function Gh(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class x_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=$h(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ce.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Je.O)(void 0),be(),(0,Bt.h)(([s,a])=>a.length>0||!s),(0,Ce.U)(([s,a])=>a),Ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,tt.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Gh(e);return A_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}valueChanges(e={}){return am(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Ke.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Ke.iC)}add(e){return this.ref.add(e)}doc(e){return new td(this.ref.doc(e),this.afs)}}class td{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:d}=O_(s,t);return new x_(a,d,this.afs)}snapshotChanges(){return function S_(r,e){return D_(r,e).pipe((0,Je.O)(void 0),be(),(0,Ce.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ce.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ie.D)(this.ref.get(e)).pipe(Ke.iC)}}class zh{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$h(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Bt.h)(t=>t.length>0),Ke.iC):$h(this.query,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,tt.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Gh(e);return A_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}valueChanges(e={}){return am(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Ke.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Ke.iC)}}const P_=new y.OlP("angularfire2.enableFirestorePersistence"),E0=new y.OlP("angularfire2.firestore.persistenceSettings"),N_=new y.OlP("angularfire2.firestore.settings"),w0=new y.OlP("angularfire2.firestore.use-emulator");function O_(r,e=(t=>t)){return{query:e(r),ref:r}}let k_=(()=>{class r{constructor(t,s,a,d,g,A,H,Q,de,Ve,St,$t,En,kn,Qn,oi,cs){this.schedulers=H;const Ci=(0,mt.on)(t,A,s),Lo=de;Ve&&(0,Bl.nw)(Ci,A,St,En,kn,Qn,$t,oi),[this.firestore,this.persistenceEnabled$]=(0,mt.cc)(`${Ci.name}.firestore`,"AngularFirestore",Ci.name,()=>{const _o=A.runOutsideAngular(()=>Ci.firestore());if(d&&_o.settings(d),Lo&&_o.useEmulator(...Lo),a&&!(0,Ft.PM)(g)){const zs=()=>{try{return(0,ie.D)(_o.enablePersistence(Q||void 0).then(()=>!0,()=>!1))}catch(pu){return"undefined"!=typeof console&&console.warn(pu),(0,Ue.of)(!1)}};return[_o,A.runOutsideAngular(zs)]}return[_o,(0,Ue.of)(!1)]},[d,Lo,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=O_(a,s),A=this.schedulers.ngZone.run(()=>d);return new x_(A,g,this)}collectionGroup(t,s){const a=s||(g=>g),d=this.firestore.collectionGroup(t);return new zh(a(d),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new td(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(y.LFG(mt.Dh),y.LFG(mt.xv,8),y.LFG(P_,8),y.LFG(N_,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Ke.HU),y.LFG(E0,8),y.LFG(w0,8),y.LFG(Bl.zQ,8),y.LFG(Bl.Qv,8),y.LFG(Bl.L6,8),y.LFG(Bl._Q,8),y.LFG(Bl.rT,8),y.LFG(Bl.lh,8),y.LFG(Bl.f7,8),y.LFG(y0.nm,8))},r.\u0275prov=y.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),C0=(()=>{class r{constructor(){_0.Z.registerVersion("angularfire",Ke.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:P_,useValue:!0},{provide:E0,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({providers:[k_]}),r})()},377:(fn,ct,$)=>{$.d(ct,{Q1:()=>ue,TE:()=>gi});var y=$(8306),B=$(9646),X=$(8996),ie=$(4986),Ue=$(4482),Ke=$(5403),Ge=$(4004),at=$(3900),be=$(4976),Ce=$(5e3),tt=$(2011),Lt=$(3942),ft=$(5861),ht=$(6881),Bt=$(2090),mt=$(4859);const Ft="firebasestorage.googleapis.com",dn="storageBucket";class it extends Bt.ZR{constructor(W,fe,Ie=0){super(pt(W),`Firebase Storage: ${fe} (${pt(W)})`),this.status_=Ie,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(W){this.status_=W}_codeEquals(W){return pt(W)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(W){this.customData.serverResponse=W,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Et=(()=>{return(z=Et||(Et={})).UNKNOWN="unknown",z.OBJECT_NOT_FOUND="object-not-found",z.BUCKET_NOT_FOUND="bucket-not-found",z.PROJECT_NOT_FOUND="project-not-found",z.QUOTA_EXCEEDED="quota-exceeded",z.UNAUTHENTICATED="unauthenticated",z.UNAUTHORIZED="unauthorized",z.UNAUTHORIZED_APP="unauthorized-app",z.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",z.INVALID_CHECKSUM="invalid-checksum",z.CANCELED="canceled",z.INVALID_EVENT_NAME="invalid-event-name",z.INVALID_URL="invalid-url",z.INVALID_DEFAULT_BUCKET="invalid-default-bucket",z.NO_DEFAULT_BUCKET="no-default-bucket",z.CANNOT_SLICE_BLOB="cannot-slice-blob",z.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",z.NO_DOWNLOAD_URL="no-download-url",z.INVALID_ARGUMENT="invalid-argument",z.INVALID_ARGUMENT_COUNT="invalid-argument-count",z.APP_DELETED="app-deleted",z.INVALID_ROOT_OPERATION="invalid-root-operation",z.INVALID_FORMAT="invalid-format",z.INTERNAL_ERROR="internal-error",z.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Et;var z})();function pt(z){return"storage/"+z}function et(){return new it(Et.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rn(){return new it(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zr(){return new it(Et.CANCELED,"User canceled the upload/download.")}function an(){return new it(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function De(z){return new it(Et.INVALID_ARGUMENT,z)}function Ee(){return new it(Et.APP_DELETED,"The Firebase app was deleted.")}function xe(z){return new it(Et.INVALID_ROOT_OPERATION,"The operation '"+z+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gt(z,W){return new it(Et.INVALID_FORMAT,"String does not match format '"+z+"': "+W)}function tn(z){throw new it(Et.INTERNAL_ERROR,"Internal error: "+z)}class cn{constructor(W,fe){this.bucket=W,this.path_=fe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const W=encodeURIComponent;return"/b/"+W(this.bucket)+"/o/"+W(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(W,fe){let Ie;try{Ie=cn.makeFromUrl(W,fe)}catch(Le){return new cn(W,"")}if(""===Ie.path)return Ie;throw function fr(z){return new it(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+z+"'.")}(W)}static makeFromUrl(W,fe){let Ie=null;const Le="([A-Za-z0-9.\\-_]+)",Vn=new RegExp("^gs://"+Le+"(/(.*))?$","i");function cr(rs){rs.path_=decodeURIComponent(rs.path)}const mi=fe.replace(/[.]/g,"\\."),Ui=[{regex:Vn,indices:{bucket:1,path:3},postModify:function It(rs){"/"===rs.path.charAt(rs.path.length-1)&&(rs.path_=rs.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${mi}/v[A-Za-z0-9_]+/b/${Le}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:cr},{regex:new RegExp(`^https?://${fe===Ft?"(?:storage.googleapis.com|storage.cloud.google.com)":fe}/${Le}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:cr}];for(let rs=0;rs<Ui.length;rs++){const Hs=Ui[rs],xo=Hs.regex.exec(W);if(xo){let $s=xo[Hs.indices.path];$s||($s=""),Ie=new cn(xo[Hs.indices.bucket],$s),Hs.postModify(Ie);break}}if(null==Ie)throw function Ln(z){return new it(Et.INVALID_URL,"Invalid URL '"+z+"'.")}(W);return Ie}}class Sn{constructor(W){this.promise_=Promise.reject(W)}getPromise(){return this.promise_}cancel(W=!1){}}function wn(z){return"string"==typeof z||z instanceof String}function Jn(z){return Dn()&&z instanceof Blob}function Dn(){return"undefined"!=typeof Blob&&!(0,Bt.UG)()}function On(z,W,fe,Ie){if(Ie<W)throw De(`Invalid value for '${z}'. Expected ${W} or greater.`);if(Ie>fe)throw De(`Invalid value for '${z}'. Expected ${fe} or less.`)}function li(z,W,fe){let Ie=W;return null==fe&&(Ie=`https://${W}`),`${fe}://${Ie}/v0${z}`}function Xi(z){const W=encodeURIComponent;let fe="?";for(const Ie in z)z.hasOwnProperty(Ie)&&(fe=fe+(W(Ie)+"=")+W(z[Ie])+"&");return fe=fe.slice(0,-1),fe}var Pt=(()=>{return(z=Pt||(Pt={}))[z.NO_ERROR=0]="NO_ERROR",z[z.NETWORK_ERROR=1]="NETWORK_ERROR",z[z.ABORT=2]="ABORT",Pt;var z})();function Fe(z,W){const fe=z>=500&&z<600,Le=-1!==[408,429].indexOf(z),It=-1!==W.indexOf(z);return fe||Le||It}class ze{constructor(W,fe,Ie,Le,It,Qt,Vn,xn,cr,Gn,mi,Di=!0){this.url_=W,this.method_=fe,this.headers_=Ie,this.body_=Le,this.successCodes_=It,this.additionalRetryCodes_=Qt,this.callback_=Vn,this.errorCallback_=xn,this.timeout_=cr,this.progressCallback_=Gn,this.connectionFactory_=mi,this.retry=Di,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ti,$r)=>{this.resolve_=Ti,this.reject_=$r,this.start_()})}start_(){const fe=(Ie,Le)=>{const It=this.resolve_,Qt=this.reject_,Vn=Le.connection;if(Le.wasSuccessCode)try{const xn=this.callback_(Vn,Vn.getResponse());!function or(z){return void 0!==z}(xn)?It():It(xn)}catch(xn){Qt(xn)}else if(null!==Vn){const xn=et();xn.serverResponse=Vn.getErrorText(),Qt(this.errorCallback_?this.errorCallback_(Vn,xn):xn)}else Qt(Le.canceled?this.appDelete_?Ee():Zr():rn())};this.canceled_?fe(0,new lt(!1,null,!0)):this.backoffId_=function Wn(z,W,fe){let Ie=1,Le=null,It=null,Qt=!1,Vn=0;function xn(){return 2===Vn}let cr=!1;function Gn(...Si){cr||(cr=!0,W.apply(null,Si))}function mi(Si){Le=setTimeout(()=>{Le=null,z(Ti,xn())},Si)}function Di(){It&&clearTimeout(It)}function Ti(Si,...Rs){if(cr)return void Di();if(Si)return Di(),void Gn.call(null,Si,...Rs);if(xn()||Qt)return Di(),void Gn.call(null,Si,...Rs);let Ui;Ie<64&&(Ie*=2),1===Vn?(Vn=2,Ui=0):Ui=1e3*(Ie+Math.random()),mi(Ui)}let $r=!1;function qi(Si){$r||($r=!0,Di(),!cr&&(null!==Le?(Si||(Vn=2),clearTimeout(Le),mi(0)):Si||(Vn=1)))}return mi(0),It=setTimeout(()=>{Qt=!0,qi(!0)},fe),qi}((Ie,Le)=>{if(Le)return void Ie(!1,new lt(!1,null,!0));const It=this.connectionFactory_();this.pendingConnection_=It;const Qt=Vn=>{null!==this.progressCallback_&&this.progressCallback_(Vn.loaded,Vn.lengthComputable?Vn.total:-1)};null!==this.progressCallback_&&It.addUploadProgressListener(Qt),It.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&It.removeUploadProgressListener(Qt),this.pendingConnection_=null;const Vn=It.getErrorCode()===Pt.NO_ERROR,xn=It.getStatus();if(!Vn||Fe(xn,this.additionalRetryCodes_)&&this.retry){const Gn=It.getErrorCode()===Pt.ABORT;return void Ie(!1,new lt(!1,null,Gn))}const cr=-1!==this.successCodes_.indexOf(xn);Ie(!0,new lt(cr,It))})},fe,this.timeout_)}getPromise(){return this.promise_}cancel(W){this.canceled_=!0,this.appDelete_=W||!1,null!==this.backoffId_&&function pr(z){z(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class lt{constructor(W,fe,Ie){this.wasSuccessCode=W,this.connection=fe,this.canceled=!!Ie}}function ci(...z){const W=function Mn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==W){const fe=new W;for(let Ie=0;Ie<z.length;Ie++)fe.append(z[Ie]);return fe.getBlob()}if(Dn())return new Blob(z);throw new it(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Yt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rr{constructor(W,fe){this.data=W,this.contentType=fe||null}}function lr(z,W){switch(z){case Yt.RAW:return new Rr(_r(W));case Yt.BASE64:case Yt.BASE64URL:return new Rr(Wr(z,W));case Yt.DATA_URL:return new Rr(function fi(z){const W=new Qr(z);return W.base64?Wr(Yt.BASE64,W.rest):function tr(z){let W;try{W=decodeURIComponent(z)}catch(fe){throw gt(Yt.DATA_URL,"Malformed data URL.")}return _r(W)}(W.rest)}(W),function Fi(z){return new Qr(z).contentType}(W))}throw et()}function _r(z){const W=[];for(let fe=0;fe<z.length;fe++){let Ie=z.charCodeAt(fe);Ie<=127?W.push(Ie):Ie<=2047?W.push(192|Ie>>6,128|63&Ie):55296==(64512&Ie)?fe<z.length-1&&56320==(64512&z.charCodeAt(fe+1))?(Ie=65536|(1023&Ie)<<10|1023&z.charCodeAt(++fe),W.push(240|Ie>>18,128|Ie>>12&63,128|Ie>>6&63,128|63&Ie)):W.push(239,191,189):56320==(64512&Ie)?W.push(239,191,189):W.push(224|Ie>>12,128|Ie>>6&63,128|63&Ie)}return new Uint8Array(W)}function Wr(z,W){switch(z){case Yt.BASE64:{const Le=-1!==W.indexOf("-"),It=-1!==W.indexOf("_");if(Le||It)throw gt(z,"Invalid character '"+(Le?"-":"_")+"' found: is it base64url encoded?");break}case Yt.BASE64URL:{const Le=-1!==W.indexOf("+"),It=-1!==W.indexOf("/");if(Le||It)throw gt(z,"Invalid character '"+(Le?"+":"/")+"' found: is it base64 encoded?");W=W.replace(/-/g,"+").replace(/_/g,"/");break}}let fe;try{fe=function Ar(z){if("undefined"==typeof atob)throw function ve(z){return new it(Et.UNSUPPORTED_ENVIRONMENT,`${z} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(z)}(W)}catch(Le){throw Le.message.includes("polyfill")?Le:gt(z,"Invalid character found")}const Ie=new Uint8Array(fe.length);for(let Le=0;Le<fe.length;Le++)Ie[Le]=fe.charCodeAt(Le);return Ie}class Qr{constructor(W){this.base64=!1,this.contentType=null;const fe=W.match(/^data:([^,]+)?,/);if(null===fe)throw gt(Yt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ie=fe[1]||null;null!=Ie&&(this.base64=function Ri(z,W){return z.length>=W.length&&z.substring(z.length-W.length)===W}(Ie,";base64"),this.contentType=this.base64?Ie.substring(0,Ie.length-7):Ie),this.rest=W.substring(W.indexOf(",")+1)}}class zr{constructor(W,fe){let Ie=0,Le="";Jn(W)?(this.data_=W,Ie=W.size,Le=W.type):W instanceof ArrayBuffer?(fe?this.data_=new Uint8Array(W):(this.data_=new Uint8Array(W.byteLength),this.data_.set(new Uint8Array(W))),Ie=this.data_.length):W instanceof Uint8Array&&(fe?this.data_=W:(this.data_=new Uint8Array(W.length),this.data_.set(W)),Ie=W.length),this.size_=Ie,this.type_=Le}size(){return this.size_}type(){return this.type_}slice(W,fe){if(Jn(this.data_)){const Le=function Tr(z,W,fe){return z.webkitSlice?z.webkitSlice(W,fe):z.mozSlice?z.mozSlice(W,fe):z.slice?z.slice(W,fe):null}(this.data_,W,fe);return null===Le?null:new zr(Le)}{const Ie=new Uint8Array(this.data_.buffer,W,fe-W);return new zr(Ie,!0)}}static getBlob(...W){if(Dn()){const fe=W.map(Ie=>Ie instanceof zr?Ie.data_:Ie);return new zr(ci.apply(null,fe))}{const fe=W.map(Qt=>wn(Qt)?lr(Yt.RAW,Qt).data:Qt.data_);let Ie=0;fe.forEach(Qt=>{Ie+=Qt.byteLength});const Le=new Uint8Array(Ie);let It=0;return fe.forEach(Qt=>{for(let Vn=0;Vn<Qt.length;Vn++)Le[It++]=Qt[Vn]}),new zr(Le,!0)}}uploadData(){return this.data_}}function Pe(z){let W;try{W=JSON.parse(z)}catch(fe){return null}return function Fr(z){return"object"==typeof z&&!Array.isArray(z)}(W)?W:null}function ge(z){const W=z.lastIndexOf("/",z.length-2);return-1===W?z:z.slice(W+1)}function G(z,W){return W}class ne{constructor(W,fe,Ie,Le){this.server=W,this.local=fe||W,this.writable=!!Ie,this.xform=Le||G}}let se=null;function dt(){if(se)return se;const z=[];z.push(new ne("bucket")),z.push(new ne("generation")),z.push(new ne("metageneration")),z.push(new ne("name","fullPath",!0));const fe=new ne("name");fe.xform=function W(It,Qt){return function Se(z){return!wn(z)||z.length<2?z:ge(z)}(Qt)},z.push(fe);const Le=new ne("size");return Le.xform=function Ie(It,Qt){return void 0!==Qt?Number(Qt):Qt},z.push(Le),z.push(new ne("timeCreated")),z.push(new ne("updated")),z.push(new ne("md5Hash",null,!0)),z.push(new ne("cacheControl",null,!0)),z.push(new ne("contentDisposition",null,!0)),z.push(new ne("contentEncoding",null,!0)),z.push(new ne("contentLanguage",null,!0)),z.push(new ne("contentType",null,!0)),z.push(new ne("metadata","customMetadata",!0)),se=z,se}function un(z,W,fe){const Ie=Pe(W);return null===Ie?null:function gn(z,W,fe){const Ie={type:"file"},Le=fe.length;for(let It=0;It<Le;It++){const Qt=fe[It];Ie[Qt.local]=Qt.xform(Ie,W[Qt.server])}return function zt(z,W){Object.defineProperty(z,"ref",{get:function fe(){const It=new cn(z.bucket,z.fullPath);return W._makeStorageReference(It)}})}(Ie,z),Ie}(z,Ie,fe)}function $n(z,W){const fe={},Ie=W.length;for(let Le=0;Le<Ie;Le++){const It=W[Le];It.writable&&(fe[It.server]=z[It.local])}return JSON.stringify(fe)}const Jr="prefixes";class Vt{constructor(W,fe,Ie,Le){this.url=W,this.method=fe,this.handler=Ie,this.timeout=Le,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Dt(z){if(!z)throw et()}function sn(z,W){return function fe(Ie,Le){const It=un(z,Le,W);return Dt(null!==It),It}}function Xr(z){return function W(fe,Ie){let Le;return Le=401===fe.getStatus()?fe.getErrorText().includes("Firebase App Check token is invalid")?function Ht(){return new it(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Fn(){return new it(Et.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===fe.getStatus()?function bt(z){return new it(Et.QUOTA_EXCEEDED,"Quota for bucket '"+z+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(z.bucket):403===fe.getStatus()?function Nn(z){return new it(Et.UNAUTHORIZED,"User does not have permission to access '"+z+"'.")}(z.path):Ie,Le.status=fe.getStatus(),Le.serverResponse=Ie.serverResponse,Le}}function vr(z){const W=Xr(z);return function fe(Ie,Le){let It=W(Ie,Le);return 404===Ie.getStatus()&&(It=function Ut(z){return new it(Et.OBJECT_NOT_FOUND,"Object '"+z+"' does not exist.")}(z.path)),It.serverResponse=Le.serverResponse,It}}function Br(z,W,fe){const Le=li(W.fullServerUrl(),z.host,z._protocol),Qt=z.maxOperationRetryTime,Vn=new Vt(Le,"GET",sn(z,fe),Qt);return Vn.errorHandler=vr(W),Vn}function ai(z,W,fe,Ie,Le){const It={};It.prefix=W.isRoot?"":W.path+"/",fe&&fe.length>0&&(It.delimiter=fe),Ie&&(It.pageToken=Ie),Le&&(It.maxResults=Le);const Vn=li(W.bucketOnlyServerUrl(),z.host,z._protocol),cr=z.maxOperationRetryTime,Gn=new Vt(Vn,"GET",function Tn(z,W){return function fe(Ie,Le){const It=function yt(z,W,fe){const Ie=Pe(fe);return null===Ie?null:function Tt(z,W,fe){const Ie={prefixes:[],items:[],nextPageToken:fe.nextPageToken};if(fe[Jr])for(const Le of fe[Jr]){const It=Le.replace(/\/$/,""),Qt=z._makeStorageReference(new cn(W,It));Ie.prefixes.push(Qt)}if(fe.items)for(const Le of fe.items){const It=z._makeStorageReference(new cn(W,Le.name));Ie.items.push(It)}return Ie}(z,W,Ie)}(z,W,Le);return Dt(null!==It),It}}(z,W.bucket),cr);return Gn.urlParams=It,Gn.errorHandler=Xr(W),Gn}function ks(z,W,fe){const Ie=Object.assign({},fe);return Ie.fullPath=z.path,Ie.size=W.size(),Ie.contentType||(Ie.contentType=function Cs(z,W){return z&&z.contentType||W&&W.type()||"application/octet-stream"}(null,W)),Ie}class _n{constructor(W,fe,Ie,Le){this.current=W,this.total=fe,this.finalized=!!Ie,this.metadata=Le||null}}function ir(z,W){let fe=null;try{fe=z.getResponseHeader("X-Goog-Upload-Status")}catch(Le){Dt(!1)}return Dt(!!fe&&-1!==(W||["active"]).indexOf(fe)),fe}const Ze={STATE_CHANGED:"state_changed"},rt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _t(z){switch(z){case"running":case"pausing":case"canceling":return rt.RUNNING;case"paused":return rt.PAUSED;case"success":return rt.SUCCESS;case"canceled":return rt.CANCELED;default:return rt.ERROR}}class Ot{constructor(W,fe,Ie){if(function jn(z){return"function"==typeof z}(W)||null!=fe||null!=Ie)this.next=W,this.error=null!=fe?fe:void 0,this.complete=null!=Ie?Ie:void 0;else{const It=W;this.next=It.next,this.error=It.error,this.complete=It.complete}}}function In(z){return(...W)=>{Promise.resolve().then(()=>z(...W))}}class br extends class hr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pt.NO_ERROR,this.sendPromise_=new Promise(W=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pt.ABORT,W()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pt.NETWORK_ERROR,W()}),this.xhr_.addEventListener("load",()=>{W()})})}send(W,fe,Ie,Le){if(this.sent_)throw tn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(fe,W,!0),void 0!==Le)for(const It in Le)Le.hasOwnProperty(It)&&this.xhr_.setRequestHeader(It,Le[It].toString());return void 0!==Ie?this.xhr_.send(Ie):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(W){return-1}}getResponse(){if(!this.sent_)throw tn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(W){return this.xhr_.getResponseHeader(W)}addUploadProgressListener(W){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",W)}removeUploadProgressListener(W){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",W)}}{initXhr(){this.xhr_.responseType="text"}}function di(){return new br}class Fs{constructor(W,fe,Ie=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=W,this._blob=fe,this._metadata=Ie,this._mappings=dt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Le=>{if(this._request=void 0,this._chunkMultiplier=1,Le._codeEquals(Et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const It=this.isExponentialBackoffExpired();if(Fe(Le.status,[])){if(!It)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Le=rn()}this._error=Le,this._transition("error")}},this._metadataErrorHandler=Le=>{this._request=void 0,Le._codeEquals(Et.CANCELED)?this.completeTransitions_():(this._error=Le,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Le,It)=>{this._resolve=Le,this._reject=It,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const W=this._transferred;return fe=>this._updateProgress(W+fe)}_shouldDoResumable(W){return W.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(W){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([fe,Ie])=>{switch(this._state){case"running":W(fe,Ie);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((W,fe)=>{const Ie=function $i(z,W,fe,Ie,Le){const It=W.bucketOnlyServerUrl(),Qt=ks(W,Ie,Le),Vn={name:Qt.fullPath},xn=li(It,z.host,z._protocol),Gn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ie.size()}`,"X-Goog-Upload-Header-Content-Type":Qt.contentType,"Content-Type":"application/json; charset=utf-8"},mi=$n(Qt,fe),$r=new Vt(xn,"POST",function Ti(qi){let Si;ir(qi);try{Si=qi.getResponseHeader("X-Goog-Upload-URL")}catch(Rs){Dt(!1)}return Dt(wn(Si)),Si},z.maxUploadRetryTime);return $r.urlParams=Vn,$r.headers=Gn,$r.body=mi,$r.errorHandler=Xr(W),$r}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Le=this._ref.storage._makeRequest(Ie,di,W,fe);this._request=Le,Le.getPromise().then(It=>{this._request=void 0,this._uploadUrl=It,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const W=this._uploadUrl;this._resolveToken((fe,Ie)=>{const Le=function xr(z,W,fe,Ie){const xn=new Vt(fe,"POST",function It(cr){const Gn=ir(cr,["active","final"]);let mi=null;try{mi=cr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ti){Dt(!1)}mi||Dt(!1);const Di=Number(mi);return Dt(!isNaN(Di)),new _n(Di,Ie.size(),"final"===Gn)},z.maxUploadRetryTime);return xn.headers={"X-Goog-Upload-Command":"query"},xn.errorHandler=Xr(W),xn}(this._ref.storage,this._ref._location,W,this._blob),It=this._ref.storage._makeRequest(Le,di,fe,Ie);this._request=It,It.getPromise().then(Qt=>{this._request=void 0,this._updateProgress(Qt.current),this._needToFetchStatus=!1,Qt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const W=262144*this._chunkMultiplier,fe=new _n(this._transferred,this._blob.size()),Ie=this._uploadUrl;this._resolveToken((Le,It)=>{let Qt;try{Qt=function Xe(z,W,fe,Ie,Le,It,Qt,Vn){const xn=new _n(0,0);if(Qt?(xn.current=Qt.current,xn.total=Qt.total):(xn.current=0,xn.total=Ie.size()),Ie.size()!==xn.total)throw function nt(){return new it(Et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const cr=xn.total-xn.current;let Gn=cr;Le>0&&(Gn=Math.min(Gn,Le));const mi=xn.current;let Ti="";Ti=0===Gn?"finalize":cr===Gn?"upload, finalize":"upload";const $r={"X-Goog-Upload-Command":Ti,"X-Goog-Upload-Offset":`${xn.current}`},qi=Ie.slice(mi,mi+Gn);if(null===qi)throw an();const Ui=new Vt(fe,"POST",function Si(rs,Hs){const xo=ir(rs,["active","final"]),Zo=xn.current+Gn,$s=Ie.size();let Ho;return Ho="final"===xo?sn(W,It)(rs,Hs):null,new _n(Zo,$s,"final"===xo,Ho)},W.maxUploadRetryTime);return Ui.headers=$r,Ui.body=qi.uploadData(),Ui.progressCallback=Vn||null,Ui.errorHandler=Xr(z),Ui}(this._ref._location,this._ref.storage,Ie,this._blob,W,this._mappings,fe,this._makeProgressCallback())}catch(xn){return this._error=xn,void this._transition("error")}const Vn=this._ref.storage._makeRequest(Qt,di,Le,It,!1);this._request=Vn,Vn.getPromise().then(xn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(xn.current),xn.finalized?(this._metadata=xn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((W,fe)=>{const Ie=Br(this._ref.storage,this._ref._location,this._mappings),Le=this._ref.storage._makeRequest(Ie,di,W,fe);this._request=Le,Le.getPromise().then(It=>{this._request=void 0,this._metadata=It,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((W,fe)=>{const Ie=function Mr(z,W,fe,Ie,Le){const It=W.bucketOnlyServerUrl(),Qt={"X-Goog-Upload-Protocol":"multipart"},xn=function Vn(){let Ui="";for(let rs=0;rs<2;rs++)Ui+=Math.random().toString().slice(2);return Ui}();Qt["Content-Type"]="multipart/related; boundary="+xn;const cr=ks(W,Ie,Le),Gn=$n(cr,fe),Ti=zr.getBlob("--"+xn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Gn+"\r\n--"+xn+"\r\nContent-Type: "+cr.contentType+"\r\n\r\n",Ie,"\r\n--"+xn+"--");if(null===Ti)throw an();const $r={name:cr.fullPath},qi=li(It,z.host,z._protocol),Rs=z.maxUploadRetryTime,as=new Vt(qi,"POST",sn(z,fe),Rs);return as.urlParams=$r,as.headers=Qt,as.body=Ti.uploadData(),as.errorHandler=Xr(W),as}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Le=this._ref.storage._makeRequest(Ie,di,W,fe);this._request=Le,Le.getPromise().then(It=>{this._request=void 0,this._metadata=It,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(W){const fe=this._transferred;this._transferred=W,this._transferred!==fe&&this._notifyObservers()}_transition(W){if(this._state!==W)switch(W){case"canceling":case"pausing":this._state=W,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const fe="paused"===this._state;this._state=W,fe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=W,this._notifyObservers();break;case"canceled":this._error=Zr(),this._state=W,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const W=_t(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:W,metadata:this._metadata,task:this,ref:this._ref}}on(W,fe,Ie,Le){const It=new Ot(fe||void 0,Ie||void 0,Le||void 0);return this._addObserver(It),()=>{this._removeObserver(It)}}then(W,fe){return this._promise.then(W,fe)}catch(W){return this.then(null,W)}_addObserver(W){this._observers.push(W),this._notifyObserver(W)}_removeObserver(W){const fe=this._observers.indexOf(W);-1!==fe&&this._observers.splice(fe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(fe=>{this._notifyObserver(fe)})}_finishPromise(){if(void 0!==this._resolve){let W=!0;switch(_t(this._state)){case rt.SUCCESS:In(this._resolve.bind(null,this.snapshot))();break;case rt.CANCELED:case rt.ERROR:In(this._reject.bind(null,this._error))();break;default:W=!1}W&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(W){switch(_t(this._state)){case rt.RUNNING:case rt.PAUSED:W.next&&In(W.next.bind(W,this.snapshot))();break;case rt.SUCCESS:W.complete&&In(W.complete.bind(W))();break;default:W.error&&In(W.error.bind(W,this._error))()}}resume(){const W="paused"===this._state||"pausing"===this._state;return W&&this._transition("running"),W}pause(){const W="running"===this._state;return W&&this._transition("pausing"),W}cancel(){const W="running"===this._state||"pausing"===this._state;return W&&this._transition("canceling"),W}}class os{constructor(W,fe){this._service=W,this._location=fe instanceof cn?fe:cn.makeFromUrl(fe,W.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(W,fe){return new os(W,fe)}get root(){const W=new cn(this._location.bucket,"");return this._newRef(this._service,W)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ge(this._location.path)}get storage(){return this._service}get parent(){const W=function Ae(z){if(0===z.length)return null;const W=z.lastIndexOf("/");return-1===W?"":z.slice(0,W)}(this._location.path);if(null===W)return null;const fe=new cn(this._location.bucket,W);return new os(this._service,fe)}_throwIfRoot(W){if(""===this._location.path)throw xe(W)}}function hs(z,W,fe){return kr.apply(this,arguments)}function kr(){return(kr=(0,ft.Z)(function*(z,W,fe){const Le=yield Ls(z,{pageToken:fe});W.prefixes.push(...Le.prefixes),W.items.push(...Le.items),null!=Le.nextPageToken&&(yield hs(z,W,Le.nextPageToken))})).apply(this,arguments)}function Ls(z,W){null!=W&&"number"==typeof W.maxResults&&On("options.maxResults",1,1e3,W.maxResults);const fe=W||{},Ie=ai(z.storage,z._location,"/",fe.pageToken,fe.maxResults);return z.storage.makeRequestWithTokens(Ie,di)}function Vi(z){z._throwIfRoot("getDownloadURL");const W=function ms(z,W,fe){const Le=li(W.fullServerUrl(),z.host,z._protocol),Qt=z.maxOperationRetryTime,Vn=new Vt(Le,"GET",function ar(z,W){return function fe(Ie,Le){const It=un(z,Le,W);return Dt(null!==It),function Rn(z,W,fe,Ie){const Le=Pe(W);if(null===Le||!wn(Le.downloadTokens))return null;const It=Le.downloadTokens;if(0===It.length)return null;const Qt=encodeURIComponent;return It.split(",").map(cr=>{const mi=z.fullPath;return li("/b/"+Qt(z.bucket)+"/o/"+Qt(mi),fe,Ie)+Xi({alt:"media",token:cr})})[0]}(It,Le,z.host,z._protocol)}}(z,fe),Qt);return Vn.errorHandler=vr(W),Vn}(z.storage,z._location,dt());return z.storage.makeRequestWithTokens(W,di).then(fe=>{if(null===fe)throw function Qe(){return new it(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return fe})}function Gi(z,W){const fe=function he(z,W){const fe=W.split("/").filter(Ie=>Ie.length>0).join("/");return 0===z.length?fe:z+"/"+fe}(z._location.path,W),Ie=new cn(z._location.bucket,fe);return new os(z.storage,Ie)}function Uo(z,W){if(z instanceof qs){const fe=z;if(null==fe._bucket)throw function Xn(){return new it(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dn+"' property when initializing the app?")}();const Ie=new os(fe,fe._bucket);return null!=W?Uo(Ie,W):Ie}return void 0!==W?Gi(z,W):z}function so(z,W){if(W&&function Pa(z){return/^[A-Za-z]+:\/\//.test(z)}(W)){if(z instanceof qs)return function ri(z,W){return new os(z,W)}(z,W);throw De("To use ref(service, url), the first argument must be a Storage instance.")}return Uo(z,W)}function Ss(z,W){const fe=null==W?void 0:W[dn];return null==fe?null:cn.makeFromBucketSpec(fe,z)}class qs{constructor(W,fe,Ie,Le,It){this.app=W,this._authProvider=fe,this._appCheckProvider=Ie,this._url=Le,this._firebaseVersion=It,this._bucket=null,this._host=Ft,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Le?cn.makeFromBucketSpec(Le,this._host):Ss(this._host,this.app.options)}get host(){return this._host}set host(W){this._host=W,this._bucket=null!=this._url?cn.makeFromBucketSpec(this._url,W):Ss(W,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(W){On("time",0,Number.POSITIVE_INFINITY,W),this._maxUploadRetryTime=W}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(W){On("time",0,Number.POSITIVE_INFINITY,W),this._maxOperationRetryTime=W}_getAuthToken(){var W=this;return(0,ft.Z)(function*(){if(W._overrideAuthToken)return W._overrideAuthToken;const fe=W._authProvider.getImmediate({optional:!0});if(fe){const Ie=yield fe.getToken();if(null!==Ie)return Ie.accessToken}return null})()}_getAppCheckToken(){var W=this;return(0,ft.Z)(function*(){const fe=W._appCheckProvider.getImmediate({optional:!0});return fe?(yield fe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(W=>W.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(W){return new os(this,W)}_makeRequest(W,fe,Ie,Le,It=!0){if(this._deleted)return new Sn(Ee());{const Qt=function er(z,W,fe,Ie,Le,It,Qt=!0){const Vn=Xi(z.urlParams),xn=z.url+Vn,cr=Object.assign({},z.headers);return function nn(z,W){W&&(z["X-Firebase-GMPID"]=W)}(cr,W),function At(z,W){null!==W&&W.length>0&&(z.Authorization="Firebase "+W)}(cr,fe),function Wt(z,W){z["X-Firebase-Storage-Version"]="webjs/"+(null!=W?W:"AppManager")}(cr,It),function Ur(z,W){null!==W&&(z["X-Firebase-AppCheck"]=W)}(cr,Ie),new ze(xn,z.method,cr,z.body,z.successCodes,z.additionalRetryCodes,z.handler,z.errorHandler,z.timeout,z.progressCallback,Le,Qt)}(W,this._appId,Ie,Le,fe,this._firebaseVersion,It);return this._requests.add(Qt),Qt.getPromise().then(()=>this._requests.delete(Qt),()=>this._requests.delete(Qt)),Qt}}makeRequestWithTokens(W,fe){var Ie=this;return(0,ft.Z)(function*(){const[Le,It]=yield Promise.all([Ie._getAuthToken(),Ie._getAppCheckToken()]);return Ie._makeRequest(W,fe,Le,It).getPromise()})()}}const ys="@firebase/storage";function Ts(z,W){return so(z=(0,Bt.m9)(z),W)}function ce(z,{instanceIdentifier:W}){const fe=z.getProvider("app").getImmediate(),Ie=z.getProvider("auth-internal"),Le=z.getProvider("app-check-internal");return new qs(fe,Ie,Le,W,ht.SDK_VERSION)}!function Oe(){(0,ht._registerComponent)(new mt.wA("storage",ce,"PUBLIC").setMultipleInstances(!0)),(0,ht.registerVersion)(ys,"0.11.2",""),(0,ht.registerVersion)(ys,"0.11.2","esm2017")}();class Rt{constructor(W,fe,Ie){this._delegate=W,this.task=fe,this.ref=Ie}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class jt{constructor(W,fe){this._delegate=W,this._ref=fe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Rt(this._delegate.snapshot,this,this._ref)}then(W,fe){return this._delegate.then(Ie=>{if(W)return W(new Rt(Ie,this,this._ref))},fe)}on(W,fe,Ie,Le){let It;return fe&&(It="function"==typeof fe?Qt=>fe(new Rt(Qt,this,this._ref)):{next:fe.next?Qt=>fe.next(new Rt(Qt,this,this._ref)):void 0,complete:fe.complete||void 0,error:fe.error||void 0}),this._delegate.on(W,It,Ie||void 0,Le||void 0)}}class bn{constructor(W,fe){this._delegate=W,this._service=fe}get prefixes(){return this._delegate.prefixes.map(W=>new jr(W,this._service))}get items(){return this._delegate.items.map(W=>new jr(W,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jr{constructor(W,fe){this._delegate=W,this.storage=fe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(W){const fe=function js(z,W){return Gi(z,W)}(this._delegate,W);return new jr(fe,this.storage)}get root(){return new jr(this._delegate.root,this.storage)}get parent(){const W=this._delegate.parent;return null==W?null:new jr(W,this.storage)}put(W,fe){return this._throwIfRoot("put"),new jt(function Bs(z,W,fe){return function ca(z,W,fe){return z._throwIfRoot("uploadBytesResumable"),new Fs(z,new zr(W),fe)}(z=(0,Bt.m9)(z),W,fe)}(this._delegate,W,fe),this)}putString(W,fe=Yt.RAW,Ie){this._throwIfRoot("putString");const Le=lr(fe,W),It=Object.assign({},Ie);return null==It.contentType&&null!=Le.contentType&&(It.contentType=Le.contentType),new jt(new Fs(this._delegate,new zr(Le.data,!0),It),this)}listAll(){return function Zs(z){return function Vo(z){const W={prefixes:[],items:[]};return hs(z,W).then(()=>W)}(z=(0,Bt.m9)(z))}(this._delegate).then(W=>new bn(W,this.storage))}list(W){return function Eo(z,W){return Ls(z=(0,Bt.m9)(z),W)}(this._delegate,W||void 0).then(fe=>new bn(fe,this.storage))}getMetadata(){return function Is(z){return function ro(z){z._throwIfRoot("getMetadata");const W=Br(z.storage,z._location,dt());return z.storage.makeRequestWithTokens(W,di)}(z=(0,Bt.m9)(z))}(this._delegate)}updateMetadata(W){return function ii(z,W){return function io(z,W){z._throwIfRoot("updateMetadata");const fe=function dr(z,W,fe,Ie){const It=li(W.fullServerUrl(),z.host,z._protocol),Vn=$n(fe,Ie),cr=z.maxOperationRetryTime,Gn=new Vt(It,"PATCH",sn(z,Ie),cr);return Gn.headers={"Content-Type":"application/json; charset=utf-8"},Gn.body=Vn,Gn.errorHandler=vr(W),Gn}(z.storage,z._location,W,dt());return z.storage.makeRequestWithTokens(fe,di)}(z=(0,Bt.m9)(z),W)}(this._delegate,W)}getDownloadURL(){return function Kr(z){return Vi(z=(0,Bt.m9)(z))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ts(z){return function Vs(z){z._throwIfRoot("deleteObject");const W=function zi(z,W){const Ie=li(W.fullServerUrl(),z.host,z._protocol),Vn=new Vt(Ie,"DELETE",function Qt(xn,cr){},z.maxOperationRetryTime);return Vn.successCodes=[200,204],Vn.errorHandler=vr(W),Vn}(z.storage,z._location);return z.storage.makeRequestWithTokens(W,di)}(z=(0,Bt.m9)(z))}(this._delegate)}_throwIfRoot(W){if(""===this._delegate._location.path)throw xe(W)}}class Pr{constructor(W,fe){this.app=W,this._delegate=fe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(W){if(gr(W))throw De("ref() expected a child path but got a URL, use refFromURL instead.");return new jr(Ts(this._delegate,W),this)}refFromURL(W){if(!gr(W))throw De("refFromURL() expected a full URL but got a child path, use ref() instead.");try{cn.makeFromUrl(W,this._delegate.host)}catch(fe){throw De("refFromUrl() expected a valid full URL but got an invalid one.")}return new jr(Ts(this._delegate,W),this)}setMaxUploadRetryTime(W){this._delegate.maxUploadRetryTime=W}setMaxOperationRetryTime(W){this._delegate.maxOperationRetryTime=W}useEmulator(W,fe,Ie={}){!function F(z,W,fe,Ie={}){!function As(z,W,fe,Ie={}){z.host=`${W}:${fe}`,z._protocol="http";const{mockUserToken:Le}=Ie;Le&&(z._overrideAuthToken="string"==typeof Le?Le:(0,Bt.Sg)(Le,z.app.options.projectId))}(z,W,fe,Ie)}(this._delegate,W,fe,Ie)}}function gr(z){return/^[A-Za-z]+:\/\//.test(z)}function pi(z,{instanceIdentifier:W}){const fe=z.getProvider("app-compat").getImmediate(),Ie=z.getProvider("storage").getImmediate({identifier:W});return new Pr(fe,Ie)}!function oo(z){const W={TaskState:rt,TaskEvent:Ze,StringFormat:Yt,Storage:Pr,Reference:jr};z.INTERNAL.registerComponent(new mt.wA("storage-compat",pi,"PUBLIC").setServiceProps(W).setMultipleInstances(!0)),z.registerVersion("@firebase/storage-compat","0.3.2")}(Lt.Z);var Ni=$(6215),Bn=$(9260);function Mo(z){const W=function ns(z){return new y.y(W=>{const fe=Qt=>W.next(Qt);fe(z.snapshot);const It=z.on("state_changed",fe);return z.then(Qt=>{fe(Qt),W.complete()},Qt=>{fe(z.snapshot),(Qt=>{W.error(Qt)})(Qt)}),function(){It()}}).pipe(function Je(z,W=ie.z){return(0,Ue.e)((fe,Ie)=>{let Le=null,It=null,Qt=null;const Vn=()=>{if(Le){Le.unsubscribe(),Le=null;const cr=It;It=null,Ie.next(cr)}};function xn(){const cr=Qt+z,Gn=W.now();if(Gn<cr)return Le=this.schedule(void 0,cr-Gn),void Ie.add(Le);Vn()}fe.subscribe((0,Ke.x)(Ie,cr=>{It=cr,Qt=W.now(),Le||(Le=W.schedule(xn,z),Ie.add(Le))},()=>{Vn(),Ie.complete()},void 0,()=>{It=Le=null}))})}(0))}(z);return{task:z,then:z.then.bind(z),catch:z.catch.bind(z),pause:z.pause.bind(z),cancel:z.cancel.bind(z),resume:z.resume.bind(z),snapshotChanges:()=>W,percentageChanges:()=>W.pipe((0,Ge.U)(fe=>fe.bytesTransferred/fe.totalBytes*100))}}function ao(z){return{getDownloadURL:()=>(0,B.of)(void 0).pipe(be.fc,(0,at.w)(()=>z.getDownloadURL()),be.iC),getMetadata:()=>(0,B.of)(void 0).pipe(be.fc,(0,at.w)(()=>z.getMetadata()),be.iC),delete:()=>(0,X.D)(z.delete()),child:W=>ao(z.child(W)),updateMetadata:W=>(0,X.D)(z.updateMetadata(W)),put:(W,fe)=>Mo(z.put(W,fe)),putString:(W,fe,Ie)=>Mo(z.putString(W,fe,Ie)),list:W=>(0,X.D)(z.list(W)),listAll:()=>(0,X.D)(z.listAll())}}const jo=new Ce.OlP("angularfire2.storageBucket"),K=new Ce.OlP("angularfire2.storage.maxUploadRetryTime"),V=new Ce.OlP("angularfire2.storage.maxOperationRetryTime"),O=new Ce.OlP("angularfire2.storage.use-emulator");let ue=(()=>{class z{constructor(fe,Ie,Le,It,Qt,Vn,xn,cr,Gn,mi){const Di=(0,tt.on)(fe,Qt,Ie);this.storage=(0,tt.cc)(`${Di.name}.storage.${Le}`,"AngularFireStorage",Di.name,()=>{const Ti=Qt.runOutsideAngular(()=>Di.storage(Le||void 0)),$r=Gn;return $r&&Ti.useEmulator(...$r),xn&&Ti.setMaxUploadRetryTime(xn),cr&&Ti.setMaxOperationRetryTime(cr),Ti},[xn,cr])}ref(fe){return ao(this.storage.ref(fe))}refFromURL(fe){return ao(this.storage.refFromURL(fe))}upload(fe,Ie,Le){return ao(this.storage.ref(fe)).put(Ie,Le)}}return z.\u0275fac=function(fe){return new(fe||z)(Ce.LFG(tt.Dh),Ce.LFG(tt.xv,8),Ce.LFG(jo,8),Ce.LFG(Ce.Lbi),Ce.LFG(Ce.R0b),Ce.LFG(be.HU),Ce.LFG(K,8),Ce.LFG(V,8),Ce.LFG(O,8),Ce.LFG(Ni.nm,8))},z.\u0275prov=Ce.Yz7({token:z,factory:z.\u0275fac,providedIn:"any"}),z})(),Kt=(()=>{class z{}return z.\u0275fac=function(fe){return new(fe||z)},z.\u0275mod=Ce.oAB({type:z}),z.\u0275inj=Ce.cJS({}),z})(),gi=(()=>{class z{constructor(){Bn.Z.registerVersion("angularfire",be.q4.full,"gcs-compat")}}return z.\u0275fac=function(fe){return new(fe||z)},z.\u0275mod=Ce.oAB({type:z}),z.\u0275inj=Ce.cJS({providers:[ue],imports:[Kt]}),z})()},2011:(fn,ct,$)=>{$.d(ct,{Dh:()=>Ge,GT:()=>Ke,cc:()=>ft,hO:()=>Lt,on:()=>be,pX:()=>Ue,xv:()=>at});var y=$(5e3),B=$(9260),X=$(4976);fn=$.hmd(fn);const ie=["ngOnDestroy"],Ue=(Ft,dn,Xt,we={})=>new Proxy(Ft,{get:(Me,it)=>Xt.runOutsideAngular(()=>{var Et;if(Ft[it])return(null===(Et=null==we?void 0:we.spy)||void 0===Et?void 0:Et.get)&&we.spy.get(it,Ft[it]),Ft[it];if(ie.indexOf(it)>-1)return()=>{};const pt=dn.toPromise().then(et=>{const Ut=et&&et[it];return"function"==typeof Ut?Ut.bind(et):Ut&&Ut.then?Ut.then(bt=>Xt.run(()=>bt)):Xt.run(()=>Ut)});return new Proxy(()=>{},{get:(et,Ut)=>pt[Ut],apply:(et,Ut,bt)=>pt.then(Fn=>{var Ht;const Nn=Fn&&Fn(...bt);return(null===(Ht=null==we?void 0:we.spy)||void 0===Ht?void 0:Ht.apply)&&we.spy.apply(it,bt,Nn),Nn})})})}),Ke=(Ft,dn)=>{dn.forEach(Xt=>{Object.getOwnPropertyNames(Xt.prototype||Xt).forEach(we=>{Object.defineProperty(Ft.prototype,we,Object.getOwnPropertyDescriptor(Xt.prototype||Xt,we))})})};class Je{constructor(dn){return dn}}const Ge=new y.OlP("angularfire2.app.options"),at=new y.OlP("angularfire2.app.name");function be(Ft,dn,Xt){const Me="object"==typeof Xt&&Xt||{};Me.name=Me.name||"string"==typeof Xt&&Xt||"[DEFAULT]";const Et=B.Z.apps.filter(pt=>pt&&pt.name===Me.name)[0]||dn.runOutsideAngular(()=>B.Z.initializeApp(Ft,Me));try{JSON.stringify(Ft)!==JSON.stringify(Et.options)&&Ce("error",`${Et.name} Firebase App already initialized with different options${fn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(pt){}return new Je(Et)}const Ce=(Ft,...dn)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Ft](...dn)},tt={provide:Je,useFactory:be,deps:[Ge,y.R0b,[new y.FiY,at]]};let Lt=(()=>{class Ft{constructor(Xt){B.Z.registerVersion("angularfire",X.q4.full,"core"),B.Z.registerVersion("angularfire",X.q4.full,"app-compat"),B.Z.registerVersion("angular",y.q4F.full,Xt.toString())}static initializeApp(Xt,we){return{ngModule:Ft,providers:[{provide:Ge,useValue:Xt},{provide:at,useValue:we}]}}}return Ft.\u0275fac=function(Xt){return new(Xt||Ft)(y.LFG(y.Lbi))},Ft.\u0275mod=y.oAB({type:Ft}),Ft.\u0275inj=y.cJS({providers:[tt]}),Ft})();function ft(Ft,dn,Xt,we,Me){const[,it,Et]=globalThis.\u0275AngularfireInstanceCache.find(pt=>pt[0]===Ft)||[];if(it)return function ht(Ft,dn){try{return Ft.toString()===dn.toString()}catch(Xt){return Ft===dn}}(Me,Et)||(mt("error",`${dn} was already initialized on the ${Xt} Firebase App with different settings.${Bt?" You may need to reload as Firebase is not HMR aware.":""}`),mt("warn",{is:Me,was:Et})),it;{const pt=we();return globalThis.\u0275AngularfireInstanceCache.push([Ft,pt,Me]),pt}}const Bt=!!fn.hot,mt=(Ft,...dn)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Ft](...dn)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(fn,ct,$)=>{$.d(ct,{q4:()=>Er,iC:()=>ws,fc:()=>Dr,HU:()=>Sa,vb:()=>eo,JM:()=>yi,u3:()=>ko});var y=$(5e3),B=$(259),X=$(5861),ie=$(6881),Ue=$(2090),Ke=$(4859),Je=$(1877);let at,be;const Lt=new WeakMap,ft=new WeakMap,ht=new WeakMap,Bt=new WeakMap,mt=new WeakMap;let Xt={get(b,P,J){if(b instanceof IDBTransaction){if("done"===P)return ft.get(b);if("objectStoreNames"===P)return b.objectStoreNames||ht.get(b);if("store"===P)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Et(b[P])},set:(b,P,J)=>(b[P]=J,!0),has:(b,P)=>b instanceof IDBTransaction&&("done"===P||"store"===P)||P in b};function it(b){return"function"==typeof b?function Me(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function tt(){return be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...P){return b.apply(pt(this),P),Et(Lt.get(this))}:function(...P){return Et(b.apply(pt(this),P))}:function(P,...J){const _e=b.call(pt(this),P,...J);return ht.set(_e,P.sort?P.sort():[P]),Et(_e)}}(b):(b instanceof IDBTransaction&&function dn(b){if(ft.has(b))return;const P=new Promise((J,_e)=>{const He=()=>{b.removeEventListener("complete",ut),b.removeEventListener("error",kt),b.removeEventListener("abort",kt)},ut=()=>{J(),He()},kt=()=>{_e(b.error||new DOMException("AbortError","AbortError")),He()};b.addEventListener("complete",ut),b.addEventListener("error",kt),b.addEventListener("abort",kt)});ft.set(b,P)}(b),((b,P)=>P.some(J=>b instanceof J))(b,function Ce(){return at||(at=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,Xt):b)}function Et(b){if(b instanceof IDBRequest)return function Ft(b){const P=new Promise((J,_e)=>{const He=()=>{b.removeEventListener("success",ut),b.removeEventListener("error",kt)},ut=()=>{J(Et(b.result)),He()},kt=()=>{_e(b.error),He()};b.addEventListener("success",ut),b.addEventListener("error",kt)});return P.then(J=>{J instanceof IDBCursor&&Lt.set(J,b)}).catch(()=>{}),mt.set(P,b),P}(b);if(Bt.has(b))return Bt.get(b);const P=it(b);return P!==b&&(Bt.set(b,P),mt.set(P,b)),P}const pt=b=>mt.get(b),bt=["get","getKey","getAll","getAllKeys","count"],Fn=["put","add","delete","clear"],Ht=new Map;function Nn(b,P){if(!(b instanceof IDBDatabase)||P in b||"string"!=typeof P)return;if(Ht.get(P))return Ht.get(P);const J=P.replace(/FromIndex$/,""),_e=P!==J,He=Fn.includes(J);if(!(J in(_e?IDBIndex:IDBObjectStore).prototype)||!He&&!bt.includes(J))return;const ut=function(){var kt=(0,X.Z)(function*(mn,...vn){const Yn=this.transaction(mn,He?"readwrite":"readonly");let ei=Yn.store;return _e&&(ei=ei.index(vn.shift())),(yield Promise.all([ei[J](...vn),He&&Yn.done]))[0]});return function(vn){return kt.apply(this,arguments)}}();return Ht.set(P,ut),ut}!function we(b){Xt=b(Xt)}(b=>G_($_({},b),{get:(P,J,_e)=>Nn(P,J)||b.get(P,J,_e),has:(P,J)=>!!Nn(P,J)||b.has(P,J)}));const rn="@firebase/installations",fr="w:0.6.4",Xn="FIS_v2",Ee=new Ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xe(b){return b instanceof Ue.ZR&&b.code.includes("request-failed")}function gt({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function tn(b){return{token:b.token,requestStatus:2,expiresIn:Fr(b.expiresIn),creationTime:Date.now()}}function cn(b,P){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,X.Z)(function*(b,P){const _e=(yield P.json()).error;return Ee.create("request-failed",{requestName:b,serverCode:_e.code,serverMessage:_e.message,serverStatus:_e.status})})).apply(this,arguments)}function Wn({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function pr(b,{refreshToken:P}){const J=Wn(b);return J.append("Authorization",function wn(b){return`${Xn} ${b}`}(P)),J}function or(b){return jn.apply(this,arguments)}function jn(){return(jn=(0,X.Z)(function*(b){const P=yield b();return P.status>=500&&P.status<600?b():P})).apply(this,arguments)}function Fr(b){return Number(b.replace("s","000"))}function Jn(b,P){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,X.Z)(function*({appConfig:b,heartbeatServiceProvider:P},{fid:J}){const _e=gt(b),He=Wn(b),ut=P.getImmediate({optional:!0});if(ut){const Yn=yield ut.getHeartbeatsHeader();Yn&&He.append("x-firebase-client",Yn)}const mn={method:"POST",headers:He,body:JSON.stringify({fid:J,authVersion:Xn,appId:b.appId,sdkVersion:fr})},vn=yield or(()=>fetch(_e,mn));if(vn.ok){const Yn=yield vn.json();return{fid:Yn.fid||J,registrationStatus:2,refreshToken:Yn.refreshToken,authToken:tn(Yn.authToken)}}throw yield cn("Create Installation",vn)})).apply(this,arguments)}function On(b){return new Promise(P=>{setTimeout(P,b)})}const Xi=/^[cdef][\w-]{21}$/;function Fe(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const J=function ze(b){return function li(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Xi.test(J)?J:""}catch(b){return""}}function lt(b){return`${b.appName}!${b.appId}`}const At=new Map;function Wt(b,P){const J=lt(b);er(J,P),function Mn(b,P){const J=function Tr(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=b=>{er(b.data.key,b.data.fid)}),ci}();J&&J.postMessage({key:b,fid:P}),function Ar(){0===At.size&&ci&&(ci.close(),ci=null)}()}(J,P)}function er(b,P){const J=At.get(b);if(J)for(const _e of J)_e(P)}let ci=null;const lr="firebase-installations-store";let _r=null;function tr(){return _r||(_r=function et(b,P,{blocked:J,upgrade:_e,blocking:He,terminated:ut}={}){const kt=indexedDB.open(b,P),mn=Et(kt);return _e&&kt.addEventListener("upgradeneeded",vn=>{_e(Et(kt.result),vn.oldVersion,vn.newVersion,Et(kt.transaction))}),J&&kt.addEventListener("blocked",()=>J()),mn.then(vn=>{ut&&vn.addEventListener("close",()=>ut()),He&&vn.addEventListener("versionchange",()=>He())}).catch(()=>{}),mn}("firebase-installations-database",1,{upgrade:(b,P)=>{0===P&&b.createObjectStore(lr)}})),_r}function Wr(b,P){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,X.Z)(function*(b,P){const J=lt(b),He=(yield tr()).transaction(lr,"readwrite"),ut=He.objectStore(lr),kt=yield ut.get(J);return yield ut.put(P,J),yield He.done,(!kt||kt.fid!==P.fid)&&Wt(b,P.fid),P})).apply(this,arguments)}function fi(b){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,X.Z)(function*(b){const P=lt(b),_e=(yield tr()).transaction(lr,"readwrite");yield _e.objectStore(lr).delete(P),yield _e.done})).apply(this,arguments)}function Ri(b,P){return zr.apply(this,arguments)}function zr(){return(zr=(0,X.Z)(function*(b,P){const J=lt(b),He=(yield tr()).transaction(lr,"readwrite"),ut=He.objectStore(lr),kt=yield ut.get(J),mn=P(kt);return void 0===mn?yield ut.delete(J):yield ut.put(mn,J),yield He.done,mn&&(!kt||kt.fid!==mn.fid)&&Wt(b,mn.fid),mn})).apply(this,arguments)}function Pe(b){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,X.Z)(function*(b){let P;const J=yield Ri(b.appConfig,_e=>{const He=he(_e),ut=ge(b,He);return P=ut.registrationPromise,ut.installationEntry});return""===J.fid?{installationEntry:yield P}:{installationEntry:J,registrationPromise:P}})).apply(this,arguments)}function he(b){return zt(b||{fid:Fe(),registrationStatus:0})}function ge(b,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(Ee.create("app-offline"))};const J={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},_e=function G(b,P){return ne.apply(this,arguments)}(b,J);return{installationEntry:J,registrationPromise:_e}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:se(b)}:{installationEntry:P}}function ne(){return(ne=(0,X.Z)(function*(b,P){try{const J=yield Jn(b,P);return Wr(b.appConfig,J)}catch(J){throw xe(J)&&409===J.customData.serverCode?yield fi(b.appConfig):yield Wr(b.appConfig,{fid:P.fid,registrationStatus:0}),J}})).apply(this,arguments)}function se(b){return Se.apply(this,arguments)}function Se(){return(Se=(0,X.Z)(function*(b){let P=yield dt(b.appConfig);for(;1===P.registrationStatus;)yield On(100),P=yield dt(b.appConfig);if(0===P.registrationStatus){const{installationEntry:J,registrationPromise:_e}=yield Pe(b);return _e||J}return P})).apply(this,arguments)}function dt(b){return Ri(b,P=>{if(!P)throw Ee.create("installation-not-found");return zt(P)})}function zt(b){return function gn(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function un(b,P){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,X.Z)(function*({appConfig:b,heartbeatServiceProvider:P},J){const _e=$n(b,J),He=pr(b,J),ut=P.getImmediate({optional:!0});if(ut){const Yn=yield ut.getHeartbeatsHeader();Yn&&He.append("x-firebase-client",Yn)}const mn={method:"POST",headers:He,body:JSON.stringify({installation:{sdkVersion:fr,appId:b.appId}})},vn=yield or(()=>fetch(_e,mn));if(vn.ok)return tn(yield vn.json());throw yield cn("Generate Auth Token",vn)})).apply(this,arguments)}function $n(b,{fid:P}){return`${gt(b)}/${P}/authTokens:generate`}function Jr(b){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,X.Z)(function*(b,P=!1){let J;const _e=yield Ri(b.appConfig,ut=>{if(!Tn(ut))throw Ee.create("not-registered");const kt=ut.authToken;if(!P&&ar(kt))return ut;if(1===kt.requestStatus)return J=Tt(b,P),ut;{if(!navigator.onLine)throw Ee.create("app-offline");const mn=vr(ut);return J=Dt(b,mn),mn}});return J?yield J:_e.authToken})).apply(this,arguments)}function Tt(b,P){return yt.apply(this,arguments)}function yt(){return(yt=(0,X.Z)(function*(b,P){let J=yield Vt(b.appConfig);for(;1===J.authToken.requestStatus;)yield On(100),J=yield Vt(b.appConfig);const _e=J.authToken;return 0===_e.requestStatus?Jr(b,P):_e})).apply(this,arguments)}function Vt(b){return Ri(b,P=>{if(!Tn(P))throw Ee.create("not-registered");return function Br(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function Dt(b,P){return sn.apply(this,arguments)}function sn(){return(sn=(0,X.Z)(function*(b,P){try{const J=yield un(b,P),_e=Object.assign(Object.assign({},P),{authToken:J});return yield Wr(b.appConfig,_e),J}catch(J){if(!xe(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const _e=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield Wr(b.appConfig,_e)}else yield fi(b.appConfig);throw J}})).apply(this,arguments)}function Tn(b){return void 0!==b&&2===b.registrationStatus}function ar(b){return 2===b.requestStatus&&!function Xr(b){const P=Date.now();return P<b.creationTime||b.creationTime+b.expiresIn<P+36e5}(b)}function vr(b){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:P})}function es(){return(es=(0,X.Z)(function*(b){const P=b,{installationEntry:J,registrationPromise:_e}=yield Pe(P);return _e?_e.catch(console.error):Jr(P).catch(console.error),J.fid})).apply(this,arguments)}function dr(){return(dr=(0,X.Z)(function*(b,P=!1){const J=b;return yield zi(J),(yield Jr(J,P)).token})).apply(this,arguments)}function zi(b){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,X.Z)(function*(b){const{registrationPromise:P}=yield Pe(b);P&&(yield P)})).apply(this,arguments)}function Ze(b){return Ee.create("missing-app-config-values",{valueName:b})}const rt="installations",Ot=b=>{const P=b.getProvider("app").getImmediate(),J=function Xe(b){if(!b||!b.options)throw Ze("App Configuration");if(!b.name)throw Ze("App Name");const P=["projectId","apiKey","appId"];for(const J of P)if(!b.options[J])throw Ze(J);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(P);return{app:P,appConfig:J,heartbeatServiceProvider:(0,ie._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},In=b=>{const P=b.getProvider("app").getImmediate(),J=(0,ie._getProvider)(P,rt).getImmediate();return{getId:()=>function ai(b){return es.apply(this,arguments)}(J),getToken:He=>function ms(b){return dr.apply(this,arguments)}(J,He)}};(function Lr(){(0,ie._registerComponent)(new Ke.wA(rt,Ot,"PUBLIC")),(0,ie._registerComponent)(new Ke.wA("installations-internal",In,"PRIVATE"))})(),(0,ie.registerVersion)(rn,"0.6.4"),(0,ie.registerVersion)(rn,"0.6.4","esm2017");const hr="@firebase/remote-config",Wi=new Ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Uo{constructor(P,J,_e,He){this.client=P,this.storage=J,this.storageCache=_e,this.logger=He}isCachedDataFresh(P,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const _e=Date.now()-J,He=_e<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${_e}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${He}.`),He}fetch(P){var J=this;return(0,X.Z)(function*(){const[_e,He]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(He&&J.isCachedDataFresh(P.cacheMaxAgeMillis,_e))return He;P.eTag=He&&He.eTag;const ut=yield J.client.fetch(P),kt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ut.status&&kt.push(J.storage.setLastSuccessfulFetchResponse(ut)),yield Promise.all(kt),ut})()}}function so(b=navigator){return b.languages&&b.languages[0]||b.language}class Ss{constructor(P,J,_e,He,ut,kt){this.firebaseInstallations=P,this.sdkVersion=J,this.namespace=_e,this.projectId=He,this.apiKey=ut,this.appId=kt}fetch(P){var J=this;return(0,X.Z)(function*(){const[_e,He]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,mn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},vn={sdk_version:J.sdkVersion,app_instance_id:_e,app_instance_id_token:He,app_id:J.appId,language_code:so()},Yn={method:"POST",headers:mn,body:JSON.stringify(vn)},ei=fetch(kt,Yn),Nr=new Promise((Do,ja)=>{P.signal.addEventListener(()=>{const ol=new Error("The operation was aborted.");ol.name="AbortError",ja(ol)})});let bo;try{yield Promise.race([ei,Nr]),bo=yield ei}catch(Do){let ja="fetch-client-network";throw"AbortError"===(null==Do?void 0:Do.name)&&(ja="fetch-timeout"),Wi.create(ja,{originalErrorMessage:null==Do?void 0:Do.message})}let co=bo.status;const Ds=bo.headers.get("ETag")||void 0;let Iu,Hi;if(200===bo.status){let Do;try{Do=yield bo.json()}catch(ja){throw Wi.create("fetch-client-parse",{originalErrorMessage:null==ja?void 0:ja.message})}Iu=Do.entries,Hi=Do.state}if("INSTANCE_STATE_UNSPECIFIED"===Hi?co=500:"NO_CHANGE"===Hi?co=304:("NO_TEMPLATE"===Hi||"EMPTY_CONFIG"===Hi)&&(Iu={}),304!==co&&200!==co)throw Wi.create("fetch-status",{httpStatus:co});return{status:co,eTag:Ds,config:Iu}})()}}class ys{constructor(P,J){this.client=P,this.storage=J}fetch(P){var J=this;return(0,X.Z)(function*(){const _e=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(P,_e)})()}attemptFetch(P,J){var _e=this;return(0,X.Z)(function*(He,{throttleEndTimeMillis:ut,backoffCount:kt}){yield function As(b,P){return new Promise((J,_e)=>{const He=Math.max(P-Date.now(),0),ut=setTimeout(J,He);b.addEventListener(()=>{clearTimeout(ut),_e(Wi.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(He.signal,ut);try{const mn=yield _e.client.fetch(He);return yield _e.storage.deleteThrottleMetadata(),mn}catch(mn){if(!function qs(b){if(!(b instanceof Ue.ZR&&b.customData))return!1;const P=Number(b.customData.httpStatus);return 429===P||500===P||503===P||504===P}(mn))throw mn;const vn={throttleEndTimeMillis:Date.now()+(0,Ue.$s)(kt),backoffCount:kt+1};return yield _e.storage.setThrottleMetadata(vn),_e.attemptFetch(He,vn)}}).apply(this,arguments)}}class Bo{constructor(P,J,_e,He,ut){this.app=P,this._client=J,this._storageCache=_e,this._storage=He,this._logger=ut,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Us(b,P){const J=b.target.error||void 0;return Wi.create(P,{originalErrorMessage:J&&(null==J?void 0:J.message)})}const Ki="app_namespace_store";class Eo{constructor(P,J,_e,He=function ii(){return new Promise((b,P)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=_e=>{P(Us(_e,"storage-open"))},J.onsuccess=_e=>{b(_e.target.result)},J.onupgradeneeded=_e=>{0===_e.oldVersion&&_e.target.result.createObjectStore(Ki,{keyPath:"compositeKey"})}}catch(J){P(Wi.create("storage-open",{originalErrorMessage:null==J?void 0:J.message}))}})}()){this.appId=P,this.appName=J,this.namespace=_e,this.openDbPromise=He}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var J=this;return(0,X.Z)(function*(){const _e=yield J.openDbPromise;return new Promise((He,ut)=>{const mn=_e.transaction([Ki],"readonly").objectStore(Ki),vn=J.createCompositeKey(P);try{const Yn=mn.get(vn);Yn.onerror=ei=>{ut(Us(ei,"storage-get"))},Yn.onsuccess=ei=>{const Nr=ei.target.result;He(Nr?Nr.value:void 0)}}catch(Yn){ut(Wi.create("storage-get",{originalErrorMessage:null==Yn?void 0:Yn.message}))}})})()}set(P,J){var _e=this;return(0,X.Z)(function*(){const He=yield _e.openDbPromise;return new Promise((ut,kt)=>{const vn=He.transaction([Ki],"readwrite").objectStore(Ki),Yn=_e.createCompositeKey(P);try{const ei=vn.put({compositeKey:Yn,value:J});ei.onerror=Nr=>{kt(Us(Nr,"storage-set"))},ei.onsuccess=()=>{ut()}}catch(ei){kt(Wi.create("storage-set",{originalErrorMessage:null==ei?void 0:ei.message}))}})})()}delete(P){var J=this;return(0,X.Z)(function*(){const _e=yield J.openDbPromise;return new Promise((He,ut)=>{const mn=_e.transaction([Ki],"readwrite").objectStore(Ki),vn=J.createCompositeKey(P);try{const Yn=mn.delete(vn);Yn.onerror=ei=>{ut(Us(ei,"storage-delete"))},Yn.onsuccess=()=>{He()}}catch(Yn){ut(Wi.create("storage-delete",{originalErrorMessage:null==Yn?void 0:Yn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class Zs{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,X.Z)(function*(){const J=P.storage.getLastFetchStatus(),_e=P.storage.getLastSuccessfulFetchTimestampMillis(),He=P.storage.getActiveConfig(),ut=yield J;ut&&(P.lastFetchStatus=ut);const kt=yield _e;kt&&(P.lastSuccessfulFetchTimestampMillis=kt);const mn=yield He;mn&&(P.activeConfig=mn)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function js(){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,X.Z)(function*(){if(!(0,Ue.hl)())return!1;try{return yield(0,Ue.eu)()}catch(b){return!1}})).apply(this,arguments)}let ae,j;!function Kr(){(0,ie._registerComponent)(new Ke.wA("remote-config",function b(P,{instanceIdentifier:J}){const _e=P.getProvider("app").getImmediate(),He=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Wi.create("registration-window");if(!(0,Ue.hl)())throw Wi.create("indexed-db-unavailable");const{projectId:ut,apiKey:kt,appId:mn}=_e.options;if(!ut)throw Wi.create("registration-project-id");if(!kt)throw Wi.create("registration-api-key");if(!mn)throw Wi.create("registration-app-id");const vn=new Eo(mn,_e.name,J=J||"firebase"),Yn=new Zs(vn),ei=new Je.Yd(hr);ei.logLevel=Je.in.ERROR;const Nr=new Ss(He,ie.SDK_VERSION,J,ut,kt,mn),bo=new ys(Nr,vn),co=new Uo(bo,vn,Yn,ei),Ds=new Bo(_e,co,Yn,vn,ei);return function hs(b){const P=(0,Ue.m9)(b);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Ds),Ds},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(hr,"0.4.4"),(0,ie.registerVersion)(hr,"0.4.4","esm2017")}();const Rt=new WeakMap,jt=new WeakMap,bn=new WeakMap,jr=new WeakMap,Pr=new WeakMap;let Ii={get(b,P,J){if(b instanceof IDBTransaction){if("done"===P)return jt.get(b);if("objectStoreNames"===P)return b.objectStoreNames||bn.get(b);if("store"===P)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Ni(b[P])},set:(b,P,J)=>(b[P]=J,!0),has:(b,P)=>b instanceof IDBTransaction&&("done"===P||"store"===P)||P in b};function oo(b){return"function"==typeof b?function pi(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Oe(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...P){return b.apply(Bn(this),P),Ni(Rt.get(this))}:function(...P){return Ni(b.apply(Bn(this),P))}:function(P,...J){const _e=b.call(Bn(this),P,...J);return bn.set(_e,P.sort?P.sort():[P]),Ni(_e)}}(b):(b instanceof IDBTransaction&&function Vr(b){if(jt.has(b))return;const P=new Promise((J,_e)=>{const He=()=>{b.removeEventListener("complete",ut),b.removeEventListener("error",kt),b.removeEventListener("abort",kt)},ut=()=>{J(),He()},kt=()=>{_e(b.error||new DOMException("AbortError","AbortError")),He()};b.addEventListener("complete",ut),b.addEventListener("error",kt),b.addEventListener("abort",kt)});jt.set(b,P)}(b),((b,P)=>P.some(J=>b instanceof J))(b,function ce(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,Ii):b)}function Ni(b){if(b instanceof IDBRequest)return function gr(b){const P=new Promise((J,_e)=>{const He=()=>{b.removeEventListener("success",ut),b.removeEventListener("error",kt)},ut=()=>{J(Ni(b.result)),He()},kt=()=>{_e(b.error),He()};b.addEventListener("success",ut),b.addEventListener("error",kt)});return P.then(J=>{J instanceof IDBCursor&&Rt.set(J,b)}).catch(()=>{}),Pr.set(P,b),P}(b);if(jr.has(b))return jr.get(b);const P=oo(b);return P!==b&&(jr.set(b,P),Pr.set(P,b)),P}const Bn=b=>Pr.get(b);function ns(b,P,{blocked:J,upgrade:_e,blocking:He,terminated:ut}={}){const kt=indexedDB.open(b,P),mn=Ni(kt);return _e&&kt.addEventListener("upgradeneeded",vn=>{_e(Ni(kt.result),vn.oldVersion,vn.newVersion,Ni(kt.transaction))}),J&&kt.addEventListener("blocked",()=>J()),mn.then(vn=>{ut&&vn.addEventListener("close",()=>ut()),He&&vn.addEventListener("versionchange",()=>He())}).catch(()=>{}),mn}function Mo(b,{blocked:P}={}){const J=indexedDB.deleteDatabase(b);return P&&J.addEventListener("blocked",()=>P()),Ni(J).then(()=>{})}const ao=["get","getKey","getAll","getAllKeys","count"],jo=["put","add","delete","clear"],K=new Map;function V(b,P){if(!(b instanceof IDBDatabase)||P in b||"string"!=typeof P)return;if(K.get(P))return K.get(P);const J=P.replace(/FromIndex$/,""),_e=P!==J,He=jo.includes(J);if(!(J in(_e?IDBIndex:IDBObjectStore).prototype)||!He&&!ao.includes(J))return;const ut=function(){var kt=(0,X.Z)(function*(mn,...vn){const Yn=this.transaction(mn,He?"readwrite":"readonly");let ei=Yn.store;return _e&&(ei=ei.index(vn.shift())),(yield Promise.all([ei[J](...vn),He&&Yn.done]))[0]});return function(vn){return kt.apply(this,arguments)}}();return K.set(P,ut),ut}!function bi(b){Ii=b(Ii)}(b=>G_($_({},b),{get:(P,J,_e)=>V(P,J)||b.get(P,J,_e),has:(P,J)=>!!V(P,J)||b.has(P,J)}));const O="/firebase-messaging-sw.js",ue="/firebase-cloud-messaging-push-scope",ke="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gi="google.c.a.c_id",z="google.c.a.c_l",W="google.c.a.ts",fe="google.c.a.e";var Le=(()=>{return(b=Le||(Le={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Le;var b})();function It(b){const P=new Uint8Array(b);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qt(b){const J=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_e=atob(J),He=new Uint8Array(_e.length);for(let ut=0;ut<_e.length;++ut)He[ut]=_e.charCodeAt(ut);return He}const Vn="fcm_token_details_db",cr="fcm_token_object_Store";function Gn(b){return mi.apply(this,arguments)}function mi(){return mi=(0,X.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ut=>ut.name).includes(Vn))return null;let P=null;return(yield ns(Vn,5,{upgrade:(_e=(0,X.Z)(function*(He,ut,kt,mn){var vn;if(ut<2||!He.objectStoreNames.contains(cr))return;const Yn=mn.objectStore(cr),ei=yield Yn.index("fcmSenderId").get(b);if(yield Yn.clear(),ei)if(2===ut){const Nr=ei;if(!Nr.auth||!Nr.p256dh||!Nr.endpoint)return;P={token:Nr.fcmToken,createTime:null!==(vn=Nr.createTime)&&void 0!==vn?vn:Date.now(),subscriptionOptions:{auth:Nr.auth,p256dh:Nr.p256dh,endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:"string"==typeof Nr.vapidKey?Nr.vapidKey:It(Nr.vapidKey)}}}else if(3===ut){const Nr=ei;P={token:Nr.fcmToken,createTime:Nr.createTime,subscriptionOptions:{auth:It(Nr.auth),p256dh:It(Nr.p256dh),endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:It(Nr.vapidKey)}}}else if(4===ut){const Nr=ei;P={token:Nr.fcmToken,createTime:Nr.createTime,subscriptionOptions:{auth:It(Nr.auth),p256dh:It(Nr.p256dh),endpoint:Nr.endpoint,swScope:Nr.swScope,vapidKey:It(Nr.vapidKey)}}}}),function(ut,kt,mn,vn){return _e.apply(this,arguments)})})).close(),yield Mo(Vn),yield Mo("fcm_vapid_details_db"),yield Mo("undefined"),Di(P)?P:null;var _e}),mi.apply(this,arguments)}function Di(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:P}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const qi="firebase-messaging-store";let Si=null;function Rs(){return Si||(Si=ns("firebase-messaging-database",1,{upgrade:(b,P)=>{0===P&&b.createObjectStore(qi)}})),Si}function as(b){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,X.Z)(function*(b){const P=$s(b),_e=yield(yield Rs()).transaction(qi).objectStore(qi).get(P);if(_e)return _e;{const He=yield Gn(b.appConfig.senderId);if(He)return yield rs(b,He),He}})).apply(this,arguments)}function rs(b,P){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,X.Z)(function*(b,P){const J=$s(b),He=(yield Rs()).transaction(qi,"readwrite");return yield He.objectStore(qi).put(P,J),yield He.done,P})).apply(this,arguments)}function xo(b){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,X.Z)(function*(b){const P=$s(b),_e=(yield Rs()).transaction(qi,"readwrite");yield _e.objectStore(qi).delete(P),yield _e.done})).apply(this,arguments)}function $s({appConfig:b}){return b.appId}const _s=new Ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function da(b,P){return Po.apply(this,arguments)}function Po(){return(Po=(0,X.Z)(function*(b,P){const J=yield Ys(b),_e=$o(P),He={method:"POST",headers:J,body:JSON.stringify(_e)};let ut;try{ut=yield(yield fetch(Oi(b.appConfig),He)).json()}catch(kt){throw _s.create("token-subscribe-failed",{errorInfo:null==kt?void 0:kt.toString()})}if(ut.error)throw _s.create("token-subscribe-failed",{errorInfo:ut.error.message});if(!ut.token)throw _s.create("token-subscribe-no-token");return ut.token})).apply(this,arguments)}function $a(b,P){return ea.apply(this,arguments)}function ea(){return(ea=(0,X.Z)(function*(b,P){const J=yield Ys(b),_e=$o(P.subscriptionOptions),He={method:"PATCH",headers:J,body:JSON.stringify(_e)};let ut;try{ut=yield(yield fetch(`${Oi(b.appConfig)}/${P.token}`,He)).json()}catch(kt){throw _s.create("token-update-failed",{errorInfo:null==kt?void 0:kt.toString()})}if(ut.error)throw _s.create("token-update-failed",{errorInfo:ut.error.message});if(!ut.token)throw _s.create("token-update-no-token");return ut.token})).apply(this,arguments)}function Mi(b,P){return uo.apply(this,arguments)}function uo(){return(uo=(0,X.Z)(function*(b,P){const _e={method:"DELETE",headers:yield Ys(b)};try{const ut=yield(yield fetch(`${Oi(b.appConfig)}/${P}`,_e)).json();if(ut.error)throw _s.create("token-unsubscribe-failed",{errorInfo:ut.error.message})}catch(He){throw _s.create("token-unsubscribe-failed",{errorInfo:null==He?void 0:He.toString()})}})).apply(this,arguments)}function Oi({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Ys(b){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,X.Z)(function*({appConfig:b,installations:P}){const J=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function $o({p256dh:b,auth:P,endpoint:J,vapidKey:_e}){const He={web:{endpoint:J,auth:P,p256dh:b}};return _e!==ke&&(He.web.applicationPubKey=_e),He}const Na=6048e5;function gu(b){return ta.apply(this,arguments)}function ta(){return(ta=(0,X.Z)(function*(b){const P=yield Du(b.swRegistration,b.vapidKey),J={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:P.endpoint,auth:It(P.getKey("auth")),p256dh:It(P.getKey("p256dh"))},_e=yield as(b.firebaseDependencies);if(_e){if(Go(_e.subscriptionOptions,J))return Date.now()>=_e.createTime+Na?Ms(b,{token:_e.token,createTime:Date.now(),subscriptionOptions:J}):_e.token;try{yield Mi(b.firebaseDependencies,_e.token)}catch(He){console.warn(He)}return Zi(b.firebaseDependencies,J)}return Zi(b.firebaseDependencies,J)})).apply(this,arguments)}function Ga(b){return po.apply(this,arguments)}function po(){return(po=(0,X.Z)(function*(b){const P=yield as(b.firebaseDependencies);P&&(yield Mi(b.firebaseDependencies,P.token),yield xo(b.firebaseDependencies));const J=yield b.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()})).apply(this,arguments)}function Ms(b,P){return ha.apply(this,arguments)}function ha(){return(ha=(0,X.Z)(function*(b,P){try{const J=yield $a(b.firebaseDependencies,P),_e=Object.assign(Object.assign({},P),{token:J,createTime:Date.now()});return yield rs(b.firebaseDependencies,_e),J}catch(J){throw yield Ga(b),J}})).apply(this,arguments)}function Zi(b,P){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,X.Z)(function*(b,P){const _e={token:yield da(b,P),createTime:Date.now(),subscriptionOptions:P};return yield rs(b,_e),_e.token})).apply(this,arguments)}function Du(b,P){return go.apply(this,arguments)}function go(){return(go=(0,X.Z)(function*(b,P){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qt(P)})})).apply(this,arguments)}function Go(b,P){return P.vapidKey===b.vapidKey&&P.endpoint===b.endpoint&&P.auth===b.auth&&P.p256dh===b.p256dh}function si(b){const P={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function yl(b,P){if(!P.notification)return;b.notification={};const J=P.notification.title;J&&(b.notification.title=J);const _e=P.notification.body;_e&&(b.notification.body=_e);const He=P.notification.image;He&&(b.notification.image=He);const ut=P.notification.icon;ut&&(b.notification.icon=ut)}(P,b),function Uu(b,P){!P.data||(b.data=P.data)}(P,b),function wo(b,P){var J,_e,He,ut,kt;if(!P.fcmOptions&&!(null===(J=P.notification)||void 0===J?void 0:J.click_action))return;b.fcmOptions={};const mn=null!==(He=null===(_e=P.fcmOptions)||void 0===_e?void 0:_e.link)&&void 0!==He?He:null===(ut=P.notification)||void 0===ut?void 0:ut.click_action;mn&&(b.fcmOptions.link=mn);const vn=null===(kt=P.fcmOptions)||void 0===kt?void 0:kt.analytics_label;vn&&(b.fcmOptions.analyticsLabel=vn)}(P,b),P}function Su(b){return"object"==typeof b&&!!b&&gi in b}function mu(b,P){const J=[];for(let _e=0;_e<b.length;_e++)J.push(b.charAt(_e)),_e<P.length&&J.push(P.charAt(_e));return J.join("")}function yu(b){return _s.create("missing-app-config-values",{valueName:b})}mu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nc{constructor(P,J,_e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const He=function tu(b){if(!b||!b.options)throw yu("App Configuration Object");if(!b.name)throw yu("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:J}=b;for(const _e of P)if(!J[_e])throw yu(_e);return{appName:b.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:He,installations:J,analyticsProvider:_e}}_delete(){return Promise.resolve()}}function Qs(b){return Js.apply(this,arguments)}function Js(){return(Js=(0,X.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(O,{scope:ue}),b.swRegistration.update().catch(()=>{})}catch(P){throw _s.create("failed-service-worker-registration",{browserErrorMessage:null==P?void 0:P.message})}})).apply(this,arguments)}function vs(b,P){return mo.apply(this,arguments)}function mo(){return(mo=(0,X.Z)(function*(b,P){if(!P&&!b.swRegistration&&(yield Qs(b)),P||!b.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw _s.create("invalid-sw-registration");b.swRegistration=P}})).apply(this,arguments)}function fa(b,P){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,X.Z)(function*(b,P){P?b.vapidKey=P:b.vapidKey||(b.vapidKey=ke)})).apply(this,arguments)}function _u(){return(_u=(0,X.Z)(function*(b,P){if(!navigator)throw _s.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _s.create("permission-blocked");return yield fa(b,null==P?void 0:P.vapidKey),yield vs(b,null==P?void 0:P.serviceWorkerRegistration),gu(b)})).apply(this,arguments)}function Jo(b,P,J){return vu.apply(this,arguments)}function vu(){return(vu=(0,X.Z)(function*(b,P,J){const _e=Au(P);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(_e,{message_id:J[gi],message_name:J[z],message_time:J[W],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Au(b){switch(b){case Le.NOTIFICATION_CLICKED:return"notification_open";case Le.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function pa(){return(pa=(0,X.Z)(function*(b,P){const J=P.data;if(!J.isFirebaseMessaging)return;b.onMessageHandler&&J.messageType===Le.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(si(J)):b.onMessageHandler.next(si(J)));const _e=J.data;Su(_e)&&"1"===_e[fe]&&(yield Jo(b,J.messageType,_e))})).apply(this,arguments)}const Bu="@firebase/messaging",ju=b=>{const P=new nc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function Eu(b,P){return pa.apply(this,arguments)}(P,J)),P},ka=b=>{const P=b.getProvider("messaging").getImmediate();return{getToken:_e=>function Qo(b,P){return _u.apply(this,arguments)}(P,_e)}};function x(){return D.apply(this,arguments)}function D(){return(D=(0,X.Z)(function*(){try{yield(0,Ue.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,Ue.hl)()&&(0,Ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hu(){(0,ie._registerComponent)(new Ke.wA("messaging",ju,"PUBLIC")),(0,ie._registerComponent)(new Ke.wA("messaging-internal",ka,"PRIVATE")),(0,ie.registerVersion)(Bu,"0.12.4"),(0,ie.registerVersion)(Bu,"0.12.4","esm2017")}();const yr="analytics",Kn="firebase_id",na="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yn="https://www.googletagmanager.com/gtag/js",vt=new Je.Yd("@firebase/analytics"),Yr=new Ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ra(b){if(!b.startsWith(yn)){const P=Yr.create("invalid-gtag-resource",{gtagURL:b});return vt.warn(P.message),""}return b}function ga(b){return Promise.all(b.map(P=>P.catch(J=>J)))}function jl(b,P){const J=function za(b,P){let J;return window.trustedTypes&&(J=window.trustedTypes.createPolicy(b,P)),J}("firebase-js-sdk-policy",{createScriptURL:ra}),_e=document.createElement("script"),He=`${yn}?l=${b}&id=${P}`;_e.src=J?null==J?void 0:J.createScriptURL(He):He,_e.async=!0,document.head.appendChild(_e)}function Wa(b,P,J,_e,He,ut){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,X.Z)(function*(b,P,J,_e,He,ut){const kt=_e[He];try{if(kt)yield P[kt];else{const vn=(yield ga(J)).find(Yn=>Yn.measurementId===He);vn&&(yield P[vn.appId])}}catch(mn){vt.error(mn)}b("config",He,ut)})).apply(this,arguments)}function rc(b,P,J,_e,He){return Es.apply(this,arguments)}function Es(){return(Es=(0,X.Z)(function*(b,P,J,_e,He){try{let ut=[];if(He&&He.send_to){let kt=He.send_to;Array.isArray(kt)||(kt=[kt]);const mn=yield ga(J);for(const vn of kt){const Yn=mn.find(Nr=>Nr.measurementId===vn),ei=Yn&&P[Yn.appId];if(!ei){ut=[];break}ut.push(ei)}}0===ut.length&&(ut=Object.values(P)),yield Promise.all(ut),b("event",_e,He||{})}catch(ut){vt.error(ut)}})).apply(this,arguments)}function Hr(b){const P=window.document.getElementsByTagName("script");for(const J of Object.values(P))if(J.src&&J.src.includes(yn)&&J.src.includes(b))return J;return null}const nr=new class fs{constructor(P={},J=1e3){this.throttleMetadata=P,this.intervalMillis=J}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,J){this.throttleMetadata[P]=J}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function La(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function xi(b){return Os.apply(this,arguments)}function Os(){return(Os=(0,X.Z)(function*(b){var P;const{appId:J,apiKey:_e}=b,He={method:"GET",headers:La(_e)},ut=na.replace("{app-id}",J),kt=yield fetch(ut,He);if(200!==kt.status&&304!==kt.status){let mn="";try{const vn=yield kt.json();(null===(P=vn.error)||void 0===P?void 0:P.message)&&(mn=vn.error.message)}catch(vn){}throw Yr.create("config-fetch-failed",{httpStatus:kt.status,responseMessage:mn})}return kt.json()})).apply(this,arguments)}function Yi(b){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,X.Z)(function*(b,P=nr,J){const{appId:_e,apiKey:He,measurementId:ut}=b.options;if(!_e)throw Yr.create("no-app-id");if(!He){if(ut)return{measurementId:ut,appId:_e};throw Yr.create("no-api-key")}const kt=P.getThrottleMetadata(_e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mn=new zu;return setTimeout((0,X.Z)(function*(){mn.abort()}),void 0!==J?J:6e4),Gu({appId:_e,apiKey:He,measurementId:ut},kt,mn,P)})).apply(this,arguments)}function Gu(b,P,J){return ma.apply(this,arguments)}function ma(){return(ma=(0,X.Z)(function*(b,{throttleEndTimeMillis:P,backoffCount:J},_e,He=nr){var ut;const{appId:kt,measurementId:mn}=b;try{yield bs(_e,P)}catch(vn){if(mn)return vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${null==vn?void 0:vn.message}]`),{appId:kt,measurementId:mn};throw vn}try{const vn=yield xi(b);return He.deleteThrottleMetadata(kt),vn}catch(vn){const Yn=vn;if(!Va(Yn)){if(He.deleteThrottleMetadata(kt),mn)return vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${null==Yn?void 0:Yn.message}]`),{appId:kt,measurementId:mn};throw vn}const ei=503===Number(null===(ut=null==Yn?void 0:Yn.customData)||void 0===ut?void 0:ut.httpStatus)?(0,Ue.$s)(J,He.intervalMillis,30):(0,Ue.$s)(J,He.intervalMillis),Nr={throttleEndTimeMillis:Date.now()+ei,backoffCount:J+1};return He.setThrottleMetadata(kt,Nr),vt.debug(`Calling attemptFetch again in ${ei} millis`),Gu(b,Nr,_e,He)}})).apply(this,arguments)}function bs(b,P){return new Promise((J,_e)=>{const He=Math.max(P-Date.now(),0),ut=setTimeout(J,He);b.addEventListener(()=>{clearTimeout(ut),_e(Yr.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function Va(b){if(!(b instanceof Ue.ZR&&b.customData))return!1;const P=Number(b.customData.httpStatus);return 429===P||500===P||503===P||504===P}class zu{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}let Mu,iu;function xu(){return(xu=(0,X.Z)(function*(b,P,J,_e,He){if(He&&He.global)b("event",J,_e);else{const ut=yield P;b("event",J,Object.assign(Object.assign({},_e),{send_to:ut}))}})).apply(this,arguments)}function Ca(b){iu=b}function ia(b){Mu=b}function ic(){return zo.apply(this,arguments)}function zo(){return(zo=(0,X.Z)(function*(){if(!(0,Ue.hl)())return vt.warn(Yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ue.eu)()}catch(b){return vt.warn(Yr.create("indexeddb-unavailable",{errorInfo:null==b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function sa(){return(sa=(0,X.Z)(function*(b,P,J,_e,He,ut,kt){var mn;const vn=Yi(b);vn.then(co=>{J[co.measurementId]=co.appId,b.options.measurementId&&co.measurementId!==b.options.measurementId&&vt.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${co.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(co=>vt.error(co)),P.push(vn);const Yn=ic().then(co=>{if(co)return _e.getId()}),[ei,Nr]=yield Promise.all([vn,Yn]);Hr(ut)||jl(ut,ei.measurementId),iu&&(He("consent","default",iu),Ca(void 0)),He("js",new Date);const bo=null!==(mn=null==kt?void 0:kt.config)&&void 0!==mn?mn:{};return bo.origin="firebase",bo.update=!0,null!=Nr&&(bo[Kn]=Nr),He("config",ei.measurementId,bo),Mu&&(He("set",Mu),ia(void 0)),ei.measurementId})).apply(this,arguments)}class Pu{constructor(P){this.app=P}_delete(){return delete Ia[this.app.options.appId],Promise.resolve()}}let Ia={},Xs=[];const su={};let To,Ta,Xo="dataLayer",Za=!1;function ou(b,P,J){!function Ba(){const b=[];if((0,Ue.ru)()&&b.push("This is a browser extension environment."),(0,Ue.zI)()||b.push("Cookies are not available."),b.length>0){const P=b.map((_e,He)=>`(${He+1}) ${_e}`).join(" "),J=Yr.create("invalid-analytics-context",{errorInfo:P});vt.warn(J.message)}}();const _e=b.options.appId;if(!_e)throw Yr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Yr.create("no-api-key");vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ia[_e])throw Yr.create("already-exists",{id:_e});if(!Za){!function $u(b){let P=[];Array.isArray(window[b])?P=window[b]:window[b]=P}(Xo);const{wrappedGtag:ut,gtagCore:kt}=function Ka(b,P,J,_e,He){let ut=function(...kt){window[_e].push(arguments)};return window[He]&&"function"==typeof window[He]&&(ut=window[He]),window[He]=function _l(b,P,J,_e){function ut(){return(ut=(0,X.Z)(function*(kt,...mn){try{if("event"===kt){const[vn,Yn]=mn;yield rc(b,P,J,vn,Yn)}else if("config"===kt){const[vn,Yn]=mn;yield Wa(b,P,J,_e,vn,Yn)}else if("consent"===kt){const[vn]=mn;b("consent","update",vn)}else if("get"===kt){const[vn,Yn,ei]=mn;b("get",vn,Yn,ei)}else if("set"===kt){const[vn]=mn;b("set",vn)}else b(kt,...mn)}catch(vn){vt.error(vn)}})).apply(this,arguments)}return function He(kt){return ut.apply(this,arguments)}}(ut,b,P,J),{gtagCore:ut,wrappedGtag:window[He]}}(Ia,Xs,su,Xo,"gtag");Ta=ut,To=kt,Za=!0}return Ia[_e]=function wl(b,P,J,_e,He,ut,kt){return sa.apply(this,arguments)}(b,Xs,su,P,To,Xo,J),new Pu(b)}function Cl(){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,X.Z)(function*(){if((0,Ue.ru)()||!(0,Ue.zI)()||!(0,Ue.hl)())return!1;try{return yield(0,Ue.eu)()}catch(b){return!1}})).apply(this,arguments)}const q="@firebase/analytics",E="0.10.0";!function C(){(0,ie._registerComponent)(new Ke.wA(yr,(P,{options:J})=>ou(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,ie._registerComponent)(new Ke.wA("analytics-internal",function b(P){try{const J=P.getProvider(yr).getImmediate();return{logEvent:(_e,He,ut)=>function sl(b,P,J,_e){b=(0,Ue.m9)(b),function ya(b,P,J,_e,He){return xu.apply(this,arguments)}(Ta,Ia[b.app.options.appId],P,J,_e).catch(He=>vt.error(He))}(J,_e,He,ut)}}catch(J){throw Yr.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,ie.registerVersion)(q,E),(0,ie.registerVersion)(q,E,"esm2017")}();var k=$(4408),ye=$(7565);const je=new class Be extends ye.v{}(class re extends k.o{constructor(P,J){super(P,J),this.scheduler=P,this.work=J}schedule(P,J=0){return J>0?super.schedule(P,J):(this.delay=J,this.state=P,this.scheduler.flush(this),this)}execute(P,J){return J>0||this.closed?super.execute(P,J):this._execute(P,J)}requestAsyncId(P,J,_e=0){return null!=_e&&_e>0||null==_e&&this.delay>0?super.requestAsyncId(P,J,_e):(P.flush(this),0)}});var Nt=$(4986),Pn=$(8306),qn=$(8505),mr=$(5363),rr=$(9468);const Er=new y.GfV("7.6.1"),ur="__angularfire_symbol__analyticsIsSupportedValue",wr="__angularfire_symbol__analyticsIsSupported",Ai="__angularfire_symbol__remoteConfigIsSupportedValue",us="__angularfire_symbol__remoteConfigIsSupported",hi="__angularfire_symbol__messagingIsSupportedValue",Ps="__angularfire_symbol__messagingIsSupported";function yi(b,P,J){if(P){if(1===P.length)return P[0];const ut=P.filter(kt=>kt.app===J);if(1===ut.length)return ut[0]}return J.container.getProvider(b).getImmediate({optional:!0})}globalThis[wr]||(globalThis[wr]=Cl().then(b=>globalThis[ur]=b).catch(()=>globalThis[ur]=!1)),globalThis[Ps]||(globalThis[Ps]=x().then(b=>globalThis[hi]=b).catch(()=>globalThis[hi]=!1)),globalThis[us]||(globalThis[us]=js().then(b=>globalThis[Ai]=b).catch(()=>globalThis[Ai]=!1));const eo=(b,P)=>{const J=P?[P]:(0,B.C6)(),_e=[];return J.forEach(He=>{He.container.getProvider(b).instances.forEach(kt=>{_e.includes(kt)||_e.push(kt)})}),_e};function oa(){}class ps{constructor(P,J=je){this.zone=P,this.delegate=J}now(){return this.delegate.now()}schedule(P,J,_e){const He=this.zone;return this.delegate.schedule(function(kt){He.runGuarded(()=>{P.apply(this,[kt])})},J,_e)}}class yo{constructor(P){this.zone=P,this.task=null}call(P,J){const _e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oa,{},oa,oa)),J.pipe((0,qn.b)({next:_e,complete:_e,error:_e})).subscribe(P).add(_e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Sa=(()=>{class b{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new ps(Zone.current)),this.insideAngular=J.run(()=>new ps(Zone.current,Nt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(J){return new(J||b)(y.LFG(y.R0b))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Oo(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Hn(b){return Oo().ngZone.runOutsideAngular(()=>b())}function sr(b){return Oo().ngZone.run(()=>b())}function Dr(b){return b.pipe((0,mr.Q)(Oo().outsideAngular))}function ws(b){return Oo(),function lo(b){return function(J){return(J=J.lift(new yo(b.ngZone))).pipe((0,rr.R)(b.outsideAngular),(0,mr.Q)(b.insideAngular))}}(Oo())(b)}const Wo=(b,P)=>function(){const _e=arguments;return P&&setTimeout(()=>{"scheduled"===P.state&&P.invoke()},10),sr(()=>b.apply(void 0,_e))},ko=(b,P)=>function(){let J;const _e=arguments;for(let ut=0;ut<arguments.length;ut++)"function"==typeof _e[ut]&&(P&&(J||(J=sr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oa,{},oa,oa)))),_e[ut]=Wo(_e[ut],J));const He=Hn(()=>b.apply(this,_e));if(!P){if(He instanceof Pn.y){const ut=Oo();return He.pipe((0,rr.R)(ut.outsideAngular),(0,mr.Q)(ut.insideAngular))}return sr(()=>He)}return He instanceof Pn.y?He.pipe(ws):He instanceof Promise?sr(()=>new Promise((ut,kt)=>He.then(mn=>sr(()=>ut(mn)),mn=>sr(()=>kt(mn))))):"function"==typeof He&&J?function(){return setTimeout(()=>{J&&"scheduled"===J.state&&J.invoke()},10),He.apply(this,arguments)}:sr(()=>He)}},1389:(fn,ct,$)=>{$.d(ct,{$:()=>O,A:()=>Ce,D:()=>ft,I:()=>ti,J:()=>Ot,L:()=>ri,N:()=>Ri,P:()=>wl,Q:()=>Eo,R:()=>Wu,U:()=>Ts,V:()=>js,W:()=>Ei,X:()=>ts,Y:()=>ce,Z:()=>Oe,_:()=>Pr,a:()=>Y,a0:()=>ke,a1:()=>gi,a2:()=>Ie,a3:()=>cr,a4:()=>mi,a5:()=>Ti,a6:()=>qi,a7:()=>Rs,a8:()=>Ui,a9:()=>Hs,aA:()=>et,aB:()=>wr,aC:()=>fi,aD:()=>zr,aE:()=>qn,aF:()=>Yu,aG:()=>Il,aH:()=>_n,aL:()=>We,aO:()=>ae,aa:()=>xo,ab:()=>$s,ac:()=>Ho,ad:()=>$a,ae:()=>Mi,af:()=>Oi,ai:()=>Na,aj:()=>ta,ak:()=>Ga,an:()=>pi,ao:()=>yl,aq:()=>Oa,ar:()=>Bu,as:()=>bt,at:()=>zt,au:()=>se,av:()=>we,aw:()=>Nr,ax:()=>Ps,ay:()=>gn,az:()=>Me,b:()=>I,c:()=>Ta,d:()=>ou,e:()=>ba,f:()=>q,g:()=>Be,h:()=>k,i:()=>Fa,j:()=>Nt,k:()=>Hi,l:()=>wt,m:()=>ol,p:()=>Ge,r:()=>Io,s:()=>xs,u:()=>ic});var y=$(5861),B=$(2090),X=$(6881),ie=$(7582),Ue=$(1877),Ke=$(4859);const Ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ce={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ft=function tt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ht=function Lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Bt=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ft=new Ue.Yd("@firebase/auth");function Xt(T,...p){Ft.logLevel<=Ue.in.ERROR&&Ft.error(`Auth (${X.SDK_VERSION}): ${T}`,...p)}function we(T,...p){throw pt(T,...p)}function Me(T,...p){return pt(T,...p)}function it(T,p,v){const R=Object.assign(Object.assign({},ht()),{[p]:v});return new B.LL("auth","Firebase",R).create(p,{appName:T.name})}function Et(T,p,v){if(!(p instanceof v))throw v.name!==p.constructor.name&&we(T,"argument-error"),it(T,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pt(T,...p){if("string"!=typeof T){const v=p[0],R=[...p.slice(1)];return R[0]&&(R[0].appName=T.name),T._errorFactory.create(v,...R)}return Bt.create(T,...p)}function et(T,p,...v){if(!T)throw pt(p,...v)}function Ut(T){const p="INTERNAL ASSERTION FAILED: "+T;throw Xt(p),new Error(p)}function bt(T,p){T||Ut(p)}function Fn(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function Ht(){return"http:"===Nn()||"https:"===Nn()}function Nn(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class Ln{constructor(p,v){this.shortDelay=p,this.longDelay=v,bt(v>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function rn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ht()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fr(T,p){bt(T.emulator,"Emulator should always be set here");const{url:v}=T.emulator;return p?`${v}${p.startsWith("/")?p.slice(1):p}`:v}class Xn{static initialize(p,v,R){this.fetchImpl=p,v&&(this.headersImpl=v),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const an={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},nt=new Ln(3e4,6e4);function Qe(T,p){return T.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:T.tenantId}):p}function ve(T,p,v,R){return De.apply(this,arguments)}function De(){return(De=(0,y.Z)(function*(T,p,v,R,te={}){return Ee(T,te,(0,y.Z)(function*(){let pe={},ot={};R&&("GET"===p?ot=R:pe={body:JSON.stringify(R)});const xt=(0,B.xO)(Object.assign({key:T.config.apiKey},ot)).slice(1),hn=yield T._getAdditionalHeaders();return hn["Content-Type"]="application/json",T.languageCode&&(hn["X-Firebase-Locale"]=T.languageCode),Xn.fetch()(cn(T,T.config.apiHost,v,xt),Object.assign({method:p,headers:hn,referrerPolicy:"no-referrer"},pe))}))})).apply(this,arguments)}function Ee(T,p,v){return xe.apply(this,arguments)}function xe(){return(xe=(0,y.Z)(function*(T,p,v){T._canInitEmulator=!1;const R=Object.assign(Object.assign({},an),p);try{const te=new Sn(T),pe=yield Promise.race([v(),te.promise]);te.clearNetworkTimeout();const ot=yield pe.json();if("needConfirmation"in ot)throw Wn(T,"account-exists-with-different-credential",ot);if(pe.ok&&!("errorMessage"in ot))return ot;{const xt=pe.ok?ot.errorMessage:ot.error.message,[hn,Un]=xt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===hn)throw Wn(T,"credential-already-in-use",ot);if("EMAIL_EXISTS"===hn)throw Wn(T,"email-already-in-use",ot);if("USER_DISABLED"===hn)throw Wn(T,"user-disabled",ot);const Cr=R[hn]||hn.toLowerCase().replace(/[_\s]+/g,"-");if(Un)throw it(T,Cr,Un);we(T,Cr)}}catch(te){if(te instanceof B.ZR)throw te;we(T,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function gt(T,p,v,R){return tn.apply(this,arguments)}function tn(){return(tn=(0,y.Z)(function*(T,p,v,R,te={}){const pe=yield ve(T,p,v,R,te);return"mfaPendingCredential"in pe&&we(T,"multi-factor-auth-required",{_serverResponse:pe}),pe})).apply(this,arguments)}function cn(T,p,v,R){const te=`${p}${v}?${R}`;return T.config.emulator?fr(T.config,te):`${T.config.apiScheme}://${te}`}class Sn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((v,R)=>{this.timer=setTimeout(()=>R(Me(this.auth,"network-request-failed")),nt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(T,p,v){const R={appName:T.name};v.email&&(R.email=v.email),v.phoneNumber&&(R.phoneNumber=v.phoneNumber);const te=Me(T,p,R);return te.customData._tokenResponse=v,te}function or(){return(or=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function jn(T,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wn(T,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Dn(T){if(T)try{const p=new Date(Number(T));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Xi(){return(Xi=(0,y.Z)(function*(T,p=!1){const v=(0,B.m9)(T),R=yield v.getIdToken(p),te=Fe(R);et(te&&te.exp&&te.auth_time&&te.iat,v.auth,"internal-error");const pe="object"==typeof te.firebase?te.firebase:void 0,ot=null==pe?void 0:pe.sign_in_provider;return{claims:te,token:R,authTime:Dn(Pt(te.auth_time)),issuedAtTime:Dn(Pt(te.iat)),expirationTime:Dn(Pt(te.exp)),signInProvider:ot||null,signInSecondFactor:(null==pe?void 0:pe.sign_in_second_factor)||null}})).apply(this,arguments)}function Pt(T){return 1e3*Number(T)}function Fe(T){const[p,v,R]=T.split(".");if(void 0===p||void 0===v||void 0===R)return Xt("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,B.tV)(v);return te?JSON.parse(te):(Xt("Failed to decode base64 JWT payload"),null)}catch(te){return Xt("Caught error parsing JWT payload as JSON",null==te?void 0:te.toString()),null}}function lt(T,p){return At.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(T,p,v=!1){if(v)return p;try{return yield p}catch(R){throw R instanceof B.ZR&&Wt(R)&&T.auth.currentUser===T&&(yield T.auth.signOut()),R}})).apply(this,arguments)}function Wt({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class nn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var v;if(p){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const te=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(p=!1){var v=this;if(!this.isRunning)return;const R=this.getInterval(p);this.timerId=setTimeout((0,y.Z)(function*(){yield v.iteration()}),R)}iteration(){var p=this;return(0,y.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===(null==v?void 0:v.code)&&p.schedule(!0))}p.schedule()})()}}class Ur{constructor(p,v){this.createdAt=p,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dn(this.lastLoginAt),this.creationTime=Dn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function er(T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,y.Z)(function*(T){var p;const v=T.auth,R=yield T.getIdToken(),te=yield lt(T,wn(v,{idToken:R}));et(null==te?void 0:te.users.length,v,"internal-error");const pe=te.users[0];T._notifyReloadListener(pe);const ot=(null===(p=pe.providerUserInfo)||void 0===p?void 0:p.length)?Yt(pe.providerUserInfo):[],xt=Ar(T.providerData,ot),Cr=!!T.isAnonymous&&!(T.email&&pe.passwordHash||(null==xt?void 0:xt.length)),Or={uid:pe.localId,displayName:pe.displayName||null,photoURL:pe.photoUrl||null,email:pe.email||null,emailVerified:pe.emailVerified||!1,phoneNumber:pe.phoneNumber||null,tenantId:pe.tenantId||null,providerData:xt,metadata:new Ur(pe.createdAt,pe.lastLoginAt),isAnonymous:Cr};Object.assign(T,Or)})).apply(this,arguments)}function Tr(){return(Tr=(0,y.Z)(function*(T){const p=(0,B.m9)(T);yield er(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ar(T,p){return[...T.filter(R=>!p.some(te=>te.providerId===R.providerId)),...p]}function Yt(T){return T.map(p=>{var{providerId:v}=p,R=(0,ie._T)(p,["providerId"]);return{providerId:v,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}function lr(){return(lr=(0,y.Z)(function*(T,p){const v=yield Ee(T,{},(0,y.Z)(function*(){const R=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:te,apiKey:pe}=T.config,ot=cn(T,te,"/v1/token",`key=${pe}`),xt=yield T._getAdditionalHeaders();return xt["Content-Type"]="application/x-www-form-urlencoded",Xn.fetch()(ot,{method:"POST",headers:xt,body:R})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class _r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){et(p.idToken,"internal-error"),et(void 0!==p.idToken,"internal-error"),et(void 0!==p.refreshToken,"internal-error");const v="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function ze(T){const p=Fe(T);return et(p,"internal-error"),et(void 0!==p.exp,"internal-error"),et(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,v)}getToken(p){var v=this;return(0,y.Z)(function*(R,te=!1){return et(!v.accessToken||v.refreshToken,R,"user-token-expired"),te||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(R,v.refreshToken),v.accessToken):null:v.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(p,v){var R=this;return(0,y.Z)(function*(){const{accessToken:te,refreshToken:pe,expiresIn:ot}=yield function Rr(T,p){return lr.apply(this,arguments)}(p,v);R.updateTokensAndExpiration(te,pe,Number(ot))})()}updateTokensAndExpiration(p,v,R){this.refreshToken=v||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(p,v){const{refreshToken:R,accessToken:te,expirationTime:pe}=v,ot=new _r;return R&&(et("string"==typeof R,"internal-error",{appName:p}),ot.refreshToken=R),te&&(et("string"==typeof te,"internal-error",{appName:p}),ot.accessToken=te),pe&&(et("number"==typeof pe,"internal-error",{appName:p}),ot.expirationTime=pe),ot}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new _r,this.toJSON())}_performRefresh(){return Ut("not implemented")}}function tr(T,p){et("string"==typeof T||void 0===T,"internal-error",{appName:p})}class Wr{constructor(p){var{uid:v,auth:R,stsTokenManager:te}=p,pe=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=R,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=pe.displayName||null,this.email=pe.email||null,this.emailVerified=pe.emailVerified||!1,this.phoneNumber=pe.phoneNumber||null,this.photoURL=pe.photoURL||null,this.isAnonymous=pe.isAnonymous||!1,this.tenantId=pe.tenantId||null,this.providerData=pe.providerData?[...pe.providerData]:[],this.metadata=new Ur(pe.createdAt||void 0,pe.lastLoginAt||void 0)}getIdToken(p){var v=this;return(0,y.Z)(function*(){const R=yield lt(v,v.stsTokenManager.getToken(v.auth,p));return et(R,v.auth,"internal-error"),v.accessToken!==R&&(v.accessToken=R,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),R})()}getIdTokenResult(p){return function li(T){return Xi.apply(this,arguments)}(this,p)}reload(){return function ci(T){return Tr.apply(this,arguments)}(this)}_assign(p){this!==p&&(et(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(v=>Object.assign({},v)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const v=new Wr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(p){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p){var v=this;return(0,y.Z)(function*(R,te=!1){let pe=!1;R.idToken&&R.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(R),pe=!0),te&&(yield er(v)),yield v.auth._persistUserIfCurrent(v),pe&&v.auth._notifyListenersIfCurrent(v)}).apply(this,arguments)}delete(){var p=this;return(0,y.Z)(function*(){const v=yield p.getIdToken();return yield lt(p,function pr(T,p){return or.apply(this,arguments)}(p.auth,{idToken:v})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,v){var R,te,pe,ot,xt,hn,Un,Cr;const Or=null!==(R=v.displayName)&&void 0!==R?R:void 0,ki=null!==(te=v.email)&&void 0!==te?te:void 0,aa=null!==(pe=v.phoneNumber)&&void 0!==pe?pe:void 0,al=null!==(ot=v.photoURL)&&void 0!==ot?ot:void 0,Ra=null!==(xt=v.tenantId)&&void 0!==xt?xt:void 0,Pc=null!==(hn=v._redirectEventId)&&void 0!==hn?hn:void 0,bl=null!==(Un=v.createdAt)&&void 0!==Un?Un:void 0,ac=null!==(Cr=v.lastLoginAt)&&void 0!==Cr?Cr:void 0,{uid:Dl,emailVerified:ku,isAnonymous:$l,providerData:va,stsTokenManager:Ea}=v;et(Dl&&Ea,p,"internal-error");const uc=_r.fromJSON(this.name,Ea);et("string"==typeof Dl,p,"internal-error"),tr(Or,p.name),tr(ki,p.name),et("boolean"==typeof ku,p,"internal-error"),et("boolean"==typeof $l,p,"internal-error"),tr(aa,p.name),tr(al,p.name),tr(Ra,p.name),tr(Pc,p.name),tr(bl,p.name),tr(ac,p.name);const lc=new Wr({uid:Dl,auth:p,email:ki,emailVerified:ku,displayName:Or,isAnonymous:$l,photoURL:al,phoneNumber:aa,tenantId:Ra,stsTokenManager:uc,createdAt:bl,lastLoginAt:ac});return va&&Array.isArray(va)&&(lc.providerData=va.map(Gl=>Object.assign({},Gl))),Pc&&(lc._redirectEventId=Pc),lc}static _fromIdTokenResponse(p,v){return(0,y.Z)(function*(R,te,pe=!1){const ot=new _r;ot.updateFromServerResponse(te);const xt=new Wr({uid:te.localId,auth:R,stsTokenManager:ot,isAnonymous:pe});return yield er(xt),xt}).apply(this,arguments)}}const Qr=new Map;function fi(T){bt(T instanceof Function,"Expected a class definition");let p=Qr.get(T);return p?(bt(p instanceof T,"Instance stored in cache mismatched with class"),p):(p=new T,Qr.set(T,p),p)}const Ri=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(v,R){var te=this;return(0,y.Z)(function*(){te.storage[v]=R})()}_get(v){var R=this;return(0,y.Z)(function*(){const te=R.storage[v];return void 0===te?null:te})()}_remove(v){var R=this;return(0,y.Z)(function*(){delete R.storage[v]})()}_addListener(v,R){}_removeListener(v,R){}}return T.type="NONE",T})();function zr(T,p,v){return`firebase:${T}:${p}:${v}`}class Pe{constructor(p,v,R){this.persistence=p,this.auth=v,this.userKey=R;const{config:te,name:pe}=this.auth;this.fullUserKey=zr(this.userKey,te.apiKey,pe),this.fullPersistenceKey=zr("persistence",te.apiKey,pe),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,y.Z)(function*(){const v=yield p.persistence._get(p.fullUserKey);return v?Wr._fromJSON(p.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var v=this;return(0,y.Z)(function*(){if(v.persistence===p)return;const R=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=p,R?v.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,v){return(0,y.Z)(function*(R,te,pe="authUser"){if(!te.length)return new Pe(fi(Ri),R,pe);const ot=(yield Promise.all(te.map(function(){var Or=(0,y.Z)(function*(ki){if(yield ki._isAvailable())return ki});return function(ki){return Or.apply(this,arguments)}}()))).filter(Or=>Or);let xt=ot[0]||fi(Ri);const hn=zr(pe,R.config.apiKey,R.name);let Un=null;for(const Or of te)try{const ki=yield Or._get(hn);if(ki){const aa=Wr._fromJSON(R,ki);Or!==xt&&(Un=aa),xt=Or;break}}catch(ki){}const Cr=ot.filter(Or=>Or._shouldAllowMigration);return xt._shouldAllowMigration&&Cr.length?(xt=Cr[0],Un&&(yield xt._set(hn,Un.toJSON())),yield Promise.all(te.map(function(){var Or=(0,y.Z)(function*(ki){if(ki!==xt)try{yield ki._remove(hn)}catch(aa){}});return function(ki){return Or.apply(this,arguments)}}())),new Pe(xt,R,pe)):new Pe(xt,R,pe)}).apply(this,arguments)}}function Ae(T){const p=T.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(ne(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(he(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Se(p))return"Blackberry";if(dt(p))return"Webos";if(ge(p))return"Safari";if((p.includes("chrome/")||G(p))&&!p.includes("edge/"))return"Chrome";if(se(p))return"Android";{const R=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==R?void 0:R.length))return R[1]}return"Other"}function he(T=(0,B.z$)()){return/firefox\//i.test(T)}function ge(T=(0,B.z$)()){const p=T.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function G(T=(0,B.z$)()){return/crios\//i.test(T)}function ne(T=(0,B.z$)()){return/iemobile/i.test(T)}function se(T=(0,B.z$)()){return/android/i.test(T)}function Se(T=(0,B.z$)()){return/blackberry/i.test(T)}function dt(T=(0,B.z$)()){return/webos/i.test(T)}function zt(T=(0,B.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function gn(T=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function $n(T=(0,B.z$)()){return zt(T)||se(T)||dt(T)||Se(T)||/windows phone/i.test(T)||ne(T)}function Pi(T,p=[]){let v;switch(T){case"Browser":v=Ae((0,B.z$)());break;case"Worker":v=`${Ae((0,B.z$)())}-${T}`;break;default:v=T}const R=p.length?p.join(","):"FirebaseCore-web";return`${v}/JsCore/${X.SDK_VERSION}/${R}`}function yt(){return(yt=(0,y.Z)(function*(T){return(yield ve(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vt(T,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,y.Z)(function*(T,p){return ve(T,"GET","/v2/recaptchaConfig",Qe(T,p))})).apply(this,arguments)}function sn(T){return void 0!==T&&void 0!==T.getResponse}function Tn(T){return void 0!==T&&void 0!==T.enterprise}class ar{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function vr(T){return new Promise((p,v)=>{const R=document.createElement("script");R.setAttribute("src",T),R.onload=p,R.onerror=te=>{const pe=Me("internal-error");pe.customData=te,v(pe)},R.type="text/javascript",R.charset="UTF-8",function Xr(){var T,p;return null!==(p=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==p?p:document}().appendChild(R)})}function Br(T){return`__${T}${Math.floor(1e6*Math.random())}`}class dr{constructor(p){this.type="recaptcha-enterprise",this.auth=_n(p)}verify(){var p=this;return(0,y.Z)(function*(v="verify",R=!1){function pe(){return pe=(0,y.Z)(function*(xt){if(!R){if(null==xt.tenantId&&null!=xt._agentRecaptchaConfig)return xt._agentRecaptchaConfig.siteKey;if(null!=xt.tenantId&&void 0!==xt._tenantRecaptchaConfigs[xt.tenantId])return xt._tenantRecaptchaConfigs[xt.tenantId].siteKey}return new Promise(function(){var hn=(0,y.Z)(function*(Un,Cr){Vt(xt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Or=>{if(void 0!==Or.recaptchaKey){const ki=new ar(Or);return null==xt.tenantId?xt._agentRecaptchaConfig=ki:xt._tenantRecaptchaConfigs[xt.tenantId]=ki,Un(ki.siteKey)}Cr(new Error("recaptcha Enterprise site key undefined"))}).catch(Or=>{Cr(Or)})});return function(Un,Cr){return hn.apply(this,arguments)}}())}),pe.apply(this,arguments)}function ot(xt,hn,Un){const Cr=window.grecaptcha;Tn(Cr)?Cr.enterprise.ready(()=>{Cr.enterprise.execute(xt,{action:v}).then(Or=>{hn(Or)}).catch(()=>{hn("NO_RECAPTCHA")})}):Un(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((xt,hn)=>{(function te(xt){return pe.apply(this,arguments)})(p.auth).then(Un=>{if(!R&&Tn(window.grecaptcha))ot(Un,xt,hn);else{if("undefined"==typeof window)return void hn(new Error("RecaptchaVerifier is only supported in browser"));vr("https://www.google.com/recaptcha/enterprise.js?render="+Un).then(()=>{ot(Un,xt,hn)}).catch(Cr=>{hn(Cr)})}}).catch(Un=>{hn(Un)})})}).apply(this,arguments)}}function zi(T,p,v){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,y.Z)(function*(T,p,v,R=!1){const te=new dr(T);let pe;try{pe=yield te.verify(v)}catch(xt){pe=yield te.verify(v,!0)}const ot=Object.assign({},p);return Object.assign(ot,R?{captchaResp:pe}:{captchaResponse:pe}),Object.assign(ot,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ot,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ot})).apply(this,arguments)}class ks{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,v){const R=pe=>new Promise((ot,xt)=>{try{ot(p(pe))}catch(hn){xt(hn)}});R.onAbort=v,this.queue.push(R);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(p){var v=this;return(0,y.Z)(function*(){if(v.auth.currentUser===p)return;const R=[];try{for(const te of v.queue)yield te(p),te.onAbort&&R.push(te.onAbort)}catch(te){R.reverse();for(const pe of R)try{pe()}catch(ot){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null==te?void 0:te.message})}})()}}class Mr{constructor(p,v,R,te){this.app=p,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=R,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ir(this),this.idTokenSubscription=new ir(this),this.beforeStateQueue=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(p,v){var R=this;return v&&(this._popupRedirectResolver=fi(v)),this._initializationPromise=this.queue((0,y.Z)(function*(){var te,pe;if(!R._deleted&&(R.persistenceManager=yield Pe.create(R,p),!R._deleted)){if(null===(te=R._popupRedirectResolver)||void 0===te?void 0:te._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch(ot){}yield R.initializeCurrentUser(v),R.lastNotifiedUid=(null===(pe=R.currentUser)||void 0===pe?void 0:pe.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,y.Z)(function*(){if(p._deleted)return;const v=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||v){if(p.currentUser&&v&&p.currentUser.uid===v.uid)return p._currentUser._assign(v),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(v,!0)}})()}initializeCurrentUser(p){var v=this;return(0,y.Z)(function*(){var R;const te=yield v.assertedPersistence.getCurrentUser();let pe=te,ot=!1;if(p&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const xt=null===(R=v.redirectUser)||void 0===R?void 0:R._redirectEventId,hn=null==pe?void 0:pe._redirectEventId,Un=yield v.tryRedirectSignIn(p);(!xt||xt===hn)&&(null==Un?void 0:Un.user)&&(pe=Un.user,ot=!0)}if(!pe)return v.directlySetCurrentUser(null);if(!pe._redirectEventId){if(ot)try{yield v.beforeStateQueue.runMiddleware(pe)}catch(xt){pe=te,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(xt))}return pe?v.reloadAndSetCurrentUserOrClear(pe):v.directlySetCurrentUser(null)}return et(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===pe._redirectEventId?v.directlySetCurrentUser(pe):v.reloadAndSetCurrentUserOrClear(pe)})()}tryRedirectSignIn(p){var v=this;return(0,y.Z)(function*(){let R=null;try{R=yield v._popupRedirectResolver._completeRedirectFn(v,p,!0)}catch(te){yield v._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(p){var v=this;return(0,y.Z)(function*(){try{yield er(p)}catch(R){if("auth/network-request-failed"!==(null==R?void 0:R.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Zr(){if("undefined"==typeof navigator)return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var p=this;return(0,y.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var v=this;return(0,y.Z)(function*(){const R=p?(0,B.m9)(p):null;return R&&et(R.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(R&&R._clone(v))})()}_updateCurrentUser(p){var v=this;return(0,y.Z)(function*(R,te=!1){if(!v._deleted)return R&&et(v.tenantId===R.tenantId,v,"tenant-id-mismatch"),te||(yield v.beforeStateQueue.runMiddleware(R)),v.queue((0,y.Z)(function*(){yield v.directlySetCurrentUser(R),v.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var p=this;return(0,y.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var v=this;return this.queue((0,y.Z)(function*(){yield v.assertedPersistence.setPersistence(fi(p))}))}initializeRecaptchaConfig(){var p=this;return(0,y.Z)(function*(){const v=yield Vt(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),R=new ar(v);null==p.tenantId?p._agentRecaptchaConfig=R:p._tenantRecaptchaConfigs[p.tenantId]=R,R.emailPasswordEnabled&&new dr(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,v,R){return this.registerStateListener(this.authStateSubscription,p,v,R)}beforeAuthStateChanged(p,v){return this.beforeStateQueue.pushCallback(p,v)}onIdTokenChanged(p,v,R){return this.registerStateListener(this.idTokenSubscription,p,v,R)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,v){var R=this;return(0,y.Z)(function*(){const te=yield R.getOrInitRedirectPersistenceManager(v);return null===p?te.removeCurrentUser():te.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var v=this;return(0,y.Z)(function*(){if(!v.redirectPersistenceManager){const R=p&&fi(p)||v._popupRedirectResolver;et(R,v,"argument-error"),v.redirectPersistenceManager=yield Pe.create(v,[fi(R._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(p){var v=this;return(0,y.Z)(function*(){var R,te;return v._isInitialized&&(yield v.queue((0,y.Z)(function*(){}))),(null===(R=v._currentUser)||void 0===R?void 0:R._redirectEventId)===p?v._currentUser:(null===(te=v.redirectUser)||void 0===te?void 0:te._redirectEventId)===p?v.redirectUser:null})()}_persistUserIfCurrent(p){var v=this;return(0,y.Z)(function*(){if(p===v.currentUser)return v.queue((0,y.Z)(function*(){return v.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(v=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,v,R,te){if(this._deleted)return()=>{};const pe="function"==typeof v?v:v.next.bind(v),ot=this._isInitialized?Promise.resolve():this._initializationPromise;return et(ot,this,"internal-error"),ot.then(()=>pe(this.currentUser)),"function"==typeof v?p.addObserver(v,R,te):p.addObserver(v)}directlySetCurrentUser(p){var v=this;return(0,y.Z)(function*(){v.currentUser&&v.currentUser!==p&&v._currentUser._stopProactiveRefresh(),p&&v.isProactiveRefreshEnabled&&p._startProactiveRefresh(),v.currentUser=p,p?yield v.assertedPersistence.setCurrentUser(p):yield v.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Pi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,y.Z)(function*(){var v;const R={"X-Client-Version":p.clientVersion};p.app.options.appId&&(R["X-Firebase-gmpid"]=p.app.options.appId);const te=yield null===(v=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();te&&(R["X-Firebase-Client"]=te);const pe=yield p._getAppCheckToken();return pe&&(R["X-Firebase-AppCheck"]=pe),R})()}_getAppCheckToken(){var p=this;return(0,y.Z)(function*(){var v;const R=yield null===(v=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return(null==R?void 0:R.error)&&function dn(T,...p){Ft.logLevel<=Ue.in.WARN&&Ft.warn(`Auth (${X.SDK_VERSION}): ${T}`,...p)}(`Error while retrieving App Check token: ${R.error}`),null==R?void 0:R.token})()}}function _n(T){return(0,B.m9)(T)}class ir{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(v=>this.observer=v)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ti(T,p,v){const R=_n(T);et(R._canInitEmulator,R,"emulator-config-failed"),et(/^https?:\/\//.test(p),R,"invalid-emulator-scheme");const te=!!(null==v?void 0:v.disableWarnings),pe=Xe(p),{host:ot,port:xt}=function Ze(T){const p=Xe(T),v=/(\/\/)?([^?#/]+)/.exec(T.substr(p.length));if(!v)return{host:"",port:null};const R=v[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(R);if(te){const pe=te[1];return{host:pe,port:rt(R.substr(pe.length+1))}}{const[pe,ot]=R.split(":");return{host:pe,port:rt(ot)}}}(p);R.config.emulator={url:`${pe}//${ot}${null===xt?"":`:${xt}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:ot,port:xt,protocol:pe.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function _t(){function T(){const p=document.createElement("p"),v=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function Xe(T){const p=T.indexOf(":");return p<0?"":T.substr(0,p+1)}function rt(T){if(!T)return null;const p=Number(T);return isNaN(p)?null:p}class Ot{constructor(p,v){this.providerId=p,this.signInMethod=v}toJSON(){return Ut("not implemented")}_getIdTokenResponse(p){return Ut("not implemented")}_linkToIdToken(p,v){return Ut("not implemented")}_getReauthenticationResolver(p){return Ut("not implemented")}}function In(T,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:resetPassword",Qe(T,p))})).apply(this,arguments)}function hr(T,p){return br.apply(this,arguments)}function br(){return(br=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function di(T,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:update",Qe(T,p))})).apply(this,arguments)}function ui(T,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signInWithPassword",Qe(T,p))})).apply(this,arguments)}function ds(T,p){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:sendOobCode",Qe(T,p))})).apply(this,arguments)}function os(T,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,y.Z)(function*(T,p){return ds(T,p)})).apply(this,arguments)}function So(T,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,y.Z)(function*(T,p){return ds(T,p)})).apply(this,arguments)}function ca(T,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,y.Z)(function*(T,p){return ds(T,p)})).apply(this,arguments)}function Vo(T,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,y.Z)(function*(T,p){return ds(T,p)})).apply(this,arguments)}function Ls(){return(Ls=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signInWithEmailLink",Qe(T,p))})).apply(this,arguments)}function io(){return(io=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signInWithEmailLink",Qe(T,p))})).apply(this,arguments)}class Vi extends Ot{constructor(p,v,R,te=null){super("password",R),this._email=p,this._password=v,this._tenantId=te}static _fromEmailAndPassword(p,v){return new Vi(p,v,"password")}static _fromEmailAndCode(p,v,R=null){return new Vi(p,v,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const v="string"==typeof p?JSON.parse(p):p;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(p){var v=this;return(0,y.Z)(function*(){var R;switch(v.signInMethod){case"password":const te={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null===(R=p._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const pe=yield zi(p,te,"signInWithPassword");return ui(p,pe)}return ui(p,te).catch(function(){var pe=(0,y.Z)(function*(ot){if("auth/missing-recaptcha-token"===ot.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const xt=yield zi(p,te,"signInWithPassword");return ui(p,xt)}return Promise.reject(ot)});return function(ot){return pe.apply(this,arguments)}}());case"emailLink":return function kr(T,p){return Ls.apply(this,arguments)}(p,{email:v._email,oobCode:v._password});default:we(p,"internal-error")}})()}_linkToIdToken(p,v){var R=this;return(0,y.Z)(function*(){switch(R.signInMethod){case"password":return hr(p,{idToken:v,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function ro(T,p){return io.apply(this,arguments)}(p,{idToken:v,email:R._email,oobCode:R._password});default:we(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Vs(T,p){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signInWithIdp",Qe(T,p))})).apply(this,arguments)}class ri extends Ot{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const v=new ri(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(v.idToken=p.idToken),p.accessToken&&(v.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(v.nonce=p.nonce),p.pendingToken&&(v.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(v.accessToken=p.oauthToken,v.secret=p.oauthTokenSecret):we("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const v="string"==typeof p?JSON.parse(p):p,{providerId:R,signInMethod:te}=v,pe=(0,ie._T)(v,["providerId","signInMethod"]);if(!R||!te)return null;const ot=new ri(R,te);return ot.idToken=pe.idToken||void 0,ot.accessToken=pe.accessToken||void 0,ot.secret=pe.secret,ot.nonce=pe.nonce,ot.pendingToken=pe.pendingToken||null,ot}_getIdTokenResponse(p){return Vs(p,this.buildRequest())}_linkToIdToken(p,v){const R=this.buildRequest();return R.idToken=v,Vs(p,R)}_getReauthenticationResolver(p){const v=this.buildRequest();return v.autoCreate=!1,Vs(p,v)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),p.postBody=(0,B.xO)(v)}return p}}function Uo(T,p){return so.apply(this,arguments)}function so(){return(so=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:sendVerificationCode",Qe(T,p))})).apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signInWithPhoneNumber",Qe(T,p))})).apply(this,arguments)}function ys(){return(ys=(0,y.Z)(function*(T,p){const v=yield gt(T,"POST","/v1/accounts:signInWithPhoneNumber",Qe(T,p));if(v.temporaryProof)throw Wn(T,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const vo={USER_NOT_FOUND:"user-not-found"};function Bo(){return(Bo=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signInWithPhoneNumber",Qe(T,Object.assign(Object.assign({},p),{operation:"REAUTH"})),vo)})).apply(this,arguments)}class Us extends Ot{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,v){return new Us({verificationId:p,verificationCode:v})}static _fromTokenResponse(p,v){return new Us({phoneNumber:p,temporaryProof:v})}_getIdTokenResponse(p){return function Ss(T,p){return As.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,v){return function qs(T,p){return ys.apply(this,arguments)}(p,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ro(T,p){return Bo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:v,verificationId:R,verificationCode:te}=this.params;return p&&v?{temporaryProof:p,phoneNumber:v}:{sessionInfo:R,code:te}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:v,verificationCode:R,phoneNumber:te,temporaryProof:pe}=p;return R||v||te||pe?new Us({verificationId:v,verificationCode:R,phoneNumber:te,temporaryProof:pe}):null}}class Is{constructor(p){var v,R,te,pe,ot,xt;const hn=(0,B.zd)((0,B.pd)(p)),Un=null!==(v=hn.apiKey)&&void 0!==v?v:null,Cr=null!==(R=hn.oobCode)&&void 0!==R?R:null,Or=function Ki(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=hn.mode)&&void 0!==te?te:null);et(Un&&Cr&&Or,"argument-error"),this.apiKey=Un,this.operation=Or,this.code=Cr,this.continueUrl=null!==(pe=hn.continueUrl)&&void 0!==pe?pe:null,this.languageCode=null!==(ot=hn.languageCode)&&void 0!==ot?ot:null,this.tenantId=null!==(xt=hn.tenantId)&&void 0!==xt?xt:null}static parseLink(p){const v=function Bs(T){const p=(0,B.zd)((0,B.pd)(T)).link,v=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,R=(0,B.zd)((0,B.pd)(T)).deep_link_id;return(R?(0,B.zd)((0,B.pd)(R)).link:null)||R||v||p||T}(p);try{return new Is(v)}catch(R){return null}}}let Eo=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(v,R){return Vi._fromEmailAndPassword(v,R)}static credentialWithLink(v,R){const te=Is.parseLink(R);return et(te,"argument-error"),Vi._fromEmailAndCode(v,te.code,te.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Zs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Kr extends Zs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ts extends Kr{static credentialFromJSON(p){const v="string"==typeof p?JSON.parse(p):p;return et("providerId"in v&&"signInMethod"in v,"argument-error"),ri._fromParams(v)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return et(p.idToken||p.accessToken,"argument-error"),ri._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ts.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ts.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:R,oauthTokenSecret:te,pendingToken:pe,nonce:ot,providerId:xt}=p;if(!R&&!te&&!v&&!pe||!xt)return null;try{return new ts(xt)._credential({idToken:v,accessToken:R,nonce:ot,pendingToken:pe})}catch(hn){return null}}}let Ts=(()=>{class T extends Kr{constructor(){super("facebook.com")}static credential(v){return ri._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch(R){return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),js=(()=>{class T extends Kr{constructor(){super("google.com"),this.addScope("profile")}static credential(v,R){return ri._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:R})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:R,oauthAccessToken:te}=v;if(!R&&!te)return null;try{return T.credential(R,te)}catch(pe){return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),Ei=(()=>{class T extends Kr{constructor(){super("github.com")}static credential(v){return ri._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch(R){return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class ae extends Ot{constructor(p,v){super(p,p),this.pendingToken=v}_getIdTokenResponse(p){return Vs(p,this.buildRequest())}_linkToIdToken(p,v){const R=this.buildRequest();return R.idToken=v,Vs(p,R)}_getReauthenticationResolver(p){const v=this.buildRequest();return v.autoCreate=!1,Vs(p,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const v="string"==typeof p?JSON.parse(p):p,{providerId:R,signInMethod:te,pendingToken:pe}=v;return R&&te&&pe&&R===te?new ae(R,pe):null}static _create(p,v){return new ae(p,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ce extends Zs{constructor(p){et(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ce.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ce.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const v=ae.fromJSON(p);return et(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:v,providerId:R}=p;if(!v||!R)return null;try{return ae._create(R,v)}catch(te){return null}}}let Oe=(()=>{class T extends Kr{constructor(){super("twitter.com")}static credential(v,R){return ri._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:R})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:R,oauthTokenSecret:te}=v;if(!R||!te)return null;try{return T.credential(R,te)}catch(pe){return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Rt(T,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signUp",Qe(T,p))})).apply(this,arguments)}class bn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,v,R){return(0,y.Z)(function*(te,pe,ot,xt=!1){const hn=yield Wr._fromIdTokenResponse(te,ot,xt),Un=jr(ot);return new bn({user:hn,providerId:Un,_tokenResponse:ot,operationType:pe})}).apply(this,arguments)}static _forOperation(p,v,R){return(0,y.Z)(function*(){yield p._updateTokensIfNecessary(R,!0);const te=jr(R);return new bn({user:p,providerId:te,_tokenResponse:R,operationType:v})})()}}function jr(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function Pr(T){return gr.apply(this,arguments)}function gr(){return(gr=(0,y.Z)(function*(T){var p;const v=_n(T);if(yield v._initializationPromise,null===(p=v.currentUser)||void 0===p?void 0:p.isAnonymous)return new bn({user:v.currentUser,providerId:null,operationType:"signIn"});const R=yield Rt(v,{returnSecureToken:!0}),te=yield bn._fromIdTokenResponse(v,"signIn",R,!0);return yield v._updateCurrentUser(te.user),te})).apply(this,arguments)}class Vr extends B.ZR{constructor(p,v,R,te){var pe;super(v.code,v.message),this.operationType=R,this.user=te,Object.setPrototypeOf(this,Vr.prototype),this.customData={appName:p.name,tenantId:null!==(pe=p.tenantId)&&void 0!==pe?pe:void 0,_serverResponse:v.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(p,v,R,te){return new Vr(p,v,R,te)}}function Ii(T,p,v,R){return("reauthenticate"===p?v._getReauthenticationResolver(T):v._getIdTokenResponse(T)).catch(pe=>{throw"auth/multi-factor-auth-required"===pe.code?Vr._fromErrorAndOperation(T,pe,p,R):pe})}function bi(T){return new Set(T.map(({providerId:p})=>p).filter(p=>!!p))}function pi(T,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T);yield ns(!0,v,p);const{providerUserInfo:R}=yield jn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[p]}),te=bi(R||[]);return v.providerData=v.providerData.filter(pe=>te.has(pe.providerId)),te.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Ni(T,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,y.Z)(function*(T,p,v=!1){const R=yield lt(T,p._linkToIdToken(T.auth,yield T.getIdToken()),v);return bn._forOperation(T,"link",R)})).apply(this,arguments)}function ns(T,p,v){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,y.Z)(function*(T,p,v){yield er(p);const te=!1===T?"provider-already-linked":"no-such-provider";et(bi(p.providerData).has(v)===T,p.auth,te)})).apply(this,arguments)}function ao(T,p){return jo.apply(this,arguments)}function jo(){return(jo=(0,y.Z)(function*(T,p,v=!1){const{auth:R}=T,te="reauthenticate";try{const pe=yield lt(T,Ii(R,te,p,T),v);et(pe.idToken,R,"internal-error");const ot=Fe(pe.idToken);et(ot,R,"internal-error");const{sub:xt}=ot;return et(T.uid===xt,R,"user-mismatch"),bn._forOperation(T,te,pe)}catch(pe){throw"auth/user-not-found"===(null==pe?void 0:pe.code)&&we(R,"user-mismatch"),pe}})).apply(this,arguments)}function K(T,p){return V.apply(this,arguments)}function V(){return(V=(0,y.Z)(function*(T,p,v=!1){const R="signIn",te=yield Ii(T,R,p),pe=yield bn._fromIdTokenResponse(T,R,te);return v||(yield T._updateCurrentUser(pe.user)),pe})).apply(this,arguments)}function O(T,p){return ue.apply(this,arguments)}function ue(){return(ue=(0,y.Z)(function*(T,p){return K(_n(T),p)})).apply(this,arguments)}function ke(T,p){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T);return yield ns(!1,v,p.providerId),Ni(v,p)})).apply(this,arguments)}function gi(T,p){return z.apply(this,arguments)}function z(){return(z=(0,y.Z)(function*(T,p){return ao((0,B.m9)(T),p)})).apply(this,arguments)}function W(T,p){return fe.apply(this,arguments)}function fe(){return(fe=(0,y.Z)(function*(T,p){return gt(T,"POST","/v1/accounts:signInWithCustomToken",Qe(T,p))})).apply(this,arguments)}function Ie(T,p){return Le.apply(this,arguments)}function Le(){return(Le=(0,y.Z)(function*(T,p){const v=_n(T),R=yield W(v,{token:p,returnSecureToken:!0}),te=yield bn._fromIdTokenResponse(v,"signIn",R);return yield v._updateCurrentUser(te.user),te})).apply(this,arguments)}class It{constructor(p,v){this.factorId=p,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(p,v){return"phoneInfo"in v?Qt._fromServerResponse(p,v):"totpInfo"in v?Vn._fromServerResponse(p,v):we(p,"internal-error")}}class Qt extends It{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,v){return new Qt(v)}}class Vn extends It{constructor(p){super("totp",p)}static _fromServerResponse(p,v){return new Vn(v)}}function xn(T,p,v){var R;et((null===(R=v.url)||void 0===R?void 0:R.length)>0,T,"invalid-continue-uri"),et(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),p.continueUrl=v.url,p.dynamicLinkDomain=v.dynamicLinkDomain,p.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(et(v.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),p.iOSBundleId=v.iOS.bundleId),v.android&&(et(v.android.packageName.length>0,T,"missing-android-pkg-name"),p.androidInstallApp=v.android.installApp,p.androidMinimumVersionCode=v.android.minimumVersion,p.androidPackageName=v.android.packageName)}function cr(T,p,v){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,y.Z)(function*(T,p,v){var R;const te=_n(T),pe={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null===(R=te._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const ot=yield zi(te,pe,"getOobCode",!0);v&&xn(te,ot,v),yield So(te,ot)}else v&&xn(te,pe,v),yield So(te,pe).catch(function(){var ot=(0,y.Z)(function*(xt){if("auth/missing-recaptcha-token"!==xt.code)return Promise.reject(xt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const hn=yield zi(te,pe,"getOobCode",!0);v&&xn(te,hn,v),yield So(te,hn)}});return function(xt){return ot.apply(this,arguments)}}())}),Gn.apply(this,arguments)}function mi(T,p,v){return Di.apply(this,arguments)}function Di(){return(Di=(0,y.Z)(function*(T,p,v){yield In((0,B.m9)(T),{oobCode:p,newPassword:v})})).apply(this,arguments)}function Ti(T,p){return $r.apply(this,arguments)}function $r(){return($r=(0,y.Z)(function*(T,p){yield di((0,B.m9)(T),{oobCode:p})})).apply(this,arguments)}function qi(T,p){return Si.apply(this,arguments)}function Si(){return(Si=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T),R=yield In(v,{oobCode:p}),te=R.requestType;switch(et(te,v,"internal-error"),te){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":et(R.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":et(R.mfaInfo,v,"internal-error");default:et(R.email,v,"internal-error")}let pe=null;return R.mfaInfo&&(pe=It._fromServerResponse(_n(v),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:pe},operation:te}})).apply(this,arguments)}function Rs(T,p){return as.apply(this,arguments)}function as(){return(as=(0,y.Z)(function*(T,p){const{data:v}=yield qi((0,B.m9)(T),p);return v.email})).apply(this,arguments)}function Ui(T,p,v){return rs.apply(this,arguments)}function rs(){return rs=(0,y.Z)(function*(T,p,v){var R;const te=_n(T),pe={returnSecureToken:!0,email:p,password:v,clientType:"CLIENT_TYPE_WEB"};let ot;if(null===(R=te._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const Un=yield zi(te,pe,"signUpPassword");ot=Rt(te,Un)}else ot=Rt(te,pe).catch(function(){var Un=(0,y.Z)(function*(Cr){if("auth/missing-recaptcha-token"===Cr.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Or=yield zi(te,pe,"signUpPassword");return Rt(te,Or)}return Promise.reject(Cr)});return function(Cr){return Un.apply(this,arguments)}}());const xt=yield ot.catch(Un=>Promise.reject(Un)),hn=yield bn._fromIdTokenResponse(te,"signIn",xt);return yield te._updateCurrentUser(hn.user),hn}),rs.apply(this,arguments)}function Hs(T,p,v){return O((0,B.m9)(T),Eo.credential(p,v))}function xo(T,p,v){return Zo.apply(this,arguments)}function Zo(){return Zo=(0,y.Z)(function*(T,p,v){var R;const te=_n(T),pe={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function ot(xt,hn){et(hn.handleCodeInApp,te,"argument-error"),hn&&xn(te,xt,hn)}if(null===(R=te._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const xt=yield zi(te,pe,"getOobCode",!0);ot(xt,v),yield ca(te,xt)}else ot(pe,v),yield ca(te,pe).catch(function(){var xt=(0,y.Z)(function*(hn){if("auth/missing-recaptcha-token"!==hn.code)return Promise.reject(hn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Un=yield zi(te,pe,"getOobCode",!0);ot(Un,v),yield ca(te,Un)}});return function(hn){return xt.apply(this,arguments)}}())}),Zo.apply(this,arguments)}function $s(T,p){const v=Is.parseLink(p);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function Ho(T,p,v){return _s.apply(this,arguments)}function _s(){return(_s=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T),te=Eo.credentialWithLink(p,v||Fn());return et(te._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),O(R,te)})).apply(this,arguments)}function da(T,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:createAuthUri",Qe(T,p))})).apply(this,arguments)}function $a(T,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,y.Z)(function*(T,p){const R={identifier:p,continueUri:Ht()?Fn():"http://localhost"},{signinMethods:te}=yield da((0,B.m9)(T),R);return te||[]})).apply(this,arguments)}function Mi(T,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T),te={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};p&&xn(v.auth,te,p);const{email:pe}=yield os(v.auth,te);pe!==T.email&&(yield T.reload())})).apply(this,arguments)}function Oi(T,p,v){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T),pe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:p};v&&xn(R.auth,pe,v);const{email:ot}=yield Vo(R.auth,pe);ot!==T.email&&(yield T.reload())})).apply(this,arguments)}function Bi(T,p){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(T,p){return ve(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Na(T,p){return gu.apply(this,arguments)}function gu(){return(gu=(0,y.Z)(function*(T,{displayName:p,photoURL:v}){if(void 0===p&&void 0===v)return;const R=(0,B.m9)(T),pe={idToken:yield R.getIdToken(),displayName:p,photoUrl:v,returnSecureToken:!0},ot=yield lt(R,Bi(R.auth,pe));R.displayName=ot.displayName||null,R.photoURL=ot.photoUrl||null;const xt=R.providerData.find(({providerId:hn})=>"password"===hn);xt&&(xt.displayName=R.displayName,xt.photoURL=R.photoURL),yield R._updateTokensIfNecessary(ot)})).apply(this,arguments)}function ta(T,p){return po((0,B.m9)(T),p,null)}function Ga(T,p){return po((0,B.m9)(T),null,p)}function po(T,p,v){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,y.Z)(function*(T,p,v){const{auth:R}=T,pe={idToken:yield T.getIdToken(),returnSecureToken:!0};p&&(pe.email=p),v&&(pe.password=v);const ot=yield lt(T,hr(R,pe));yield T._updateTokensIfNecessary(ot,!0)})).apply(this,arguments)}class Zi{constructor(p,v,R={}){this.isNewUser=p,this.providerId=v,this.profile=R}}class Yo extends Zi{constructor(p,v,R,te){super(p,v,R),this.username=te}}class Du extends Zi{constructor(p,v){super(p,"facebook.com",v)}}class go extends Yo{constructor(p,v){super(p,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Go extends Zi{constructor(p,v){super(p,"google.com",v)}}class si extends Yo{constructor(p,v,R){super(p,"twitter.com",v,R)}}function yl(T){const{user:p,_tokenResponse:v}=T;return p.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function ha(T){var p,v;if(!T)return null;const{providerId:R}=T,te=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},pe=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!R&&(null==T?void 0:T.idToken)){const ot=null===(v=null===(p=Fe(T.idToken))||void 0===p?void 0:p.firebase)||void 0===v?void 0:v.sign_in_provider;if(ot)return new Zi(pe,"anonymous"!==ot&&"custom"!==ot?ot:null)}if(!R)return null;switch(R){case"facebook.com":return new Du(pe,te);case"github.com":return new go(pe,te);case"google.com":return new Go(pe,te);case"twitter.com":return new si(pe,te,T.screenName||null);case"custom":case"anonymous":return new Zi(pe,null);default:return new Zi(pe,R,te)}}(v)}class mo{constructor(p,v,R){this.type=p,this.credential=v,this.auth=R}static _fromIdtoken(p,v){return new mo("enroll",p,v)}static _fromMfaPendingCredential(p){return new mo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var v,R;if(null==p?void 0:p.multiFactorSession){if(null===(v=p.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return mo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(R=p.multiFactorSession)||void 0===R?void 0:R.idToken)return mo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class fa{constructor(p,v,R){this.session=p,this.hints=v,this.signInResolver=R}static _fromError(p,v){const R=_n(p),te=v.customData._serverResponse,pe=(te.mfaInfo||[]).map(xt=>It._fromServerResponse(R,xt));et(te.mfaPendingCredential,R,"internal-error");const ot=mo._fromMfaPendingCredential(te.mfaPendingCredential);return new fa(ot,pe,function(){var xt=(0,y.Z)(function*(hn){const Un=yield hn._process(R,ot);delete te.mfaInfo,delete te.mfaPendingCredential;const Cr=Object.assign(Object.assign({},te),{idToken:Un.idToken,refreshToken:Un.refreshToken});switch(v.operationType){case"signIn":const Or=yield bn._fromIdTokenResponse(R,v.operationType,Cr);return yield R._updateCurrentUser(Or.user),Or;case"reauthenticate":return et(v.user,R,"internal-error"),bn._forOperation(v.user,v.operationType,Cr);default:we(R,"internal-error")}});return function(hn){return xt.apply(this,arguments)}}())}resolveSignIn(p){var v=this;return(0,y.Z)(function*(){return v.signInResolver(p)})()}}function Oa(T,p){var v;const R=(0,B.m9)(T),te=p;return et(p.customData.operationType,R,"argument-error"),et(null===(v=te.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,R,"argument-error"),fa._fromError(R,te)}function Qo(T,p){return ve(T,"POST","/v2/accounts/mfaEnrollment:start",Qe(T,p))}class Eu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(R=>It._fromServerResponse(p.auth,R)))})}static _fromUser(p){return new Eu(p)}getSession(){var p=this;return(0,y.Z)(function*(){return mo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,v){var R=this;return(0,y.Z)(function*(){const te=p,pe=yield R.getSession(),ot=yield lt(R.user,te._process(R.user.auth,pe,v));return yield R.user._updateTokensIfNecessary(ot),R.user.reload()})()}unenroll(p){var v=this;return(0,y.Z)(function*(){const R="string"==typeof p?p:p.uid,te=yield v.user.getIdToken();try{const pe=yield lt(v.user,function Au(T,p){return ve(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(T,p))}(v.user.auth,{idToken:te,mfaEnrollmentId:R}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ot})=>ot!==R),yield v.user._updateTokensIfNecessary(pe),yield v.user.reload()}catch(pe){throw pe}})()}}const pa=new WeakMap;function Bu(T){const p=(0,B.m9)(T);return pa.has(p)||pa.set(p,Eu._fromUser(p)),pa.get(p)}const nu="__sak";class ju{constructor(p,v){this.storageRetriever=p,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(nu,"1"),this.storage.removeItem(nu),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,v){return this.storage.setItem(p,JSON.stringify(v)),Promise.resolve()}_get(p){const v=this.storage.getItem(p);return Promise.resolve(v?JSON.parse(v):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const I=(()=>{class T extends ju{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,R)=>this.onStorageEvent(v,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ka(){const T=(0,B.z$)();return ge(T)||zt(T)}()&&function Jr(){try{return!(!window||window===window.top)}catch(T){return!1}}(),this.fallbackToPolling=$n(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const R of Object.keys(this.listeners)){const te=this.storage.getItem(R),pe=this.localCache[R];te!==pe&&v(R,pe,te)}}onStorageEvent(v,R=!1){if(!v.key)return void this.forAllChangedKeys((xt,hn,Un)=>{this.notifyListeners(xt,Un)});const te=v.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xt=this.storage.getItem(te);if(v.newValue!==xt)null!==v.newValue?this.storage.setItem(te,v.newValue):this.storage.removeItem(te);else if(this.localCache[te]===v.newValue&&!R)return}const pe=()=>{const xt=this.storage.getItem(te);!R&&this.localCache[te]===xt||this.notifyListeners(te,xt)},ot=this.storage.getItem(te);!function Rn(){return(0,B.w1)()&&10===document.documentMode}()||ot===v.newValue||v.newValue===v.oldValue?pe():setTimeout(pe,10)}notifyListeners(v,R){this.localCache[v]=R;const te=this.listeners[v];if(te)for(const pe of Array.from(te))pe(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,R,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:R,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,R){var te=()=>super._set,pe=this;return(0,y.Z)(function*(){yield te().call(pe,v,R),pe.localCache[v]=JSON.stringify(R)})()}_get(v){var R=()=>super._get,te=this;return(0,y.Z)(function*(){const pe=yield R().call(te,v);return te.localCache[v]=JSON.stringify(pe),pe})()}_remove(v){var R=()=>super._remove,te=this;return(0,y.Z)(function*(){yield R().call(te,v),delete te.localCache[v]})()}}return T.type="LOCAL",T})(),Y=(()=>{class T extends ju{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,R){}_removeListener(v,R){}}return T.type="SESSION",T})();let Re=(()=>{class T{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const R=this.receivers.find(pe=>pe.isListeningto(v));if(R)return R;const te=new T(v);return this.receivers.push(te),te}isListeningto(v){return this.eventTarget===v}handleEvent(v){var R=this;return(0,y.Z)(function*(){const te=v,{eventId:pe,eventType:ot,data:xt}=te.data,hn=R.handlersMap[ot];if(!(null==hn?void 0:hn.size))return;te.ports[0].postMessage({status:"ack",eventId:pe,eventType:ot});const Un=Array.from(hn).map(function(){var Or=(0,y.Z)(function*(ki){return ki(te.origin,xt)});return function(ki){return Or.apply(this,arguments)}}()),Cr=yield function le(T){return Promise.all(T.map(function(){var p=(0,y.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(R){return{fulfilled:!1,reason:R}}});return function(v){return p.apply(this,arguments)}}()))}(Un);te.ports[0].postMessage({status:"done",eventId:pe,eventType:ot,response:Cr})})()}_subscribe(v,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(R)}_unsubscribe(v,R){this.handlersMap[v]&&R&&this.handlersMap[v].delete(R),(!R||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function We(T="",p=10){let v="";for(let R=0;R<p;R++)v+=Math.floor(10*Math.random());return T+v}class $e{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,v){var R=this;return(0,y.Z)(function*(te,pe,ot=50){const xt="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!xt)throw new Error("connection_unavailable");let hn,Un;return new Promise((Cr,Or)=>{const ki=We("",20);xt.port1.start();const aa=setTimeout(()=>{Or(new Error("unsupported_event"))},ot);Un={messageChannel:xt,onMessage(al){const Ra=al;if(Ra.data.eventId===ki)switch(Ra.data.status){case"ack":clearTimeout(aa),hn=setTimeout(()=>{Or(new Error("timeout"))},3e3);break;case"done":clearTimeout(hn),Cr(Ra.data.response);break;default:clearTimeout(aa),clearTimeout(hn),Or(new Error("invalid_response"))}}},R.handlers.add(Un),xt.port1.addEventListener("message",Un.onMessage),R.target.postMessage({eventType:te,eventId:ki,data:pe},[xt.port2])}).finally(()=>{Un&&R.removeMessageHandler(Un)})}).apply(this,arguments)}}function en(){return window}function Kn(){return void 0!==en().WorkerGlobalScope&&"function"==typeof en().importScripts}function pn(){return(pn=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(T){return null}})).apply(this,arguments)}const vt="firebaseLocalStorageDb",Yr="firebaseLocalStorage",ra="fbase_key";class ga{constructor(p){this.request=p}toPromise(){return new Promise((p,v)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function za(T,p){return T.transaction([Yr],p?"readwrite":"readonly").objectStore(Yr)}function $u(){const T=indexedDB.open(vt,1);return new Promise((p,v)=>{T.addEventListener("error",()=>{v(T.error)}),T.addEventListener("upgradeneeded",()=>{const R=T.result;try{R.createObjectStore(Yr,{keyPath:ra})}catch(te){v(te)}}),T.addEventListener("success",(0,y.Z)(function*(){const R=T.result;R.objectStoreNames.contains(Yr)?p(R):(R.close(),yield function jl(){const T=indexedDB.deleteDatabase(vt);return new ga(T).toPromise()}(),p(yield $u()))}))})}function Wa(T,p,v){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,y.Z)(function*(T,p,v){const R=za(T,!0).put({[ra]:p,value:v});return new ga(R).toPromise()})).apply(this,arguments)}function Es(){return(Es=(0,y.Z)(function*(T,p){const v=za(T,!1).get(p),R=yield new ga(v).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function _l(T,p){const v=za(T,!0).delete(p);return new ga(v).toPromise()}const Fa=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,y.Z)(function*(){return v.db||(v.db=yield $u()),v.db})()}_withRetries(v){var R=this;return(0,y.Z)(function*(){let te=0;for(;;)try{const pe=yield R._openDb();return yield v(pe)}catch(pe){if(te++>3)throw pe;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,y.Z)(function*(){return Kn()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,y.Z)(function*(){v.receiver=Re._getInstance(function yn(){return Kn()?self:null}()),v.receiver._subscribe("keyChanged",function(){var R=(0,y.Z)(function*(te,pe){return{keyProcessed:(yield v._poll()).includes(pe.key)}});return function(te,pe){return R.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var R=(0,y.Z)(function*(te,pe){return["keyChanged"]});return function(te,pe){return R.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,y.Z)(function*(){var R,te;if(v.activeServiceWorker=yield function ln(){return pn.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new $e(v.activeServiceWorker);const pe=yield v.sender._send("ping",{},800);!pe||(null===(R=pe[0])||void 0===R?void 0:R.fulfilled)&&(null===(te=pe[0])||void 0===te?void 0:te.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var R=this;return(0,y.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function na(){var T;return(null===(T=null==navigator?void 0:navigator.serviceWorker)||void 0===T?void 0:T.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:v},R.serviceWorkerReceiverAvailable?800:50)}catch(te){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const v=yield $u();return yield Wa(v,nu,"1"),yield _l(v,nu),!0}catch(v){}return!1})()}_withPendingWrite(v){var R=this;return(0,y.Z)(function*(){R.pendingWrites++;try{yield v()}finally{R.pendingWrites--}})()}_set(v,R){var te=this;return(0,y.Z)(function*(){return te._withPendingWrite((0,y.Z)(function*(){return yield te._withRetries(pe=>Wa(pe,v,R)),te.localCache[v]=R,te.notifyServiceWorker(v)}))})()}_get(v){var R=this;return(0,y.Z)(function*(){const te=yield R._withRetries(pe=>function rc(T,p){return Es.apply(this,arguments)}(pe,v));return R.localCache[v]=te,te})()}_remove(v){var R=this;return(0,y.Z)(function*(){return R._withPendingWrite((0,y.Z)(function*(){return yield R._withRetries(te=>_l(te,v)),delete R.localCache[v],R.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,y.Z)(function*(){const R=yield v._withRetries(ot=>{const xt=za(ot,!1).getAll();return new ga(xt).toPromise()});if(!R)return[];if(0!==v.pendingWrites)return[];const te=[],pe=new Set;for(const{fbase_key:ot,value:xt}of R)pe.add(ot),JSON.stringify(v.localCache[ot])!==JSON.stringify(xt)&&(v.notifyListeners(ot,xt),te.push(ot));for(const ot of Object.keys(v.localCache))v.localCache[ot]&&!pe.has(ot)&&(v.notifyListeners(ot,null),te.push(ot));return te})()}notifyListeners(v,R){this.localCache[v]=R;const te=this.listeners[v];if(te)for(const pe of Array.from(te))pe(R)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function fs(T,p){return ve(T,"POST","/v2/accounts/mfaSignIn:start",Qe(T,p))}const Yi=1e12;class Cn{constructor(p){this.auth=p,this.counter=Yi,this._widgets=new Map}render(p,v){const R=this.counter;return this._widgets.set(R,new Gu(p,this.auth.name,v||{})),this.counter++,R}reset(p){var v;const R=p||Yi;null===(v=this._widgets.get(R))||void 0===v||v.delete(),this._widgets.delete(R)}getResponse(p){var v;return(null===(v=this._widgets.get(p||Yi))||void 0===v?void 0:v.getResponse())||""}execute(p){var v=this;return(0,y.Z)(function*(){var R;return null===(R=v._widgets.get(p||Yi))||void 0===R||R.execute(),""})()}}class Gu{constructor(p,v,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const te="string"==typeof p?document.getElementById(p):p;et(te,"argument-error",{appName:v}),this.container=te,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ma(T){const p=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<T;R++)p.push(v.charAt(Math.floor(Math.random()*v.length)));return p.join("")}(50);const{callback:p,"expired-callback":v}=this.params;if(p)try{p(this.responseToken)}catch(R){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(R){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const bs=Br("rcb"),Va=new Ln(3e4,6e4);class Mu{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=en().grecaptcha)||void 0===p?void 0:p.render)}load(p,v=""){return et(function ya(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(v),p,"argument-error"),this.shouldResolveImmediately(v)&&sn(en().grecaptcha)?Promise.resolve(en().grecaptcha):new Promise((R,te)=>{const pe=en().setTimeout(()=>{te(Me(p,"network-request-failed"))},Va.get());en()[bs]=()=>{en().clearTimeout(pe),delete en()[bs];const xt=en().grecaptcha;if(!xt||!sn(xt))return void te(Me(p,"internal-error"));const hn=xt.render;xt.render=(Un,Cr)=>{const Or=hn(Un,Cr);return this.counter++,Or},this.hostLanguage=v,R(xt)},vr(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:bs,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(pe),te(Me(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var v;return!!(null===(v=en().grecaptcha)||void 0===v?void 0:v.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xu{load(p){return(0,y.Z)(function*(){return new Cn(p)})()}clearedOneInstance(){}}const vl="recaptcha",Co={theme:"light",type:"image"};class Wu{constructor(p,v=Object.assign({},Co),R){this.parameters=v,this.type=vl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(R),this.isInvisible="invisible"===this.parameters.size,et("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const te="string"==typeof p?document.getElementById(p):p;et(te,this.auth,"argument-error"),this.container=te,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xu:new Mu,this.validateStartingState()}verify(){var p=this;return(0,y.Z)(function*(){p.assertNotDestroyed();const v=yield p.render(),R=p.getAssertedRecaptcha();return R.getResponse(v)||new Promise(pe=>{const ot=xt=>{!xt||(p.tokenChangeListeners.delete(ot),pe(xt))};p.tokenChangeListeners.add(ot),p.isInvisible&&R.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){et(!this.parameters.sitekey,this.auth,"argument-error"),et(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),et("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return v=>{if(this.tokenChangeListeners.forEach(R=>R(v)),"function"==typeof p)p(v);else if("string"==typeof p){const R=en()[p];"function"==typeof R&&R(v)}}}assertNotDestroyed(){et(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,y.Z)(function*(){if(yield p.init(),!p.widgetId){let v=p.container;if(!p.isInvisible){const R=document.createElement("div");v.appendChild(R),v=R}p.widgetId=p.getAssertedRecaptcha().render(v,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,y.Z)(function*(){et(Ht()&&!Kn(),p.auth,"internal-error"),yield function El(){let T=null;return new Promise(p=>{"complete"!==document.readyState?(T=()=>p(),window.addEventListener("load",T)):p()}).catch(p=>{throw T&&window.removeEventListener("load",T),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const v=yield function Tt(T){return yt.apply(this,arguments)}(p.auth);et(v,p.auth,"internal-error"),p.parameters.sitekey=v})()}getAssertedRecaptcha(){return et(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ua{constructor(p,v){this.verificationId=p,this.onConfirmation=v}confirm(p){const v=Us._fromVerification(this.verificationId,p);return this.onConfirmation(v)}}function xs(T,p,v){return ru.apply(this,arguments)}function ru(){return(ru=(0,y.Z)(function*(T,p,v){const R=_n(T),te=yield Ca(R,p,(0,B.m9)(v));return new Ua(te,pe=>O(R,pe))})).apply(this,arguments)}function wt(T,p,v){return qa.apply(this,arguments)}function qa(){return(qa=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);yield ns(!1,R,"phone");const te=yield Ca(R.auth,p,(0,B.m9)(v));return new Ua(te,pe=>ke(R,pe))})).apply(this,arguments)}function Io(T,p,v){return iu.apply(this,arguments)}function iu(){return(iu=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T),te=yield Ca(R.auth,p,(0,B.m9)(v));return new Ua(te,pe=>gi(R,pe))})).apply(this,arguments)}function Ca(T,p,v){return ia.apply(this,arguments)}function ia(){return(ia=(0,y.Z)(function*(T,p,v){var R;const te=yield v.verify();try{let pe;if(et("string"==typeof te,T,"argument-error"),et(v.type===vl,T,"argument-error"),pe="string"==typeof p?{phoneNumber:p}:p,"session"in pe){const ot=pe.session;if("phoneNumber"in pe)return et("enroll"===ot.type,T,"internal-error"),(yield Qo(T,{idToken:ot.credential,phoneEnrollmentInfo:{phoneNumber:pe.phoneNumber,recaptchaToken:te}})).phoneSessionInfo.sessionInfo;{et("signin"===ot.type,T,"internal-error");const xt=(null===(R=pe.multiFactorHint)||void 0===R?void 0:R.uid)||pe.multiFactorUid;return et(xt,T,"missing-multi-factor-info"),(yield fs(T,{mfaPendingCredential:ot.credential,mfaEnrollmentId:xt,phoneSignInInfo:{recaptchaToken:te}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ot}=yield Uo(T,{phoneNumber:pe.phoneNumber,recaptchaToken:te});return ot}}finally{v._reset()}})).apply(this,arguments)}function ic(T,p){return zo.apply(this,arguments)}function zo(){return(zo=(0,y.Z)(function*(T,p){yield Ni((0,B.m9)(T),p)})).apply(this,arguments)}let wl=(()=>{class T{constructor(v){this.providerId=T.PROVIDER_ID,this.auth=_n(v)}verifyPhoneNumber(v,R){return Ca(this.auth,v,(0,B.m9)(R))}static credential(v,R){return Us._fromVerification(v,R)}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:R,temporaryProof:te}=v;return R&&te?Us._fromTokenResponse(R,te):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function sa(T,p){return p?fi(p):(et(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class Pu extends Ot{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Vs(p,this._buildIdpRequest())}_linkToIdToken(p,v){return Vs(p,this._buildIdpRequest(v))}_getReauthenticationResolver(p){return Vs(p,this._buildIdpRequest())}_buildIdpRequest(p){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(v.idToken=p),v}}function Ia(T){return K(T.auth,new Pu(T),T.bypassAuthState)}function Xs(T){const{auth:p,user:v}=T;return et(v,p,"internal-error"),ao(v,new Pu(T),T.bypassAuthState)}function su(T){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,y.Z)(function*(T){const{auth:p,user:v}=T;return et(v,p,"internal-error"),Ni(v,new Pu(T),T.bypassAuthState)})).apply(this,arguments)}class rl{constructor(p,v,R,te,pe=!1){this.auth=p,this.resolver=R,this.user=te,this.bypassAuthState=pe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var p=this;return new Promise(function(){var v=(0,y.Z)(function*(R,te){p.pendingPromise={resolve:R,reject:te};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(pe){p.reject(pe)}});return function(R,te){return v.apply(this,arguments)}}())}onAuthEvent(p){var v=this;return(0,y.Z)(function*(){const{urlResponse:R,sessionId:te,postBody:pe,tenantId:ot,error:xt,type:hn}=p;if(xt)return void v.reject(xt);const Un={auth:v.auth,requestUri:R,sessionId:te,tenantId:ot||void 0,postBody:pe||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(hn)(Un))}catch(Cr){v.reject(Cr)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ia;case"linkViaPopup":case"linkViaRedirect":return su;case"reauthViaPopup":case"reauthViaRedirect":return Xs;default:we(this.auth,"internal-error")}}resolve(p){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const To=new Ln(2e3,1e4);function Ta(T,p,v){return Za.apply(this,arguments)}function Za(){return(Za=(0,y.Z)(function*(T,p,v){const R=_n(T);Et(T,p,Zs);const te=sa(R,v);return new Gs(R,"signInViaPopup",p,te).executeNotNull()})).apply(this,arguments)}function ba(T,p,v){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);Et(R.auth,p,Zs);const te=sa(R.auth,v);return new Gs(R.auth,"reauthViaPopup",p,te,R).executeNotNull()})).apply(this,arguments)}function ou(T,p,v){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);Et(R.auth,p,Zs);const te=sa(R.auth,v);return new Gs(R.auth,"linkViaPopup",p,te,R).executeNotNull()})).apply(this,arguments)}let Gs=(()=>{class T extends rl{constructor(v,R,te,pe,ot){super(v,R,pe,ot),this.provider=te,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var v=this;return(0,y.Z)(function*(){const R=yield v.execute();return et(R,v.auth,"internal-error"),R})()}onExecution(){var v=this;return(0,y.Z)(function*(){bt(1===v.filter.length,"Popup operations only handle one event");const R=We();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],R),v.authWindow.associatedEvent=R,v.resolver._originValidation(v.auth).catch(te=>{v.reject(te)}),v.resolver._isIframeWebStorageSupported(v.auth,te=>{te||v.reject(Me(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const v=()=>{var R,te;this.pollId=(null===(te=null===(R=this.authWindow)||void 0===R?void 0:R.window)||void 0===te?void 0:te.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,To.get())};v()}}return T.currentPopupAction=null,T})();const Cu=new Map;class Ku extends rl{constructor(p,v,R=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,R),this.eventId=null}execute(){var p=()=>super.execute,v=this;return(0,y.Z)(function*(){let R=Cu.get(v.auth._key());if(!R){try{const pe=(yield function qu(T,p){return Zu.apply(this,arguments)}(v.resolver,v.auth))?yield p().call(v):null;R=()=>Promise.resolve(pe)}catch(te){R=()=>Promise.reject(te)}Cu.set(v.auth._key(),R)}return v.bypassAuthState||Cu.set(v.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(p){var v=()=>super.onAuthEvent,R=this;return(0,y.Z)(function*(){if("signInViaRedirect"===p.type)return v().call(R,p);if("unknown"!==p.type){if(p.eventId){const te=yield R.auth._redirectUserForId(p.eventId);if(te)return R.user=te,v().call(R,p);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Zu(){return(Zu=(0,y.Z)(function*(T,p){const v=au(p),R=sl(T);if(!(yield R._isAvailable()))return!1;const te="true"===(yield R._get(v));return yield R._remove(v),te})).apply(this,arguments)}function Nu(T,p){return il.apply(this,arguments)}function il(){return(il=(0,y.Z)(function*(T,p){return sl(T)._set(au(p),"true")})).apply(this,arguments)}function Il(){Cu.clear()}function Yu(T,p){Cu.set(T._key(),p)}function sl(T){return fi(T._redirectPersistence)}function au(T){return zr("pendingRedirect",T.config.apiKey,T.name)}function q(T,p,v){return function E(T,p,v){return C.apply(this,arguments)}(T,p,v)}function C(){return(C=(0,y.Z)(function*(T,p,v){const R=_n(T);Et(T,p,Zs),yield R._initializationPromise;const te=sa(R,v);return yield Nu(te,R),te._openRedirect(R,p,"signInViaRedirect")})).apply(this,arguments)}function k(T,p,v){return function re(T,p,v){return ye.apply(this,arguments)}(T,p,v)}function ye(){return(ye=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);Et(R.auth,p,Zs),yield R.auth._initializationPromise;const te=sa(R.auth,v);yield Nu(te,R.auth);const pe=yield rr(R);return te._openRedirect(R.auth,p,"reauthViaRedirect",pe)})).apply(this,arguments)}function Be(T,p,v){return function je(T,p,v){return st.apply(this,arguments)}(T,p,v)}function st(){return(st=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);Et(R.auth,p,Zs),yield R.auth._initializationPromise;const te=sa(R.auth,v);yield ns(!1,R,p.providerId),yield Nu(te,R.auth);const pe=yield rr(R);return te._openRedirect(R.auth,p,"linkViaRedirect",pe)})).apply(this,arguments)}function Nt(T,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,y.Z)(function*(T,p){return yield _n(T)._initializationPromise,qn(T,p,!1)})).apply(this,arguments)}function qn(T,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,y.Z)(function*(T,p,v=!1){const R=_n(T),te=sa(R,p),ot=yield new Ku(R,te,v).execute();return ot&&!v&&(delete ot.user._redirectEventId,yield R._persistUserIfCurrent(ot.user),yield R._setRedirectUser(null,p)),ot})).apply(this,arguments)}function rr(T){return Er.apply(this,arguments)}function Er(){return(Er=(0,y.Z)(function*(T){const p=We(`${T.uid}:::`);return T._redirectEventId=p,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),p})).apply(this,arguments)}class wr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let v=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(p,R)&&(v=!0,this.sendToConsumer(p,R),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function hi(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return us(T);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=p,v=!0)),v}sendToConsumer(p,v){var R;if(p.error&&!us(p)){const te=(null===(R=p.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";v.onError(Me(this.auth,te))}else v.onAuthEvent(p)}isEventForConsumer(p,v){const R=null===v.eventId||!!p.eventId&&p.eventId===v.eventId;return v.filter.includes(p.type)&&R}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ai(p))}saveEventToCache(p){this.cachedEventUids.add(Ai(p)),this.lastProcessedEventTime=Date.now()}}function Ai(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(p=>p).join("-")}function us({type:T,error:p}){return"unknown"===T&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ps(T){return Da.apply(this,arguments)}function Da(){return(Da=(0,y.Z)(function*(T,p={}){return ve(T,"GET","/v1/projects",p)})).apply(this,arguments)}const is=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,No=/^https?/;function yi(){return(yi=(0,y.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:p}=yield Ps(T);for(const v of p)try{if(eo(v))return}catch(R){}we(T,"unauthorized-domain")})).apply(this,arguments)}function eo(T){const p=Fn(),{protocol:v,hostname:R}=new URL(p);if(T.startsWith("chrome-extension://")){const ot=new URL(T);return""===ot.hostname&&""===R?"chrome-extension:"===v&&T.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===v&&ot.hostname===R}if(!No.test(v))return!1;if(is.test(T))return R===T;const te=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(R)}const oa=new Ln(3e4,6e4);function ps(){const T=en().___jsl;if(null==T?void 0:T.H)for(const p of Object.keys(T.H))if(T.H[p].r=T.H[p].r||[],T.H[p].L=T.H[p].L||[],T.H[p].r=[...T.H[p].L],T.CP)for(let v=0;v<T.CP.length;v++)T.CP[v]=null}let Sa=null;function Oo(T){return Sa=Sa||function yo(T){return new Promise((p,v)=>{var R,te,pe;function ot(){ps(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ps(),v(Me(T,"network-request-failed"))},timeout:oa.get()})}if(null===(te=null===(R=en().gapi)||void 0===R?void 0:R.iframes)||void 0===te?void 0:te.Iframe)p(gapi.iframes.getContext());else{if(!(null===(pe=en().gapi)||void 0===pe?void 0:pe.load)){const xt=Br("iframefcb");return en()[xt]=()=>{gapi.load?ot():v(Me(T,"network-request-failed"))},vr(`https://apis.google.com/js/api.js?onload=${xt}`).catch(hn=>v(hn))}ot()}}).catch(p=>{throw Sa=null,p})}(T),Sa}const Hn=new Ln(5e3,15e3),ni={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ws=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lo(T){const p=T.config;et(p.authDomain,T,"auth-domain-config-required");const v=p.emulator?fr(p,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,R={apiKey:p.apiKey,appName:T.name,v:X.SDK_VERSION},te=ws.get(T.config.apiHost);te&&(R.eid=te);const pe=T._getFrameworks();return pe.length&&(R.fw=pe.join(",")),`${v}?${(0,B.xO)(R).slice(1)}`}function ko(){return ko=(0,y.Z)(function*(T){const p=yield Oo(T),v=en().gapi;return et(v,T,"internal-error"),p.open({where:document.body,url:lo(T),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ni,dontclear:!0},R=>new Promise(function(){var te=(0,y.Z)(function*(pe,ot){yield R.restyle({setHideOnLeave:!1});const xt=Me(T,"network-request-failed"),hn=en().setTimeout(()=>{ot(xt)},Hn.get());function Un(){en().clearTimeout(hn),pe(R)}R.ping(Un).then(Un,()=>{ot(xt)})});return function(pe,ot){return te.apply(this,arguments)}}()))}),ko.apply(this,arguments)}const b={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ut{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}const ei=encodeURIComponent("fac");function Nr(T,p,v,R,te,pe){return bo.apply(this,arguments)}function bo(){return(bo=(0,y.Z)(function*(T,p,v,R,te,pe){et(T.config.authDomain,T,"auth-domain-config-required"),et(T.config.apiKey,T,"invalid-api-key");const ot={apiKey:T.config.apiKey,appName:T.name,authType:v,redirectUrl:R,v:X.SDK_VERSION,eventId:te};if(p instanceof Zs){p.setDefaultLanguage(T.languageCode),ot.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(ot.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Cr,Or]of Object.entries(pe||{}))ot[Cr]=Or}if(p instanceof Kr){const Cr=p.getScopes().filter(Or=>""!==Or);Cr.length>0&&(ot.scopes=Cr.join(","))}T.tenantId&&(ot.tid=T.tenantId);const xt=ot;for(const Cr of Object.keys(xt))void 0===xt[Cr]&&delete xt[Cr];const hn=yield T._getAppCheckToken(),Un=hn?`#${ei}=${encodeURIComponent(hn)}`:"";return`${co(T)}?${(0,B.xO)(xt).slice(1)}${Un}`})).apply(this,arguments)}function co({config:T}){return T.emulator?fr(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}const Ds="webStorageSupport",Hi=class Iu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y,this._completeRedirectFn=qn,this._overrideRedirectResult=Yu}_openPopup(p,v,R,te){var pe=this;return(0,y.Z)(function*(){var ot;bt(null===(ot=pe.eventManagers[p._key()])||void 0===ot?void 0:ot.manager,"_initialize() not called before _openPopup()");const xt=yield Nr(p,v,R,Fn(),te);return function kt(T,p,v,R=500,te=600){const pe=Math.max((window.screen.availHeight-te)/2,0).toString(),ot=Math.max((window.screen.availWidth-R)/2,0).toString();let xt="";const hn=Object.assign(Object.assign({},b),{width:R.toString(),height:te.toString(),top:pe,left:ot}),Un=(0,B.z$)().toLowerCase();v&&(xt=G(Un)?"_blank":v),he(Un)&&(p=p||"http://localhost",hn.scrollbars="yes");const Cr=Object.entries(hn).reduce((ki,[aa,al])=>`${ki}${aa}=${al},`,"");if(function un(T=(0,B.z$)()){var p;return zt(T)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Un)&&"_self"!==xt)return function mn(T,p){const v=document.createElement("a");v.href=T,v.target=p;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(R)}(p||"",xt),new ut(null);const Or=window.open(p||"",xt,Cr);et(Or,T,"popup-blocked");try{Or.focus()}catch(ki){}return new ut(Or)}(p,xt,We())})()}_openRedirect(p,v,R,te){var pe=this;return(0,y.Z)(function*(){return yield pe._originValidation(p),function yr(T){en().location.href=T}(yield Nr(p,v,R,Fn(),te)),new Promise(()=>{})})()}_initialize(p){const v=p._key();if(this.eventManagers[v]){const{manager:te,promise:pe}=this.eventManagers[v];return te?Promise.resolve(te):(bt(pe,"If manager is not set, promise should be"),pe)}const R=this.initAndGetManager(p);return this.eventManagers[v]={promise:R},R.catch(()=>{delete this.eventManagers[v]}),R}initAndGetManager(p){var v=this;return(0,y.Z)(function*(){const R=yield function Wo(T){return ko.apply(this,arguments)}(p),te=new wr(p);return R.register("authEvent",pe=>(et(null==pe?void 0:pe.authEvent,p,"invalid-auth-event"),{status:te.onEvent(pe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[p._key()]={manager:te},v.iframes[p._key()]=R,te})()}_isIframeWebStorageSupported(p,v){this.iframes[p._key()].send(Ds,{type:Ds},te=>{var pe;const ot=null===(pe=null==te?void 0:te[0])||void 0===pe?void 0:pe[Ds];void 0!==ot&&v(!!ot),we(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const v=p._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function ji(T){return yi.apply(this,arguments)}(p)),this.originValidationPromises[v]}get _shouldInitProactively(){return $n()||ge()||zt()}};class ja extends class Do{constructor(p){this.factorId=p}_process(p,v,R){switch(v.type){case"enroll":return this._finalizeEnroll(p,v.credential,R);case"signin":return this._finalizeSignIn(p,v.credential);default:return Ut("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ja(p)}_finalizeEnroll(p,v,R){return function _u(T,p){return ve(T,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(T,p))}(p,{idToken:v,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,v){return function nr(T,p){return ve(T,"POST","/v2/accounts/mfaSignIn:finalize",Qe(T,p))}(p,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ol=(()=>{class T{constructor(){}static assertion(v){return ja._fromCredential(v)}}return T.FACTOR_ID="phone",T})();var Qi="@firebase/auth";class xc{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var v=this;return(0,y.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const v=this.auth.onIdTokenChanged(R=>{p((null==R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,v),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const v=this.internalListeners.get(p);!v||(this.internalListeners.delete(p),v(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function Tl(T){(0,X._registerComponent)(new Ke.wA("auth",(p,{options:v})=>{const R=p.getProvider("app").getImmediate(),te=p.getProvider("heartbeat"),pe=p.getProvider("app-check-internal"),{apiKey:ot,authDomain:xt}=R.options;et(ot&&!ot.includes(":"),"invalid-api-key",{appName:R.name});const hn={apiKey:ot,authDomain:xt,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pi(T)},Un=new Mr(R,te,pe,hn);return function xr(T,p){const v=(null==p?void 0:p.persistence)||[],R=(Array.isArray(v)?v:[v]).map(fi);(null==p?void 0:p.errorMap)&&T._updateErrorMap(p.errorMap),T._initializeWithPersistence(R,null==p?void 0:p.popupRedirectResolver)}(Un,v),Un},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,v,R)=>{p.getProvider("auth-internal").initialize()})),(0,X._registerComponent)(new Ke.wA("auth-internal",p=>{const v=_n(p.getProvider("auth").getImmediate());return new xc(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,X.registerVersion)(Qi,"0.23.2",function _a(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,X.registerVersion)(Qi,"0.23.2","esm2017")}("Browser")},2090:(fn,ct,$)=>{$.d(ct,{$s:()=>fi,BH:()=>it,DV:()=>Fr,G6:()=>fr,GJ:()=>or,L:()=>at,LL:()=>De,P0:()=>Xt,Pz:()=>Me,Sg:()=>Et,UG:()=>Ut,UI:()=>Jn,US:()=>Ke,Wl:()=>tn,Yr:()=>Ln,ZB:()=>tt,ZR:()=>ve,aH:()=>we,b$:()=>Ht,cI:()=>gt,dS:()=>Yt,eu:()=>an,g5:()=>X,gK:()=>Mn,gQ:()=>ze,h$:()=>Ge,hl:()=>Xn,hu:()=>B,jU:()=>bt,m9:()=>zr,ne:()=>lt,p$:()=>Ce,pd:()=>Fe,r3:()=>jn,ru:()=>Fn,tV:()=>be,uI:()=>et,ug:()=>Rr,vZ:()=>Dn,w1:()=>rn,w9:()=>pr,xO:()=>Xi,xb:()=>wn,z$:()=>pt,zI:()=>nt,zd:()=>Pt});const B=function(Pe,Ae){if(!Pe)throw X(Ae)},X=function(Pe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Pe)},ie=function(Pe){const Ae=[];let he=0;for(let ge=0;ge<Pe.length;ge++){let G=Pe.charCodeAt(ge);G<128?Ae[he++]=G:G<2048?(Ae[he++]=G>>6|192,Ae[he++]=63&G|128):55296==(64512&G)&&ge+1<Pe.length&&56320==(64512&Pe.charCodeAt(ge+1))?(G=65536+((1023&G)<<10)+(1023&Pe.charCodeAt(++ge)),Ae[he++]=G>>18|240,Ae[he++]=G>>12&63|128,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128):(Ae[he++]=G>>12|224,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128)}return Ae},Ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Pe,Ae){if(!Array.isArray(Pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const he=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let G=0;G<Pe.length;G+=3){const ne=Pe[G],se=G+1<Pe.length,Se=se?Pe[G+1]:0,dt=G+2<Pe.length,zt=dt?Pe[G+2]:0;let Rn=(15&Se)<<2|zt>>6,$n=63&zt;dt||($n=64,se||(Rn=64)),ge.push(he[ne>>2],he[(3&ne)<<4|Se>>4],he[Rn],he[$n])}return ge.join("")},encodeString(Pe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Pe):this.encodeByteArray(ie(Pe),Ae)},decodeString(Pe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Pe):function(Pe){const Ae=[];let he=0,ge=0;for(;he<Pe.length;){const G=Pe[he++];if(G<128)Ae[ge++]=String.fromCharCode(G);else if(G>191&&G<224){const ne=Pe[he++];Ae[ge++]=String.fromCharCode((31&G)<<6|63&ne)}else if(G>239&&G<365){const dt=((7&G)<<18|(63&Pe[he++])<<12|(63&Pe[he++])<<6|63&Pe[he++])-65536;Ae[ge++]=String.fromCharCode(55296+(dt>>10)),Ae[ge++]=String.fromCharCode(56320+(1023&dt))}else{const ne=Pe[he++],se=Pe[he++];Ae[ge++]=String.fromCharCode((15&G)<<12|(63&ne)<<6|63&se)}}return Ae.join("")}(this.decodeStringToByteArray(Pe,Ae))},decodeStringToByteArray(Pe,Ae){this.init_();const he=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let G=0;G<Pe.length;){const ne=he[Pe.charAt(G++)],Se=G<Pe.length?he[Pe.charAt(G)]:0;++G;const zt=G<Pe.length?he[Pe.charAt(G)]:64;++G;const un=G<Pe.length?he[Pe.charAt(G)]:64;if(++G,null==ne||null==Se||null==zt||null==un)throw new Je;ge.push(ne<<2|Se>>4),64!==zt&&(ge.push(Se<<4&240|zt>>2),64!==un&&ge.push(zt<<6&192|un))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Pe=0;Pe<this.ENCODED_VALS.length;Pe++)this.byteToCharMap_[Pe]=this.ENCODED_VALS.charAt(Pe),this.charToByteMap_[this.byteToCharMap_[Pe]]=Pe,this.byteToCharMapWebSafe_[Pe]=this.ENCODED_VALS_WEBSAFE.charAt(Pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Pe]]=Pe,Pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Pe)]=Pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Pe)]=Pe)}}};class Je extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ge=function(Pe){const Ae=ie(Pe);return Ke.encodeByteArray(Ae,!0)},at=function(Pe){return Ge(Pe).replace(/\./g,"")},be=function(Pe){try{return Ke.decodeString(Pe,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function Ce(Pe){return tt(void 0,Pe)}function tt(Pe,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Pe&&(Pe={});break;case Array:Pe=[];break;default:return Ae}for(const he in Ae)!Ae.hasOwnProperty(he)||!Lt(he)||(Pe[he]=tt(Pe[he],Ae[he]));return Pe}function Lt(Pe){return"__proto__"!==Pe}const Ft=()=>{try{return function ft(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Pe=process.env.__FIREBASE_DEFAULTS__;return Pe?JSON.parse(Pe):void 0})()||(()=>{if("undefined"==typeof document)return;let Pe;try{Pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(he){return}const Ae=Pe&&be(Pe[1]);return Ae&&JSON.parse(Ae)})()}catch(Pe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Pe}`)}},Xt=Pe=>{const Ae=(Pe=>{var Ae,he;return null===(he=null===(Ae=Ft())||void 0===Ae?void 0:Ae.emulatorHosts)||void 0===he?void 0:he[Pe]})(Pe);if(!Ae)return;const he=Ae.lastIndexOf(":");if(he<=0||he+1===Ae.length)throw new Error(`Invalid host ${Ae} with no separate hostname and port!`);const ge=parseInt(Ae.substring(he+1),10);return"["===Ae[0]?[Ae.substring(1,he-1),ge]:[Ae.substring(0,he),ge]},we=()=>{var Pe;return null===(Pe=Ft())||void 0===Pe?void 0:Pe.config},Me=Pe=>{var Ae;return null===(Ae=Ft())||void 0===Ae?void 0:Ae[`_${Pe}`]};class it{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,he)=>{this.resolve=Ae,this.reject=he})}wrapCallback(Ae){return(he,ge)=>{he?this.reject(he):this.resolve(ge),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(he):Ae(he,ge))}}}function Et(Pe,Ae){if(Pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=Ae||"demo-project",G=Pe.iat||0,ne=Pe.sub||Pe.user_id;if(!ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:G,exp:G+3600,auth_time:G,sub:ne,user_id:ne,firebase:{sign_in_provider:"custom",identities:{}}},Pe);return[at(JSON.stringify({alg:"none",type:"JWT"})),at(JSON.stringify(se)),""].join(".")}function pt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function et(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function Ut(){var Pe;const Ae=null===(Pe=Ft())||void 0===Pe?void 0:Pe.forceEnvironment;if("node"===Ae)return!0;if("browser"===Ae)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(he){return!1}}function bt(){return"object"==typeof self&&self.self===self}function Fn(){const Pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Pe&&void 0!==Pe.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rn(){const Pe=pt();return Pe.indexOf("MSIE ")>=0||Pe.indexOf("Trident/")>=0}function Ln(){return!1}function fr(){return!Ut()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xn(){try{return"object"==typeof indexedDB}catch(Pe){return!1}}function an(){return new Promise((Pe,Ae)=>{try{let he=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(ge);G.onsuccess=()=>{G.result.close(),he||self.indexedDB.deleteDatabase(ge),Pe(!0)},G.onupgradeneeded=()=>{he=!1},G.onerror=()=>{var ne;Ae((null===(ne=G.error)||void 0===ne?void 0:ne.message)||"")}}catch(he){Ae(he)}})}function nt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ve extends Error{constructor(Ae,he,ge){super(he),this.code=Ae,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor(Ae,he,ge){this.service=Ae,this.serviceName=he,this.errors=ge}create(Ae,...he){const ge=he[0]||{},G=`${this.service}/${Ae}`,ne=this.errors[Ae],se=ne?function Ee(Pe,Ae){return Pe.replace(xe,(he,ge)=>{const G=Ae[ge];return null!=G?String(G):`<${ge}?>`})}(ne,ge):"Error";return new ve(G,`${this.serviceName}: ${se} (${G}).`,ge)}}const xe=/\{\$([^}]+)}/g;function gt(Pe){return JSON.parse(Pe)}function tn(Pe){return JSON.stringify(Pe)}const cn=function(Pe){let Ae={},he={},ge={},G="";try{const ne=Pe.split(".");Ae=gt(be(ne[0])||""),he=gt(be(ne[1])||""),G=ne[2],ge=he.d||{},delete he.d}catch(ne){}return{header:Ae,claims:he,data:ge,signature:G}},pr=function(Pe){const he=cn(Pe).claims;return!!he&&"object"==typeof he&&he.hasOwnProperty("iat")},or=function(Pe){const Ae=cn(Pe).claims;return"object"==typeof Ae&&!0===Ae.admin};function jn(Pe,Ae){return Object.prototype.hasOwnProperty.call(Pe,Ae)}function Fr(Pe,Ae){if(Object.prototype.hasOwnProperty.call(Pe,Ae))return Pe[Ae]}function wn(Pe){for(const Ae in Pe)if(Object.prototype.hasOwnProperty.call(Pe,Ae))return!1;return!0}function Jn(Pe,Ae,he){const ge={};for(const G in Pe)Object.prototype.hasOwnProperty.call(Pe,G)&&(ge[G]=Ae.call(he,Pe[G],G,Pe));return ge}function Dn(Pe,Ae){if(Pe===Ae)return!0;const he=Object.keys(Pe),ge=Object.keys(Ae);for(const G of he){if(!ge.includes(G))return!1;const ne=Pe[G],se=Ae[G];if(On(ne)&&On(se)){if(!Dn(ne,se))return!1}else if(ne!==se)return!1}for(const G of ge)if(!he.includes(G))return!1;return!0}function On(Pe){return null!==Pe&&"object"==typeof Pe}function Xi(Pe){const Ae=[];for(const[he,ge]of Object.entries(Pe))Array.isArray(ge)?ge.forEach(G=>{Ae.push(encodeURIComponent(he)+"="+encodeURIComponent(G))}):Ae.push(encodeURIComponent(he)+"="+encodeURIComponent(ge));return Ae.length?"&"+Ae.join("&"):""}function Pt(Pe){const Ae={};return Pe.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[G,ne]=ge.split("=");Ae[decodeURIComponent(G)]=decodeURIComponent(ne)}}),Ae}function Fe(Pe){const Ae=Pe.indexOf("?");if(!Ae)return"";const he=Pe.indexOf("#",Ae);return Pe.substring(Ae,he>0?he:void 0)}class ze{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ae=1;Ae<this.blockSize;++Ae)this.pad_[Ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ae,he){he||(he=0);const ge=this.W_;if("string"==typeof Ae)for(let un=0;un<16;un++)ge[un]=Ae.charCodeAt(he)<<24|Ae.charCodeAt(he+1)<<16|Ae.charCodeAt(he+2)<<8|Ae.charCodeAt(he+3),he+=4;else for(let un=0;un<16;un++)ge[un]=Ae[he]<<24|Ae[he+1]<<16|Ae[he+2]<<8|Ae[he+3],he+=4;for(let un=16;un<80;un++){const Rn=ge[un-3]^ge[un-8]^ge[un-14]^ge[un-16];ge[un]=4294967295&(Rn<<1|Rn>>>31)}let zt,gn,G=this.chain_[0],ne=this.chain_[1],se=this.chain_[2],Se=this.chain_[3],dt=this.chain_[4];for(let un=0;un<80;un++){un<40?un<20?(zt=Se^ne&(se^Se),gn=1518500249):(zt=ne^se^Se,gn=1859775393):un<60?(zt=ne&se|Se&(ne|se),gn=2400959708):(zt=ne^se^Se,gn=3395469782);const Rn=(G<<5|G>>>27)+zt+dt+gn+ge[un]&4294967295;dt=Se,Se=se,se=4294967295&(ne<<30|ne>>>2),ne=G,G=Rn}this.chain_[0]=this.chain_[0]+G&4294967295,this.chain_[1]=this.chain_[1]+ne&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Se&4294967295,this.chain_[4]=this.chain_[4]+dt&4294967295}update(Ae,he){if(null==Ae)return;void 0===he&&(he=Ae.length);const ge=he-this.blockSize;let G=0;const ne=this.buf_;let se=this.inbuf_;for(;G<he;){if(0===se)for(;G<=ge;)this.compress_(Ae,G),G+=this.blockSize;if("string"==typeof Ae){for(;G<he;)if(ne[se]=Ae.charCodeAt(G),++se,++G,se===this.blockSize){this.compress_(ne),se=0;break}}else for(;G<he;)if(ne[se]=Ae[G],++se,++G,se===this.blockSize){this.compress_(ne),se=0;break}}this.inbuf_=se,this.total_+=he}digest(){const Ae=[];let he=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let G=this.blockSize-1;G>=56;G--)this.buf_[G]=255&he,he/=256;this.compress_(this.buf_);let ge=0;for(let G=0;G<5;G++)for(let ne=24;ne>=0;ne-=8)Ae[ge]=this.chain_[G]>>ne&255,++ge;return Ae}}function lt(Pe,Ae){const he=new At(Pe,Ae);return he.subscribe.bind(he)}class At{constructor(Ae,he){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=he,this.task.then(()=>{Ae(this)}).catch(ge=>{this.error(ge)})}next(Ae){this.forEachObserver(he=>{he.next(Ae)})}error(Ae){this.forEachObserver(he=>{he.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,he,ge){let G;if(void 0===Ae&&void 0===he&&void 0===ge)throw new Error("Missing Observer.");G=function nn(Pe,Ae){if("object"!=typeof Pe||null===Pe)return!1;for(const he of Ae)if(he in Pe&&"function"==typeof Pe[he])return!0;return!1}(Ae,["next","error","complete"])?Ae:{next:Ae,error:he,complete:ge},void 0===G.next&&(G.next=Ur),void 0===G.error&&(G.error=Ur),void 0===G.complete&&(G.complete=Ur);const ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(se){}}),this.observers.push(G),ne}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let he=0;he<this.observers.length;he++)this.sendOne(he,Ae)}sendOne(Ae,he){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{he(this.observers[Ae])}catch(ge){"undefined"!=typeof console&&console.error&&console.error(ge)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ur(){}function Mn(Pe,Ae){return`${Pe} failed: ${Ae} argument `}const Yt=function(Pe){const Ae=[];let he=0;for(let ge=0;ge<Pe.length;ge++){let G=Pe.charCodeAt(ge);if(G>=55296&&G<=56319){const ne=G-55296;ge++,B(ge<Pe.length,"Surrogate pair missing trail surrogate."),G=65536+(ne<<10)+(Pe.charCodeAt(ge)-56320)}G<128?Ae[he++]=G:G<2048?(Ae[he++]=G>>6|192,Ae[he++]=63&G|128):G<65536?(Ae[he++]=G>>12|224,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128):(Ae[he++]=G>>18|240,Ae[he++]=G>>12&63|128,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128)}return Ae},Rr=function(Pe){let Ae=0;for(let he=0;he<Pe.length;he++){const ge=Pe.charCodeAt(he);ge<128?Ae++:ge<2048?Ae+=2:ge>=55296&&ge<=56319?(Ae+=4,he++):Ae+=3}return Ae};function fi(Pe,Ae=1e3,he=2){const ge=Ae*Math.pow(he,Pe),G=Math.round(.5*ge*(Math.random()-.5)*2);return Math.min(144e5,ge+G)}function zr(Pe){return Pe&&Pe._delegate?Pe._delegate:Pe}},5089:(fn,ct,$)=>{$.d(ct,{e:()=>Ue});var y=$(2340),B=$(5e3),X=$(520),ie=$(2729);let Ue=(()=>{class Ke{constructor(Ge,at){this.http=Ge,this.router=at,this.logoutloading=!1}login(Ge){return this.http.post(`${y.N.apiUrl}login_teacher`,Ge)}logout(){this.logoutloading=!0,this.http.post(`${y.N.apiUrl}logout`,{}).subscribe(Ge=>{localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]),this.logoutloading=!1})}}return Ke.\u0275fac=function(Ge){return new(Ge||Ke)(B.LFG(X.eN),B.LFG(ie.F0))},Ke.\u0275prov=B.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})()},4466:(fn,ct,$)=>{$.d(ct,{m:()=>Ge});var y=$(9808),B=$(2729),X=$(2382),ie=$(520),Ue=$(2290),Ke=$(377),Je=$(5e3);let Ge=(()=>{class at{}return at.\u0275fac=function(Ce){return new(Ce||at)},at.\u0275mod=Je.oAB({type:at}),at.\u0275inj=Je.cJS({providers:[y.uU],imports:[[Ke.TE,y.ez,B.Bz,X.UX,X.u5,ie.JF,Ue.Rh.forRoot()],Ke.TE,X.UX,X.u5,ie.JF,Ue.Rh]}),at})()},2340:(fn,ct,$)=>{$.d(ct,{N:()=>y});const y={production:!0,apiUrl:"https://drastiiq8.com/demo-dev/Drasti-Backend/public/api/"}},359:(fn,ct,$)=>{var y=$(2313),B=$(5e3),X=$(2729);let ie=(()=>{class q{constructor(C){this.router=C}canActivate(C,k){return!localStorage.getItem("drastitoken")||(this.router.navigate(["/"]),!1)}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(X.F0))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})(),Ue=(()=>{class q{constructor(C){this.title=C}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - \u062f\u0631\u0627\u0633\u062a\u064a")}}return q.\u0275fac=function(C){return new(C||q)(B.Y36(y.Dx))},q.\u0275cmp=B.Xpm({type:q,selectors:[["app-notfound"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(C,k){1&C&&(B.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),B._uU(4,"\u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627."),B.qZA()()()())},styles:[""]}),q})(),Ke=(()=>{class q{constructor(C){this.router=C}canActivate(C,k){return!!localStorage.getItem("drastitoken")||(this.router.navigate(["/auth/login"]),!1)}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(X.F0))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();const Je=[{path:"",loadChildren:()=>$.e(129).then($.bind($,3129)).then(q=>q.HomeModule),canActivate:[Ke]},{path:"material-chat/:id/:name",loadChildren:()=>Promise.all([$.e(592),$.e(359)]).then($.bind($,8359)).then(q=>q.ChattingModule),canActivate:[Ke]},{path:"all-msgs",loadChildren:()=>Promise.all([$.e(592),$.e(522)]).then($.bind($,522)).then(q=>q.AllMsgsModule),canActivate:[Ke]},{path:"auth",loadChildren:()=>$.e(836).then($.bind($,7836)).then(q=>q.AuthModule),canActivate:[ie]},{path:"**",component:Ue}];let Ge=(()=>{class q{}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q}),q.\u0275inj=B.cJS({imports:[[X.Bz.forRoot(Je,{initialNavigation:"enabled",scrollPositionRestoration:"enabled"})],X.Bz]}),q})();var at=$(259),be=$(6197),Ce=$(5089);let tt=(()=>{class q{constructor(C){this.authService=C}ngOnInit(){}}return q.\u0275fac=function(C){return new(C||q)(B.Y36(Ce.e))},q.\u0275cmp=B.Xpm({type:q,selectors:[["app-navbar"]],decls:15,vars:1,consts:[[1,"container","mt-2","d-md-none",2,"direction","ltr","text-align","left"],[1,"container","flx"],[1,"logoParent"],["routerLink","/","aria-label","\u062f\u0631\u0627\u0633\u062a\u064a"],["src","assets/logo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"mainlogo"],[1,"loginParent",2,"display","flex","gap","10px","align-items","center"],["routerLink","/"],[1,"mx-2"],["routerLink","/all-msgs"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(C,k){1&C&&(B.TgZ(0,"nav"),B._UZ(1,"div",0),B.TgZ(2,"div",1)(3,"div",2)(4,"a",3),B._UZ(5,"img",4),B.qZA()(),B.TgZ(6,"div",5)(7,"a",6),B._uU(8,"\u0645\u0648\u0627\u062f\u064a"),B.qZA(),B._UZ(9,"span",7),B.TgZ(10,"a",8),B._uU(11,"\u0627\u0644\u0627\u0633\u0626\u0644\u0629"),B.qZA(),B._UZ(12,"span",7),B.TgZ(13,"button",9),B.NdJ("click",function(){return k.authService.logout()}),B._uU(14," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),B.qZA()()()()),2&C&&(B.xp6(13),B.Q6J("disabled",k.authService.logoutloading))},directives:[X.yS],styles:[""]}),q})(),Lt=(()=>{class q{constructor(C){this.router=C}ngOnInit(){this.app=(0,at.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,be.N8)(this.app),localStorage.getItem("drastitoken")&&(0,be.t8)((0,be.iH)(this.db,`Auth/${localStorage.getItem("userid")}`),{user_token:localStorage.getItem("drastitoken")});const C=(0,be.iH)(this.db,"Auth");(0,be.jM)(C,k=>{var re;if(localStorage.getItem("drastitoken")){const ye=k.val();for(let Be in ye)Be==localStorage.getItem("userid")&&(this.savedToken=ye[Be]);(null===(re=this.savedToken)||void 0===re?void 0:re.user_token)!=localStorage.getItem("drastitoken")&&(localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]))}})}}return q.\u0275fac=function(C){return new(C||q)(B.Y36(X.F0))},q.\u0275cmp=B.Xpm({type:q,selectors:[["app-root"]],decls:2,vars:0,template:function(C,k){1&C&&B._UZ(0,"app-navbar")(1,"router-outlet")},directives:[tt,X.lC],styles:[""]}),q})();var ft=$(1777);const ht=!1;function mt(q){return new B.vHH(3e3,ht)}function wn(){return"undefined"!=typeof window&&void 0!==window.document}function Jn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dn(q){switch(q.length){case 0:return new ft.ZN;case 1:return q[0];default:return new ft.ZE(q)}}function On(q,E,C,k,re={},ye={}){const Be=[],je=[];let st=-1,Nt=null;if(k.forEach(Pn=>{const qn=Pn.offset,mr=qn==st,rr=mr&&Nt||{};Object.keys(Pn).forEach(Er=>{let ur=Er,wr=Pn[Er];if("offset"!==Er)switch(ur=E.normalizePropertyName(ur,Be),wr){case ft.k1:wr=re[Er];break;case ft.l3:wr=ye[Er];break;default:wr=E.normalizeStyleValue(Er,ur,wr,Be)}rr[ur]=wr}),mr||je.push(rr),Nt=rr,st=qn}),Be.length)throw function De(q){return new B.vHH(3502,ht)}();return je}function li(q,E,C,k){switch(E){case"start":q.onStart(()=>k(C&&Xi(C,"start",q)));break;case"done":q.onDone(()=>k(C&&Xi(C,"done",q)));break;case"destroy":q.onDestroy(()=>k(C&&Xi(C,"destroy",q)))}}function Xi(q,E,C){const k=C.totalTime,ye=Pt(q.element,q.triggerName,q.fromState,q.toState,E||q.phaseName,null==k?q.totalTime:k,!!C.disabled),Be=q._data;return null!=Be&&(ye._data=Be),ye}function Pt(q,E,C,k,re="",ye=0,Be){return{element:q,triggerName:E,fromState:C,toState:k,phaseName:re,totalTime:ye,disabled:!!Be}}function Fe(q,E,C){let k;return q instanceof Map?(k=q.get(E),k||q.set(E,k=C)):(k=q[E],k||(k=q[E]=C)),k}function ze(q){const E=q.indexOf(":");return[q.substring(1,E),q.substr(E+1)]}let lt=(q,E)=>!1,At=(q,E,C)=>[],Wt=null;function nn(q){const E=q.parentNode||q.host;return E===Wt?null:E}(Jn()||"undefined"!=typeof Element)&&(wn()?(Wt=(()=>document.documentElement)(),lt=(q,E)=>{for(;E;){if(E===q)return!0;E=nn(E)}return!1}):lt=(q,E)=>q.contains(E),At=(q,E,C)=>{if(C)return Array.from(q.querySelectorAll(E));const k=q.querySelector(E);return k?[k]:[]});let Mn=null,ci=!1;function Tr(q){Mn||(Mn=function Ar(){return"undefined"!=typeof document?document.body:null}()||{},ci=!!Mn.style&&"WebkitAppearance"in Mn.style);let E=!0;return Mn.style&&!function er(q){return"ebkit"==q.substring(1,6)}(q)&&(E=q in Mn.style,!E&&ci&&(E="Webkit"+q.charAt(0).toUpperCase()+q.substr(1)in Mn.style)),E}const Yt=lt,Rr=At;let _r=(()=>{class q{validateStyleProperty(C){return Tr(C)}matchesElement(C,k){return!1}containsElement(C,k){return Yt(C,k)}getParentElement(C){return nn(C)}query(C,k,re){return Rr(C,k,re)}computeStyle(C,k,re){return re||""}animate(C,k,re,ye,Be,je=[],st){return new ft.ZN(re,ye)}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})(),tr=(()=>{class q{}return q.NOOP=new _r,q})();const Fi="ng-enter",Ri="ng-leave",zr="ng-trigger",Pe=".ng-trigger",Ae="ng-animating",he=".ng-animating";function ge(q){if("number"==typeof q)return q;const E=q.match(/^(-?[\.\d]+)(m?s)/);return!E||E.length<2?0:G(parseFloat(E[1]),E[2])}function G(q,E){return"s"===E?1e3*q:q}function ne(q,E,C){return q.hasOwnProperty("duration")?q:function se(q,E,C){let re,ye=0,Be="";if("string"==typeof q){const je=q.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===je)return E.push(mt()),{duration:0,delay:0,easing:""};re=G(parseFloat(je[1]),je[2]);const st=je[3];null!=st&&(ye=G(parseFloat(st),je[4]));const Nt=je[5];Nt&&(Be=Nt)}else re=q;if(!C){let je=!1,st=E.length;re<0&&(E.push(function Ft(){return new B.vHH(3100,ht)}()),je=!0),ye<0&&(E.push(function dn(){return new B.vHH(3101,ht)}()),je=!0),je&&E.splice(st,0,mt())}return{duration:re,delay:ye,easing:Be}}(q,E,C)}function Se(q,E={}){return Object.keys(q).forEach(C=>{E[C]=q[C]}),E}function zt(q,E,C={}){if(E)for(let k in q)C[k]=q[k];else Se(q,C);return C}function gn(q,E,C){return C?E+":"+C+";":""}function un(q){let E="";for(let C=0;C<q.style.length;C++){const k=q.style.item(C);E+=gn(0,k,q.style.getPropertyValue(k))}for(const C in q.style)q.style.hasOwnProperty(C)&&!C.startsWith("_")&&(E+=gn(0,ar(C),q.style[C]));q.setAttribute("style",E)}function Rn(q,E,C){q.style&&(Object.keys(E).forEach(k=>{const re=Tn(k);C&&!C.hasOwnProperty(k)&&(C[k]=q.style[re]),q.style[re]=E[k]}),Jn()&&un(q))}function $n(q,E){q.style&&(Object.keys(E).forEach(C=>{const k=Tn(C);q.style[k]=""}),Jn()&&un(q))}function Jr(q){return Array.isArray(q)?1==q.length?q[0]:(0,ft.vP)(q):q}const Tt=new RegExp("{{\\s*(.+?)\\s*}}","g");function yt(q){let E=[];if("string"==typeof q){let C;for(;C=Tt.exec(q);)E.push(C[1]);Tt.lastIndex=0}return E}function Vt(q,E,C){const k=q.toString(),re=k.replace(Tt,(ye,Be)=>{let je=E[Be];return E.hasOwnProperty(Be)||(C.push(function we(q){return new B.vHH(3003,ht)}()),je=""),je.toString()});return re==k?q:re}function Dt(q){const E=[];let C=q.next();for(;!C.done;)E.push(C.value),C=q.next();return E}const sn=/-+([a-z0-9])/g;function Tn(q){return q.replace(sn,(...E)=>E[1].toUpperCase())}function ar(q){return q.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Br(q,E,C){switch(E.type){case 7:return q.visitTrigger(E,C);case 0:return q.visitState(E,C);case 1:return q.visitTransition(E,C);case 2:return q.visitSequence(E,C);case 3:return q.visitGroup(E,C);case 4:return q.visitAnimate(E,C);case 5:return q.visitKeyframes(E,C);case 6:return q.visitStyle(E,C);case 8:return q.visitReference(E,C);case 9:return q.visitAnimateChild(E,C);case 10:return q.visitAnimateRef(E,C);case 11:return q.visitQuery(E,C);case 12:return q.visitStagger(E,C);default:throw function Me(q){return new B.vHH(3004,ht)}()}}function ai(q,E){return window.getComputedStyle(q)[E]}function ir(q,E){const C=[];return"string"==typeof q?q.split(/\s*,\s*/).forEach(k=>function $i(q,E,C){if(":"==q[0]){const st=function xr(q,E){switch(q){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(C,k)=>parseFloat(k)>parseFloat(C);case":decrement":return(C,k)=>parseFloat(k)<parseFloat(C);default:return E.push(function an(q){return new B.vHH(3016,ht)}()),"* => *"}}(q,C);if("function"==typeof st)return void E.push(st);q=st}const k=q.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==k||k.length<4)return C.push(function Xn(q){return new B.vHH(3015,ht)}()),E;const re=k[1],ye=k[2],Be=k[3];E.push(Ze(re,Be));"<"==ye[0]&&!("*"==re&&"*"==Be)&&E.push(Ze(Be,re))}(k,C,E)):C.push(q),C}const ti=new Set(["true","1"]),Xe=new Set(["false","0"]);function Ze(q,E){const C=ti.has(q)||Xe.has(q),k=ti.has(E)||Xe.has(E);return(re,ye)=>{let Be="*"==q||q==re,je="*"==E||E==ye;return!Be&&C&&"boolean"==typeof re&&(Be=re?ti.has(q):Xe.has(q)),!je&&k&&"boolean"==typeof ye&&(je=ye?ti.has(E):Xe.has(E)),Be&&je}}const _t=new RegExp("s*:selfs*,?","g");function Ot(q,E,C,k){return new Lr(q).build(E,C,k)}class Lr{constructor(E){this._driver=E}build(E,C,k){const re=new di(C);this._resetContextStyleTimingState(re);const ye=Br(this,Jr(E),re);return re.unsupportedCSSPropertiesFound.size&&re.unsupportedCSSPropertiesFound.keys(),ye}_resetContextStyleTimingState(E){E.currentQuerySelector="",E.collectedStyles={},E.collectedStyles[""]={},E.currentTime=0}visitTrigger(E,C){let k=C.queryCount=0,re=C.depCount=0;const ye=[],Be=[];return"@"==E.name.charAt(0)&&C.errors.push(function Et(){return new B.vHH(3006,ht)}()),E.definitions.forEach(je=>{if(this._resetContextStyleTimingState(C),0==je.type){const st=je,Nt=st.name;Nt.toString().split(/\s*,\s*/).forEach(Pn=>{st.name=Pn,ye.push(this.visitState(st,C))}),st.name=Nt}else if(1==je.type){const st=this.visitTransition(je,C);k+=st.queryCount,re+=st.depCount,Be.push(st)}else C.errors.push(function pt(){return new B.vHH(3007,ht)}())}),{type:7,name:E.name,states:ye,transitions:Be,queryCount:k,depCount:re,options:null}}visitState(E,C){const k=this.visitStyle(E.styles,C),re=E.options&&E.options.params||null;if(k.containsDynamicStyles){const ye=new Set,Be=re||{};k.styles.forEach(je=>{if(ui(je)){const st=je;Object.keys(st).forEach(Nt=>{yt(st[Nt]).forEach(Pn=>{Be.hasOwnProperty(Pn)||ye.add(Pn)})})}}),ye.size&&(Dt(ye.values()),C.errors.push(function et(q,E){return new B.vHH(3008,ht)}()))}return{type:0,name:E.name,style:k,options:re?{params:re}:null}}visitTransition(E,C){C.queryCount=0,C.depCount=0;const k=Br(this,Jr(E.animation),C);return{type:1,matchers:ir(E.expr,C.errors),animation:k,queryCount:C.queryCount,depCount:C.depCount,options:ds(E.options)}}visitSequence(E,C){return{type:2,steps:E.steps.map(k=>Br(this,k,C)),options:ds(E.options)}}visitGroup(E,C){const k=C.currentTime;let re=0;const ye=E.steps.map(Be=>{C.currentTime=k;const je=Br(this,Be,C);return re=Math.max(re,C.currentTime),je});return C.currentTime=re,{type:3,steps:ye,options:ds(E.options)}}visitAnimate(E,C){const k=function Wi(q,E){if(q.hasOwnProperty("duration"))return q;if("number"==typeof q)return Fs(ne(q,E).duration,0,"");const C=q;if(C.split(/\s+/).some(ye=>"{"==ye.charAt(0)&&"{"==ye.charAt(1))){const ye=Fs(0,0,"");return ye.dynamic=!0,ye.strValue=C,ye}const re=ne(C,E);return Fs(re.duration,re.delay,re.easing)}(E.timings,C.errors);C.currentAnimateTimings=k;let re,ye=E.styles?E.styles:(0,ft.oB)({});if(5==ye.type)re=this.visitKeyframes(ye,C);else{let Be=E.styles,je=!1;if(!Be){je=!0;const Nt={};k.easing&&(Nt.easing=k.easing),Be=(0,ft.oB)(Nt)}C.currentTime+=k.duration+k.delay;const st=this.visitStyle(Be,C);st.isEmptyStep=je,re=st}return C.currentAnimateTimings=null,{type:4,timings:k,style:re,options:null}}visitStyle(E,C){const k=this._makeStyleAst(E,C);return this._validateStyleAst(k,C),k}_makeStyleAst(E,C){const k=[];Array.isArray(E.styles)?E.styles.forEach(Be=>{"string"==typeof Be?Be==ft.l3?k.push(Be):C.errors.push(function Ut(q){return new B.vHH(3002,ht)}()):k.push(Be)}):k.push(E.styles);let re=!1,ye=null;return k.forEach(Be=>{if(ui(Be)){const je=Be,st=je.easing;if(st&&(ye=st,delete je.easing),!re)for(let Nt in je)if(je[Nt].toString().indexOf("{{")>=0){re=!0;break}}}),{type:6,styles:k,easing:ye,offset:E.offset,containsDynamicStyles:re,options:null}}_validateStyleAst(E,C){const k=C.currentAnimateTimings;let re=C.currentTime,ye=C.currentTime;k&&ye>0&&(ye-=k.duration+k.delay),E.styles.forEach(Be=>{"string"!=typeof Be&&Object.keys(Be).forEach(je=>{if(!this._driver.validateStyleProperty(je))return delete Be[je],void C.unsupportedCSSPropertiesFound.add(je);const st=C.collectedStyles[C.currentQuerySelector],Nt=st[je];let Pn=!0;Nt&&(ye!=re&&ye>=Nt.startTime&&re<=Nt.endTime&&(C.errors.push(function Fn(q,E,C,k,re){return new B.vHH(3010,ht)}()),Pn=!1),ye=Nt.startTime),Pn&&(st[je]={startTime:ye,endTime:re}),C.options&&function Pi(q,E,C){const k=E.params||{},re=yt(q);re.length&&re.forEach(ye=>{k.hasOwnProperty(ye)||C.push(function Xt(q){return new B.vHH(3001,ht)}())})}(Be[je],C.options,C.errors)})})}visitKeyframes(E,C){const k={type:5,styles:[],options:null};if(!C.currentAnimateTimings)return C.errors.push(function Ht(){return new B.vHH(3011,ht)}()),k;let ye=0;const Be=[];let je=!1,st=!1,Nt=0;const Pn=E.steps.map(Ai=>{const us=this._makeStyleAst(Ai,C);let hi=null!=us.offset?us.offset:function Ks(q){if("string"==typeof q)return null;let E=null;if(Array.isArray(q))q.forEach(C=>{if(ui(C)&&C.hasOwnProperty("offset")){const k=C;E=parseFloat(k.offset),delete k.offset}});else if(ui(q)&&q.hasOwnProperty("offset")){const C=q;E=parseFloat(C.offset),delete C.offset}return E}(us.styles),Ps=0;return null!=hi&&(ye++,Ps=us.offset=hi),st=st||Ps<0||Ps>1,je=je||Ps<Nt,Nt=Ps,Be.push(Ps),us});st&&C.errors.push(function Nn(){return new B.vHH(3012,ht)}()),je&&C.errors.push(function rn(){return new B.vHH(3200,ht)}());const qn=E.steps.length;let mr=0;ye>0&&ye<qn?C.errors.push(function Zr(){return new B.vHH(3202,ht)}()):0==ye&&(mr=1/(qn-1));const rr=qn-1,Er=C.currentTime,ur=C.currentAnimateTimings,wr=ur.duration;return Pn.forEach((Ai,us)=>{const hi=mr>0?us==rr?1:mr*us:Be[us],Ps=hi*wr;C.currentTime=Er+ur.delay+Ps,ur.duration=Ps,this._validateStyleAst(Ai,C),Ai.offset=hi,k.styles.push(Ai)}),k}visitReference(E,C){return{type:8,animation:Br(this,Jr(E.animation),C),options:ds(E.options)}}visitAnimateChild(E,C){return C.depCount++,{type:9,options:ds(E.options)}}visitAnimateRef(E,C){return{type:10,animation:this.visitReference(E.animation,C),options:ds(E.options)}}visitQuery(E,C){const k=C.currentQuerySelector,re=E.options||{};C.queryCount++,C.currentQuery=E;const[ye,Be]=function hr(q){const E=!!q.split(/\s*,\s*/).find(C=>":self"==C);return E&&(q=q.replace(_t,"")),q=q.replace(/@\*/g,Pe).replace(/@\w+/g,C=>Pe+"-"+C.substr(1)).replace(/:animating/g,he),[q,E]}(E.selector);C.currentQuerySelector=k.length?k+" "+ye:ye,Fe(C.collectedStyles,C.currentQuerySelector,{});const je=Br(this,Jr(E.animation),C);return C.currentQuery=null,C.currentQuerySelector=k,{type:11,selector:ye,limit:re.limit||0,optional:!!re.optional,includeSelf:Be,animation:je,originalSelector:E.selector,options:ds(E.options)}}visitStagger(E,C){C.currentQuery||C.errors.push(function Ln(){return new B.vHH(3013,ht)}());const k="full"===E.timings?{duration:0,delay:0,easing:"full"}:ne(E.timings,C.errors,!0);return{type:12,animation:Br(this,Jr(E.animation),C),timings:k,options:null}}}class di{constructor(E){this.errors=E,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ui(q){return!Array.isArray(q)&&"object"==typeof q}function ds(q){return q?(q=Se(q)).params&&(q.params=function br(q){return q?Se(q):null}(q.params)):q={},q}function Fs(q,E,C){return{duration:q,delay:E,easing:C}}function os(q,E,C,k,re,ye,Be=null,je=!1){return{type:1,element:q,keyframes:E,preStyleProps:C,postStyleProps:k,duration:re,delay:ye,totalTime:re+ye,easing:Be,subTimeline:je}}class ho{constructor(){this._map=new Map}get(E){return this._map.get(E)||[]}append(E,C){let k=this._map.get(E);k||this._map.set(E,k=[]),k.push(...C)}has(E){return this._map.has(E)}clear(){this._map.clear()}}const ca=new RegExp(":enter","g"),Vo=new RegExp(":leave","g");function hs(q,E,C,k,re,ye={},Be={},je,st,Nt=[]){return(new kr).buildKeyframes(q,E,C,k,re,ye,Be,je,st,Nt)}class kr{buildKeyframes(E,C,k,re,ye,Be,je,st,Nt,Pn=[]){Nt=Nt||new ho;const qn=new ro(E,C,Nt,re,ye,Pn,[]);qn.options=st,qn.currentTimeline.setStyles([Be],null,qn.errors,st),Br(this,k,qn);const mr=qn.timelines.filter(rr=>rr.containsAnimation());if(Object.keys(je).length){let rr;for(let Er=mr.length-1;Er>=0;Er--){const ur=mr[Er];if(ur.element===C){rr=ur;break}}rr&&!rr.allowOnlyTimelineStyles()&&rr.setStyles([je],null,qn.errors,st)}return mr.length?mr.map(rr=>rr.buildKeyframes()):[os(C,[],[],[],0,0,"",!1)]}visitTrigger(E,C){}visitState(E,C){}visitTransition(E,C){}visitAnimateChild(E,C){const k=C.subInstructions.get(C.element);if(k){const re=C.createSubContext(E.options),ye=C.currentTimeline.currentTime,Be=this._visitSubInstructions(k,re,re.options);ye!=Be&&C.transformIntoNewTimeline(Be)}C.previousNode=E}visitAnimateRef(E,C){const k=C.createSubContext(E.options);k.transformIntoNewTimeline(),this.visitReference(E.animation,k),C.transformIntoNewTimeline(k.currentTimeline.currentTime),C.previousNode=E}_visitSubInstructions(E,C,k){let ye=C.currentTimeline.currentTime;const Be=null!=k.duration?ge(k.duration):null,je=null!=k.delay?ge(k.delay):null;return 0!==Be&&E.forEach(st=>{const Nt=C.appendInstructionToTimeline(st,Be,je);ye=Math.max(ye,Nt.duration+Nt.delay)}),ye}visitReference(E,C){C.updateOptions(E.options,!0),Br(this,E.animation,C),C.previousNode=E}visitSequence(E,C){const k=C.subContextCount;let re=C;const ye=E.options;if(ye&&(ye.params||ye.delay)&&(re=C.createSubContext(ye),re.transformIntoNewTimeline(),null!=ye.delay)){6==re.previousNode.type&&(re.currentTimeline.snapshotCurrentStyles(),re.previousNode=Ls);const Be=ge(ye.delay);re.delayNextStep(Be)}E.steps.length&&(E.steps.forEach(Be=>Br(this,Be,re)),re.currentTimeline.applyStylesToKeyframe(),re.subContextCount>k&&re.transformIntoNewTimeline()),C.previousNode=E}visitGroup(E,C){const k=[];let re=C.currentTimeline.currentTime;const ye=E.options&&E.options.delay?ge(E.options.delay):0;E.steps.forEach(Be=>{const je=C.createSubContext(E.options);ye&&je.delayNextStep(ye),Br(this,Be,je),re=Math.max(re,je.currentTimeline.currentTime),k.push(je.currentTimeline)}),k.forEach(Be=>C.currentTimeline.mergeTimelineCollectedStyles(Be)),C.transformIntoNewTimeline(re),C.previousNode=E}_visitTiming(E,C){if(E.dynamic){const k=E.strValue;return ne(C.params?Vt(k,C.params,C.errors):k,C.errors)}return{duration:E.duration,delay:E.delay,easing:E.easing}}visitAnimate(E,C){const k=C.currentAnimateTimings=this._visitTiming(E.timings,C),re=C.currentTimeline;k.delay&&(C.incrementTime(k.delay),re.snapshotCurrentStyles());const ye=E.style;5==ye.type?this.visitKeyframes(ye,C):(C.incrementTime(k.duration),this.visitStyle(ye,C),re.applyStylesToKeyframe()),C.currentAnimateTimings=null,C.previousNode=E}visitStyle(E,C){const k=C.currentTimeline,re=C.currentAnimateTimings;!re&&k.getCurrentStyleProperties().length&&k.forwardFrame();const ye=re&&re.easing||E.easing;E.isEmptyStep?k.applyEmptyStep(ye):k.setStyles(E.styles,ye,C.errors,C.options),C.previousNode=E}visitKeyframes(E,C){const k=C.currentAnimateTimings,re=C.currentTimeline.duration,ye=k.duration,je=C.createSubContext().currentTimeline;je.easing=k.easing,E.styles.forEach(st=>{je.forwardTime((st.offset||0)*ye),je.setStyles(st.styles,st.easing,C.errors,C.options),je.applyStylesToKeyframe()}),C.currentTimeline.mergeTimelineCollectedStyles(je),C.transformIntoNewTimeline(re+ye),C.previousNode=E}visitQuery(E,C){const k=C.currentTimeline.currentTime,re=E.options||{},ye=re.delay?ge(re.delay):0;ye&&(6===C.previousNode.type||0==k&&C.currentTimeline.getCurrentStyleProperties().length)&&(C.currentTimeline.snapshotCurrentStyles(),C.previousNode=Ls);let Be=k;const je=C.invokeQuery(E.selector,E.originalSelector,E.limit,E.includeSelf,!!re.optional,C.errors);C.currentQueryTotal=je.length;let st=null;je.forEach((Nt,Pn)=>{C.currentQueryIndex=Pn;const qn=C.createSubContext(E.options,Nt);ye&&qn.delayNextStep(ye),Nt===C.element&&(st=qn.currentTimeline),Br(this,E.animation,qn),qn.currentTimeline.applyStylesToKeyframe(),Be=Math.max(Be,qn.currentTimeline.currentTime)}),C.currentQueryIndex=0,C.currentQueryTotal=0,C.transformIntoNewTimeline(Be),st&&(C.currentTimeline.mergeTimelineCollectedStyles(st),C.currentTimeline.snapshotCurrentStyles()),C.previousNode=E}visitStagger(E,C){const k=C.parentContext,re=C.currentTimeline,ye=E.timings,Be=Math.abs(ye.duration),je=Be*(C.currentQueryTotal-1);let st=Be*C.currentQueryIndex;switch(ye.duration<0?"reverse":ye.easing){case"reverse":st=je-st;break;case"full":st=k.currentStaggerTime}const Pn=C.currentTimeline;st&&Pn.delayNextStep(st);const qn=Pn.currentTime;Br(this,E.animation,C),C.previousNode=E,k.currentStaggerTime=re.currentTime-qn+(re.startTime-k.currentTimeline.startTime)}}const Ls={};class ro{constructor(E,C,k,re,ye,Be,je,st){this._driver=E,this.element=C,this.subInstructions=k,this._enterClassName=re,this._leaveClassName=ye,this.errors=Be,this.timelines=je,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ls,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=st||new io(this._driver,C,0),je.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(E,C){if(!E)return;const k=E;let re=this.options;null!=k.duration&&(re.duration=ge(k.duration)),null!=k.delay&&(re.delay=ge(k.delay));const ye=k.params;if(ye){let Be=re.params;Be||(Be=this.options.params={}),Object.keys(ye).forEach(je=>{(!C||!Be.hasOwnProperty(je))&&(Be[je]=Vt(ye[je],Be,this.errors))})}}_copyOptions(){const E={};if(this.options){const C=this.options.params;if(C){const k=E.params={};Object.keys(C).forEach(re=>{k[re]=C[re]})}}return E}createSubContext(E=null,C,k){const re=C||this.element,ye=new ro(this._driver,re,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(re,k||0));return ye.previousNode=this.previousNode,ye.currentAnimateTimings=this.currentAnimateTimings,ye.options=this._copyOptions(),ye.updateOptions(E),ye.currentQueryIndex=this.currentQueryIndex,ye.currentQueryTotal=this.currentQueryTotal,ye.parentContext=this,this.subContextCount++,ye}transformIntoNewTimeline(E){return this.previousNode=Ls,this.currentTimeline=this.currentTimeline.fork(this.element,E),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(E,C,k){const re={duration:null!=C?C:E.duration,delay:this.currentTimeline.currentTime+(null!=k?k:0)+E.delay,easing:""},ye=new Vi(this._driver,E.element,E.keyframes,E.preStyleProps,E.postStyleProps,re,E.stretchStartingKeyframe);return this.timelines.push(ye),re}incrementTime(E){this.currentTimeline.forwardTime(this.currentTimeline.duration+E)}delayNextStep(E){E>0&&this.currentTimeline.delayNextStep(E)}invokeQuery(E,C,k,re,ye,Be){let je=[];if(re&&je.push(this.element),E.length>0){E=(E=E.replace(ca,"."+this._enterClassName)).replace(Vo,"."+this._leaveClassName);let Nt=this._driver.query(this.element,E,1!=k);0!==k&&(Nt=k<0?Nt.slice(Nt.length+k,Nt.length):Nt.slice(0,k)),je.push(...Nt)}return!ye&&0==je.length&&Be.push(function fr(q){return new B.vHH(3014,ht)}()),je}}class io{constructor(E,C,k,re){this._driver=E,this.element=C,this.startTime=k,this._elementTimelineStylesLookup=re,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(C),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(C,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(E){const C=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||C?(this.forwardTime(this.currentTime+E),C&&this.snapshotCurrentStyles()):this.startTime+=E}fork(E,C){return this.applyStylesToKeyframe(),new io(this._driver,E,C||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(E){this.applyStylesToKeyframe(),this.duration=E,this._loadKeyframe()}_updateStyle(E,C){this._localTimelineStyles[E]=C,this._globalTimelineStyles[E]=C,this._styleSummary[E]={time:this.currentTime,value:C}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(E){E&&(this._previousKeyframe.easing=E),Object.keys(this._globalTimelineStyles).forEach(C=>{this._backFill[C]=this._globalTimelineStyles[C]||ft.l3,this._currentKeyframe[C]=ft.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(E,C,k,re){C&&(this._previousKeyframe.easing=C);const ye=re&&re.params||{},Be=function Gi(q,E){const C={};let k;return q.forEach(re=>{"*"===re?(k=k||Object.keys(E),k.forEach(ye=>{C[ye]=ft.l3})):zt(re,!1,C)}),C}(E,this._globalTimelineStyles);Object.keys(Be).forEach(je=>{const st=Vt(Be[je],ye,k);this._pendingStyles[je]=st,this._localTimelineStyles.hasOwnProperty(je)||(this._backFill[je]=this._globalTimelineStyles.hasOwnProperty(je)?this._globalTimelineStyles[je]:ft.l3),this._updateStyle(je,st)})}applyStylesToKeyframe(){const E=this._pendingStyles,C=Object.keys(E);0!=C.length&&(this._pendingStyles={},C.forEach(k=>{this._currentKeyframe[k]=E[k]}),Object.keys(this._localTimelineStyles).forEach(k=>{this._currentKeyframe.hasOwnProperty(k)||(this._currentKeyframe[k]=this._localTimelineStyles[k])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(E=>{const C=this._localTimelineStyles[E];this._pendingStyles[E]=C,this._updateStyle(E,C)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const E=[];for(let C in this._currentKeyframe)E.push(C);return E}mergeTimelineCollectedStyles(E){Object.keys(E._styleSummary).forEach(C=>{const k=this._styleSummary[C],re=E._styleSummary[C];(!k||re.time>k.time)&&this._updateStyle(C,re.value)})}buildKeyframes(){this.applyStylesToKeyframe();const E=new Set,C=new Set,k=1===this._keyframes.size&&0===this.duration;let re=[];this._keyframes.forEach((je,st)=>{const Nt=zt(je,!0);Object.keys(Nt).forEach(Pn=>{const qn=Nt[Pn];qn==ft.k1?E.add(Pn):qn==ft.l3&&C.add(Pn)}),k||(Nt.offset=st/this.duration),re.push(Nt)});const ye=E.size?Dt(E.values()):[],Be=C.size?Dt(C.values()):[];if(k){const je=re[0],st=Se(je);je.offset=0,st.offset=1,re=[je,st]}return os(this.element,re,ye,Be,this.duration,this.startTime,this.easing,!1)}}class Vi extends io{constructor(E,C,k,re,ye,Be,je=!1){super(E,C,Be.delay),this.keyframes=k,this.preStyleProps=re,this.postStyleProps=ye,this._stretchStartingKeyframe=je,this.timings={duration:Be.duration,delay:Be.delay,easing:Be.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let E=this.keyframes,{delay:C,duration:k,easing:re}=this.timings;if(this._stretchStartingKeyframe&&C){const ye=[],Be=k+C,je=C/Be,st=zt(E[0],!1);st.offset=0,ye.push(st);const Nt=zt(E[0],!1);Nt.offset=Vs(je),ye.push(Nt);const Pn=E.length-1;for(let qn=1;qn<=Pn;qn++){let mr=zt(E[qn],!1);mr.offset=Vs((C+mr.offset*k)/Be),ye.push(mr)}k=Be,C=0,re="",E=ye}return os(this.element,E,this.preStyleProps,this.postStyleProps,k,C,re,!0)}}function Vs(q,E=3){const C=Math.pow(10,E-1);return Math.round(q*C)/C}class ri{}class so extends ri{normalizePropertyName(E,C){return Tn(E)}normalizeStyleValue(E,C,k,re){let ye="";const Be=k.toString().trim();if(Ss[C]&&0!==k&&"0"!==k)if("number"==typeof k)ye="px";else{const je=k.match(/^[+-]?[\d\.]+([a-z]*)$/);je&&0==je[1].length&&re.push(function it(q,E){return new B.vHH(3005,ht)}())}return Be+ye}}const Ss=(()=>function As(q){const E={};return q.forEach(C=>E[C]=!0),E}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function qs(q,E,C,k,re,ye,Be,je,st,Nt,Pn,qn,mr){return{type:0,element:q,triggerName:E,isRemovalTransition:re,fromState:C,fromStyles:ye,toState:k,toStyles:Be,timelines:je,queriedElements:st,preStyleProps:Nt,postStyleProps:Pn,totalTime:qn,errors:mr}}const ys={};class vo{constructor(E,C,k){this._triggerName=E,this.ast=C,this._stateStyles=k}match(E,C,k,re){return function Ro(q,E,C,k,re){return q.some(ye=>ye(E,C,k,re))}(this.ast.matchers,E,C,k,re)}buildStyles(E,C,k){const re=this._stateStyles["*"],ye=this._stateStyles[E],Be=re?re.buildStyles(C,k):{};return ye?ye.buildStyles(C,k):Be}build(E,C,k,re,ye,Be,je,st,Nt,Pn){const qn=[],mr=this.ast.options&&this.ast.options.params||ys,Er=this.buildStyles(k,je&&je.params||ys,qn),ur=st&&st.params||ys,wr=this.buildStyles(re,ur,qn),Ai=new Set,us=new Map,hi=new Map,Ps="void"===re,Da={params:Object.assign(Object.assign({},mr),ur)},is=Pn?[]:hs(E,C,this.ast.animation,ye,Be,Er,wr,Da,Nt,qn);let No=0;if(is.forEach(yi=>{No=Math.max(yi.duration+yi.delay,No)}),qn.length)return qs(C,this._triggerName,k,re,Ps,Er,wr,[],[],us,hi,No,qn);is.forEach(yi=>{const eo=yi.element,oa=Fe(us,eo,{});yi.preStyleProps.forEach(yo=>oa[yo]=!0);const ps=Fe(hi,eo,{});yi.postStyleProps.forEach(yo=>ps[yo]=!0),eo!==C&&Ai.add(eo)});const ji=Dt(Ai.values());return qs(C,this._triggerName,k,re,Ps,Er,wr,is,ji,us,hi,No)}}class Bo{constructor(E,C,k){this.styles=E,this.defaultParams=C,this.normalizer=k}buildStyles(E,C){const k={},re=Se(this.defaultParams);return Object.keys(E).forEach(ye=>{const Be=E[ye];null!=Be&&(re[ye]=Be)}),this.styles.styles.forEach(ye=>{if("string"!=typeof ye){const Be=ye;Object.keys(Be).forEach(je=>{let st=Be[je];st.length>1&&(st=Vt(st,re,C));const Nt=this.normalizer.normalizePropertyName(je,C);st=this.normalizer.normalizeStyleValue(je,Nt,st,C),k[Nt]=st})}}),k}}class Ki{constructor(E,C,k){this.name=E,this.ast=C,this._normalizer=k,this.transitionFactories=[],this.states={},C.states.forEach(re=>{this.states[re.name]=new Bo(re.style,re.options&&re.options.params||{},k)}),Is(this.states,"true","1"),Is(this.states,"false","0"),C.transitions.forEach(re=>{this.transitionFactories.push(new vo(E,re,this.states))}),this.fallbackTransition=function Bs(q,E,C){return new vo(q,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Be,je)=>!0],options:null,queryCount:0,depCount:0},E)}(E,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(E,C,k,re){return this.transitionFactories.find(Be=>Be.match(E,C,k,re))||null}matchStyles(E,C,k){return this.fallbackTransition.buildStyles(E,C,k)}}function Is(q,E,C){q.hasOwnProperty(E)?q.hasOwnProperty(C)||(q[C]=q[E]):q.hasOwnProperty(C)&&(q[E]=q[C])}const ii=new ho;class Eo{constructor(E,C,k){this.bodyNode=E,this._driver=C,this._normalizer=k,this._animations={},this._playersById={},this.players=[]}register(E,C){const k=[],ye=Ot(this._driver,C,k,[]);if(k.length)throw function Ee(q){return new B.vHH(3503,ht)}();this._animations[E]=ye}_buildPlayer(E,C,k){const re=E.element,ye=On(0,this._normalizer,0,E.keyframes,C,k);return this._driver.animate(re,ye,E.duration,E.delay,E.easing,[],!0)}create(E,C,k={}){const re=[],ye=this._animations[E];let Be;const je=new Map;if(ye?(Be=hs(this._driver,C,ye,Fi,Ri,{},{},k,ii,re),Be.forEach(Pn=>{const qn=Fe(je,Pn.element,{});Pn.postStyleProps.forEach(mr=>qn[mr]=null)})):(re.push(function xe(){return new B.vHH(3300,ht)}()),Be=[]),re.length)throw function gt(q){return new B.vHH(3504,ht)}();je.forEach((Pn,qn)=>{Object.keys(Pn).forEach(mr=>{Pn[mr]=this._driver.computeStyle(qn,mr,ft.l3)})});const Nt=Dn(Be.map(Pn=>{const qn=je.get(Pn.element);return this._buildPlayer(Pn,{},qn)}));return this._playersById[E]=Nt,Nt.onDestroy(()=>this.destroy(E)),this.players.push(Nt),Nt}destroy(E){const C=this._getPlayer(E);C.destroy(),delete this._playersById[E];const k=this.players.indexOf(C);k>=0&&this.players.splice(k,1)}_getPlayer(E){const C=this._playersById[E];if(!C)throw function tn(q){return new B.vHH(3301,ht)}();return C}listen(E,C,k,re){const ye=Pt(C,"","","");return li(this._getPlayer(E),k,ye,re),()=>{}}command(E,C,k,re){if("register"==k)return void this.register(E,re[0]);if("create"==k)return void this.create(E,C,re[0]||{});const ye=this._getPlayer(E);switch(k){case"play":ye.play();break;case"pause":ye.pause();break;case"reset":ye.reset();break;case"restart":ye.restart();break;case"finish":ye.finish();break;case"init":ye.init();break;case"setPosition":ye.setPosition(parseFloat(re[0]));break;case"destroy":this.destroy(E)}}}const Zs="ng-animate-queued",ts="ng-animate-disabled",F=[],ae={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},j={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ce="__ng_removed";class Oe{constructor(E,C=""){this.namespaceId=C;const k=E&&E.hasOwnProperty("value");if(this.value=function Vr(q){return null!=q?q:null}(k?E.value:E),k){const ye=Se(E);delete ye.value,this.options=ye}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(E){const C=E.params;if(C){const k=this.options.params;Object.keys(C).forEach(re=>{null==k[re]&&(k[re]=C[re])})}}}const Rt="void",jt=new Oe(Rt);class bn{constructor(E,C,k){this.id=E,this.hostElement=C,this._engine=k,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+E,Bn(C,this._hostClassName)}listen(E,C,k,re){if(!this._triggers.hasOwnProperty(C))throw function cn(q,E){return new B.vHH(3302,ht)}();if(null==k||0==k.length)throw function Sn(q){return new B.vHH(3303,ht)}();if(!function bi(q){return"start"==q||"done"==q}(k))throw function Wn(q,E){return new B.vHH(3400,ht)}();const ye=Fe(this._elementListeners,E,[]),Be={name:C,phase:k,callback:re};ye.push(Be);const je=Fe(this._engine.statesByElement,E,{});return je.hasOwnProperty(C)||(Bn(E,zr),Bn(E,zr+"-"+C),je[C]=jt),()=>{this._engine.afterFlush(()=>{const st=ye.indexOf(Be);st>=0&&ye.splice(st,1),this._triggers[C]||delete je[C]})}}register(E,C){return!this._triggers[E]&&(this._triggers[E]=C,!0)}_getTrigger(E){const C=this._triggers[E];if(!C)throw function pr(q){return new B.vHH(3401,ht)}();return C}trigger(E,C,k,re=!0){const ye=this._getTrigger(C),Be=new Pr(this.id,C,E);let je=this._engine.statesByElement.get(E);je||(Bn(E,zr),Bn(E,zr+"-"+C),this._engine.statesByElement.set(E,je={}));let st=je[C];const Nt=new Oe(k,this.id);if(!(k&&k.hasOwnProperty("value"))&&st&&Nt.absorbOptions(st.options),je[C]=Nt,st||(st=jt),Nt.value!==Rt&&st.value===Nt.value){if(!function K(q,E){const C=Object.keys(q),k=Object.keys(E);if(C.length!=k.length)return!1;for(let re=0;re<C.length;re++){const ye=C[re];if(!E.hasOwnProperty(ye)||q[ye]!==E[ye])return!1}return!0}(st.params,Nt.params)){const ur=[],wr=ye.matchStyles(st.value,st.params,ur),Ai=ye.matchStyles(Nt.value,Nt.params,ur);ur.length?this._engine.reportError(ur):this._engine.afterFlush(()=>{$n(E,wr),Rn(E,Ai)})}return}const mr=Fe(this._engine.playersByElement,E,[]);mr.forEach(ur=>{ur.namespaceId==this.id&&ur.triggerName==C&&ur.queued&&ur.destroy()});let rr=ye.matchTransition(st.value,Nt.value,E,Nt.params),Er=!1;if(!rr){if(!re)return;rr=ye.fallbackTransition,Er=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:C,transition:rr,fromState:st,toState:Nt,player:Be,isFallbackTransition:Er}),Er||(Bn(E,Zs),Be.onStart(()=>{ns(E,Zs)})),Be.onDone(()=>{let ur=this.players.indexOf(Be);ur>=0&&this.players.splice(ur,1);const wr=this._engine.playersByElement.get(E);if(wr){let Ai=wr.indexOf(Be);Ai>=0&&wr.splice(Ai,1)}}),this.players.push(Be),mr.push(Be),Be}deregister(E){delete this._triggers[E],this._engine.statesByElement.forEach((C,k)=>{delete C[E]}),this._elementListeners.forEach((C,k)=>{this._elementListeners.set(k,C.filter(re=>re.name!=E))})}clearElementCache(E){this._engine.statesByElement.delete(E),this._elementListeners.delete(E);const C=this._engine.playersByElement.get(E);C&&(C.forEach(k=>k.destroy()),this._engine.playersByElement.delete(E))}_signalRemovalForInnerTriggers(E,C){const k=this._engine.driver.query(E,Pe,!0);k.forEach(re=>{if(re[ce])return;const ye=this._engine.fetchNamespacesByElement(re);ye.size?ye.forEach(Be=>Be.triggerLeaveAnimation(re,C,!1,!0)):this.clearElementCache(re)}),this._engine.afterFlushAnimationsDone(()=>k.forEach(re=>this.clearElementCache(re)))}triggerLeaveAnimation(E,C,k,re){const ye=this._engine.statesByElement.get(E),Be=new Map;if(ye){const je=[];if(Object.keys(ye).forEach(st=>{if(Be.set(st,ye[st].value),this._triggers[st]){const Nt=this.trigger(E,st,Rt,re);Nt&&je.push(Nt)}}),je.length)return this._engine.markElementAsRemoved(this.id,E,!0,C,Be),k&&Dn(je).onDone(()=>this._engine.processLeaveNode(E)),!0}return!1}prepareLeaveAnimationListeners(E){const C=this._elementListeners.get(E),k=this._engine.statesByElement.get(E);if(C&&k){const re=new Set;C.forEach(ye=>{const Be=ye.name;if(re.has(Be))return;re.add(Be);const st=this._triggers[Be].fallbackTransition,Nt=k[Be]||jt,Pn=new Oe(Rt),qn=new Pr(this.id,Be,E);this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:Be,transition:st,fromState:Nt,toState:Pn,player:qn,isFallbackTransition:!0})})}}removeNode(E,C){const k=this._engine;if(E.childElementCount&&this._signalRemovalForInnerTriggers(E,C),this.triggerLeaveAnimation(E,C,!0))return;let re=!1;if(k.totalAnimations){const ye=k.players.length?k.playersByQueriedElement.get(E):[];if(ye&&ye.length)re=!0;else{let Be=E;for(;Be=Be.parentNode;)if(k.statesByElement.get(Be)){re=!0;break}}}if(this.prepareLeaveAnimationListeners(E),re)k.markElementAsRemoved(this.id,E,!1,C);else{const ye=E[ce];(!ye||ye===ae)&&(k.afterFlush(()=>this.clearElementCache(E)),k.destroyInnerAnimations(E),k._onRemovalComplete(E,C))}}insertNode(E,C){Bn(E,this._hostClassName)}drainQueuedTransitions(E){const C=[];return this._queue.forEach(k=>{const re=k.player;if(re.destroyed)return;const ye=k.element,Be=this._elementListeners.get(ye);Be&&Be.forEach(je=>{if(je.name==k.triggerName){const st=Pt(ye,k.triggerName,k.fromState.value,k.toState.value);st._data=E,li(k.player,je.phase,st,je.callback)}}),re.markedForDestroy?this._engine.afterFlush(()=>{re.destroy()}):C.push(k)}),this._queue=[],C.sort((k,re)=>{const ye=k.transition.ast.depCount,Be=re.transition.ast.depCount;return 0==ye||0==Be?ye-Be:this._engine.driver.containsElement(k.element,re.element)?1:-1})}destroy(E){this.players.forEach(C=>C.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,E)}elementContainsData(E){let C=!1;return this._elementListeners.has(E)&&(C=!0),C=!!this._queue.find(k=>k.element===E)||C,C}}class jr{constructor(E,C,k){this.bodyNode=E,this.driver=C,this._normalizer=k,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(re,ye)=>{}}_onRemovalComplete(E,C){this.onRemovalComplete(E,C)}get queuedPlayers(){const E=[];return this._namespaceList.forEach(C=>{C.players.forEach(k=>{k.queued&&E.push(k)})}),E}createNamespace(E,C){const k=new bn(E,C,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,C)?this._balanceNamespaceList(k,C):(this.newHostElements.set(C,k),this.collectEnterElement(C)),this._namespaceLookup[E]=k}_balanceNamespaceList(E,C){const k=this._namespaceList,re=this.namespacesByHostElement,ye=k.length-1;if(ye>=0){let Be=!1;if(void 0!==this.driver.getParentElement){let je=this.driver.getParentElement(C);for(;je;){const st=re.get(je);if(st){const Nt=k.indexOf(st);k.splice(Nt+1,0,E),Be=!0;break}je=this.driver.getParentElement(je)}}else for(let je=ye;je>=0;je--)if(this.driver.containsElement(k[je].hostElement,C)){k.splice(je+1,0,E),Be=!0;break}Be||k.unshift(E)}else k.push(E);return re.set(C,E),E}register(E,C){let k=this._namespaceLookup[E];return k||(k=this.createNamespace(E,C)),k}registerTrigger(E,C,k){let re=this._namespaceLookup[E];re&&re.register(C,k)&&this.totalAnimations++}destroy(E,C){if(!E)return;const k=this._fetchNamespace(E);this.afterFlush(()=>{this.namespacesByHostElement.delete(k.hostElement),delete this._namespaceLookup[E];const re=this._namespaceList.indexOf(k);re>=0&&this._namespaceList.splice(re,1)}),this.afterFlushAnimationsDone(()=>k.destroy(C))}_fetchNamespace(E){return this._namespaceLookup[E]}fetchNamespacesByElement(E){const C=new Set,k=this.statesByElement.get(E);if(k){const re=Object.keys(k);for(let ye=0;ye<re.length;ye++){const Be=k[re[ye]].namespaceId;if(Be){const je=this._fetchNamespace(Be);je&&C.add(je)}}}return C}trigger(E,C,k,re){if(Ii(C)){const ye=this._fetchNamespace(E);if(ye)return ye.trigger(C,k,re),!0}return!1}insertNode(E,C,k,re){if(!Ii(C))return;const ye=C[ce];if(ye&&ye.setForRemoval){ye.setForRemoval=!1,ye.setForMove=!0;const Be=this.collectedLeaveElements.indexOf(C);Be>=0&&this.collectedLeaveElements.splice(Be,1)}if(E){const Be=this._fetchNamespace(E);Be&&Be.insertNode(C,k)}re&&this.collectEnterElement(C)}collectEnterElement(E){this.collectedEnterElements.push(E)}markElementAsDisabled(E,C){C?this.disabledNodes.has(E)||(this.disabledNodes.add(E),Bn(E,ts)):this.disabledNodes.has(E)&&(this.disabledNodes.delete(E),ns(E,ts))}removeNode(E,C,k,re){if(Ii(C)){const ye=E?this._fetchNamespace(E):null;if(ye?ye.removeNode(C,re):this.markElementAsRemoved(E,C,!1,re),k){const Be=this.namespacesByHostElement.get(C);Be&&Be.id!==E&&Be.removeNode(C,re)}}else this._onRemovalComplete(C,re)}markElementAsRemoved(E,C,k,re,ye){this.collectedLeaveElements.push(C),C[ce]={namespaceId:E,setForRemoval:re,hasAnimation:k,removedBeforeQueried:!1,previousTriggersValues:ye}}listen(E,C,k,re,ye){return Ii(C)?this._fetchNamespace(E).listen(C,k,re,ye):()=>{}}_buildInstruction(E,C,k,re,ye){return E.transition.build(this.driver,E.element,E.fromState.value,E.toState.value,k,re,E.fromState.options,E.toState.options,C,ye)}destroyInnerAnimations(E){let C=this.driver.query(E,Pe,!0);C.forEach(k=>this.destroyActiveAnimationsForElement(k)),0!=this.playersByQueriedElement.size&&(C=this.driver.query(E,he,!0),C.forEach(k=>this.finishActiveQueriedAnimationOnElement(k)))}destroyActiveAnimationsForElement(E){const C=this.playersByElement.get(E);C&&C.forEach(k=>{k.queued?k.markedForDestroy=!0:k.destroy()})}finishActiveQueriedAnimationOnElement(E){const C=this.playersByQueriedElement.get(E);C&&C.forEach(k=>k.finish())}whenRenderingDone(){return new Promise(E=>{if(this.players.length)return Dn(this.players).onDone(()=>E());E()})}processLeaveNode(E){var C;const k=E[ce];if(k&&k.setForRemoval){if(E[ce]=ae,k.namespaceId){this.destroyInnerAnimations(E);const re=this._fetchNamespace(k.namespaceId);re&&re.clearElementCache(E)}this._onRemovalComplete(E,k.setForRemoval)}(null===(C=E.classList)||void 0===C?void 0:C.contains(ts))&&this.markElementAsDisabled(E,!1),this.driver.query(E,".ng-animate-disabled",!0).forEach(re=>{this.markElementAsDisabled(re,!1)})}flush(E=-1){let C=[];if(this.newHostElements.size&&(this.newHostElements.forEach((k,re)=>this._balanceNamespaceList(k,re)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let k=0;k<this.collectedEnterElements.length;k++)Bn(this.collectedEnterElements[k],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const k=[];try{C=this._flushAnimations(k,E)}finally{for(let re=0;re<k.length;re++)k[re]()}}else for(let k=0;k<this.collectedLeaveElements.length;k++)this.processLeaveNode(this.collectedLeaveElements[k]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(k=>k()),this._flushFns=[],this._whenQuietFns.length){const k=this._whenQuietFns;this._whenQuietFns=[],C.length?Dn(C).onDone(()=>{k.forEach(re=>re())}):k.forEach(re=>re())}}reportError(E){throw function or(q){return new B.vHH(3402,ht)}()}_flushAnimations(E,C){const k=new ho,re=[],ye=new Map,Be=[],je=new Map,st=new Map,Nt=new Map,Pn=new Set;this.disabledNodes.forEach(Hn=>{Pn.add(Hn);const sr=this.driver.query(Hn,".ng-animate-queued",!0);for(let Dr=0;Dr<sr.length;Dr++)Pn.add(sr[Dr])});const qn=this.bodyNode,mr=Array.from(this.statesByElement.keys()),rr=Ni(mr,this.collectedEnterElements),Er=new Map;let ur=0;rr.forEach((Hn,sr)=>{const Dr=Fi+ur++;Er.set(sr,Dr),Hn.forEach(ni=>Bn(ni,Dr))});const wr=[],Ai=new Set,us=new Set;for(let Hn=0;Hn<this.collectedLeaveElements.length;Hn++){const sr=this.collectedLeaveElements[Hn],Dr=sr[ce];Dr&&Dr.setForRemoval&&(wr.push(sr),Ai.add(sr),Dr.hasAnimation?this.driver.query(sr,".ng-star-inserted",!0).forEach(ni=>Ai.add(ni)):us.add(sr))}const hi=new Map,Ps=Ni(mr,Array.from(Ai));Ps.forEach((Hn,sr)=>{const Dr=Ri+ur++;hi.set(sr,Dr),Hn.forEach(ni=>Bn(ni,Dr))}),E.push(()=>{rr.forEach((Hn,sr)=>{const Dr=Er.get(sr);Hn.forEach(ni=>ns(ni,Dr))}),Ps.forEach((Hn,sr)=>{const Dr=hi.get(sr);Hn.forEach(ni=>ns(ni,Dr))}),wr.forEach(Hn=>{this.processLeaveNode(Hn)})});const Da=[],is=[];for(let Hn=this._namespaceList.length-1;Hn>=0;Hn--)this._namespaceList[Hn].drainQueuedTransitions(C).forEach(Dr=>{const ni=Dr.player,ws=Dr.element;if(Da.push(ni),this.collectedEnterElements.length){const _e=ws[ce];if(_e&&_e.setForMove){if(_e.previousTriggersValues&&_e.previousTriggersValues.has(Dr.triggerName)){const He=_e.previousTriggersValues.get(Dr.triggerName),ut=this.statesByElement.get(Dr.element);ut&&ut[Dr.triggerName]&&(ut[Dr.triggerName].value=He)}return void ni.destroy()}}const lo=!qn||!this.driver.containsElement(qn,ws),Wo=hi.get(ws),ko=Er.get(ws),b=this._buildInstruction(Dr,k,ko,Wo,lo);if(b.errors&&b.errors.length)return void is.push(b);if(lo)return ni.onStart(()=>$n(ws,b.fromStyles)),ni.onDestroy(()=>Rn(ws,b.toStyles)),void re.push(ni);if(Dr.isFallbackTransition)return ni.onStart(()=>$n(ws,b.fromStyles)),ni.onDestroy(()=>Rn(ws,b.toStyles)),void re.push(ni);const P=[];b.timelines.forEach(_e=>{_e.stretchStartingKeyframe=!0,this.disabledNodes.has(_e.element)||P.push(_e)}),b.timelines=P,k.append(ws,b.timelines),Be.push({instruction:b,player:ni,element:ws}),b.queriedElements.forEach(_e=>Fe(je,_e,[]).push(ni)),b.preStyleProps.forEach((_e,He)=>{const ut=Object.keys(_e);if(ut.length){let kt=st.get(He);kt||st.set(He,kt=new Set),ut.forEach(mn=>kt.add(mn))}}),b.postStyleProps.forEach((_e,He)=>{const ut=Object.keys(_e);let kt=Nt.get(He);kt||Nt.set(He,kt=new Set),ut.forEach(mn=>kt.add(mn))})});if(is.length){const Hn=[];is.forEach(sr=>{Hn.push(function Fr(q,E){return new B.vHH(3505,ht)}())}),Da.forEach(sr=>sr.destroy()),this.reportError(Hn)}const No=new Map,ji=new Map;Be.forEach(Hn=>{const sr=Hn.element;k.has(sr)&&(ji.set(sr,sr),this._beforeAnimationBuild(Hn.player.namespaceId,Hn.instruction,No))}),re.forEach(Hn=>{const sr=Hn.element;this._getPreviousPlayers(sr,!1,Hn.namespaceId,Hn.triggerName,null).forEach(ni=>{Fe(No,sr,[]).push(ni),ni.destroy()})});const yi=wr.filter(Hn=>V(Hn,st,Nt)),eo=new Map;oo(eo,this.driver,us,Nt,ft.l3).forEach(Hn=>{V(Hn,st,Nt)&&yi.push(Hn)});const ps=new Map;rr.forEach((Hn,sr)=>{oo(ps,this.driver,new Set(Hn),st,ft.k1)}),yi.forEach(Hn=>{const sr=eo.get(Hn),Dr=ps.get(Hn);eo.set(Hn,Object.assign(Object.assign({},sr),Dr))});const yo=[],Sa=[],Oo={};Be.forEach(Hn=>{const{element:sr,player:Dr,instruction:ni}=Hn;if(k.has(sr)){if(Pn.has(sr))return Dr.onDestroy(()=>Rn(sr,ni.toStyles)),Dr.disabled=!0,Dr.overrideTotalTime(ni.totalTime),void re.push(Dr);let ws=Oo;if(ji.size>1){let Wo=sr;const ko=[];for(;Wo=Wo.parentNode;){const b=ji.get(Wo);if(b){ws=b;break}ko.push(Wo)}ko.forEach(b=>ji.set(b,ws))}const lo=this._buildAnimation(Dr.namespaceId,ni,No,ye,ps,eo);if(Dr.setRealPlayer(lo),ws===Oo)yo.push(Dr);else{const Wo=this.playersByElement.get(ws);Wo&&Wo.length&&(Dr.parentPlayer=Dn(Wo)),re.push(Dr)}}else $n(sr,ni.fromStyles),Dr.onDestroy(()=>Rn(sr,ni.toStyles)),Sa.push(Dr),Pn.has(sr)&&re.push(Dr)}),Sa.forEach(Hn=>{const sr=ye.get(Hn.element);if(sr&&sr.length){const Dr=Dn(sr);Hn.setRealPlayer(Dr)}}),re.forEach(Hn=>{Hn.parentPlayer?Hn.syncPlayerEvents(Hn.parentPlayer):Hn.destroy()});for(let Hn=0;Hn<wr.length;Hn++){const sr=wr[Hn],Dr=sr[ce];if(ns(sr,Ri),Dr&&Dr.hasAnimation)continue;let ni=[];if(je.size){let lo=je.get(sr);lo&&lo.length&&ni.push(...lo);let Wo=this.driver.query(sr,he,!0);for(let ko=0;ko<Wo.length;ko++){let b=je.get(Wo[ko]);b&&b.length&&ni.push(...b)}}const ws=ni.filter(lo=>!lo.destroyed);ws.length?Mo(this,sr,ws):this.processLeaveNode(sr)}return wr.length=0,yo.forEach(Hn=>{this.players.push(Hn),Hn.onDone(()=>{Hn.destroy();const sr=this.players.indexOf(Hn);this.players.splice(sr,1)}),Hn.play()}),yo}elementContainsData(E,C){let k=!1;const re=C[ce];return re&&re.setForRemoval&&(k=!0),this.playersByElement.has(C)&&(k=!0),this.playersByQueriedElement.has(C)&&(k=!0),this.statesByElement.has(C)&&(k=!0),this._fetchNamespace(E).elementContainsData(C)||k}afterFlush(E){this._flushFns.push(E)}afterFlushAnimationsDone(E){this._whenQuietFns.push(E)}_getPreviousPlayers(E,C,k,re,ye){let Be=[];if(C){const je=this.playersByQueriedElement.get(E);je&&(Be=je)}else{const je=this.playersByElement.get(E);if(je){const st=!ye||ye==Rt;je.forEach(Nt=>{Nt.queued||!st&&Nt.triggerName!=re||Be.push(Nt)})}}return(k||re)&&(Be=Be.filter(je=>!(k&&k!=je.namespaceId||re&&re!=je.triggerName))),Be}_beforeAnimationBuild(E,C,k){const ye=C.element,Be=C.isRemovalTransition?void 0:E,je=C.isRemovalTransition?void 0:C.triggerName;for(const st of C.timelines){const Nt=st.element,Pn=Nt!==ye,qn=Fe(k,Nt,[]);this._getPreviousPlayers(Nt,Pn,Be,je,C.toState).forEach(rr=>{const Er=rr.getRealPlayer();Er.beforeDestroy&&Er.beforeDestroy(),rr.destroy(),qn.push(rr)})}$n(ye,C.fromStyles)}_buildAnimation(E,C,k,re,ye,Be){const je=C.triggerName,st=C.element,Nt=[],Pn=new Set,qn=new Set,mr=C.timelines.map(Er=>{const ur=Er.element;Pn.add(ur);const wr=ur[ce];if(wr&&wr.removedBeforeQueried)return new ft.ZN(Er.duration,Er.delay);const Ai=ur!==st,us=function ao(q){const E=[];return jo(q,E),E}((k.get(ur)||F).map(No=>No.getRealPlayer())).filter(No=>!!No.element&&No.element===ur),hi=ye.get(ur),Ps=Be.get(ur),Da=On(0,this._normalizer,0,Er.keyframes,hi,Ps),is=this._buildPlayer(Er,Da,us);if(Er.subTimeline&&re&&qn.add(ur),Ai){const No=new Pr(E,je,ur);No.setRealPlayer(is),Nt.push(No)}return is});Nt.forEach(Er=>{Fe(this.playersByQueriedElement,Er.element,[]).push(Er),Er.onDone(()=>function gr(q,E,C){let k;if(q instanceof Map){if(k=q.get(E),k){if(k.length){const re=k.indexOf(C);k.splice(re,1)}0==k.length&&q.delete(E)}}else if(k=q[E],k){if(k.length){const re=k.indexOf(C);k.splice(re,1)}0==k.length&&delete q[E]}return k}(this.playersByQueriedElement,Er.element,Er))}),Pn.forEach(Er=>Bn(Er,Ae));const rr=Dn(mr);return rr.onDestroy(()=>{Pn.forEach(Er=>ns(Er,Ae)),Rn(st,C.toStyles)}),qn.forEach(Er=>{Fe(re,Er,[]).push(rr)}),rr}_buildPlayer(E,C,k){return C.length>0?this.driver.animate(E.element,C,E.duration,E.delay,E.easing,k):new ft.ZN(E.duration,E.delay)}}class Pr{constructor(E,C,k){this.namespaceId=E,this.triggerName=C,this.element=k,this._player=new ft.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(E){this._containsRealPlayer||(this._player=E,Object.keys(this._queuedCallbacks).forEach(C=>{this._queuedCallbacks[C].forEach(k=>li(E,C,void 0,k))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(E.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(E){this.totalTime=E}syncPlayerEvents(E){const C=this._player;C.triggerCallback&&E.onStart(()=>C.triggerCallback("start")),E.onDone(()=>this.finish()),E.onDestroy(()=>this.destroy())}_queueEvent(E,C){Fe(this._queuedCallbacks,E,[]).push(C)}onDone(E){this.queued&&this._queueEvent("done",E),this._player.onDone(E)}onStart(E){this.queued&&this._queueEvent("start",E),this._player.onStart(E)}onDestroy(E){this.queued&&this._queueEvent("destroy",E),this._player.onDestroy(E)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(E){this.queued||this._player.setPosition(E)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(E){const C=this._player;C.triggerCallback&&C.triggerCallback(E)}}function Ii(q){return q&&1===q.nodeType}function pi(q,E){const C=q.style.display;return q.style.display=null!=E?E:"none",C}function oo(q,E,C,k,re){const ye=[];C.forEach(st=>ye.push(pi(st)));const Be=[];k.forEach((st,Nt)=>{const Pn={};st.forEach(qn=>{const mr=Pn[qn]=E.computeStyle(Nt,qn,re);(!mr||0==mr.length)&&(Nt[ce]=j,Be.push(Nt))}),q.set(Nt,Pn)});let je=0;return C.forEach(st=>pi(st,ye[je++])),Be}function Ni(q,E){const C=new Map;if(q.forEach(je=>C.set(je,[])),0==E.length)return C;const re=new Set(E),ye=new Map;function Be(je){if(!je)return 1;let st=ye.get(je);if(st)return st;const Nt=je.parentNode;return st=C.has(Nt)?Nt:re.has(Nt)?1:Be(Nt),ye.set(je,st),st}return E.forEach(je=>{const st=Be(je);1!==st&&C.get(st).push(je)}),C}function Bn(q,E){var C;null===(C=q.classList)||void 0===C||C.add(E)}function ns(q,E){var C;null===(C=q.classList)||void 0===C||C.remove(E)}function Mo(q,E,C){Dn(C).onDone(()=>q.processLeaveNode(E))}function jo(q,E){for(let C=0;C<q.length;C++){const k=q[C];k instanceof ft.ZE?jo(k.players,E):E.push(k)}}function V(q,E,C){const k=C.get(q);if(!k)return!1;let re=E.get(q);return re?k.forEach(ye=>re.add(ye)):E.set(q,k),C.delete(q),!0}class O{constructor(E,C,k){this.bodyNode=E,this._driver=C,this._normalizer=k,this._triggerCache={},this.onRemovalComplete=(re,ye)=>{},this._transitionEngine=new jr(E,C,k),this._timelineEngine=new Eo(E,C,k),this._transitionEngine.onRemovalComplete=(re,ye)=>this.onRemovalComplete(re,ye)}registerTrigger(E,C,k,re,ye){const Be=E+"-"+re;let je=this._triggerCache[Be];if(!je){const st=[],Pn=Ot(this._driver,ye,st,[]);if(st.length)throw function ve(q,E){return new B.vHH(3404,ht)}();je=function Us(q,E,C){return new Ki(q,E,C)}(re,Pn,this._normalizer),this._triggerCache[Be]=je}this._transitionEngine.registerTrigger(C,re,je)}register(E,C){this._transitionEngine.register(E,C)}destroy(E,C){this._transitionEngine.destroy(E,C)}onInsert(E,C,k,re){this._transitionEngine.insertNode(E,C,k,re)}onRemove(E,C,k,re){this._transitionEngine.removeNode(E,C,re||!1,k)}disableAnimations(E,C){this._transitionEngine.markElementAsDisabled(E,C)}process(E,C,k,re){if("@"==k.charAt(0)){const[ye,Be]=ze(k);this._timelineEngine.command(ye,C,Be,re)}else this._transitionEngine.trigger(E,C,k,re)}listen(E,C,k,re,ye){if("@"==k.charAt(0)){const[Be,je]=ze(k);return this._timelineEngine.listen(Be,C,je,ye)}return this._transitionEngine.listen(E,C,k,re,ye)}flush(E=-1){this._transitionEngine.flush(E)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ke=(()=>{class q{constructor(C,k,re){this._element=C,this._startStyles=k,this._endStyles=re,this._state=0;let ye=q.initialStylesByElement.get(C);ye||q.initialStylesByElement.set(C,ye={}),this._initialStyles=ye}start(){this._state<1&&(this._startStyles&&Rn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Rn(this._element,this._initialStyles),this._endStyles&&(Rn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(q.initialStylesByElement.delete(this._element),this._startStyles&&($n(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($n(this._element,this._endStyles),this._endStyles=null),Rn(this._element,this._initialStyles),this._state=3)}}return q.initialStylesByElement=new WeakMap,q})();function Kt(q){let E=null;const C=Object.keys(q);for(let k=0;k<C.length;k++){const re=C[k];gi(re)&&(E=E||{},E[re]=q[re])}return E}function gi(q){return"display"===q||"position"===q}class z{constructor(E,C,k,re){this.element=E,this.keyframes=C,this.options=k,this._specialStyles=re,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=k.duration,this._delay=k.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(E=>E()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const E=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,E,this.options),this._finalKeyframe=E.length?E[E.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(E,C,k){return E.animate(C,k)}onStart(E){this._onStartFns.push(E)}onDone(E){this._onDoneFns.push(E)}onDestroy(E){this._onDestroyFns.push(E)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(E=>E()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(E=>E()),this._onDestroyFns=[])}setPosition(E){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=E*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const E={};if(this.hasStarted()){const C=this._finalKeyframe;Object.keys(C).forEach(k=>{"offset"!=k&&(E[k]=this._finished?C[k]:ai(this.element,k))})}this.currentSnapshot=E}triggerCallback(E){const C="start"==E?this._onStartFns:this._onDoneFns;C.forEach(k=>k()),C.length=0}}class W{validateStyleProperty(E){return Tr(E)}matchesElement(E,C){return!1}containsElement(E,C){return Yt(E,C)}getParentElement(E){return nn(E)}query(E,C,k){return Rr(E,C,k)}computeStyle(E,C,k){return window.getComputedStyle(E)[C]}animate(E,C,k,re,ye,Be=[]){const st={duration:k,delay:re,fill:0==re?"both":"forwards"};ye&&(st.easing=ye);const Nt={},Pn=Be.filter(mr=>mr instanceof z);(function Xr(q,E){return 0===q||0===E})(k,re)&&Pn.forEach(mr=>{let rr=mr.currentSnapshot;Object.keys(rr).forEach(Er=>Nt[Er]=rr[Er])}),C=function vr(q,E,C){const k=Object.keys(C);if(k.length&&E.length){let ye=E[0],Be=[];if(k.forEach(je=>{ye.hasOwnProperty(je)||Be.push(je),ye[je]=C[je]}),Be.length)for(var re=1;re<E.length;re++){let je=E[re];Be.forEach(function(st){je[st]=ai(q,st)})}}return E}(E,C=C.map(mr=>zt(mr,!1)),Nt);const qn=function ue(q,E){let C=null,k=null;return Array.isArray(E)&&E.length?(C=Kt(E[0]),E.length>1&&(k=Kt(E[E.length-1]))):E&&(C=Kt(E)),C||k?new ke(q,C,k):null}(E,C);return new z(E,C,st,qn)}}var fe=$(9808);let Ie=(()=>{class q extends ft._j{constructor(C,k){super(),this._nextAnimationId=0,this._renderer=C.createRenderer(k.body,{id:"0",encapsulation:B.ifc.None,styles:[],data:{animation:[]}})}build(C){const k=this._nextAnimationId.toString();this._nextAnimationId++;const re=Array.isArray(C)?(0,ft.vP)(C):C;return Qt(this._renderer,null,k,"register",[re]),new Le(k,this._renderer)}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(B.FYo),B.LFG(fe.K0))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();class Le extends ft.LC{constructor(E,C){super(),this._id=E,this._renderer=C}create(E,C){return new It(this._id,E,C||{},this._renderer)}}class It{constructor(E,C,k,re){this.id=E,this.element=C,this._renderer=re,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",k)}_listen(E,C){return this._renderer.listen(this.element,`@@${this.id}:${E}`,C)}_command(E,...C){return Qt(this._renderer,this.element,this.id,E,C)}onDone(E){this._listen("done",E)}onStart(E){this._listen("start",E)}onDestroy(E){this._listen("destroy",E)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(E){this._command("setPosition",E)}getPosition(){var E,C;return null!==(C=null===(E=this._renderer.engine.players[+this.id])||void 0===E?void 0:E.getPosition())&&void 0!==C?C:0}}function Qt(q,E,C,k,re){return q.setProperty(E,`@@${C}:${k}`,re)}const xn="@.disabled";let cr=(()=>{class q{constructor(C,k,re){this.delegate=C,this.engine=k,this._zone=re,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),k.onRemovalComplete=(ye,Be)=>{const je=null==Be?void 0:Be.parentNode(ye);je&&Be.removeChild(je,ye)}}createRenderer(C,k){const ye=this.delegate.createRenderer(C,k);if(!(C&&k&&k.data&&k.data.animation)){let Pn=this._rendererCache.get(ye);return Pn||(Pn=new Gn("",ye,this.engine),this._rendererCache.set(ye,Pn)),Pn}const Be=k.id,je=k.id+"-"+this._currentId;this._currentId++,this.engine.register(je,C);const st=Pn=>{Array.isArray(Pn)?Pn.forEach(st):this.engine.registerTrigger(Be,je,C,Pn.name,Pn)};return k.data.animation.forEach(st),new mi(this,je,ye,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(C,k,re){C>=0&&C<this._microtaskId?this._zone.run(()=>k(re)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ye=>{const[Be,je]=ye;Be(je)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([k,re]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(B.FYo),B.LFG(O),B.LFG(B.R0b))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();class Gn{constructor(E,C,k){this.namespaceId=E,this.delegate=C,this.engine=k,this.destroyNode=this.delegate.destroyNode?re=>C.destroyNode(re):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(E,C){return this.delegate.createElement(E,C)}createComment(E){return this.delegate.createComment(E)}createText(E){return this.delegate.createText(E)}appendChild(E,C){this.delegate.appendChild(E,C),this.engine.onInsert(this.namespaceId,C,E,!1)}insertBefore(E,C,k,re=!0){this.delegate.insertBefore(E,C,k),this.engine.onInsert(this.namespaceId,C,E,re)}removeChild(E,C,k){this.engine.onRemove(this.namespaceId,C,this.delegate,k)}selectRootElement(E,C){return this.delegate.selectRootElement(E,C)}parentNode(E){return this.delegate.parentNode(E)}nextSibling(E){return this.delegate.nextSibling(E)}setAttribute(E,C,k,re){this.delegate.setAttribute(E,C,k,re)}removeAttribute(E,C,k){this.delegate.removeAttribute(E,C,k)}addClass(E,C){this.delegate.addClass(E,C)}removeClass(E,C){this.delegate.removeClass(E,C)}setStyle(E,C,k,re){this.delegate.setStyle(E,C,k,re)}removeStyle(E,C,k){this.delegate.removeStyle(E,C,k)}setProperty(E,C,k){"@"==C.charAt(0)&&C==xn?this.disableAnimations(E,!!k):this.delegate.setProperty(E,C,k)}setValue(E,C){this.delegate.setValue(E,C)}listen(E,C,k){return this.delegate.listen(E,C,k)}disableAnimations(E,C){this.engine.disableAnimations(E,C)}}class mi extends Gn{constructor(E,C,k,re){super(C,k,re),this.factory=E,this.namespaceId=C}setProperty(E,C,k){"@"==C.charAt(0)?"."==C.charAt(1)&&C==xn?this.disableAnimations(E,k=void 0===k||!!k):this.engine.process(this.namespaceId,E,C.substr(1),k):this.delegate.setProperty(E,C,k)}listen(E,C,k){if("@"==C.charAt(0)){const re=function Di(q){switch(q){case"body":return document.body;case"document":return document;case"window":return window;default:return q}}(E);let ye=C.substr(1),Be="";return"@"!=ye.charAt(0)&&([ye,Be]=function Ti(q){const E=q.indexOf(".");return[q.substring(0,E),q.substr(E+1)]}(ye)),this.engine.listen(this.namespaceId,re,ye,Be,je=>{this.factory.scheduleListenerCallback(je._data||-1,k,je)})}return this.delegate.listen(E,C,k)}}let $r=(()=>{class q extends O{constructor(C,k,re){super(C.body,k,re)}ngOnDestroy(){this.flush()}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(fe.K0),B.LFG(tr),B.LFG(ri))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();const Rs=new B.OlP("AnimationModuleType"),as=[{provide:ft._j,useClass:Ie},{provide:ri,useFactory:function qi(){return new so}},{provide:O,useClass:$r},{provide:B.FYo,useFactory:function Si(q,E,C){return new cr(q,E,C)},deps:[y.se,O,B.R0b]}],Ui=[{provide:tr,useFactory:()=>new W},{provide:Rs,useValue:"BrowserAnimations"},...as],rs=[{provide:tr,useClass:_r},{provide:Rs,useValue:"NoopAnimations"},...as];let Hs=(()=>{class q{static withConfig(C){return{ngModule:q,providers:C.disableAnimations?rs:Ui}}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q}),q.\u0275inj=B.cJS({providers:Ui,imports:[y.b2]}),q})();var Zo=$(4466),$s=$(520),Ho=$(2011),_s=$(1205),da=$(2255);let Po=(()=>{class q{constructor(){}intercept(C,k){let re=C.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("drastitoken")}`}});return k.handle(re)}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();var $a=$(262),ea=$(2843),Mi=$(2290);let uo=(()=>{class q{constructor(C,k){this.router=C,this.toastr=k}intercept(C,k){return k.handle(C).pipe((0,$a.K)(re=>{var ye,Be,je;let st=null===(ye=null==re?void 0:re.error)||void 0===ye?void 0:ye.errors;if(Array.isArray(st)&&(null==st?void 0:st.length))for(let Nt=0;Nt<(null==st?void 0:st.length);Nt++)(null===(Be=st[Nt])||void 0===Be?void 0:Be.message)&&this.toastr.error(null===(je=st[Nt])||void 0===je?void 0:je.message);else(null==st?void 0:st.message)&&this.toastr.error(null==st?void 0:st.message);return-1!==[401,403].indexOf(re.status)&&(localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username")),(0,ea._)(re)}))}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(X.F0),B.LFG(Mi._W))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();var Oi=$(4976),Ys=$(3692);$(1389),$(2090),$(6881),$(1877),$(4859);class Ms{constructor(){return(0,Oi.vb)("auth")}}var Ka=$(6215);class Hr{constructor(E){return E}}const wu="database",nr=new B.OlP("angularfire2.database-instances");function xi(q){return(E,C)=>{const k=E.runOutsideAngular(()=>q(C));return new Hr(k)}}const Os={provide:class Fa{constructor(){return(0,Oi.vb)(wu)}},deps:[[new B.FiY,nr]]},Yi={provide:Hr,useFactory:function La(q,E){const C=(0,Oi.JM)(wu,q,E);return C&&new Hr(C)},deps:[[new B.FiY,nr],Ys.Ot]};let Cn=(()=>{class q{constructor(){(0,at.KN)("angularfire",Oi.q4.full,"rtdb")}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q}),q.\u0275inj=B.cJS({providers:[Yi,Os]}),q})();function Gu(q,...E){return{ngModule:Cn,providers:[{provide:nr,useFactory:xi(q),multi:!0,deps:[B.R0b,B.zs3,Oi.HU,Ys.z6,[new B.FiY,Ms],[new B.FiY,Ka.nm],...E]}]}}const iu=(0,Oi.u3)(be.N8,!0);let sl=(()=>{class q{}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q,bootstrap:[Lt]}),q.\u0275inj=B.cJS({providers:[{provide:$s.TP,useClass:Po,multi:!0},{provide:$s.TP,useClass:uo,multi:!0}],imports:[[y.b2.withServerTransition({appId:"serverApp"}),Ge,Hs,Zo.m,da.yb,_s.ww,Ho.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),Gu(()=>iu())]]}),q})();$(2340).N.production&&(0,B.G48)(),y.q6().bootstrapModule(sl).catch(q=>console.error(q))},8306:(fn,ct,$)=>{$.d(ct,{y:()=>be});var y=$(2961),B=$(727),X=$(8822),ie=$(4671);var Je=$(2416),Ge=$(576),at=$(2806);let be=(()=>{class ft{constructor(Bt){Bt&&(this._subscribe=Bt)}lift(Bt){const mt=new ft;return mt.source=this,mt.operator=Bt,mt}subscribe(Bt,mt,Ft){const dn=function Lt(ft){return ft&&ft instanceof y.Lv||function tt(ft){return ft&&(0,Ge.m)(ft.next)&&(0,Ge.m)(ft.error)&&(0,Ge.m)(ft.complete)}(ft)&&(0,B.Nn)(ft)}(Bt)?Bt:new y.Hp(Bt,mt,Ft);return(0,at.x)(()=>{const{operator:Xt,source:we}=this;dn.add(Xt?Xt.call(dn,we):we?this._subscribe(dn):this._trySubscribe(dn))}),dn}_trySubscribe(Bt){try{return this._subscribe(Bt)}catch(mt){Bt.error(mt)}}forEach(Bt,mt){return new(mt=Ce(mt))((Ft,dn)=>{const Xt=new y.Hp({next:we=>{try{Bt(we)}catch(Me){dn(Me),Xt.unsubscribe()}},error:dn,complete:Ft});this.subscribe(Xt)})}_subscribe(Bt){var mt;return null===(mt=this.source)||void 0===mt?void 0:mt.subscribe(Bt)}[X.L](){return this}pipe(...Bt){return function Ke(ft){return 0===ft.length?ie.y:1===ft.length?ft[0]:function(Bt){return ft.reduce((mt,Ft)=>Ft(mt),Bt)}}(Bt)(this)}toPromise(Bt){return new(Bt=Ce(Bt))((mt,Ft)=>{let dn;this.subscribe(Xt=>dn=Xt,Xt=>Ft(Xt),()=>mt(dn))})}}return ft.create=ht=>new ft(ht),ft})();function Ce(ft){var ht;return null!==(ht=null!=ft?ft:Je.v.Promise)&&void 0!==ht?ht:Promise}},7579:(fn,ct,$)=>{$.d(ct,{x:()=>Je});var y=$(8306),B=$(727);const ie=(0,$(3888).d)(at=>function(){at(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=$(8737),Ke=$(2806);let Je=(()=>{class at extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ce){const tt=new Ge(this,this);return tt.operator=Ce,tt}_throwIfClosed(){if(this.closed)throw new ie}next(Ce){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const tt of this.currentObservers)tt.next(Ce)}})}error(Ce){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ce;const{observers:tt}=this;for(;tt.length;)tt.shift().error(Ce)}})}complete(){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ce;return(null===(Ce=this.observers)||void 0===Ce?void 0:Ce.length)>0}_trySubscribe(Ce){return this._throwIfClosed(),super._trySubscribe(Ce)}_subscribe(Ce){return this._throwIfClosed(),this._checkFinalizedStatuses(Ce),this._innerSubscribe(Ce)}_innerSubscribe(Ce){const{hasError:tt,isStopped:Lt,observers:ft}=this;return tt||Lt?B.Lc:(this.currentObservers=null,ft.push(Ce),new B.w0(()=>{this.currentObservers=null,(0,Ue.P)(ft,Ce)}))}_checkFinalizedStatuses(Ce){const{hasError:tt,thrownError:Lt,isStopped:ft}=this;tt?Ce.error(Lt):ft&&Ce.complete()}asObservable(){const Ce=new y.y;return Ce.source=this,Ce}}return at.create=(be,Ce)=>new Ge(be,Ce),at})();class Ge extends Je{constructor(be,Ce){super(),this.destination=be,this.source=Ce}next(be){var Ce,tt;null===(tt=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.next)||void 0===tt||tt.call(Ce,be)}error(be){var Ce,tt;null===(tt=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.error)||void 0===tt||tt.call(Ce,be)}complete(){var be,Ce;null===(Ce=null===(be=this.destination)||void 0===be?void 0:be.complete)||void 0===Ce||Ce.call(be)}_subscribe(be){var Ce,tt;return null!==(tt=null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(be))&&void 0!==tt?tt:B.Lc}}},2961:(fn,ct,$)=>{$.d(ct,{Hp:()=>Bt,Lv:()=>tt});var y=$(576),B=$(727),X=$(2416),ie=$(7849);function Ue(){}const Ke=at("C",void 0,void 0);function at(we,Me,it){return{kind:we,value:Me,error:it}}var be=$(3410),Ce=$(2806);class tt extends B.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,B.Nn)(Me)&&Me.add(this)):this.destination=Xt}static create(Me,it,Et){return new Bt(Me,it,Et)}next(Me){this.isStopped?dn(function Ge(we){return at("N",we,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?dn(function Je(we){return at("E",void 0,we)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?dn(Ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Lt=Function.prototype.bind;function ft(we,Me){return Lt.call(we,Me)}class ht{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:it}=this;if(it.next)try{it.next(Me)}catch(Et){mt(Et)}}error(Me){const{partialObserver:it}=this;if(it.error)try{it.error(Me)}catch(Et){mt(Et)}else mt(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(it){mt(it)}}}class Bt extends tt{constructor(Me,it,Et){let pt;if(super(),(0,y.m)(Me)||!Me)pt={next:null!=Me?Me:void 0,error:null!=it?it:void 0,complete:null!=Et?Et:void 0};else{let et;this&&X.v.useDeprecatedNextContext?(et=Object.create(Me),et.unsubscribe=()=>this.unsubscribe(),pt={next:Me.next&&ft(Me.next,et),error:Me.error&&ft(Me.error,et),complete:Me.complete&&ft(Me.complete,et)}):pt=Me}this.destination=new ht(pt)}}function mt(we){X.v.useDeprecatedSynchronousErrorHandling?(0,Ce.O)(we):(0,ie.h)(we)}function dn(we,Me){const{onStoppedNotification:it}=X.v;it&&be.z.setTimeout(()=>it(we,Me))}const Xt={closed:!0,next:Ue,error:function Ft(we){throw we},complete:Ue}},727:(fn,ct,$)=>{$.d(ct,{Lc:()=>Ke,w0:()=>Ue,Nn:()=>Je});var y=$(576);const X=(0,$(3888).d)(at=>function(Ce){at(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((tt,Lt)=>`${Lt+1}) ${tt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce});var ie=$(8737);class Ue{constructor(be){this.initialTeardown=be,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let be;if(!this.closed){this.closed=!0;const{_parentage:Ce}=this;if(Ce)if(this._parentage=null,Array.isArray(Ce))for(const ft of Ce)ft.remove(this);else Ce.remove(this);const{initialTeardown:tt}=this;if((0,y.m)(tt))try{tt()}catch(ft){be=ft instanceof X?ft.errors:[ft]}const{_finalizers:Lt}=this;if(Lt){this._finalizers=null;for(const ft of Lt)try{Ge(ft)}catch(ht){be=null!=be?be:[],ht instanceof X?be=[...be,...ht.errors]:be.push(ht)}}if(be)throw new X(be)}}add(be){var Ce;if(be&&be!==this)if(this.closed)Ge(be);else{if(be instanceof Ue){if(be.closed||be._hasParent(this))return;be._addParent(this)}(this._finalizers=null!==(Ce=this._finalizers)&&void 0!==Ce?Ce:[]).push(be)}}_hasParent(be){const{_parentage:Ce}=this;return Ce===be||Array.isArray(Ce)&&Ce.includes(be)}_addParent(be){const{_parentage:Ce}=this;this._parentage=Array.isArray(Ce)?(Ce.push(be),Ce):Ce?[Ce,be]:be}_removeParent(be){const{_parentage:Ce}=this;Ce===be?this._parentage=null:Array.isArray(Ce)&&(0,ie.P)(Ce,be)}remove(be){const{_finalizers:Ce}=this;Ce&&(0,ie.P)(Ce,be),be instanceof Ue&&be._removeParent(this)}}Ue.EMPTY=(()=>{const at=new Ue;return at.closed=!0,at})();const Ke=Ue.EMPTY;function Je(at){return at instanceof Ue||at&&"closed"in at&&(0,y.m)(at.remove)&&(0,y.m)(at.add)&&(0,y.m)(at.unsubscribe)}function Ge(at){(0,y.m)(at)?at():at.unsubscribe()}},2416:(fn,ct,$)=>{$.d(ct,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(fn,ct,$)=>{$.d(ct,{z:()=>Ue});var y=$(8189),X=$(7669),ie=$(8996);function Ue(...Ke){return function B(){return(0,y.J)(1)}()((0,ie.D)(Ke,(0,X.yG)(Ke)))}},515:(fn,ct,$)=>{$.d(ct,{E:()=>B});const B=new($(8306).y)(Ue=>Ue.complete())},8996:(fn,ct,$)=>{$.d(ct,{D:()=>Me});var y=$(8421),B=$(5363),X=$(9468),Ke=$(8306),Ge=$(2202),at=$(576),be=$(9672);function tt(it,Et){if(!it)throw new Error("Iterable cannot be null");return new Ke.y(pt=>{(0,be.f)(pt,Et,()=>{const et=it[Symbol.asyncIterator]();(0,be.f)(pt,Et,()=>{et.next().then(Ut=>{Ut.done?pt.complete():pt.next(Ut.value)})},0,!0)})})}var Lt=$(3670),ft=$(8239),ht=$(1144),Bt=$(6495),mt=$(2206),Ft=$(4532),dn=$(3260);function Me(it,Et){return Et?function we(it,Et){if(null!=it){if((0,Lt.c)(it))return function ie(it,Et){return(0,y.Xf)(it).pipe((0,X.R)(Et),(0,B.Q)(Et))}(it,Et);if((0,ht.z)(it))return function Je(it,Et){return new Ke.y(pt=>{let et=0;return Et.schedule(function(){et===it.length?pt.complete():(pt.next(it[et++]),pt.closed||this.schedule())})})}(it,Et);if((0,ft.t)(it))return function Ue(it,Et){return(0,y.Xf)(it).pipe((0,X.R)(Et),(0,B.Q)(Et))}(it,Et);if((0,mt.D)(it))return tt(it,Et);if((0,Bt.T)(it))return function Ce(it,Et){return new Ke.y(pt=>{let et;return(0,be.f)(pt,Et,()=>{et=it[Ge.h](),(0,be.f)(pt,Et,()=>{let Ut,bt;try{({value:Ut,done:bt}=et.next())}catch(Fn){return void pt.error(Fn)}bt?pt.complete():pt.next(Ut)},0,!0)}),()=>(0,at.m)(null==et?void 0:et.return)&&et.return()})}(it,Et);if((0,dn.L)(it))return function Xt(it,Et){return tt((0,dn.Q)(it),Et)}(it,Et)}throw(0,Ft.z)(it)}(it,Et):(0,y.Xf)(it)}},8421:(fn,ct,$)=>{$.d(ct,{Xf:()=>Lt});var y=$(7582),B=$(1144),X=$(8239),ie=$(8306),Ue=$(3670),Ke=$(2206),Je=$(4532),Ge=$(6495),at=$(3260),be=$(576),Ce=$(7849),tt=$(8822);function Lt(we){if(we instanceof ie.y)return we;if(null!=we){if((0,Ue.c)(we))return function ft(we){return new ie.y(Me=>{const it=we[tt.L]();if((0,be.m)(it.subscribe))return it.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(we);if((0,B.z)(we))return function ht(we){return new ie.y(Me=>{for(let it=0;it<we.length&&!Me.closed;it++)Me.next(we[it]);Me.complete()})}(we);if((0,X.t)(we))return function Bt(we){return new ie.y(Me=>{we.then(it=>{Me.closed||(Me.next(it),Me.complete())},it=>Me.error(it)).then(null,Ce.h)})}(we);if((0,Ke.D)(we))return Ft(we);if((0,Ge.T)(we))return function mt(we){return new ie.y(Me=>{for(const it of we)if(Me.next(it),Me.closed)return;Me.complete()})}(we);if((0,at.L)(we))return function dn(we){return Ft((0,at.Q)(we))}(we)}throw(0,Je.z)(we)}function Ft(we){return new ie.y(Me=>{(function Xt(we,Me){var it,Et,pt,et;return(0,y.mG)(this,void 0,void 0,function*(){try{for(it=(0,y.KL)(we);!(Et=yield it.next()).done;)if(Me.next(Et.value),Me.closed)return}catch(Ut){pt={error:Ut}}finally{try{Et&&!Et.done&&(et=it.return)&&(yield et.call(it))}finally{if(pt)throw pt.error}}Me.complete()})})(we,Me).catch(it=>Me.error(it))})}},6451:(fn,ct,$)=>{$.d(ct,{T:()=>Ke});var y=$(8189),B=$(8421),X=$(515),ie=$(7669),Ue=$(8996);function Ke(...Je){const Ge=(0,ie.yG)(Je),at=(0,ie._6)(Je,1/0),be=Je;return be.length?1===be.length?(0,B.Xf)(be[0]):(0,y.J)(at)((0,Ue.D)(be,Ge)):X.E}},9646:(fn,ct,$)=>{$.d(ct,{of:()=>X});var y=$(7669),B=$(8996);function X(...ie){const Ue=(0,y.yG)(ie);return(0,B.D)(ie,Ue)}},2843:(fn,ct,$)=>{$.d(ct,{_:()=>X});var y=$(8306),B=$(576);function X(ie,Ue){const Ke=(0,B.m)(ie)?ie:()=>ie,Je=Ge=>Ge.error(Ke());return new y.y(Ue?Ge=>Ue.schedule(Je,0,Ge):Je)}},5403:(fn,ct,$)=>{$.d(ct,{x:()=>B});var y=$(2961);function B(ie,Ue,Ke,Je,Ge){return new X(ie,Ue,Ke,Je,Ge)}class X extends y.Lv{constructor(Ue,Ke,Je,Ge,at,be){super(Ue),this.onFinalize=at,this.shouldUnsubscribe=be,this._next=Ke?function(Ce){try{Ke(Ce)}catch(tt){Ue.error(tt)}}:super._next,this._error=Ge?function(Ce){try{Ge(Ce)}catch(tt){Ue.error(tt)}finally{this.unsubscribe()}}:super._error,this._complete=Je?function(){try{Je()}catch(Ce){Ue.error(Ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ke}=this;super.unsubscribe(),!Ke&&(null===(Ue=this.onFinalize)||void 0===Ue||Ue.call(this))}}}},262:(fn,ct,$)=>{$.d(ct,{K:()=>ie});var y=$(8421),B=$(5403),X=$(4482);function ie(Ue){return(0,X.e)((Ke,Je)=>{let be,Ge=null,at=!1;Ge=Ke.subscribe((0,B.x)(Je,void 0,void 0,Ce=>{be=(0,y.Xf)(Ue(Ce,ie(Ue)(Ke))),Ge?(Ge.unsubscribe(),Ge=null,be.subscribe(Je)):at=!0})),at&&(Ge.unsubscribe(),Ge=null,be.subscribe(Je))})}},4351:(fn,ct,$)=>{$.d(ct,{b:()=>X});var y=$(5577),B=$(576);function X(ie,Ue){return(0,B.m)(Ue)?(0,y.z)(ie,Ue,1):(0,y.z)(ie,1)}},6590:(fn,ct,$)=>{$.d(ct,{d:()=>X});var y=$(4482),B=$(5403);function X(ie){return(0,y.e)((Ue,Ke)=>{let Je=!1;Ue.subscribe((0,B.x)(Ke,Ge=>{Je=!0,Ke.next(Ge)},()=>{Je||Ke.next(ie),Ke.complete()}))})}},9300:(fn,ct,$)=>{$.d(ct,{h:()=>X});var y=$(4482),B=$(5403);function X(ie,Ue){return(0,y.e)((Ke,Je)=>{let Ge=0;Ke.subscribe((0,B.x)(Je,at=>ie.call(Ue,at,Ge++)&&Je.next(at)))})}},590:(fn,ct,$)=>{$.d(ct,{P:()=>Je});var y=$(6805),B=$(9300),X=$(5698),ie=$(6590),Ue=$(8068),Ke=$(4671);function Je(Ge,at){const be=arguments.length>=2;return Ce=>Ce.pipe(Ge?(0,B.h)((tt,Lt)=>Ge(tt,Lt,Ce)):Ke.y,(0,X.q)(1),be?(0,ie.d)(at):(0,Ue.T)(()=>new y.K))}},4004:(fn,ct,$)=>{$.d(ct,{U:()=>X});var y=$(4482),B=$(5403);function X(ie,Ue){return(0,y.e)((Ke,Je)=>{let Ge=0;Ke.subscribe((0,B.x)(Je,at=>{Je.next(ie.call(Ue,at,Ge++))}))})}},8189:(fn,ct,$)=>{$.d(ct,{J:()=>X});var y=$(5577),B=$(4671);function X(ie=1/0){return(0,y.z)(B.y,ie)}},5577:(fn,ct,$)=>{$.d(ct,{z:()=>Ge});var y=$(4004),B=$(8421),X=$(4482),ie=$(9672),Ue=$(5403),Je=$(576);function Ge(at,be,Ce=1/0){return(0,Je.m)(be)?Ge((tt,Lt)=>(0,y.U)((ft,ht)=>be(tt,ft,Lt,ht))((0,B.Xf)(at(tt,Lt))),Ce):("number"==typeof be&&(Ce=be),(0,X.e)((tt,Lt)=>function Ke(at,be,Ce,tt,Lt,ft,ht,Bt){const mt=[];let Ft=0,dn=0,Xt=!1;const we=()=>{Xt&&!mt.length&&!Ft&&be.complete()},Me=Et=>Ft<tt?it(Et):mt.push(Et),it=Et=>{ft&&be.next(Et),Ft++;let pt=!1;(0,B.Xf)(Ce(Et,dn++)).subscribe((0,Ue.x)(be,et=>{null==Lt||Lt(et),ft?Me(et):be.next(et)},()=>{pt=!0},void 0,()=>{if(pt)try{for(Ft--;mt.length&&Ft<tt;){const et=mt.shift();ht?(0,ie.f)(be,ht,()=>it(et)):it(et)}we()}catch(et){be.error(et)}}))};return at.subscribe((0,Ue.x)(be,Me,()=>{Xt=!0,we()})),()=>{null==Bt||Bt()}}(tt,Lt,at,Ce)))}},5363:(fn,ct,$)=>{$.d(ct,{Q:()=>ie});var y=$(9672),B=$(4482),X=$(5403);function ie(Ue,Ke=0){return(0,B.e)((Je,Ge)=>{Je.subscribe((0,X.x)(Ge,at=>(0,y.f)(Ge,Ue,()=>Ge.next(at),Ke),()=>(0,y.f)(Ge,Ue,()=>Ge.complete(),Ke),at=>(0,y.f)(Ge,Ue,()=>Ge.error(at),Ke)))})}},5026:(fn,ct,$)=>{$.d(ct,{R:()=>ie});var y=$(4482),B=$(5403);function X(Ue,Ke,Je,Ge,at){return(be,Ce)=>{let tt=Je,Lt=Ke,ft=0;be.subscribe((0,B.x)(Ce,ht=>{const Bt=ft++;Lt=tt?Ue(Lt,ht,Bt):(tt=!0,ht),Ge&&Ce.next(Lt)},at&&(()=>{tt&&Ce.next(Lt),Ce.complete()})))}}function ie(Ue,Ke){return(0,y.e)(X(Ue,Ke,arguments.length>=2,!0))}},3099:(fn,ct,$)=>{$.d(ct,{B:()=>Ue});var y=$(8421),B=$(7579),X=$(2961),ie=$(4482);function Ue(Je={}){const{connector:Ge=(()=>new B.x),resetOnError:at=!0,resetOnComplete:be=!0,resetOnRefCountZero:Ce=!0}=Je;return tt=>{let Lt,ft,ht,Bt=0,mt=!1,Ft=!1;const dn=()=>{null==ft||ft.unsubscribe(),ft=void 0},Xt=()=>{dn(),Lt=ht=void 0,mt=Ft=!1},we=()=>{const Me=Lt;Xt(),null==Me||Me.unsubscribe()};return(0,ie.e)((Me,it)=>{Bt++,!Ft&&!mt&&dn();const Et=ht=null!=ht?ht:Ge();it.add(()=>{Bt--,0===Bt&&!Ft&&!mt&&(ft=Ke(we,Ce))}),Et.subscribe(it),!Lt&&Bt>0&&(Lt=new X.Hp({next:pt=>Et.next(pt),error:pt=>{Ft=!0,dn(),ft=Ke(Xt,at,pt),Et.error(pt)},complete:()=>{mt=!0,dn(),ft=Ke(Xt,be),Et.complete()}}),(0,y.Xf)(Me).subscribe(Lt))})(tt)}}function Ke(Je,Ge,...at){if(!0===Ge)return void Je();if(!1===Ge)return;const be=new X.Hp({next:()=>{be.unsubscribe(),Je()}});return Ge(...at).subscribe(be)}},8675:(fn,ct,$)=>{$.d(ct,{O:()=>ie});var y=$(7272),B=$(7669),X=$(4482);function ie(...Ue){const Ke=(0,B.yG)(Ue);return(0,X.e)((Je,Ge)=>{(Ke?(0,y.z)(Ue,Je,Ke):(0,y.z)(Ue,Je)).subscribe(Ge)})}},9468:(fn,ct,$)=>{$.d(ct,{R:()=>B});var y=$(4482);function B(X,ie=0){return(0,y.e)((Ue,Ke)=>{Ke.add(X.schedule(()=>Ue.subscribe(Ke),ie))})}},3900:(fn,ct,$)=>{$.d(ct,{w:()=>ie});var y=$(8421),B=$(4482),X=$(5403);function ie(Ue,Ke){return(0,B.e)((Je,Ge)=>{let at=null,be=0,Ce=!1;const tt=()=>Ce&&!at&&Ge.complete();Je.subscribe((0,X.x)(Ge,Lt=>{null==at||at.unsubscribe();let ft=0;const ht=be++;(0,y.Xf)(Ue(Lt,ht)).subscribe(at=(0,X.x)(Ge,Bt=>Ge.next(Ke?Ke(Lt,Bt,ht,ft++):Bt),()=>{at=null,tt()}))},()=>{Ce=!0,tt()}))})}},5698:(fn,ct,$)=>{$.d(ct,{q:()=>ie});var y=$(515),B=$(4482),X=$(5403);function ie(Ue){return Ue<=0?()=>y.E:(0,B.e)((Ke,Je)=>{let Ge=0;Ke.subscribe((0,X.x)(Je,at=>{++Ge<=Ue&&(Je.next(at),Ue<=Ge&&Je.complete())}))})}},8505:(fn,ct,$)=>{$.d(ct,{b:()=>Ue});var y=$(576),B=$(4482),X=$(5403),ie=$(4671);function Ue(Ke,Je,Ge){const at=(0,y.m)(Ke)||Je||Ge?{next:Ke,error:Je,complete:Ge}:Ke;return at?(0,B.e)((be,Ce)=>{var tt;null===(tt=at.subscribe)||void 0===tt||tt.call(at);let Lt=!0;be.subscribe((0,X.x)(Ce,ft=>{var ht;null===(ht=at.next)||void 0===ht||ht.call(at,ft),Ce.next(ft)},()=>{var ft;Lt=!1,null===(ft=at.complete)||void 0===ft||ft.call(at),Ce.complete()},ft=>{var ht;Lt=!1,null===(ht=at.error)||void 0===ht||ht.call(at,ft),Ce.error(ft)},()=>{var ft,ht;Lt&&(null===(ft=at.unsubscribe)||void 0===ft||ft.call(at)),null===(ht=at.finalize)||void 0===ht||ht.call(at)}))}):ie.y}},8068:(fn,ct,$)=>{$.d(ct,{T:()=>ie});var y=$(6805),B=$(4482),X=$(5403);function ie(Ke=Ue){return(0,B.e)((Je,Ge)=>{let at=!1;Je.subscribe((0,X.x)(Ge,be=>{at=!0,Ge.next(be)},()=>at?Ge.complete():Ge.error(Ke())))})}function Ue(){return new y.K}},4408:(fn,ct,$)=>{$.d(ct,{o:()=>Ue});var y=$(727);class B extends y.w0{constructor(Je,Ge){super()}schedule(Je,Ge=0){return this}}const X={setInterval(Ke,Je,...Ge){const{delegate:at}=X;return(null==at?void 0:at.setInterval)?at.setInterval(Ke,Je,...Ge):setInterval(Ke,Je,...Ge)},clearInterval(Ke){const{delegate:Je}=X;return((null==Je?void 0:Je.clearInterval)||clearInterval)(Ke)},delegate:void 0};var ie=$(8737);class Ue extends B{constructor(Je,Ge){super(Je,Ge),this.scheduler=Je,this.work=Ge,this.pending=!1}schedule(Je,Ge=0){var at;if(this.closed)return this;this.state=Je;const be=this.id,Ce=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(Ce,be,Ge)),this.pending=!0,this.delay=Ge,this.id=null!==(at=this.id)&&void 0!==at?at:this.requestAsyncId(Ce,this.id,Ge),this}requestAsyncId(Je,Ge,at=0){return X.setInterval(Je.flush.bind(Je,this),at)}recycleAsyncId(Je,Ge,at=0){if(null!=at&&this.delay===at&&!1===this.pending)return Ge;null!=Ge&&X.clearInterval(Ge)}execute(Je,Ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const at=this._execute(Je,Ge);if(at)return at;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Je,Ge){let be,at=!1;try{this.work(Je)}catch(Ce){at=!0,be=Ce||new Error("Scheduled action threw falsy error")}if(at)return this.unsubscribe(),be}unsubscribe(){if(!this.closed){const{id:Je,scheduler:Ge}=this,{actions:at}=Ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(at,this),null!=Je&&(this.id=this.recycleAsyncId(Ge,Je,null)),this.delay=null,super.unsubscribe()}}}},7565:(fn,ct,$)=>{$.d(ct,{v:()=>X});var y=$(6063);class B{constructor(Ue,Ke=B.now){this.schedulerActionCtor=Ue,this.now=Ke}schedule(Ue,Ke=0,Je){return new this.schedulerActionCtor(this,Ue).schedule(Je,Ke)}}B.now=y.l.now;class X extends B{constructor(Ue,Ke=B.now){super(Ue,Ke),this.actions=[],this._active=!1}flush(Ue){const{actions:Ke}=this;if(this._active)return void Ke.push(Ue);let Je;this._active=!0;do{if(Je=Ue.execute(Ue.state,Ue.delay))break}while(Ue=Ke.shift());if(this._active=!1,Je){for(;Ue=Ke.shift();)Ue.unsubscribe();throw Je}}}},4986:(fn,ct,$)=>{$.d(ct,{z:()=>X});var y=$(4408);const X=new($(7565).v)(y.o)},6063:(fn,ct,$)=>{$.d(ct,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(fn,ct,$)=>{$.d(ct,{z:()=>y});const y={setTimeout(B,X,...ie){const{delegate:Ue}=y;return(null==Ue?void 0:Ue.setTimeout)?Ue.setTimeout(B,X,...ie):setTimeout(B,X,...ie)},clearTimeout(B){const{delegate:X}=y;return((null==X?void 0:X.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(fn,ct,$)=>{$.d(ct,{h:()=>B});const B=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(fn,ct,$)=>{$.d(ct,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(fn,ct,$)=>{$.d(ct,{K:()=>B});const B=(0,$(3888).d)(X=>function(){X(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(fn,ct,$)=>{$.d(ct,{_6:()=>Ke,jO:()=>ie,yG:()=>Ue});var y=$(576);function X(Je){return Je[Je.length-1]}function ie(Je){return(0,y.m)(X(Je))?Je.pop():void 0}function Ue(Je){return function B(Je){return Je&&(0,y.m)(Je.schedule)}(X(Je))?Je.pop():void 0}function Ke(Je,Ge){return"number"==typeof X(Je)?Je.pop():Ge}},4742:(fn,ct,$)=>{$.d(ct,{D:()=>Ue});const{isArray:y}=Array,{getPrototypeOf:B,prototype:X,keys:ie}=Object;function Ue(Je){if(1===Je.length){const Ge=Je[0];if(y(Ge))return{args:Ge,keys:null};if(function Ke(Je){return Je&&"object"==typeof Je&&B(Je)===X}(Ge)){const at=ie(Ge);return{args:at.map(be=>Ge[be]),keys:at}}}return{args:Je,keys:null}}},8737:(fn,ct,$)=>{function y(B,X){if(B){const ie=B.indexOf(X);0<=ie&&B.splice(ie,1)}}$.d(ct,{P:()=>y})},3888:(fn,ct,$)=>{function y(B){const ie=B(Ue=>{Error.call(Ue),Ue.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}$.d(ct,{d:()=>y})},1810:(fn,ct,$)=>{function y(B,X){return B.reduce((ie,Ue,Ke)=>(ie[Ue]=X[Ke],ie),{})}$.d(ct,{n:()=>y})},2806:(fn,ct,$)=>{$.d(ct,{O:()=>ie,x:()=>X});var y=$(2416);let B=null;function X(Ue){if(y.v.useDeprecatedSynchronousErrorHandling){const Ke=!B;if(Ke&&(B={errorThrown:!1,error:null}),Ue(),Ke){const{errorThrown:Je,error:Ge}=B;if(B=null,Je)throw Ge}}else Ue()}function ie(Ue){y.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=Ue)}},9672:(fn,ct,$)=>{function y(B,X,ie,Ue=0,Ke=!1){const Je=X.schedule(function(){ie(),Ke?B.add(this.schedule(null,Ue)):this.unsubscribe()},Ue);if(B.add(Je),!Ke)return Je}$.d(ct,{f:()=>y})},4671:(fn,ct,$)=>{function y(B){return B}$.d(ct,{y:()=>y})},1144:(fn,ct,$)=>{$.d(ct,{z:()=>y});const y=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(fn,ct,$)=>{$.d(ct,{D:()=>B});var y=$(576);function B(X){return Symbol.asyncIterator&&(0,y.m)(null==X?void 0:X[Symbol.asyncIterator])}},576:(fn,ct,$)=>{function y(B){return"function"==typeof B}$.d(ct,{m:()=>y})},3670:(fn,ct,$)=>{$.d(ct,{c:()=>X});var y=$(8822),B=$(576);function X(ie){return(0,B.m)(ie[y.L])}},6495:(fn,ct,$)=>{$.d(ct,{T:()=>X});var y=$(2202),B=$(576);function X(ie){return(0,B.m)(null==ie?void 0:ie[y.h])}},8239:(fn,ct,$)=>{$.d(ct,{t:()=>B});var y=$(576);function B(X){return(0,y.m)(null==X?void 0:X.then)}},3260:(fn,ct,$)=>{$.d(ct,{L:()=>ie,Q:()=>X});var y=$(7582),B=$(576);function X(Ue){return(0,y.FC)(this,arguments,function*(){const Je=Ue.getReader();try{for(;;){const{value:Ge,done:at}=yield(0,y.qq)(Je.read());if(at)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Ge)}}finally{Je.releaseLock()}})}function ie(Ue){return(0,B.m)(null==Ue?void 0:Ue.getReader)}},4482:(fn,ct,$)=>{$.d(ct,{A:()=>B,e:()=>X});var y=$(576);function B(ie){return(0,y.m)(null==ie?void 0:ie.lift)}function X(ie){return Ue=>{if(B(Ue))return Ue.lift(function(Ke){try{return ie(Ke,this)}catch(Je){this.error(Je)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(fn,ct,$)=>{$.d(ct,{Z:()=>ie});var y=$(4004);const{isArray:B}=Array;function ie(Ue){return(0,y.U)(Ke=>function X(Ue,Ke){return B(Ke)?Ue(...Ke):Ue(Ke)}(Ue,Ke))}},7849:(fn,ct,$)=>{$.d(ct,{h:()=>X});var y=$(2416),B=$(3410);function X(ie){B.z.setTimeout(()=>{const{onUnhandledError:Ue}=y.v;if(!Ue)throw ie;Ue(ie)})}},4532:(fn,ct,$)=>{function y(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(ct,{z:()=>y})},1777:(fn,ct,$)=>{$.d(ct,{LC:()=>B,SB:()=>at,X$:()=>ie,ZE:()=>dn,ZN:()=>Ft,_j:()=>y,eR:()=>Ce,jt:()=>Ue,k1:()=>Xt,l3:()=>X,oB:()=>Ge,vP:()=>Je});class y{}class B{}const X="*";function ie(we,Me){return{type:7,name:we,definitions:Me,options:{}}}function Ue(we,Me=null){return{type:4,styles:Me,timings:we}}function Je(we,Me=null){return{type:2,steps:we,options:Me}}function Ge(we){return{type:6,styles:we,offset:null}}function at(we,Me,it){return{type:0,name:we,styles:Me,options:it}}function Ce(we,Me,it=null){return{type:1,expr:we,animation:Me,options:it}}function mt(we){Promise.resolve(null).then(we)}class Ft{constructor(Me=0,it=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Me+it}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}onStart(Me){this._onStartFns.push(Me)}onDone(Me){this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){mt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Me=>Me()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Me){this._position=this.totalTime?Me*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Me){const it="start"==Me?this._onStartFns:this._onDoneFns;it.forEach(Et=>Et()),it.length=0}}class dn{constructor(Me){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Me;let it=0,Et=0,pt=0;const et=this.players.length;0==et?mt(()=>this._onFinish()):this.players.forEach(Ut=>{Ut.onDone(()=>{++it==et&&this._onFinish()}),Ut.onDestroy(()=>{++Et==et&&this._onDestroy()}),Ut.onStart(()=>{++pt==et&&this._onStart()})}),this.totalTime=this.players.reduce((Ut,bt)=>Math.max(Ut,bt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}init(){this.players.forEach(Me=>Me.init())}onStart(Me){this._onStartFns.push(Me)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Me=>Me()),this._onStartFns=[])}onDone(Me){this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Me=>Me.play())}pause(){this.players.forEach(Me=>Me.pause())}restart(){this.players.forEach(Me=>Me.restart())}finish(){this._onFinish(),this.players.forEach(Me=>Me.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Me=>Me.destroy()),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this.players.forEach(Me=>Me.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Me){const it=Me*this.totalTime;this.players.forEach(Et=>{const pt=Et.totalTime?Math.min(1,it/Et.totalTime):1;Et.setPosition(pt)})}getPosition(){const Me=this.players.reduce((it,Et)=>null===it||Et.totalTime>it.totalTime?Et:it,null);return null!=Me?Me.getPosition():0}beforeDestroy(){this.players.forEach(Me=>{Me.beforeDestroy&&Me.beforeDestroy()})}triggerCallback(Me){const it="start"==Me?this._onStartFns:this._onDoneFns;it.forEach(Et=>Et()),it.length=0}}const Xt="!"},9808:(fn,ct,$)=>{$.d(ct,{Do:()=>we,EM:()=>Zs,HT:()=>Ue,JF:()=>Ei,JJ:()=>Pa,K0:()=>Je,Mx:()=>zi,O5:()=>xr,PC:()=>br,PM:()=>Bs,S$:()=>mt,V_:()=>be,Ye:()=>Me,b0:()=>Xt,bD:()=>vo,ez:()=>ys,lw:()=>Ge,mk:()=>Cs,mr:()=>dn,q:()=>X,sg:()=>_n,uU:()=>hs,w_:()=>Ke});var y=$(5e3);let B=null;function X(){return B}function Ue(F){B||(B=F)}class Ke{}const Je=new y.OlP("DocumentToken");let Ge=(()=>{class F{historyGo(j){throw new Error("Not implemented")}}return F.\u0275fac=function(j){return new(j||F)},F.\u0275prov=y.Yz7({token:F,factory:function(){return function at(){return(0,y.LFG)(Ce)}()},providedIn:"platform"}),F})();const be=new y.OlP("Location Initialized");let Ce=(()=>{class F extends Ge{constructor(j){super(),this._doc=j,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return X().getBaseHref(this._doc)}onPopState(j){const ce=X().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("popstate",j,!1),()=>ce.removeEventListener("popstate",j)}onHashChange(j){const ce=X().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("hashchange",j,!1),()=>ce.removeEventListener("hashchange",j)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(j){this.location.pathname=j}pushState(j,ce,Oe){tt()?this._history.pushState(j,ce,Oe):this.location.hash=Oe}replaceState(j,ce,Oe){tt()?this._history.replaceState(j,ce,Oe):this.location.hash=Oe}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return F.\u0275fac=function(j){return new(j||F)(y.LFG(Je))},F.\u0275prov=y.Yz7({token:F,factory:function(){return function Lt(){return new Ce((0,y.LFG)(Je))}()},providedIn:"platform"}),F})();function tt(){return!!window.history.pushState}function ft(F,ae){if(0==F.length)return ae;if(0==ae.length)return F;let j=0;return F.endsWith("/")&&j++,ae.startsWith("/")&&j++,2==j?F+ae.substring(1):1==j?F+ae:F+"/"+ae}function ht(F){const ae=F.match(/#|\?|$/),j=ae&&ae.index||F.length;return F.slice(0,j-("/"===F[j-1]?1:0))+F.slice(j)}function Bt(F){return F&&"?"!==F[0]?"?"+F:F}let mt=(()=>{class F{historyGo(j){throw new Error("Not implemented")}}return F.\u0275fac=function(j){return new(j||F)},F.\u0275prov=y.Yz7({token:F,factory:function(){return function Ft(F){const ae=(0,y.LFG)(Je).location;return new Xt((0,y.LFG)(Ge),ae&&ae.origin||"")}()},providedIn:"root"}),F})();const dn=new y.OlP("appBaseHref");let Xt=(()=>{class F extends mt{constructor(j,ce){if(super(),this._platformLocation=j,this._removeListenerFns=[],null==ce&&(ce=this._platformLocation.getBaseHrefFromDOM()),null==ce)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ce}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return ft(this._baseHref,j)}path(j=!1){const ce=this._platformLocation.pathname+Bt(this._platformLocation.search),Oe=this._platformLocation.hash;return Oe&&j?`${ce}${Oe}`:ce}pushState(j,ce,Oe,Rt){const jt=this.prepareExternalUrl(Oe+Bt(Rt));this._platformLocation.pushState(j,ce,jt)}replaceState(j,ce,Oe,Rt){const jt=this.prepareExternalUrl(Oe+Bt(Rt));this._platformLocation.replaceState(j,ce,jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var ce,Oe;null===(Oe=(ce=this._platformLocation).historyGo)||void 0===Oe||Oe.call(ce,j)}}return F.\u0275fac=function(j){return new(j||F)(y.LFG(Ge),y.LFG(dn,8))},F.\u0275prov=y.Yz7({token:F,factory:F.\u0275fac}),F})(),we=(()=>{class F extends mt{constructor(j,ce){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=ce&&(this._baseHref=ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let ce=this._platformLocation.hash;return null==ce&&(ce="#"),ce.length>0?ce.substring(1):ce}prepareExternalUrl(j){const ce=ft(this._baseHref,j);return ce.length>0?"#"+ce:ce}pushState(j,ce,Oe,Rt){let jt=this.prepareExternalUrl(Oe+Bt(Rt));0==jt.length&&(jt=this._platformLocation.pathname),this._platformLocation.pushState(j,ce,jt)}replaceState(j,ce,Oe,Rt){let jt=this.prepareExternalUrl(Oe+Bt(Rt));0==jt.length&&(jt=this._platformLocation.pathname),this._platformLocation.replaceState(j,ce,jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var ce,Oe;null===(Oe=(ce=this._platformLocation).historyGo)||void 0===Oe||Oe.call(ce,j)}}return F.\u0275fac=function(j){return new(j||F)(y.LFG(Ge),y.LFG(dn,8))},F.\u0275prov=y.Yz7({token:F,factory:F.\u0275fac}),F})(),Me=(()=>{class F{constructor(j,ce){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=j;const Oe=this._platformStrategy.getBaseHref();this._platformLocation=ce,this._baseHref=ht(pt(Oe)),this._platformStrategy.onPopState(Rt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Rt.state,type:Rt.type})})}path(j=!1){return this.normalize(this._platformStrategy.path(j))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(j,ce=""){return this.path()==this.normalize(j+Bt(ce))}normalize(j){return F.stripTrailingSlash(function Et(F,ae){return F&&ae.startsWith(F)?ae.substring(F.length):ae}(this._baseHref,pt(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._platformStrategy.prepareExternalUrl(j)}go(j,ce="",Oe=null){this._platformStrategy.pushState(Oe,"",j,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+Bt(ce)),Oe)}replaceState(j,ce="",Oe=null){this._platformStrategy.replaceState(Oe,"",j,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+Bt(ce)),Oe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(j=0){var ce,Oe;null===(Oe=(ce=this._platformStrategy).historyGo)||void 0===Oe||Oe.call(ce,j)}onUrlChange(j){this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ce=>{this._notifyUrlChangeListeners(ce.url,ce.state)}))}_notifyUrlChangeListeners(j="",ce){this._urlChangeListeners.forEach(Oe=>Oe(j,ce))}subscribe(j,ce,Oe){return this._subject.subscribe({next:j,error:ce,complete:Oe})}}return F.normalizeQueryParams=Bt,F.joinWithSlash=ft,F.stripTrailingSlash=ht,F.\u0275fac=function(j){return new(j||F)(y.LFG(mt),y.LFG(Ge))},F.\u0275prov=y.Yz7({token:F,factory:function(){return function it(){return new Me((0,y.LFG)(mt),(0,y.LFG)(Ge))}()},providedIn:"root"}),F})();function pt(F){return F.replace(/\/index.html$/,"")}var Ut=(()=>((Ut=Ut||{})[Ut.Decimal=0]="Decimal",Ut[Ut.Percent=1]="Percent",Ut[Ut.Currency=2]="Currency",Ut[Ut.Scientific=3]="Scientific",Ut))(),Fn=(()=>((Fn=Fn||{})[Fn.Format=0]="Format",Fn[Fn.Standalone=1]="Standalone",Fn))(),Ht=(()=>((Ht=Ht||{})[Ht.Narrow=0]="Narrow",Ht[Ht.Abbreviated=1]="Abbreviated",Ht[Ht.Wide=2]="Wide",Ht[Ht.Short=3]="Short",Ht))(),Nn=(()=>((Nn=Nn||{})[Nn.Short=0]="Short",Nn[Nn.Medium=1]="Medium",Nn[Nn.Long=2]="Long",Nn[Nn.Full=3]="Full",Nn))(),rn=(()=>((rn=rn||{})[rn.Decimal=0]="Decimal",rn[rn.Group=1]="Group",rn[rn.List=2]="List",rn[rn.PercentSign=3]="PercentSign",rn[rn.PlusSign=4]="PlusSign",rn[rn.MinusSign=5]="MinusSign",rn[rn.Exponential=6]="Exponential",rn[rn.SuperscriptingExponent=7]="SuperscriptingExponent",rn[rn.PerMille=8]="PerMille",rn[rn.Infinity=9]="Infinity",rn[rn.NaN=10]="NaN",rn[rn.TimeSeparator=11]="TimeSeparator",rn[rn.CurrencyDecimal=12]="CurrencyDecimal",rn[rn.CurrencyGroup=13]="CurrencyGroup",rn))();function De(F,ae){return Dn((0,y.cg1)(F)[y.wAp.DateFormat],ae)}function Ee(F,ae){return Dn((0,y.cg1)(F)[y.wAp.TimeFormat],ae)}function xe(F,ae){return Dn((0,y.cg1)(F)[y.wAp.DateTimeFormat],ae)}function gt(F,ae){const j=(0,y.cg1)(F),ce=j[y.wAp.NumberSymbols][ae];if(void 0===ce){if(ae===rn.CurrencyDecimal)return j[y.wAp.NumberSymbols][rn.Decimal];if(ae===rn.CurrencyGroup)return j[y.wAp.NumberSymbols][rn.Group]}return ce}function jn(F){if(!F[y.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${F[y.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Dn(F,ae){for(let j=ae;j>-1;j--)if(void 0!==F[j])return F[j];throw new Error("Locale data API: locale data undefined")}function On(F){const[ae,j]=F.split(":");return{hours:+ae,minutes:+j}}const Fe=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ze={},lt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var At=(()=>((At=At||{})[At.Short=0]="Short",At[At.ShortGMT=1]="ShortGMT",At[At.Long=2]="Long",At[At.Extended=3]="Extended",At))(),Wt=(()=>((Wt=Wt||{})[Wt.FullYear=0]="FullYear",Wt[Wt.Month=1]="Month",Wt[Wt.Date=2]="Date",Wt[Wt.Hours=3]="Hours",Wt[Wt.Minutes=4]="Minutes",Wt[Wt.Seconds=5]="Seconds",Wt[Wt.FractionalSeconds=6]="FractionalSeconds",Wt[Wt.Day=7]="Day",Wt))(),nn=(()=>((nn=nn||{})[nn.DayPeriods=0]="DayPeriods",nn[nn.Days=1]="Days",nn[nn.Months=2]="Months",nn[nn.Eras=3]="Eras",nn))();function Ur(F,ae,j,ce){let Oe=function ne(F){if(Se(F))return F;if("number"==typeof F&&!isNaN(F))return new Date(F);if("string"==typeof F){if(F=F.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(F)){const[Oe,Rt=1,jt=1]=F.split("-").map(bn=>+bn);return er(Oe,Rt-1,jt)}const j=parseFloat(F);if(!isNaN(F-j))return new Date(j);let ce;if(ce=F.match(Fe))return function se(F){const ae=new Date(0);let j=0,ce=0;const Oe=F[8]?ae.setUTCFullYear:ae.setFullYear,Rt=F[8]?ae.setUTCHours:ae.setHours;F[9]&&(j=Number(F[9]+F[10]),ce=Number(F[9]+F[11])),Oe.call(ae,Number(F[1]),Number(F[2])-1,Number(F[3]));const jt=Number(F[4]||0)-j,bn=Number(F[5]||0)-ce,jr=Number(F[6]||0),Pr=Math.floor(1e3*parseFloat("0."+(F[7]||0)));return Rt.call(ae,jt,bn,jr,Pr),ae}(ce)}const ae=new Date(F);if(!Se(ae))throw new Error(`Unable to convert "${F}" into a date`);return ae}(F);ae=Mn(j,ae)||ae;let bn,jt=[];for(;ae;){if(bn=lt.exec(ae),!bn){jt.push(ae);break}{jt=jt.concat(bn.slice(1));const gr=jt.pop();if(!gr)break;ae=gr}}let jr=Oe.getTimezoneOffset();ce&&(jr=he(ce,jr),Oe=function G(F,ae,j){const ce=j?-1:1,Oe=F.getTimezoneOffset();return function ge(F,ae){return(F=new Date(F.getTime())).setMinutes(F.getMinutes()+ae),F}(F,ce*(he(ae,Oe)-Oe))}(Oe,ce,!0));let Pr="";return jt.forEach(gr=>{const Vr=function Ae(F){if(Pe[F])return Pe[F];let ae;switch(F){case"G":case"GG":case"GGG":ae=lr(nn.Eras,Ht.Abbreviated);break;case"GGGG":ae=lr(nn.Eras,Ht.Wide);break;case"GGGGG":ae=lr(nn.Eras,Ht.Narrow);break;case"y":ae=Yt(Wt.FullYear,1,0,!1,!0);break;case"yy":ae=Yt(Wt.FullYear,2,0,!0,!0);break;case"yyy":ae=Yt(Wt.FullYear,3,0,!1,!0);break;case"yyyy":ae=Yt(Wt.FullYear,4,0,!1,!0);break;case"Y":ae=zr(1);break;case"YY":ae=zr(2,!0);break;case"YYY":ae=zr(3);break;case"YYYY":ae=zr(4);break;case"M":case"L":ae=Yt(Wt.Month,1,1);break;case"MM":case"LL":ae=Yt(Wt.Month,2,1);break;case"MMM":ae=lr(nn.Months,Ht.Abbreviated);break;case"MMMM":ae=lr(nn.Months,Ht.Wide);break;case"MMMMM":ae=lr(nn.Months,Ht.Narrow);break;case"LLL":ae=lr(nn.Months,Ht.Abbreviated,Fn.Standalone);break;case"LLLL":ae=lr(nn.Months,Ht.Wide,Fn.Standalone);break;case"LLLLL":ae=lr(nn.Months,Ht.Narrow,Fn.Standalone);break;case"w":ae=Ri(1);break;case"ww":ae=Ri(2);break;case"W":ae=Ri(1,!0);break;case"d":ae=Yt(Wt.Date,1);break;case"dd":ae=Yt(Wt.Date,2);break;case"c":case"cc":ae=Yt(Wt.Day,1);break;case"ccc":ae=lr(nn.Days,Ht.Abbreviated,Fn.Standalone);break;case"cccc":ae=lr(nn.Days,Ht.Wide,Fn.Standalone);break;case"ccccc":ae=lr(nn.Days,Ht.Narrow,Fn.Standalone);break;case"cccccc":ae=lr(nn.Days,Ht.Short,Fn.Standalone);break;case"E":case"EE":case"EEE":ae=lr(nn.Days,Ht.Abbreviated);break;case"EEEE":ae=lr(nn.Days,Ht.Wide);break;case"EEEEE":ae=lr(nn.Days,Ht.Narrow);break;case"EEEEEE":ae=lr(nn.Days,Ht.Short);break;case"a":case"aa":case"aaa":ae=lr(nn.DayPeriods,Ht.Abbreviated);break;case"aaaa":ae=lr(nn.DayPeriods,Ht.Wide);break;case"aaaaa":ae=lr(nn.DayPeriods,Ht.Narrow);break;case"b":case"bb":case"bbb":ae=lr(nn.DayPeriods,Ht.Abbreviated,Fn.Standalone,!0);break;case"bbbb":ae=lr(nn.DayPeriods,Ht.Wide,Fn.Standalone,!0);break;case"bbbbb":ae=lr(nn.DayPeriods,Ht.Narrow,Fn.Standalone,!0);break;case"B":case"BB":case"BBB":ae=lr(nn.DayPeriods,Ht.Abbreviated,Fn.Format,!0);break;case"BBBB":ae=lr(nn.DayPeriods,Ht.Wide,Fn.Format,!0);break;case"BBBBB":ae=lr(nn.DayPeriods,Ht.Narrow,Fn.Format,!0);break;case"h":ae=Yt(Wt.Hours,1,-12);break;case"hh":ae=Yt(Wt.Hours,2,-12);break;case"H":ae=Yt(Wt.Hours,1);break;case"HH":ae=Yt(Wt.Hours,2);break;case"m":ae=Yt(Wt.Minutes,1);break;case"mm":ae=Yt(Wt.Minutes,2);break;case"s":ae=Yt(Wt.Seconds,1);break;case"ss":ae=Yt(Wt.Seconds,2);break;case"S":ae=Yt(Wt.FractionalSeconds,1);break;case"SS":ae=Yt(Wt.FractionalSeconds,2);break;case"SSS":ae=Yt(Wt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ae=tr(At.Short);break;case"ZZZZZ":ae=tr(At.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ae=tr(At.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ae=tr(At.Long);break;default:return null}return Pe[F]=ae,ae}(gr);Pr+=Vr?Vr(Oe,j,jr):"''"===gr?"'":gr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Pr}function er(F,ae,j){const ce=new Date(0);return ce.setFullYear(F,ae,j),ce.setHours(0,0,0),ce}function Mn(F,ae){const j=function Ln(F){return(0,y.cg1)(F)[y.wAp.LocaleId]}(F);if(ze[j]=ze[j]||{},ze[j][ae])return ze[j][ae];let ce="";switch(ae){case"shortDate":ce=De(F,Nn.Short);break;case"mediumDate":ce=De(F,Nn.Medium);break;case"longDate":ce=De(F,Nn.Long);break;case"fullDate":ce=De(F,Nn.Full);break;case"shortTime":ce=Ee(F,Nn.Short);break;case"mediumTime":ce=Ee(F,Nn.Medium);break;case"longTime":ce=Ee(F,Nn.Long);break;case"fullTime":ce=Ee(F,Nn.Full);break;case"short":const Oe=Mn(F,"shortTime"),Rt=Mn(F,"shortDate");ce=ci(xe(F,Nn.Short),[Oe,Rt]);break;case"medium":const jt=Mn(F,"mediumTime"),bn=Mn(F,"mediumDate");ce=ci(xe(F,Nn.Medium),[jt,bn]);break;case"long":const jr=Mn(F,"longTime"),Pr=Mn(F,"longDate");ce=ci(xe(F,Nn.Long),[jr,Pr]);break;case"full":const gr=Mn(F,"fullTime"),Vr=Mn(F,"fullDate");ce=ci(xe(F,Nn.Full),[gr,Vr])}return ce&&(ze[j][ae]=ce),ce}function ci(F,ae){return ae&&(F=F.replace(/\{([^}]+)}/g,function(j,ce){return null!=ae&&ce in ae?ae[ce]:j})),F}function Tr(F,ae,j="-",ce,Oe){let Rt="";(F<0||Oe&&F<=0)&&(Oe?F=1-F:(F=-F,Rt=j));let jt=String(F);for(;jt.length<ae;)jt="0"+jt;return ce&&(jt=jt.substr(jt.length-ae)),Rt+jt}function Yt(F,ae,j=0,ce=!1,Oe=!1){return function(Rt,jt){let bn=function Rr(F,ae){switch(F){case Wt.FullYear:return ae.getFullYear();case Wt.Month:return ae.getMonth();case Wt.Date:return ae.getDate();case Wt.Hours:return ae.getHours();case Wt.Minutes:return ae.getMinutes();case Wt.Seconds:return ae.getSeconds();case Wt.FractionalSeconds:return ae.getMilliseconds();case Wt.Day:return ae.getDay();default:throw new Error(`Unknown DateType value "${F}".`)}}(F,Rt);if((j>0||bn>-j)&&(bn+=j),F===Wt.Hours)0===bn&&-12===j&&(bn=12);else if(F===Wt.FractionalSeconds)return function Ar(F,ae){return Tr(F,3).substr(0,ae)}(bn,ae);const jr=gt(jt,rn.MinusSign);return Tr(bn,ae,jr,ce,Oe)}}function lr(F,ae,j=Fn.Format,ce=!1){return function(Oe,Rt){return function _r(F,ae,j,ce,Oe,Rt){switch(j){case nn.Months:return function an(F,ae,j){const ce=(0,y.cg1)(F),Rt=Dn([ce[y.wAp.MonthsFormat],ce[y.wAp.MonthsStandalone]],ae);return Dn(Rt,j)}(ae,Oe,ce)[F.getMonth()];case nn.Days:return function Xn(F,ae,j){const ce=(0,y.cg1)(F),Rt=Dn([ce[y.wAp.DaysFormat],ce[y.wAp.DaysStandalone]],ae);return Dn(Rt,j)}(ae,Oe,ce)[F.getDay()];case nn.DayPeriods:const jt=F.getHours(),bn=F.getMinutes();if(Rt){const Pr=function Fr(F){const ae=(0,y.cg1)(F);return jn(ae),(ae[y.wAp.ExtraData][2]||[]).map(ce=>"string"==typeof ce?On(ce):[On(ce[0]),On(ce[1])])}(ae),gr=function wn(F,ae,j){const ce=(0,y.cg1)(F);jn(ce);const Rt=Dn([ce[y.wAp.ExtraData][0],ce[y.wAp.ExtraData][1]],ae)||[];return Dn(Rt,j)||[]}(ae,Oe,ce),Vr=Pr.findIndex(Ii=>{if(Array.isArray(Ii)){const[bi,pi]=Ii,oo=jt>=bi.hours&&bn>=bi.minutes,Ni=jt<pi.hours||jt===pi.hours&&bn<pi.minutes;if(bi.hours<pi.hours){if(oo&&Ni)return!0}else if(oo||Ni)return!0}else if(Ii.hours===jt&&Ii.minutes===bn)return!0;return!1});if(-1!==Vr)return gr[Vr]}return function fr(F,ae,j){const ce=(0,y.cg1)(F),Rt=Dn([ce[y.wAp.DayPeriodsFormat],ce[y.wAp.DayPeriodsStandalone]],ae);return Dn(Rt,j)}(ae,Oe,ce)[jt<12?0:1];case nn.Eras:return function nt(F,ae){return Dn((0,y.cg1)(F)[y.wAp.Eras],ae)}(ae,ce)[F.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${j}`)}}(Oe,Rt,F,ae,j,ce)}}function tr(F){return function(ae,j,ce){const Oe=-1*ce,Rt=gt(j,rn.MinusSign),jt=Oe>0?Math.floor(Oe/60):Math.ceil(Oe/60);switch(F){case At.Short:return(Oe>=0?"+":"")+Tr(jt,2,Rt)+Tr(Math.abs(Oe%60),2,Rt);case At.ShortGMT:return"GMT"+(Oe>=0?"+":"")+Tr(jt,1,Rt);case At.Long:return"GMT"+(Oe>=0?"+":"")+Tr(jt,2,Rt)+":"+Tr(Math.abs(Oe%60),2,Rt);case At.Extended:return 0===ce?"Z":(Oe>=0?"+":"")+Tr(jt,2,Rt)+":"+Tr(Math.abs(Oe%60),2,Rt);default:throw new Error(`Unknown zone width "${F}"`)}}}function Fi(F){return er(F.getFullYear(),F.getMonth(),F.getDate()+(4-F.getDay()))}function Ri(F,ae=!1){return function(j,ce){let Oe;if(ae){const Rt=new Date(j.getFullYear(),j.getMonth(),1).getDay()-1,jt=j.getDate();Oe=1+Math.floor((jt+Rt)/7)}else{const Rt=Fi(j),jt=function fi(F){const ae=er(F,0,1).getDay();return er(F,0,1+(ae<=4?4:11)-ae)}(Rt.getFullYear()),bn=Rt.getTime()-jt.getTime();Oe=1+Math.round(bn/6048e5)}return Tr(Oe,F,gt(ce,rn.MinusSign))}}function zr(F,ae=!1){return function(j,ce){return Tr(Fi(j).getFullYear(),F,gt(ce,rn.MinusSign),ae)}}const Pe={};function he(F,ae){F=F.replace(/:/g,"");const j=Date.parse("Jan 01, 1970 00:00:00 "+F)/6e4;return isNaN(j)?ae:j}function Se(F){return F instanceof Date&&!isNaN(F.valueOf())}const dt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Br(F){const ae=parseInt(F);if(isNaN(ae))throw new Error("Invalid integer literal when parsing "+F);return ae}function zi(F,ae){ae=encodeURIComponent(ae);for(const j of F.split(";")){const ce=j.indexOf("="),[Oe,Rt]=-1==ce?[j,""]:[j.slice(0,ce),j.slice(ce+1)];if(Oe.trim()===ae)return decodeURIComponent(Rt)}return null}let Cs=(()=>{class F{constructor(j,ce,Oe,Rt){this._iterableDiffers=j,this._keyValueDiffers=ce,this._ngEl=Oe,this._renderer=Rt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(j){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof j?j.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(j){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof j?j.split(/\s+/):j,this._rawClass&&((0,y.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const j=this._iterableDiffer.diff(this._rawClass);j&&this._applyIterableChanges(j)}else if(this._keyValueDiffer){const j=this._keyValueDiffer.diff(this._rawClass);j&&this._applyKeyValueChanges(j)}}_applyKeyValueChanges(j){j.forEachAddedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),j.forEachChangedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),j.forEachRemovedItem(ce=>{ce.previousValue&&this._toggleClass(ce.key,!1)})}_applyIterableChanges(j){j.forEachAddedItem(ce=>{if("string"!=typeof ce.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,y.AaK)(ce.item)}`);this._toggleClass(ce.item,!0)}),j.forEachRemovedItem(ce=>this._toggleClass(ce.item,!1))}_applyClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(ce=>this._toggleClass(ce,!0)):Object.keys(j).forEach(ce=>this._toggleClass(ce,!!j[ce])))}_removeClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(ce=>this._toggleClass(ce,!1)):Object.keys(j).forEach(ce=>this._toggleClass(ce,!1)))}_toggleClass(j,ce){(j=j.trim())&&j.split(/\s+/g).forEach(Oe=>{ce?this._renderer.addClass(this._ngEl.nativeElement,Oe):this._renderer.removeClass(this._ngEl.nativeElement,Oe)})}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),F})();class Mr{constructor(ae,j,ce,Oe){this.$implicit=ae,this.ngForOf=j,this.index=ce,this.count=Oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _n=(()=>{class F{constructor(j,ce,Oe){this._viewContainer=j,this._template=ce,this._differs=Oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const ce=this._viewContainer;j.forEachOperation((Oe,Rt,jt)=>{if(null==Oe.previousIndex)ce.createEmbeddedView(this._template,new Mr(Oe.item,this._ngForOf,-1,-1),null===jt?void 0:jt);else if(null==jt)ce.remove(null===Rt?void 0:Rt);else if(null!==Rt){const bn=ce.get(Rt);ce.move(bn,jt),ir(bn,Oe)}});for(let Oe=0,Rt=ce.length;Oe<Rt;Oe++){const bn=ce.get(Oe).context;bn.index=Oe,bn.count=Rt,bn.ngForOf=this._ngForOf}j.forEachIdentityChange(Oe=>{ir(ce.get(Oe.currentIndex),Oe)})}static ngTemplateContextGuard(j,ce){return!0}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),F})();function ir(F,ae){F.context.$implicit=ae.item}let xr=(()=>{class F{constructor(j,ce){this._viewContainer=j,this._context=new ti,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ce}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){Xe("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){Xe("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,ce){return!0}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.s_b),y.Y36(y.Rgc))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),F})();class ti{constructor(){this.$implicit=null,this.ngIf=null}}function Xe(F,ae){if(ae&&!ae.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,y.AaK)(ae)}'.`)}let br=(()=>{class F{constructor(j,ce,Oe){this._ngEl=j,this._differs=ce,this._renderer=Oe,this._ngStyle=null,this._differ=null}set ngStyle(j){this._ngStyle=j,!this._differ&&j&&(this._differ=this._differs.find(j).create())}ngDoCheck(){if(this._differ){const j=this._differ.diff(this._ngStyle);j&&this._applyChanges(j)}}_setStyle(j,ce){const[Oe,Rt]=j.split(".");null!=(ce=null!=ce&&Rt?`${ce}${Rt}`:ce)?this._renderer.setStyle(this._ngEl.nativeElement,Oe,ce):this._renderer.removeStyle(this._ngEl.nativeElement,Oe)}_applyChanges(j){j.forEachRemovedItem(ce=>this._setStyle(ce.key,null)),j.forEachAddedItem(ce=>this._setStyle(ce.key,ce.currentValue)),j.forEachChangedItem(ce=>this._setStyle(ce.key,ce.currentValue))}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.SBq),y.Y36(y.aQg),y.Y36(y.Qsj))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),F})();function ui(F,ae){return new y.vHH(2100,"")}const Vo=new y.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let hs=(()=>{class F{constructor(j,ce){this.locale=j,this.defaultTimezone=ce}transform(j,ce="mediumDate",Oe,Rt){var jt;if(null==j||""===j||j!=j)return null;try{return Ur(j,ce,Rt||this.locale,null!==(jt=null!=Oe?Oe:this.defaultTimezone)&&void 0!==jt?jt:void 0)}catch(bn){throw ui()}}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.soG,16),y.Y36(Vo,24))},F.\u0275pipe=y.Yjl({name:"date",type:F,pure:!0}),F})(),Pa=(()=>{class F{constructor(j){this._locale=j}transform(j,ce,Oe){if(!function so(F){return!(null==F||""===F||F!=F)}(j))return null;Oe=Oe||this._locale;try{return function sn(F,ae,j){return function yt(F,ae,j,ce,Oe,Rt,jt=!1){let bn="",jr=!1;if(isFinite(F)){let Pr=function Xr(F){let ce,Oe,Rt,jt,bn,ae=Math.abs(F)+"",j=0;for((Oe=ae.indexOf("."))>-1&&(ae=ae.replace(".","")),(Rt=ae.search(/e/i))>0?(Oe<0&&(Oe=Rt),Oe+=+ae.slice(Rt+1),ae=ae.substring(0,Rt)):Oe<0&&(Oe=ae.length),Rt=0;"0"===ae.charAt(Rt);Rt++);if(Rt===(bn=ae.length))ce=[0],Oe=1;else{for(bn--;"0"===ae.charAt(bn);)bn--;for(Oe-=Rt,ce=[],jt=0;Rt<=bn;Rt++,jt++)ce[jt]=Number(ae.charAt(Rt))}return Oe>22&&(ce=ce.splice(0,21),j=Oe-1,Oe=1),{digits:ce,exponent:j,integerLen:Oe}}(F);jt&&(Pr=function ar(F){if(0===F.digits[0])return F;const ae=F.digits.length-F.integerLen;return F.exponent?F.exponent+=2:(0===ae?F.digits.push(0,0):1===ae&&F.digits.push(0),F.integerLen+=2),F}(Pr));let gr=ae.minInt,Vr=ae.minFrac,Ii=ae.maxFrac;if(Rt){const ns=Rt.match(dt);if(null===ns)throw new Error(`${Rt} is not a valid digit info`);const Mo=ns[1],ao=ns[3],jo=ns[5];null!=Mo&&(gr=Br(Mo)),null!=ao&&(Vr=Br(ao)),null!=jo?Ii=Br(jo):null!=ao&&Vr>Ii&&(Ii=Vr)}!function vr(F,ae,j){if(ae>j)throw new Error(`The minimum number of digits after fraction (${ae}) is higher than the maximum (${j}).`);let ce=F.digits,Oe=ce.length-F.integerLen;const Rt=Math.min(Math.max(ae,Oe),j);let jt=Rt+F.integerLen,bn=ce[jt];if(jt>0){ce.splice(Math.max(F.integerLen,jt));for(let Vr=jt;Vr<ce.length;Vr++)ce[Vr]=0}else{Oe=Math.max(0,Oe),F.integerLen=1,ce.length=Math.max(1,jt=Rt+1),ce[0]=0;for(let Vr=1;Vr<jt;Vr++)ce[Vr]=0}if(bn>=5)if(jt-1<0){for(let Vr=0;Vr>jt;Vr--)ce.unshift(0),F.integerLen++;ce.unshift(1),F.integerLen++}else ce[jt-1]++;for(;Oe<Math.max(0,Rt);Oe++)ce.push(0);let jr=0!==Rt;const Pr=ae+F.integerLen,gr=ce.reduceRight(function(Vr,Ii,bi,pi){return pi[bi]=(Ii+=Vr)<10?Ii:Ii-10,jr&&(0===pi[bi]&&bi>=Pr?pi.pop():jr=!1),Ii>=10?1:0},0);gr&&(ce.unshift(gr),F.integerLen++)}(Pr,Vr,Ii);let bi=Pr.digits,pi=Pr.integerLen;const oo=Pr.exponent;let Ni=[];for(jr=bi.every(ns=>!ns);pi<gr;pi++)bi.unshift(0);for(;pi<0;pi++)bi.unshift(0);pi>0?Ni=bi.splice(pi,bi.length):(Ni=bi,bi=[0]);const Bn=[];for(bi.length>=ae.lgSize&&Bn.unshift(bi.splice(-ae.lgSize,bi.length).join(""));bi.length>ae.gSize;)Bn.unshift(bi.splice(-ae.gSize,bi.length).join(""));bi.length&&Bn.unshift(bi.join("")),bn=Bn.join(gt(j,ce)),Ni.length&&(bn+=gt(j,Oe)+Ni.join("")),oo&&(bn+=gt(j,rn.Exponential)+"+"+oo)}else bn=gt(j,rn.Infinity);return bn=F<0&&!jr?ae.negPre+bn+ae.negSuf:ae.posPre+bn+ae.posSuf,bn}(F,function Tn(F,ae="-"){const j={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ce=F.split(";"),Oe=ce[0],Rt=ce[1],jt=-1!==Oe.indexOf(".")?Oe.split("."):[Oe.substring(0,Oe.lastIndexOf("0")+1),Oe.substring(Oe.lastIndexOf("0")+1)],bn=jt[0],jr=jt[1]||"";j.posPre=bn.substr(0,bn.indexOf("#"));for(let gr=0;gr<jr.length;gr++){const Vr=jr.charAt(gr);"0"===Vr?j.minFrac=j.maxFrac=gr+1:"#"===Vr?j.maxFrac=gr+1:j.posSuf+=Vr}const Pr=bn.split(",");if(j.gSize=Pr[1]?Pr[1].length:0,j.lgSize=Pr[2]||Pr[1]?(Pr[2]||Pr[1]).length:0,Rt){const gr=Oe.length-j.posPre.length-j.posSuf.length,Vr=Rt.indexOf("#");j.negPre=Rt.substr(0,Vr).replace(/'/g,""),j.negSuf=Rt.substr(Vr+gr).replace(/'/g,"")}else j.negPre=ae+j.posPre,j.negSuf=j.posSuf;return j}(function tn(F,ae){return(0,y.cg1)(F)[y.wAp.NumberFormats][ae]}(ae,Ut.Decimal),gt(ae,rn.MinusSign)),ae,rn.Group,rn.Decimal,j)}(function Ss(F){if("string"==typeof F&&!isNaN(Number(F)-parseFloat(F)))return Number(F);if("number"!=typeof F)throw new Error(`${F} is not a number`);return F}(j),Oe,ce)}catch(Rt){throw ui()}}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.soG,16))},F.\u0275pipe=y.Yjl({name:"number",type:F,pure:!0}),F})();let ys=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=y.oAB({type:F}),F.\u0275inj=y.cJS({}),F})();const vo="browser";function Bs(F){return"server"===F}let Zs=(()=>{class F{}return F.\u0275prov=(0,y.Yz7)({token:F,providedIn:"root",factory:()=>new Kr((0,y.LFG)(Je),window)}),F})();class Kr{constructor(ae,j){this.document=ae,this.window=j,this.offset=()=>[0,0]}setOffset(ae){this.offset=Array.isArray(ae)?()=>ae:ae}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ae){this.supportsScrolling()&&this.window.scrollTo(ae[0],ae[1])}scrollToAnchor(ae){if(!this.supportsScrolling())return;const j=function Ts(F,ae){const j=F.getElementById(ae)||F.getElementsByName(ae)[0];if(j)return j;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const ce=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Oe=ce.currentNode;for(;Oe;){const Rt=Oe.shadowRoot;if(Rt){const jt=Rt.getElementById(ae)||Rt.querySelector(`[name="${ae}"]`);if(jt)return jt}Oe=ce.nextNode()}}return null}(this.document,ae);j&&(this.scrollToElement(j),j.focus())}setHistoryScrollRestoration(ae){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=ae)}}scrollToElement(ae){const j=ae.getBoundingClientRect(),ce=j.left+this.window.pageXOffset,Oe=j.top+this.window.pageYOffset,Rt=this.offset();this.window.scrollTo(ce-Rt[0],Oe-Rt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ae=ts(this.window.history)||ts(Object.getPrototypeOf(this.window.history));return!(!ae||!ae.writable&&!ae.set)}catch(ae){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ae){return!1}}}function ts(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class Ei{}},520:(fn,ct,$)=>{$.d(ct,{JF:()=>On,TP:()=>Ln,eN:()=>rn});var y=$(9808),B=$(5e3),X=$(9646),ie=$(8306),Ue=$(4351),Ke=$(9300),Je=$(4004);class Ge{}class at{}class be{constructor(Fe){this.normalizedNames=new Map,this.lazyUpdate=null,Fe?this.lazyInit="string"==typeof Fe?()=>{this.headers=new Map,Fe.split("\n").forEach(ze=>{const lt=ze.indexOf(":");if(lt>0){const At=ze.slice(0,lt),Wt=At.toLowerCase(),nn=ze.slice(lt+1).trim();this.maybeSetNormalizedName(At,Wt),this.headers.has(Wt)?this.headers.get(Wt).push(nn):this.headers.set(Wt,[nn])}})}:()=>{this.headers=new Map,Object.keys(Fe).forEach(ze=>{let lt=Fe[ze];const At=ze.toLowerCase();"string"==typeof lt&&(lt=[lt]),lt.length>0&&(this.headers.set(At,lt),this.maybeSetNormalizedName(ze,At))})}:this.headers=new Map}has(Fe){return this.init(),this.headers.has(Fe.toLowerCase())}get(Fe){this.init();const ze=this.headers.get(Fe.toLowerCase());return ze&&ze.length>0?ze[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Fe){return this.init(),this.headers.get(Fe.toLowerCase())||null}append(Fe,ze){return this.clone({name:Fe,value:ze,op:"a"})}set(Fe,ze){return this.clone({name:Fe,value:ze,op:"s"})}delete(Fe,ze){return this.clone({name:Fe,value:ze,op:"d"})}maybeSetNormalizedName(Fe,ze){this.normalizedNames.has(ze)||this.normalizedNames.set(ze,Fe)}init(){this.lazyInit&&(this.lazyInit instanceof be?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Fe=>this.applyUpdate(Fe)),this.lazyUpdate=null))}copyFrom(Fe){Fe.init(),Array.from(Fe.headers.keys()).forEach(ze=>{this.headers.set(ze,Fe.headers.get(ze)),this.normalizedNames.set(ze,Fe.normalizedNames.get(ze))})}clone(Fe){const ze=new be;return ze.lazyInit=this.lazyInit&&this.lazyInit instanceof be?this.lazyInit:this,ze.lazyUpdate=(this.lazyUpdate||[]).concat([Fe]),ze}applyUpdate(Fe){const ze=Fe.name.toLowerCase();switch(Fe.op){case"a":case"s":let lt=Fe.value;if("string"==typeof lt&&(lt=[lt]),0===lt.length)return;this.maybeSetNormalizedName(Fe.name,ze);const At=("a"===Fe.op?this.headers.get(ze):void 0)||[];At.push(...lt),this.headers.set(ze,At);break;case"d":const Wt=Fe.value;if(Wt){let nn=this.headers.get(ze);if(!nn)return;nn=nn.filter(Ur=>-1===Wt.indexOf(Ur)),0===nn.length?(this.headers.delete(ze),this.normalizedNames.delete(ze)):this.headers.set(ze,nn)}else this.headers.delete(ze),this.normalizedNames.delete(ze)}}forEach(Fe){this.init(),Array.from(this.normalizedNames.keys()).forEach(ze=>Fe(this.normalizedNames.get(ze),this.headers.get(ze)))}}class Ce{encodeKey(Fe){return ht(Fe)}encodeValue(Fe){return ht(Fe)}decodeKey(Fe){return decodeURIComponent(Fe)}decodeValue(Fe){return decodeURIComponent(Fe)}}const Lt=/%(\d[a-f0-9])/gi,ft={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ht(Pt){return encodeURIComponent(Pt).replace(Lt,(Fe,ze)=>{var lt;return null!==(lt=ft[ze])&&void 0!==lt?lt:Fe})}function Bt(Pt){return`${Pt}`}class mt{constructor(Fe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Fe.encoder||new Ce,Fe.fromString){if(Fe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tt(Pt,Fe){const ze=new Map;return Pt.length>0&&Pt.replace(/^\?/,"").split("&").forEach(At=>{const Wt=At.indexOf("="),[nn,Ur]=-1==Wt?[Fe.decodeKey(At),""]:[Fe.decodeKey(At.slice(0,Wt)),Fe.decodeValue(At.slice(Wt+1))],er=ze.get(nn)||[];er.push(Ur),ze.set(nn,er)}),ze}(Fe.fromString,this.encoder)}else Fe.fromObject?(this.map=new Map,Object.keys(Fe.fromObject).forEach(ze=>{const lt=Fe.fromObject[ze];this.map.set(ze,Array.isArray(lt)?lt:[lt])})):this.map=null}has(Fe){return this.init(),this.map.has(Fe)}get(Fe){this.init();const ze=this.map.get(Fe);return ze?ze[0]:null}getAll(Fe){return this.init(),this.map.get(Fe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Fe,ze){return this.clone({param:Fe,value:ze,op:"a"})}appendAll(Fe){const ze=[];return Object.keys(Fe).forEach(lt=>{const At=Fe[lt];Array.isArray(At)?At.forEach(Wt=>{ze.push({param:lt,value:Wt,op:"a"})}):ze.push({param:lt,value:At,op:"a"})}),this.clone(ze)}set(Fe,ze){return this.clone({param:Fe,value:ze,op:"s"})}delete(Fe,ze){return this.clone({param:Fe,value:ze,op:"d"})}toString(){return this.init(),this.keys().map(Fe=>{const ze=this.encoder.encodeKey(Fe);return this.map.get(Fe).map(lt=>ze+"="+this.encoder.encodeValue(lt)).join("&")}).filter(Fe=>""!==Fe).join("&")}clone(Fe){const ze=new mt({encoder:this.encoder});return ze.cloneFrom=this.cloneFrom||this,ze.updates=(this.updates||[]).concat(Fe),ze}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Fe=>this.map.set(Fe,this.cloneFrom.map.get(Fe))),this.updates.forEach(Fe=>{switch(Fe.op){case"a":case"s":const ze=("a"===Fe.op?this.map.get(Fe.param):void 0)||[];ze.push(Bt(Fe.value)),this.map.set(Fe.param,ze);break;case"d":if(void 0===Fe.value){this.map.delete(Fe.param);break}{let lt=this.map.get(Fe.param)||[];const At=lt.indexOf(Bt(Fe.value));-1!==At&&lt.splice(At,1),lt.length>0?this.map.set(Fe.param,lt):this.map.delete(Fe.param)}}}),this.cloneFrom=this.updates=null)}}class dn{constructor(){this.map=new Map}set(Fe,ze){return this.map.set(Fe,ze),this}get(Fe){return this.map.has(Fe)||this.map.set(Fe,Fe.defaultValue()),this.map.get(Fe)}delete(Fe){return this.map.delete(Fe),this}has(Fe){return this.map.has(Fe)}keys(){return this.map.keys()}}function we(Pt){return"undefined"!=typeof ArrayBuffer&&Pt instanceof ArrayBuffer}function Me(Pt){return"undefined"!=typeof Blob&&Pt instanceof Blob}function it(Pt){return"undefined"!=typeof FormData&&Pt instanceof FormData}class pt{constructor(Fe,ze,lt,At){let Wt;if(this.url=ze,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Fe.toUpperCase(),function Xt(Pt){switch(Pt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||At?(this.body=void 0!==lt?lt:null,Wt=At):Wt=lt,Wt&&(this.reportProgress=!!Wt.reportProgress,this.withCredentials=!!Wt.withCredentials,Wt.responseType&&(this.responseType=Wt.responseType),Wt.headers&&(this.headers=Wt.headers),Wt.context&&(this.context=Wt.context),Wt.params&&(this.params=Wt.params)),this.headers||(this.headers=new be),this.context||(this.context=new dn),this.params){const nn=this.params.toString();if(0===nn.length)this.urlWithParams=ze;else{const Ur=ze.indexOf("?");this.urlWithParams=ze+(-1===Ur?"?":Ur<ze.length-1?"&":"")+nn}}else this.params=new mt,this.urlWithParams=ze}serializeBody(){return null===this.body?null:we(this.body)||Me(this.body)||it(this.body)||function Et(Pt){return"undefined"!=typeof URLSearchParams&&Pt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof mt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||it(this.body)?null:Me(this.body)?this.body.type||null:we(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof mt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Fe={}){var ze;const lt=Fe.method||this.method,At=Fe.url||this.url,Wt=Fe.responseType||this.responseType,nn=void 0!==Fe.body?Fe.body:this.body,Ur=void 0!==Fe.withCredentials?Fe.withCredentials:this.withCredentials,er=void 0!==Fe.reportProgress?Fe.reportProgress:this.reportProgress;let Mn=Fe.headers||this.headers,ci=Fe.params||this.params;const Tr=null!==(ze=Fe.context)&&void 0!==ze?ze:this.context;return void 0!==Fe.setHeaders&&(Mn=Object.keys(Fe.setHeaders).reduce((Ar,Yt)=>Ar.set(Yt,Fe.setHeaders[Yt]),Mn)),Fe.setParams&&(ci=Object.keys(Fe.setParams).reduce((Ar,Yt)=>Ar.set(Yt,Fe.setParams[Yt]),ci)),new pt(lt,At,nn,{params:ci,headers:Mn,context:Tr,reportProgress:er,responseType:Wt,withCredentials:Ur})}}var et=(()=>((et=et||{})[et.Sent=0]="Sent",et[et.UploadProgress=1]="UploadProgress",et[et.ResponseHeader=2]="ResponseHeader",et[et.DownloadProgress=3]="DownloadProgress",et[et.Response=4]="Response",et[et.User=5]="User",et))();class Ut{constructor(Fe,ze=200,lt="OK"){this.headers=Fe.headers||new be,this.status=void 0!==Fe.status?Fe.status:ze,this.statusText=Fe.statusText||lt,this.url=Fe.url||null,this.ok=this.status>=200&&this.status<300}}class bt extends Ut{constructor(Fe={}){super(Fe),this.type=et.ResponseHeader}clone(Fe={}){return new bt({headers:Fe.headers||this.headers,status:void 0!==Fe.status?Fe.status:this.status,statusText:Fe.statusText||this.statusText,url:Fe.url||this.url||void 0})}}class Fn extends Ut{constructor(Fe={}){super(Fe),this.type=et.Response,this.body=void 0!==Fe.body?Fe.body:null}clone(Fe={}){return new Fn({body:void 0!==Fe.body?Fe.body:this.body,headers:Fe.headers||this.headers,status:void 0!==Fe.status?Fe.status:this.status,statusText:Fe.statusText||this.statusText,url:Fe.url||this.url||void 0})}}class Ht extends Ut{constructor(Fe){super(Fe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Fe.url||"(unknown url)"}`:`Http failure response for ${Fe.url||"(unknown url)"}: ${Fe.status} ${Fe.statusText}`,this.error=Fe.error||null}}function Nn(Pt,Fe){return{body:Fe,headers:Pt.headers,context:Pt.context,observe:Pt.observe,params:Pt.params,reportProgress:Pt.reportProgress,responseType:Pt.responseType,withCredentials:Pt.withCredentials}}let rn=(()=>{class Pt{constructor(ze){this.handler=ze}request(ze,lt,At={}){let Wt;if(ze instanceof pt)Wt=ze;else{let er,Mn;er=At.headers instanceof be?At.headers:new be(At.headers),At.params&&(Mn=At.params instanceof mt?At.params:new mt({fromObject:At.params})),Wt=new pt(ze,lt,void 0!==At.body?At.body:null,{headers:er,context:At.context,params:Mn,reportProgress:At.reportProgress,responseType:At.responseType||"json",withCredentials:At.withCredentials})}const nn=(0,X.of)(Wt).pipe((0,Ue.b)(er=>this.handler.handle(er)));if(ze instanceof pt||"events"===At.observe)return nn;const Ur=nn.pipe((0,Ke.h)(er=>er instanceof Fn));switch(At.observe||"body"){case"body":switch(Wt.responseType){case"arraybuffer":return Ur.pipe((0,Je.U)(er=>{if(null!==er.body&&!(er.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return er.body}));case"blob":return Ur.pipe((0,Je.U)(er=>{if(null!==er.body&&!(er.body instanceof Blob))throw new Error("Response is not a Blob.");return er.body}));case"text":return Ur.pipe((0,Je.U)(er=>{if(null!==er.body&&"string"!=typeof er.body)throw new Error("Response is not a string.");return er.body}));default:return Ur.pipe((0,Je.U)(er=>er.body))}case"response":return Ur;default:throw new Error(`Unreachable: unhandled observe type ${At.observe}}`)}}delete(ze,lt={}){return this.request("DELETE",ze,lt)}get(ze,lt={}){return this.request("GET",ze,lt)}head(ze,lt={}){return this.request("HEAD",ze,lt)}jsonp(ze,lt){return this.request("JSONP",ze,{params:(new mt).append(lt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ze,lt={}){return this.request("OPTIONS",ze,lt)}patch(ze,lt,At={}){return this.request("PATCH",ze,Nn(At,lt))}post(ze,lt,At={}){return this.request("POST",ze,Nn(At,lt))}put(ze,lt,At={}){return this.request("PUT",ze,Nn(At,lt))}}return Pt.\u0275fac=function(ze){return new(ze||Pt)(B.LFG(Ge))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})();class Zr{constructor(Fe,ze){this.next=Fe,this.interceptor=ze}handle(Fe){return this.interceptor.intercept(Fe,this.next)}}const Ln=new B.OlP("HTTP_INTERCEPTORS");let fr=(()=>{class Pt{intercept(ze,lt){return lt.handle(ze)}}return Pt.\u0275fac=function(ze){return new(ze||Pt)},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})();const gt=/^\)\]\}',?\n/;let cn=(()=>{class Pt{constructor(ze){this.xhrFactory=ze}handle(ze){if("JSONP"===ze.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ie.y(lt=>{const At=this.xhrFactory.build();if(At.open(ze.method,ze.urlWithParams),ze.withCredentials&&(At.withCredentials=!0),ze.headers.forEach((Yt,Rr)=>At.setRequestHeader(Yt,Rr.join(","))),ze.headers.has("Accept")||At.setRequestHeader("Accept","application/json, text/plain, */*"),!ze.headers.has("Content-Type")){const Yt=ze.detectContentTypeHeader();null!==Yt&&At.setRequestHeader("Content-Type",Yt)}if(ze.responseType){const Yt=ze.responseType.toLowerCase();At.responseType="json"!==Yt?Yt:"text"}const Wt=ze.serializeBody();let nn=null;const Ur=()=>{if(null!==nn)return nn;const Yt=At.statusText||"OK",Rr=new be(At.getAllResponseHeaders()),lr=function tn(Pt){return"responseURL"in Pt&&Pt.responseURL?Pt.responseURL:/^X-Request-URL:/m.test(Pt.getAllResponseHeaders())?Pt.getResponseHeader("X-Request-URL"):null}(At)||ze.url;return nn=new bt({headers:Rr,status:At.status,statusText:Yt,url:lr}),nn},er=()=>{let{headers:Yt,status:Rr,statusText:lr,url:_r}=Ur(),tr=null;204!==Rr&&(tr=void 0===At.response?At.responseText:At.response),0===Rr&&(Rr=tr?200:0);let Wr=Rr>=200&&Rr<300;if("json"===ze.responseType&&"string"==typeof tr){const Qr=tr;tr=tr.replace(gt,"");try{tr=""!==tr?JSON.parse(tr):null}catch(fi){tr=Qr,Wr&&(Wr=!1,tr={error:fi,text:tr})}}Wr?(lt.next(new Fn({body:tr,headers:Yt,status:Rr,statusText:lr,url:_r||void 0})),lt.complete()):lt.error(new Ht({error:tr,headers:Yt,status:Rr,statusText:lr,url:_r||void 0}))},Mn=Yt=>{const{url:Rr}=Ur(),lr=new Ht({error:Yt,status:At.status||0,statusText:At.statusText||"Unknown Error",url:Rr||void 0});lt.error(lr)};let ci=!1;const Tr=Yt=>{ci||(lt.next(Ur()),ci=!0);let Rr={type:et.DownloadProgress,loaded:Yt.loaded};Yt.lengthComputable&&(Rr.total=Yt.total),"text"===ze.responseType&&!!At.responseText&&(Rr.partialText=At.responseText),lt.next(Rr)},Ar=Yt=>{let Rr={type:et.UploadProgress,loaded:Yt.loaded};Yt.lengthComputable&&(Rr.total=Yt.total),lt.next(Rr)};return At.addEventListener("load",er),At.addEventListener("error",Mn),At.addEventListener("timeout",Mn),At.addEventListener("abort",Mn),ze.reportProgress&&(At.addEventListener("progress",Tr),null!==Wt&&At.upload&&At.upload.addEventListener("progress",Ar)),At.send(Wt),lt.next({type:et.Sent}),()=>{At.removeEventListener("error",Mn),At.removeEventListener("abort",Mn),At.removeEventListener("load",er),At.removeEventListener("timeout",Mn),ze.reportProgress&&(At.removeEventListener("progress",Tr),null!==Wt&&At.upload&&At.upload.removeEventListener("progress",Ar)),At.readyState!==At.DONE&&At.abort()}})}}return Pt.\u0275fac=function(ze){return new(ze||Pt)(B.LFG(y.JF))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})();const Sn=new B.OlP("XSRF_COOKIE_NAME"),Wn=new B.OlP("XSRF_HEADER_NAME");class pr{}let or=(()=>{class Pt{constructor(ze,lt,At){this.doc=ze,this.platform=lt,this.cookieName=At,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ze=this.doc.cookie||"";return ze!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,y.Mx)(ze,this.cookieName),this.lastCookieString=ze),this.lastToken}}return Pt.\u0275fac=function(ze){return new(ze||Pt)(B.LFG(y.K0),B.LFG(B.Lbi),B.LFG(Sn))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})(),jn=(()=>{class Pt{constructor(ze,lt){this.tokenService=ze,this.headerName=lt}intercept(ze,lt){const At=ze.url.toLowerCase();if("GET"===ze.method||"HEAD"===ze.method||At.startsWith("http://")||At.startsWith("https://"))return lt.handle(ze);const Wt=this.tokenService.getToken();return null!==Wt&&!ze.headers.has(this.headerName)&&(ze=ze.clone({headers:ze.headers.set(this.headerName,Wt)})),lt.handle(ze)}}return Pt.\u0275fac=function(ze){return new(ze||Pt)(B.LFG(pr),B.LFG(Wn))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})(),Fr=(()=>{class Pt{constructor(ze,lt){this.backend=ze,this.injector=lt,this.chain=null}handle(ze){if(null===this.chain){const lt=this.injector.get(Ln,[]);this.chain=lt.reduceRight((At,Wt)=>new Zr(At,Wt),this.backend)}return this.chain.handle(ze)}}return Pt.\u0275fac=function(ze){return new(ze||Pt)(B.LFG(at),B.LFG(B.zs3))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})(),Dn=(()=>{class Pt{static disable(){return{ngModule:Pt,providers:[{provide:jn,useClass:fr}]}}static withOptions(ze={}){return{ngModule:Pt,providers:[ze.cookieName?{provide:Sn,useValue:ze.cookieName}:[],ze.headerName?{provide:Wn,useValue:ze.headerName}:[]]}}}return Pt.\u0275fac=function(ze){return new(ze||Pt)},Pt.\u0275mod=B.oAB({type:Pt}),Pt.\u0275inj=B.cJS({providers:[jn,{provide:Ln,useExisting:jn,multi:!0},{provide:pr,useClass:or},{provide:Sn,useValue:"XSRF-TOKEN"},{provide:Wn,useValue:"X-XSRF-TOKEN"}]}),Pt})(),On=(()=>{class Pt{}return Pt.\u0275fac=function(ze){return new(ze||Pt)},Pt.\u0275mod=B.oAB({type:Pt}),Pt.\u0275inj=B.cJS({providers:[rn,{provide:Ge,useClass:Fr},cn,{provide:at,useExisting:cn}],imports:[[Dn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Pt})()},5e3:(fn,ct,$)=>{$.d(ct,{$8M:()=>Yr,$Z:()=>Sd,AFp:()=>fw,ALo:()=>kE,AaK:()=>Ge,AsE:()=>Pd,BQk:()=>zf,CHM:()=>gi,CRH:()=>zE,CZH:()=>F0,CqO:()=>bg,EJc:()=>NC,EiD:()=>me,EpF:()=>Wf,F4k:()=>Kf,FYo:()=>N_,FiY:()=>Yu,G48:()=>nI,Gf:()=>$E,GfV:()=>r,Gpc:()=>Ce,JOm:()=>hi,JVY:()=>id,L6k:()=>hm,LAX:()=>vi,LFG:()=>Gs,LSH:()=>Zn,Lbi:()=>MC,MAs:()=>Ey,NdJ:()=>bh,OlP:()=>Es,Oqu:()=>Wy,PXZ:()=>qC,Q6J:()=>Tg,QGY:()=>Th,Qsj:()=>w0,R0b:()=>tc,RDi:()=>ts,Rgc:()=>cm,SBq:()=>zh,Sil:()=>kC,Suo:()=>GE,TTD:()=>so,TgZ:()=>Jl,Tol:()=>$y,Udp:()=>Sh,VKq:()=>AE,VLi:()=>zC,W1O:()=>ZE,WLB:()=>RE,X6Q:()=>tI,XFs:()=>wn,Xpm:()=>Fi,Y36:()=>Eh,YKP:()=>Qn,YNc:()=>vy,Yjl:()=>se,Yz7:()=>De,ZZ4:()=>Y0,_Bn:()=>S_,_UZ:()=>Ad,_Vd:()=>Gh,_c5:()=>_I,_uU:()=>Vl,aQg:()=>Q0,c2e:()=>xC,cJS:()=>xe,cg1:()=>Yg,d8E:()=>Sc,dDg:()=>vw,deG:()=>_l,dqk:()=>Mn,eBb:()=>lp,eFA:()=>Cw,ekj:()=>Fg,g9A:()=>gw,h0i:()=>kn,hGG:()=>vI,hij:()=>Ul,iGM:()=>HE,ifc:()=>At,ip1:()=>hw,kL8:()=>Nh,lG2:()=>ne,mCW:()=>kc,n5z:()=>vt,oAB:()=>he,oJD:()=>Gt,oxw:()=>Sg,pB0:()=>Qh,q3G:()=>Mt,q4F:()=>e,qLn:()=>pc,qOj:()=>fh,qZA:()=>Ch,qzn:()=>Qa,sBO:()=>rI,sIi:()=>Xu,s_b:()=>L_,soG:()=>V0,tBr:()=>Il,tb:()=>mw,tp0:()=>au,uIk:()=>gh,vHH:()=>ht,vpe:()=>Mc,wAp:()=>Gr,xi3:()=>FE,xp6:()=>Sm,yhl:()=>Gd,ynx:()=>Gf,z2F:()=>G0,z3N:()=>Qu,zSh:()=>ah,zs3:()=>Ju});var y=$(7579),B=$(727),X=$(8306),ie=$(6451),Ue=$(3099);function Ke(n){for(let i in n)if(n[i]===Ke)return i;throw Error("Could not find renamed property on target object.")}function Je(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function at(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const be=Ke({__forward_ref__:Ke});function Ce(n){return n.__forward_ref__=Ce,n.toString=function(){return Ge(this())},n}function tt(n){return Lt(n)?n():n}function Lt(n){return"function"==typeof n&&n.hasOwnProperty(be)&&n.__forward_ref__===Ce}class ht extends Error{constructor(i,o){super(function Bt(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function mt(n){return"string"==typeof n?n:null==n?"":String(n)}function Ft(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():mt(n)}function Me(n,i){const o=i?` in ${i}`:"";throw new ht(-201,`No provider for ${Ft(n)} found${o}`)}function Xn(n,i){null==n&&function an(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function De(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xe(n){return{providers:n.providers||[],imports:n.imports||[]}}function gt(n){return tn(n,pr)||tn(n,jn)}function tn(n,i){return n.hasOwnProperty(i)?n[i]:null}function Wn(n){return n&&(n.hasOwnProperty(or)||n.hasOwnProperty(Fr))?n[or]:null}const pr=Ke({\u0275prov:Ke}),or=Ke({\u0275inj:Ke}),jn=Ke({ngInjectableDef:Ke}),Fr=Ke({ngInjectorDef:Ke});var wn=(()=>((wn=wn||{})[wn.Default=0]="Default",wn[wn.Host=1]="Host",wn[wn.Self=2]="Self",wn[wn.SkipSelf=4]="SkipSelf",wn[wn.Optional=8]="Optional",wn))();let Jn;function On(n){const i=Jn;return Jn=n,i}function li(n,i,o){const u=gt(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&wn.Optional?null:void 0!==i?i:void Me(Ge(n),"Injector")}function Pt(n){return{toString:n}.toString()}var Fe=(()=>((Fe=Fe||{})[Fe.OnPush=0]="OnPush",Fe[Fe.Default=1]="Default",Fe))(),At=(()=>{return(n=At||(At={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",At;var n})();const Wt="undefined"!=typeof globalThis&&globalThis,nn="undefined"!=typeof window&&window,Ur="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Mn=Wt||"undefined"!=typeof global&&global||nn||Ur,Ar={},Yt=[],Rr=Ke({\u0275cmp:Ke}),lr=Ke({\u0275dir:Ke}),_r=Ke({\u0275pipe:Ke}),tr=Ke({\u0275mod:Ke}),Wr=Ke({\u0275fac:Ke}),Qr=Ke({__NG_ELEMENT_ID__:Ke});let fi=0;function Fi(n){return Pt(()=>{const o={},u={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Fe.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Yt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||At.Emulated,id:"c",styles:n.styles||Yt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,m=n.features,w=n.pipes;return u.id+=fi++,u.inputs=G(n.inputs,o),u.outputs=G(n.outputs),m&&m.forEach(M=>M(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(zr):null,u.pipeDefs=w?()=>("function"==typeof w?w():w).map(Pe):null,u})}function zr(n){return Se(n)||function dt(n){return n[lr]||null}(n)}function Pe(n){return function zt(n){return n[_r]||null}(n)}const Ae={};function he(n){return Pt(()=>{const i={type:n.type,bootstrap:n.bootstrap||Yt,declarations:n.declarations||Yt,imports:n.imports||Yt,exports:n.exports||Yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Ae[n.id]=n.type),i})}function G(n,i){if(null==n)return Ar;const o={};for(const u in n)if(n.hasOwnProperty(u)){let h=n[u],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),o[h]=u,i&&(i[h]=m)}return o}const ne=Fi;function se(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Se(n){return n[Rr]||null}function gn(n,i){const o=n[tr]||null;if(!o&&!0===i)throw new Error(`Type ${Ge(n)} does not have '\u0275mod' property.`);return o}function rt(n){return Array.isArray(n)&&"object"==typeof n[1]}function _t(n){return Array.isArray(n)&&!0===n[1]}function Ot(n){return 0!=(8&n.flags)}function In(n){return 2==(2&n.flags)}function Lr(n){return 1==(1&n.flags)}function hr(n){return null!==n.template}function br(n){return 0!=(512&n[2])}function ri(n,i){return n.hasOwnProperty(Wr)?n[Wr]:null}class Uo{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function so(){return Ss}function Ss(n){return n.type.prototype.ngOnChanges&&(n.setInput=qs),As}function As(){const n=vo(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===Ar)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function qs(n,i,o,u){const h=vo(n)||function Ro(n,i){return n[ys]=i}(n,{previous:Ar,current:null}),m=h.current||(h.current={}),w=h.previous,M=this.declaredInputs[o],N=w[M];m[M]=new Uo(N&&N.currentValue,i,w===Ar),n[u]=i}so.ngInherit=!0;const ys="__ngSimpleChanges__";function vo(n){return n[ys]||null}let Kr;function ts(n){Kr=n}function Ts(){return void 0!==Kr?Kr:"undefined"!=typeof document?document:void 0}function Ei(n){return!!n.listen}const F={createRenderer:(n,i)=>Ts()};function j(n){for(;Array.isArray(n);)n=n[0];return n}function Rt(n,i){return j(i[n])}function jt(n,i){return j(i[n.index])}function jr(n,i){return n.data[i]}function Pr(n,i){return n[i]}function gr(n,i){const o=i[n];return rt(o)?o:o[0]}function Vr(n){return 4==(4&n[2])}function Ii(n){return 128==(128&n[2])}function pi(n,i){return null==i?null:n[i]}function oo(n){n[18]=0}function Ni(n,i){n[5]+=i;let o=n,u=n[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const Bn={lFrame:da(null),bindingsEnabled:!0};function V(){return Bn.bindingsEnabled}function ke(){return Bn.lFrame.lView}function Kt(){return Bn.lFrame.tView}function gi(n){return Bn.lFrame.contextLView=n,n[8]}function z(){let n=W();for(;null!==n&&64===n.type;)n=n.parent;return n}function W(){return Bn.lFrame.currentTNode}function Ie(n,i){const o=Bn.lFrame;o.currentTNode=n,o.isParent=i}function Le(){return Bn.lFrame.isParent}function It(){Bn.lFrame.isParent=!1}function Gn(){const n=Bn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Ti(){return Bn.lFrame.bindingIndex++}function $r(n){const i=Bn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Rs(n,i){const o=Bn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ui(i)}function Ui(n){Bn.lFrame.currentDirectiveIndex=n}function rs(n){const i=Bn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function Hs(){return Bn.lFrame.currentQueryIndex}function xo(n){Bn.lFrame.currentQueryIndex=n}function Zo(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function $s(n,i,o){if(o&wn.SkipSelf){let h=i,m=n;for(;!(h=h.parent,null!==h||o&wn.Host||(h=Zo(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;i=h,n=m}const u=Bn.lFrame=_s();return u.currentTNode=i,u.lView=n,!0}function Ho(n){const i=_s(),o=n[1];Bn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function _s(){const n=Bn.lFrame,i=null===n?null:n.child;return null===i?da(n):i}function da(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Po(){const n=Bn.lFrame;return Bn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const $a=Po;function ea(){const n=Po();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Oi(){return Bn.lFrame.selectedIndex}function Ys(n){Bn.lFrame.selectedIndex=n}function Bi(){const n=Bn.lFrame;return jr(n.tView,n.selectedIndex)}function Ms(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const m=n.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:M,ngAfterViewInit:N,ngAfterViewChecked:ee,ngOnDestroy:oe}=m;w&&(n.contentHooks||(n.contentHooks=[])).push(-o,w),M&&((n.contentHooks||(n.contentHooks=[])).push(o,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,M)),N&&(n.viewHooks||(n.viewHooks=[])).push(-o,N),ee&&((n.viewHooks||(n.viewHooks=[])).push(o,ee),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,ee)),null!=oe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,oe)}}function ha(n,i,o){Du(n,i,3,o)}function Zi(n,i,o,u){(3&n[2])===o&&Du(n,i,o,u)}function Yo(n,i){let o=n[2];(3&o)===i&&(o&=2047,o+=1,n[2]=o)}function Du(n,i,o,u){const m=null!=u?u:-1,w=i.length-1;let M=0;for(let N=void 0!==u?65535&n[18]:0;N<w;N++)if("number"==typeof i[N+1]){if(M=i[N],null!=u&&M>=u)break}else i[N]<0&&(n[18]+=65536),(M<m||-1==m)&&(go(n,o,i,N),n[18]=(4294901760&n[18])+N+2),N++}function go(n,i,o,u){const h=o[u]<0,m=o[u+1],M=n[h?-o[u]:o[u]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{m.call(M)}finally{}}}else try{m.call(M)}finally{}}class si{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Qs(n,i,o){const u=Ei(n);let h=0;for(;h<o.length;){const m=o[h];if("number"==typeof m){if(0!==m)break;h++;const w=o[h++],M=o[h++],N=o[h++];u?n.setAttribute(i,M,N,w):i.setAttributeNS(w,M,N)}else{const w=m,M=o[++h];vs(w)?u&&n.setProperty(i,w,M):u?n.setAttribute(i,w,M):i.setAttribute(w,M),h++}}return h}function Js(n){return 3===n||4===n||6===n}function vs(n){return 64===n.charCodeAt(0)}function mo(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const h=i[u];"number"==typeof h?o=h:0===o||fa(n,o,h,null,-1===o||2===o?i[++u]:null)}}return n}function fa(n,i,o,u,h){let m=0,w=n.length;if(-1===i)w=-1;else for(;m<n.length;){const M=n[m++];if("number"==typeof M){if(M===i){w=-1;break}if(M>i){w=m-1;break}}}for(;m<n.length;){const M=n[m];if("number"==typeof M)break;if(M===o){if(null===u)return void(null!==h&&(n[m+1]=h));if(u===n[m+1])return void(n[m+2]=h)}m++,null!==u&&m++,null!==h&&m++}-1!==w&&(n.splice(w,0,i),m=w+1),n.splice(m++,0,o),null!==u&&n.splice(m++,0,u),null!==h&&n.splice(m++,0,h)}function Oa(n){return-1!==n}function Qo(n){return 32767&n}function Jo(n,i){let o=function _u(n){return n>>16}(n),u=i;for(;o>0;)u=u[15],o--;return u}let vu=!0;function Au(n){const i=vu;return vu=n,i}let nu=0;function ka(n,i){const o=x(n,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(n.injectorIndex=i.length,Hu(u.data,n),Hu(i,null),Hu(u.blueprint,null));const h=D(n,i),m=n.injectorIndex;if(Oa(h)){const w=Qo(h),M=Jo(h,i),N=M[1].data;for(let ee=0;ee<8;ee++)i[m+ee]=M[w+ee]|N[w+ee]}return i[m+8]=h,m}function Hu(n,i){n.push(0,0,0,0,0,0,0,0,i)}function x(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function D(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,h=i;for(;null!==h;){const m=h[1],w=m.type;if(u=2===w?m.declTNode:1===w?h[6]:null,null===u)return-1;if(o++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function I(n,i,o){!function ju(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Qr)&&(u=o[Qr]),null==u&&(u=o[Qr]=nu++);const h=255&u;i.data[n+(h>>5)]|=1<<h}(n,i,o)}function Y(n,i,o){if(o&wn.Optional)return n;Me(i,"NodeInjector")}function le(n,i,o,u){if(o&wn.Optional&&void 0===u&&(u=null),0==(o&(wn.Self|wn.Host))){const h=n[9],m=On(void 0);try{return h?h.get(i,u,o&wn.Optional):li(i,u,o&wn.Optional)}finally{On(m)}}return Y(u,i,o)}function Re(n,i,o,u=wn.Default,h){if(null!==n){const m=function ln(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Qr)?n[Qr]:void 0;return"number"==typeof i?i>=0?255&i:$e:i}(o);if("function"==typeof m){if(!$s(i,n,u))return u&wn.Host?Y(h,o,u):le(i,o,u,h);try{const w=m(u);if(null!=w||u&wn.Optional)return w;Me(o)}finally{$a()}}else if("number"==typeof m){let w=null,M=x(n,i),N=-1,ee=u&wn.Host?i[16][6]:null;for((-1===M||u&wn.SkipSelf)&&(N=-1===M?D(n,i):i[M+8],-1!==N&&na(u,!1)?(w=i[1],M=Qo(N),i=Jo(N,i)):M=-1);-1!==M;){const oe=i[1];if(pn(m,M,oe.data)){const Te=en(M,i,o,w,u,ee);if(Te!==We)return Te}N=i[M+8],-1!==N&&na(u,i[1].data[M+8]===ee)&&pn(m,M,i)?(w=oe,M=Qo(N),i=Jo(N,i)):M=-1}}}return le(i,o,u,h)}const We={};function $e(){return new yn(z(),ke())}function en(n,i,o,u,h,m){const w=i[1],M=w.data[n+8],oe=yr(M,w,o,null==u?In(M)&&vu:u!=w&&0!=(3&M.type),h&wn.Host&&m===M);return null!==oe?Kn(i,w,oe,M):We}function yr(n,i,o,u,h){const m=n.providerIndexes,w=i.data,M=1048575&m,N=n.directiveStart,oe=m>>20,Ye=h?M+oe:n.directiveEnd;for(let Ct=u?M:M+oe;Ct<Ye;Ct++){const qt=w[Ct];if(Ct<N&&o===qt||Ct>=N&&qt.type===o)return Ct}if(h){const Ct=w[N];if(Ct&&hr(Ct)&&Ct.type===o)return N}return null}function Kn(n,i,o,u){let h=n[o];const m=i.data;if(function yl(n){return n instanceof si}(h)){const w=h;w.resolving&&function dn(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new ht(-200,`Circular dependency in DI detected for ${n}${o}`)}(Ft(m[o]));const M=Au(w.canSeeViewProviders);w.resolving=!0;const N=w.injectImpl?On(w.injectImpl):null;$s(n,u,wn.Default);try{h=n[o]=w.factory(void 0,m,n,u),i.firstCreatePass&&o>=u.directiveStart&&function po(n,i,o){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:m}=i.type.prototype;if(u){const w=Ss(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,w),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,w)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),m&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m))}(o,m[o],i)}finally{null!==N&&On(N),Au(M),w.resolving=!1,$a()}}return h}function pn(n,i,o){return!!(o[i+(n>>5)]&1<<n)}function na(n,i){return!(n&wn.Self||n&wn.Host&&i)}class yn{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Re(this._tNode,this._lView,i,u,o)}}function vt(n){return Pt(()=>{const i=n.prototype.constructor,o=i[Wr]||Zt(i),u=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==u;){const m=h[Wr]||Zt(h);if(m&&m!==o)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Zt(n){return Lt(n)?()=>{const i=Zt(tt(n));return i&&i()}:ri(n)}function Yr(n){return function U(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let h=0;for(;h<u;){const m=o[h];if(Js(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<u&&"string"==typeof o[h];)h++;else{if(m===i)return o[h+1];h+=2}}}return null}(z(),n)}const ga="__parameters__";function Wa(n,i,o){return Pt(()=>{const u=function $u(n){return function(...o){if(n){const u=n(...o);for(const h in u)this[h]=u[h]}}}(i);function h(...m){if(this instanceof h)return u.apply(this,m),this;const w=new h(...m);return M.annotation=w,M;function M(N,ee,oe){const Te=N.hasOwnProperty(ga)?N[ga]:Object.defineProperty(N,ga,{value:[]})[ga];for(;Te.length<=oe;)Te.push(null);return(Te[oe]=Te[oe]||[]).push(w),N}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Es{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=De({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const _l=new Es("AnalyzeForEntryComponents");function bs(n,i){void 0===i&&(i=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(i===n&&(i=n.slice(0,o)),bs(u,i)):i!==n&&i.push(u)}return i}function Va(n,i){n.forEach(o=>Array.isArray(o)?Va(o,i):i(o))}function zu(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Mu(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function xs(n,i,o){let u=wt(n,i);return u>=0?n[1|u]=o:(u=~u,function Co(n,i,o,u){let h=n.length;if(h==i)n.push(o,u);else if(1===h)n.push(u,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function ru(n,i){const o=wt(n,i);if(o>=0)return n[1|o]}function wt(n,i){return function Io(n,i,o){let u=0,h=n.length>>o;for(;h!==u;){const m=u+(h-u>>1),w=n[m<<o];if(i===w)return m<<o;w>i?h=m:u=m+1}return~(h<<o)}(n,i,1)}const Xs={},su="__NG_DI_FLAG__",Xo="ngTempTokenPath",To=/\n/gm,Za="__source",ba=Ke({provide:String,useValue:Ke});let Ba;function ou(n){const i=Ba;return Ba=n,i}function Ya(n,i=wn.Default){if(void 0===Ba)throw new ht(203,"");return null===Ba?li(n,void 0,i):Ba.get(n,i&wn.Optional?null:void 0,i)}function Gs(n,i=wn.Default){return(function Dn(){return Jn}()||Ya)(tt(n),i)}const Cu=Gs;function Ku(n){const i=[];for(let o=0;o<n.length;o++){const u=tt(n[o]);if(Array.isArray(u)){if(0===u.length)throw new ht(900,"");let h,m=wn.Default;for(let w=0;w<u.length;w++){const M=u[w],N=Zu(M);"number"==typeof N?-1===N?h=M.token:m|=N:h=M}i.push(Gs(h,m))}else i.push(Gs(u))}return i}function qu(n,i){return n[su]=i,n.prototype[su]=i,n}function Zu(n){return n[su]}const Il=qu(Wa("Inject",n=>({token:n})),-1),Yu=qu(Wa("Optional"),8),au=qu(Wa("SkipSelf"),4);var hi=(()=>((hi=hi||{})[hi.Important=1]="Important",hi[hi.DashCase=2]="DashCase",hi))();const oa="__ngContext__";function ps(n,i){n[oa]=i}function Sa(n){const i=function yo(n){return n[oa]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function P(n,i){return undefined(n,i)}function He(n){const i=n[3];return _t(i)?i[3]:i}function mn(n){return Yn(n[13])}function vn(n){return Yn(n[4])}function Yn(n){for(;null!==n&&!_t(n);)n=n[4];return n}function Nr(n,i,o,u,h){if(null!=u){let m,w=!1;_t(u)?m=u:rt(u)&&(w=!0,u=u[0]);const M=j(u);0===n&&null!==o?null==h?Aa(i,o,M):cu(i,o,M,h||null,!0):1===n&&null!==o?cu(i,o,M,h||null,!0):2===n?function Or(n,i,o){const u=T(n,i);u&&function Hd(n,i,o,u){Ei(n)?n.removeChild(i,o,u):i.removeChild(o)}(n,u,i,o)}(i,M,w):3===n&&i.destroyNode(M),null!=m&&function Pc(n,i,o,u,h){const m=o[7];m!==j(o)&&Nr(i,n,u,m,h);for(let M=10;M<o.length;M++){const N=o[M];aa(N[1],N,n,i,u,m)}}(i,n,m,o,h)}}function Iu(n,i,o){if(Ei(n))return n.createElement(i,o);{const u=null!==o?function Zs(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(o):null;return null===u?n.createElement(i):n.createElementNS(u,i)}}function oc(n,i){const o=n[9],u=o.indexOf(i),h=i[3];1024&i[2]&&(i[2]&=-1025,Ni(h,-1)),o.splice(u,1)}function _i(n,i){if(n.length<=10)return;const o=10+i,u=n[o];if(u){const h=u[17];null!==h&&h!==n&&oc(h,u),i>0&&(n[o-1][4]=u[4]);const m=Mu(n,10+i);!function Hi(n,i){aa(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const w=m[19];null!==w&&w.detachView(m[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Qi(n,i){if(!(256&i[2])){const o=i[11];Ei(o)&&o.destroyNode&&aa(n,i,o,3,null,null),function ol(n){let i=n[13];if(!i)return uu(n[1],n);for(;i;){let o=null;if(rt(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==n;)rt(i)&&uu(i[1],i),i=i[3];null===i&&(i=n),rt(i)&&uu(i[1],i),o=i&&i[4]}i=o}}(i)}}function uu(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function _a(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const h=i[o[u]];if(!(h instanceof si)){const m=o[u+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const M=h[m[w]],N=m[w+1];try{N.call(M)}finally{}}else try{m.call(h)}finally{}}}}(n,i),function xc(n,i){const o=n.cleanup,u=i[7];let h=-1;if(null!==o)for(let m=0;m<o.length-1;m+=2)if("string"==typeof o[m]){const w=o[m+1],M="function"==typeof w?w(i):j(i[w]),N=u[h=o[m+2]],ee=o[m+3];"boolean"==typeof ee?M.removeEventListener(o[m],N,ee):ee>=0?u[h=ee]():u[h=-ee].unsubscribe(),m+=2}else{const w=u[h=o[m+1]];o[m].call(w)}if(null!==u){for(let m=h+1;m<u.length;m++)u[m]();i[7]=null}}(n,i),1===i[1].type&&Ei(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&_t(i[3])){o!==i[3]&&oc(o,i);const u=i[19];null!==u&&u.detachView(n)}}}function Tl(n,i,o){return function lu(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const h=n.data[u.directiveStart].encapsulation;if(h===At.None||h===At.Emulated)return null}return jt(u,o)}(n,i.parent,o)}function cu(n,i,o,u,h){Ei(n)?n.insertBefore(i,o,u,h):i.insertBefore(o,u,h)}function Aa(n,i,o){Ei(n)?n.appendChild(i,o):i.appendChild(o)}function Ou(n,i,o,u,h){null!==u?cu(n,i,o,u,h):Aa(n,i,o)}function T(n,i){return Ei(n)?n.parentNode(i):i.parentNode}let ku,nd,te=function R(n,i,o){return 40&n.type?jt(n,o):null};function xt(n,i,o,u){const h=Tl(n,u,i),m=i[11],M=function v(n,i,o){return te(n,i,o)}(u.parent||i[6],u,i);if(null!=h)if(Array.isArray(o))for(let N=0;N<o.length;N++)Ou(m,h,o[N],M,!1);else Ou(m,h,o,M,!1)}function hn(n,i){if(null!==i){const o=i.type;if(3&o)return jt(i,n);if(4&o)return Cr(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return hn(n,u);{const h=n[i.index];return _t(h)?Cr(-1,h):j(h)}}if(32&o)return P(i,n)()||j(n[i.index]);{const u=Un(n,i);return null!==u?Array.isArray(u)?u[0]:hn(He(n[16]),u):hn(n,i.next)}}return null}function Un(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Cr(n,i){const o=10+n+1;if(o<i.length){const u=i[o],h=u[1].firstChild;if(null!==h)return hn(u,h)}return i[7]}function ki(n,i,o,u,h,m,w){for(;null!=o;){const M=u[o.index],N=o.type;if(w&&0===i&&(M&&ps(j(M),u),o.flags|=4),64!=(64&o.flags))if(8&N)ki(n,i,o.child,u,h,m,!1),Nr(i,n,h,M,m);else if(32&N){const ee=P(o,u);let oe;for(;oe=ee();)Nr(i,n,h,oe,m);Nr(i,n,h,M,m)}else 16&N?Ra(n,i,u,o,h,m):Nr(i,n,h,M,m);o=w?o.projectionNext:o.next}}function aa(n,i,o,u,h,m){ki(o,u,n.firstChild,i,h,m,!1)}function Ra(n,i,o,u,h,m){const w=o[16],N=w[6].projection[u.projection];if(Array.isArray(N))for(let ee=0;ee<N.length;ee++)Nr(i,n,h,N[ee],m);else ki(n,i,N,w[3],h,m,!0)}function ac(n,i,o){Ei(n)?n.setAttribute(i,"style",o):i.style.cssText=o}function Dl(n,i,o){Ei(n)?""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o):i.className=o}function va(n){var i;return(null===(i=function $l(){if(void 0===ku&&(ku=null,Mn.trustedTypes))try{ku=Mn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return ku}())||void 0===i?void 0:i.createHTML(n))||n}function Oc(n){var i;return(null===(i=function Nc(){if(void 0===nd&&(nd=null,Mn.trustedTypes))try{nd=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return nd}())||void 0===i?void 0:i.createHTML(n))||n}class zl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sl extends zl{getTypeName(){return"HTML"}}class up extends zl{getTypeName(){return"Style"}}class du extends zl{getTypeName(){return"Script"}}class Yh extends zl{getTypeName(){return"URL"}}class rd extends zl{getTypeName(){return"ResourceURL"}}function Qu(n){return n instanceof zl?n.changingThisBreaksApplicationSecurity:n}function Qa(n,i){const o=Gd(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function Gd(n){return n instanceof zl&&n.getTypeName()||null}function id(n){return new Sl(n)}function hm(n){return new up(n)}function lp(n){return new du(n)}function vi(n){return new Yh(n)}function Qh(n){return new rd(n)}class Jh{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(va(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Xh{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=va(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=va(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let h=o.length-1;0<h;h--){const w=o.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&i.removeAttribute(w)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const od=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,tf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function kc(n){return(n=String(n)).match(od)||n.match(tf)?n:"unsafe:"+n}function Ma(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function dc(...n){const i={};for(const o of n)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const Wl=Ma("area,br,col,hr,img,wbr"),nf=Ma("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hc=Ma("rp,rt"),rf=dc(Wl,dc(nf,Ma("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dc(hc,Ma("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dc(hc,nf)),Wd=Ma("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),to=Ma("srcset"),f=dc(Wd,to,Ma("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ma("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),l=Ma("script,style,template");class c{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!rf.hasOwnProperty(o))return this.sanitizedSomething=!0,!l.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let h=0;h<u.length;h++){const m=u.item(h),w=m.name,M=w.toLowerCase();if(!f.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let N=m.value;Wd[M]&&(N=kc(N)),to[M]&&(n=N,N=(n=String(n)).split(",").map(i=>kc(i.trim())).join(", ")),this.buf.push(" ",w,'="',L(N),'"')}var n;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();rf.hasOwnProperty(o)&&!Wl.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(L(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const _=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S=/([^\#-~ |!])/g;function L(n){return n.replace(/&/g,"&amp;").replace(_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(S,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Z;function me(n,i){let o=null;try{Z=Z||function sd(n){const i=new Xh(n);return function ef(){try{return!!(new window.DOMParser).parseFromString(va(""),"text/html")}catch(n){return!1}}()?new Jh(i):i}(n);let u=i?String(i):"";o=Z.getInertBodyElement(u);let h=5,m=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=m,m=o.innerHTML,o=Z.getInertBodyElement(u)}while(u!==m);return va((new c).sanitizeChildren(Ne(o)||o))}finally{if(o){const u=Ne(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Ne(n){return"content"in n&&function qe(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Mt=(()=>((Mt=Mt||{})[Mt.NONE=0]="NONE",Mt[Mt.HTML=1]="HTML",Mt[Mt.STYLE=2]="STYLE",Mt[Mt.SCRIPT=3]="SCRIPT",Mt[Mt.URL=4]="URL",Mt[Mt.RESOURCE_URL=5]="RESOURCE_URL",Mt))();function Gt(n){const i=fc();return i?Oc(i.sanitize(Mt.HTML,n)||""):Qa(n,"HTML")?Oc(Qu(n)):me(Ts(),mt(n))}function Zn(n){const i=fc();return i?i.sanitize(Mt.URL,n)||"":Qa(n,"URL")?Qu(n):kc(mt(n))}function fc(){const n=ke();return n&&n[12]}function lf(n){return n.ngOriginalError}function Kd(n,...i){n.error(...i)}class pc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=function fp(n){return n&&n.ngErrorLogger||Kd}(i);u(this._console,"ERROR",i),o&&u(this._console,"ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&lf(i);for(;o&&lf(o);)o=lf(o);return o||null}}const vm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mn))();function Al(n){return n instanceof Function?n():n}function Ko(n,i,o){let u=n.length;for(;;){const h=n.indexOf(i,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const m=i.length;if(h+m===u||n.charCodeAt(h+m)<=32)return h}o=h+1}}const gp="ng-template";function Yd(n,i,o){let u=0;for(;u<n.length;){let h=n[u++];if(o&&"class"===h){if(h=n[u],-1!==Ko(h.toLowerCase(),i,0))return!0}else if(1===h){for(;u<n.length&&"string"==typeof(h=n[u++]);)if(h.toLowerCase()===i)return!0;return!1}}return!1}function ul(n){return 4===n.type&&n.value!==gp}function mp(n,i,o){return i===(4!==n.type||o?n.value:gp)}function Im(n,i,o){let u=4;const h=n.attrs||[],m=function Z_(n){for(let i=0;i<n.length;i++)if(Js(n[i]))return i;return n.length}(h);let w=!1;for(let M=0;M<i.length;M++){const N=i[M];if("number"!=typeof N){if(!w)if(4&u){if(u=2|1&u,""!==N&&!mp(n,N,o)||""===N&&1===i.length){if(hu(u))return!1;w=!0}}else{const ee=8&u?N:i[++M];if(8&u&&null!==n.attrs){if(!Yd(n.attrs,ee,o)){if(hu(u))return!1;w=!0}continue}const Te=Tm(8&u?"class":N,h,ul(n),o);if(-1===Te){if(hu(u))return!1;w=!0;continue}if(""!==ee){let Ye;Ye=Te>m?"":h[Te+1].toLowerCase();const Ct=8&u?Ye:null;if(Ct&&-1!==Ko(Ct,ee,0)||2&u&&ee!==Ye){if(hu(u))return!1;w=!0}}}}else{if(!w&&!hu(u)&&!hu(N))return!1;if(w&&hu(N))continue;w=!1,u=N|1&u}}return hu(u)||w}function hu(n){return 0==(1&n)}function Tm(n,i,o,u){if(null===i)return-1;let h=0;if(u||!o){let m=!1;for(;h<i.length;){const w=i[h];if(w===n)return h;if(3===w||6===w)m=!0;else{if(1===w||2===w){let M=i[++h];for(;"string"==typeof M;)M=i[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=m?1:2}return-1}return function Y_(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function yp(n,i,o=!1){for(let u=0;u<i.length;u++)if(Im(n,i[u],o))return!0;return!1}function df(n,i){return n?":not("+i.trim()+")":i}function Q_(n){let i=n[0],o=1,u=2,h="",m=!1;for(;o<n.length;){let w=n[o];if("string"==typeof w)if(2&u){const M=n[++o];h+="["+w+(M.length>0?'="'+M+'"':"")+"]"}else 8&u?h+="."+w:4&u&&(h+=" "+w);else""!==h&&!hu(w)&&(i+=df(m,h),h=""),u=w,m=m||!hu(u);o++}return""!==h&&(i+=df(m,h)),i}const wi={};function Sm(n){vp(Kt(),ke(),Oi()+n,!1)}function vp(n,i,o,u){if(!u)if(3==(3&i[2])){const m=n.preOrderCheckHooks;null!==m&&ha(i,m,o)}else{const m=n.preOrderHooks;null!==m&&Zi(i,m,0,o)}Ys(o)}function hf(n,i){return n<<17|i<<2}function ll(n){return n>>17&32767}function ff(n){return 2|n}function ql(n){return(131068&n)>>2}function pf(n,i){return-131069&n|i<<2}function gf(n){return 1|n}function dd(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u],m=o[u+1];if(-1!==m){const w=n.data[m];xo(h),w.contentQueries(2,i[m],m)}}}function ua(n,i,o,u,h,m,w,M,N,ee){const oe=i.blueprint.slice();return oe[0]=h,oe[2]=140|u,oo(oe),oe[3]=oe[15]=n,oe[8]=o,oe[10]=w||n&&n[10],oe[11]=M||n&&n[11],oe[12]=N||n&&n[12]||null,oe[9]=ee||n&&n[9]||null,oe[6]=m,oe[16]=2==i.type?n[16]:oe,oe}function Uc(n,i,o,u,h){let m=n.data[i];if(null===m)m=function hd(n,i,o,u,h){const m=W(),w=Le(),N=n.data[i]=function rv(n,i,o,u,h,m){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,o,i,u,h);return null===n.firstChild&&(n.firstChild=N),null!==m&&(w?null==m.child&&null!==N.parent&&(m.child=N):null===m.next&&(m.next=N)),N}(n,i,o,u,h),function qi(){return Bn.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=o,m.value=u,m.attrs=h;const w=function fe(){const n=Bn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return Ie(m,!0),m}function Yl(n,i,o,u){if(0===o)return-1;const h=i.length;for(let m=0;m<o;m++)i.push(u),n.blueprint.push(u),n.data.push(null);return h}function fd(n,i,o){Ho(i);try{const u=n.viewQuery;null!==u&&ih(1,u,o);const h=n.template;null!==h&&Ap(n,i,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&dd(n,i),n.staticViewQueries&&ih(2,n.viewQuery,o);const m=n.components;null!==m&&function Vm(n,i){for(let o=0;o<i.length;o++)Zm(n,i[o])}(i,m)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[2]&=-5,ea()}}function Fu(n,i,o,u){const h=i[2];if(256!=(256&h)){Ho(i);try{oo(i),function Di(n){return Bn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Ap(n,i,o,2,u);const w=3==(3&h);if(w){const ee=n.preOrderCheckHooks;null!==ee&&ha(i,ee,null)}else{const ee=n.preOrderHooks;null!==ee&&Zi(i,ee,0,null),Yo(i,0)}if(function Vp(n){for(let i=mn(n);null!==i;i=vn(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const h=o[u],m=h[3];0==(1024&h[2])&&Ni(m,1),h[2]|=1024}}}(i),function Lp(n){for(let i=mn(n);null!==i;i=vn(i))for(let o=10;o<i.length;o++){const u=i[o],h=u[1];Ii(u)&&Fu(h,u,h.template,u[8])}}(i),null!==n.contentQueries&&dd(n,i),w){const ee=n.contentCheckHooks;null!==ee&&ha(i,ee)}else{const ee=n.contentHooks;null!==ee&&Zi(i,ee,1),Yo(i,1)}!function If(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const h=o[u];if(h<0)Ys(~h);else{const m=h,w=o[++u],M=o[++u];Rs(w,m),M(2,i[m])}}}finally{Ys(-1)}}(n,i);const M=n.components;null!==M&&function Lm(n,i){for(let o=0;o<i.length;o++)qm(n,i[o])}(i,M);const N=n.viewQuery;if(null!==N&&ih(2,N,u),w){const ee=n.viewCheckHooks;null!==ee&&ha(i,ee)}else{const ee=n.viewHooks;null!==ee&&Zi(i,ee,2),Yo(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-73,1024&i[2]&&(i[2]&=-1025,Ni(i[3],-1))}finally{ea()}}}function pd(n,i,o,u){const h=i[10],w=Vr(i);try{!w&&h.begin&&h.begin(),w&&fd(n,i,u),Fu(n,i,o,u)}finally{!w&&h.end&&h.end()}}function Ap(n,i,o,u,h){const m=Oi(),w=2&u;try{Ys(-1),w&&i.length>20&&vp(n,i,20,!1),o(u,h)}finally{Ys(m)}}function mc(n,i,o){if(Ot(i)){const h=i.directiveEnd;for(let m=i.directiveStart;m<h;m++){const w=n.data[m];w.contentQueries&&w.contentQueries(1,o[m],m)}}}function Rp(n,i,o){!V()||(function Np(n,i,o,u){const h=o.directiveStart,m=o.directiveEnd;n.firstCreatePass||ka(o,i),ps(u,i);const w=o.initialInputs;for(let M=h;M<m;M++){const N=n.data[M],ee=hr(N);ee&&Df(i,o,N);const oe=Kn(i,n,M,o);ps(oe,i),null!==w&&kp(0,M-h,oe,N,0,w),ee&&(gr(o.index,i)[8]=oe)}}(n,i,o,jt(o,i)),128==(128&o.flags)&&function xa(n,i,o){const u=o.directiveStart,h=o.directiveEnd,w=o.index,M=function as(){return Bn.lFrame.currentDirectiveIndex}();try{Ys(w);for(let N=u;N<h;N++){const ee=n.data[N],oe=i[N];Ui(N),(null!==ee.hostBindings||0!==ee.hostVars||null!==ee.hostAttrs)&&zm(ee,oe)}}finally{Ys(-1),Ui(M)}}(n,i,o))}function yc(n,i,o=jt){const u=i.localNames;if(null!==u){let h=i.index+1;for(let m=0;m<u.length;m+=2){const w=u[m+1],M=-1===w?o(i,n):n[w];n[h++]=M}}}function Mp(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=dl(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function dl(n,i,o,u,h,m,w,M,N,ee){const oe=20+u,Te=oe+h,Ye=function Um(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:wi);return o}(oe,Te),Ct="function"==typeof ee?ee():ee;return Ye[1]={type:n,blueprint:Ye,template:o,queries:null,viewQuery:M,declTNode:i,data:Ye.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:N,consts:Ct,incompleteFirstPass:!1}}function xp(n,i,o,u){const h=$p(i);null===o?h.push(u):(h.push(o),n.firstCreatePass&&Gp(n).push(u,h.length-1))}function Xd(n,i,o){for(let u in n)if(n.hasOwnProperty(u)){const h=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,h):o[u]=[i,h]}return o}function Tu(n,i,o,u,h,m,w,M){const N=jt(i,o);let oe,ee=i.inputs;!M&&null!=ee&&(oe=ee[u])?(ty(n,o,oe,u,h),In(i)&&function sv(n,i){const o=gr(i,n);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function iv(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),h=null!=w?w(h,i.value||"",u):h,Ei(m)?m.setProperty(N,u,h):vs(u)||(N.setProperty?N.setProperty(u,h):N[u]=h))}function bf(n,i,o,u){let h=!1;if(V()){const m=function lv(n,i,o){const u=n.directiveRegistry;let h=null;if(u)for(let m=0;m<u.length;m++){const w=u[m];yp(o,w.selectors,!1)&&(h||(h=[]),I(ka(o,i),n,w.type),hr(w)?(Wm(n,o),h.unshift(w)):h.push(w))}return h}(n,i,o),w=null===u?null:{"":-1};if(null!==m){h=!0,Km(o,n.data.length,m.length);for(let oe=0;oe<m.length;oe++){const Te=m[oe];Te.providersResolver&&Te.providersResolver(Te)}let M=!1,N=!1,ee=Yl(n,i,m.length,null);for(let oe=0;oe<m.length;oe++){const Te=m[oe];o.mergedAttrs=mo(o.mergedAttrs,Te.hostAttrs),eh(n,o,i,ee,Te),Op(ee,Te,w),null!==Te.contentQueries&&(o.flags|=8),(null!==Te.hostBindings||null!==Te.hostAttrs||0!==Te.hostVars)&&(o.flags|=128);const Ye=Te.type.prototype;!M&&(Ye.ngOnChanges||Ye.ngOnInit||Ye.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),M=!0),!N&&(Ye.ngOnChanges||Ye.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),N=!0),ee++}!function Hm(n,i){const u=i.directiveEnd,h=n.data,m=i.attrs,w=[];let M=null,N=null;for(let ee=i.directiveStart;ee<u;ee++){const oe=h[ee],Te=oe.inputs,Ye=null===m||ul(i)?null:Fp(Te,m);w.push(Ye),M=Xd(Te,ee,M),N=Xd(oe.outputs,ee,N)}null!==M&&(M.hasOwnProperty("class")&&(i.flags|=16),M.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=w,i.inputs=M,i.outputs=N}(n,o)}w&&function cv(n,i,o){if(i){const u=n.localNames=[];for(let h=0;h<i.length;h+=2){const m=o[i[h+1]];if(null==m)throw new ht(-301,!1);u.push(i[h],m)}}}(o,u,w)}return o.mergedAttrs=mo(o.mergedAttrs,o.attrs),h}function Gm(n,i,o,u,h,m){const w=m.hostBindings;if(w){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const N=~i.index;(function uv(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(M)!=N&&M.push(N),M.push(u,h,w)}}function zm(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Wm(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Op(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;hr(i)&&(o[""]=n)}}function Km(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}function eh(n,i,o,u,h){n.data[u]=h;const m=h.factory||(h.factory=ri(h.type)),w=new si(m,hr(h),null);n.blueprint[u]=w,o[u]=w,Gm(n,i,0,u,Yl(n,o,h.hostVars,wi),h)}function Df(n,i,o){const u=jt(i,n),h=Mp(o),m=n[10],w=md(n,ua(n,h,null,o.onPush?64:16,u,i,m,m.createRenderer(u,o),null,null));n[i.index]=w}function Nl(n,i,o,u,h,m){const w=jt(n,i);!function Sf(n,i,o,u,h,m,w){if(null==m)Ei(n)?n.removeAttribute(i,h,o):i.removeAttribute(h);else{const M=null==w?mt(m):w(m,u||"",h);Ei(n)?n.setAttribute(i,h,M,o):o?i.setAttributeNS(o,h,M):i.setAttribute(h,M)}}(i[11],w,m,n.value,o,u,h)}function kp(n,i,o,u,h,m){const w=m[i];if(null!==w){const M=u.setInput;for(let N=0;N<w.length;){const ee=w[N++],oe=w[N++],Te=w[N++];null!==M?u.setInput(o,Te,ee,oe):o[oe]=Te}}}function Fp(n,i){let o=null,u=0;for(;u<i.length;){const h=i[u];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],i[u+1])),u+=2}else u+=2;else u+=4}return o}function th(n,i,o,u){return new Array(n,!0,!1,i,null,0,u,o,null,null)}function qm(n,i){const o=gr(i,n);if(Ii(o)){const u=o[1];80&o[2]?Fu(u,o,u.template,o[8]):o[5]>0&&Up(o)}}function Up(n){for(let u=mn(n);null!==u;u=vn(u))for(let h=10;h<u.length;h++){const m=u[h];if(1024&m[2]){const w=m[1];Fu(w,m,w.template,m[8])}else m[5]>0&&Up(m)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const h=gr(o[u],n);Ii(h)&&h[5]>0&&Up(h)}}function Zm(n,i){const o=gr(i,n),u=o[1];(function Ym(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(u,o),fd(u,o,o[8])}function md(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Bp(n){for(;n;){n[2]|=64;const i=He(n);if(br(n)&&!i)return n;n=i}return null}function Jm(n){!function jp(n){for(let i=0;i<n.components.length;i++){const o=n.components[i],u=Sa(o),h=u[1];pd(h,u,h.template,o)}}(n[8])}function ih(n,i,o){xo(0),i(n,o)}const Xm=(()=>Promise.resolve(null))();function $p(n){return n[7]||(n[7]=[])}function Gp(n){return n.cleanup||(n.cleanup=[])}function Mf(n,i){const o=n[9],u=o?o.get(pc,null):null;u&&u.handleError(i)}function ty(n,i,o,u,h){for(let m=0;m<o.length;){const w=o[m++],M=o[m++],N=i[w],ee=n.data[w];null!==ee.setInput?ee.setInput(N,h,u,M):N[M]=h}}function hl(n,i,o){const u=Rt(i,n);!function co(n,i,o){Ei(n)?n.setValue(i,o):i.textContent=o}(n[11],u,o)}function sh(n,i,o){let u=o?n.styles:null,h=o?n.classes:null,m=0;if(null!==i)for(let w=0;w<i.length;w++){const M=i[w];"number"==typeof M?m=M:1==m?h=at(h,M):2==m&&(u=at(u,M+": "+i[++w]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=h:n.classesWithoutHost=h}const Bc=new Es("INJECTOR",-1);class oh{get(i,o=Xs){if(o===Xs){const u=new Error(`NullInjectorError: No provider for ${Ge(i)}!`);throw u.name="NullInjectorError",u}return o}}const ah=new Es("Set Injector scope."),jc={},Kp={};let xf;function ry(){return void 0===xf&&(xf=new oh),xf}function qp(n,i=null,o=null,u){const h=uh(n,i,o,u);return h._resolveInjectorDefTypes(),h}function uh(n,i=null,o=null,u){return new Zp(n,o,i||ry(),u)}class Zp{constructor(i,o,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];o&&Va(o,M=>this.processProvider(M,i,o)),Va([i],M=>this.processInjectorType(M,[],m)),this.records.set(Bc,Hc(void 0,this));const w=this.records.get(ah);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof i?null:Ge(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=Xs,u=wn.Default){this.assertNotDestroyed();const h=ou(this),m=On(void 0);try{if(!(u&wn.SkipSelf)){let M=this.records.get(i);if(void 0===M){const N=function gv(n){return"function"==typeof n||"object"==typeof n&&n instanceof Es}(i)&&gt(i);M=N&&this.injectableDefInScope(N)?Hc(Yp(i),jc):null,this.records.set(i,M)}if(null!=M)return this.hydrate(i,M)}return(u&wn.Self?ry():this.parent).get(i,o=u&wn.Optional&&o===Xs?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[Xo]=w[Xo]||[]).unshift(Ge(i)),h)throw w;return function Nu(n,i,o,u){const h=n[Xo];throw i[Za]&&h.unshift(i[Za]),n.message=function il(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=Ge(i);if(Array.isArray(i))h=i.map(Ge).join(" -> ");else if("object"==typeof i){let m=[];for(let w in i)if(i.hasOwnProperty(w)){let M=i[w];m.push(w+":"+("string"==typeof M?JSON.stringify(M):Ge(M)))}h=`{${m.join(", ")}}`}return`${o}${u?"("+u+")":""}[${h}]: ${n.replace(To,"\n  ")}`}("\n"+n.message,h,o,u),n.ngTokenPath=h,n[Xo]=null,n}(w,i,"R3InjectorError",this.source)}throw w}finally{On(m),ou(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,h)=>i.push(Ge(h))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ht(205,!1)}processInjectorType(i,o,u){if(!(i=tt(i)))return!1;let h=Wn(i);const m=null==h&&i.ngModule||void 0,w=void 0===m?i:m,M=-1!==u.indexOf(w);if(void 0!==m&&(h=Wn(m)),null==h)return!1;if(null!=h.imports&&!M){let oe;u.push(w);try{Va(h.imports,Te=>{this.processInjectorType(Te,o,u)&&(void 0===oe&&(oe=[]),oe.push(Te))})}finally{}if(void 0!==oe)for(let Te=0;Te<oe.length;Te++){const{ngModule:Ye,providers:Ct}=oe[Te];Va(Ct,qt=>this.processProvider(qt,Ye,Ct||Yt))}}this.injectorDefTypes.add(w);const N=ri(w)||(()=>new w);this.records.set(w,Hc(N,jc));const ee=h.providers;if(null!=ee&&!M){const oe=i;Va(ee,Te=>this.processProvider(Te,oe,ee))}return void 0!==m&&void 0!==i.providers}processProvider(i,o,u){let h=$c(i=tt(i))?i:tt(i&&i.provide);const m=function Ja(n,i,o){return lh(n)?Hc(void 0,n.useValue):Hc(iy(n),jc)}(i);if($c(i)||!0!==i.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Hc(void 0,jc,!0),w.factory=()=>Ku(w.multi),this.records.set(h,w)),h=i,w.multi.push(i)}this.records.set(h,m)}hydrate(i,o){return o.value===jc&&(o.value=Kp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function pv(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=tt(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Yp(n){const i=gt(n),o=null!==i?i.factory:ri(n);if(null!==o)return o;if(n instanceof Es)throw new ht(204,!1);if(n instanceof Function)return function dv(n){const i=n.length;if(i>0)throw function ya(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}(i,"?"),new ht(204,!1);const o=function cn(n){const i=n&&(n[pr]||n[jn]);if(i){const o=function Sn(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ht(204,!1)}function iy(n,i,o){let u;if($c(n)){const h=tt(n);return ri(h)||Yp(h)}if(lh(n))u=()=>tt(n.useValue);else if(function Qp(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...Ku(n.deps||[]));else if(function ch(n){return!(!n||!n.useExisting)}(n))u=()=>Gs(tt(n.useExisting));else{const h=tt(n&&(n.useClass||n.provide));if(!function fv(n){return!!n.deps}(n))return ri(h)||Yp(h);u=()=>new h(...Ku(n.deps))}return u}function Hc(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function lh(n){return null!==n&&"object"==typeof n&&ba in n}function $c(n){return"function"==typeof n}let Ju=(()=>{class n{static create(o,u){var h;if(Array.isArray(o))return qp({name:""},u,o,"");{const m=null!==(h=o.name)&&void 0!==h?h:"";return qp({name:m},o.parent,o.providers,m)}}}return n.THROW_IF_NOT_FOUND=Xs,n.NULL=new oh,n.\u0275prov=De({token:n,providedIn:"any",factory:()=>Gs(Bc)}),n.__NG_ELEMENT_ID__=-1,n})();function hy(n,i){Ms(Sa(n)[1],z())}function fh(n){let i=function fy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;i;){let h;if(hr(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ht(903,"");h=i.\u0275dir}if(h){if(o){u.push(h);const w=n;w.inputs=ph(n.inputs),w.declaredInputs=ph(n.declaredInputs),w.outputs=ph(n.outputs);const M=h.hostBindings;M&&Ev(n,M);const N=h.viewQuery,ee=h.contentQueries;if(N&&vv(n,N),ee&&sg(n,ee),Je(n.inputs,h.inputs),Je(n.declaredInputs,h.declaredInputs),Je(n.outputs,h.outputs),hr(h)&&h.data.animation){const oe=n.data;oe.animation=(oe.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let w=0;w<m.length;w++){const M=m[w];M&&M.ngInherit&&M(n),M===fh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function _v(n){let i=0,o=null;for(let u=n.length-1;u>=0;u--){const h=n[u];h.hostVars=i+=h.hostVars,h.hostAttrs=mo(h.hostAttrs,o=mo(o,h.hostAttrs))}}(u)}function ph(n){return n===Ar?{}:n===Yt?[]:n}function vv(n,i){const o=n.viewQuery;n.viewQuery=o?(u,h)=>{i(u,h),o(u,h)}:i}function sg(n,i){const o=n.contentQueries;n.contentQueries=o?(u,h,m)=>{i(u,h,m),o(u,h,m)}:i}function Ev(n,i){const o=n.hostBindings;n.hostBindings=o?(u,h)=>{i(u,h),o(u,h)}:i}let _d=null;function vc(){if(!_d){const n=Mn.Symbol;if(n&&n.iterator)_d=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(_d=u)}}}return _d}function Xu(n){return!!Ec(n)&&(Array.isArray(n)||!(n instanceof Map)&&vc()in n)}function Ec(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fl(n,i,o){return n[i]=o}function Xa(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function zc(n,i,o,u){const h=Xa(n,i,o);return Xa(n,i+1,u)||h}function gh(n,i,o,u){const h=ke();return Xa(h,Ti(),i)&&(Kt(),Nl(Bi(),h,n,i,o,u)),gh}function Id(n,i,o,u,h,m){const M=zc(n,function mi(){return Bn.lFrame.bindingIndex}(),o,h);return $r(2),M?i+mt(o)+u+mt(h)+m:wi}function vy(n,i,o,u,h,m,w,M){const N=ke(),ee=Kt(),oe=n+20,Te=ee.firstCreatePass?function hg(n,i,o,u,h,m,w,M,N){const ee=i.consts,oe=Uc(i,n,4,w||null,pi(ee,M));bf(i,o,oe,pi(ee,N)),Ms(i,oe);const Te=oe.tViews=dl(2,oe,u,h,m,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ee);return null!==i.queries&&(i.queries.template(i,oe),Te.queries=i.queries.embeddedTView(oe)),oe}(oe,ee,N,i,o,u,h,m,w):ee.data[oe];Ie(Te,!1);const Ye=N[11].createComment("");xt(ee,N,Ye,Te),ps(Ye,N),md(N,N[oe]=th(Ye,N,Ye,Te)),Lr(Te)&&Rp(ee,N,Te),null!=w&&yc(N,Te,M)}function Ey(n){return Pr(function Vn(){return Bn.lFrame.contextLView}(),20+n)}function Eh(n,i=wn.Default){const o=ke();return null===o?Gs(n,i):Re(z(),o,tt(n),i)}function Sd(){throw new Error("invalid")}function Tg(n,i,o){const u=ke();return Xa(u,Ti(),i)&&Tu(Kt(),Bi(),u,n,i,u[11],o,!1),Tg}function wh(n,i,o,u,h){const w=h?"class":"style";ty(n,o,i.inputs[w],w,u)}function Jl(n,i,o,u){const h=ke(),m=Kt(),w=20+n,M=h[11],N=h[w]=Iu(M,i,function Ga(){return Bn.lFrame.currentNamespace}()),ee=m.firstCreatePass?function xy(n,i,o,u,h,m,w){const M=i.consts,ee=Uc(i,n,2,h,pi(M,m));return bf(i,o,ee,pi(M,w)),null!==ee.attrs&&sh(ee,ee.attrs,!1),null!==ee.mergedAttrs&&sh(ee,ee.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,ee),ee}(w,m,h,0,i,o,u):m.data[w];Ie(ee,!0);const oe=ee.mergedAttrs;null!==oe&&Qs(M,N,oe);const Te=ee.classes;null!==Te&&Dl(M,N,Te);const Ye=ee.styles;return null!==Ye&&ac(M,N,Ye),64!=(64&ee.flags)&&xt(m,h,N,ee),0===function ao(){return Bn.lFrame.elementDepthCount}()&&ps(N,h),function jo(){Bn.lFrame.elementDepthCount++}(),Lr(ee)&&(Rp(m,h,ee),mc(m,ee,h)),null!==u&&yc(h,ee),Jl}function Ch(){let n=z();Le()?It():(n=n.parent,Ie(n,!1));const i=n;!function K(){Bn.lFrame.elementDepthCount--}();const o=Kt();return o.firstCreatePass&&(Ms(o,n),Ot(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function mu(n){return 0!=(16&n.flags)}(i)&&wh(o,i,ke(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function tu(n){return 0!=(32&n.flags)}(i)&&wh(o,i,ke(),i.stylesWithoutHost,!1),Ch}function Ad(n,i,o,u){return Jl(n,i,o,u),Ch(),Ad}function Gf(n,i,o){const u=ke(),h=Kt(),m=n+20,w=h.firstCreatePass?function Rv(n,i,o,u,h){const m=i.consts,w=pi(m,u),M=Uc(i,n,8,"ng-container",w);return null!==w&&sh(M,w,!0),bf(i,o,M,pi(m,h)),null!==i.queries&&i.queries.elementStart(i,M),M}(m,h,u,i,o):h.data[m];Ie(w,!0);const M=u[m]=u[11].createComment("");return xt(h,u,M,w),ps(M,u),Lr(w)&&(Rp(h,u,w),mc(h,w,u)),null!=o&&yc(u,w),Gf}function zf(){let n=z();const i=Kt();return Le()?It():(n=n.parent,Ie(n,!1)),i.firstCreatePass&&(Ms(i,n),Ot(n)&&i.queries.elementEnd(n)),zf}function Wf(){return ke()}function Th(n){return!!n&&"function"==typeof n.then}function Kf(n){return!!n&&"function"==typeof n.subscribe}const bg=Kf;function bh(n,i,o,u){const h=ke(),m=Kt(),w=z();return function Yf(n,i,o,u,h,m,w,M){const N=Lr(u),oe=n.firstCreatePass&&Gp(n),Te=i[8],Ye=$p(i);let Ct=!0;if(3&u.type||M){const zn=jt(u,i),Ir=M?M(zn):zn,on=Ye.length,qr=M?ss=>M(j(ss[u.index])):u.index;if(Ei(o)){let ss=null;if(!M&&N&&(ss=function Zf(n,i,o,u){const h=n.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const w=h[m];if(w===o&&h[m+1]===u){const M=i[7],N=h[m+2];return M.length>N?M[N]:null}"string"==typeof w&&(m+=2)}return null}(n,i,h,u.index)),null!==ss)(ss.__ngLastListenerFn__||ss).__ngNextListenerFn__=m,ss.__ngLastListenerFn__=m,Ct=!1;else{m=Rd(u,i,Te,m,!1);const Ws=o.listen(Ir,h,m);Ye.push(m,Ws),oe&&oe.push(h,qr,on,on+1)}}else m=Rd(u,i,Te,m,!0),Ir.addEventListener(h,m,w),Ye.push(m),oe&&oe.push(h,qr,on,w)}else m=Rd(u,i,Te,m,!1);const qt=u.outputs;let An;if(Ct&&null!==qt&&(An=qt[h])){const zn=An.length;if(zn)for(let Ir=0;Ir<zn;Ir+=2){const ml=i[An[Ir]][An[Ir+1]].subscribe(m),qh=Ye.length;Ye.push(m,ml),oe&&oe.push(h,u.index,qh,-(qh+1))}}}(m,h,h[11],w,n,i,!!o,u),bh}function Dg(n,i,o,u){try{return!1!==o(u)}catch(h){return Mf(n,h),!1}}function Rd(n,i,o,u,h){return function m(w){if(w===Function)return u;const M=2&n.flags?gr(n.index,i):i;0==(32&i[2])&&Bp(M);let N=Dg(i,0,u,w),ee=m.__ngNextListenerFn__;for(;ee;)N=Dg(i,0,ee,w)&&N,ee=ee.__ngNextListenerFn__;return h&&!1===N&&(w.preventDefault(),w.returnValue=!1),N}}function Sg(n=1){return function Mi(n){return(Bn.lFrame.contextLView=function uo(n,i){for(;n>0;)i=i[15],n--;return i}(n,Bn.lFrame.contextLView))[8]}(n)}function Jf(n,i,o,u,h){const m=n[o+1],w=null===i;let M=u?ll(m):ql(m),N=!1;for(;0!==M&&(!1===N||w);){const oe=n[M+1];jy(n[M],i)&&(N=!0,n[M+1]=u?gf(oe):ff(oe)),M=u?ll(oe):ql(oe)}N&&(n[o+1]=u?ff(m):gf(m))}function jy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&wt(n,i)>=0}const la={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pg(n){return n.substring(la.key,la.keyEnd)}function Ng(n,i){const o=la.textEnd;return o===i?-1:(i=la.keyEnd=function Ha(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,la.key=i,o),Ns(n,i,o))}function Ns(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function Sh(n,i,o){return Fl(n,i,o,!1),Sh}function Fg(n,i){return Fl(n,i,null,!0),Fg}function $y(n){!function Ll(n,i,o,u){const h=Kt(),m=$r(2);h.firstUpdatePass&&Lg(h,null,m,u);const w=ke();if(o!==wi&&Xa(w,m,o)){const M=h.data[Oi()];if(pl(M,u)&&!qo(h,m)){let N=u?M.classesWithoutHost:M.stylesWithoutHost;null!==N&&(o=at(N,o||"")),wh(h,M,w,o,u)}else!function Vv(n,i,o,u,h,m,w,M){h===wi&&(h=Yt);let N=0,ee=0,oe=0<h.length?h[0]:null,Te=0<m.length?m[0]:null;for(;null!==oe||null!==Te;){const Ye=N<h.length?h[N+1]:void 0,Ct=ee<m.length?m[ee+1]:void 0;let An,qt=null;oe===Te?(N+=2,ee+=2,Ye!==Ct&&(qt=Te,An=Ct)):null===Te||null!==oe&&oe<Te?(N+=2,qt=oe):(ee+=2,qt=Te,An=Ct),null!==qt&&zy(n,i,o,u,qt,An,w,M),oe=N<h.length?h[N]:null,Te=ee<m.length?m[ee]:null}}(h,M,w,w[11],w[m+1],w[m+1]=function Fv(n,i,o){if(null==o||""===o)return Yt;const u=[],h=Qu(o);if(Array.isArray(h))for(let m=0;m<h.length;m++)n(u,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&n(u,m,h[m]);else"string"==typeof h&&i(u,h);return u}(n,i,o),u,m)}}(xs,ls,n,!0)}function ls(n,i){for(let o=function Ji(n){return function Og(n){la.key=0,la.keyEnd=0,la.value=0,la.valueEnd=0,la.textEnd=n.length}(n),Ng(n,Ns(n,0,la.textEnd))}(i);o>=0;o=Ng(i,o))xs(n,Pg(i),!0)}function Fl(n,i,o,u){const h=ke(),m=Kt(),w=$r(2);m.firstUpdatePass&&Lg(m,n,w,u),i!==wi&&Xa(h,w,i)&&zy(m,m.data[Oi()],h,h[11],n,h[w+1]=function Uv(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ge(Qu(n)))),n}(i,o),u,w)}function qo(n,i){return i>=n.expandoStartIndex}function Lg(n,i,o,u){const h=n.data;if(null===h[o+1]){const m=h[Oi()],w=qo(n,o);pl(m,u)&&null===i&&!w&&(i=!1),i=function Nv(n,i,o,u){const h=rs(n);let m=u?i.residualClasses:i.residualStyles;if(null===h)0===(u?i.classBindings:i.styleBindings)&&(o=Ah(o=Vg(null,n,i,o,u),i.attrs,u),m=null);else{const w=i.directiveStylingLast;if(-1===w||n[w]!==h)if(o=Vg(h,n,i,o,u),null===m){let N=function Ov(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==ql(u))return n[ll(u)]}(n,i,u);void 0!==N&&Array.isArray(N)&&(N=Vg(null,n,i,N[1],u),N=Ah(N,i.attrs,u),function Gy(n,i,o,u){n[ll(o?i.classBindings:i.styleBindings)]=u}(n,i,u,N))}else m=function kv(n,i,o){let u;const h=i.directiveEnd;for(let m=1+i.directiveStylingLast;m<h;m++)u=Ah(u,n[m].hostAttrs,o);return Ah(u,i.attrs,o)}(n,i,u)}return void 0!==m&&(u?i.residualClasses=m:i.residualStyles=m),o}(h,m,i,u),function Uy(n,i,o,u,h,m){let w=m?i.classBindings:i.styleBindings,M=ll(w),N=ql(w);n[u]=o;let oe,ee=!1;if(Array.isArray(o)){const Te=o;oe=Te[1],(null===oe||wt(Te,oe)>0)&&(ee=!0)}else oe=o;if(h)if(0!==N){const Ye=ll(n[M+1]);n[u+1]=hf(Ye,M),0!==Ye&&(n[Ye+1]=pf(n[Ye+1],u)),n[M+1]=function ld(n,i){return 131071&n|i<<17}(n[M+1],u)}else n[u+1]=hf(M,0),0!==M&&(n[M+1]=pf(n[M+1],u)),M=u;else n[u+1]=hf(N,0),0===M?M=u:n[N+1]=pf(n[N+1],u),N=u;ee&&(n[u+1]=ff(n[u+1])),Jf(n,oe,u,!0),Jf(n,oe,u,!1),function By(n,i,o,u,h){const m=h?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof i&&wt(m,i)>=0&&(o[u+1]=gf(o[u+1]))}(i,oe,n,u,m),w=hf(M,N),m?i.classBindings=w:i.styleBindings=w}(h,m,i,o,w,u)}}function Vg(n,i,o,u,h){let m=null;const w=o.directiveEnd;let M=o.directiveStylingLast;for(-1===M?M=o.directiveStart:M++;M<w&&(m=i[M],u=Ah(u,m.hostAttrs,h),m!==n);)M++;return null!==n&&(o.directiveStylingLast=M),u}function Ah(n,i,o){const u=o?1:2;let h=-1;if(null!==i)for(let m=0;m<i.length;m++){const w=i[m];"number"==typeof w?h=w:h===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xs(n,w,!!o||i[++m]))}return void 0===n?null:n}function zy(n,i,o,u,h,m,w,M){if(!(3&i.type))return;const N=n.data,ee=N[M+1];bc(function Rl(n){return 1==(1&n)}(ee)?Ug(N,i,o,h,ql(ee),w):void 0)||(bc(m)||function Kl(n){return 2==(2&n)}(ee)&&(m=Ug(N,null,o,h,M,w)),function bl(n,i,o,u,h){const m=Ei(n);if(i)h?m?n.addClass(o,u):o.classList.add(u):m?n.removeClass(o,u):o.classList.remove(u);else{let w=-1===u.indexOf("-")?void 0:hi.DashCase;if(null==h)m?n.removeStyle(o,u,w):o.style.removeProperty(u);else{const M="string"==typeof h&&h.endsWith("!important");M&&(h=h.slice(0,-10),w|=hi.Important),m?n.setStyle(o,u,h,w):o.style.setProperty(u,h,M?"important":"")}}}(u,w,Rt(Oi(),o),h,m))}function Ug(n,i,o,u,h,m){const w=null===i;let M;for(;h>0;){const N=n[h],ee=Array.isArray(N),oe=ee?N[1]:N,Te=null===oe;let Ye=o[h+1];Ye===wi&&(Ye=Te?Yt:void 0);let Ct=Te?ru(Ye,u):oe===u?Ye:void 0;if(ee&&!bc(Ct)&&(Ct=ru(N,u)),bc(Ct)&&(M=Ct,w))return M;const qt=n[h+1];h=w?ll(qt):ql(qt)}if(null!==i){let N=m?i.residualClasses:i.residualStyles;null!=N&&(M=ru(N,u))}return M}function bc(n){return void 0!==n}function pl(n,i){return 0!=(n.flags&(i?16:32))}function Vl(n,i=""){const o=ke(),u=Kt(),h=n+20,m=u.firstCreatePass?Uc(u,h,1,i,null):u.data[h],w=o[h]=function bo(n,i){return Ei(n)?n.createText(i):n.createTextNode(i)}(o[11],i);xt(u,o,w,m),Ie(m,!1)}function Wy(n){return Ul("",n,""),Wy}function Ul(n,i,o){const u=ke(),h=function Cd(n,i,o,u){return Xa(n,Ti(),o)?i+mt(o)+u:wi}(u,n,i,o);return h!==wi&&hl(u,Oi(),h),Ul}function Pd(n,i,o,u,h){const m=ke(),w=Id(m,n,i,o,u,h);return w!==wi&&hl(m,Oi(),w),Pd}function Sc(n,i,o){const u=ke();if(Xa(u,Ti(),i)){const m=Kt(),w=Bi();Tu(m,w,u,n,i,function ey(n,i,o){return(null===n||hr(n))&&(o=function ce(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[i.index])),o[11]}(rs(m.data),w,u),o,!0)}return Sc}const Fd=void 0;var qg=["en",[["a","p"],["AM","PM"],Fd],[["AM","PM"],Fd,Fd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fd,"{1} 'at' {0}",Fd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _E(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Ld={};function Yg(n){const i=function Gv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=n_(i);if(o)return o;const u=i.split("-")[0];if(o=n_(u),o)return o;if("en"===u)return qg;throw new Error(`Missing locale data for the locale "${n}".`)}function Nh(n){return Yg(n)[Gr.PluralCase]}function n_(n){return n in Ld||(Ld[n]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[n]),Ld[n]}var Gr=(()=>((Gr=Gr||{})[Gr.LocaleId=0]="LocaleId",Gr[Gr.DayPeriodsFormat=1]="DayPeriodsFormat",Gr[Gr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gr[Gr.DaysFormat=3]="DaysFormat",Gr[Gr.DaysStandalone=4]="DaysStandalone",Gr[Gr.MonthsFormat=5]="MonthsFormat",Gr[Gr.MonthsStandalone=6]="MonthsStandalone",Gr[Gr.Eras=7]="Eras",Gr[Gr.FirstDayOfWeek=8]="FirstDayOfWeek",Gr[Gr.WeekendRange=9]="WeekendRange",Gr[Gr.DateFormat=10]="DateFormat",Gr[Gr.TimeFormat=11]="TimeFormat",Gr[Gr.DateTimeFormat=12]="DateTimeFormat",Gr[Gr.NumberSymbols=13]="NumberSymbols",Gr[Gr.NumberFormats=14]="NumberFormats",Gr[Gr.CurrencyCode=15]="CurrencyCode",Gr[Gr.CurrencySymbol=16]="CurrencySymbol",Gr[Gr.CurrencyName=17]="CurrencyName",Gr[Gr.Currencies=18]="Currencies",Gr[Gr.Directionality=19]="Directionality",Gr[Gr.PluralCase=20]="PluralCase",Gr[Gr.ExtraData=21]="ExtraData",Gr))();const Oh="en-US";let Lh=Oh;function im(n,i,o,u,h){if(n=tt(n),Array.isArray(n))for(let m=0;m<n.length;m++)im(n[m],i,o,u,h);else{const m=Kt(),w=ke();let M=$c(n)?n:tt(n.provide),N=iy(n);const ee=z(),oe=1048575&ee.providerIndexes,Te=ee.directiveStart,Ye=ee.providerIndexes>>20;if($c(n)||!n.multi){const Ct=new si(N,h,Eh),qt=Bl(M,i,h?oe:oe+Ye,Te);-1===qt?(I(ka(ee,w),m,M),sm(m,n,i.length),i.push(M),ee.directiveStart++,ee.directiveEnd++,h&&(ee.providerIndexes+=1048576),o.push(Ct),w.push(Ct)):(o[qt]=Ct,w[qt]=Ct)}else{const Ct=Bl(M,i,oe+Ye,Te),qt=Bl(M,i,oe,oe+Ye),An=Ct>=0&&o[Ct],zn=qt>=0&&o[qt];if(h&&!zn||!h&&!An){I(ka(ee,w),m,M);const Ir=function D_(n,i,o,u,h){const m=new si(n,o,Eh);return m.multi=[],m.index=i,m.componentProviders=0,b_(m,h,u&&!o),m}(h?_0:y0,o.length,h,u,N);!h&&zn&&(o[qt].providerFactory=Ir),sm(m,n,i.length,0),i.push(M),ee.directiveStart++,ee.directiveEnd++,h&&(ee.providerIndexes+=1048576),o.push(Ir),w.push(Ir)}else sm(m,n,Ct>-1?Ct:qt,b_(o[h?qt:Ct],N,!h&&u));!h&&u&&zn&&o[qt].componentProviders++}}}function sm(n,i,o,u){const h=$c(i),m=function hv(n){return!!n.useClass}(i);if(h||m){const N=(m?tt(i.useClass):i).prototype.ngOnDestroy;if(N){const ee=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const oe=ee.indexOf(o);-1===oe?ee.push(o,[u,N]):ee[oe+1].push(u,N)}else ee.push(o,N)}}}function b_(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Bl(n,i,o,u){for(let h=o;h<u;h++)if(i[h]===n)return h;return-1}function y0(n,i,o,u){return om(this.multi,[])}function _0(n,i,o,u){const h=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,M=Kn(o,o[1],this.providerFactory.index,u);m=M.slice(0,w),om(h,m);for(let N=w;N<M.length;N++)m.push(M[N])}else m=[],om(h,m);return m}function om(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function S_(n,i=[]){return o=>{o.providersResolver=(u,h)=>function ed(n,i,o){const u=Kt();if(u.firstCreatePass){const h=hr(n);im(o,u.data,u.blueprint,h,!0),im(i,u.data,u.blueprint,h,!1)}}(u,h?h(n):n,i)}}class $h{}class v0{resolveComponentFactory(i){throw function A_(n){const i=Error(`No component factory found for ${Ge(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Gh=(()=>{class n{}return n.NULL=new v0,n})();function x_(){return td(z(),ke())}function td(n,i){return new zh(jt(n,i))}let zh=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=x_,n})();function P_(n){return n instanceof zh?n.nativeElement:n}class N_{}let w0=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function k_(){const n=ke(),o=gr(z().index,n);return function O_(n){return n[11]}(rt(o)?o:n)}(),n})(),C0=(()=>{class n{}return n.\u0275prov=De({token:n,providedIn:"root",factory:()=>null}),n})();class r{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const e=new r("13.3.12"),t={};function s(n,i,o,u,h=!1){for(;null!==o;){const m=i[o.index];if(null!==m&&u.push(j(m)),_t(m))for(let M=10;M<m.length;M++){const N=m[M],ee=N[1].firstChild;null!==ee&&s(N[1],N,ee,u)}const w=o.type;if(8&w)s(n,i,o.child,u);else if(32&w){const M=P(o,i);let N;for(;N=M();)u.push(N)}else if(16&w){const M=Un(i,o);if(Array.isArray(M))u.push(...M);else{const N=He(i[16]);s(N[1],N,M,u,!0)}}o=h?o.projectionNext:o.next}return u}class a{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return s(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(_t(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(_i(i,u),Mu(o,u))}this._attachedToViewContainer=!1}Qi(this._lView[1],this._lView)}onDestroy(i){xp(this._lView[1],this._lView,null,i)}markForCheck(){Bp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Rf(n,i,o){const u=i[10];u.begin&&u.begin();try{Fu(n,i,n.template,o)}catch(h){throw Mf(i,h),h}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ht(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ja(n,i){aa(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ht(902,"");this._appRef=i}}class d extends a{constructor(i){super(i),this._view=i}detectChanges(){Jm(this._view)}checkNoChanges(){}get context(){return null}}class g extends Gh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Se(i);return new de(o,this.ngModule)}}function A(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class de extends $h{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Dm(n){return n.map(Q_).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return A(this.componentDef.inputs)}get outputs(){return A(this.componentDef.outputs)}create(i,o,u,h){const m=(h=h||this.ngModule)?function Q(n,i){return{get:(o,u,h)=>{const m=n.get(o,t,h);return m!==t||u===t?m:i.get(o,u,h)}}}(i,h.injector):i,w=m.get(N_,F),M=m.get(C0,null),N=w.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",oe=u?function jm(n,i,o){if(Ei(n))return n.selectRootElement(i,o===At.ShadowDom);let u="string"==typeof i?n.querySelector(i):i;return u.textContent="",u}(N,u,this.componentDef.encapsulation):Iu(w.createRenderer(null,this.componentDef),ee,function H(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ee)),Te=this.componentDef.onPush?576:528,Ye=function dy(n,i){return{components:[],scheduler:n||vm,clean:Xm,playerHandler:i||null,flags:0}}(),Ct=dl(0,null,null,1,0,null,null,null,null,null),qt=ua(null,Ct,Ye,Te,null,null,w,N,M,m);let An,zn;Ho(qt);try{const Ir=function Ff(n,i,o,u,h,m){const w=o[1];o[20]=n;const N=Uc(w,20,2,"#host",null),ee=N.mergedAttrs=i.hostAttrs;null!==ee&&(sh(N,ee,!0),null!==n&&(Qs(h,n,ee),null!==N.classes&&Dl(h,n,N.classes),null!==N.styles&&ac(h,n,N.styles)));const oe=u.createRenderer(n,i),Te=ua(o,Mp(i),null,i.onPush?64:16,o[20],N,u,oe,m||null,null);return w.firstCreatePass&&(I(ka(N,o),w,i.type),Wm(w,N),Km(N,o.length,1)),md(o,Te),o[20]=Te}(oe,this.componentDef,qt,w,N);if(oe)if(u)Qs(N,oe,["ng-version",e.full]);else{const{attrs:on,classes:qr}=function _p(n){const i=[],o=[];let u=1,h=2;for(;u<n.length;){let m=n[u];if("string"==typeof m)2===h?""!==m&&i.push(m,n[++u]):8===h&&o.push(m);else{if(!hu(h))break;h=m}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);on&&Qs(N,oe,on),qr&&qr.length>0&&Dl(N,oe,qr.join(" "))}if(zn=jr(Ct,20),void 0!==o){const on=zn.projection=[];for(let qr=0;qr<this.ngContentSelectors.length;qr++){const ss=o[qr];on.push(null!=ss?Array.from(ss):null)}}An=function cy(n,i,o,u,h){const m=o[1],w=function av(n,i,o){const u=z();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),eh(n,u,i,Yl(n,i,1,null),o));const h=Kn(i,n,u.directiveStart,u);ps(h,i);const m=jt(u,i);return m&&ps(m,i),h}(m,o,i);if(u.components.push(w),n[8]=w,h&&h.forEach(N=>N(w,i)),i.contentQueries){const N=z();i.contentQueries(1,w,N.directiveStart)}const M=z();return!m.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Ys(M.index),Gm(o[1],M,0,M.directiveStart,M.directiveEnd,i),zm(i,w)),w}(Ir,this.componentDef,qt,Ye,[hy]),fd(Ct,qt,null)}finally{ea()}return new $t(this.componentType,An,td(zn,qt),qt,zn)}}class $t extends class am{}{constructor(i,o,u,h,m){super(),this.location=u,this._rootLView=h,this._tNode=m,this.instance=o,this.hostView=this.changeDetectorRef=new d(h),this.componentType=i}get injector(){return new yn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class kn{}class Qn{}const oi=new Map;class Rc extends kn{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new g(this);const u=gn(i);this._bootstrapComponents=Al(u.bootstrap),this._r3Injector=uh(i,o,[{provide:kn,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver}],Ge(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Ju.THROW_IF_NOT_FOUND,u=wn.Default){return i===Ju||i===kn||i===Bc?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class op extends Qn{constructor(i){super(),this.moduleType=i,null!==gn(i)&&function Lo(n){const i=new Set;!function o(u){const h=gn(u,!0),m=h.id;null!==m&&(function Ci(n,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${n} - ${Ge(i)} vs ${Ge(i.name)}`)}(m,oi.get(m),u),oi.set(m,u));const w=Al(h.imports);for(const M of w)i.has(M)||(i.add(M),o(M))}(n)}(i)}create(i){return new Rc(this.moduleType,i)}}function AE(n,i,o,u){return function ME(n,i,o,u,h,m){const w=i+o;return Xa(n,w,h)?fl(n,w+1,m?u.call(m,h):u(h)):um(n,w+1)}(ke(),Gn(),n,i,o,u)}function RE(n,i,o,u,h){return xE(ke(),Gn(),n,i,o,u,h)}function um(n,i){const o=n[i];return o===wi?void 0:o}function xE(n,i,o,u,h,m,w){const M=i+o;return zc(n,M,h,m)?fl(n,M+2,w?u.call(w,h,m):u(h,m)):um(n,M+2)}function kE(n,i){const o=Kt();let u;const h=n+20;o.firstCreatePass?(u=function qw(n,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(n===u.name)return u}}(i,o.pipeRegistry),o.data[h]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,u.onDestroy)):u=o.data[h];const m=u.factory||(u.factory=ri(u.type)),w=On(Eh);try{const M=Au(!1),N=m();return Au(M),function fg(n,i,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=u}(o,ke(),h,N),N}finally{On(w)}}function FE(n,i,o,u){const h=n+20,m=ke(),w=Pr(m,h);return function lm(n,i){return n[1].data[i].pure}(m,h)?xE(m,Gn(),i,w.transform,o,u,w):w.transform(o,u)}function I0(n){return i=>{setTimeout(n,void 0,i)}}const Mc=class Xw extends y.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var h,m,w;let M=i,N=o||(()=>null),ee=u;if(i&&"object"==typeof i){const Te=i;M=null===(h=Te.next)||void 0===h?void 0:h.bind(Te),N=null===(m=Te.error)||void 0===m?void 0:m.bind(Te),ee=null===(w=Te.complete)||void 0===w?void 0:w.bind(Te)}this.__isAsync&&(N=I0(N),M&&(M=I0(M)),ee&&(ee=I0(ee)));const oe=super.subscribe({next:M,error:N,complete:ee});return i instanceof B.w0&&i.add(oe),oe}};function eC(){return this._results[vc()]()}class T0{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=vc(),u=T0.prototype;u[o]||(u[o]=eC)}get changes(){return this._changes||(this._changes=new Mc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const h=bs(i);(this._changesDetected=!function ma(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let h=n[u],m=i[u];if(o&&(h=o(h),m=o(m)),m!==h)return!1}return!0}(u._results,h,o))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let cm=(()=>{class n{}return n.__NG_ELEMENT_ID__=rC,n})();const tC=cm,nC=class extends tC{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=ua(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(u[19]=m.createEmbeddedView(o)),fd(o,u,i),new a(u)}};function rC(){return F_(z(),ke())}function F_(n,i){return 4&n.type?new nC(i,n,td(n,i)):null}let L_=(()=>{class n{}return n.__NG_ELEMENT_ID__=iC,n})();function iC(){return UE(z(),ke())}const sC=L_,LE=class extends sC{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new yn(this._hostTNode,this._hostLView)}get parentInjector(){const i=D(this._hostTNode,this._hostLView);if(Oa(i)){const o=Jo(i,this._hostLView),u=Qo(i);return new yn(o[1].data[u+8],o)}return new yn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=VE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const h=i.createEmbeddedView(o||{});return this.insert(h,u),h}createComponent(i,o,u,h,m){const w=i&&!function Cn(n){return"function"==typeof n}(i);let M;if(w)M=o;else{const Te=o||{};M=Te.index,u=Te.injector,h=Te.projectableNodes,m=Te.ngModuleRef}const N=w?i:new de(Se(i)),ee=u||this.parentInjector;if(!m&&null==N.ngModule){const Ye=(w?ee:this.parentInjector).get(kn,null);Ye&&(m=Ye)}const oe=N.create(ee,h,void 0,m);return this.insert(oe.hostView,M),oe}insert(i,o){const u=i._lView,h=u[1];if(function bi(n){return _t(n[3])}(u)){const oe=this.indexOf(i);if(-1!==oe)this.detach(oe);else{const Te=u[3],Ye=new LE(Te,Te[6],Te[3]);Ye.detach(Ye.indexOf(i))}}const m=this._adjustIndex(o),w=this._lContainer;!function Hl(n,i,o,u){const h=10+u,m=o.length;u>0&&(o[h-1][4]=i),u<m-10?(i[4]=o[h],zu(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const w=i[17];null!==w&&o!==w&&function sc(n,i){const o=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===o?n[9]=[i]:o.push(i)}(w,i);const M=i[19];null!==M&&M.insertView(n),i[2]|=128}(h,u,w,m);const M=Cr(m,w),N=u[11],ee=T(N,w[7]);return null!==ee&&function Do(n,i,o,u,h,m){u[0]=h,u[6]=i,aa(n,u,o,1,h,m)}(h,w[6],N,u,ee,M),i.attachToViewContainerRef(),zu(b0(w),m,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=VE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=_i(this._lContainer,o);u&&(Mu(b0(this._lContainer),o),Qi(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=_i(this._lContainer,o);return u&&null!=Mu(b0(this._lContainer),o)?new a(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function VE(n){return n[8]}function b0(n){return n[8]||(n[8]=[])}function UE(n,i){let o;const u=i[n.index];if(_t(u))o=u;else{let h;if(8&n.type)h=j(u);else{const m=i[11];h=m.createComment("");const w=jt(n,i);cu(m,T(m,w),h,function p(n,i){return Ei(n)?n.nextSibling(i):i.nextSibling}(m,w),!1)}i[n.index]=o=th(u,i,h,n),md(i,o)}return new LE(o,n,i)}class D0{constructor(i){this.queryList=i,this.matches=null}clone(){return new D0(this.queryList)}setDirty(){this.queryList.setDirty()}}class S0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let m=0;m<u;m++){const w=o.getByIndex(m);h.push(this.queries[w.indexInDeclarationView].clone())}return new S0(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==qE(i,o).matches&&this.queries[o].setDirty()}}class BE{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class A0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const h=null!==o?o.length:0,m=this.getByIndex(u).embeddedTView(i,h);m&&(m.indexInDeclarationView=u,null!==o?o.push(m):o=[m])}return null!==o?new A0(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class R0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new R0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const m=u[h];this.matchTNodeWithReadOption(i,o,uC(o,m)),this.matchTNodeWithReadOption(i,o,yr(o,i,m,!1,!1))}else u===cm?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,yr(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===zh||h===L_||h===cm&&4&o.type)this.addMatch(o.index,-2);else{const m=yr(o,i,h,!1,!1);null!==m&&this.addMatch(o.index,m)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function uC(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function cC(n,i,o,u){return-1===o?function lC(n,i){return 11&n.type?td(n,i):4&n.type?F_(n,i):null}(i,n):-2===o?function dC(n,i,o){return o===zh?td(i,n):o===cm?F_(i,n):o===L_?UE(i,n):void 0}(n,i,u):Kn(n,n[1],o,i)}function jE(n,i,o,u){const h=i[19].queries[u];if(null===h.matches){const m=n.data,w=o.matches,M=[];for(let N=0;N<w.length;N+=2){const ee=w[N];M.push(ee<0?null:cC(i,m[ee],w[N+1],o.metadata.read))}h.matches=M}return h.matches}function M0(n,i,o,u){const h=n.queries.getByIndex(o),m=h.matches;if(null!==m){const w=jE(n,i,h,o);for(let M=0;M<m.length;M+=2){const N=m[M];if(N>0)u.push(w[M/2]);else{const ee=m[M+1],oe=i[-N];for(let Te=10;Te<oe.length;Te++){const Ye=oe[Te];Ye[17]===Ye[3]&&M0(Ye[1],Ye,ee,u)}if(null!==oe[9]){const Te=oe[9];for(let Ye=0;Ye<Te.length;Ye++){const Ct=Te[Ye];M0(Ct[1],Ct,ee,u)}}}}}return u}function HE(n){const i=ke(),o=Kt(),u=Hs();xo(u+1);const h=qE(o,u);if(n.dirty&&Vr(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const m=h.crossesNgTemplate?M0(o,i,u,[]):jE(o,i,h,u);n.reset(m,P_),n.notifyOnChanges()}return!0}return!1}function $E(n,i,o){const u=Kt();u.firstCreatePass&&(KE(u,new BE(n,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),WE(u,ke(),i)}function GE(n,i,o,u){const h=Kt();if(h.firstCreatePass){const m=z();KE(h,new BE(i,o,u),m.index),function fC(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}WE(h,ke(),o)}function zE(){return function hC(n,i){return n[19].queries[i].queryList}(ke(),Hs())}function WE(n,i,o){const u=new T0(4==(4&o));xp(n,i,u,u.destroy),null===i[19]&&(i[19]=new S0),i[19].queries.push(new D0(u))}function KE(n,i,o){null===n.queries&&(n.queries=new A0),n.queries.track(new R0(i,o))}function qE(n,i){return n.queries.getByIndex(i)}function ZE(n,i){return F_(n,i)}function B_(...n){}const hw=new Es("Application Initializer");let F0=(()=>{class n{constructor(o){this.appInits=o,this.resolve=B_,this.reject=B_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Th(m))o.push(m);else if(bg(m)){const w=new Promise((M,N)=>{m.subscribe({complete:M,error:N})});o.push(w)}}Promise.all(o).then(()=>{u()}).catch(h=>{this.reject(h)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Gs(hw,8))},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fw=new Es("AppId",{providedIn:"root",factory:function pw(){return`${L0()}${L0()}${L0()}`}});function L0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gw=new Es("Platform Initializer"),MC=new Es("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mw=new Es("appBootstrapListener");let xC=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const V0=new Es("LocaleId",{providedIn:"root",factory:()=>Cu(V0,wn.Optional|wn.SkipSelf)||function PC(){return"undefined"!=typeof $localize&&$localize.locale||Oh}()}),NC=new Es("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class OC{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let kC=(()=>{class n{compileModuleSync(o){return new op(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),m=Al(gn(o).declarations).reduce((w,M)=>{const N=Se(M);return N&&w.push(new de(N)),w},[]);return new OC(u,m)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LC=(()=>Promise.resolve(0))();function U0(n){"undefined"==typeof Zone?LC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class tc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mc(!1),this.onMicrotaskEmpty=new Mc(!1),this.onStable=new Mc(!1),this.onError=new Mc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&o,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function VC(){let n=Mn.requestAnimationFrame,i=Mn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function jC(n){const i=()=>{!function BC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,B0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,h,m,w,M)=>{try{return yw(n),o.invokeTask(h,m,w,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&i(),_w(n)}},onInvoke:(o,u,h,m,w,M,N)=>{try{return yw(n),o.invoke(h,m,w,M,N)}finally{n.shouldCoalesceRunChangeDetection&&i(),_w(n)}},onHasTask:(o,u,h,m)=>{o.hasTask(h,m),u===h&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,j0(n),B0(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(o,u,h,m)=>(o.handleError(h,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(tc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,h){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+h,i,UC,B_,B_);try{return m.runTask(w,o,u)}finally{m.cancelTask(w)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const UC={};function B0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function yw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _w(n){n._nesting--,B0(n)}class HC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mc,this.onMicrotaskEmpty=new Mc,this.onStable=new Mc,this.onError=new Mc}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,h){return i.apply(o,u)}}let vw=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tc.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,h){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:m,updateCb:h})}whenStable(o,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(Gs(tc))},n.\u0275prov=De({token:n,factory:n.\u0275fac}),n})(),$C=(()=>{class n{constructor(){this._applications=new Map,H0.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return H0.findTestabilityInTree(this,o,u)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class GC{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function zC(n){H0=n}let H0=new GC,Wh=null;const Ew=new Es("AllowMultipleToken"),ww=new Es("PlatformOnDestroy");class qC{constructor(i,o){this.name=i,this.token=o}}function Cw(n,i,o=[]){const u=`Platform: ${i}`,h=new Es(u);return(m=[])=>{let w=$0();if(!w||w.injector.get(Ew,!1)){const M=[...o,...m,{provide:h,useValue:!0}];n?n(M):function ZC(n){if(Wh&&!Wh.get(Ew,!1))throw new ht(400,"");Wh=n;const i=n.get(Iw),o=n.get(gw,null);o&&o.forEach(u=>u())}(function QC(n=[],i){return Ju.create({name:i,providers:[{provide:ah,useValue:"platform"},{provide:ww,useValue:()=>Wh=null},...n]})}(M,u))}return function YC(n){const i=$0();if(!i)throw new ht(401,"");return i}()}}function $0(){var n;return null!==(n=null==Wh?void 0:Wh.get(Iw))&&void 0!==n?n:null}let Iw=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const M=function JC(n,i){let o;return o="noop"===n?new HC:("zone.js"===n?void 0:n)||new tc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),N=[{provide:tc,useValue:M}];return M.run(()=>{const ee=Ju.create({providers:N,parent:this.injector,name:o.moduleType.name}),oe=o.create(ee),Te=oe.injector.get(pc,null);if(!Te)throw new ht(402,"");return M.runOutsideAngular(()=>{const Ye=M.onError.subscribe({next:Ct=>{Te.handleError(Ct)}});oe.onDestroy(()=>{z0(this._modules,oe),Ye.unsubscribe()})}),function XC(n,i,o){try{const u=o();return Th(u)?u.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(Te,M,()=>{const Ye=oe.injector.get(F0);return Ye.runInitializers(),Ye.donePromise.then(()=>(function Wv(n){Xn(n,"Expected localeId to be defined"),"string"==typeof n&&(Lh=n.toLowerCase().replace(/_/g,"-"))}(oe.injector.get(V0,Oh)||Oh),this._moduleDoBootstrap(oe),oe))})})}bootstrapModule(o,u=[]){const h=Tw({},u);return function WC(n,i,o){const u=new op(o);return Promise.resolve(u)}(0,0,o).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(o){const u=o.injector.get(G0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new ht(403,"");o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ht(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(ww,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Gs(Ju))},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Tw(n,i){return Array.isArray(i)?i.reduce(Tw,n):Object.assign(Object.assign({},n),i)}let G0=(()=>{class n{constructor(o,u,h,m){this._zone=o,this._injector=u,this._exceptionHandler=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new X.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),M=new X.y(N=>{let ee;this._zone.runOutsideAngular(()=>{ee=this._zone.onStable.subscribe(()=>{tc.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const oe=this._zone.onUnstable.subscribe(()=>{tc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{ee.unsubscribe(),oe.unsubscribe()}});this.isStable=(0,ie.T)(w,M.pipe((0,Ue.B)()))}bootstrap(o,u){if(!this._initStatus.done)throw new ht(405,"");let h;h=o instanceof $h?o:this._injector.get(Gh).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const m=function KC(n){return n.isBoundToModule}(h)?void 0:this._injector.get(kn),M=h.create(Ju.NULL,[],u||h.selector,m),N=M.location.nativeElement,ee=M.injector.get(vw,null),oe=ee&&M.injector.get($C);return ee&&oe&&oe.registerApplication(N,ee),M.onDestroy(()=>{this.detachView(M.hostView),z0(this.components,M),oe&&oe.unregisterApplication(N)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new ht(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;z0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(mw,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(Gs(tc),Gs(Ju),Gs(pc),Gs(F0))},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z0(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let Dw=!0,Sw=!1;function tI(){return Sw=!0,Dw}function nI(){if(Sw)throw new Error("Cannot enable prod mode after platform setup.");Dw=!1}let rI=(()=>{class n{}return n.__NG_ELEMENT_ID__=iI,n})();function iI(n){return function sI(n,i,o){if(In(n)&&!o){const u=gr(n.index,i);return new a(u,u)}return 47&n.type?new a(i[16],i):null}(z(),ke(),16==(16&n))}class xw{constructor(){}supports(i){return Xu(i)}create(i){return new dI(i)}}const cI=(n,i)=>i;class dI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||cI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,h=0,m=null;for(;o||u;){const w=!u||o&&o.currentIndex<Nw(u,h,m)?o:u,M=Nw(w,h,m),N=w.currentIndex;if(w===u)h--,u=u._nextRemoved;else if(o=o._next,null==w.previousIndex)h++;else{m||(m=[]);const ee=M-h,oe=N-h;if(ee!=oe){for(let Ye=0;Ye<ee;Ye++){const Ct=Ye<m.length?m[Ye]:m[Ye]=0,qt=Ct+Ye;oe<=qt&&qt<ee&&(m[Ye]=Ct+1)}m[w.previousIndex]=oe-ee}}M!==N&&i(w,M,N)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Xu(i))throw new ht(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,m,w,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let M=0;M<this.length;M++)m=i[M],w=this._trackByFn(M,m),null!==o&&Object.is(o.trackById,w)?(u&&(o=this._verifyReinsertion(o,m,w,M)),Object.is(o.item,m)||this._addIdentityChange(o,m)):(o=this._mismatch(o,m,w,M),u=!0),o=o._next}else h=0,function Ed(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[vc()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,M=>{w=this._trackByFn(h,M),null!==o&&Object.is(o.trackById,w)?(u&&(o=this._verifyReinsertion(o,M,w,h)),Object.is(o.item,M)||this._addIdentityChange(o,M)):(o=this._mismatch(o,M,w,h),u=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,h){let m;return null===i?m=this._itTail:(m=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,m,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,m,h)):i=this._addAfter(new hI(o,u),m,h),i}_verifyReinsertion(i,o,u,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?i=this._reinsertAfter(m,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,m=i._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Pw),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class hI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Pw{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new fI,this.map.set(o,u)),u.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nw(n,i,o){const u=n.previousIndex;if(null===u)return u;let h=0;return o&&u<o.length&&(h=o[u]),u+i+h}class Ow{constructor(){}supports(i){return i instanceof Map||Ec(i)}create(){return new pI}}class pI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Ec(i)))throw new ht(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const m=this._getOrCreateRecordForKey(h,u);o=this._insertBeforeOrAppend(o,m)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const m=h._prev,w=h._next;return m&&(m._next=w),w&&(w._prev=m),h._next=null,h._prev=null,h}const u=new gI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class gI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kw(){return new Y0([new xw])}let Y0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const h=u.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||kw()),deps:[[n,new au,new Yu]]}}find(o){const u=this.factories.find(h=>h.supports(o));if(null!=u)return u;throw new ht(901,"")}}return n.\u0275prov=De({token:n,providedIn:"root",factory:kw}),n})();function Fw(){return new Q0([new Ow])}let Q0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const h=u.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||Fw()),deps:[[n,new au,new Yu]]}}find(o){const u=this.factories.find(m=>m.supports(o));if(u)return u;throw new ht(901,"")}}return n.\u0275prov=De({token:n,providedIn:"root",factory:Fw}),n})();const _I=Cw(null,"core",[]);let vI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Gs(G0))},n.\u0275mod=he({type:n}),n.\u0275inj=xe({}),n})()},2382:(fn,ct,$)=>{$.d(ct,{Fj:()=>we,qu:()=>ao,u:()=>Ss,cw:()=>xr,sg:()=>Vi,u5:()=>Bn,JJ:()=>Fe,JL:()=>ze,UX:()=>ns,kI:()=>Ut,_Y:()=>ds});var y=$(5e3),B=$(9808),X=$(8996),ie=$(8306),Ue=$(4742),Ke=$(8421),Je=$(7669),Ge=$(5403),at=$(3268),be=$(1810),tt=$(4004);let Lt=(()=>{class K{constructor(O,ue){this._renderer=O,this._elementRef=ue,this.onChange=ke=>{},this.onTouched=()=>{}}setProperty(O,ue){this._renderer.setProperty(this._elementRef.nativeElement,O,ue)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(y.Qsj),y.Y36(y.SBq))},K.\u0275dir=y.lG2({type:K}),K})(),ft=(()=>{class K extends Lt{}return K.\u0275fac=function(){let V;return function(ue){return(V||(V=y.n5z(K)))(ue||K)}}(),K.\u0275dir=y.lG2({type:K,features:[y.qOj]}),K})();const ht=new y.OlP("NgValueAccessor"),Ft={provide:ht,useExisting:(0,y.Gpc)(()=>we),multi:!0},Xt=new y.OlP("CompositionEventMode");let we=(()=>{class K extends Lt{constructor(O,ue,ke){super(O,ue),this._compositionMode=ke,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dn(){const K=(0,B.q)()?(0,B.q)().getUserAgent():"";return/android (\d+)/.test(K.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Xt,8))},K.\u0275dir=y.lG2({type:K,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,ue){1&O&&y.NdJ("input",function(Kt){return ue._handleInput(Kt.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Kt){return ue._compositionEnd(Kt.target.value)})},features:[y._Bn([Ft]),y.qOj]}),K})();function Me(K){return null==K||0===K.length}function it(K){return null!=K&&"number"==typeof K.length}const Et=new y.OlP("NgValidators"),pt=new y.OlP("NgAsyncValidators"),et=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ut{static min(V){return function bt(K){return V=>{if(Me(V.value)||Me(K))return null;const O=parseFloat(V.value);return!isNaN(O)&&O<K?{min:{min:K,actual:V.value}}:null}}(V)}static max(V){return function Fn(K){return V=>{if(Me(V.value)||Me(K))return null;const O=parseFloat(V.value);return!isNaN(O)&&O>K?{max:{max:K,actual:V.value}}:null}}(V)}static required(V){return function Ht(K){return Me(K.value)?{required:!0}:null}(V)}static requiredTrue(V){return function Nn(K){return!0===K.value?null:{required:!0}}(V)}static email(V){return function rn(K){return Me(K.value)||et.test(K.value)?null:{email:!0}}(V)}static minLength(V){return function Zr(K){return V=>Me(V.value)||!it(V.value)?null:V.value.length<K?{minlength:{requiredLength:K,actualLength:V.value.length}}:null}(V)}static maxLength(V){return function Ln(K){return V=>it(V.value)&&V.value.length>K?{maxlength:{requiredLength:K,actualLength:V.value.length}}:null}(V)}static pattern(V){return function fr(K){if(!K)return Xn;let V,O;return"string"==typeof K?(O="","^"!==K.charAt(0)&&(O+="^"),O+=K,"$"!==K.charAt(K.length-1)&&(O+="$"),V=new RegExp(O)):(O=K.toString(),V=K),ue=>{if(Me(ue.value))return null;const ke=ue.value;return V.test(ke)?null:{pattern:{requiredPattern:O,actualValue:ke}}}}(V)}static nullValidator(V){return null}static compose(V){return xe(V)}static composeAsync(V){return tn(V)}}function Xn(K){return null}function an(K){return null!=K}function nt(K){const V=(0,y.QGY)(K)?(0,X.D)(K):K;return(0,y.CqO)(V),V}function Qe(K){let V={};return K.forEach(O=>{V=null!=O?Object.assign(Object.assign({},V),O):V}),0===Object.keys(V).length?null:V}function ve(K,V){return V.map(O=>O(K))}function Ee(K){return K.map(V=>function De(K){return!K.validate}(V)?V:O=>V.validate(O))}function xe(K){if(!K)return null;const V=K.filter(an);return 0==V.length?null:function(O){return Qe(ve(O,V))}}function gt(K){return null!=K?xe(Ee(K)):null}function tn(K){if(!K)return null;const V=K.filter(an);return 0==V.length?null:function(O){return function Ce(...K){const V=(0,Je.jO)(K),{args:O,keys:ue}=(0,Ue.D)(K),ke=new ie.y(Kt=>{const{length:gi}=O;if(!gi)return void Kt.complete();const z=new Array(gi);let W=gi,fe=gi;for(let Ie=0;Ie<gi;Ie++){let Le=!1;(0,Ke.Xf)(O[Ie]).subscribe((0,Ge.x)(Kt,It=>{Le||(Le=!0,fe--),z[Ie]=It},()=>W--,void 0,()=>{(!W||!Le)&&(fe||Kt.next(ue?(0,be.n)(ue,z):z),Kt.complete())}))}});return V?ke.pipe((0,at.Z)(V)):ke}(ve(O,V).map(nt)).pipe((0,tt.U)(Qe))}}function cn(K){return null!=K?tn(Ee(K)):null}function Sn(K,V){return null===K?[V]:Array.isArray(K)?[...K,V]:[K,V]}function Wn(K){return K._rawValidators}function pr(K){return K._rawAsyncValidators}function or(K){return K?Array.isArray(K)?K:[K]:[]}function jn(K,V){return Array.isArray(K)?K.includes(V):K===V}function Fr(K,V){const O=or(V);return or(K).forEach(ke=>{jn(O,ke)||O.push(ke)}),O}function wn(K,V){return or(V).filter(O=>!jn(K,O))}class Jn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=gt(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=cn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,O){return!!this.control&&this.control.hasError(V,O)}getError(V,O){return this.control?this.control.getError(V,O):null}}class Dn extends Jn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class On extends Jn{get formDirective(){return null}get path(){return null}}class li{constructor(V){this._cd=V}is(V){var O,ue,ke;return"submitted"===V?!!(null===(O=this._cd)||void 0===O?void 0:O.submitted):!!(null===(ke=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===ke?void 0:ke[V])}}let Fe=(()=>{class K extends li{constructor(O){super(O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(Dn,2))},K.\u0275dir=y.lG2({type:K,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,ue){2&O&&y.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[y.qOj]}),K})(),ze=(()=>{class K extends li{constructor(O){super(O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(On,10))},K.\u0275dir=y.lG2({type:K,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,ue){2&O&&y.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[y.qOj]}),K})();function fi(K,V){Pe(K,V),V.valueAccessor.writeValue(K.value),function he(K,V){V.valueAccessor.registerOnChange(O=>{K._pendingValue=O,K._pendingChange=!0,K._pendingDirty=!0,"change"===K.updateOn&&G(K,V)})}(K,V),function ne(K,V){const O=(ue,ke)=>{V.valueAccessor.writeValue(ue),ke&&V.viewToModelUpdate(ue)};K.registerOnChange(O),V._registerOnDestroy(()=>{K._unregisterOnChange(O)})}(K,V),function ge(K,V){V.valueAccessor.registerOnTouched(()=>{K._pendingTouched=!0,"blur"===K.updateOn&&K._pendingChange&&G(K,V),"submit"!==K.updateOn&&K.markAsTouched()})}(K,V),function zr(K,V){if(V.valueAccessor.setDisabledState){const O=ue=>{V.valueAccessor.setDisabledState(ue)};K.registerOnDisabledChange(O),V._registerOnDestroy(()=>{K._unregisterOnDisabledChange(O)})}}(K,V)}function Fi(K,V,O=!0){const ue=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(ue),V.valueAccessor.registerOnTouched(ue)),Ae(K,V),K&&(V._invokeOnDestroyCallbacks(),K._registerOnCollectionChange(()=>{}))}function Ri(K,V){K.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(V)})}function Pe(K,V){const O=Wn(K);null!==V.validator?K.setValidators(Sn(O,V.validator)):"function"==typeof O&&K.setValidators([O]);const ue=pr(K);null!==V.asyncValidator?K.setAsyncValidators(Sn(ue,V.asyncValidator)):"function"==typeof ue&&K.setAsyncValidators([ue]);const ke=()=>K.updateValueAndValidity();Ri(V._rawValidators,ke),Ri(V._rawAsyncValidators,ke)}function Ae(K,V){let O=!1;if(null!==K){if(null!==V.validator){const ke=Wn(K);if(Array.isArray(ke)&&ke.length>0){const Kt=ke.filter(gi=>gi!==V.validator);Kt.length!==ke.length&&(O=!0,K.setValidators(Kt))}}if(null!==V.asyncValidator){const ke=pr(K);if(Array.isArray(ke)&&ke.length>0){const Kt=ke.filter(gi=>gi!==V.asyncValidator);Kt.length!==ke.length&&(O=!0,K.setAsyncValidators(Kt))}}}const ue=()=>{};return Ri(V._rawValidators,ue),Ri(V._rawAsyncValidators,ue),O}function G(K,V){K._pendingDirty&&K.markAsDirty(),K.setValue(K._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(K._pendingValue),K._pendingChange=!1}function Tt(K,V){const O=K.indexOf(V);O>-1&&K.splice(O,1)}const Dt="VALID",sn="INVALID",Tn="PENDING",ar="DISABLED";function vr(K){return(ms(K)?K.validators:K)||null}function Br(K){return Array.isArray(K)?gt(K):K||null}function ai(K,V){return(ms(V)?V.asyncValidators:K)||null}function es(K){return Array.isArray(K)?cn(K):K||null}function ms(K){return null!=K&&!Array.isArray(K)&&"object"==typeof K}const dr=K=>K instanceof $i,zi=K=>K instanceof xr,Cs=K=>K instanceof ti;function ks(K){return dr(K)?K.value:K.getRawValue()}function Mr(K,V){const O=zi(K),ue=K.controls;if(!(O?Object.keys(ue):ue).length)throw new y.vHH(1e3,"");if(!ue[V])throw new y.vHH(1001,"")}function _n(K,V){zi(K),K._forEachChild((ue,ke)=>{if(void 0===V[ke])throw new y.vHH(1002,"")})}class ir{constructor(V,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=O,this._composedValidatorFn=Br(this._rawValidators),this._composedAsyncValidatorFn=es(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===Dt}get invalid(){return this.status===sn}get pending(){return this.status==Tn}get disabled(){return this.status===ar}get enabled(){return this.status!==ar}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=Br(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=es(V)}addValidators(V){this.setValidators(Fr(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Fr(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(wn(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(wn(V,this._rawAsyncValidators))}hasValidator(V){return jn(this._rawValidators,V)}hasAsyncValidator(V){return jn(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=Tn,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const O=this._parentMarkedDirty(V.onlySelf);this.status=ar,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:O})),this._onDisabledChange.forEach(ue=>ue(!0))}enable(V={}){const O=this._parentMarkedDirty(V.onlySelf);this.status=Dt,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:O})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dt||this.status===Tn)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ar:Dt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=Tn,this._hasOwnPendingAsyncValidator=!0;const O=nt(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,O={}){this.errors=V,this._updateControlsErrors(!1!==O.emitEvent)}get(V){return function Xr(K,V,O){if(null==V||(Array.isArray(V)||(V=V.split(O)),Array.isArray(V)&&0===V.length))return null;let ue=K;return V.forEach(ke=>{ue=zi(ue)?ue.controls.hasOwnProperty(ke)?ue.controls[ke]:null:Cs(ue)&&ue.at(ke)||null}),ue}(this,V,".")}getError(V,O){const ue=O?this.get(O):this;return ue&&ue.errors?ue.errors[V]:null}hasError(V,O){return!!this.getError(V,O)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?ar:this.errors?sn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tn)?Tn:this._anyControlsHaveStatus(sn)?sn:Dt}_anyControlsHaveStatus(V){return this._anyControls(O=>O.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_isBoxedValue(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){ms(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class $i extends ir{constructor(V=null,O,ue){super(vr(O),ai(ue,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ms(O)&&O.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(V)?V.value:V)}setValue(V,O={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(V,O={}){this.setValue(V,O)}reset(V=this.defaultValue,O={}){this._applyFormState(V),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){Tt(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){Tt(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){this._isBoxedValue(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}}class xr extends ir{constructor(V,O,ue){super(vr(O),ai(ue,O)),this.controls=V,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,O){return this.controls[V]?this.controls[V]:(this.controls[V]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(V,O,ue={}){this.registerControl(V,O),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(V,O={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(V,O,ue={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],O&&this.registerControl(V,O),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,O={}){_n(this,V),Object.keys(V).forEach(ue=>{Mr(this,ue),this.controls[ue].setValue(V[ue],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(V,O={}){null!=V&&(Object.keys(V).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue(V[ue],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(V={},O={}){this._forEachChild((ue,ke)=>{ue.reset(V[ke],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(V,O,ue)=>(V[ue]=ks(O),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(O,ue)=>!!ue._syncPendingControls()||O);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){Object.keys(this.controls).forEach(O=>{const ue=this.controls[O];ue&&V(ue,O)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const O of Object.keys(this.controls)){const ue=this.controls[O];if(this.contains(O)&&V(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},(V,O,ue)=>((O.enabled||this.disabled)&&(V[ue]=O.value),V))}_reduceChildren(V,O){let ue=V;return this._forEachChild((ke,Kt)=>{ue=O(ue,ke,Kt)}),ue}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ti extends ir{constructor(V,O,ue){super(vr(O),ai(ue,O)),this.controls=V,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[V]}push(V,O={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(V,O,ue={}){this.controls.splice(V,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(V,O={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(V,O,ue={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),O&&(this.controls.splice(V,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,O={}){_n(this,V),V.forEach((ue,ke)=>{Mr(this,ke),this.at(ke).setValue(ue,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(V,O={}){null!=V&&(V.forEach((ue,ke)=>{this.at(ke)&&this.at(ke).patchValue(ue,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(V=[],O={}){this._forEachChild((ue,ke)=>{ue.reset(V[ke],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(V=>ks(V))}clear(V={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_syncPendingControls(){let V=this.controls.reduce((O,ue)=>!!ue._syncPendingControls()||O,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){this.controls.forEach((O,ue)=>{V(O,ue)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(O=>O.enabled&&V(O))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}}let ds=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275dir=y.lG2({type:K,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),K})(),fo=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({}),K})();const kr=new y.OlP("NgModelWithFormControlWarning"),io={provide:On,useExisting:(0,y.Gpc)(()=>Vi)};let Vi=(()=>{class K extends On{constructor(O,ue){super(),this.validators=O,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(O),this._setAsyncValidators(ue)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ae(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ue=this.form.get(O.path);return fi(ue,O),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ue}getControl(O){return this.form.get(O.path)}removeControl(O){Fi(O.control||null,O,!1),Tt(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ue){this.form.get(O.path).setValue(ue)}onSubmit(O){return this.submitted=!0,function Jr(K,V){K._syncPendingControls(),V.forEach(O=>{const ue=O.control;"submit"===ue.updateOn&&ue._pendingChange&&(O.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ue=O.control,ke=this.form.get(O.path);ue!==ke&&(Fi(ue||null,O),dr(ke)&&(fi(ke,O),O.control=ke))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ue=this.form.get(O.path);(function se(K,V){Pe(K,V)})(ue,O),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ue=this.form.get(O.path);ue&&function Se(K,V){return Ae(K,V)}(ue,O)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Pe(this.form,this),this._oldForm&&Ae(this._oldForm,this)}_checkFormPresent(){}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(Et,10),y.Y36(pt,10))},K.\u0275dir=y.lG2({type:K,selectors:[["","formGroup",""]],hostBindings:function(O,ue){1&O&&y.NdJ("submit",function(Kt){return ue.onSubmit(Kt)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([io]),y.qOj,y.TTD]}),K})();const so={provide:Dn,useExisting:(0,y.Gpc)(()=>Ss)};let Ss=(()=>{class K extends Dn{constructor(O,ue,ke,Kt,gi){super(),this._ngModelWarningConfig=gi,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ue),this._setAsyncValidators(ke),this.valueAccessor=function Pi(K,V){if(!V)return null;let O,ue,ke;return Array.isArray(V),V.forEach(Kt=>{Kt.constructor===we?O=Kt:function $n(K){return Object.getPrototypeOf(K.constructor)===ft}(Kt)?ue=Kt:ke=Kt}),ke||ue||O||null}(0,Kt)}set isDisabled(O){}ngOnChanges(O){this._added||this._setUpControl(),function Rn(K,V){if(!K.hasOwnProperty("model"))return!1;const O=K.model;return!!O.isFirstChange()||!Object.is(V,O.currentValue)}(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return function Qr(K,V){return[...V.path,K]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return K._ngModelWarningSentOnce=!1,K.\u0275fac=function(O){return new(O||K)(y.Y36(On,13),y.Y36(Et,10),y.Y36(pt,10),y.Y36(ht,10),y.Y36(kr,8))},K.\u0275dir=y.lG2({type:K,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([so]),y.qOj,y.TTD]}),K})(),Ni=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[[fo]]}),K})(),Bn=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[Ni]}),K})(),ns=(()=>{class K{static withConfig(O){return{ngModule:K,providers:[{provide:kr,useValue:O.warnOnNgModelWithFormControl}]}}}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[Ni]}),K})(),ao=(()=>{class K{group(O,ue=null){const ke=this._reduceControls(O);let z,Kt=null,gi=null;return null!=ue&&(function Mo(K){return void 0!==K.asyncValidators||void 0!==K.validators||void 0!==K.updateOn}(ue)?(Kt=null!=ue.validators?ue.validators:null,gi=null!=ue.asyncValidators?ue.asyncValidators:null,z=null!=ue.updateOn?ue.updateOn:void 0):(Kt=null!=ue.validator?ue.validator:null,gi=null!=ue.asyncValidator?ue.asyncValidator:null)),new xr(ke,{asyncValidators:gi,updateOn:z,validators:Kt})}control(O,ue,ke){return new $i(O,ue,ke)}array(O,ue,ke){const Kt=O.map(gi=>this._createControl(gi));return new ti(Kt,ue,ke)}_reduceControls(O){const ue={};return Object.keys(O).forEach(ke=>{ue[ke]=this._createControl(O[ke])}),ue}_createControl(O){return dr(O)||zi(O)||Cs(O)?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return K.\u0275fac=function(O){return new(O||K)},K.\u0275prov=y.Yz7({token:K,factory:K.\u0275fac,providedIn:ns}),K})()},2313:(fn,ct,$)=>{$.d(ct,{Dx:()=>On,H7:()=>Pe,b2:()=>jn,q6:()=>pr,se:()=>Nn});var y=$(9808),B=$(5e3);class X extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ie extends X{static makeCurrent(){(0,y.HT)(new ie)}onAndCancel(ne,se,Se){return ne.addEventListener(se,Se,!1),()=>{ne.removeEventListener(se,Se,!1)}}dispatchEvent(ne,se){ne.dispatchEvent(se)}remove(ne){ne.parentNode&&ne.parentNode.removeChild(ne)}createElement(ne,se){return(se=se||this.getDefaultDocument()).createElement(ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ne){return ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(ne){return ne instanceof DocumentFragment}getGlobalEventTarget(ne,se){return"window"===se?window:"document"===se?ne:"body"===se?ne.body:null}getBaseHref(ne){const se=function Ke(){return Ue=Ue||document.querySelector("base"),Ue?Ue.getAttribute("href"):null}();return null==se?null:function Ge(G){Je=Je||document.createElement("a"),Je.setAttribute("href",G);const ne=Je.pathname;return"/"===ne.charAt(0)?ne:`/${ne}`}(se)}resetBaseElement(){Ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(ne){return(0,y.Mx)(document.cookie,ne)}}let Je,Ue=null;const at=new B.OlP("TRANSITION_ID"),Ce=[{provide:B.ip1,useFactory:function be(G,ne,se){return()=>{se.get(B.CZH).donePromise.then(()=>{const Se=(0,y.q)(),dt=ne.querySelectorAll(`style[ng-transition="${G}"]`);for(let zt=0;zt<dt.length;zt++)Se.remove(dt[zt])})}},deps:[at,y.K0,B.zs3],multi:!0}];class tt{static init(){(0,B.VLi)(new tt)}addToWindow(ne){B.dqk.getAngularTestability=(Se,dt=!0)=>{const zt=ne.findTestabilityInTree(Se,dt);if(null==zt)throw new Error("Could not find testability for element.");return zt},B.dqk.getAllAngularTestabilities=()=>ne.getAllTestabilities(),B.dqk.getAllAngularRootElements=()=>ne.getAllRootElements(),B.dqk.frameworkStabilizers||(B.dqk.frameworkStabilizers=[]),B.dqk.frameworkStabilizers.push(Se=>{const dt=B.dqk.getAllAngularTestabilities();let zt=dt.length,gn=!1;const un=function(Rn){gn=gn||Rn,zt--,0==zt&&Se(gn)};dt.forEach(function(Rn){Rn.whenStable(un)})})}findTestabilityInTree(ne,se,Se){if(null==se)return null;const dt=ne.getTestability(se);return null!=dt?dt:Se?(0,y.q)().isShadowRoot(se)?this.findTestabilityInTree(ne,se.host,!0):this.findTestabilityInTree(ne,se.parentElement,!0):null}}let Lt=(()=>{class G{build(){return new XMLHttpRequest}}return G.\u0275fac=function(se){return new(se||G)},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();const ft=new B.OlP("EventManagerPlugins");let ht=(()=>{class G{constructor(se,Se){this._zone=Se,this._eventNameToPlugin=new Map,se.forEach(dt=>dt.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,Se,dt){return this._findPluginFor(Se).addEventListener(se,Se,dt)}addGlobalEventListener(se,Se,dt){return this._findPluginFor(Se).addGlobalEventListener(se,Se,dt)}getZone(){return this._zone}_findPluginFor(se){const Se=this._eventNameToPlugin.get(se);if(Se)return Se;const dt=this._plugins;for(let zt=0;zt<dt.length;zt++){const gn=dt[zt];if(gn.supports(se))return this._eventNameToPlugin.set(se,gn),gn}throw new Error(`No event manager plugin found for event ${se}`)}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(ft),B.LFG(B.R0b))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();class Bt{constructor(ne){this._doc=ne}addGlobalEventListener(ne,se,Se){const dt=(0,y.q)().getGlobalEventTarget(this._doc,ne);if(!dt)throw new Error(`Unsupported event target ${dt} for event ${se}`);return this.addEventListener(dt,se,Se)}}let mt=(()=>{class G{constructor(){this._stylesSet=new Set}addStyles(se){const Se=new Set;se.forEach(dt=>{this._stylesSet.has(dt)||(this._stylesSet.add(dt),Se.add(dt))}),this.onStylesAdded(Se)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return G.\u0275fac=function(se){return new(se||G)},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})(),Ft=(()=>{class G extends mt{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,Se,dt){se.forEach(zt=>{const gn=this._doc.createElement("style");gn.textContent=zt,dt.push(Se.appendChild(gn))})}addHost(se){const Se=[];this._addStylesToHost(this._stylesSet,se,Se),this._hostNodes.set(se,Se)}removeHost(se){const Se=this._hostNodes.get(se);Se&&Se.forEach(dn),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((Se,dt)=>{this._addStylesToHost(se,dt,Se)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(dn))}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();function dn(G){(0,y.q)().remove(G)}const Xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},we=/%COMP%/g;function bt(G,ne,se){for(let Se=0;Se<ne.length;Se++){let dt=ne[Se];Array.isArray(dt)?bt(G,dt,se):(dt=dt.replace(we,G),se.push(dt))}return se}function Fn(G){return ne=>{if("__ngUnwrap__"===ne)return G;!1===G(ne)&&(ne.preventDefault(),ne.returnValue=!1)}}let Nn=(()=>{class G{constructor(se,Se,dt){this.eventManager=se,this.sharedStylesHost=Se,this.appId=dt,this.rendererByCompId=new Map,this.defaultRenderer=new rn(se)}createRenderer(se,Se){if(!se||!Se)return this.defaultRenderer;switch(Se.encapsulation){case B.ifc.Emulated:{let dt=this.rendererByCompId.get(Se.id);return dt||(dt=new fr(this.eventManager,this.sharedStylesHost,Se,this.appId),this.rendererByCompId.set(Se.id,dt)),dt.applyToHost(se),dt}case 1:case B.ifc.ShadowDom:return new Xn(this.eventManager,this.sharedStylesHost,se,Se);default:if(!this.rendererByCompId.has(Se.id)){const dt=bt(Se.id,Se.styles,[]);this.sharedStylesHost.addStyles(dt),this.rendererByCompId.set(Se.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(ht),B.LFG(Ft),B.LFG(B.AFp))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();class rn{constructor(ne){this.eventManager=ne,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ne,se){return se?document.createElementNS(Xt[se]||se,ne):document.createElement(ne)}createComment(ne){return document.createComment(ne)}createText(ne){return document.createTextNode(ne)}appendChild(ne,se){ne.appendChild(se)}insertBefore(ne,se,Se){ne&&ne.insertBefore(se,Se)}removeChild(ne,se){ne&&ne.removeChild(se)}selectRootElement(ne,se){let Se="string"==typeof ne?document.querySelector(ne):ne;if(!Se)throw new Error(`The selector "${ne}" did not match any elements`);return se||(Se.textContent=""),Se}parentNode(ne){return ne.parentNode}nextSibling(ne){return ne.nextSibling}setAttribute(ne,se,Se,dt){if(dt){se=dt+":"+se;const zt=Xt[dt];zt?ne.setAttributeNS(zt,se,Se):ne.setAttribute(se,Se)}else ne.setAttribute(se,Se)}removeAttribute(ne,se,Se){if(Se){const dt=Xt[Se];dt?ne.removeAttributeNS(dt,se):ne.removeAttribute(`${Se}:${se}`)}else ne.removeAttribute(se)}addClass(ne,se){ne.classList.add(se)}removeClass(ne,se){ne.classList.remove(se)}setStyle(ne,se,Se,dt){dt&(B.JOm.DashCase|B.JOm.Important)?ne.style.setProperty(se,Se,dt&B.JOm.Important?"important":""):ne.style[se]=Se}removeStyle(ne,se,Se){Se&B.JOm.DashCase?ne.style.removeProperty(se):ne.style[se]=""}setProperty(ne,se,Se){ne[se]=Se}setValue(ne,se){ne.nodeValue=se}listen(ne,se,Se){return"string"==typeof ne?this.eventManager.addGlobalEventListener(ne,se,Fn(Se)):this.eventManager.addEventListener(ne,se,Fn(Se))}}class fr extends rn{constructor(ne,se,Se,dt){super(ne),this.component=Se;const zt=bt(dt+"-"+Se.id,Se.styles,[]);se.addStyles(zt),this.contentAttr=function et(G){return"_ngcontent-%COMP%".replace(we,G)}(dt+"-"+Se.id),this.hostAttr=function Ut(G){return"_nghost-%COMP%".replace(we,G)}(dt+"-"+Se.id)}applyToHost(ne){super.setAttribute(ne,this.hostAttr,"")}createElement(ne,se){const Se=super.createElement(ne,se);return super.setAttribute(Se,this.contentAttr,""),Se}}class Xn extends rn{constructor(ne,se,Se,dt){super(ne),this.sharedStylesHost=se,this.hostEl=Se,this.shadowRoot=Se.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const zt=bt(dt.id,dt.styles,[]);for(let gn=0;gn<zt.length;gn++){const un=document.createElement("style");un.textContent=zt[gn],this.shadowRoot.appendChild(un)}}nodeOrShadowRoot(ne){return ne===this.hostEl?this.shadowRoot:ne}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ne,se){return super.appendChild(this.nodeOrShadowRoot(ne),se)}insertBefore(ne,se,Se){return super.insertBefore(this.nodeOrShadowRoot(ne),se,Se)}removeChild(ne,se){return super.removeChild(this.nodeOrShadowRoot(ne),se)}parentNode(ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ne)))}}let an=(()=>{class G extends Bt{constructor(se){super(se)}supports(se){return!0}addEventListener(se,Se,dt){return se.addEventListener(Se,dt,!1),()=>this.removeEventListener(se,Se,dt)}removeEventListener(se,Se,dt){return se.removeEventListener(Se,dt)}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();const nt=["alt","control","meta","shift"],ve={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},De={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ee={alt:G=>G.altKey,control:G=>G.ctrlKey,meta:G=>G.metaKey,shift:G=>G.shiftKey};let xe=(()=>{class G extends Bt{constructor(se){super(se)}supports(se){return null!=G.parseEventName(se)}addEventListener(se,Se,dt){const zt=G.parseEventName(Se),gn=G.eventCallback(zt.fullKey,dt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(se,zt.domEventName,gn))}static parseEventName(se){const Se=se.toLowerCase().split("."),dt=Se.shift();if(0===Se.length||"keydown"!==dt&&"keyup"!==dt)return null;const zt=G._normalizeKey(Se.pop());let gn="";if(nt.forEach(Rn=>{const $n=Se.indexOf(Rn);$n>-1&&(Se.splice($n,1),gn+=Rn+".")}),gn+=zt,0!=Se.length||0===zt.length)return null;const un={};return un.domEventName=dt,un.fullKey=gn,un}static getEventFullKey(se){let Se="",dt=function gt(G){let ne=G.key;if(null==ne){if(ne=G.keyIdentifier,null==ne)return"Unidentified";ne.startsWith("U+")&&(ne=String.fromCharCode(parseInt(ne.substring(2),16)),3===G.location&&De.hasOwnProperty(ne)&&(ne=De[ne]))}return ve[ne]||ne}(se);return dt=dt.toLowerCase()," "===dt?dt="space":"."===dt&&(dt="dot"),nt.forEach(zt=>{zt!=dt&&Ee[zt](se)&&(Se+=zt+".")}),Se+=dt,Se}static eventCallback(se,Se,dt){return zt=>{G.getEventFullKey(zt)===se&&dt.runGuarded(()=>Se(zt))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();const pr=(0,B.eFA)(B._c5,"browser",[{provide:B.Lbi,useValue:y.bD},{provide:B.g9A,useValue:function tn(){ie.makeCurrent(),tt.init()},multi:!0},{provide:y.K0,useFactory:function Sn(){return(0,B.RDi)(document),document},deps:[]}]),or=[{provide:B.zSh,useValue:"root"},{provide:B.qLn,useFactory:function cn(){return new B.qLn},deps:[]},{provide:ft,useClass:an,multi:!0,deps:[y.K0,B.R0b,B.Lbi]},{provide:ft,useClass:xe,multi:!0,deps:[y.K0]},{provide:Nn,useClass:Nn,deps:[ht,Ft,B.AFp]},{provide:B.FYo,useExisting:Nn},{provide:mt,useExisting:Ft},{provide:Ft,useClass:Ft,deps:[y.K0]},{provide:B.dDg,useClass:B.dDg,deps:[B.R0b]},{provide:ht,useClass:ht,deps:[ft,B.R0b]},{provide:y.JF,useClass:Lt,deps:[]}];let jn=(()=>{class G{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:G,providers:[{provide:B.AFp,useValue:se.appId},{provide:at,useExisting:B.AFp},Ce]}}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(G,12))},G.\u0275mod=B.oAB({type:G}),G.\u0275inj=B.cJS({providers:or,imports:[y.ez,B.hGG]}),G})(),On=(()=>{class G{constructor(se){this._doc=se}getTitle(){return this._doc.title}setTitle(se){this._doc.title=se||""}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:function(se){let Se=null;return Se=se?new se:function Dn(){return new On((0,B.LFG)(y.K0))}(),Se},providedIn:"root"}),G})();"undefined"!=typeof window&&window;let Pe=(()=>{class G{}return G.\u0275fac=function(se){return new(se||G)},G.\u0275prov=B.Yz7({token:G,factory:function(se){let Se=null;return Se=se?new(se||G):B.LFG(he),Se},providedIn:"root"}),G})(),he=(()=>{class G extends Pe{constructor(se){super(),this._doc=se}sanitize(se,Se){if(null==Se)return null;switch(se){case B.q3G.NONE:return Se;case B.q3G.HTML:return(0,B.qzn)(Se,"HTML")?(0,B.z3N)(Se):(0,B.EiD)(this._doc,String(Se)).toString();case B.q3G.STYLE:return(0,B.qzn)(Se,"Style")?(0,B.z3N)(Se):Se;case B.q3G.SCRIPT:if((0,B.qzn)(Se,"Script"))return(0,B.z3N)(Se);throw new Error("unsafe value used in a script context");case B.q3G.URL:return(0,B.yhl)(Se),(0,B.qzn)(Se,"URL")?(0,B.z3N)(Se):(0,B.mCW)(String(Se));case B.q3G.RESOURCE_URL:if((0,B.qzn)(Se,"ResourceURL"))return(0,B.z3N)(Se);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,B.JVY)(se)}bypassSecurityTrustStyle(se){return(0,B.L6k)(se)}bypassSecurityTrustScript(se){return(0,B.eBb)(se)}bypassSecurityTrustUrl(se){return(0,B.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,B.pB0)(se)}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:function(se){let Se=null;return Se=se?new se:function Ae(G){return new he(G.get(y.K0))}(B.LFG(B.zs3)),Se},providedIn:"root"}),G})()},2729:(fn,ct,$)=>{$.d(ct,{gz:()=>Xe,F0:()=>Zi,rH:()=>go,yS:()=>Go,Bz:()=>fa,lC:()=>Eo});var y=$(5e3),B=$(8996),X=$(9646),ie=$(7579);class Ue extends ie.x{constructor(D){super(),this._value=D}get value(){return this.getValue()}_subscribe(D){const I=super._subscribe(D);return!I.closed&&D.next(this._value),I}getValue(){const{hasError:D,thrownError:I,_value:U}=this;if(D)throw I;return this._throwIfClosed(),U}next(D){super.next(this._value=D)}}var Ke=$(8306),Je=$(4742),Ge=$(4671),at=$(3268),be=$(7669),Ce=$(1810),tt=$(5403),Lt=$(9672);function Bt(x,D,I){x?(0,Lt.f)(I,x,D):D()}var mt=$(2843),Ft=$(6805),dn=$(7272),Xt=$(8421);function we(x){return new Ke.y(D=>{(0,Xt.Xf)(x()).subscribe(D)})}var Me=$(515),it=$(727),Et=$(4482);function pt(){return(0,Et.e)((x,D)=>{let I=null;x._refCount++;const U=(0,tt.x)(D,void 0,void 0,void 0,()=>{if(!x||x._refCount<=0||0<--x._refCount)return void(I=null);const Y=x._connection,le=I;I=null,Y&&(!le||Y===le)&&Y.unsubscribe(),D.unsubscribe()});x.subscribe(U),U.closed||(I=x.connect())})}class et extends Ke.y{constructor(D,I){super(),this.source=D,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Et.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,null==D||D.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new it.w0;const I=this.getSubject();D.add(this.source.subscribe((0,tt.x)(I,void 0,()=>{this._teardown(),I.complete()},U=>{this._teardown(),I.error(U)},()=>this._teardown()))),D.closed&&(this._connection=null,D=it.w0.EMPTY)}return D}refCount(){return pt()(this)}}var Ut=$(4004),bt=$(3900),Fn=$(5698),Ht=$(8675),Nn=$(5026),rn=$(9300),Zr=$(262),Ln=$(4351);function fr(x){return x<=0?()=>Me.E:(0,Et.e)((D,I)=>{let U=[];D.subscribe((0,tt.x)(I,Y=>{U.push(Y),x<U.length&&U.shift()},()=>{for(const Y of U)I.next(Y);I.complete()},void 0,()=>{U=null}))})}var Xn=$(8068),an=$(6590),Qe=$(590),ve=$(5577),De=$(8505),xe=$(8189),gt=$(9808);class tn{constructor(D,I){this.id=D,this.url=I}}class cn extends tn{constructor(D,I,U="imperative",Y=null){super(D,I),this.navigationTrigger=U,this.restoredState=Y}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sn extends tn{constructor(D,I,U){super(D,I),this.urlAfterRedirects=U}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wn extends tn{constructor(D,I,U){super(D,I),this.reason=U}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pr extends tn{constructor(D,I,U){super(D,I),this.error=U}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class or extends tn{constructor(D,I,U,Y){super(D,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends tn{constructor(D,I,U,Y){super(D,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends tn{constructor(D,I,U,Y,le){super(D,I),this.urlAfterRedirects=U,this.state=Y,this.shouldActivate=le}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wn extends tn{constructor(D,I,U,Y){super(D,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jn extends tn{constructor(D,I,U,Y){super(D,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dn{constructor(D){this.route=D}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class On{constructor(D){this.route=D}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class li{constructor(D){this.snapshot=D}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(D){this.snapshot=D}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pt{constructor(D){this.snapshot=D}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(D){this.snapshot=D}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ze{constructor(D,I,U){this.routerEvent=D,this.position=I,this.anchor=U}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lt="primary";class At{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I[0]:I}return null}getAll(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Wt(x){return new At(x)}const nn="ngNavigationCancelingError";function Ur(x){const D=Error("NavigationCancelingError: "+x);return D[nn]=!0,D}function Mn(x,D,I){const U=I.path.split("/");if(U.length>x.length||"full"===I.pathMatch&&(D.hasChildren()||U.length<x.length))return null;const Y={};for(let le=0;le<U.length;le++){const Re=U[le],We=x[le];if(Re.startsWith(":"))Y[Re.substring(1)]=We;else if(Re!==We.path)return null}return{consumed:x.slice(0,U.length),posParams:Y}}function Tr(x,D){const I=x?Object.keys(x):void 0,U=D?Object.keys(D):void 0;if(!I||!U||I.length!=U.length)return!1;let Y;for(let le=0;le<I.length;le++)if(Y=I[le],!Ar(x[Y],D[Y]))return!1;return!0}function Ar(x,D){if(Array.isArray(x)&&Array.isArray(D)){if(x.length!==D.length)return!1;const I=[...x].sort(),U=[...D].sort();return I.every((Y,le)=>U[le]===Y)}return x===D}function Yt(x){return Array.prototype.concat.apply([],x)}function Rr(x){return x.length>0?x[x.length-1]:null}function _r(x,D){for(const I in x)x.hasOwnProperty(I)&&D(x[I],I)}function tr(x){return(0,y.CqO)(x)?x:(0,y.QGY)(x)?(0,B.D)(Promise.resolve(x)):(0,X.of)(x)}const Qr={exact:function zr(x,D,I){if(!dt(x.segments,D.segments)||!ge(x.segments,D.segments,I)||x.numberOfChildren!==D.numberOfChildren)return!1;for(const U in D.children)if(!x.children[U]||!zr(x.children[U],D.children[U],I))return!1;return!0},subset:Ae},fi={exact:function Ri(x,D){return Tr(x,D)},subset:function Pe(x,D){return Object.keys(D).length<=Object.keys(x).length&&Object.keys(D).every(I=>Ar(x[I],D[I]))},ignored:()=>!0};function Fi(x,D,I){return Qr[I.paths](x.root,D.root,I.matrixParams)&&fi[I.queryParams](x.queryParams,D.queryParams)&&!("exact"===I.fragment&&x.fragment!==D.fragment)}function Ae(x,D,I){return he(x,D,D.segments,I)}function he(x,D,I,U){if(x.segments.length>I.length){const Y=x.segments.slice(0,I.length);return!(!dt(Y,I)||D.hasChildren()||!ge(Y,I,U))}if(x.segments.length===I.length){if(!dt(x.segments,I)||!ge(x.segments,I,U))return!1;for(const Y in D.children)if(!x.children[Y]||!Ae(x.children[Y],D.children[Y],U))return!1;return!0}{const Y=I.slice(0,x.segments.length),le=I.slice(x.segments.length);return!!(dt(x.segments,Y)&&ge(x.segments,Y,U)&&x.children[lt])&&he(x.children[lt],D,le,U)}}function ge(x,D,I){return D.every((U,Y)=>fi[I](x[Y].parameters,U.parameters))}class G{constructor(D,I,U){this.root=D,this.queryParams=I,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return Rn.serialize(this)}}class ne{constructor(D,I){this.segments=D,this.children=I,this.parent=null,_r(I,(U,Y)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $n(this)}}class se{constructor(D,I){this.path=D,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Wt(this.parameters)),this._parameterMap}toString(){return Tn(this)}}function dt(x,D){return x.length===D.length&&x.every((I,U)=>I.path===D[U].path)}class gn{}class un{parse(D){const I=new zi(D);return new G(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(D){const I=`/${Jr(D.root,!0)}`,U=function Xr(x){const D=Object.keys(x).map(I=>{const U=x[I];return Array.isArray(U)?U.map(Y=>`${Tt(I)}=${Tt(Y)}`).join("&"):`${Tt(I)}=${Tt(U)}`}).filter(I=>!!I);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${I}${U}${"string"==typeof D.fragment?`#${function yt(x){return encodeURI(x)}(D.fragment)}`:""}`}}const Rn=new un;function $n(x){return x.segments.map(D=>Tn(D)).join("/")}function Jr(x,D){if(!x.hasChildren())return $n(x);if(D){const I=x.children[lt]?Jr(x.children[lt],!1):"",U=[];return _r(x.children,(Y,le)=>{le!==lt&&U.push(`${le}:${Jr(Y,!1)}`)}),U.length>0?`${I}(${U.join("//")})`:I}{const I=function zt(x,D){let I=[];return _r(x.children,(U,Y)=>{Y===lt&&(I=I.concat(D(U,Y)))}),_r(x.children,(U,Y)=>{Y!==lt&&(I=I.concat(D(U,Y)))}),I}(x,(U,Y)=>Y===lt?[Jr(x.children[lt],!1)]:[`${Y}:${Jr(U,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[lt]?`${$n(x)}/${I[0]}`:`${$n(x)}/(${I.join("//")})`}}function Pi(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tt(x){return Pi(x).replace(/%3B/gi,";")}function Vt(x){return Pi(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dt(x){return decodeURIComponent(x)}function sn(x){return Dt(x.replace(/\+/g,"%20"))}function Tn(x){return`${Vt(x.path)}${function ar(x){return Object.keys(x).map(D=>`;${Vt(D)}=${Vt(x[D])}`).join("")}(x.parameters)}`}const vr=/^[^\/()?;=#]+/;function Br(x){const D=x.match(vr);return D?D[0]:""}const ai=/^[^=?&#]+/,ms=/^[^&#]+/;class zi{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(D.length>0||Object.keys(I).length>0)&&(U[lt]=new ne(D,I)),U}parseSegment(){const D=Br(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(D),new se(Dt(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const I=Br(this.remaining);if(!I)return;this.capture(I);let U="";if(this.consumeOptional("=")){const Y=Br(this.remaining);Y&&(U=Y,this.capture(U))}D[Dt(I)]=Dt(U)}parseQueryParam(D){const I=function es(x){const D=x.match(ai);return D?D[0]:""}(this.remaining);if(!I)return;this.capture(I);let U="";if(this.consumeOptional("=")){const Re=function dr(x){const D=x.match(ms);return D?D[0]:""}(this.remaining);Re&&(U=Re,this.capture(U))}const Y=sn(I),le=sn(U);if(D.hasOwnProperty(Y)){let Re=D[Y];Array.isArray(Re)||(Re=[Re],D[Y]=Re),Re.push(le)}else D[Y]=le}parseParens(D){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=Br(this.remaining),Y=this.remaining[U.length];if("/"!==Y&&")"!==Y&&";"!==Y)throw new Error(`Cannot parse url '${this.url}'`);let le;U.indexOf(":")>-1?(le=U.substr(0,U.indexOf(":")),this.capture(le),this.capture(":")):D&&(le=lt);const Re=this.parseChildren();I[le]=1===Object.keys(Re).length?Re[lt]:new ne([],Re),this.consumeOptional("//")}return I}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new Error(`Expected "${D}".`)}}class Cs{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const I=this.pathFromRoot(D);return I.length>1?I[I.length-2]:null}children(D){const I=ks(D,this._root);return I?I.children.map(U=>U.value):[]}firstChild(D){const I=ks(D,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(D){const I=Mr(D,this._root);return I.length<2?[]:I[I.length-2].children.map(Y=>Y.value).filter(Y=>Y!==D)}pathFromRoot(D){return Mr(D,this._root).map(I=>I.value)}}function ks(x,D){if(x===D.value)return D;for(const I of D.children){const U=ks(x,I);if(U)return U}return null}function Mr(x,D){if(x===D.value)return[D];for(const I of D.children){const U=Mr(x,I);if(U.length)return U.unshift(D),U}return[]}class _n{constructor(D,I){this.value=D,this.children=I}toString(){return`TreeNode(${this.value})`}}function ir(x){const D={};return x&&x.children.forEach(I=>D[I.value.outlet]=I),D}class $i extends Cs{constructor(D,I){super(D),this.snapshot=I,In(this,D)}toString(){return this.snapshot.toString()}}function xr(x,D){const I=function ti(x,D){const Re=new _t([],{},{},"",{},lt,D,null,x.root,-1,{});return new Ot("",new _n(Re,[]))}(x,D),U=new Ue([new se("",{})]),Y=new Ue({}),le=new Ue({}),Re=new Ue({}),We=new Ue(""),$e=new Xe(U,Y,Re,We,le,lt,D,I.root);return $e.snapshot=I.root,new $i(new _n($e,[]),I)}class Xe{constructor(D,I,U,Y,le,Re,We,$e){this.url=D,this.params=I,this.queryParams=U,this.fragment=Y,this.data=le,this.outlet=Re,this.component=We,this._futureSnapshot=$e}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ut.U)(D=>Wt(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ut.U)(D=>Wt(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ze(x,D="emptyOnly"){const I=x.pathFromRoot;let U=0;if("always"!==D)for(U=I.length-1;U>=1;){const Y=I[U],le=I[U-1];if(Y.routeConfig&&""===Y.routeConfig.path)U--;else{if(le.component)break;U--}}return function rt(x){return x.reduce((D,I)=>({params:Object.assign(Object.assign({},D.params),I.params),data:Object.assign(Object.assign({},D.data),I.data),resolve:Object.assign(Object.assign({},D.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(U))}class _t{constructor(D,I,U,Y,le,Re,We,$e,en,yr,Kn){this.url=D,this.params=I,this.queryParams=U,this.fragment=Y,this.data=le,this.outlet=Re,this.component=We,this.routeConfig=$e,this._urlSegment=en,this._lastPathIndex=yr,this._resolve=Kn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ot extends Cs{constructor(D,I){super(I),this.url=D,In(this,I)}toString(){return Lr(this._root)}}function In(x,D){D.value._routerState=x,D.children.forEach(I=>In(x,I))}function Lr(x){const D=x.children.length>0?` { ${x.children.map(Lr).join(", ")} } `:"";return`${x.value}${D}`}function hr(x){if(x.snapshot){const D=x.snapshot,I=x._futureSnapshot;x.snapshot=I,Tr(D.queryParams,I.queryParams)||x.queryParams.next(I.queryParams),D.fragment!==I.fragment&&x.fragment.next(I.fragment),Tr(D.params,I.params)||x.params.next(I.params),function ci(x,D){if(x.length!==D.length)return!1;for(let I=0;I<x.length;++I)if(!Tr(x[I],D[I]))return!1;return!0}(D.url,I.url)||x.url.next(I.url),Tr(D.data,I.data)||x.data.next(I.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function br(x,D){const I=Tr(x.params,D.params)&&function Se(x,D){return dt(x,D)&&x.every((I,U)=>Tr(I.parameters,D[U].parameters))}(x.url,D.url);return I&&!(!x.parent!=!D.parent)&&(!x.parent||br(x.parent,D.parent))}function Ks(x,D,I){if(I&&x.shouldReuseRoute(D.value,I.value.snapshot)){const U=I.value;U._futureSnapshot=D.value;const Y=function ui(x,D,I){return D.children.map(U=>{for(const Y of I.children)if(x.shouldReuseRoute(U.value,Y.value.snapshot))return Ks(x,U,Y);return Ks(x,U)})}(x,D,I);return new _n(U,Y)}{if(x.shouldAttach(D.value)){const le=x.retrieve(D.value);if(null!==le){const Re=le.route;return Re.value._futureSnapshot=D.value,Re.children=D.children.map(We=>Ks(x,We)),Re}}const U=function Wi(x){return new Xe(new Ue(x.url),new Ue(x.params),new Ue(x.queryParams),new Ue(x.fragment),new Ue(x.data),x.outlet,x.component,x)}(D.value),Y=D.children.map(le=>Ks(x,le));return new _n(U,Y)}}function Fs(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function os(x){return"object"==typeof x&&null!=x&&x.outlets}function ho(x,D,I,U,Y){let le={};if(U&&_r(U,(We,$e)=>{le[$e]=Array.isArray(We)?We.map(en=>`${en}`):`${We}`}),x===D)return new G(I,le,Y);const Re=So(x,D,I);return new G(Re,le,Y)}function So(x,D,I){const U={};return _r(x.children,(Y,le)=>{U[le]=Y===D?I:So(Y,D,I)}),new ne(x.segments,U)}class fo{constructor(D,I,U){if(this.isAbsolute=D,this.numberOfDoubleDots=I,this.commands=U,D&&U.length>0&&Fs(U[0]))throw new Error("Root segment cannot have matrix parameters");const Y=U.find(os);if(Y&&Y!==Rr(U))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ao{constructor(D,I,U){this.segmentGroup=D,this.processChildren=I,this.index=U}}function Ls(x,D,I){if(x||(x=new ne([],{})),0===x.segments.length&&x.hasChildren())return ro(x,D,I);const U=function io(x,D,I){let U=0,Y=D;const le={match:!1,pathIndex:0,commandIndex:0};for(;Y<x.segments.length;){if(U>=I.length)return le;const Re=x.segments[Y],We=I[U];if(os(We))break;const $e=`${We}`,en=U<I.length-1?I[U+1]:null;if(Y>0&&void 0===$e)break;if($e&&en&&"object"==typeof en&&void 0===en.outlets){if(!Pa($e,en,Re))return le;U+=2}else{if(!Pa($e,{},Re))return le;U++}Y++}return{match:!0,pathIndex:Y,commandIndex:U}}(x,D,I),Y=I.slice(U.commandIndex);if(U.match&&U.pathIndex<x.segments.length){const le=new ne(x.segments.slice(0,U.pathIndex),{});return le.children[lt]=new ne(x.segments.slice(U.pathIndex),x.children),ro(le,0,Y)}return U.match&&0===Y.length?new ne(x.segments,{}):U.match&&!x.hasChildren()?Vi(x,D,I):U.match?ro(x,0,Y):Vi(x,D,I)}function ro(x,D,I){if(0===I.length)return new ne(x.segments,{});{const U=function kr(x){return os(x[0])?x[0].outlets:{[lt]:x}}(I),Y={};return _r(U,(le,Re)=>{"string"==typeof le&&(le=[le]),null!==le&&(Y[Re]=Ls(x.children[Re],D,le))}),_r(x.children,(le,Re)=>{void 0===U[Re]&&(Y[Re]=le)}),new ne(x.segments,Y)}}function Vi(x,D,I){const U=x.segments.slice(0,D);let Y=0;for(;Y<I.length;){const le=I[Y];if(os(le)){const $e=Vs(le.outlets);return new ne(U,$e)}if(0===Y&&Fs(I[0])){U.push(new se(x.segments[D].path,Gi(I[0]))),Y++;continue}const Re=os(le)?le.outlets[lt]:`${le}`,We=Y<I.length-1?I[Y+1]:null;Re&&We&&Fs(We)?(U.push(new se(Re,Gi(We))),Y+=2):(U.push(new se(Re,{})),Y++)}return new ne(U,{})}function Vs(x){const D={};return _r(x,(I,U)=>{"string"==typeof I&&(I=[I]),null!==I&&(D[U]=Vi(new ne([],{}),0,I))}),D}function Gi(x){const D={};return _r(x,(I,U)=>D[U]=`${I}`),D}function Pa(x,D,I){return x==I.path&&Tr(D,I.parameters)}class Uo{constructor(D,I,U,Y){this.routeReuseStrategy=D,this.futureState=I,this.currState=U,this.forwardEvent=Y}activate(D){const I=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,U,D),hr(this.futureState.root),this.activateChildRoutes(I,U,D)}deactivateChildRoutes(D,I,U){const Y=ir(I);D.children.forEach(le=>{const Re=le.value.outlet;this.deactivateRoutes(le,Y[Re],U),delete Y[Re]}),_r(Y,(le,Re)=>{this.deactivateRouteAndItsChildren(le,U)})}deactivateRoutes(D,I,U){const Y=D.value,le=I?I.value:null;if(Y===le)if(Y.component){const Re=U.getContext(Y.outlet);Re&&this.deactivateChildRoutes(D,I,Re.children)}else this.deactivateChildRoutes(D,I,U);else le&&this.deactivateRouteAndItsChildren(I,U)}deactivateRouteAndItsChildren(D,I){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,I):this.deactivateRouteAndOutlet(D,I)}detachAndStoreRouteSubtree(D,I){const U=I.getContext(D.value.outlet),Y=U&&D.value.component?U.children:I,le=ir(D);for(const Re of Object.keys(le))this.deactivateRouteAndItsChildren(le[Re],Y);if(U&&U.outlet){const Re=U.outlet.detach(),We=U.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:Re,route:D,contexts:We})}}deactivateRouteAndOutlet(D,I){const U=I.getContext(D.value.outlet),Y=U&&D.value.component?U.children:I,le=ir(D);for(const Re of Object.keys(le))this.deactivateRouteAndItsChildren(le[Re],Y);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(D,I,U){const Y=ir(I);D.children.forEach(le=>{this.activateRoutes(le,Y[le.value.outlet],U),this.forwardEvent(new Fe(le.value.snapshot))}),D.children.length&&this.forwardEvent(new Xi(D.value.snapshot))}activateRoutes(D,I,U){const Y=D.value,le=I?I.value:null;if(hr(Y),Y===le)if(Y.component){const Re=U.getOrCreateContext(Y.outlet);this.activateChildRoutes(D,I,Re.children)}else this.activateChildRoutes(D,I,U);else if(Y.component){const Re=U.getOrCreateContext(Y.outlet);if(this.routeReuseStrategy.shouldAttach(Y.snapshot)){const We=this.routeReuseStrategy.retrieve(Y.snapshot);this.routeReuseStrategy.store(Y.snapshot,null),Re.children.onOutletReAttached(We.contexts),Re.attachRef=We.componentRef,Re.route=We.route.value,Re.outlet&&Re.outlet.attach(We.componentRef,We.route.value),hr(We.route.value),this.activateChildRoutes(D,null,Re.children)}else{const We=function so(x){for(let D=x.parent;D;D=D.parent){const I=D.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(Y.snapshot),$e=We?We.module.componentFactoryResolver:null;Re.attachRef=null,Re.route=Y,Re.resolver=$e,Re.outlet&&Re.outlet.activateWith(Y,$e),this.activateChildRoutes(D,null,Re.children)}}else this.activateChildRoutes(D,null,U)}}class Ss{constructor(D,I){this.routes=D,this.module=I}}function As(x){return"function"==typeof x}function ys(x){return x instanceof G}const Ki=Symbol("INITIAL_VALUE");function Bs(){return(0,bt.w)(x=>function ft(...x){const D=(0,be.yG)(x),I=(0,be.jO)(x),{args:U,keys:Y}=(0,Je.D)(x);if(0===U.length)return(0,B.D)([],D);const le=new Ke.y(function ht(x,D,I=Ge.y){return U=>{Bt(D,()=>{const{length:Y}=x,le=new Array(Y);let Re=Y,We=Y;for(let $e=0;$e<Y;$e++)Bt(D,()=>{const en=(0,B.D)(x[$e],D);let yr=!1;en.subscribe((0,tt.x)(U,Kn=>{le[$e]=Kn,yr||(yr=!0,We--),We||U.next(I(le.slice()))},()=>{--Re||U.complete()}))},U)},U)}}(U,D,Y?Re=>(0,Ce.n)(Y,Re):Ge.y));return I?le.pipe((0,at.Z)(I)):le}(x.map(D=>D.pipe((0,Fn.q)(1),(0,Ht.O)(Ki)))).pipe((0,Nn.R)((D,I)=>{let U=!1;return I.reduce((Y,le,Re)=>Y!==Ki?Y:(le===Ki&&(U=!0),U||!1!==le&&Re!==I.length-1&&!ys(le)?Y:le),D)},Ki),(0,rn.h)(D=>D!==Ki),(0,Ut.U)(D=>ys(D)?D:!0===D),(0,Fn.q)(1)))}class Is{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ii,this.attachRef=null}}class ii{constructor(){this.contexts=new Map}onChildOutletCreated(D,I){const U=this.getOrCreateContext(D);U.outlet=I,this.contexts.set(D,U)}onChildOutletDestroyed(D){const I=this.getContext(D);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let I=this.getContext(D);return I||(I=new Is,this.contexts.set(D,I)),I}getContext(D){return this.contexts.get(D)||null}}let Eo=(()=>{class x{constructor(I,U,Y,le,Re){this.parentContexts=I,this.location=U,this.resolver=Y,this.changeDetector=Re,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=le||lt,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,U){this.activated=I,this._activatedRoute=U,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,U){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const Re=(U=U||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),We=this.parentContexts.getOrCreateContext(this.name).children,$e=new Zs(I,We,this.location.injector);this.activated=this.location.createComponent(Re,this.location.length,$e),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(I){return new(I||x)(y.Y36(ii),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},x.\u0275dir=y.lG2({type:x,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),x})();class Zs{constructor(D,I,U){this.route=D,this.childContexts=I,this.parent=U}get(D,I){return D===Xe?this.route:D===ii?this.childContexts:this.parent.get(D,I)}}let Kr=(()=>{class x{}return x.\u0275fac=function(I){return new(I||x)},x.\u0275cmp=y.Xpm({type:x,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,U){1&I&&y._UZ(0,"router-outlet")},directives:[Eo],encapsulation:2}),x})();function ts(x,D=""){for(let I=0;I<x.length;I++){const U=x[I];Ts(U,js(D,U))}}function Ts(x,D){x.children&&ts(x.children,D)}function js(x,D){return D?x||D.path?x&&!D.path?`${x}/`:!x&&D.path?D.path:`${x}/${D.path}`:"":x}function Ei(x){const D=x.children&&x.children.map(Ei),I=D?Object.assign(Object.assign({},x),{children:D}):Object.assign({},x);return!I.component&&(D||I.loadChildren)&&I.outlet&&I.outlet!==lt&&(I.component=Kr),I}function F(x){return x.outlet||lt}function ae(x,D){const I=x.filter(U=>F(U)===D);return I.push(...x.filter(U=>F(U)!==D)),I}const j={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ce(x,D,I){var U;if(""===D.path)return"full"===D.pathMatch&&(x.hasChildren()||I.length>0)?Object.assign({},j):{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const le=(D.matcher||Mn)(I,x,D);if(!le)return Object.assign({},j);const Re={};_r(le.posParams,($e,en)=>{Re[en]=$e.path});const We=le.consumed.length>0?Object.assign(Object.assign({},Re),le.consumed[le.consumed.length-1].parameters):Re;return{matched:!0,consumedSegments:le.consumed,remainingSegments:I.slice(le.consumed.length),parameters:We,positionalParamSegments:null!==(U=le.posParams)&&void 0!==U?U:{}}}function Oe(x,D,I,U,Y="corrected"){if(I.length>0&&function bn(x,D,I){return I.some(U=>Pr(x,D,U)&&F(U)!==lt)}(x,I,U)){const Re=new ne(D,function jt(x,D,I,U){const Y={};Y[lt]=U,U._sourceSegment=x,U._segmentIndexShift=D.length;for(const le of I)if(""===le.path&&F(le)!==lt){const Re=new ne([],{});Re._sourceSegment=x,Re._segmentIndexShift=D.length,Y[F(le)]=Re}return Y}(x,D,U,new ne(I,x.children)));return Re._sourceSegment=x,Re._segmentIndexShift=D.length,{segmentGroup:Re,slicedSegments:[]}}if(0===I.length&&function jr(x,D,I){return I.some(U=>Pr(x,D,U))}(x,I,U)){const Re=new ne(x.segments,function Rt(x,D,I,U,Y,le){const Re={};for(const We of U)if(Pr(x,I,We)&&!Y[F(We)]){const $e=new ne([],{});$e._sourceSegment=x,$e._segmentIndexShift="legacy"===le?x.segments.length:D.length,Re[F(We)]=$e}return Object.assign(Object.assign({},Y),Re)}(x,D,I,U,x.children,Y));return Re._sourceSegment=x,Re._segmentIndexShift=D.length,{segmentGroup:Re,slicedSegments:I}}const le=new ne(x.segments,x.children);return le._sourceSegment=x,le._segmentIndexShift=D.length,{segmentGroup:le,slicedSegments:I}}function Pr(x,D,I){return(!(x.hasChildren()||D.length>0)||"full"!==I.pathMatch)&&""===I.path}function gr(x,D,I,U){return!!(F(x)===U||U!==lt&&Pr(D,I,x))&&("**"===x.path||ce(D,x,I).matched)}function Vr(x,D,I){return 0===D.length&&!x.children[I]}class Ii{constructor(D){this.segmentGroup=D||null}}class bi{constructor(D){this.urlTree=D}}function pi(x){return(0,mt._)(new Ii(x))}function oo(x){return(0,mt._)(new bi(x))}class Mo{constructor(D,I,U,Y,le){this.configLoader=I,this.urlSerializer=U,this.urlTree=Y,this.config=le,this.allowRedirects=!0,this.ngModule=D.get(y.h0i)}apply(){const D=Oe(this.urlTree.root,[],[],this.config).segmentGroup,I=new ne(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,I,lt).pipe((0,Ut.U)(le=>this.createUrlTree(jo(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Zr.K)(le=>{if(le instanceof bi)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof Ii?this.noMatchError(le):le}))}match(D){return this.expandSegmentGroup(this.ngModule,this.config,D.root,lt).pipe((0,Ut.U)(Y=>this.createUrlTree(jo(Y),D.queryParams,D.fragment))).pipe((0,Zr.K)(Y=>{throw Y instanceof Ii?this.noMatchError(Y):Y}))}noMatchError(D){return new Error(`Cannot match any routes. URL Segment: '${D.segmentGroup}'`)}createUrlTree(D,I,U){const Y=D.segments.length>0?new ne([],{[lt]:D}):D;return new G(Y,I,U)}expandSegmentGroup(D,I,U,Y){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(D,I,U).pipe((0,Ut.U)(le=>new ne([],le))):this.expandSegment(D,U,I,U.segments,Y,!0)}expandChildren(D,I,U){const Y=[];for(const le of Object.keys(U.children))"primary"===le?Y.unshift(le):Y.push(le);return(0,B.D)(Y).pipe((0,Ln.b)(le=>{const Re=U.children[le],We=ae(I,le);return this.expandSegmentGroup(D,We,Re,le).pipe((0,Ut.U)($e=>({segment:$e,outlet:le})))}),(0,Nn.R)((le,Re)=>(le[Re.outlet]=Re.segment,le),{}),function nt(x,D){const I=arguments.length>=2;return U=>U.pipe(x?(0,rn.h)((Y,le)=>x(Y,le,U)):Ge.y,fr(1),I?(0,an.d)(D):(0,Xn.T)(()=>new Ft.K))}())}expandSegment(D,I,U,Y,le,Re){return(0,B.D)(U).pipe((0,Ln.b)(We=>this.expandSegmentAgainstRoute(D,I,U,We,Y,le,Re).pipe((0,Zr.K)(en=>{if(en instanceof Ii)return(0,X.of)(null);throw en}))),(0,Qe.P)(We=>!!We),(0,Zr.K)((We,$e)=>{if(We instanceof Ft.K||"EmptyError"===We.name)return Vr(I,Y,le)?(0,X.of)(new ne([],{})):pi(I);throw We}))}expandSegmentAgainstRoute(D,I,U,Y,le,Re,We){return gr(Y,I,le,Re)?void 0===Y.redirectTo?this.matchSegmentAgainstRoute(D,I,Y,le,Re):We&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,I,U,Y,le,Re):pi(I):pi(I)}expandSegmentAgainstRouteUsingRedirect(D,I,U,Y,le,Re){return"**"===Y.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,U,Y,Re):this.expandRegularSegmentAgainstRouteUsingRedirect(D,I,U,Y,le,Re)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,I,U,Y){const le=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?oo(le):this.lineralizeSegments(U,le).pipe((0,ve.z)(Re=>{const We=new ne(Re,{});return this.expandSegment(D,We,I,Re,Y,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,I,U,Y,le,Re){const{matched:We,consumedSegments:$e,remainingSegments:en,positionalParamSegments:yr}=ce(I,Y,le);if(!We)return pi(I);const Kn=this.applyRedirectCommands($e,Y.redirectTo,yr);return Y.redirectTo.startsWith("/")?oo(Kn):this.lineralizeSegments(Y,Kn).pipe((0,ve.z)(ln=>this.expandSegment(D,I,U,ln.concat(en),Re,!1)))}matchSegmentAgainstRoute(D,I,U,Y,le){if("**"===U.path)return U.loadChildren?(U._loadedConfig?(0,X.of)(U._loadedConfig):this.configLoader.load(D.injector,U)).pipe((0,Ut.U)(Kn=>(U._loadedConfig=Kn,new ne(Y,{})))):(0,X.of)(new ne(Y,{}));const{matched:Re,consumedSegments:We,remainingSegments:$e}=ce(I,U,Y);return Re?this.getChildConfig(D,U,Y).pipe((0,ve.z)(yr=>{const Kn=yr.module,ln=yr.routes,{segmentGroup:pn,slicedSegments:na}=Oe(I,We,$e,ln),yn=new ne(pn.segments,pn.children);if(0===na.length&&yn.hasChildren())return this.expandChildren(Kn,ln,yn).pipe((0,Ut.U)(ra=>new ne(We,ra)));if(0===ln.length&&0===na.length)return(0,X.of)(new ne(We,{}));const vt=F(U)===le;return this.expandSegment(Kn,yn,ln,na,vt?lt:le,!0).pipe((0,Ut.U)(Yr=>new ne(We.concat(Yr.segments),Yr.children)))})):pi(I)}getChildConfig(D,I,U){return I.children?(0,X.of)(new Ss(I.children,D)):I.loadChildren?void 0!==I._loadedConfig?(0,X.of)(I._loadedConfig):this.runCanLoadGuards(D.injector,I,U).pipe((0,ve.z)(Y=>Y?this.configLoader.load(D.injector,I).pipe((0,Ut.U)(le=>(I._loadedConfig=le,le))):function Bn(x){return(0,mt._)(Ur(`Cannot load children because the guard of the route "path: '${x.path}'" returned false`))}(I))):(0,X.of)(new Ss([],D))}runCanLoadGuards(D,I,U){const Y=I.canLoad;if(!Y||0===Y.length)return(0,X.of)(!0);const le=Y.map(Re=>{const We=D.get(Re);let $e;if(function vo(x){return x&&As(x.canLoad)}(We))$e=We.canLoad(I,U);else{if(!As(We))throw new Error("Invalid CanLoad guard");$e=We(I,U)}return tr($e)});return(0,X.of)(le).pipe(Bs(),(0,De.b)(Re=>{if(!ys(Re))return;const We=Ur(`Redirecting to "${this.urlSerializer.serialize(Re)}"`);throw We.url=Re,We}),(0,Ut.U)(Re=>!0===Re))}lineralizeSegments(D,I){let U=[],Y=I.root;for(;;){if(U=U.concat(Y.segments),0===Y.numberOfChildren)return(0,X.of)(U);if(Y.numberOfChildren>1||!Y.children[lt])return(0,mt._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D.redirectTo}'`));Y=Y.children[lt]}}applyRedirectCommands(D,I,U){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),D,U)}applyRedirectCreatreUrlTree(D,I,U,Y){const le=this.createSegmentGroup(D,I.root,U,Y);return new G(le,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(D,I){const U={};return _r(D,(Y,le)=>{if("string"==typeof Y&&Y.startsWith(":")){const We=Y.substring(1);U[le]=I[We]}else U[le]=Y}),U}createSegmentGroup(D,I,U,Y){const le=this.createSegments(D,I.segments,U,Y);let Re={};return _r(I.children,(We,$e)=>{Re[$e]=this.createSegmentGroup(D,We,U,Y)}),new ne(le,Re)}createSegments(D,I,U,Y){return I.map(le=>le.path.startsWith(":")?this.findPosParam(D,le,Y):this.findOrReturn(le,U))}findPosParam(D,I,U){const Y=U[I.path.substring(1)];if(!Y)throw new Error(`Cannot redirect to '${D}'. Cannot find '${I.path}'.`);return Y}findOrReturn(D,I){let U=0;for(const Y of I){if(Y.path===D.path)return I.splice(U),Y;U++}return D}}function jo(x){const D={};for(const U of Object.keys(x.children)){const le=jo(x.children[U]);(le.segments.length>0||le.hasChildren())&&(D[U]=le)}return function ao(x){if(1===x.numberOfChildren&&x.children[lt]){const D=x.children[lt];return new ne(x.segments.concat(D.segments),D.children)}return x}(new ne(x.segments,D))}class V{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class O{constructor(D,I){this.component=D,this.route=I}}function ue(x,D,I){const U=x._root;return z(U,D?D._root:null,I,[U.value])}function Kt(x,D,I){const U=function gi(x){if(!x)return null;for(let D=x.parent;D;D=D.parent){const I=D.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(D);return(U?U.module.injector:I).get(x)}function z(x,D,I,U,Y={canDeactivateChecks:[],canActivateChecks:[]}){const le=ir(D);return x.children.forEach(Re=>{(function W(x,D,I,U,Y={canDeactivateChecks:[],canActivateChecks:[]}){const le=x.value,Re=D?D.value:null,We=I?I.getContext(x.value.outlet):null;if(Re&&le.routeConfig===Re.routeConfig){const $e=function fe(x,D,I){if("function"==typeof I)return I(x,D);switch(I){case"pathParamsChange":return!dt(x.url,D.url);case"pathParamsOrQueryParamsChange":return!dt(x.url,D.url)||!Tr(x.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!br(x,D)||!Tr(x.queryParams,D.queryParams);default:return!br(x,D)}}(Re,le,le.routeConfig.runGuardsAndResolvers);$e?Y.canActivateChecks.push(new V(U)):(le.data=Re.data,le._resolvedData=Re._resolvedData),z(x,D,le.component?We?We.children:null:I,U,Y),$e&&We&&We.outlet&&We.outlet.isActivated&&Y.canDeactivateChecks.push(new O(We.outlet.component,Re))}else Re&&Ie(D,We,Y),Y.canActivateChecks.push(new V(U)),z(x,null,le.component?We?We.children:null:I,U,Y)})(Re,le[Re.value.outlet],I,U.concat([Re.value]),Y),delete le[Re.value.outlet]}),_r(le,(Re,We)=>Ie(Re,I.getContext(We),Y)),Y}function Ie(x,D,I){const U=ir(x),Y=x.value;_r(U,(le,Re)=>{Ie(le,Y.component?D?D.children.getContext(Re):null:D,I)}),I.canDeactivateChecks.push(new O(Y.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,Y))}class Di{}function Ti(x){return new Ke.y(D=>D.error(x))}class qi{constructor(D,I,U,Y,le,Re){this.rootComponentType=D,this.config=I,this.urlTree=U,this.url=Y,this.paramsInheritanceStrategy=le,this.relativeLinkResolution=Re}recognize(){const D=Oe(this.urlTree.root,[],[],this.config.filter(Re=>void 0===Re.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,D,lt);if(null===I)return null;const U=new _t([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),Y=new _n(U,I),le=new Ot(this.url,Y);return this.inheritParamsAndData(le._root),le}inheritParamsAndData(D){const I=D.value,U=Ze(I,this.paramsInheritanceStrategy);I.params=Object.freeze(U.params),I.data=Object.freeze(U.data),D.children.forEach(Y=>this.inheritParamsAndData(Y))}processSegmentGroup(D,I,U){return 0===I.segments.length&&I.hasChildren()?this.processChildren(D,I):this.processSegment(D,I,I.segments,U)}processChildren(D,I){const U=[];for(const le of Object.keys(I.children)){const Re=I.children[le],We=ae(D,le),$e=this.processSegmentGroup(We,Re,le);if(null===$e)return null;U.push(...$e)}const Y=Ui(U);return function Si(x){x.sort((D,I)=>D.value.outlet===lt?-1:I.value.outlet===lt?1:D.value.outlet.localeCompare(I.value.outlet))}(Y),Y}processSegment(D,I,U,Y){for(const le of D){const Re=this.processSegmentAgainstRoute(le,I,U,Y);if(null!==Re)return Re}return Vr(I,U,Y)?[]:null}processSegmentAgainstRoute(D,I,U,Y){if(D.redirectTo||!gr(D,I,U,Y))return null;let le,Re=[],We=[];if("**"===D.path){const pn=U.length>0?Rr(U).parameters:{};le=new _t(U,pn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zo(D),F(D),D.component,D,Hs(I),xo(I)+U.length,$s(D))}else{const pn=ce(I,D,U);if(!pn.matched)return null;Re=pn.consumedSegments,We=pn.remainingSegments,le=new _t(Re,pn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zo(D),F(D),D.component,D,Hs(I),xo(I)+Re.length,$s(D))}const $e=function Rs(x){return x.children?x.children:x.loadChildren?x._loadedConfig.routes:[]}(D),{segmentGroup:en,slicedSegments:yr}=Oe(I,Re,We,$e.filter(pn=>void 0===pn.redirectTo),this.relativeLinkResolution);if(0===yr.length&&en.hasChildren()){const pn=this.processChildren($e,en);return null===pn?null:[new _n(le,pn)]}if(0===$e.length&&0===yr.length)return[new _n(le,[])];const Kn=F(D)===Y,ln=this.processSegment($e,en,yr,Kn?lt:Y);return null===ln?null:[new _n(le,ln)]}}function as(x){const D=x.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function Ui(x){const D=[],I=new Set;for(const U of x){if(!as(U)){D.push(U);continue}const Y=D.find(le=>U.value.routeConfig===le.value.routeConfig);void 0!==Y?(Y.children.push(...U.children),I.add(Y)):D.push(U)}for(const U of I){const Y=Ui(U.children);D.push(new _n(U.value,Y))}return D.filter(U=>!I.has(U))}function Hs(x){let D=x;for(;D._sourceSegment;)D=D._sourceSegment;return D}function xo(x){let D=x,I=D._segmentIndexShift?D._segmentIndexShift:0;for(;D._sourceSegment;)D=D._sourceSegment,I+=D._segmentIndexShift?D._segmentIndexShift:0;return I-1}function Zo(x){return x.data||{}}function $s(x){return x.resolve||{}}function $a(x){return[...Object.keys(x),...Object.getOwnPropertySymbols(x)]}function Mi(x){return(0,bt.w)(D=>{const I=x(D);return I?(0,B.D)(I).pipe((0,Ut.U)(()=>D)):(0,X.of)(D)})}class Ys extends class Oi{shouldDetach(D){return!1}store(D,I){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,I){return D.routeConfig===I.routeConfig}}{}const Bi=new y.OlP("ROUTES");class $o{constructor(D,I,U,Y){this.injector=D,this.compiler=I,this.onLoadStartListener=U,this.onLoadEndListener=Y}load(D,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const Y=this.loadModuleFactory(I.loadChildren).pipe((0,Ut.U)(le=>{this.onLoadEndListener&&this.onLoadEndListener(I);const Re=le.create(D);return new Ss(Yt(Re.injector.get(Bi,void 0,y.XFs.Self|y.XFs.Optional)).map(Ei),Re)}),(0,Zr.K)(le=>{throw I._loader$=void 0,le}));return I._loader$=new et(Y,()=>new ie.x).pipe(pt()),I._loader$}loadModuleFactory(D){return tr(D()).pipe((0,ve.z)(I=>I instanceof y.YKP?(0,X.of)(I):(0,B.D)(this.compiler.compileModuleAsync(I))))}}class gu{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,I){return D}}function ta(x){throw x}function Ga(x,D,I){return D.parse("/")}function po(x,D){return(0,X.of)(null)}const Ms={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ha={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zi=(()=>{class x{constructor(I,U,Y,le,Re,We,$e){this.rootComponentType=I,this.urlSerializer=U,this.rootContexts=Y,this.location=le,this.config=$e,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ie.x,this.errorHandler=ta,this.malformedUriErrorHandler=Ga,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:po,afterPreactivation:po},this.urlHandlingStrategy=new gu,this.routeReuseStrategy=new Ys,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Re.get(y.h0i),this.console=Re.get(y.c2e);const Kn=Re.get(y.R0b);this.isNgZoneEnabled=Kn instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig($e),this.currentUrlTree=function Wr(){return new G(new ne([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $o(Re,We,ln=>this.triggerEvent(new Dn(ln)),ln=>this.triggerEvent(new On(ln))),this.routerState=xr(this.currentUrlTree,this.rootComponentType),this.transitions=new Ue({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const U=this.events;return I.pipe((0,rn.h)(Y=>0!==Y.id),(0,Ut.U)(Y=>Object.assign(Object.assign({},Y),{extractedUrl:this.urlHandlingStrategy.extract(Y.rawUrl)})),(0,bt.w)(Y=>{let le=!1,Re=!1;return(0,X.of)(Y).pipe((0,De.b)(We=>{this.currentNavigation={id:We.id,initialUrl:We.currentRawUrl,extractedUrl:We.extractedUrl,trigger:We.source,extras:We.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,bt.w)(We=>{const $e=this.browserUrlTree.toString(),en=!this.navigated||We.extractedUrl.toString()!==$e||$e!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||en)&&this.urlHandlingStrategy.shouldProcessUrl(We.rawUrl))return Du(We.source)&&(this.browserUrlTree=We.extractedUrl),(0,X.of)(We).pipe((0,bt.w)(Kn=>{const ln=this.transitions.getValue();return U.next(new cn(Kn.id,this.serializeUrl(Kn.extractedUrl),Kn.source,Kn.restoredState)),ln!==this.transitions.getValue()?Me.E:Promise.resolve(Kn)}),function K(x,D,I,U){return(0,bt.w)(Y=>function ns(x,D,I,U,Y){return new Mo(x,D,I,U,Y).apply()}(x,D,I,Y.extractedUrl,U).pipe((0,Ut.U)(le=>Object.assign(Object.assign({},Y),{urlAfterRedirects:le}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,De.b)(Kn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Kn.urlAfterRedirects})}),function Ho(x,D,I,U,Y){return(0,ve.z)(le=>function $r(x,D,I,U,Y="emptyOnly",le="legacy"){try{const Re=new qi(x,D,I,U,Y,le).recognize();return null===Re?Ti(new Di):(0,X.of)(Re)}catch(Re){return Ti(Re)}}(x,D,le.urlAfterRedirects,I(le.urlAfterRedirects),U,Y).pipe((0,Ut.U)(Re=>Object.assign(Object.assign({},le),{targetSnapshot:Re}))))}(this.rootComponentType,this.config,Kn=>this.serializeUrl(Kn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,De.b)(Kn=>{if("eager"===this.urlUpdateStrategy){if(!Kn.extras.skipLocationChange){const pn=this.urlHandlingStrategy.merge(Kn.urlAfterRedirects,Kn.rawUrl);this.setBrowserUrl(pn,Kn)}this.browserUrlTree=Kn.urlAfterRedirects}const ln=new or(Kn.id,this.serializeUrl(Kn.extractedUrl),this.serializeUrl(Kn.urlAfterRedirects),Kn.targetSnapshot);U.next(ln)}));if(en&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ln,extractedUrl:pn,source:na,restoredState:yn,extras:vt}=We,Zt=new cn(ln,this.serializeUrl(pn),na,yn);U.next(Zt);const Yr=xr(pn,this.rootComponentType).snapshot;return(0,X.of)(Object.assign(Object.assign({},We),{targetSnapshot:Yr,urlAfterRedirects:pn,extras:Object.assign(Object.assign({},vt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=We.rawUrl,We.resolve(null),Me.E}),Mi(We=>{const{targetSnapshot:$e,id:en,extractedUrl:yr,rawUrl:Kn,extras:{skipLocationChange:ln,replaceUrl:pn}}=We;return this.hooks.beforePreactivation($e,{navigationId:en,appliedUrlTree:yr,rawUrlTree:Kn,skipLocationChange:!!ln,replaceUrl:!!pn})}),(0,De.b)(We=>{const $e=new jn(We.id,this.serializeUrl(We.extractedUrl),this.serializeUrl(We.urlAfterRedirects),We.targetSnapshot);this.triggerEvent($e)}),(0,Ut.U)(We=>Object.assign(Object.assign({},We),{guards:ue(We.targetSnapshot,We.currentSnapshot,this.rootContexts)})),function Le(x,D){return(0,ve.z)(I=>{const{targetSnapshot:U,currentSnapshot:Y,guards:{canActivateChecks:le,canDeactivateChecks:Re}}=I;return 0===Re.length&&0===le.length?(0,X.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function It(x,D,I,U){return(0,B.D)(x).pipe((0,ve.z)(Y=>function mi(x,D,I,U,Y){const le=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!le||0===le.length)return(0,X.of)(!0);const Re=le.map(We=>{const $e=Kt(We,D,Y);let en;if(function Us(x){return x&&As(x.canDeactivate)}($e))en=tr($e.canDeactivate(x,D,I,U));else{if(!As($e))throw new Error("Invalid CanDeactivate guard");en=tr($e(x,D,I,U))}return en.pipe((0,Qe.P)())});return(0,X.of)(Re).pipe(Bs())}(Y.component,Y.route,I,D,U)),(0,Qe.P)(Y=>!0!==Y,!0))}(Re,U,Y,x).pipe((0,ve.z)(We=>We&&function qs(x){return"boolean"==typeof x}(We)?function Qt(x,D,I,U){return(0,B.D)(D).pipe((0,Ln.b)(Y=>(0,dn.z)(function xn(x,D){return null!==x&&D&&D(new li(x)),(0,X.of)(!0)}(Y.route.parent,U),function Vn(x,D){return null!==x&&D&&D(new Pt(x)),(0,X.of)(!0)}(Y.route,U),function Gn(x,D,I){const U=D[D.length-1],le=D.slice(0,D.length-1).reverse().map(Re=>function ke(x){const D=x.routeConfig?x.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:x,guards:D}:null}(Re)).filter(Re=>null!==Re).map(Re=>we(()=>{const We=Re.guards.map($e=>{const en=Kt($e,Re.node,I);let yr;if(function Bo(x){return x&&As(x.canActivateChild)}(en))yr=tr(en.canActivateChild(U,x));else{if(!As(en))throw new Error("Invalid CanActivateChild guard");yr=tr(en(U,x))}return yr.pipe((0,Qe.P)())});return(0,X.of)(We).pipe(Bs())}));return(0,X.of)(le).pipe(Bs())}(x,Y.path,I),function cr(x,D,I){const U=D.routeConfig?D.routeConfig.canActivate:null;if(!U||0===U.length)return(0,X.of)(!0);const Y=U.map(le=>we(()=>{const Re=Kt(le,D,I);let We;if(function Ro(x){return x&&As(x.canActivate)}(Re))We=tr(Re.canActivate(D,x));else{if(!As(Re))throw new Error("Invalid CanActivate guard");We=tr(Re(D,x))}return We.pipe((0,Qe.P)())}));return(0,X.of)(Y).pipe(Bs())}(x,Y.route,I))),(0,Qe.P)(Y=>!0!==Y,!0))}(U,le,x,D):(0,X.of)(We)),(0,Ut.U)(We=>Object.assign(Object.assign({},I),{guardsResult:We})))})}(this.ngModule.injector,We=>this.triggerEvent(We)),(0,De.b)(We=>{if(ys(We.guardsResult)){const en=Ur(`Redirecting to "${this.serializeUrl(We.guardsResult)}"`);throw en.url=We.guardsResult,en}const $e=new Fr(We.id,this.serializeUrl(We.extractedUrl),this.serializeUrl(We.urlAfterRedirects),We.targetSnapshot,!!We.guardsResult);this.triggerEvent($e)}),(0,rn.h)(We=>!!We.guardsResult||(this.restoreHistory(We),this.cancelNavigationTransition(We,""),!1)),Mi(We=>{if(We.guards.canActivateChecks.length)return(0,X.of)(We).pipe((0,De.b)($e=>{const en=new wn($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);this.triggerEvent(en)}),(0,bt.w)($e=>{let en=!1;return(0,X.of)($e).pipe(function _s(x,D){return(0,ve.z)(I=>{const{targetSnapshot:U,guards:{canActivateChecks:Y}}=I;if(!Y.length)return(0,X.of)(I);let le=0;return(0,B.D)(Y).pipe((0,Ln.b)(Re=>function da(x,D,I,U){return function Po(x,D,I,U){const Y=$a(x);if(0===Y.length)return(0,X.of)({});const le={};return(0,B.D)(Y).pipe((0,ve.z)(Re=>function ea(x,D,I,U){const Y=Kt(x,D,U);return tr(Y.resolve?Y.resolve(D,I):Y(D,I))}(x[Re],D,I,U).pipe((0,De.b)(We=>{le[Re]=We}))),fr(1),(0,ve.z)(()=>$a(le).length===Y.length?(0,X.of)(le):Me.E))}(x._resolve,x,D,U).pipe((0,Ut.U)(le=>(x._resolvedData=le,x.data=Object.assign(Object.assign({},x.data),Ze(x,I).resolve),null)))}(Re.route,U,x,D)),(0,De.b)(()=>le++),fr(1),(0,ve.z)(Re=>le===Y.length?(0,X.of)(I):Me.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,De.b)({next:()=>en=!0,complete:()=>{en||(this.restoreHistory($e),this.cancelNavigationTransition($e,"At least one route resolver didn't emit any value."))}}))}),(0,De.b)($e=>{const en=new Jn($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);this.triggerEvent(en)}))}),Mi(We=>{const{targetSnapshot:$e,id:en,extractedUrl:yr,rawUrl:Kn,extras:{skipLocationChange:ln,replaceUrl:pn}}=We;return this.hooks.afterPreactivation($e,{navigationId:en,appliedUrlTree:yr,rawUrlTree:Kn,skipLocationChange:!!ln,replaceUrl:!!pn})}),(0,Ut.U)(We=>{const $e=function di(x,D,I){const U=Ks(x,D._root,I?I._root:void 0);return new $i(U,D)}(this.routeReuseStrategy,We.targetSnapshot,We.currentRouterState);return Object.assign(Object.assign({},We),{targetRouterState:$e})}),(0,De.b)(We=>{this.currentUrlTree=We.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(We.urlAfterRedirects,We.rawUrl),this.routerState=We.targetRouterState,"deferred"===this.urlUpdateStrategy&&(We.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,We),this.browserUrlTree=We.urlAfterRedirects)}),((x,D,I)=>(0,Ut.U)(U=>(new Uo(D,U.targetRouterState,U.currentRouterState,I).activate(x),U)))(this.rootContexts,this.routeReuseStrategy,We=>this.triggerEvent(We)),(0,De.b)({next(){le=!0},complete(){le=!0}}),function Ee(x){return(0,Et.e)((D,I)=>{try{D.subscribe(I)}finally{I.add(x)}})}(()=>{var We;le||Re||this.cancelNavigationTransition(Y,`Navigation ID ${Y.id} is not equal to the current navigation id ${this.navigationId}`),(null===(We=this.currentNavigation)||void 0===We?void 0:We.id)===Y.id&&(this.currentNavigation=null)}),(0,Zr.K)(We=>{if(Re=!0,function er(x){return x&&x[nn]}(We)){const $e=ys(We.url);$e||(this.navigated=!0,this.restoreHistory(Y,!0));const en=new Wn(Y.id,this.serializeUrl(Y.extractedUrl),We.message);U.next(en),$e?setTimeout(()=>{const yr=this.urlHandlingStrategy.merge(We.url,this.rawUrlTree),Kn={skipLocationChange:Y.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Du(Y.source)};this.scheduleNavigation(yr,"imperative",null,Kn,{resolve:Y.resolve,reject:Y.reject,promise:Y.promise})},0):Y.resolve(!1)}else{this.restoreHistory(Y,!0);const $e=new pr(Y.id,this.serializeUrl(Y.extractedUrl),We);U.next($e);try{Y.resolve(this.errorHandler(We))}catch(en){Y.reject(en)}}return Me.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const U="popstate"===I.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{var Y;const le={replaceUrl:!0},Re=(null===(Y=I.state)||void 0===Y?void 0:Y.navigationId)?I.state:null;if(Re){const $e=Object.assign({},Re);delete $e.navigationId,delete $e.\u0275routerPageId,0!==Object.keys($e).length&&(le.state=$e)}const We=this.parseUrl(I.url);this.scheduleNavigation(We,U,Re,le)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){ts(I),this.config=I.map(Ei),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,U={}){const{relativeTo:Y,queryParams:le,fragment:Re,queryParamsHandling:We,preserveFragment:$e}=U,en=Y||this.routerState.root,yr=$e?this.currentUrlTree.fragment:Re;let Kn=null;switch(We){case"merge":Kn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),le);break;case"preserve":Kn=this.currentUrlTree.queryParams;break;default:Kn=le||null}return null!==Kn&&(Kn=this.removeEmptyProps(Kn)),function ds(x,D,I,U,Y){if(0===I.length)return ho(D.root,D.root,D.root,U,Y);const le=function ca(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new fo(!0,0,x);let D=0,I=!1;const U=x.reduce((Y,le,Re)=>{if("object"==typeof le&&null!=le){if(le.outlets){const We={};return _r(le.outlets,($e,en)=>{We[en]="string"==typeof $e?$e.split("/"):$e}),[...Y,{outlets:We}]}if(le.segmentPath)return[...Y,le.segmentPath]}return"string"!=typeof le?[...Y,le]:0===Re?(le.split("/").forEach((We,$e)=>{0==$e&&"."===We||(0==$e&&""===We?I=!0:".."===We?D++:""!=We&&Y.push(We))}),Y):[...Y,le]},[]);return new fo(I,D,U)}(I);if(le.toRoot())return ho(D.root,D.root,new ne([],{}),U,Y);const Re=function Vo(x,D,I){if(x.isAbsolute)return new Ao(D.root,!0,0);if(-1===I.snapshot._lastPathIndex){const le=I.snapshot._urlSegment;return new Ao(le,le===D.root,0)}const U=Fs(x.commands[0])?0:1;return function hs(x,D,I){let U=x,Y=D,le=I;for(;le>Y;){if(le-=Y,U=U.parent,!U)throw new Error("Invalid number of '../'");Y=U.segments.length}return new Ao(U,!1,Y-le)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+U,x.numberOfDoubleDots)}(le,D,x),We=Re.processChildren?ro(Re.segmentGroup,Re.index,le.commands):Ls(Re.segmentGroup,Re.index,le.commands);return ho(D.root,Re.segmentGroup,We,U,Y)}(en,this.currentUrlTree,I,Kn,null!=yr?yr:null)}navigateByUrl(I,U={skipLocationChange:!1}){const Y=ys(I)?I:this.parseUrl(I),le=this.urlHandlingStrategy.merge(Y,this.rawUrlTree);return this.scheduleNavigation(le,"imperative",null,U)}navigate(I,U={skipLocationChange:!1}){return function Yo(x){for(let D=0;D<x.length;D++){const I=x[D];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${D}`)}}(I),this.navigateByUrl(this.createUrlTree(I,U),U)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let U;try{U=this.urlSerializer.parse(I)}catch(Y){U=this.malformedUriErrorHandler(Y,this.urlSerializer,I)}return U}isActive(I,U){let Y;if(Y=!0===U?Object.assign({},Ms):!1===U?Object.assign({},ha):U,ys(I))return Fi(this.currentUrlTree,I,Y);const le=this.parseUrl(I);return Fi(this.currentUrlTree,le,Y)}removeEmptyProps(I){return Object.keys(I).reduce((U,Y)=>{const le=I[Y];return null!=le&&(U[Y]=le),U},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new Sn(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,U,Y,le,Re){var We,$e;if(this.disposed)return Promise.resolve(!1);let en,yr,Kn;Re?(en=Re.resolve,yr=Re.reject,Kn=Re.promise):Kn=new Promise((na,yn)=>{en=na,yr=yn});const ln=++this.navigationId;let pn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Y=this.location.getState()),pn=Y&&Y.\u0275routerPageId?Y.\u0275routerPageId:le.replaceUrl||le.skipLocationChange?null!==(We=this.browserPageId)&&void 0!==We?We:0:(null!==($e=this.browserPageId)&&void 0!==$e?$e:0)+1):pn=0,this.setTransition({id:ln,targetPageId:pn,source:U,restoredState:Y,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:le,resolve:en,reject:yr,promise:Kn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Kn.catch(na=>Promise.reject(na))}setBrowserUrl(I,U){const Y=this.urlSerializer.serialize(I),le=Object.assign(Object.assign({},U.extras.state),this.generateNgRouterState(U.id,U.targetPageId));this.location.isCurrentPathEqualTo(Y)||U.extras.replaceUrl?this.location.replaceState(Y,"",le):this.location.go(Y,"",le)}restoreHistory(I,U=!1){var Y,le;if("computed"===this.canceledNavigationResolution){const Re=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Y=this.currentNavigation)||void 0===Y?void 0:Y.finalUrl)||0===Re?this.currentUrlTree===(null===(le=this.currentNavigation)||void 0===le?void 0:le.finalUrl)&&0===Re&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Re)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,U){const Y=new Wn(I.id,this.serializeUrl(I.extractedUrl),U);this.triggerEvent(Y),I.resolve(!1)}generateNgRouterState(I,U){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:U}:{navigationId:I}}}return x.\u0275fac=function(I){y.$Z()},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})();function Du(x){return"imperative"!==x}let go=(()=>{class x{constructor(I,U,Y,le,Re){this.router=I,this.route=U,this.tabIndexAttribute=Y,this.renderer=le,this.el=Re,this.commands=null,this.onChanges=new ie.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const U=this.renderer,Y=this.el.nativeElement;null!==I?U.setAttribute(Y,"tabindex",I):U.removeAttribute(Y,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const I={skipLocationChange:si(this.skipLocationChange),replaceUrl:si(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:si(this.preserveFragment)})}}return x.\u0275fac=function(I){return new(I||x)(y.Y36(Zi),y.Y36(Xe),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq))},x.\u0275dir=y.lG2({type:x,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,U){1&I&&y.NdJ("click",function(){return U.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),x})(),Go=(()=>{class x{constructor(I,U,Y){this.router=I,this.route=U,this.locationStrategy=Y,this.commands=null,this.href=null,this.onChanges=new ie.x,this.subscription=I.events.subscribe(le=>{le instanceof Sn&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,U,Y,le,Re){if(0!==I||U||Y||le||Re||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const We={skipLocationChange:si(this.skipLocationChange),replaceUrl:si(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,We),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:si(this.preserveFragment)})}}return x.\u0275fac=function(I){return new(I||x)(y.Y36(Zi),y.Y36(Xe),y.Y36(gt.S$))},x.\u0275dir=y.lG2({type:x,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,U){1&I&&y.NdJ("click",function(le){return U.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&I&&y.uIk("target",U.target)("href",U.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),x})();function si(x){return""===x||!!x}class wo{}class mu{preload(D,I){return(0,X.of)(null)}}let tu=(()=>{class x{constructor(I,U,Y,le){this.router=I,this.injector=Y,this.preloadingStrategy=le,this.loader=new $o(Y,U,$e=>I.triggerEvent(new Dn($e)),$e=>I.triggerEvent(new On($e)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,rn.h)(I=>I instanceof Sn),(0,Ln.b)(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(y.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,U){const Y=[];for(const le of U)if(le.loadChildren&&!le.canLoad&&le._loadedConfig){const Re=le._loadedConfig;Y.push(this.processRoutes(Re.module,Re.routes))}else le.loadChildren&&!le.canLoad?Y.push(this.preloadConfig(I,le)):le.children&&Y.push(this.processRoutes(I,le.children));return(0,B.D)(Y).pipe((0,xe.J)(),(0,Ut.U)(le=>{}))}preloadConfig(I,U){return this.preloadingStrategy.preload(U,()=>(U._loadedConfig?(0,X.of)(U._loadedConfig):this.loader.load(I.injector,U)).pipe((0,ve.z)(le=>(U._loadedConfig=le,this.processRoutes(le.module,le.routes)))))}}return x.\u0275fac=function(I){return new(I||x)(y.LFG(Zi),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(wo))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})(),yu=(()=>{class x{constructor(I,U,Y={}){this.router=I,this.viewportScroller=U,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof cn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Sn&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof ze&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,U){this.router.triggerEvent(new ze(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return x.\u0275fac=function(I){y.$Z()},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})();const Qs=new y.OlP("ROUTER_CONFIGURATION"),Js=new y.OlP("ROUTER_FORROOT_GUARD"),vs=[gt.Ye,{provide:gn,useClass:un},{provide:Zi,useFactory:function vu(x,D,I,U,Y,le,Re={},We,$e){const en=new Zi(null,x,D,I,U,Y,Yt(le));return We&&(en.urlHandlingStrategy=We),$e&&(en.routeReuseStrategy=$e),function Au(x,D){x.errorHandler&&(D.errorHandler=x.errorHandler),x.malformedUriErrorHandler&&(D.malformedUriErrorHandler=x.malformedUriErrorHandler),x.onSameUrlNavigation&&(D.onSameUrlNavigation=x.onSameUrlNavigation),x.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=x.paramsInheritanceStrategy),x.relativeLinkResolution&&(D.relativeLinkResolution=x.relativeLinkResolution),x.urlUpdateStrategy&&(D.urlUpdateStrategy=x.urlUpdateStrategy),x.canceledNavigationResolution&&(D.canceledNavigationResolution=x.canceledNavigationResolution)}(Re,en),Re.enableTracing&&en.events.subscribe(yr=>{var Kn,ln;null===(Kn=console.group)||void 0===Kn||Kn.call(console,`Router Event: ${yr.constructor.name}`),console.log(yr.toString()),console.log(yr),null===(ln=console.groupEnd)||void 0===ln||ln.call(console)}),en},deps:[gn,ii,gt.Ye,y.zs3,y.Sil,Bi,Qs,[class Na{},new y.FiY],[class uo{},new y.FiY]]},ii,{provide:Xe,useFactory:function Eu(x){return x.routerState.root},deps:[Zi]},tu,mu,class Su{preload(D,I){return I().pipe((0,Zr.K)(()=>(0,X.of)(null)))}},{provide:Qs,useValue:{enableTracing:!1}}];function mo(){return new y.PXZ("Router",Zi)}let fa=(()=>{class x{constructor(I,U){}static forRoot(I,U){return{ngModule:x,providers:[vs,Jo(I),{provide:Js,useFactory:_u,deps:[[Zi,new y.FiY,new y.tp0]]},{provide:Qs,useValue:U||{}},{provide:gt.S$,useFactory:Qo,deps:[gt.lw,[new y.tBr(gt.mr),new y.FiY],Qs]},{provide:yu,useFactory:Oa,deps:[Zi,gt.EM,Qs]},{provide:wo,useExisting:U&&U.preloadingStrategy?U.preloadingStrategy:mu},{provide:y.PXZ,multi:!0,useFactory:mo},[pa,{provide:y.ip1,multi:!0,useFactory:Bu,deps:[pa]},{provide:ju,useFactory:nu,deps:[pa]},{provide:y.tb,multi:!0,useExisting:ju}]]}}static forChild(I){return{ngModule:x,providers:[Jo(I)]}}}return x.\u0275fac=function(I){return new(I||x)(y.LFG(Js,8),y.LFG(Zi,8))},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({}),x})();function Oa(x,D,I){return I.scrollOffset&&D.setOffset(I.scrollOffset),new yu(x,D,I)}function Qo(x,D,I={}){return I.useHash?new gt.Do(x,D):new gt.b0(x,D)}function _u(x){return"guarded"}function Jo(x){return[{provide:y.deG,multi:!0,useValue:x},{provide:Bi,multi:!0,useValue:x}]}let pa=(()=>{class x{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ie.x}appInitializer(){return this.injector.get(gt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let U=null;const Y=new Promise(We=>U=We),le=this.injector.get(Zi),Re=this.injector.get(Qs);return"disabled"===Re.initialNavigation?(le.setUpLocationChangeListener(),U(!0)):"enabled"===Re.initialNavigation||"enabledBlocking"===Re.initialNavigation?(le.hooks.afterPreactivation=()=>this.initNavigation?(0,X.of)(null):(this.initNavigation=!0,U(!0),this.resultOfPreactivationDone),le.initialNavigation()):U(!0),Y})}bootstrapListener(I){const U=this.injector.get(Qs),Y=this.injector.get(tu),le=this.injector.get(yu),Re=this.injector.get(Zi),We=this.injector.get(y.z2F);I===We.components[0]&&(("enabledNonBlocking"===U.initialNavigation||void 0===U.initialNavigation)&&Re.initialNavigation(),Y.setUpPreloading(),le.init(),Re.resetRootComponentType(We.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return x.\u0275fac=function(I){return new(I||x)(y.LFG(y.zs3))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})();function Bu(x){return x.appInitializer.bind(x)}function nu(x){return x.bootstrapListener.bind(x)}const ju=new y.OlP("Router Initializer")},3942:(fn,ct,$)=>{$.d(ct,{Z:()=>ht});var y=$(2090),B=$(4859),X=$(6881),ie=$(1877);class Ue{constructor(mt,Ft){this._delegate=mt,this.firebase=Ft,(0,X._addComponent)(mt,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=mt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this._delegate.automaticDataCollectionEnabled=mt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(mt=>{this._delegate.checkDestroyed(),mt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,X.deleteApp)(this._delegate)))}_getService(mt,Ft=X._DEFAULT_ENTRY_NAME){var dn;this._delegate.checkDestroyed();const Xt=this._delegate.container.getProvider(mt);return!Xt.isInitialized()&&"EXPLICIT"===(null===(dn=Xt.getComponent())||void 0===dn?void 0:dn.instantiationMode)&&Xt.initialize(),Xt.getImmediate({identifier:Ft})}_removeServiceInstance(mt,Ft=X._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(mt).clearInstance(Ft)}_addComponent(mt){(0,X._addComponent)(this._delegate,mt)}_addOrOverwriteComponent(mt){(0,X._addOrOverwriteComponent)(this._delegate,mt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Je=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),be=function at(){const Bt=function Ge(Bt){const mt={},Ft={__esModule:!0,initializeApp:function we(pt,et={}){const Ut=X.initializeApp(pt,et);if((0,y.r3)(mt,Ut.name))return mt[Ut.name];const bt=new Bt(Ut,Ft);return mt[Ut.name]=bt,bt},app:Xt,registerVersion:X.registerVersion,setLogLevel:X.setLogLevel,onLog:X.onLog,apps:null,SDK_VERSION:X.SDK_VERSION,INTERNAL:{registerComponent:function it(pt){const et=pt.name,Ut=et.replace("-compat","");if(X._registerComponent(pt)&&"PUBLIC"===pt.type){const bt=(Fn=Xt())=>{if("function"!=typeof Fn[Ut])throw Je.create("invalid-app-argument",{appName:et});return Fn[Ut]()};void 0!==pt.serviceProps&&(0,y.ZB)(bt,pt.serviceProps),Ft[Ut]=bt,Bt.prototype[Ut]=function(...Fn){return this._getService.bind(this,et).apply(this,pt.multipleInstances?Fn:[])}}return"PUBLIC"===pt.type?Ft[Ut]:null},removeApp:function dn(pt){delete mt[pt]},useAsService:function Et(pt,et){return"serverAuth"===et?null:et},modularAPIs:X}};function Xt(pt){if(!(0,y.r3)(mt,pt=pt||X._DEFAULT_ENTRY_NAME))throw Je.create("no-app",{appName:pt});return mt[pt]}return Ft.default=Ft,Object.defineProperty(Ft,"apps",{get:function Me(){return Object.keys(mt).map(pt=>mt[pt])}}),Xt.App=Bt,Ft}(Ue);return Bt.INTERNAL=Object.assign(Object.assign({},Bt.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function mt(Ft){(0,y.ZB)(Bt,Ft)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),Bt}(),Ce=new ie.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){Ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Bt=self.firebase.SDK_VERSION;Bt&&Bt.indexOf("LITE")>=0&&Ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ht=be;!function ft(Bt){(0,X.registerVersion)("@firebase/app-compat","0.2.13",Bt)}()},6881:(fn,ct,$)=>{$.r(ct),$.d(ct,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Yt,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>At,_addOrOverwriteComponent:()=>Wt,_apps:()=>ze,_clearComponents:()=>Mn,_components:()=>lt,_getProvider:()=>Ur,_registerComponent:()=>nn,_removeServiceInstance:()=>er,deleteApp:()=>tr,getApp:()=>lr,getApps:()=>_r,initializeApp:()=>Rr,onLog:()=>fi,registerVersion:()=>Qr,setLogLevel:()=>Fi});var y=$(5861),B=$(4859),X=$(1877),ie=$(2090);let Ke,Je;const be=new WeakMap,Ce=new WeakMap,tt=new WeakMap,Lt=new WeakMap,ft=new WeakMap;let mt={get(Tt,yt,Vt){if(Tt instanceof IDBTransaction){if("done"===yt)return Ce.get(Tt);if("objectStoreNames"===yt)return Tt.objectStoreNames||tt.get(Tt);if("store"===yt)return Vt.objectStoreNames[1]?void 0:Vt.objectStore(Vt.objectStoreNames[0])}return we(Tt[yt])},set:(Tt,yt,Vt)=>(Tt[yt]=Vt,!0),has:(Tt,yt)=>Tt instanceof IDBTransaction&&("done"===yt||"store"===yt)||yt in Tt};function Xt(Tt){return"function"==typeof Tt?function dn(Tt){return Tt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function at(){return Je||(Je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Tt)?function(...yt){return Tt.apply(Me(this),yt),we(be.get(this))}:function(...yt){return we(Tt.apply(Me(this),yt))}:function(yt,...Vt){const Dt=Tt.call(Me(this),yt,...Vt);return tt.set(Dt,yt.sort?yt.sort():[yt]),we(Dt)}}(Tt):(Tt instanceof IDBTransaction&&function Bt(Tt){if(Ce.has(Tt))return;const yt=new Promise((Vt,Dt)=>{const sn=()=>{Tt.removeEventListener("complete",Tn),Tt.removeEventListener("error",ar),Tt.removeEventListener("abort",ar)},Tn=()=>{Vt(),sn()},ar=()=>{Dt(Tt.error||new DOMException("AbortError","AbortError")),sn()};Tt.addEventListener("complete",Tn),Tt.addEventListener("error",ar),Tt.addEventListener("abort",ar)});Ce.set(Tt,yt)}(Tt),((Tt,yt)=>yt.some(Vt=>Tt instanceof Vt))(Tt,function Ge(){return Ke||(Ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Tt,mt):Tt)}function we(Tt){if(Tt instanceof IDBRequest)return function ht(Tt){const yt=new Promise((Vt,Dt)=>{const sn=()=>{Tt.removeEventListener("success",Tn),Tt.removeEventListener("error",ar)},Tn=()=>{Vt(we(Tt.result)),sn()},ar=()=>{Dt(Tt.error),sn()};Tt.addEventListener("success",Tn),Tt.addEventListener("error",ar)});return yt.then(Vt=>{Vt instanceof IDBCursor&&be.set(Vt,Tt)}).catch(()=>{}),ft.set(yt,Tt),yt}(Tt);if(Lt.has(Tt))return Lt.get(Tt);const yt=Xt(Tt);return yt!==Tt&&(Lt.set(Tt,yt),ft.set(yt,Tt)),yt}const Me=Tt=>ft.get(Tt),pt=["get","getKey","getAll","getAllKeys","count"],et=["put","add","delete","clear"],Ut=new Map;function bt(Tt,yt){if(!(Tt instanceof IDBDatabase)||yt in Tt||"string"!=typeof yt)return;if(Ut.get(yt))return Ut.get(yt);const Vt=yt.replace(/FromIndex$/,""),Dt=yt!==Vt,sn=et.includes(Vt);if(!(Vt in(Dt?IDBIndex:IDBObjectStore).prototype)||!sn&&!pt.includes(Vt))return;const Tn=function(){var ar=(0,y.Z)(function*(Xr,...vr){const Br=this.transaction(Xr,sn?"readwrite":"readonly");let ai=Br.store;return Dt&&(ai=ai.index(vr.shift())),(yield Promise.all([ai[Vt](...vr),sn&&Br.done]))[0]});return function(vr){return ar.apply(this,arguments)}}();return Ut.set(yt,Tn),Tn}!function Ft(Tt){mt=Tt(mt)}(Tt=>G_($_({},Tt),{get:(yt,Vt,Dt)=>bt(yt,Vt)||Tt.get(yt,Vt,Dt),has:(yt,Vt)=>!!bt(yt,Vt)||Tt.has(yt,Vt)}));class Fn{constructor(yt){this.container=yt}getPlatformInfoString(){return this.container.getProviders().map(Vt=>{if(function Ht(Tt){const yt=Tt.getComponent();return"VERSION"===(null==yt?void 0:yt.type)}(Vt)){const Dt=Vt.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(Vt=>Vt).join(" ")}}const Nn="@firebase/app",Zr=new X.Yd("@firebase/app"),Pt="[DEFAULT]",Fe={[Nn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ze=new Map,lt=new Map;function At(Tt,yt){try{Tt.container.addComponent(yt)}catch(Vt){Zr.debug(`Component ${yt.name} failed to register with FirebaseApp ${Tt.name}`,Vt)}}function Wt(Tt,yt){Tt.container.addOrOverwriteComponent(yt)}function nn(Tt){const yt=Tt.name;if(lt.has(yt))return Zr.debug(`There were multiple attempts to register component ${yt}.`),!1;lt.set(yt,Tt);for(const Vt of ze.values())At(Vt,Tt);return!0}function Ur(Tt,yt){const Vt=Tt.container.getProvider("heartbeat").getImmediate({optional:!0});return Vt&&Vt.triggerHeartbeat(),Tt.container.getProvider(yt)}function er(Tt,yt,Vt=Pt){Ur(Tt,yt).clearInstance(Vt)}function Mn(){lt.clear()}const Tr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ar{constructor(yt,Vt,Dt){this._isDeleted=!1,this._options=Object.assign({},yt),this._config=Object.assign({},Vt),this._name=Vt.name,this._automaticDataCollectionEnabled=Vt.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this.checkDestroyed(),this._automaticDataCollectionEnabled=yt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(yt){this._isDeleted=yt}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Yt="9.23.0";function Rr(Tt,yt={}){let Vt=Tt;"object"!=typeof yt&&(yt={name:yt});const Dt=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},yt),sn=Dt.name;if("string"!=typeof sn||!sn)throw Tr.create("bad-app-name",{appName:String(sn)});if(Vt||(Vt=(0,ie.aH)()),!Vt)throw Tr.create("no-options");const Tn=ze.get(sn);if(Tn){if((0,ie.vZ)(Vt,Tn.options)&&(0,ie.vZ)(Dt,Tn.config))return Tn;throw Tr.create("duplicate-app",{appName:sn})}const ar=new B.H0(sn);for(const vr of lt.values())ar.addComponent(vr);const Xr=new Ar(Vt,Dt,ar);return ze.set(sn,Xr),Xr}function lr(Tt=Pt){const yt=ze.get(Tt);if(!yt&&Tt===Pt&&(0,ie.aH)())return Rr();if(!yt)throw Tr.create("no-app",{appName:Tt});return yt}function _r(){return Array.from(ze.values())}function tr(Tt){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,y.Z)(function*(Tt){const yt=Tt.name;ze.has(yt)&&(ze.delete(yt),yield Promise.all(Tt.container.getProviders().map(Vt=>Vt.delete())),Tt.isDeleted=!0)})).apply(this,arguments)}function Qr(Tt,yt,Vt){var Dt;let sn=null!==(Dt=Fe[Tt])&&void 0!==Dt?Dt:Tt;Vt&&(sn+=`-${Vt}`);const Tn=sn.match(/\s|\//),ar=yt.match(/\s|\//);if(Tn||ar){const Xr=[`Unable to register library "${sn}" with version "${yt}":`];return Tn&&Xr.push(`library name "${sn}" contains illegal characters (whitespace or "/")`),Tn&&ar&&Xr.push("and"),ar&&Xr.push(`version name "${yt}" contains illegal characters (whitespace or "/")`),void Zr.warn(Xr.join(" "))}nn(new B.wA(`${sn}-version`,()=>({library:sn,version:yt}),"VERSION"))}function fi(Tt,yt){if(null!==Tt&&"function"!=typeof Tt)throw Tr.create("invalid-log-argument");(0,X.Am)(Tt,yt)}function Fi(Tt){(0,X.Ub)(Tt)}const Pe="firebase-heartbeat-store";let Ae=null;function he(){return Ae||(Ae=function it(Tt,yt,{blocked:Vt,upgrade:Dt,blocking:sn,terminated:Tn}={}){const ar=indexedDB.open(Tt,yt),Xr=we(ar);return Dt&&ar.addEventListener("upgradeneeded",vr=>{Dt(we(ar.result),vr.oldVersion,vr.newVersion,we(ar.transaction),vr)}),Vt&&ar.addEventListener("blocked",vr=>Vt(vr.oldVersion,vr.newVersion,vr)),Xr.then(vr=>{Tn&&vr.addEventListener("close",()=>Tn()),sn&&vr.addEventListener("versionchange",Br=>sn(Br.oldVersion,Br.newVersion,Br))}).catch(()=>{}),Xr}("firebase-heartbeat-database",1,{upgrade:(Tt,yt)=>{0===yt&&Tt.createObjectStore(Pe)}}).catch(Tt=>{throw Tr.create("idb-open",{originalErrorMessage:Tt.message})})),Ae}function G(){return(G=(0,y.Z)(function*(Tt){try{return yield(yield he()).transaction(Pe).objectStore(Pe).get(Se(Tt))}catch(yt){if(yt instanceof ie.ZR)Zr.warn(yt.message);else{const Vt=Tr.create("idb-get",{originalErrorMessage:null==yt?void 0:yt.message});Zr.warn(Vt.message)}}})).apply(this,arguments)}function ne(Tt,yt){return se.apply(this,arguments)}function se(){return(se=(0,y.Z)(function*(Tt,yt){try{const Dt=(yield he()).transaction(Pe,"readwrite");yield Dt.objectStore(Pe).put(yt,Se(Tt)),yield Dt.done}catch(Vt){if(Vt instanceof ie.ZR)Zr.warn(Vt.message);else{const Dt=Tr.create("idb-set",{originalErrorMessage:null==Vt?void 0:Vt.message});Zr.warn(Dt.message)}}})).apply(this,arguments)}function Se(Tt){return`${Tt.name}!${Tt.options.appId}`}class gn{constructor(yt){this.container=yt,this._heartbeatsCache=null;const Vt=this.container.getProvider("app").getImmediate();this._storage=new $n(Vt),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var yt=this;return(0,y.Z)(function*(){const Dt=yt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=un();if(null===yt._heartbeatsCache&&(yt._heartbeatsCache=yield yt._heartbeatsCachePromise),yt._heartbeatsCache.lastSentHeartbeatDate!==sn&&!yt._heartbeatsCache.heartbeats.some(Tn=>Tn.date===sn))return yt._heartbeatsCache.heartbeats.push({date:sn,agent:Dt}),yt._heartbeatsCache.heartbeats=yt._heartbeatsCache.heartbeats.filter(Tn=>{const ar=new Date(Tn.date).valueOf();return Date.now()-ar<=2592e6}),yt._storage.overwrite(yt._heartbeatsCache)})()}getHeartbeatsHeader(){var yt=this;return(0,y.Z)(function*(){if(null===yt._heartbeatsCache&&(yield yt._heartbeatsCachePromise),null===yt._heartbeatsCache||0===yt._heartbeatsCache.heartbeats.length)return"";const Vt=un(),{heartbeatsToSend:Dt,unsentEntries:sn}=function Rn(Tt,yt=1024){const Vt=[];let Dt=Tt.slice();for(const sn of Tt){const Tn=Vt.find(ar=>ar.agent===sn.agent);if(Tn){if(Tn.dates.push(sn.date),Jr(Vt)>yt){Tn.dates.pop();break}}else if(Vt.push({agent:sn.agent,dates:[sn.date]}),Jr(Vt)>yt){Vt.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:Vt,unsentEntries:Dt}}(yt._heartbeatsCache.heartbeats),Tn=(0,ie.L)(JSON.stringify({version:2,heartbeats:Dt}));return yt._heartbeatsCache.lastSentHeartbeatDate=Vt,sn.length>0?(yt._heartbeatsCache.heartbeats=sn,yield yt._storage.overwrite(yt._heartbeatsCache)):(yt._heartbeatsCache.heartbeats=[],yt._storage.overwrite(yt._heartbeatsCache)),Tn})()}}function un(){return(new Date).toISOString().substring(0,10)}class $n{constructor(yt){this.app=yt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var yt=this;return(0,y.Z)(function*(){return(yield yt._canUseIndexedDBPromise)&&(yield function ge(Tt){return G.apply(this,arguments)}(yt.app))||{heartbeats:[]}})()}overwrite(yt){var Vt=this;return(0,y.Z)(function*(){var Dt;if(yield Vt._canUseIndexedDBPromise){const Tn=yield Vt.read();return ne(Vt.app,{lastSentHeartbeatDate:null!==(Dt=yt.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Tn.lastSentHeartbeatDate,heartbeats:yt.heartbeats})}})()}add(yt){var Vt=this;return(0,y.Z)(function*(){var Dt;if(yield Vt._canUseIndexedDBPromise){const Tn=yield Vt.read();return ne(Vt.app,{lastSentHeartbeatDate:null!==(Dt=yt.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Tn.lastSentHeartbeatDate,heartbeats:[...Tn.heartbeats,...yt.heartbeats]})}})()}}function Jr(Tt){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Tt})).length}!function Pi(Tt){nn(new B.wA("platform-logger",yt=>new Fn(yt),"PRIVATE")),nn(new B.wA("heartbeat",yt=>new gn(yt),"PRIVATE")),Qr(Nn,"0.9.13",Tt),Qr(Nn,"0.9.13","esm2017"),Qr("fire-js","")}("")},4859:(fn,ct,$)=>{$.d(ct,{H0:()=>Ge,wA:()=>X});var y=$(5861),B=$(2090);class X{constructor(be,Ce,tt){this.name=be,this.instanceFactory=Ce,this.type=tt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(be){return this.instantiationMode=be,this}setMultipleInstances(be){return this.multipleInstances=be,this}setServiceProps(be){return this.serviceProps=be,this}setInstanceCreatedCallback(be){return this.onInstanceCreated=be,this}}const ie="[DEFAULT]";class Ue{constructor(be,Ce){this.name=be,this.container=Ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(be){const Ce=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(Ce)){const tt=new B.BH;if(this.instancesDeferred.set(Ce,tt),this.isInitialized(Ce)||this.shouldAutoInitialize())try{const Lt=this.getOrInitializeService({instanceIdentifier:Ce});Lt&&tt.resolve(Lt)}catch(Lt){}}return this.instancesDeferred.get(Ce).promise}getImmediate(be){var Ce;const tt=this.normalizeInstanceIdentifier(null==be?void 0:be.identifier),Lt=null!==(Ce=null==be?void 0:be.optional)&&void 0!==Ce&&Ce;if(!this.isInitialized(tt)&&!this.shouldAutoInitialize()){if(Lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:tt})}catch(ft){if(Lt)return null;throw ft}}getComponent(){return this.component}setComponent(be){if(be.name!==this.name)throw Error(`Mismatching Component ${be.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=be,this.shouldAutoInitialize()){if(function Je(at){return"EAGER"===at.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(Ce){}for(const[Ce,tt]of this.instancesDeferred.entries()){const Lt=this.normalizeInstanceIdentifier(Ce);try{const ft=this.getOrInitializeService({instanceIdentifier:Lt});tt.resolve(ft)}catch(ft){}}}}clearInstance(be=ie){this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}delete(){var be=this;return(0,y.Z)(function*(){const Ce=Array.from(be.instances.values());yield Promise.all([...Ce.filter(tt=>"INTERNAL"in tt).map(tt=>tt.INTERNAL.delete()),...Ce.filter(tt=>"_delete"in tt).map(tt=>tt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(be=ie){return this.instances.has(be)}getOptions(be=ie){return this.instancesOptions.get(be)||{}}initialize(be={}){const{options:Ce={}}=be,tt=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(tt))throw Error(`${this.name}(${tt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Lt=this.getOrInitializeService({instanceIdentifier:tt,options:Ce});for(const[ft,ht]of this.instancesDeferred.entries())tt===this.normalizeInstanceIdentifier(ft)&&ht.resolve(Lt);return Lt}onInit(be,Ce){var tt;const Lt=this.normalizeInstanceIdentifier(Ce),ft=null!==(tt=this.onInitCallbacks.get(Lt))&&void 0!==tt?tt:new Set;ft.add(be),this.onInitCallbacks.set(Lt,ft);const ht=this.instances.get(Lt);return ht&&be(ht,Lt),()=>{ft.delete(be)}}invokeOnInitCallbacks(be,Ce){const tt=this.onInitCallbacks.get(Ce);if(tt)for(const Lt of tt)try{Lt(be,Ce)}catch(ft){}}getOrInitializeService({instanceIdentifier:be,options:Ce={}}){let tt=this.instances.get(be);if(!tt&&this.component&&(tt=this.component.instanceFactory(this.container,{instanceIdentifier:(at=be,at===ie?void 0:at),options:Ce}),this.instances.set(be,tt),this.instancesOptions.set(be,Ce),this.invokeOnInitCallbacks(tt,be),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,be,tt)}catch(Lt){}var at;return tt||null}normalizeInstanceIdentifier(be=ie){return this.component?this.component.multipleInstances?be:ie:be}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ge{constructor(be){this.name=be,this.providers=new Map}addComponent(be){const Ce=this.getProvider(be.name);if(Ce.isComponentSet())throw new Error(`Component ${be.name} has already been registered with ${this.name}`);Ce.setComponent(be)}addOrOverwriteComponent(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}getProvider(be){if(this.providers.has(be))return this.providers.get(be);const Ce=new Ue(be,this);return this.providers.set(be,Ce),Ce}getProviders(){return Array.from(this.providers.values())}}},1877:(fn,ct,$)=>{$.d(ct,{Am:()=>at,Ub:()=>Ge,Yd:()=>Je,in:()=>B});const y=[];var B=(()=>{return(be=B||(B={}))[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",B;var be})();const X={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ie=B.INFO,Ue={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Ke=(be,Ce,...tt)=>{if(Ce<be.logLevel)return;const Lt=(new Date).toISOString(),ft=Ue[Ce];if(!ft)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ce})`);console[ft](`[${Lt}]  ${be.name}:`,...tt)};class Je{constructor(Ce){this.name=Ce,this._logLevel=ie,this._logHandler=Ke,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(Ce){if(!(Ce in B))throw new TypeError(`Invalid value "${Ce}" assigned to \`logLevel\``);this._logLevel=Ce}setLogLevel(Ce){this._logLevel="string"==typeof Ce?X[Ce]:Ce}get logHandler(){return this._logHandler}set logHandler(Ce){if("function"!=typeof Ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ce){this._userLogHandler=Ce}debug(...Ce){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...Ce),this._logHandler(this,B.DEBUG,...Ce)}log(...Ce){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...Ce),this._logHandler(this,B.VERBOSE,...Ce)}info(...Ce){this._userLogHandler&&this._userLogHandler(this,B.INFO,...Ce),this._logHandler(this,B.INFO,...Ce)}warn(...Ce){this._userLogHandler&&this._userLogHandler(this,B.WARN,...Ce),this._logHandler(this,B.WARN,...Ce)}error(...Ce){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...Ce),this._logHandler(this,B.ERROR,...Ce)}}function Ge(be){y.forEach(Ce=>{Ce.setLogLevel(be)})}function at(be,Ce){for(const tt of y){let Lt=null;Ce&&Ce.level&&(Lt=X[Ce.level]),tt.userLogHandler=null===be?null:(ft,ht,...Bt)=>{const mt=Bt.map(Ft=>{if(null==Ft)return null;if("string"==typeof Ft)return Ft;if("number"==typeof Ft||"boolean"==typeof Ft)return Ft.toString();if(Ft instanceof Error)return Ft.message;try{return JSON.stringify(Ft)}catch(dn){return null}}).filter(Ft=>Ft).join(" ");ht>=(null!=Lt?Lt:ft.logLevel)&&be({level:B[ht].toLowerCase(),message:mt,args:Bt,type:ft.name})}}}},259:(fn,ct,$)=>{$.d(ct,{C6:()=>y.getApps,KN:()=>y.registerVersion,Mq:()=>y.getApp,ZF:()=>y.initializeApp});var y=$(6881);(0,y.registerVersion)("firebase","9.23.0","app")},9260:(fn,ct,$)=>{$.d(ct,{Z:()=>y.Z});var y=$(3942);y.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(fn,ct,$)=>{$.r(ct);var y=$(5861),B=$(3942),X=$(1389),ie=$(2090),Je=($(6881),$(1877),$(4859));function Ge(){return window}function Ce(){return(Ce=(0,y.Z)(function*(he,ge,G){var ne;const{BuildInfo:se}=Ge();(0,X.as)(ge.sessionId,"AuthEvent did not contain a session ID");const Se=yield Ft(ge.sessionId),dt={};return(0,X.at)()?dt.ibi=se.packageName:(0,X.au)()?dt.apn=se.packageName:(0,X.av)(he,"operation-not-supported-in-this-environment"),se.displayName&&(dt.appDisplayName=se.displayName),dt.sessionId=Se,(0,X.aw)(he,G,ge.type,void 0,null!==(ne=ge.eventId)&&void 0!==ne?ne:void 0,dt)})).apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(he){const{BuildInfo:ge}=Ge(),G={};(0,X.at)()?G.iosBundleId=ge.packageName:(0,X.au)()?G.androidPackageName=ge.packageName:(0,X.av)(he,"operation-not-supported-in-this-environment"),yield(0,X.ax)(he,G)})).apply(this,arguments)}function Bt(){return(Bt=(0,y.Z)(function*(he,ge,G){const{cordova:ne}=Ge();let se=()=>{};try{yield new Promise((Se,dt)=>{let zt=null;function gn(){var $n;Se();const Jr=null===($n=ne.plugins.browsertab)||void 0===$n?void 0:$n.close;"function"==typeof Jr&&Jr(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function un(){zt||(zt=window.setTimeout(()=>{dt((0,X.az)(he,"redirect-cancelled-by-user"))},2e3))}function Rn(){"visible"===(null==document?void 0:document.visibilityState)&&un()}ge.addPassiveListener(gn),document.addEventListener("resume",un,!1),(0,X.au)()&&document.addEventListener("visibilitychange",Rn,!1),se=()=>{ge.removePassiveListener(gn),document.removeEventListener("resume",un,!1),document.removeEventListener("visibilitychange",Rn,!1),zt&&window.clearTimeout(zt)}})}finally{se()}})).apply(this,arguments)}function Ft(he){return dn.apply(this,arguments)}function dn(){return(dn=(0,y.Z)(function*(he){const ge=Xt(he),G=yield crypto.subtle.digest("SHA-256",ge);return Array.from(new Uint8Array(G)).map(se=>se.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Xt(he){if((0,X.as)(/[0-9a-zA-Z]+/.test(he),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(he);const ge=new ArrayBuffer(he.length),G=new Uint8Array(ge);for(let ne=0;ne<he.length;ne++)G[ne]=he.charCodeAt(ne);return G}class Me extends X.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ge=>{this.resolveInialized=ge})}addPassiveListener(ge){this.passiveListeners.add(ge)}removePassiveListener(ge){this.passiveListeners.delete(ge)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ge){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(ge)),super.onEvent(ge)}initialized(){var ge=this;return(0,y.Z)(function*(){yield ge.initPromise})()}}function pt(he){return et.apply(this,arguments)}function et(){return(et=(0,y.Z)(function*(he){const ge=yield Fn()._get(Ht(he));return ge&&(yield Fn()._remove(Ht(he))),ge})).apply(this,arguments)}function bt(){const he=[],ge="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const ne=Math.floor(Math.random()*ge.length);he.push(ge.charAt(ne))}return he.join("")}function Fn(){return(0,X.aC)(X.b)}function Ht(he){return(0,X.aD)("authEvent",he.config.apiKey,he.name)}function Zr(he){if(!(null==he?void 0:he.includes("?")))return{};const[ge,...G]=he.split("?");return(0,ie.zd)(G.join("?"))}function an(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,X.az)("no-auth-event")}}function Ee(){var he;return(null===(he=null==self?void 0:self.location)||void 0===he?void 0:he.protocol)||null}function gt(he=(0,ie.z$)()){return!("file:"!==Ee()&&"ionic:"!==Ee()&&"capacitor:"!==Ee()||!he.toLowerCase().match(/iphone|ipad|ipod|android/))}function pr(){try{const he=self.localStorage,ge=X.aL();if(he)return he.setItem(ge,"1"),he.removeItem(ge),!function Wn(he=(0,ie.z$)()){return function cn(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Sn(he=(0,ie.z$)()){return/Edge\/\d+/.test(he)}(he)}()||(0,ie.hl)()}catch(he){return or()&&(0,ie.hl)()}return!1}function or(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function xe(){return"http:"===Ee()||"https:"===Ee()}()||(0,ie.ru)()||gt())&&!function tn(){return(0,ie.b$)()||(0,ie.UG)()}()&&pr()&&!or()}function Fr(){return gt()&&"undefined"!=typeof document}function Jn(){return(Jn=(0,y.Z)(function*(){return!!Fr()&&new Promise(he=>{const ge=setTimeout(()=>{he(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ge),he(!0)})})})).apply(this,arguments)}const On={LOCAL:"local",NONE:"none",SESSION:"session"},li=X.aA,Xi="persistence";function Fe(he){return ze.apply(this,arguments)}function ze(){return(ze=(0,y.Z)(function*(he){yield he._initializationPromise;const ge=At(),G=X.aD(Xi,he.config.apiKey,he.name);ge&&ge.setItem(G,he._getPersistence())})).apply(this,arguments)}function At(){var he;try{return(null===(he=function Dn(){return"undefined"!=typeof window?window:null}())||void 0===he?void 0:he.sessionStorage)||null}catch(ge){return null}}const Wt=X.aA;class nn{constructor(){this.browserResolver=X.aC(X.k),this.cordovaResolver=X.aC(class fr{constructor(){this._redirectPersistence=X.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=X.aE,this._overrideRedirectResult=X.aF}_initialize(ge){var G=this;return(0,y.Z)(function*(){const ne=ge._key();let se=G.eventManagers.get(ne);return se||(se=new Me(ge),G.eventManagers.set(ne,se),G.attachCallbackListeners(ge,se)),se})()}_openPopup(ge){(0,X.av)(ge,"operation-not-supported-in-this-environment")}_openRedirect(ge,G,ne,se){var Se=this;return(0,y.Z)(function*(){!function mt(he){var ge,G,ne,se,Se,dt,zt,gn,un,Rn;const $n=Ge();(0,X.aA)("function"==typeof(null===(ge=null==$n?void 0:$n.universalLinks)||void 0===ge?void 0:ge.subscribe),he,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,X.aA)(void 0!==(null===(G=null==$n?void 0:$n.BuildInfo)||void 0===G?void 0:G.packageName),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,X.aA)("function"==typeof(null===(Se=null===(se=null===(ne=null==$n?void 0:$n.cordova)||void 0===ne?void 0:ne.plugins)||void 0===se?void 0:se.browsertab)||void 0===Se?void 0:Se.openUrl),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,X.aA)("function"==typeof(null===(gn=null===(zt=null===(dt=null==$n?void 0:$n.cordova)||void 0===dt?void 0:dt.plugins)||void 0===zt?void 0:zt.browsertab)||void 0===gn?void 0:gn.isAvailable),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,X.aA)("function"==typeof(null===(Rn=null===(un=null==$n?void 0:$n.cordova)||void 0===un?void 0:un.InAppBrowser)||void 0===Rn?void 0:Rn.open),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ge);const dt=yield Se._initialize(ge);yield dt.initialized(),dt.resetRedirect(),(0,X.aG)(),yield Se._originValidation(ge);const zt=function it(he,ge,G=null){return{type:ge,eventId:G,urlResponse:null,sessionId:bt(),postBody:null,tenantId:he.tenantId,error:(0,X.az)(he,"no-auth-event")}}(ge,ne,se);yield function Et(he,ge){return Fn()._set(Ht(he),ge)}(ge,zt);const gn=yield function be(he,ge,G){return Ce.apply(this,arguments)}(ge,zt,G),un=yield function ft(he){const{cordova:ge}=Ge();return new Promise(G=>{ge.plugins.browsertab.isAvailable(ne=>{let se=null;ne?ge.plugins.browsertab.openUrl(he):se=ge.InAppBrowser.open(he,(0,X.ay)()?"_blank":"_system","location=yes"),G(se)})})}(gn);return function ht(he,ge,G){return Bt.apply(this,arguments)}(ge,dt,un)})()}_isIframeWebStorageSupported(ge,G){throw new Error("Method not implemented.")}_originValidation(ge){const G=ge._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function tt(he){return Lt.apply(this,arguments)}(ge)),this.originValidationPromises[G]}attachCallbackListeners(ge,G){const{universalLinks:ne,handleOpenURL:se,BuildInfo:Se}=Ge(),dt=setTimeout((0,y.Z)(function*(){yield pt(ge),G.onEvent(an())}),500),zt=function(){var Rn=(0,y.Z)(function*($n){clearTimeout(dt);const Jr=yield pt(ge);let Pi=null;Jr&&(null==$n?void 0:$n.url)&&(Pi=function Ut(he,ge){var G,ne;const se=function rn(he){const ge=Zr(he),G=ge.link?decodeURIComponent(ge.link):void 0,ne=Zr(G).link,se=ge.deep_link_id?decodeURIComponent(ge.deep_link_id):void 0;return Zr(se).link||se||ne||G||he}(ge);if(se.includes("/__/auth/callback")){const Se=Zr(se),dt=Se.firebaseError?function Nn(he){try{return JSON.parse(he)}catch(ge){return null}}(decodeURIComponent(Se.firebaseError)):null,zt=null===(ne=null===(G=null==dt?void 0:dt.code)||void 0===G?void 0:G.split("auth/"))||void 0===ne?void 0:ne[1],gn=zt?(0,X.az)(zt):null;return gn?{type:he.type,eventId:he.eventId,tenantId:he.tenantId,error:gn,urlResponse:null,sessionId:null,postBody:null}:{type:he.type,eventId:he.eventId,tenantId:he.tenantId,sessionId:he.sessionId,urlResponse:se,postBody:null}}return null}(Jr,$n.url)),G.onEvent(Pi||an())});return function(Jr){return Rn.apply(this,arguments)}}();void 0!==ne&&"function"==typeof ne.subscribe&&ne.subscribe(null,zt);const gn=se,un=`${Se.packageName.toLowerCase()}://`;Ge().handleOpenURL=function(){var Rn=(0,y.Z)(function*($n){if($n.toLowerCase().startsWith(un)&&zt({url:$n}),"function"==typeof gn)try{gn($n)}catch(Jr){console.error(Jr)}});return function($n){return Rn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=X.a,this._completeRedirectFn=X.aE,this._overrideRedirectResult=X.aF}_initialize(ge){var G=this;return(0,y.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(ge)})()}_openPopup(ge,G,ne,se){var Se=this;return(0,y.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openPopup(ge,G,ne,se)})()}_openRedirect(ge,G,ne,se){var Se=this;return(0,y.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openRedirect(ge,G,ne,se)})()}_isIframeWebStorageSupported(ge,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ge,G)}_originValidation(ge){return this.assertedUnderlyingResolver._originValidation(ge)}get _shouldInitProactively(){return Fr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ge=this;return(0,y.Z)(function*(){if(ge.underlyingResolver)return;const G=yield function wn(){return Jn.apply(this,arguments)}();ge.underlyingResolver=G?ge.cordovaResolver:ge.browserResolver})()}}function Ur(he){return he.unwrap()}function Mn(he){return Tr(he)}function Tr(he){const{_tokenResponse:ge}=he instanceof ie.ZR?he.customData:he;if(!ge)return null;if(!(he instanceof ie.ZR)&&"temporaryProof"in ge&&"phoneNumber"in ge)return X.P.credentialFromResult(he);const G=ge.providerId;if(!G||G===X.p.PASSWORD)return null;let ne;switch(G){case X.p.GOOGLE:ne=X.V;break;case X.p.FACEBOOK:ne=X.U;break;case X.p.GITHUB:ne=X.W;break;case X.p.TWITTER:ne=X.Z;break;default:const{oauthIdToken:se,oauthAccessToken:Se,oauthTokenSecret:dt,pendingToken:zt,nonce:gn}=ge;return Se||dt||se||zt?zt?G.startsWith("saml.")?X.aO._create(G,zt):X.L._fromParams({providerId:G,signInMethod:G,pendingToken:zt,idToken:se,accessToken:Se}):new X.X(G).credential({idToken:se,accessToken:Se,rawNonce:gn}):null}return he instanceof ie.ZR?ne.credentialFromError(he):ne.credentialFromResult(he)}function Ar(he,ge){return ge.catch(G=>{throw G instanceof ie.ZR&&function ci(he,ge){var G;const ne=null===(G=ge.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===(null==ge?void 0:ge.code))ge.resolver=new lr(he,X.aq(he,ge));else if(ne){const se=Tr(ge),Se=ge;se&&(Se.credential=se,Se.tenantId=ne.tenantId||void 0,Se.email=ne.email||void 0,Se.phoneNumber=ne.phoneNumber||void 0)}}(he,G),G}).then(G=>{const se=G.user;return{operationType:G.operationType,credential:Mn(G),additionalUserInfo:X.ao(G),user:_r.getOrCreate(se)}})}function Yt(he,ge){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,y.Z)(function*(he,ge){const G=yield ge;return{verificationId:G.verificationId,confirm:ne=>Ar(he,G.confirm(ne))}})).apply(this,arguments)}class lr{constructor(ge,G){this.resolver=G,this.auth=function er(he){return he.wrapped()}(ge)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ge){return Ar(Ur(this.auth),this.resolver.resolveSignIn(ge))}}class _r{constructor(ge){this._delegate=ge,this.multiFactor=X.ar(ge)}static getOrCreate(ge){return _r.USER_MAP.has(ge)||_r.USER_MAP.set(ge,new _r(ge)),_r.USER_MAP.get(ge)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ge){return this._delegate.getIdTokenResult(ge)}getIdToken(ge){return this._delegate.getIdToken(ge)}linkAndRetrieveDataWithCredential(ge){return this.linkWithCredential(ge)}linkWithCredential(ge){var G=this;return(0,y.Z)(function*(){return Ar(G.auth,X.a0(G._delegate,ge))})()}linkWithPhoneNumber(ge,G){var ne=this;return(0,y.Z)(function*(){return Yt(ne.auth,X.l(ne._delegate,ge,G))})()}linkWithPopup(ge){var G=this;return(0,y.Z)(function*(){return Ar(G.auth,X.d(G._delegate,ge,nn))})()}linkWithRedirect(ge){var G=this;return(0,y.Z)(function*(){return yield Fe(X.aH(G.auth)),X.g(G._delegate,ge,nn)})()}reauthenticateAndRetrieveDataWithCredential(ge){return this.reauthenticateWithCredential(ge)}reauthenticateWithCredential(ge){var G=this;return(0,y.Z)(function*(){return Ar(G.auth,X.a1(G._delegate,ge))})()}reauthenticateWithPhoneNumber(ge,G){return Yt(this.auth,X.r(this._delegate,ge,G))}reauthenticateWithPopup(ge){return Ar(this.auth,X.e(this._delegate,ge,nn))}reauthenticateWithRedirect(ge){var G=this;return(0,y.Z)(function*(){return yield Fe(X.aH(G.auth)),X.h(G._delegate,ge,nn)})()}sendEmailVerification(ge){return X.ae(this._delegate,ge)}unlink(ge){var G=this;return(0,y.Z)(function*(){return yield X.an(G._delegate,ge),G})()}updateEmail(ge){return X.aj(this._delegate,ge)}updatePassword(ge){return X.ak(this._delegate,ge)}updatePhoneNumber(ge){return X.u(this._delegate,ge)}updateProfile(ge){return X.ai(this._delegate,ge)}verifyBeforeUpdateEmail(ge,G){return X.af(this._delegate,ge,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_r.USER_MAP=new WeakMap;const tr=X.aA;let Wr=(()=>{class he{constructor(G,ne){if(this.app=G,ne.isInitialized())return this._delegate=ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:se}=G.options;tr(se,"invalid-api-key",{appName:G.name}),tr(se,"invalid-api-key",{appName:G.name});const Se="undefined"!=typeof window?nn:void 0;this._delegate=ne.initialize({options:{persistence:fi(se,G.name),popupRedirectResolver:Se}}),this._delegate._updateErrorMap(X.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_r.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,ne){X.I(this._delegate,G,ne)}applyActionCode(G){return X.a5(this._delegate,G)}checkActionCode(G){return X.a6(this._delegate,G)}confirmPasswordReset(G,ne){return X.a4(this._delegate,G,ne)}createUserWithEmailAndPassword(G,ne){var se=this;return(0,y.Z)(function*(){return Ar(se._delegate,X.a8(se._delegate,G,ne))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return X.ad(this._delegate,G)}isSignInWithEmailLink(G){return X.ab(this._delegate,G)}getRedirectResult(){var G=this;return(0,y.Z)(function*(){tr(jn(),G._delegate,"operation-not-supported-in-this-environment");const ne=yield X.j(G._delegate,nn);return ne?Ar(G._delegate,Promise.resolve(ne)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function nt(he,ge){(0,X.aH)(he)._logFramework(ge)}(this._delegate,G)}onAuthStateChanged(G,ne,se){const{next:Se,error:dt,complete:zt}=Qr(G,ne,se);return this._delegate.onAuthStateChanged(Se,dt,zt)}onIdTokenChanged(G,ne,se){const{next:Se,error:dt,complete:zt}=Qr(G,ne,se);return this._delegate.onIdTokenChanged(Se,dt,zt)}sendSignInLinkToEmail(G,ne){return X.aa(this._delegate,G,ne)}sendPasswordResetEmail(G,ne){return X.a3(this._delegate,G,ne||void 0)}setPersistence(G){var ne=this;return(0,y.Z)(function*(){let se;switch(function Pt(he,ge){li(Object.values(On).includes(ge),he,"invalid-persistence-type"),(0,ie.b$)()?li(ge!==On.SESSION,he,"unsupported-persistence-type"):(0,ie.UG)()?li(ge===On.NONE,he,"unsupported-persistence-type"):or()?li(ge===On.NONE||ge===On.LOCAL&&(0,ie.hl)(),he,"unsupported-persistence-type"):li(ge===On.NONE||pr(),he,"unsupported-persistence-type")}(ne._delegate,G),G){case On.SESSION:se=X.a;break;case On.LOCAL:se=(yield X.aC(X.i)._isAvailable())?X.i:X.b;break;case On.NONE:se=X.N;break;default:return X.av("argument-error",{appName:ne._delegate.name})}return ne._delegate.setPersistence(se)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return Ar(this._delegate,X._(this._delegate))}signInWithCredential(G){return Ar(this._delegate,X.$(this._delegate,G))}signInWithCustomToken(G){return Ar(this._delegate,X.a2(this._delegate,G))}signInWithEmailAndPassword(G,ne){return Ar(this._delegate,X.a9(this._delegate,G,ne))}signInWithEmailLink(G,ne){return Ar(this._delegate,X.ac(this._delegate,G,ne))}signInWithPhoneNumber(G,ne){return Yt(this._delegate,X.s(this._delegate,G,ne))}signInWithPopup(G){var ne=this;return(0,y.Z)(function*(){return tr(jn(),ne._delegate,"operation-not-supported-in-this-environment"),Ar(ne._delegate,X.c(ne._delegate,G,nn))})()}signInWithRedirect(G){var ne=this;return(0,y.Z)(function*(){return tr(jn(),ne._delegate,"operation-not-supported-in-this-environment"),yield Fe(ne._delegate),X.f(ne._delegate,G,nn)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return X.a7(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return he.Persistence=On,he})();function Qr(he,ge,G){let ne=he;"function"!=typeof he&&({next:ne,error:ge,complete:G}=he);const se=ne;return{next:dt=>se(dt&&_r.getOrCreate(dt)),error:ge,complete:G}}function fi(he,ge){const G=function lt(he,ge){const G=At();if(!G)return[];const ne=X.aD(Xi,he,ge);switch(G.getItem(ne)){case On.NONE:return[X.N];case On.LOCAL:return[X.i,X.a];case On.SESSION:return[X.a];default:return[]}}(he,ge);if("undefined"!=typeof self&&!G.includes(X.i)&&G.push(X.i),"undefined"!=typeof window)for(const ne of[X.b,X.a])G.includes(ne)||G.push(ne);return G.includes(X.N)||G.push(X.N),G}class Fi{constructor(){this.providerId="phone",this._delegate=new X.P(Ur(B.Z.auth()))}static credential(ge,G){return X.P.credential(ge,G)}verifyPhoneNumber(ge,G){return this._delegate.verifyPhoneNumber(ge,G)}unwrap(){return this._delegate}}Fi.PHONE_SIGN_IN_METHOD=X.P.PHONE_SIGN_IN_METHOD,Fi.PROVIDER_ID=X.P.PROVIDER_ID;const Ri=X.aA;class zr{constructor(ge,G,ne=B.Z.app()){var se;Ri(null===(se=ne.options)||void 0===se?void 0:se.apiKey,"invalid-api-key",{appName:ne.name}),this._delegate=new X.R(ge,G,ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ae(he){he.INTERNAL.registerComponent(new Je.wA("auth-compat",ge=>{const G=ge.getProvider("app-compat").getImmediate(),ne=ge.getProvider("auth");return new Wr(G,ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:X.A.EMAIL_SIGNIN,PASSWORD_RESET:X.A.PASSWORD_RESET,RECOVER_EMAIL:X.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:X.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:X.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:X.A.VERIFY_EMAIL}},EmailAuthProvider:X.Q,FacebookAuthProvider:X.U,GithubAuthProvider:X.W,GoogleAuthProvider:X.V,OAuthProvider:X.X,SAMLAuthProvider:X.Y,PhoneAuthProvider:Fi,PhoneMultiFactorGenerator:X.m,RecaptchaVerifier:zr,TwitterAuthProvider:X.Z,Auth:Wr,AuthCredential:X.J,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),he.registerVersion("@firebase/auth-compat","0.4.2")}(B.Z)},6197:(fn,ct,$)=>{$.d(ct,{U2:()=>Un,N8:()=>Ma,S1:()=>ac,yv:()=>al,jM:()=>aa,iH:()=>Hd,t8:()=>pe,Vx:()=>hn});var y=$(5861),B=$(6881),X=$(4859),ie=$(2090),Ue=$(1877);const Ke="@firebase/database";let Ge="";class be{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,c){null==c?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,ie.Wl)(c))}get(l){const c=this.domStorage_.getItem(this.prefixedName_(l));return null==c?null:(0,ie.cI)(c)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Ce{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,c){null==c?delete this.cache_[l]:this.cache_[l]=c}get(l){return(0,ie.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const tt=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const l=window[f];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new be(l)}}catch(l){}return new Ce},Lt=tt("localStorage"),ft=tt("sessionStorage"),ht=new Ue.Yd("@firebase/database"),Bt=function(){let f=1;return function(){return f++}}(),mt=function(f){const l=(0,ie.dS)(f),c=new ie.gQ;c.update(l);const _=c.digest();return ie.US.encodeByteArray(_)},Ft=function(...f){let l="";for(let c=0;c<f.length;c++){const _=f[c];Array.isArray(_)||_&&"object"==typeof _&&"number"==typeof _.length?l+=Ft.apply(null,_):l+="object"==typeof _?(0,ie.Wl)(_):_,l+=" "}return l};let dn=null,Xt=!0;const Me=function(...f){if(!0===Xt&&(Xt=!1,null===dn&&!0===ft.get("logging_enabled")&&function(f,l){(0,ie.hu)(!l||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(ht.logLevel=Ue.in.VERBOSE,dn=ht.log.bind(ht),l&&ft.set("logging_enabled",!0)):"function"==typeof f?dn=f:(dn=null,ft.remove("logging_enabled"))}(!0)),dn){const l=Ft.apply(null,f);dn(l)}},it=function(f){return function(...l){Me(f,...l)}},Et=function(...f){const l="FIREBASE INTERNAL ERROR: "+Ft(...f);ht.error(l)},pt=function(...f){const l=`FIREBASE FATAL ERROR: ${Ft(...f)}`;throw ht.error(l),new Error(l)},et=function(...f){const l="FIREBASE WARNING: "+Ft(...f);ht.warn(l)},bt=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Ht="[MIN_NAME]",Nn="[MAX_NAME]",rn=function(f,l){if(f===l)return 0;if(f===Ht||l===Nn)return-1;if(l===Ht||f===Nn)return 1;{const c=tn(f),_=tn(l);return null!==c?null!==_?c-_==0?f.length-l.length:c-_:-1:null!==_?1:f<l?-1:1}},Zr=function(f,l){return f===l?0:f<l?-1:1},Ln=function(f,l){if(l&&f in l)return l[f];throw new Error("Missing required key ("+f+") in object: "+(0,ie.Wl)(l))},fr=function(f){if("object"!=typeof f||null===f)return(0,ie.Wl)(f);const l=[];for(const _ in f)l.push(_);l.sort();let c="{";for(let _=0;_<l.length;_++)0!==_&&(c+=","),c+=(0,ie.Wl)(l[_]),c+=":",c+=fr(f[l[_]]);return c+="}",c},Xn=function(f,l){const c=f.length;if(c<=l)return[f];const _=[];for(let S=0;S<c;S+=l)_.push(f.substring(S,S+l>c?c:S+l));return _};function an(f,l){for(const c in f)f.hasOwnProperty(c)&&l(c,f[c])}const nt=function(f){(0,ie.hu)(!bt(f),"Invalid JSON number");const _=1023;let S,L,Z,me,Ne;0===f?(L=0,Z=0,S=1/f==-1/0?1:0):(S=f<0,(f=Math.abs(f))>=Math.pow(2,1-_)?(me=Math.min(Math.floor(Math.log(f)/Math.LN2),_),L=me+_,Z=Math.round(f*Math.pow(2,52-me)-Math.pow(2,52))):(L=0,Z=Math.round(f/Math.pow(2,-1074))));const qe=[];for(Ne=52;Ne;Ne-=1)qe.push(Z%2?1:0),Z=Math.floor(Z/2);for(Ne=11;Ne;Ne-=1)qe.push(L%2?1:0),L=Math.floor(L/2);qe.push(S?1:0),qe.reverse();const Mt=qe.join("");let Gt="";for(Ne=0;Ne<64;Ne+=8){let Jt=parseInt(Mt.substr(Ne,8),2).toString(16);1===Jt.length&&(Jt="0"+Jt),Gt+=Jt}return Gt.toLowerCase()},Ee=new RegExp("^-?(0*)\\d{1,10}$"),tn=function(f){if(Ee.test(f)){const l=Number(f);if(l>=-2147483648&&l<=2147483647)return l}return null},cn=function(f){try{f()}catch(l){setTimeout(()=>{throw et("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},Wn=function(f,l){const c=setTimeout(f,l);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class pr{constructor(l,c){this.appName_=l,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(_=>this.appCheck=_)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((c,_)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(c,_):c(null)},0)})}addTokenChangeListener(l){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(_=>_.addTokenListener(l))}notifyForInvalidToken(){et(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class or{constructor(l,c,_){this.appName_=l,this.firebaseOptions_=c,this.authProvider_=_,this.auth_=null,this.auth_=_.getImmediate({optional:!0}),this.auth_||_.onInit(S=>this.auth_=S)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(c=>c&&"auth/token-not-initialized"===c.code?(Me("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,_)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(c,_):c(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(c=>c.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(c=>c.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',et(l)}}let jn=(()=>{class f{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const li=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ze="websocket",lt="long_polling";class At{constructor(l,c,_,S,L=!1,Z="",me=!1,Ne=!1){this.secure=c,this.namespace=_,this.webSocketOnly=S,this.nodeAdmin=L,this.persistenceKey=Z,this.includeNamespaceInQueryParams=me,this.isUsingEmulator=Ne,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lt.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Lt.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nn(f,l,c){let _;if((0,ie.hu)("string"==typeof l,"typeof type must == string"),(0,ie.hu)("object"==typeof c,"typeof params must == object"),l===ze)_=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(l!==lt)throw new Error("Unknown connection type: "+l);_=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function Wt(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(c.ns=f.namespace);const S=[];return an(c,(L,Z)=>{S.push(L+"="+Z)}),_+S.join("&")}class Ur{constructor(){this.counters_={}}incrementCounter(l,c=1){(0,ie.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=c}get(){return(0,ie.p$)(this.counters_)}}const er={},Mn={};function ci(f){const l=f.toString();return er[l]||(er[l]=new Ur),er[l]}class Ar{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,c){this.closeAfterResponse=l,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,c){for(this.pendingResponses[l]=c;this.pendingResponses[this.currentResponseNum];){const _=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let S=0;S<_.length;++S)_[S]&&cn(()=>{this.onMessage_(_[S])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class se{constructor(l,c,_,S,L,Z,me){this.connId=l,this.repoInfo=c,this.applicationId=_,this.appCheckToken=S,this.authToken=L,this.transportSessionId=Z,this.lastSessionId=me,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=it(l),this.stats_=ci(c),this.urlFn=Ne=>(this.appCheckToken&&(Ne.ac=this.appCheckToken),nn(c,lt,Ne))}open(l,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Ar(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,ie.Yr)()||"complete"===document.readyState)f();else{let l=!1;const c=function(){document.body?l||(l=!0,f()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Se((...L)=>{const[Z,me,Ne,qe,Mt]=L;if(this.incrementIncomingBytes_(L),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===Z)this.id=me,this.password=Ne;else{if("close"!==Z)throw new Error("Unrecognized command received: "+Z);me?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(me,()=>{this.onClosed_()})):this.onClosed_()}},(...L)=>{const[Z,me]=L;this.incrementIncomingBytes_(L),this.myPacketOrderer.handleResponse(Z,me)},()=>{this.onClosed_()},this.urlFn);const _={start:"t"};_.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(_.cb=this.scriptTagHolder.uniqueCallbackIdentifier),_.v="5",this.transportSessionId&&(_.s=this.transportSessionId),this.lastSessionId&&(_.ls=this.lastSessionId),this.applicationId&&(_.p=this.applicationId),this.appCheckToken&&(_.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&li.test(location.hostname)&&(_.r="f");const S=this.urlFn(_);this.log_("Connecting via long-poll to "+S),this.scriptTagHolder.addTag(S,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){se.forceAllow_=!0}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!se.forceAllow_&&(se.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const c=(0,ie.Wl)(l);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const _=(0,ie.h$)(c),S=Xn(_,1840);for(let L=0;L<S.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[L]),this.curSegmentNum++}addDisconnectPingFrame(l,c){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const _={dframe:"t"};_.id=l,_.pw=c,this.myDisconnFrame.src=this.urlFn(_),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const c=(0,ie.Wl)(l).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Se{constructor(l,c,_,S){if(this.onDisconnect=_,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=l,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Bt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Se.createIFrame_();let L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(L='<script>document.domain="'+document.domain+'";<\/script>');const Z="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(Z),this.myIFrame.doc.close()}catch(me){Me("frame writing exception"),me.stack&&Me(me.stack),Me(me)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||Me("No IE domain setting required")}catch(c){const _=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+_+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,c){for(this.myID=l,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let c=this.urlFn(l),_="",S=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+_.length<=1870;){const Z=this.pendingSegs.shift();_=_+"&seg"+S+"="+Z.seg+"&ts"+S+"="+Z.ts+"&d"+S+"="+Z.d,S++}return c+=_,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(l,c,_){this.pendingSegs.push({seg:l,ts:c,d:_}),this.alive&&this.newRequest_()}addLongPollTag_(l,c){this.outstandingRequests.add(c);const _=()=>{this.outstandingRequests.delete(c),this.newRequest_()},S=setTimeout(_,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(S),_()})}addTag(l,c){(0,ie.Yr)()?this.doNodeLongPoll(l,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const _=this.myIFrame.doc.createElement("script");_.type="text/javascript",_.async=!0,_.src=l,_.onload=_.onreadystatechange=function(){const S=_.readyState;(!S||"loaded"===S||"complete"===S)&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),c())},_.onerror=()=>{Me("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(_)}catch(_){}},Math.floor(1))}}let gn=null;"undefined"!=typeof MozWebSocket?gn=MozWebSocket:"undefined"!=typeof WebSocket&&(gn=WebSocket);let un=(()=>{class f{constructor(c,_,S,L,Z,me,Ne){this.connId=c,this.applicationId=S,this.appCheckToken=L,this.authToken=Z,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=it(this.connId),this.stats_=ci(_),this.connURL=f.connectionURL_(_,me,Ne,L,S),this.nodeAdmin=_.nodeAdmin}static connectionURL_(c,_,S,L,Z){const me={v:"5"};return!(0,ie.Yr)()&&"undefined"!=typeof location&&location.hostname&&li.test(location.hostname)&&(me.r="f"),_&&(me.s=_),S&&(me.ls=S),L&&(me.ac=L),Z&&(me.p=Z),nn(c,ze,me)}open(c,_){this.onDisconnect=_,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lt.set("previous_websocket_failure",!0);try{let S;if((0,ie.Yr)()){S={headers:{"User-Agent":`Firebase/5/${Ge}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Z=process.env,me=0===this.connURL.indexOf("wss://")?Z.HTTPS_PROXY||Z.https_proxy:Z.HTTP_PROXY||Z.http_proxy;me&&(S.proxy={origin:me})}this.mySock=new gn(this.connURL,[],S)}catch(S){this.log_("Error instantiating WebSocket.");const L=S.message||S.data;return L&&this.log_(L),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=S=>{this.handleIncomingFrame(S)},this.mySock.onerror=S=>{this.log_("WebSocket error.  Closing connection.");const L=S.message||S.data;L&&this.log_(L),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const S=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);S&&S.length>1&&parseFloat(S[1])<4.4&&(c=!0)}return!c&&null!==gn&&!f.forceDisallow_}static previouslyFailed(){return Lt.isInMemoryStorage||!0===Lt.get("previous_websocket_failure")}markConnectionHealthy(){Lt.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const _=this.frames.join("");this.frames=null;const S=(0,ie.cI)(_);this.onMessage(S)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const _=Number(c);if(!isNaN(_))return this.handleNewFrameCount_(_),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const _=c.data;if(this.bytesReceived+=_.length,this.stats_.incrementCounter("bytes_received",_.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(_);else{const S=this.extractFrameCount_(_);null!==S&&this.appendFrame_(S)}}send(c){this.resetKeepAlive();const _=(0,ie.Wl)(c);this.bytesSent+=_.length,this.stats_.incrementCounter("bytes_sent",_.length);const S=Xn(_,16384);S.length>1&&this.sendString_(String(S.length));for(let L=0;L<S.length;L++)this.sendString_(S[L])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(_){this.log_("Exception thrown from WebSocket.send():",_.message||_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),Rn=(()=>{class f{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[se,un]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const _=un&&un.isAvailable();let S=_&&!un.previouslyFailed();if(c.webSocketOnly&&(_||et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),S=!0),S)this.transports_=[un];else{const L=this.transports_=[];for(const Z of f.ALL_TRANSPORTS)Z&&Z.isAvailable()&&L.push(Z);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class es{constructor(l,c,_,S,L,Z,me,Ne,qe,Mt){this.id=l,this.repoInfo_=c,this.applicationId_=_,this.appCheckToken_=S,this.authToken_=L,this.onMessage_=Z,this.onReady_=me,this.onDisconnect_=Ne,this.onKill_=qe,this.lastSessionId=Mt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=it("c:"+this.id+":"),this.transportManager_=new Rn(c),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),_=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,_)},Math.floor(0));const S=l.healthyTimeout||0;S>0&&(this.healthyTimeout_=Wn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(S)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return c=>{l===this.conn_?this.onConnectionLost_(c):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return c=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(c):l===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const c=l.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const c=Ln("t",l),_=Ln("d",l);if("c"===c)this.onSecondaryControl_(_);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(_)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const c=Ln("t",l),_=Ln("d",l);"c"===c?this.onControl_(_):"d"===c&&this.onDataMessage_(_)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const c=Ln("t",l);if("d"in l){const _=l.d;if("h"===c){const S=Object.assign({},_);this.repoInfo_.isUsingEmulator&&(S.h=this.repoInfo_.host),this.onHandshake_(S)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(_):"r"===c?this.onReset_(_):"e"===c?Et("Server Error: "+_):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Et("Unknown control packet command: "+c)}}onHandshake_(l){const c=l.ts,_=l.v,S=l.h;this.sessionId=l.s,this.repoInfo_.host=S,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==_&&et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),_=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,_),Wn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,c){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ms{put(l,c,_,S){}merge(l,c,_,S){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,c,_){}onDisconnectMerge(l,c,_){}onDisconnectCancel(l,c){}reportStats(l){}}class dr{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,ie.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...c){if(Array.isArray(this.listeners_[l])){const _=[...this.listeners_[l]];for(let S=0;S<_.length;S++)_[S].callback.apply(_[S].context,c)}}on(l,c,_){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:c,context:_});const S=this.getInitialEvent(l);S&&c.apply(_,S)}off(l,c,_){this.validateEventType_(l);const S=this.listeners_[l]||[];for(let L=0;L<S.length;L++)if(S[L].callback===c&&(!_||_===S[L].context))return void S.splice(L,1)}validateEventType_(l){(0,ie.hu)(this.allowedEvents_.find(c=>c===l),"Unknown event: "+l)}}class zi extends dr{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zi}getInitialEvent(l){return(0,ie.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class Mr{constructor(l,c){if(void 0===c){this.pieces_=l.split("/");let _=0;for(let S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[_]=this.pieces_[S],_++);this.pieces_.length=_,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=c}toString(){let l="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(l+="/"+this.pieces_[c]);return l||"/"}}function _n(){return new Mr("")}function ir(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function $i(f){return f.pieces_.length-f.pieceNum_}function xr(f){let l=f.pieceNum_;return l<f.pieces_.length&&l++,new Mr(f.pieces_,l)}function ti(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Ze(f,l=0){return f.pieces_.slice(f.pieceNum_+l)}function rt(f){if(f.pieceNum_>=f.pieces_.length)return null;const l=[];for(let c=f.pieceNum_;c<f.pieces_.length-1;c++)l.push(f.pieces_[c]);return new Mr(l,0)}function _t(f,l){const c=[];for(let _=f.pieceNum_;_<f.pieces_.length;_++)c.push(f.pieces_[_]);if(l instanceof Mr)for(let _=l.pieceNum_;_<l.pieces_.length;_++)c.push(l.pieces_[_]);else{const _=l.split("/");for(let S=0;S<_.length;S++)_[S].length>0&&c.push(_[S])}return new Mr(c,0)}function Ot(f){return f.pieceNum_>=f.pieces_.length}function In(f,l){const c=ir(f),_=ir(l);if(null===c)return l;if(c===_)return In(xr(f),xr(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+f+")")}function Lr(f,l){const c=Ze(f,0),_=Ze(l,0);for(let S=0;S<c.length&&S<_.length;S++){const L=rn(c[S],_[S]);if(0!==L)return L}return c.length===_.length?0:c.length<_.length?-1:1}function hr(f,l){if($i(f)!==$i(l))return!1;for(let c=f.pieceNum_,_=l.pieceNum_;c<=f.pieces_.length;c++,_++)if(f.pieces_[c]!==l.pieces_[_])return!1;return!0}function br(f,l){let c=f.pieceNum_,_=l.pieceNum_;if($i(f)>$i(l))return!1;for(;c<f.pieces_.length;){if(f.pieces_[c]!==l.pieces_[_])return!1;++c,++_}return!0}class di{constructor(l,c){this.errorPrefix_=c,this.parts_=Ze(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let _=0;_<this.parts_.length;_++)this.byteLength_+=(0,ie.ug)(this.parts_[_]);Wi(this)}}function Wi(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ds(f))}function ds(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class Fs extends dr{constructor(){let l,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",l="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const _=!document[l];_!==this.visible_&&(this.visible_=_,this.trigger("visible",_))},!1)}static getInstance(){return new Fs}getInitialEvent(l){return(0,ie.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const os=1e3;let ro,hs=(()=>{class f extends ms{constructor(c,_,S,L,Z,me,Ne,qe){if(super(),this.repoInfo_=c,this.applicationId_=_,this.onDataUpdate_=S,this.onConnectStatus_=L,this.onServerInfoUpdate_=Z,this.authTokenProvider_=me,this.appCheckTokenProvider_=Ne,this.authOverride_=qe,this.id=f.nextPersistentConnectionId_++,this.log_=it("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=os,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,qe&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fs.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&zi.getInstance().on("online",this.onOnline_,this)}sendRequest(c,_,S){const L=++this.requestNumber_,Z={r:L,a:c,b:_};this.log_((0,ie.Wl)(Z)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Z),S&&(this.requestCBHash_[L]=S)}get(c){this.initConnection_();const _=new ie.BH,S={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:S,onComplete:me=>{const Ne=me.d;"ok"===me.s?_.resolve(Ne):_.reject(Ne)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),_.promise}listen(c,_,S,L){this.initConnection_();const Z=c._queryIdentifier,me=c._path.toString();this.log_("Listen called for "+me+" "+Z),this.listens.has(me)||this.listens.set(me,new Map),(0,ie.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(me).has(Z),"listen() called twice for same path/queryId.");const Ne={onComplete:L,hashFn:_,query:c,tag:S};this.listens.get(me).set(Z,Ne),this.connected_&&this.sendListen_(Ne)}sendGet_(c){const _=this.outstandingGets_[c];this.sendRequest("g",_.request,S=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),_.onComplete&&_.onComplete(S)})}sendListen_(c){const _=c.query,S=_._path.toString(),L=_._queryIdentifier;this.log_("Listen on "+S+" for "+L);const Z={p:S};c.tag&&(Z.q=_._queryObject,Z.t=c.tag),Z.h=c.hashFn(),this.sendRequest("q",Z,Ne=>{const qe=Ne.d,Mt=Ne.s;f.warnOnListenWarnings_(qe,_),(this.listens.get(S)&&this.listens.get(S).get(L))===c&&(this.log_("listen response",Ne),"ok"!==Mt&&this.removeListen_(S,L),c.onComplete&&c.onComplete(Mt,qe))})}static warnOnListenWarnings_(c,_){if(c&&"object"==typeof c&&(0,ie.r3)(c,"w")){const S=(0,ie.DV)(c,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){const L='".indexOn": "'+_._queryParams.getIndex().toString()+'"',Z=_._path.toString();et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${L} at ${Z} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,ie.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,_=(0,ie.w9)(c)?"auth":"gauth",S={cred:c};null===this.authOverride_?S.noauth=!0:"object"==typeof this.authOverride_&&(S.authvar=this.authOverride_),this.sendRequest(_,S,L=>{const Z=L.s,me=L.d||"error";this.authToken_===c&&("ok"===Z?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(Z,me))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const _=c.s,S=c.d||"error";"ok"===_?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(_,S)})}unlisten(c,_){const S=c._path.toString(),L=c._queryIdentifier;this.log_("Unlisten called for "+S+" "+L),(0,ie.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,L)&&this.connected_&&this.sendUnlisten_(S,L,c._queryObject,_)}sendUnlisten_(c,_,S,L){this.log_("Unlisten on "+c+" for "+_);const Z={p:c};L&&(Z.q=S,Z.t=L),this.sendRequest("n",Z)}onDisconnectPut(c,_,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,_,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:_,onComplete:S})}onDisconnectMerge(c,_,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,_,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:_,onComplete:S})}onDisconnectCancel(c,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,_):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:_})}sendOnDisconnect_(c,_,S,L){const Z={p:_,d:S};this.log_("onDisconnect "+c,Z),this.sendRequest(c,Z,me=>{L&&setTimeout(()=>{L(me.s,me.d)},Math.floor(0))})}put(c,_,S,L){this.putInternal("p",c,_,S,L)}merge(c,_,S,L){this.putInternal("m",c,_,S,L)}putInternal(c,_,S,L,Z){this.initConnection_();const me={p:_,d:S};void 0!==Z&&(me.h=Z),this.outstandingPuts_.push({action:c,request:me,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+_)}sendPut_(c){const _=this.outstandingPuts_[c].action,S=this.outstandingPuts_[c].request,L=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(_,S,Z=>{this.log_(_+" response",Z),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),L&&L(Z.s,Z.d)})}reportStats(c){if(this.connected_){const _={c};this.log_("reportStats",_),this.sendRequest("s",_,S=>{"ok"!==S.s&&this.log_("reportStats","Error sending stats: "+S.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,ie.Wl)(c));const _=c.r,S=this.requestCBHash_[_];S&&(delete this.requestCBHash_[_],S(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,_){this.log_("handleServerMessage",c,_),"d"===c?this.onDataUpdate_(_.p,_.d,!1,_.t):"m"===c?this.onDataUpdate_(_.p,_.d,!0,_.t):"c"===c?this.onListenRevoked_(_.p,_.q):"ac"===c?this.onAuthRevoked_(_.s,_.d):"apc"===c?this.onAppCheckRevoked_(_.s,_.d):"sd"===c?this.onSecurityDebugPacket_(_):Et("Unrecognized action received from server: "+(0,ie.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,_){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=_,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=os),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let _=Math.max(0,this.reconnectDelay_-c);_=Math.random()*_,this.log_("Trying to reconnect in "+_+"ms"),this.scheduleConnect_(_),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,y.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const _=c.onDataMessage_.bind(c),S=c.onReady_.bind(c),L=c.onRealtimeDisconnect_.bind(c),Z=c.id+":"+f.nextConnectionId_++,me=c.lastSessionId;let Ne=!1,qe=null;const Mt=function(){qe?qe.close():(Ne=!0,L())};c.realtime_={close:Mt,sendRequest:function(Zn){(0,ie.hu)(qe,"sendRequest call when we're not connected not allowed."),qe.sendRequest(Zn)}};const Jt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Zn,Sr]=yield Promise.all([c.authTokenProvider_.getToken(Jt),c.appCheckTokenProvider_.getToken(Jt)]);Ne?Me("getToken() completed but was canceled"):(Me("getToken() completed. Creating connection."),c.authToken_=Zn&&Zn.accessToken,c.appCheckToken_=Sr&&Sr.token,qe=new es(Z,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,_,S,L,gs=>{et(gs+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},me))}catch(Zn){c.log_("Failed to get token: "+Zn),Ne||(c.repoInfo_.nodeAdmin&&et(Zn),Mt())}}})()}interrupt(c){Me("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Me("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const _=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:_})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const _=this.outstandingPuts_[c];_&&"h"in _.request&&_.queued&&(_.onComplete&&_.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,_){let S;S=_?_.map(Z=>fr(Z)).join("$"):"default";const L=this.removeListen_(c,S);L&&L.onComplete&&L.onComplete("permission_denied")}removeListen_(c,_){const S=new Mr(c).toString();let L;if(this.listens.has(S)){const Z=this.listens.get(S);L=Z.get(_),Z.delete(_),0===Z.size&&this.listens.delete(S)}else L=void 0;return L}onAuthRevoked_(c,_){Me("Auth token revoked: "+c+"/"+_),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,_){Me("App check token revoked: "+c+"/"+_),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const _ of c.values())this.sendListen_(_);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let _="js";(0,ie.Yr)()&&(_=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+_+"."+Ge.replace(/\./g,"-")]=1,(0,ie.uI)()?c["framework.cordova"]=1:(0,ie.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=zi.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&c}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class kr{constructor(l,c){this.name=l,this.node=c}static Wrap(l,c){return new kr(l,c)}}class Ls{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,c){const _=new kr(Ht,l),S=new kr(Ht,c);return 0!==this.compare(_,S)}minPost(){return kr.MIN}}class io extends Ls{static get __EMPTY_NODE(){return ro}static set __EMPTY_NODE(l){ro=l}compare(l,c){return rn(l.name,c.name)}isDefinedOn(l){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,c){return!1}minPost(){return kr.MIN}maxPost(){return new kr(Nn,ro)}makePost(l,c){return(0,ie.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new kr(l,ro)}toString(){return".key"}}const Vi=new io;class Vs{constructor(l,c,_,S,L=null){this.isReverse_=S,this.resultGenerator_=L,this.nodeStack_=[];let Z=1;for(;!l.isEmpty();)if(Z=c?_(l.key,c):1,S&&(Z*=-1),Z<0)l=this.isReverse_?l.left:l.right;else{if(0===Z){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,l=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Ss,Gi=(()=>{class f{constructor(c,_,S,L,Z){this.key=c,this.value=_,this.color=null!=S?S:f.RED,this.left=null!=L?L:ri.EMPTY_NODE,this.right=null!=Z?Z:ri.EMPTY_NODE}copy(c,_,S,L,Z){return new f(null!=c?c:this.key,null!=_?_:this.value,null!=S?S:this.color,null!=L?L:this.left,null!=Z?Z:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,_,S){let L=this;const Z=S(c,L.key);return L=Z<0?L.copy(null,null,null,L.left.insert(c,_,S),null):0===Z?L.copy(null,_,null,null,null):L.copy(null,null,null,null,L.right.insert(c,_,S)),L.fixUp_()}removeMin_(){if(this.left.isEmpty())return ri.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,_){let S,L;if(S=this,_(c,S.key)<0)!S.left.isEmpty()&&!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),S=S.copy(null,null,null,S.left.remove(c,_),null);else{if(S.left.isRed_()&&(S=S.rotateRight_()),!S.right.isEmpty()&&!S.right.isRed_()&&!S.right.left.isRed_()&&(S=S.moveRedRight_()),0===_(c,S.key)){if(S.right.isEmpty())return ri.EMPTY_NODE;L=S.right.min_(),S=S.copy(L.key,L.value,null,null,S.right.removeMin_())}S=S.copy(null,null,null,null,S.right.remove(c,_))}return S.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),_=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,_)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class ri{constructor(l,c=ri.EMPTY_NODE){this.comparator_=l,this.root_=c}insert(l,c){return new ri(this.comparator_,this.root_.insert(l,c,this.comparator_).copy(null,null,Gi.BLACK,null,null))}remove(l){return new ri(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Gi.BLACK,null,null))}get(l){let c,_=this.root_;for(;!_.isEmpty();){if(c=this.comparator_(l,_.key),0===c)return _.value;c<0?_=_.left:c>0&&(_=_.right)}return null}getPredecessorKey(l){let c,_=this.root_,S=null;for(;!_.isEmpty();){if(c=this.comparator_(l,_.key),0===c){if(_.left.isEmpty())return S?S.key:null;for(_=_.left;!_.right.isEmpty();)_=_.right;return _.key}c<0?_=_.left:c>0&&(S=_,_=_.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new Vs(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,c){return new Vs(this.root_,l,this.comparator_,!1,c)}getReverseIteratorFrom(l,c){return new Vs(this.root_,l,this.comparator_,!0,c)}getReverseIterator(l){return new Vs(this.root_,null,this.comparator_,!0,l)}}function Uo(f,l){return rn(f.name,l.name)}function so(f,l){return rn(f,l)}ri.EMPTY_NODE=new class Pa{copy(l,c,_,S,L){return this}insert(l,c,_){return new Gi(l,c,null)}remove(l,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qs=function(f){return"number"==typeof f?"number:"+nt(f):"string:"+f},ys=function(f){if(f.isLeafNode()){const l=f.val();(0,ie.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,ie.r3)(l,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(f===Ss||f.isEmpty(),"priority of unexpected type.");(0,ie.hu)(f===Ss||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vo,Bo,Us,Ro=(()=>{class f{constructor(c,_=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=_,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ys(this.priorityNode_)}static set __childrenNodeConstructor(c){vo=c}static get __childrenNodeConstructor(){return vo}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new f(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return Ot(c)?this:".priority"===ir(c)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,_){return null}updateImmediateChild(c,_){return".priority"===c?this.updatePriority(_):_.isEmpty()&&".priority"!==c?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,_).updatePriority(this.priorityNode_)}updateChild(c,_){const S=ir(c);return null===S?_:_.isEmpty()&&".priority"!==S?this:((0,ie.hu)(".priority"!==S||1===$i(c),".priority must be the last token in a path"),this.updateImmediateChild(S,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(xr(c),_)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,_){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+qs(this.priorityNode_.val())+":");const _=typeof this.value_;c+=_+":",c+="number"===_?nt(this.value_):this.value_,this.lazyHash_=mt(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===f.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof f.__childrenNodeConstructor?-1:((0,ie.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const _=typeof c.value_,S=typeof this.value_,L=f.VALUE_TYPE_ORDER.indexOf(_),Z=f.VALUE_TYPE_ORDER.indexOf(S);return(0,ie.hu)(L>=0,"Unknown leaf type: "+_),(0,ie.hu)(Z>=0,"Unknown leaf type: "+S),L===Z?"object"===S?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:Z-L}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const _=c;return this.value_===_.value_&&this.priorityNode_.equals(_.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const ii=new class Is extends Ls{compare(l,c){const _=l.node.getPriority(),S=c.node.getPriority(),L=_.compareTo(S);return 0===L?rn(l.name,c.name):L}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,c){return!l.getPriority().equals(c.getPriority())}minPost(){return kr.MIN}maxPost(){return new kr(Nn,new Ro("[PRIORITY-POST]",Us))}makePost(l,c){const _=Bo(l);return new kr(c,new Ro("[PRIORITY-POST]",_))}toString(){return".priority"}},Eo=Math.log(2);class Zs{constructor(l){this.count=parseInt(Math.log(l+1)/Eo,10),this.current_=this.count-1;const S=(L=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&S}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Kr=function(f,l,c,_){f.sort(l);const S=function(Ne,qe){const Mt=qe-Ne;let Gt,Jt;if(0===Mt)return null;if(1===Mt)return Gt=f[Ne],Jt=c?c(Gt):Gt,new Gi(Jt,Gt.node,Gi.BLACK,null,null);{const Zn=parseInt(Mt/2,10)+Ne,Sr=S(Ne,Zn),gs=S(Zn+1,qe);return Gt=f[Zn],Jt=c?c(Gt):Gt,new Gi(Jt,Gt.node,Gi.BLACK,Sr,gs)}},me=function(Ne){let qe=null,Mt=null,Gt=f.length;const Jt=function(Sr,gs){const wa=Gt-Sr,no=Gt;Gt-=Sr;const Li=S(wa+1,no),ad=f[wa],hp=c?c(ad):ad;Zn(new Gi(hp,ad.node,gs,null,Li))},Zn=function(Sr){qe?(qe.left=Sr,qe=Sr):(Mt=Sr,qe=Sr)};for(let Sr=0;Sr<Ne.count;++Sr){const gs=Ne.nextBitIsOne(),wa=Math.pow(2,Ne.count-(Sr+1));gs?Jt(wa,Gi.BLACK):(Jt(wa,Gi.BLACK),Jt(wa,Gi.RED))}return Mt}(new Zs(f.length));return new ri(_||l,me)};let ts;const Ts={};class js{constructor(l,c){this.indexes_=l,this.indexSet_=c}static get Default(){return(0,ie.hu)(Ts&&ii,"ChildrenNode.ts has not been loaded"),ts=ts||new js({".priority":Ts},{".priority":ii}),ts}get(l){const c=(0,ie.DV)(this.indexes_,l);if(!c)throw new Error("No index defined for "+l);return c instanceof ri?c:null}hasIndex(l){return(0,ie.r3)(this.indexSet_,l.toString())}addIndex(l,c){(0,ie.hu)(l!==Vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const _=[];let S=!1;const L=c.getIterator(kr.Wrap);let me,Z=L.getNext();for(;Z;)S=S||l.isDefinedOn(Z.node),_.push(Z),Z=L.getNext();me=S?Kr(_,l.getCompare()):Ts;const Ne=l.toString(),qe=Object.assign({},this.indexSet_);qe[Ne]=l;const Mt=Object.assign({},this.indexes_);return Mt[Ne]=me,new js(Mt,qe)}addToIndexes(l,c){const _=(0,ie.UI)(this.indexes_,(S,L)=>{const Z=(0,ie.DV)(this.indexSet_,L);if((0,ie.hu)(Z,"Missing index implementation for "+L),S===Ts){if(Z.isDefinedOn(l.node)){const me=[],Ne=c.getIterator(kr.Wrap);let qe=Ne.getNext();for(;qe;)qe.name!==l.name&&me.push(qe),qe=Ne.getNext();return me.push(l),Kr(me,Z.getCompare())}return Ts}{const me=c.get(l.name);let Ne=S;return me&&(Ne=Ne.remove(new kr(l.name,me))),Ne.insert(l,l.node)}});return new js(_,this.indexSet_)}removeFromIndexes(l,c){const _=(0,ie.UI)(this.indexes_,S=>{if(S===Ts)return S;{const L=c.get(l.name);return L?S.remove(new kr(l.name,L)):S}});return new js(_,this.indexSet_)}}let Ei,F=(()=>{class f{constructor(c,_,S){this.children_=c,this.priorityNode_=_,this.indexMap_=S,this.lazyHash_=null,this.priorityNode_&&ys(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ei||(Ei=new f(new ri(so),null,js.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ei}updatePriority(c){return this.children_.isEmpty()?this:new f(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const _=this.children_.get(c);return null===_?Ei:_}}getChild(c){const _=ir(c);return null===_?this:this.getImmediateChild(_).getChild(xr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,_){if((0,ie.hu)(_,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(_);{const S=new kr(c,_);let L,Z;_.isEmpty()?(L=this.children_.remove(c),Z=this.indexMap_.removeFromIndexes(S,this.children_)):(L=this.children_.insert(c,_),Z=this.indexMap_.addToIndexes(S,this.children_));const me=L.isEmpty()?Ei:this.priorityNode_;return new f(L,me,Z)}}updateChild(c,_){const S=ir(c);if(null===S)return _;{(0,ie.hu)(".priority"!==ir(c)||1===$i(c),".priority must be the last token in a path");const L=this.getImmediateChild(S).updateChild(xr(c),_);return this.updateImmediateChild(S,L)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const _={};let S=0,L=0,Z=!0;if(this.forEachChild(ii,(me,Ne)=>{_[me]=Ne.val(c),S++,Z&&f.INTEGER_REGEXP_.test(me)?L=Math.max(L,Number(me)):Z=!1}),!c&&Z&&L<2*S){const me=[];for(const Ne in _)me[Ne]=_[Ne];return me}return c&&!this.getPriority().isEmpty()&&(_[".priority"]=this.getPriority().val()),_}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+qs(this.getPriority().val())+":"),this.forEachChild(ii,(_,S)=>{const L=S.hash();""!==L&&(c+=":"+_+":"+L)}),this.lazyHash_=""===c?"":mt(c)}return this.lazyHash_}getPredecessorChildName(c,_,S){const L=this.resolveIndex_(S);if(L){const Z=L.getPredecessorKey(new kr(c,_));return Z?Z.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const _=this.resolveIndex_(c);if(_){const S=_.minKey();return S&&S.name}return this.children_.minKey()}getFirstChild(c){const _=this.getFirstChildName(c);return _?new kr(_,this.children_.get(_)):null}getLastChildName(c){const _=this.resolveIndex_(c);if(_){const S=_.maxKey();return S&&S.name}return this.children_.maxKey()}getLastChild(c){const _=this.getLastChildName(c);return _?new kr(_,this.children_.get(_)):null}forEachChild(c,_){const S=this.resolveIndex_(c);return S?S.inorderTraversal(L=>_(L.name,L.node)):this.children_.inorderTraversal(_)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,_){const S=this.resolveIndex_(_);if(S)return S.getIteratorFrom(c,L=>L);{const L=this.children_.getIteratorFrom(c.name,kr.Wrap);let Z=L.peek();for(;null!=Z&&_.compare(Z,c)<0;)L.getNext(),Z=L.peek();return L}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,_){const S=this.resolveIndex_(_);if(S)return S.getReverseIteratorFrom(c,L=>L);{const L=this.children_.getReverseIteratorFrom(c.name,kr.Wrap);let Z=L.peek();for(;null!=Z&&_.compare(Z,c)>0;)L.getNext(),Z=L.peek();return L}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===j?-1:0}withIndex(c){if(c===Vi||this.indexMap_.hasIndex(c))return this;{const _=this.indexMap_.addIndex(c,this.children_);return new f(this.children_,this.priorityNode_,_)}}isIndexed(c){return c===Vi||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const _=c;if(this.getPriority().equals(_.getPriority())){if(this.children_.count()===_.children_.count()){const S=this.getIterator(ii),L=_.getIterator(ii);let Z=S.getNext(),me=L.getNext();for(;Z&&me;){if(Z.name!==me.name||!Z.node.equals(me.node))return!1;Z=S.getNext(),me=L.getNext()}return null===Z&&null===me}return!1}return!1}}resolveIndex_(c){return c===Vi?null:this.indexMap_.get(c.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const j=new class ae extends F{constructor(){super(new ri(so),F.EMPTY_NODE,js.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return F.EMPTY_NODE}isEmpty(){return!1}};function Oe(f,l=null){if(null===f)return F.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(l=f[".priority"]),(0,ie.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new Ro(f,Oe(l));if(f instanceof Array){let c=F.EMPTY_NODE;return an(f,(_,S)=>{if((0,ie.r3)(f,_)&&"."!==_.substring(0,1)){const L=Oe(S);(L.isLeafNode()||!L.isEmpty())&&(c=c.updateImmediateChild(_,L))}}),c.updatePriority(Oe(l))}{const c=[];let _=!1;if(an(f,(Z,me)=>{if("."!==Z.substring(0,1)){const Ne=Oe(me);Ne.isEmpty()||(_=_||!Ne.getPriority().isEmpty(),c.push(new kr(Z,Ne)))}}),0===c.length)return F.EMPTY_NODE;const L=Kr(c,Uo,Z=>Z.name,so);if(_){const Z=Kr(c,ii.getCompare());return new F(L,Oe(l),new js({".priority":Z},{".priority":ii}))}return new F(L,Oe(l),js.Default)}}Object.defineProperties(kr,{MIN:{value:new kr(Ht,F.EMPTY_NODE)},MAX:{value:new kr(Nn,j)}}),io.__EMPTY_NODE=F.EMPTY_NODE,Ro.__childrenNodeConstructor=F,function As(f){Ss=f}(j),function Bs(f){Us=f}(j),function Ki(f){Bo=f}(Oe);class Rt extends Ls{constructor(l){super(),this.indexPath_=l,(0,ie.hu)(!Ot(l)&&".priority"!==ir(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,c){const _=this.extractChild(l.node),S=this.extractChild(c.node),L=_.compareTo(S);return 0===L?rn(l.name,c.name):L}makePost(l,c){const _=Oe(l),S=F.EMPTY_NODE.updateChild(this.indexPath_,_);return new kr(c,S)}maxPost(){const l=F.EMPTY_NODE.updateChild(this.indexPath_,j);return new kr(Nn,l)}toString(){return Ze(this.indexPath_,0).join("/")}}const bn=new class jt extends Ls{compare(l,c){const _=l.node.compareTo(c.node);return 0===_?rn(l.name,c.name):_}isDefinedOn(l){return!0}indexedValueChanged(l,c){return!l.equals(c)}minPost(){return kr.MIN}maxPost(){return kr.MAX}makePost(l,c){const _=Oe(l);return new kr(c,_)}toString(){return".value"}};function jr(f){return{type:"value",snapshotNode:f}}function Pr(f,l){return{type:"child_added",snapshotNode:l,childName:f}}function gr(f,l){return{type:"child_removed",snapshotNode:l,childName:f}}function Vr(f,l,c){return{type:"child_changed",snapshotNode:l,childName:f,oldSnap:c}}class bi{constructor(l){this.index_=l}updateChild(l,c,_,S,L,Z){(0,ie.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const me=l.getImmediateChild(c);return me.getChild(S).equals(_.getChild(S))&&me.isEmpty()===_.isEmpty()||(null!=Z&&(_.isEmpty()?l.hasChild(c)?Z.trackChildChange(gr(c,me)):(0,ie.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):me.isEmpty()?Z.trackChildChange(Pr(c,_)):Z.trackChildChange(Vr(c,_,me))),l.isLeafNode()&&_.isEmpty())?l:l.updateImmediateChild(c,_).withIndex(this.index_)}updateFullNode(l,c,_){return null!=_&&(l.isLeafNode()||l.forEachChild(ii,(S,L)=>{c.hasChild(S)||_.trackChildChange(gr(S,L))}),c.isLeafNode()||c.forEachChild(ii,(S,L)=>{if(l.hasChild(S)){const Z=l.getImmediateChild(S);Z.equals(L)||_.trackChildChange(Vr(S,L,Z))}else _.trackChildChange(Pr(S,L))})),c.withIndex(this.index_)}updatePriority(l,c){return l.isEmpty()?F.EMPTY_NODE:l.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class pi{constructor(l){this.indexedFilter_=new bi(l.getIndex()),this.index_=l.getIndex(),this.startPost_=pi.getStartPost_(l),this.endPost_=pi.getEndPost_(l),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),l)<=0:this.index_.compare(this.getStartPost(),l)<0,_=this.endIsInclusive_?this.index_.compare(l,this.getEndPost())<=0:this.index_.compare(l,this.getEndPost())<0;return c&&_}updateChild(l,c,_,S,L,Z){return this.matches(new kr(c,_))||(_=F.EMPTY_NODE),this.indexedFilter_.updateChild(l,c,_,S,L,Z)}updateFullNode(l,c,_){c.isLeafNode()&&(c=F.EMPTY_NODE);let S=c.withIndex(this.index_);S=S.updatePriority(F.EMPTY_NODE);const L=this;return c.forEachChild(ii,(Z,me)=>{L.matches(new kr(Z,me))||(S=S.updateImmediateChild(Z,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,S,_)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const c=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),c)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const c=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),c)}return l.getIndex().maxPost()}}class oo{constructor(l){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const _=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?_<=0:_<0},this.withinEndPost=c=>{const _=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?_<=0:_<0},this.rangedFilter_=new pi(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft(),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}updateChild(l,c,_,S,L,Z){return this.rangedFilter_.matches(new kr(c,_))||(_=F.EMPTY_NODE),l.getImmediateChild(c).equals(_)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,c,_,S,L,Z):this.fullLimitUpdateChild_(l,c,_,L,Z)}updateFullNode(l,c,_){let S;if(c.isLeafNode()||c.isEmpty())S=F.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let L;S=F.EMPTY_NODE.withIndex(this.index_),L=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let Z=0;for(;L.hasNext()&&Z<this.limit_;){const me=L.getNext();if(this.withinDirectionalStart(me)){if(!this.withinDirectionalEnd(me))break;S=S.updateImmediateChild(me.name,me.node),Z++}}}else{let L;S=c.withIndex(this.index_),S=S.updatePriority(F.EMPTY_NODE),L=this.reverse_?S.getReverseIterator(this.index_):S.getIterator(this.index_);let Z=0;for(;L.hasNext();){const me=L.getNext();Z<this.limit_&&this.withinDirectionalStart(me)&&this.withinDirectionalEnd(me)?Z++:S=S.updateImmediateChild(me.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,S,_)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,c,_,S,L){let Z;if(this.reverse_){const Gt=this.index_.getCompare();Z=(Jt,Zn)=>Gt(Zn,Jt)}else Z=this.index_.getCompare();const me=l;(0,ie.hu)(me.numChildren()===this.limit_,"");const Ne=new kr(c,_),qe=this.reverse_?me.getFirstChild(this.index_):me.getLastChild(this.index_),Mt=this.rangedFilter_.matches(Ne);if(me.hasChild(c)){const Gt=me.getImmediateChild(c);let Jt=S.getChildAfterChild(this.index_,qe,this.reverse_);for(;null!=Jt&&(Jt.name===c||me.hasChild(Jt.name));)Jt=S.getChildAfterChild(this.index_,Jt,this.reverse_);const Zn=null==Jt?1:Z(Jt,Ne);if(Mt&&!_.isEmpty()&&Zn>=0)return null!=L&&L.trackChildChange(Vr(c,_,Gt)),me.updateImmediateChild(c,_);{null!=L&&L.trackChildChange(gr(c,Gt));const gs=me.updateImmediateChild(c,F.EMPTY_NODE);return null!=Jt&&this.rangedFilter_.matches(Jt)?(null!=L&&L.trackChildChange(Pr(Jt.name,Jt.node)),gs.updateImmediateChild(Jt.name,Jt.node)):gs}}return _.isEmpty()?l:Mt&&Z(qe,Ne)>=0?(null!=L&&(L.trackChildChange(gr(qe.name,qe.node)),L.trackChildChange(Pr(c,_))),me.updateImmediateChild(c,_).updateImmediateChild(qe.name,F.EMPTY_NODE)):l}}class Ni{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ii}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ht}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ii}copy(){const l=new Ni;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.startAfterSet_=this.startAfterSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.endBeforeSet_=this.endBeforeSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function ue(f){const l={};if(f.isDefault())return l;let c;if(f.index_===ii?c="$priority":f.index_===bn?c="$value":f.index_===Vi?c="$key":((0,ie.hu)(f.index_ instanceof Rt,"Unrecognized index type!"),c=f.index_.toString()),l.orderBy=(0,ie.Wl)(c),f.startSet_){const _=f.startAfterSet_?"startAfter":"startAt";l[_]=(0,ie.Wl)(f.indexStartValue_),f.startNameSet_&&(l[_]+=","+(0,ie.Wl)(f.indexStartName_))}if(f.endSet_){const _=f.endBeforeSet_?"endBefore":"endAt";l[_]=(0,ie.Wl)(f.indexEndValue_),f.endNameSet_&&(l[_]+=","+(0,ie.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?l.limitToFirst=f.limit_:l.limitToLast=f.limit_),l}function ke(f){const l={};if(f.startSet_&&(l.sp=f.indexStartValue_,f.startNameSet_&&(l.sn=f.indexStartName_),l.sin=!f.startAfterSet_),f.endSet_&&(l.ep=f.indexEndValue_,f.endNameSet_&&(l.en=f.indexEndName_),l.ein=!f.endBeforeSet_),f.limitSet_){l.l=f.limit_;let c=f.viewFrom_;""===c&&(c=f.isViewFromLeft()?"l":"r"),l.vf=c}return f.index_!==ii&&(l.i=f.index_.toString()),l}class Kt extends ms{constructor(l,c,_,S){super(),this.repoInfo_=l,this.onDataUpdate_=c,this.authTokenProvider_=_,this.appCheckTokenProvider_=S,this.log_=it("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,c){return void 0!==c?"tag$"+c:((0,ie.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,c,_,S){const L=l._path.toString();this.log_("Listen called for "+L+" "+l._queryIdentifier);const Z=Kt.getListenId_(l,_),me={};this.listens_[Z]=me;const Ne=ue(l._queryParams);this.restRequest_(L+".json",Ne,(qe,Mt)=>{let Gt=Mt;if(404===qe&&(Gt=null,qe=null),null===qe&&this.onDataUpdate_(L,Gt,!1,_),(0,ie.DV)(this.listens_,Z)===me){let Jt;Jt=qe?401===qe?"permission_denied":"rest_error:"+qe:"ok",S(Jt,null)}})}unlisten(l,c){const _=Kt.getListenId_(l,c);delete this.listens_[_]}get(l){const c=ue(l._queryParams),_=l._path.toString(),S=new ie.BH;return this.restRequest_(_+".json",c,(L,Z)=>{let me=Z;404===L&&(me=null,L=null),null===L?(this.onDataUpdate_(_,me,!1,null),S.resolve(me)):S.reject(new Error(me))}),S.promise}refreshAuthToken(l){}restRequest_(l,c={},_){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([S,L])=>{S&&S.accessToken&&(c.auth=S.accessToken),L&&L.token&&(c.ac=L.token);const Z=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(c);this.log_("Sending REST request for "+Z);const me=new XMLHttpRequest;me.onreadystatechange=()=>{if(_&&4===me.readyState){this.log_("REST Response for "+Z+" received. status:",me.status,"response:",me.responseText);let Ne=null;if(me.status>=200&&me.status<300){try{Ne=(0,ie.cI)(me.responseText)}catch(qe){et("Failed to parse JSON response for "+Z+": "+me.responseText)}_(null,Ne)}else 401!==me.status&&404!==me.status&&et("Got unsuccessful REST response for "+Z+" Status: "+me.status),_(me.status);_=null}},me.open("GET",Z,!0),me.send()})}}class gi{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,c){this.rootNode_=this.rootNode_.updateChild(l,c)}}function z(){return{value:null,children:new Map}}function W(f,l,c){if(Ot(l))f.value=c,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(l,c);else{const _=ir(l);f.children.has(_)||f.children.set(_,z()),W(f.children.get(_),l=xr(l),c)}}function Ie(f,l,c){null!==f.value?c(l,f.value):function Le(f,l){f.children.forEach((c,_)=>{l(_,c)})}(f,(_,S)=>{Ie(S,new Mr(l.toString()+"/"+_),c)})}class It{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),c=Object.assign({},l);return this.last_&&an(this.last_,(_,S)=>{c[_]=c[_]-S}),this.last_=l,c}}class cr{constructor(l,c){this.server_=c,this.statsToReport_={},this.statsListener_=new It(l);const _=1e4+2e4*Math.random();Wn(this.reportStats_.bind(this),Math.floor(_))}reportStats_(){const l=this.statsListener_.get(),c={};let _=!1;an(l,(S,L)=>{L>0&&(0,ie.r3)(this.statsToReport_,S)&&(c[S]=L,_=!0)}),_&&this.server_.reportStats(c),Wn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gn=(()=>{return(f=Gn||(Gn={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Gn;var f})();function Ti(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class $r{constructor(l,c,_){this.path=l,this.affectedTree=c,this.revert=_,this.type=Gn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(Ot(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Mr(l));return new $r(_n(),c,this.revert)}}return(0,ie.hu)(ir(this.path)===l,"operationForChild called for unrelated child."),new $r(xr(this.path),this.affectedTree,this.revert)}}class qi{constructor(l,c){this.source=l,this.path=c,this.type=Gn.LISTEN_COMPLETE}operationForChild(l){return Ot(this.path)?new qi(this.source,_n()):new qi(this.source,xr(this.path))}}class Si{constructor(l,c,_){this.source=l,this.path=c,this.snap=_,this.type=Gn.OVERWRITE}operationForChild(l){return Ot(this.path)?new Si(this.source,_n(),this.snap.getImmediateChild(l)):new Si(this.source,xr(this.path),this.snap)}}class Rs{constructor(l,c,_){this.source=l,this.path=c,this.children=_,this.type=Gn.MERGE}operationForChild(l){if(Ot(this.path)){const c=this.children.subtree(new Mr(l));return c.isEmpty()?null:c.value?new Si(this.source,_n(),c.value):new Rs(this.source,_n(),c)}return(0,ie.hu)(ir(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new Rs(this.source,xr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class as{constructor(l,c,_){this.node_=l,this.fullyInitialized_=c,this.filtered_=_}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(Ot(l))return this.isFullyInitialized()&&!this.filtered_;const c=ir(l);return this.isCompleteForChild(c)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class Ui{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function Hs(f,l,c,_,S,L){const Z=_.filter(me=>me.type===c);Z.sort((me,Ne)=>function Zo(f,l,c){if(null==l.childName||null==c.childName)throw(0,ie.g5)("Should only compare child_ events.");const _=new kr(l.childName,l.snapshotNode),S=new kr(c.childName,c.snapshotNode);return f.index_.compare(_,S)}(f,me,Ne)),Z.forEach(me=>{const Ne=function xo(f,l,c){return"value"===l.type||"child_removed"===l.type||(l.prevName=c.getPredecessorChildName(l.childName,l.snapshotNode,f.index_)),l}(f,me,L);S.forEach(qe=>{qe.respondsTo(me.type)&&l.push(qe.createEvent(Ne,f.query_))})})}function $s(f,l){return{eventCache:f,serverCache:l}}function Ho(f,l,c,_){return $s(new as(l,c,_),f.serverCache)}function _s(f,l,c,_){return $s(f.eventCache,new as(l,c,_))}function da(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function Po(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let $a;class Mi{constructor(l,c=(()=>($a||($a=new ri(Zr)),$a))()){this.value=l,this.children=c}static fromObject(l){let c=new Mi(null);return an(l,(_,S)=>{c=c.set(new Mr(_),S)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,c){if(null!=this.value&&c(this.value))return{path:_n(),value:this.value};if(Ot(l))return null;{const _=ir(l),S=this.children.get(_);if(null!==S){const L=S.findRootMostMatchingPathAndValue(xr(l),c);return null!=L?{path:_t(new Mr(_),L.path),value:L.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(Ot(l))return this;{const c=ir(l),_=this.children.get(c);return null!==_?_.subtree(xr(l)):new Mi(null)}}set(l,c){if(Ot(l))return new Mi(c,this.children);{const _=ir(l),L=(this.children.get(_)||new Mi(null)).set(xr(l),c),Z=this.children.insert(_,L);return new Mi(this.value,Z)}}remove(l){if(Ot(l))return this.children.isEmpty()?new Mi(null):new Mi(null,this.children);{const c=ir(l),_=this.children.get(c);if(_){const S=_.remove(xr(l));let L;return L=S.isEmpty()?this.children.remove(c):this.children.insert(c,S),null===this.value&&L.isEmpty()?new Mi(null):new Mi(this.value,L)}return this}}get(l){if(Ot(l))return this.value;{const c=ir(l),_=this.children.get(c);return _?_.get(xr(l)):null}}setTree(l,c){if(Ot(l))return c;{const _=ir(l),L=(this.children.get(_)||new Mi(null)).setTree(xr(l),c);let Z;return Z=L.isEmpty()?this.children.remove(_):this.children.insert(_,L),new Mi(this.value,Z)}}fold(l){return this.fold_(_n(),l)}fold_(l,c){const _={};return this.children.inorderTraversal((S,L)=>{_[S]=L.fold_(_t(l,S),c)}),c(l,this.value,_)}findOnPath(l,c){return this.findOnPath_(l,_n(),c)}findOnPath_(l,c,_){const S=!!this.value&&_(c,this.value);if(S)return S;if(Ot(l))return null;{const L=ir(l),Z=this.children.get(L);return Z?Z.findOnPath_(xr(l),_t(c,L),_):null}}foreachOnPath(l,c){return this.foreachOnPath_(l,_n(),c)}foreachOnPath_(l,c,_){if(Ot(l))return this;{this.value&&_(c,this.value);const S=ir(l),L=this.children.get(S);return L?L.foreachOnPath_(xr(l),_t(c,S),_):new Mi(null)}}foreach(l){this.foreach_(_n(),l)}foreach_(l,c){this.children.inorderTraversal((_,S)=>{S.foreach_(_t(l,_),c)}),this.value&&c(l,this.value)}foreachChild(l){this.children.inorderTraversal((c,_)=>{_.value&&l(c,_.value)})}}class uo{constructor(l){this.writeTree_=l}static empty(){return new uo(new Mi(null))}}function Oi(f,l,c){if(Ot(l))return new uo(new Mi(c));{const _=f.writeTree_.findRootMostValueAndPath(l);if(null!=_){const S=_.path;let L=_.value;const Z=In(S,l);return L=L.updateChild(Z,c),new uo(f.writeTree_.set(S,L))}{const S=new Mi(c),L=f.writeTree_.setTree(l,S);return new uo(L)}}}function Ys(f,l,c){let _=f;return an(c,(S,L)=>{_=Oi(_,_t(l,S),L)}),_}function Bi(f,l){if(Ot(l))return uo.empty();{const c=f.writeTree_.setTree(l,new Mi(null));return new uo(c)}}function $o(f,l){return null!=Na(f,l)}function Na(f,l){const c=f.writeTree_.findRootMostValueAndPath(l);return null!=c?f.writeTree_.get(c.path).getChild(In(c.path,l)):null}function gu(f){const l=[],c=f.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(ii,(_,S)=>{l.push(new kr(_,S))}):f.writeTree_.children.inorderTraversal((_,S)=>{null!=S.value&&l.push(new kr(_,S.value))}),l}function ta(f,l){if(Ot(l))return f;{const c=Na(f,l);return new uo(null!=c?new Mi(c):f.writeTree_.subtree(l))}}function Ga(f){return f.writeTree_.isEmpty()}function po(f,l){return Ms(_n(),f.writeTree_,l)}function Ms(f,l,c){if(null!=l.value)return c.updateChild(f,l.value);{let _=null;return l.children.inorderTraversal((S,L)=>{".priority"===S?((0,ie.hu)(null!==L.value,"Priority writes must always be leaf nodes"),_=L.value):c=Ms(_t(f,S),L,c)}),!c.getChild(f).isEmpty()&&null!==_&&(c=c.updateChild(_t(f,".priority"),_)),c}}function ha(f,l){return Jo(l,f)}function Go(f,l){if(f.snap)return br(f.path,l);for(const c in f.children)if(f.children.hasOwnProperty(c)&&br(_t(f.path,c),l))return!0;return!1}function yl(f){return f.visible}function Uu(f,l,c){let _=uo.empty();for(let S=0;S<f.length;++S){const L=f[S];if(l(L)){const Z=L.path;let me;if(L.snap)br(c,Z)?(me=In(c,Z),_=Oi(_,me,L.snap)):br(Z,c)&&(me=In(Z,c),_=Oi(_,_n(),L.snap.getChild(me)));else{if(!L.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(br(c,Z))me=In(c,Z),_=Ys(_,me,L.children);else if(br(Z,c))if(me=In(Z,c),Ot(me))_=Ys(_,_n(),L.children);else{const Ne=(0,ie.DV)(L.children,ir(me));if(Ne){const qe=Ne.getChild(xr(me));_=Oi(_,_n(),qe)}}}}}return _}function wo(f,l,c,_,S){if(_||S){const L=ta(f.visibleWrites,l);return!S&&Ga(L)?c:S||null!=c||$o(L,_n())?po(Uu(f.allWrites,function(qe){return(qe.visible||S)&&(!_||!~_.indexOf(qe.writeId))&&(br(qe.path,l)||br(l,qe.path))},l),c||F.EMPTY_NODE):null}{const L=Na(f.visibleWrites,l);if(null!=L)return L;{const Z=ta(f.visibleWrites,l);return Ga(Z)?c:null!=c||$o(Z,_n())?po(Z,c||F.EMPTY_NODE):null}}}function Js(f,l,c,_){return wo(f.writeTree,f.treePath,l,c,_)}function vs(f,l){return function Su(f,l,c){let _=F.EMPTY_NODE;const S=Na(f.visibleWrites,l);if(S)return S.isLeafNode()||S.forEachChild(ii,(L,Z)=>{_=_.updateImmediateChild(L,Z)}),_;if(c){const L=ta(f.visibleWrites,l);return c.forEachChild(ii,(Z,me)=>{const Ne=po(ta(L,new Mr(Z)),me);_=_.updateImmediateChild(Z,Ne)}),gu(L).forEach(Z=>{_=_.updateImmediateChild(Z.name,Z.node)}),_}return gu(ta(f.visibleWrites,l)).forEach(Z=>{_=_.updateImmediateChild(Z.name,Z.node)}),_}(f.writeTree,f.treePath,l)}function mo(f,l,c,_){return function mu(f,l,c,_,S){(0,ie.hu)(_||S,"Either existingEventSnap or existingServerSnap must exist");const L=_t(l,c);if($o(f.visibleWrites,L))return null;{const Z=ta(f.visibleWrites,L);return Ga(Z)?S.getChild(c):po(Z,S.getChild(c))}}(f.writeTree,f.treePath,l,c,_)}function fa(f,l){return function yu(f,l){return Na(f.visibleWrites,l)}(f.writeTree,_t(f.treePath,l))}function Qo(f,l,c){return function tu(f,l,c,_){const S=_t(l,c),L=Na(f.visibleWrites,S);return null!=L?L:_.isCompleteForChild(c)?po(ta(f.visibleWrites,S),_.getNode().getImmediateChild(c)):null}(f.writeTree,f.treePath,l,c)}function _u(f,l){return Jo(_t(f.treePath,l),f.writeTree)}function Jo(f,l){return{treePath:f,writeTree:l}}class vu{constructor(){this.changeMap=new Map}trackChildChange(l){const c=l.type,_=l.childName;(0,ie.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==_,"Only non-priority child changes can be tracked.");const S=this.changeMap.get(_);if(S){const L=S.type;if("child_added"===c&&"child_removed"===L)this.changeMap.set(_,Vr(_,l.snapshotNode,S.snapshotNode));else if("child_removed"===c&&"child_added"===L)this.changeMap.delete(_);else if("child_removed"===c&&"child_changed"===L)this.changeMap.set(_,gr(_,S.oldSnap));else if("child_changed"===c&&"child_added"===L)this.changeMap.set(_,Pr(_,l.snapshotNode));else{if("child_changed"!==c||"child_changed"!==L)throw(0,ie.g5)("Illegal combination of changes: "+l+" occurred after "+S);this.changeMap.set(_,Vr(_,l.snapshotNode,S.oldSnap))}}else this.changeMap.set(_,l)}getChanges(){return Array.from(this.changeMap.values())}}const Eu=new class Au{getCompleteChild(l){return null}getChildAfterChild(l,c,_){return null}};class pa{constructor(l,c,_=null){this.writes_=l,this.viewCache_=c,this.optCompleteServerCache_=_}getCompleteChild(l){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(l))return c.getNode().getImmediateChild(l);{const _=null!=this.optCompleteServerCache_?new as(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qo(this.writes_,l,_)}}getChildAfterChild(l,c,_){const S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Po(this.viewCache_),L=function Oa(f,l,c,_,S,L){return function nc(f,l,c,_,S,L,Z){let me;const Ne=ta(f.visibleWrites,l),qe=Na(Ne,_n());if(null!=qe)me=qe;else{if(null==c)return[];me=po(Ne,c)}if(me=me.withIndex(Z),me.isEmpty()||me.isLeafNode())return[];{const Mt=[],Gt=Z.getCompare(),Jt=L?me.getReverseIteratorFrom(_,Z):me.getIteratorFrom(_,Z);let Zn=Jt.getNext();for(;Zn&&Mt.length<S;)0!==Gt(Zn,_)&&Mt.push(Zn),Zn=Jt.getNext();return Mt}}(f.writeTree,f.treePath,l,c,_,S,L)}(this.writes_,S,c,1,_,l);return 0===L.length?null:L[0]}}function Hu(f,l,c,_,S,L){const Z=l.eventCache;if(null!=fa(_,c))return l;{let me,Ne;if(Ot(c))if((0,ie.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const qe=Po(l),Gt=vs(_,qe instanceof F?qe:F.EMPTY_NODE);me=f.filter.updateFullNode(l.eventCache.getNode(),Gt,L)}else{const qe=Js(_,Po(l));me=f.filter.updateFullNode(l.eventCache.getNode(),qe,L)}else{const qe=ir(c);if(".priority"===qe){(0,ie.hu)(1===$i(c),"Can't have a priority with additional path components");const Mt=Z.getNode();Ne=l.serverCache.getNode();const Gt=mo(_,c,Mt,Ne);me=null!=Gt?f.filter.updatePriority(Mt,Gt):Z.getNode()}else{const Mt=xr(c);let Gt;if(Z.isCompleteForChild(qe)){Ne=l.serverCache.getNode();const Jt=mo(_,c,Z.getNode(),Ne);Gt=null!=Jt?Z.getNode().getImmediateChild(qe).updateChild(Mt,Jt):Z.getNode().getImmediateChild(qe)}else Gt=Qo(_,qe,l.serverCache);me=null!=Gt?f.filter.updateChild(Z.getNode(),qe,Gt,Mt,S,L):Z.getNode()}}return Ho(l,me,Z.isFullyInitialized()||Ot(c),f.filter.filtersNodes())}}function x(f,l,c,_,S,L,Z,me){const Ne=l.serverCache;let qe;const Mt=Z?f.filter:f.filter.getIndexedFilter();if(Ot(c))qe=Mt.updateFullNode(Ne.getNode(),_,null);else if(Mt.filtersNodes()&&!Ne.isFiltered()){const Zn=Ne.getNode().updateChild(c,_);qe=Mt.updateFullNode(Ne.getNode(),Zn,null)}else{const Zn=ir(c);if(!Ne.isCompleteForPath(c)&&$i(c)>1)return l;const Sr=xr(c),wa=Ne.getNode().getImmediateChild(Zn).updateChild(Sr,_);qe=".priority"===Zn?Mt.updatePriority(Ne.getNode(),wa):Mt.updateChild(Ne.getNode(),Zn,wa,Sr,Eu,null)}const Gt=_s(l,qe,Ne.isFullyInitialized()||Ot(c),Mt.filtersNodes());return Hu(f,Gt,c,S,new pa(S,Gt,L),me)}function D(f,l,c,_,S,L,Z){const me=l.eventCache;let Ne,qe;const Mt=new pa(S,l,L);if(Ot(c))qe=f.filter.updateFullNode(l.eventCache.getNode(),_,Z),Ne=Ho(l,qe,!0,f.filter.filtersNodes());else{const Gt=ir(c);if(".priority"===Gt)qe=f.filter.updatePriority(l.eventCache.getNode(),_),Ne=Ho(l,qe,me.isFullyInitialized(),me.isFiltered());else{const Jt=xr(c),Zn=me.getNode().getImmediateChild(Gt);let Sr;if(Ot(Jt))Sr=_;else{const gs=Mt.getCompleteChild(Gt);Sr=null!=gs?".priority"===ti(Jt)&&gs.getChild(rt(Jt)).isEmpty()?gs:gs.updateChild(Jt,_):F.EMPTY_NODE}Ne=Zn.equals(Sr)?l:Ho(l,f.filter.updateChild(me.getNode(),Gt,Sr,Jt,Mt,Z),me.isFullyInitialized(),f.filter.filtersNodes())}}return Ne}function I(f,l){return f.eventCache.isCompleteForChild(l)}function Y(f,l,c){return c.foreach((_,S)=>{l=l.updateChild(_,S)}),l}function le(f,l,c,_,S,L,Z,me){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let qe,Ne=l;qe=Ot(c)?_:new Mi(null).setTree(c,_);const Mt=l.serverCache.getNode();return qe.children.inorderTraversal((Gt,Jt)=>{if(Mt.hasChild(Gt)){const Sr=Y(0,l.serverCache.getNode().getImmediateChild(Gt),Jt);Ne=x(f,Ne,new Mr(Gt),Sr,S,L,Z,me)}}),qe.children.inorderTraversal((Gt,Jt)=>{const Zn=!l.serverCache.isCompleteForChild(Gt)&&null===Jt.value;if(!Mt.hasChild(Gt)&&!Zn){const gs=Y(0,l.serverCache.getNode().getImmediateChild(Gt),Jt);Ne=x(f,Ne,new Mr(Gt),gs,S,L,Z,me)}}),Ne}class en{constructor(l,c){this.query_=l,this.eventRegistrations_=[];const _=this.query_._queryParams,S=new bi(_.getIndex()),L=function Bn(f){return f.loadsAllData()?new bi(f.getIndex()):f.hasLimit()?new oo(f):new pi(f)}(_);this.processor_=function Bu(f){return{filter:f}}(L);const Z=c.serverCache,me=c.eventCache,Ne=S.updateFullNode(F.EMPTY_NODE,Z.getNode(),null),qe=L.updateFullNode(F.EMPTY_NODE,me.getNode(),null),Mt=new as(Ne,Z.isFullyInitialized(),S.filtersNodes()),Gt=new as(qe,me.isFullyInitialized(),L.filtersNodes());this.viewCache_=$s(Gt,Mt),this.eventGenerator_=new Ui(this.query_)}get query(){return this.query_}}function ln(f,l){const c=Po(f.viewCache_);return c&&(f.query._queryParams.loadsAllData()||!Ot(l)&&!c.getImmediateChild(ir(l)).isEmpty())?c.getChild(l):null}function pn(f){return 0===f.eventRegistrations_.length}function yn(f,l,c){const _=[];if(c){(0,ie.hu)(null==l,"A cancel should cancel all event registrations.");const S=f.query._path;f.eventRegistrations_.forEach(L=>{const Z=L.createCancelEvent(c,S);Z&&_.push(Z)})}if(l){let S=[];for(let L=0;L<f.eventRegistrations_.length;++L){const Z=f.eventRegistrations_[L];if(Z.matches(l)){if(l.hasAnyCallback()){S=S.concat(f.eventRegistrations_.slice(L+1));break}}else S.push(Z)}f.eventRegistrations_=S}else f.eventRegistrations_=[];return _}function vt(f,l,c,_){l.type===Gn.MERGE&&null!==l.source.queryId&&((0,ie.hu)(Po(f.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(da(f.viewCache_),"Missing event cache, even though we have a server cache"));const S=f.viewCache_,L=function ju(f,l,c,_,S){const L=new vu;let Z,me;if(c.type===Gn.OVERWRITE){const qe=c;qe.source.fromUser?Z=D(f,l,qe.path,qe.snap,_,S,L):((0,ie.hu)(qe.source.fromServer,"Unknown source."),me=qe.source.tagged||l.serverCache.isFiltered()&&!Ot(qe.path),Z=x(f,l,qe.path,qe.snap,_,S,me,L))}else if(c.type===Gn.MERGE){const qe=c;qe.source.fromUser?Z=function U(f,l,c,_,S,L,Z){let me=l;return _.foreach((Ne,qe)=>{const Mt=_t(c,Ne);I(l,ir(Mt))&&(me=D(f,me,Mt,qe,S,L,Z))}),_.foreach((Ne,qe)=>{const Mt=_t(c,Ne);I(l,ir(Mt))||(me=D(f,me,Mt,qe,S,L,Z))}),me}(f,l,qe.path,qe.children,_,S,L):((0,ie.hu)(qe.source.fromServer,"Unknown source."),me=qe.source.tagged||l.serverCache.isFiltered(),Z=le(f,l,qe.path,qe.children,_,S,me,L))}else if(c.type===Gn.ACK_USER_WRITE){const qe=c;Z=qe.revert?function $e(f,l,c,_,S,L){let Z;if(null!=fa(_,c))return l;{const me=new pa(_,l,S),Ne=l.eventCache.getNode();let qe;if(Ot(c)||".priority"===ir(c)){let Mt;if(l.serverCache.isFullyInitialized())Mt=Js(_,Po(l));else{const Gt=l.serverCache.getNode();(0,ie.hu)(Gt instanceof F,"serverChildren would be complete if leaf node"),Mt=vs(_,Gt)}qe=f.filter.updateFullNode(Ne,Mt,L)}else{const Mt=ir(c);let Gt=Qo(_,Mt,l.serverCache);null==Gt&&l.serverCache.isCompleteForChild(Mt)&&(Gt=Ne.getImmediateChild(Mt)),qe=null!=Gt?f.filter.updateChild(Ne,Mt,Gt,xr(c),me,L):l.eventCache.getNode().hasChild(Mt)?f.filter.updateChild(Ne,Mt,F.EMPTY_NODE,xr(c),me,L):Ne,qe.isEmpty()&&l.serverCache.isFullyInitialized()&&(Z=Js(_,Po(l)),Z.isLeafNode()&&(qe=f.filter.updateFullNode(qe,Z,L)))}return Z=l.serverCache.isFullyInitialized()||null!=fa(_,_n()),Ho(l,qe,Z,f.filter.filtersNodes())}}(f,l,qe.path,_,S,L):function Re(f,l,c,_,S,L,Z){if(null!=fa(S,c))return l;const me=l.serverCache.isFiltered(),Ne=l.serverCache;if(null!=_.value){if(Ot(c)&&Ne.isFullyInitialized()||Ne.isCompleteForPath(c))return x(f,l,c,Ne.getNode().getChild(c),S,L,me,Z);if(Ot(c)){let qe=new Mi(null);return Ne.getNode().forEachChild(Vi,(Mt,Gt)=>{qe=qe.set(new Mr(Mt),Gt)}),le(f,l,c,qe,S,L,me,Z)}return l}{let qe=new Mi(null);return _.foreach((Mt,Gt)=>{const Jt=_t(c,Mt);Ne.isCompleteForPath(Jt)&&(qe=qe.set(Mt,Ne.getNode().getChild(Jt)))}),le(f,l,c,qe,S,L,me,Z)}}(f,l,qe.path,qe.affectedTree,_,S,L)}else{if(c.type!==Gn.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+c.type);Z=function We(f,l,c,_,S){const L=l.serverCache;return Hu(f,_s(l,L.getNode(),L.isFullyInitialized()||Ot(c),L.isFiltered()),c,_,Eu,S)}(f,l,c.path,_,L)}const Ne=L.getChanges();return function ka(f,l,c){const _=l.eventCache;if(_.isFullyInitialized()){const S=_.getNode().isLeafNode()||_.getNode().isEmpty(),L=da(f);(c.length>0||!f.eventCache.isFullyInitialized()||S&&!_.getNode().equals(L)||!_.getNode().getPriority().equals(L.getPriority()))&&c.push(jr(da(l)))}}(l,Z,Ne),{viewCache:Z,changes:Ne}}(f.processor_,S,l,c,_);return function nu(f,l){(0,ie.hu)(l.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(l.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,L.viewCache),(0,ie.hu)(L.viewCache.serverCache.isFullyInitialized()||!S.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=L.viewCache,Yr(f,L.changes,L.viewCache.eventCache.getNode(),null)}function Yr(f,l,c,_){return function rs(f,l,c,_){const S=[],L=[];return l.forEach(Z=>{"child_changed"===Z.type&&f.index_.indexedValueChanged(Z.oldSnap,Z.snapshotNode)&&L.push(function Ii(f,l){return{type:"child_moved",snapshotNode:l,childName:f}}(Z.childName,Z.snapshotNode))}),Hs(f,S,"child_removed",l,_,c),Hs(f,S,"child_added",l,_,c),Hs(f,S,"child_moved",L,_,c),Hs(f,S,"child_changed",l,_,c),Hs(f,S,"value",l,_,c),S}(f.eventGenerator_,l,c,_?[_]:f.eventRegistrations_)}let ra,nr;class ga{constructor(){this.views=new Map}}function Wa(f,l,c,_){const S=l.source.queryId;if(null!==S){const L=f.views.get(S);return(0,ie.hu)(null!=L,"SyncTree gave us an op for an invalid query."),vt(L,l,c,_)}{let L=[];for(const Z of f.views.values())L=L.concat(vt(Z,l,c,_));return L}}function Ru(f,l,c,_,S){const Z=f.views.get(l._queryIdentifier);if(!Z){let me=Js(c,S?_:null),Ne=!1;me?Ne=!0:_ instanceof F?(me=vs(c,_),Ne=!1):(me=F.EMPTY_NODE,Ne=!1);const qe=$s(new as(me,Ne,!1),new as(_,S,!1));return new en(l,qe)}return Z}function _l(f){const l=[];for(const c of f.views.values())c.query._queryParams.loadsAllData()||l.push(c);return l}function Ka(f,l){let c=null;for(const _ of f.views.values())c=c||ln(_,l);return c}function Hr(f,l){return l._queryParams.loadsAllData()?fs(f):f.views.get(l._queryIdentifier)}function wu(f,l){return null!=Hr(f,l)}function Fa(f){return null!=fs(f)}function fs(f){for(const l of f.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let Os=1;class Yi{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Mi(null),this.pendingWriteTree_=function Qs(){return{visibleWrites:uo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Cn(f,l,c,_,S){return function Zi(f,l,c,_,S){(0,ie.hu)(_>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),f.allWrites.push({path:l,snap:c,writeId:_,visible:S}),S&&(f.visibleWrites=Oi(f.visibleWrites,l,c)),f.lastWriteId=_}(f.pendingWriteTree_,l,c,_,S),S?Ua(f,new Si({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,c)):[]}function ma(f,l,c=!1){const _=function Du(f,l){for(let c=0;c<f.allWrites.length;c++){const _=f.allWrites[c];if(_.writeId===l)return _}return null}(f.pendingWriteTree_,l);if(function go(f,l){const c=f.allWrites.findIndex(me=>me.writeId===l);(0,ie.hu)(c>=0,"removeWrite called with nonexistent writeId.");const _=f.allWrites[c];f.allWrites.splice(c,1);let S=_.visible,L=!1,Z=f.allWrites.length-1;for(;S&&Z>=0;){const me=f.allWrites[Z];me.visible&&(Z>=c&&Go(me,_.path)?S=!1:br(_.path,me.path)&&(L=!0)),Z--}return!!S&&(L?(function si(f){f.visibleWrites=Uu(f.allWrites,yl,_n()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(_.snap?f.visibleWrites=Bi(f.visibleWrites,_.path):an(_.children,Ne=>{f.visibleWrites=Bi(f.visibleWrites,_t(_.path,Ne))}),!0))}(f.pendingWriteTree_,l)){let L=new Mi(null);return null!=_.snap?L=L.set(_n(),!0):an(_.children,Z=>{L=L.set(new Mr(Z),!0)}),Ua(f,new $r(_.path,L,c))}return[]}function bs(f,l,c){return Ua(f,new Si({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,c))}function ya(f,l,c,_,S=!1){const L=l._path,Z=f.syncPointTree_.get(L);let me=[];if(Z&&("default"===l._queryIdentifier||wu(Z,l))){const Ne=function Es(f,l,c,_){const S=l._queryIdentifier,L=[];let Z=[];const me=Fa(f);if("default"===S)for(const[Ne,qe]of f.views.entries())Z=Z.concat(yn(qe,c,_)),pn(qe)&&(f.views.delete(Ne),qe.query._queryParams.loadsAllData()||L.push(qe.query));else{const Ne=f.views.get(S);Ne&&(Z=Z.concat(yn(Ne,c,_)),pn(Ne)&&(f.views.delete(S),Ne.query._queryParams.loadsAllData()||L.push(Ne.query)))}return me&&!Fa(f)&&L.push(new(function jl(){return(0,ie.hu)(ra,"Reference.ts has not been loaded"),ra}())(l._repo,l._path)),{removed:L,events:Z}}(Z,l,c,_);(function $u(f){return 0===f.views.size})(Z)&&(f.syncPointTree_=f.syncPointTree_.remove(L));const qe=Ne.removed;if(me=Ne.events,!S){const Mt=-1!==qe.findIndex(Jt=>Jt._queryParams.loadsAllData()),Gt=f.syncPointTree_.findOnPath(L,(Jt,Zn)=>Fa(Zn));if(Mt&&!Gt){const Jt=f.syncPointTree_.subtree(L);if(!Jt.isEmpty()){const Zn=function ic(f){return f.fold((l,c,_)=>{if(c&&Fa(c))return[fs(c)];{let S=[];return c&&(S=_l(c)),an(_,(L,Z)=>{S=S.concat(Z)}),S}})}(Jt);for(let Sr=0;Sr<Zn.length;++Sr){const gs=Zn[Sr],wa=gs.query,no=wt(f,gs);f.listenProvider_.startListening(zo(wa),qa(f,wa),no.hashFn,no.onComplete)}}}!Gt&&qe.length>0&&!_&&(Mt?f.listenProvider_.stopListening(zo(l),null):qe.forEach(Jt=>{const Zn=f.queryToTagMap.get(Io(Jt));f.listenProvider_.stopListening(zo(Jt),Zn)}))}!function wl(f,l){for(let c=0;c<l.length;++c){const _=l[c];if(!_._queryParams.loadsAllData()){const S=Io(_),L=f.queryToTagMap.get(S);f.queryToTagMap.delete(S),f.tagToQueryMap.delete(L)}}}(f,qe)}return me}function xu(f,l,c,_){const S=iu(f,_);if(null!=S){const L=Ca(S),Z=L.path,me=L.queryId,Ne=In(Z,l);return ia(f,Z,new Si(Ti(me),Ne,c))}return[]}function Co(f,l,c,_=!1){const S=l._path;let L=null,Z=!1;f.syncPointTree_.foreachOnPath(S,(Jt,Zn)=>{const Sr=In(Jt,S);L=L||Ka(Zn,Sr),Z=Z||Fa(Zn)});let Ne,me=f.syncPointTree_.get(S);me?(Z=Z||Fa(me),L=L||Ka(me,_n())):(me=new ga,f.syncPointTree_=f.syncPointTree_.set(S,me)),null!=L?Ne=!0:(Ne=!1,L=F.EMPTY_NODE,f.syncPointTree_.subtree(S).foreachChild((Zn,Sr)=>{const gs=Ka(Sr,_n());gs&&(L=L.updateImmediateChild(Zn,gs))}));const qe=wu(me,l);if(!qe&&!l._queryParams.loadsAllData()){const Jt=Io(l);(0,ie.hu)(!f.queryToTagMap.has(Jt),"View does not exist, but we have a tag");const Zn=function sa(){return Os++}();f.queryToTagMap.set(Jt,Zn),f.tagToQueryMap.set(Zn,Jt)}let Gt=function rc(f,l,c,_,S,L){const Z=Ru(f,l,_,S,L);return f.views.has(l._queryIdentifier)||f.views.set(l._queryIdentifier,Z),function na(f,l){f.eventRegistrations_.push(l)}(Z,c),function Zt(f,l){const c=f.viewCache_.eventCache,_=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(ii,(L,Z)=>{_.push(Pr(L,Z))}),c.isFullyInitialized()&&_.push(jr(c.getNode())),Yr(f,_,c.getNode(),l)}(Z,c)}(me,l,c,ha(f.pendingWriteTree_,S),L,Ne);if(!qe&&!Z&&!_){const Jt=Hr(me,l);Gt=Gt.concat(function Pu(f,l,c){const _=l._path,S=qa(f,l),L=wt(f,c),Z=f.listenProvider_.startListening(zo(l),S,L.hashFn,L.onComplete),me=f.syncPointTree_.subtree(_);if(S)(0,ie.hu)(!Fa(me.value),"If we're adding a query, it shouldn't be shadowed");else{const Ne=me.fold((qe,Mt,Gt)=>{if(!Ot(qe)&&Mt&&Fa(Mt))return[fs(Mt).query];{let Jt=[];return Mt&&(Jt=Jt.concat(_l(Mt).map(Zn=>Zn.query))),an(Gt,(Zn,Sr)=>{Jt=Jt.concat(Sr)}),Jt}});for(let qe=0;qe<Ne.length;++qe){const Mt=Ne[qe];f.listenProvider_.stopListening(zo(Mt),qa(f,Mt))}}return Z}(f,l,Jt))}return Gt}function Wu(f,l,c){const S=f.pendingWriteTree_,L=f.syncPointTree_.findOnPath(l,(Z,me)=>{const qe=Ka(me,In(Z,l));if(qe)return qe});return wo(S,l,L,c,!0)}function Ua(f,l){return xs(l,f.syncPointTree_,null,ha(f.pendingWriteTree_,_n()))}function xs(f,l,c,_){if(Ot(f.path))return ru(f,l,c,_);{const S=l.get(_n());null==c&&null!=S&&(c=Ka(S,_n()));let L=[];const Z=ir(f.path),me=f.operationForChild(Z),Ne=l.children.get(Z);if(Ne&&me){const qe=c?c.getImmediateChild(Z):null,Mt=_u(_,Z);L=L.concat(xs(me,Ne,qe,Mt))}return S&&(L=L.concat(Wa(S,f,_,c))),L}}function ru(f,l,c,_){const S=l.get(_n());null==c&&null!=S&&(c=Ka(S,_n()));let L=[];return l.children.inorderTraversal((Z,me)=>{const Ne=c?c.getImmediateChild(Z):null,qe=_u(_,Z),Mt=f.operationForChild(Z);Mt&&(L=L.concat(ru(Mt,me,Ne,qe)))}),S&&(L=L.concat(Wa(S,f,_,c))),L}function wt(f,l){const c=l.query,_=qa(f,c);return{hashFn:()=>(function yr(f){return f.viewCache_.serverCache.getNode()}(l)||F.EMPTY_NODE).hash(),onComplete:S=>{if("ok"===S)return _?function Mu(f,l,c){const _=iu(f,c);if(_){const S=Ca(_),L=S.path,Z=S.queryId,me=In(L,l);return ia(f,L,new qi(Ti(Z),me))}return[]}(f,c._path,_):function zu(f,l){return Ua(f,new qi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(f,c._path);{const L=function De(f,l){let c="Unknown Error";"too_big"===f?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?c="Client doesn't have permission to access the desired data.":"unavailable"===f&&(c="The service is unavailable");const _=new Error(f+" at "+l._path.toString()+": "+c);return _.code=f.toUpperCase(),_}(S,c);return ya(f,c,null,L)}}}}function qa(f,l){const c=Io(l);return f.queryToTagMap.get(c)}function Io(f){return f._path.toString()+"$"+f._queryIdentifier}function iu(f,l){return f.tagToQueryMap.get(l)}function Ca(f){const l=f.indexOf("$");return(0,ie.hu)(-1!==l&&l<f.length-1,"Bad queryKey."),{queryId:f.substr(l+1),path:new Mr(f.substr(0,l))}}function ia(f,l,c){const _=f.syncPointTree_.get(l);return(0,ie.hu)(_,"Missing sync point for query tag that we're tracking"),Wa(_,c,ha(f.pendingWriteTree_,l),null)}function zo(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function xi(){return(0,ie.hu)(nr,"Reference.ts has not been loaded"),nr}())(f._repo,f._path):f}class Ia{constructor(l){this.node_=l}getImmediateChild(l){const c=this.node_.getImmediateChild(l);return new Ia(c)}node(){return this.node_}}class Xs{constructor(l,c){this.syncTree_=l,this.path_=c}getImmediateChild(l){const c=_t(this.path_,l);return new Xs(this.syncTree_,c)}node(){return Wu(this.syncTree_,this.path_)}}const Xo=function(f,l,c){return f&&"object"==typeof f?((0,ie.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?rl(f[".sv"],l,c):"object"==typeof f[".sv"]?To(f[".sv"],l):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},rl=function(f,l,c){if("timestamp"===f)return c.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+f)},To=function(f,l,c){f.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const _=f.increment;"number"!=typeof _&&(0,ie.hu)(!1,"Unexpected increment value: "+_);const S=l.node();if((0,ie.hu)(null!=S,"Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return _;const Z=S.getValue();return"number"!=typeof Z?_:Z+_},Ta=function(f,l,c,_){return ba(l,new Xs(c,f),_)},Za=function(f,l,c){return ba(f,new Ia(l),c)};function ba(f,l,c){const _=f.getPriority().val(),S=Xo(_,l.getImmediateChild(".priority"),c);let L;if(f.isLeafNode()){const Z=f,me=Xo(Z.getValue(),l,c);return me!==Z.getValue()||S!==Z.getPriority().val()?new Ro(me,Oe(S)):f}{const Z=f;return L=Z,S!==Z.getPriority().val()&&(L=L.updatePriority(new Ro(S))),Z.forEachChild(ii,(me,Ne)=>{const qe=ba(Ne,l.getImmediateChild(me),c);qe!==Ne&&(L=L.updateImmediateChild(me,qe))}),L}}class Ba{constructor(l="",c=null,_={children:{},childCount:0}){this.name=l,this.parent=c,this.node=_}}function ou(f,l){let c=l instanceof Mr?l:new Mr(l),_=f,S=ir(c);for(;null!==S;){const L=(0,ie.DV)(_.node.children,S)||{children:{},childCount:0};_=new Ba(S,_,L),c=xr(c),S=ir(c)}return _}function Ya(f){return f.node.value}function Gs(f,l){f.node.value=l,il(f)}function Cl(f){return f.node.childCount>0}function Ku(f,l){an(f.node.children,(c,_)=>{l(new Ba(c,f,_))})}function qu(f,l,c,_){c&&!_&&l(f),Ku(f,S=>{qu(S,l,!0,_)}),c&&_&&l(f)}function Nu(f){return new Mr(null===f.parent?f.name:Nu(f.parent)+"/"+f.name)}function il(f){null!==f.parent&&function Il(f,l,c){const _=function Cu(f){return void 0===Ya(f)&&!Cl(f)}(c),S=(0,ie.r3)(f.node.children,l);_&&S?(delete f.node.children[l],f.node.childCount--,il(f)):!_&&!S&&(f.node.children[l]=c.node,f.node.childCount++,il(f))}(f.parent,f.name,f)}const Yu=/[\[\].#$\/\u0000-\u001F\u007F]/,sl=/[\[\].#$\u0000-\u001F\u007F]/,au=10485760,q=function(f){return"string"==typeof f&&0!==f.length&&!Yu.test(f)},E=function(f){return"string"==typeof f&&0!==f.length&&!sl.test(f)},ye=function(f,l,c){const _=c instanceof Mr?new di(c,f):c;if(void 0===l)throw new Error(f+"contains undefined "+ds(_));if("function"==typeof l)throw new Error(f+"contains a function "+ds(_)+" with contents = "+l.toString());if(bt(l))throw new Error(f+"contains "+l.toString()+" "+ds(_));if("string"==typeof l&&l.length>au/3&&(0,ie.ug)(l)>au)throw new Error(f+"contains a string greater than "+au+" utf8 bytes "+ds(_)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let S=!1,L=!1;if(an(l,(Z,me)=>{if(".value"===Z)S=!0;else if(".priority"!==Z&&".sv"!==Z&&(L=!0,!q(Z)))throw new Error(f+" contains an invalid key ("+Z+") "+ds(_)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ks(f,l){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(l),f.byteLength_+=(0,ie.ug)(l),Wi(f)})(_,Z),ye(f,me,_),function ui(f){const l=f.parts_.pop();f.byteLength_-=(0,ie.ug)(l),f.parts_.length>0&&(f.byteLength_-=1)}(_)}),S&&L)throw new Error(f+' contains ".value" child '+ds(_)+" in addition to actual children.")}},je=function(f,l,c,_){if(_&&void 0===l)return;const S=(0,ie.gK)(f,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(S+" must be an object containing the children to replace.");const L=[];an(l,(Z,me)=>{const Ne=new Mr(Z);if(ye(S,me,_t(c,Ne)),".priority"===ti(Ne)&&!function(f){return null===f||"string"==typeof f||"number"==typeof f&&!bt(f)||f&&"object"==typeof f&&(0,ie.r3)(f,".sv")}(me))throw new Error(S+"contains an invalid value for '"+Ne.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");L.push(Ne)}),function(f,l){let c,_;for(c=0;c<l.length;c++){_=l[c];const L=Ze(_);for(let Z=0;Z<L.length;Z++)if((".priority"!==L[Z]||Z!==L.length-1)&&!q(L[Z]))throw new Error(f+"contains an invalid key ("+L[Z]+") in path "+_.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(Lr);let S=null;for(c=0;c<l.length;c++){if(_=l[c],null!==S&&br(S,_))throw new Error(f+"contains a path "+S.toString()+" that is ancestor of another path "+_.toString());S=_}}(S,L)},Pn=function(f,l,c,_){if(!(_&&void 0===c||E(c)))throw new Error((0,ie.gK)(f,l)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class Er{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ur(f,l){let c=null;for(let _=0;_<l.length;_++){const S=l[_],L=S.getPath();null!==c&&!hr(L,c.path)&&(f.eventLists_.push(c),c=null),null===c&&(c={events:[],path:L}),c.events.push(S)}c&&f.eventLists_.push(c)}function wr(f,l,c){ur(f,c),us(f,_=>hr(_,l))}function Ai(f,l,c){ur(f,c),us(f,_=>br(_,l)||br(l,_))}function us(f,l){f.recursionDepth_++;let c=!0;for(let _=0;_<f.eventLists_.length;_++){const S=f.eventLists_[_];S&&(l(S.path)?(hi(f.eventLists_[_]),f.eventLists_[_]=null):c=!1)}c&&(f.eventLists_=[]),f.recursionDepth_--}function hi(f){for(let l=0;l<f.events.length;l++){const c=f.events[l];if(null!==c){f.events[l]=null;const _=c.getEventRunner();dn&&Me("event: "+c.toString()),cn(_)}}}class is{constructor(l,c,_,S){this.repoInfo_=l,this.forceRestClient_=c,this.authTokenProvider_=_,this.appCheckProvider_=S,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Er,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=z(),this.transactionQueueTree_=new Ba,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ji(f){const c=f.infoData_.getNode(new Mr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function yi(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:ji(f)})}function eo(f,l,c,_,S){f.dataUpdateCount++;const L=new Mr(l);c=f.interceptServerDataCallback_?f.interceptServerDataCallback_(l,c):c;let Z=[];if(S)if(_){const Ne=(0,ie.UI)(c,qe=>Oe(qe));Z=function vl(f,l,c,_){const S=iu(f,_);if(S){const L=Ca(S),Z=L.path,me=L.queryId,Ne=In(Z,l),qe=Mi.fromObject(c);return ia(f,Z,new Rs(Ti(me),Ne,qe))}return[]}(f.serverSyncTree_,L,Ne,S)}else{const Ne=Oe(c);Z=xu(f.serverSyncTree_,L,Ne,S)}else if(_){const Ne=(0,ie.UI)(c,qe=>Oe(qe));Z=function Va(f,l,c){const _=Mi.fromObject(c);return Ua(f,new Rs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,_))}(f.serverSyncTree_,L,Ne)}else{const Ne=Oe(c);Z=bs(f.serverSyncTree_,L,Ne)}let me=L;Z.length>0&&(me=Yn(f,L)),Ai(f.eventQueue_,me,Z)}function oa(f,l){yo(f,"connected",l),!1===l&&function Dr(f){_e(f,"onDisconnectEvents");const l=yi(f),c=z();Ie(f.onDisconnect_,_n(),(S,L)=>{const Z=Ta(S,L,f.serverSyncTree_,l);W(c,S,Z)});let _=[];Ie(c,_n(),(S,L)=>{_=_.concat(bs(f.serverSyncTree_,S,L));const Z=Iu(f,S);Yn(f,Z)}),f.onDisconnect_=z(),Ai(f.eventQueue_,_n(),_)}(f)}function yo(f,l,c){const _=new Mr("/.info/"+l),S=Oe(c);f.infoData_.updateSnapshot(_,S);const L=bs(f.infoSyncTree_,_,S);Ai(f.eventQueue_,_,L)}function Sa(f){return f.nextWriteId_++}function b(f,l,c){let _;_=".info"===ir(l._path)?ya(f.infoSyncTree_,l,c):ya(f.serverSyncTree_,l,c),wr(f.eventQueue_,l._path,_)}function _e(f,...l){let c="";f.persistentConnection_&&(c=f.persistentConnection_.id+":"),Me(c,...l)}function He(f,l,c,_){l&&cn(()=>{if("ok"===c)l(null);else{const S=(c||"error").toUpperCase();let L=S;_&&(L+=": "+_);const Z=new Error(L);Z.code=S,l(Z)}})}function kt(f,l,c){return Wu(f.serverSyncTree_,l,c)||F.EMPTY_NODE}function mn(f,l=f.transactionQueueTree_){if(l||Ds(f,l),Ya(l)){const c=bo(f,l);(0,ie.hu)(c.length>0,"Sending zero length transaction queue"),c.every(S=>0===S.status)&&function vn(f,l,c){const _=c.map(qe=>qe.currentWriteId),S=kt(f,l,_);let L=S;const Z=S.hash();for(let qe=0;qe<c.length;qe++){const Mt=c[qe];(0,ie.hu)(0===Mt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Mt.status=1,Mt.retryCount++;const Gt=In(l,Mt.path);L=L.updateChild(Gt,Mt.currentOutputSnapshotRaw)}const me=L.val(!0),Ne=l;f.server_.put(Ne.toString(),me,qe=>{_e(f,"transaction put response",{path:Ne.toString(),status:qe});let Mt=[];if("ok"===qe){const Gt=[];for(let Jt=0;Jt<c.length;Jt++)c[Jt].status=2,Mt=Mt.concat(ma(f.serverSyncTree_,c[Jt].currentWriteId)),c[Jt].onComplete&&Gt.push(()=>c[Jt].onComplete(null,!0,c[Jt].currentOutputSnapshotResolved)),c[Jt].unwatcher();Ds(f,ou(f.transactionQueueTree_,l)),mn(f,f.transactionQueueTree_),Ai(f.eventQueue_,l,Mt);for(let Jt=0;Jt<Gt.length;Jt++)cn(Gt[Jt])}else{if("datastale"===qe)for(let Gt=0;Gt<c.length;Gt++)c[Gt].status=3===c[Gt].status?4:0;else{et("transaction at "+Ne.toString()+" failed: "+qe);for(let Gt=0;Gt<c.length;Gt++)c[Gt].status=4,c[Gt].abortReason=qe}Yn(f,l)}},Z)}(f,Nu(l),c)}else Cl(l)&&Ku(l,c=>{mn(f,c)})}function Yn(f,l){const c=Nr(f,l),_=Nu(c);return function ei(f,l,c){if(0===l.length)return;const _=[];let S=[];const Z=l.filter(me=>0===me.status).map(me=>me.currentWriteId);for(let me=0;me<l.length;me++){const Ne=l[me],qe=In(c,Ne.path);let Gt,Mt=!1;if((0,ie.hu)(null!==qe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ne.status)Mt=!0,Gt=Ne.abortReason,S=S.concat(ma(f.serverSyncTree_,Ne.currentWriteId,!0));else if(0===Ne.status)if(Ne.retryCount>=25)Mt=!0,Gt="maxretry",S=S.concat(ma(f.serverSyncTree_,Ne.currentWriteId,!0));else{const Jt=kt(f,Ne.path,Z);Ne.currentInputSnapshot=Jt;const Zn=l[me].update(Jt.val());if(void 0!==Zn){ye("transaction failed: Data returned ",Zn,Ne.path);let Sr=Oe(Zn);"object"==typeof Zn&&null!=Zn&&(0,ie.r3)(Zn,".priority")||(Sr=Sr.updatePriority(Jt.getPriority()));const wa=Ne.currentWriteId,no=yi(f),Li=Za(Sr,Jt,no);Ne.currentOutputSnapshotRaw=Sr,Ne.currentOutputSnapshotResolved=Li,Ne.currentWriteId=Sa(f),Z.splice(Z.indexOf(wa),1),S=S.concat(Cn(f.serverSyncTree_,Ne.path,Li,Ne.currentWriteId,Ne.applyLocally)),S=S.concat(ma(f.serverSyncTree_,wa,!0))}else Mt=!0,Gt="nodata",S=S.concat(ma(f.serverSyncTree_,Ne.currentWriteId,!0))}Ai(f.eventQueue_,c,S),S=[],Mt&&(l[me].status=2,setTimeout(l[me].unwatcher,Math.floor(0)),l[me].onComplete&&_.push("nodata"===Gt?()=>l[me].onComplete(null,!1,l[me].currentInputSnapshot):()=>l[me].onComplete(new Error(Gt),!1,null)))}Ds(f,f.transactionQueueTree_);for(let me=0;me<_.length;me++)cn(_[me]);mn(f,f.transactionQueueTree_)}(f,bo(f,c),_),_}function Nr(f,l){let c,_=f.transactionQueueTree_;for(c=ir(l);null!==c&&void 0===Ya(_);)_=ou(_,c),c=ir(l=xr(l));return _}function bo(f,l){const c=[];return co(f,l,c),c.sort((_,S)=>_.order-S.order),c}function co(f,l,c){const _=Ya(l);if(_)for(let S=0;S<_.length;S++)c.push(_[S]);Ku(l,S=>{co(f,S,c)})}function Ds(f,l){const c=Ya(l);if(c){let _=0;for(let S=0;S<c.length;S++)2!==c[S].status&&(c[_]=c[S],_++);c.length=_,Gs(l,c.length>0?c:void 0)}Ku(l,_=>{Ds(f,_)})}function Iu(f,l){const c=Nu(Nr(f,l)),_=ou(f.transactionQueueTree_,l);return function Zu(f,l,c){let _=c?f:f.parent;for(;null!==_;){if(l(_))return!0;_=_.parent}}(_,S=>{Hi(f,S)}),Hi(f,_),qu(_,S=>{Hi(f,S)}),c}function Hi(f,l){const c=Ya(l);if(c){const _=[];let S=[],L=-1;for(let Z=0;Z<c.length;Z++)3===c[Z].status||(1===c[Z].status?((0,ie.hu)(L===Z-1,"All SENT items should be at beginning of queue."),L=Z,c[Z].status=3,c[Z].abortReason="set"):((0,ie.hu)(0===c[Z].status,"Unexpected transaction status in abort"),c[Z].unwatcher(),S=S.concat(ma(f.serverSyncTree_,c[Z].currentWriteId,!0)),c[Z].onComplete&&_.push(c[Z].onComplete.bind(null,new Error("set"),!1,null))));-1===L?Gs(l,void 0):c.length=L+1,Ai(f.eventQueue_,Nu(l),S);for(let Z=0;Z<_.length;Z++)cn(_[Z])}}const ol=function(f,l){const c=Hl(f),_=c.namespace;return"firebase.com"===c.domain&&pt(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!_||"undefined"===_)&&"localhost"!==c.domain&&pt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new At(c.host,c.secure,_,"ws"===c.scheme||"wss"===c.scheme,l,"",_!==c.subdomain),path:new Mr(c.pathString)}},Hl=function(f){let l="",c="",_="",S="",L="",Z=!0,me="https",Ne=443;if("string"==typeof f){let qe=f.indexOf("//");qe>=0&&(me=f.substring(0,qe-1),f=f.substring(qe+2));let Mt=f.indexOf("/");-1===Mt&&(Mt=f.length);let Gt=f.indexOf("?");-1===Gt&&(Gt=f.length),l=f.substring(0,Math.min(Mt,Gt)),Mt<Gt&&(S=function Do(f){let l="";const c=f.split("/");for(let _=0;_<c.length;_++)if(c[_].length>0){let S=c[_];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch(L){}l+="/"+S}return l}(f.substring(Mt,Gt)));const Jt=function ja(f){const l={};"?"===f.charAt(0)&&(f=f.substring(1));for(const c of f.split("&")){if(0===c.length)continue;const _=c.split("=");2===_.length?l[decodeURIComponent(_[0])]=decodeURIComponent(_[1]):et(`Invalid query segment '${c}' in query '${f}'`)}return l}(f.substring(Math.min(f.length,Gt)));qe=l.indexOf(":"),qe>=0?(Z="https"===me||"wss"===me,Ne=parseInt(l.substring(qe+1),10)):qe=l.length;const Zn=l.slice(0,qe);if("localhost"===Zn.toLowerCase())c="localhost";else if(Zn.split(".").length<=2)c=Zn;else{const Sr=l.indexOf(".");_=l.substring(0,Sr).toLowerCase(),c=l.substring(Sr+1),L=_}"ns"in Jt&&(L=Jt.ns)}return{host:l,port:Ne,domain:c,subdomain:_,secure:Z,scheme:me,pathString:S,namespace:L}};class _i{constructor(l,c,_,S){this.eventType=l,this.eventRegistration=c,this.snapshot=_,this.prevName=S}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Wl)(this.snapshot.exportVal())}}class Qi{constructor(l,c,_){this.eventRegistration=l,this.error=c,this.path=_}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class uu{constructor(l,c){this.snapshotCallback=l,this.cancelCallback=c}onValue(l,c){this.snapshotCallback.call(null,l,c)}onCancel(l){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class _a{constructor(l,c,_,S){this._repo=l,this._path=c,this._queryParams=_,this._orderByCalled=S}get key(){return Ot(this._path)?null:ti(this._path)}get ref(){return new Aa(this._repo,this._path)}get _queryIdentifier(){const l=ke(this._queryParams),c=fr(l);return"{}"===c?"default":c}get _queryObject(){return ke(this._queryParams)}isEqual(l){if(!((l=(0,ie.m9)(l))instanceof _a))return!1;const c=this._repo===l._repo,_=hr(this._path,l._path);return c&&_&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Xe(f){let l="";for(let c=f.pieceNum_;c<f.pieces_.length;c++)""!==f.pieces_[c]&&(l+="/"+encodeURIComponent(String(f.pieces_[c])));return l||"/"}(this._path)}}class Aa extends _a{constructor(l,c){super(l,c,new Ni,!1)}get parent(){const l=rt(this._path);return null===l?null:new Aa(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class Ou{constructor(l,c,_){this._node=l,this.ref=c,this._index=_}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const c=new Mr(l),_=p(this.ref,l);return new Ou(this._node.getChild(c),_,ii)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(_,S)=>l(new Ou(S,p(this.ref,_),ii)))}hasChild(l){const c=new Mr(l);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Hd(f,l){return(f=(0,ie.m9)(f))._checkNotDeleted("ref"),void 0!==l?p(f._root,l):f._root}function p(f,l){return null===ir((f=(0,ie.m9)(f))._path)?(c=l,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Pn("child","path",c,!1)):Pn("child","path",l,!1),new Aa(f._repo,_t(f._path,l));var c}function pe(f,l){(function(f,l){if(".info"===ir(l))throw new Error(f+" failed = Can't modify data under /.info/")})("set",(f=(0,ie.m9)(f))._path),function(f,l,c,_){_&&void 0===l||ye((0,ie.gK)(f,"value"),l,c)}("set",l,f._path,!1);const c=new ie.BH;return function Hn(f,l,c,_,S){_e(f,"set",{path:l.toString(),value:c,priority:_});const L=yi(f),Z=Oe(c,_),me=Wu(f.serverSyncTree_,l),Ne=Za(Z,me,L),qe=Sa(f),Mt=Cn(f.serverSyncTree_,l,Ne,qe,!0);ur(f.eventQueue_,Mt),f.server_.put(l.toString(),Z.val(!0),(Jt,Zn)=>{const Sr="ok"===Jt;Sr||et("set at "+l+" failed: "+Jt);const gs=ma(f.serverSyncTree_,qe,!Sr);Ai(f.eventQueue_,l,gs),He(0,S,Jt,Zn)});const Gt=Iu(f,l);Yn(f,Gt),Ai(f.eventQueue_,Gt,[])}(f._repo,f._path,l,null,c.wrapCallback(()=>{})),c.promise}function hn(f,l){je("update",l,f._path,!1);const c=new ie.BH;return function sr(f,l,c,_){_e(f,"update",{path:l.toString(),value:c});let S=!0;const L=yi(f),Z={};if(an(c,(me,Ne)=>{S=!1,Z[me]=Ta(_t(l,me),Oe(Ne),f.serverSyncTree_,L)}),S)Me("update() called with empty data.  Don't do anything."),He(0,_,"ok",void 0);else{const me=Sa(f),Ne=function Gu(f,l,c,_){!function Yo(f,l,c,_){(0,ie.hu)(_>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:l,children:c,writeId:_,visible:!0}),f.visibleWrites=Ys(f.visibleWrites,l,c),f.lastWriteId=_}(f.pendingWriteTree_,l,c,_);const S=Mi.fromObject(c);return Ua(f,new Rs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,S))}(f.serverSyncTree_,l,Z,me);ur(f.eventQueue_,Ne),f.server_.merge(l.toString(),c,(qe,Mt)=>{const Gt="ok"===qe;Gt||et("update at "+l+" failed: "+qe);const Jt=ma(f.serverSyncTree_,me,!Gt),Zn=Jt.length>0?Yn(f,l):l;Ai(f.eventQueue_,Zn,Jt),He(0,_,qe,Mt)}),an(c,qe=>{const Mt=Iu(f,_t(l,qe));Yn(f,Mt)}),Ai(f.eventQueue_,l,[])}}(f._repo,f._path,l,c.wrapCallback(()=>{})),c.promise}function Un(f){f=(0,ie.m9)(f);const l=new uu(()=>{}),c=new Cr(l);return function Oo(f,l,c){const _=function El(f,l){const c=l._path;let _=null;f.syncPointTree_.foreachOnPath(c,(qe,Mt)=>{const Gt=In(qe,c);_=_||Ka(Mt,Gt)});let S=f.syncPointTree_.get(c);S?_=_||Ka(S,_n()):(S=new ga,f.syncPointTree_=f.syncPointTree_.set(c,S));const L=null!=_,Z=L?new as(_,!0,!1):null;return function Kn(f){return da(f.viewCache_)}(Ru(S,l,ha(f.pendingWriteTree_,l._path),L?Z.getNode():F.EMPTY_NODE,L))}(f.serverSyncTree_,l);return null!=_?Promise.resolve(_):f.server_.get(l).then(S=>{const L=Oe(S).withIndex(l._queryParams.getIndex());let Z;if(Co(f.serverSyncTree_,l,c,!0),l._queryParams.loadsAllData())Z=bs(f.serverSyncTree_,l._path,L);else{const me=qa(f.serverSyncTree_,l);Z=xu(f.serverSyncTree_,l._path,L,me)}return Ai(f.eventQueue_,l._path,Z),ya(f.serverSyncTree_,l,c,null,!0),L},S=>(_e(f,"get for query "+(0,ie.Wl)(l)+" failed: "+S),Promise.reject(new Error(S))))}(f._repo,f,c).then(_=>new Ou(_,new Aa(f._repo,f._path),f._queryParams.getIndex()))}class Cr{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,c){const _=c._queryParams.getIndex();return new _i("value",this,new Ou(l.snapshotNode,new Aa(c._repo,c._path),_))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Qi(this,l,c):null}matches(l){return l instanceof Cr&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Or{constructor(l,c){this.eventType=l,this.callbackContext=c}respondsTo(l){let c="children_added"===l?"child_added":l;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Qi(this,l,c):null}createEvent(l,c){(0,ie.hu)(null!=l.childName,"Child events should have a childName.");const _=p(new Aa(c._repo,c._path),l.childName),S=c._queryParams.getIndex();return new _i(l.type,this,new Ou(l.snapshotNode,_,S),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof Or&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ki(f,l,c,_,S){let L;if("object"==typeof _&&(L=void 0,S=_),"function"==typeof _&&(L=_),S&&S.onlyOnce){const Ne=c,qe=(Mt,Gt)=>{b(f._repo,f,me),Ne(Mt,Gt)};qe.userCallback=c.userCallback,qe.context=c.context,c=qe}const Z=new uu(c,L||void 0),me="value"===l?new Cr(Z):new Or(l,Z);return function ko(f,l,c){let _;_=".info"===ir(l._path)?Co(f.infoSyncTree_,l,c):Co(f.serverSyncTree_,l,c),wr(f.eventQueue_,l._path,_)}(f._repo,f,me),()=>b(f._repo,f,me)}function aa(f,l,c,_){return ki(f,"value",l,c,_)}function al(f,l,c,_){return ki(f,"child_added",l,c,_)}function ac(f,l,c){let _=null;const S=c?new uu(c):null;"value"===l?_=new Cr(S):l&&(_=new Or(l,S)),b(f._repo,f,_)}(function za(f){(0,ie.hu)(!ra,"__referenceConstructor has already been defined"),ra=f})(Aa),function La(f){(0,ie.hu)(!nr,"__referenceConstructor has already been defined"),nr=f}(Aa);const vi={};function Jh(f,l,c,_,S){let L=_||f.options.databaseURL;void 0===L&&(f.options.projectId||pt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Me("Using default host for project ",f.options.projectId),L=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Ne,qe,Z=ol(L,S),me=Z.repoInfo;"undefined"!=typeof process&&process.env&&(qe=process.env.FIREBASE_DATABASE_EMULATOR_HOST),qe?(Ne=!0,L=`http://${qe}?ns=${me.namespace}`,Z=ol(L,S),me=Z.repoInfo):Ne=!Z.repoInfo.secure;const Mt=S&&Ne?new jn(jn.OWNER):new or(f.name,f.options,l);(function(f,l){const c=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!q(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==c.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),E(f)}(c))throw new Error((0,ie.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",Z),Ot(Z.path)||pt("Database URL must point to the root of a Firebase Database (not including a child path).");const Gt=function ef(f,l,c,_){let S=vi[l.name];S||(S={},vi[l.name]=S);let L=S[f.toURLString()];return L&&pt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new is(f,false,c,_),S[f.toURLString()]=L,L}(me,f,Mt,new pr(f.name,c));return new fm(Gt,f)}class fm{constructor(l,c){this._repoInternal=l,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function No(f,l,c){if(f.stats_=ci(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Kt(f.repoInfo_,(_,S,L,Z)=>{eo(f,_,S,L,Z)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>oa(f,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Wl)(c)}catch(_){throw new Error("Invalid authOverride provided: "+_)}}f.persistentConnection_=new hs(f.repoInfo_,l,(_,S,L,Z)=>{eo(f,_,S,L,Z)},_=>{oa(f,_)},_=>{!function ps(f,l){an(l,(c,_)=>{yo(f,c,_)})}(f,_)},f.authTokenProvider_,f.appCheckProvider_,c),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(_=>{f.server_.refreshAuthToken(_)}),f.appCheckProvider_.addTokenChangeListener(_=>{f.server_.refreshAppCheckToken(_.token)}),f.statsReporter_=function Tr(f,l){const c=f.toString();return Mn[c]||(Mn[c]=l()),Mn[c]}(f.repoInfo_,()=>new cr(f.stats_,f.server_)),f.infoData_=new gi,f.infoSyncTree_=new Yi({startListening:(_,S,L,Z)=>{let me=[];const Ne=f.infoData_.getNode(_._path);return Ne.isEmpty()||(me=bs(f.infoSyncTree_,_._path,Ne),setTimeout(()=>{Z("ok")},0)),me},stopListening:()=>{}}),yo(f,"connected",!1),f.serverSyncTree_=new Yi({startListening:(_,S,L,Z)=>(f.server_.listen(_,L,S,(me,Ne)=>{const qe=Z(me,Ne);Ai(f.eventQueue_,_._path,qe)}),[]),stopListening:(_,S)=>{f.server_.unlisten(_,S)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Aa(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Xh(f,l){const c=vi[l];(!c||c[f.key]!==f)&&pt(`Database ${l}(${f.repoInfo_}) has already been deleted.`),function P(f){f.persistentConnection_&&f.persistentConnection_.interrupt("repo_interrupt")}(f),delete c[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&pt("Cannot call "+l+" on a deleted database.")}}function Ma(f=(0,B.getApp)(),l){const c=(0,B._getProvider)(f,"database").getImmediate({identifier:l});if(!c._instanceStarted){const _=(0,ie.P0)("database");_&&function dc(f,l,c,_={}){(f=(0,ie.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&pt("Cannot call useEmulator() after instance has already been initialized.");const S=f._repoInternal;let L;if(S.repoInfo_.nodeAdmin)_.mockUserToken&&pt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new jn(jn.OWNER);else if(_.mockUserToken){const Z="string"==typeof _.mockUserToken?_.mockUserToken:(0,ie.Sg)(_.mockUserToken,f.app.options.projectId);L=new jn(Z)}!function sd(f,l,c,_){f.repoInfo_=new At(`${l}:${c}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams,!0),_&&(f.authTokenProvider_=_)}(S,l,c,L)}(c,..._)}return c}hs.prototype.simpleListen=function(f,l){this.sendRequest("q",{p:f},l)},hs.prototype.echo=function(f,l){this.sendRequest("echo",{d:f},l)},function cp(f){(function at(f){Ge=f})(B.SDK_VERSION),(0,B._registerComponent)(new X.wA("database",(l,{instanceIdentifier:c})=>Jh(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,B.registerVersion)(Ke,"0.14.4",f),(0,B.registerVersion)(Ke,"0.14.4","esm2017")}()},2290:(fn,ct,$)=>{$.d(ct,{Rh:()=>fr,_W:()=>rn});var y=$(5e3),B=$(1777),X=$(7579),ie=$(9808),Ue=$(2313);const Ke=["toast-component",""];function Je(ve,De){if(1&ve){const Ee=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){return y.CHM(Ee),y.oxw().remove()}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function Ge(ve,De){if(1&ve&&(y.ynx(0),y._uU(1),y.BQk()),2&ve){const Ee=y.oxw(2);y.xp6(1),y.hij("[",Ee.duplicatesCount+1,"]")}}function at(ve,De){if(1&ve&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,Ge,2,1,"ng-container",4),y.qZA()),2&ve){const Ee=y.oxw();y.Tol(Ee.options.titleClass),y.uIk("aria-label",Ee.title),y.xp6(1),y.hij(" ",Ee.title," "),y.xp6(1),y.Q6J("ngIf",Ee.duplicatesCount)}}function be(ve,De){if(1&ve&&y._UZ(0,"div",7),2&ve){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.Q6J("innerHTML",Ee.message,y.oJD)}}function Ce(ve,De){if(1&ve&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&ve){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.uIk("aria-label",Ee.message),y.xp6(1),y.hij(" ",Ee.message," ")}}function tt(ve,De){if(1&ve&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&ve){const Ee=y.oxw();y.xp6(1),y.Udp("width",Ee.width+"%")}}function Lt(ve,De){if(1&ve){const Ee=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){return y.CHM(Ee),y.oxw().remove()}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function ft(ve,De){if(1&ve&&(y.ynx(0),y._uU(1),y.BQk()),2&ve){const Ee=y.oxw(2);y.xp6(1),y.hij("[",Ee.duplicatesCount+1,"]")}}function ht(ve,De){if(1&ve&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,ft,2,1,"ng-container",4),y.qZA()),2&ve){const Ee=y.oxw();y.Tol(Ee.options.titleClass),y.uIk("aria-label",Ee.title),y.xp6(1),y.hij(" ",Ee.title," "),y.xp6(1),y.Q6J("ngIf",Ee.duplicatesCount)}}function Bt(ve,De){if(1&ve&&y._UZ(0,"div",7),2&ve){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.Q6J("innerHTML",Ee.message,y.oJD)}}function mt(ve,De){if(1&ve&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&ve){const Ee=y.oxw();y.Tol(Ee.options.messageClass),y.uIk("aria-label",Ee.message),y.xp6(1),y.hij(" ",Ee.message," ")}}function Ft(ve,De){if(1&ve&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&ve){const Ee=y.oxw();y.xp6(1),y.Udp("width",Ee.width+"%")}}class we{constructor(De,Ee){this.component=De,this.injector=Ee}attach(De,Ee){return this._attachedHost=De,De.attach(this,Ee)}detach(){const De=this._attachedHost;if(De)return this._attachedHost=void 0,De.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(De){this._attachedHost=De}}class it{constructor(De,Ee,xe,gt,tn,cn){this.toastId=De,this.config=Ee,this.message=xe,this.title=gt,this.toastType=tn,this.toastRef=cn,this._onTap=new X.x,this._onAction=new X.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(De){this._onAction.next(De)}onAction(){return this._onAction.asObservable()}}const Et={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},pt=new y.OlP("ToastConfig");class et{constructor(De){this._overlayRef=De,this.duplicatesCount=0,this._afterClosed=new X.x,this._activate=new X.x,this._manualClose=new X.x,this._resetTimeout=new X.x,this._countDuplicate=new X.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(De,Ee){De&&this._resetTimeout.next(),Ee&&this._countDuplicate.next(++this.duplicatesCount)}}class Ut{constructor(De,Ee){this._toastPackage=De,this._parentInjector=Ee}get(De,Ee,xe){return De===it?this._toastPackage:this._parentInjector.get(De,Ee,xe)}}class bt extends class Me{attach(De,Ee){return this._attachedPortal=De,this.attachComponentPortal(De,Ee)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(De){this._disposeFn=De}}{constructor(De,Ee,xe){super(),this._hostDomElement=De,this._componentFactoryResolver=Ee,this._appRef=xe}attachComponentPortal(De,Ee){const xe=this._componentFactoryResolver.resolveComponentFactory(De.component);let gt;return gt=xe.create(De.injector),this._appRef.attachView(gt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(gt.hostView),gt.destroy()}),Ee?this._hostDomElement.insertBefore(this._getComponentRootNode(gt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(gt)),gt}_getComponentRootNode(De){return De.hostView.rootNodes[0]}}class Fn{constructor(De){this._portalHost=De}attach(De,Ee=!0){return this._portalHost.attach(De,Ee)}detach(){return this._portalHost.detach()}}let Ht=(()=>{class ve{constructor(Ee){this._document=Ee}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Ee=this._document.createElement("div");Ee.classList.add("overlay-container"),Ee.setAttribute("aria-live","polite"),this._document.body.appendChild(Ee),this._containerElement=Ee}}return ve.\u0275fac=function(Ee){return new(Ee||ve)(y.LFG(ie.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),Nn=(()=>{class ve{constructor(Ee,xe,gt,tn){this._overlayContainer=Ee,this._componentFactoryResolver=xe,this._appRef=gt,this._document=tn,this._paneElements=new Map}create(Ee,xe){return this._createOverlayRef(this.getPaneElement(Ee,xe))}getPaneElement(Ee="",xe){return this._paneElements.get(xe)||this._paneElements.set(xe,{}),this._paneElements.get(xe)[Ee]||(this._paneElements.get(xe)[Ee]=this._createPaneElement(Ee,xe)),this._paneElements.get(xe)[Ee]}_createPaneElement(Ee,xe){const gt=this._document.createElement("div");return gt.id="toast-container",gt.classList.add(Ee),gt.classList.add("toast-container"),xe?xe.getContainerElement().appendChild(gt):this._overlayContainer.getContainerElement().appendChild(gt),gt}_createPortalHost(Ee){return new bt(Ee,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Ee){return new Fn(this._createPortalHost(Ee))}}return ve.\u0275fac=function(Ee){return new(Ee||ve)(y.LFG(Ht),y.LFG(y._Vd),y.LFG(y.z2F),y.LFG(ie.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),rn=(()=>{class ve{constructor(Ee,xe,gt,tn,cn){this.overlay=xe,this._injector=gt,this.sanitizer=tn,this.ngZone=cn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Ee.default),Ee.config),Ee.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Ee.default.iconClasses),Ee.config.iconClasses))}show(Ee,xe,gt={},tn=""){return this._preBuildNotification(tn,Ee,xe,this.applyConfig(gt))}success(Ee,xe,gt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Ee,xe,this.applyConfig(gt))}error(Ee,xe,gt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Ee,xe,this.applyConfig(gt))}info(Ee,xe,gt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Ee,xe,this.applyConfig(gt))}warning(Ee,xe,gt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Ee,xe,this.applyConfig(gt))}clear(Ee){for(const xe of this.toasts)if(void 0!==Ee){if(xe.toastId===Ee)return void xe.toastRef.manualClose()}else xe.toastRef.manualClose()}remove(Ee){const xe=this._findToast(Ee);if(!xe||(xe.activeToast.toastRef.close(),this.toasts.splice(xe.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const gt=this.toasts[this.currentlyActive].toastRef;gt.isInactive()||(this.currentlyActive=this.currentlyActive+1,gt.activate())}return!0}findDuplicate(Ee="",xe="",gt,tn){const{includeTitleDuplicates:cn}=this.toastrConfig;for(const Sn of this.toasts){const Wn=cn&&Sn.title===Ee;if((!cn||Wn)&&Sn.message===xe)return Sn.toastRef.onDuplicate(gt,tn),Sn}return null}applyConfig(Ee={}){return Object.assign(Object.assign({},this.toastrConfig),Ee)}_findToast(Ee){for(let xe=0;xe<this.toasts.length;xe++)if(this.toasts[xe].toastId===Ee)return{index:xe,activeToast:this.toasts[xe]};return null}_preBuildNotification(Ee,xe,gt,tn){return tn.onActivateTick?this.ngZone.run(()=>this._buildNotification(Ee,xe,gt,tn)):this._buildNotification(Ee,xe,gt,tn)}_buildNotification(Ee,xe,gt,tn){if(!tn.toastComponent)throw new Error("toastComponent required");const cn=this.findDuplicate(gt,xe,this.toastrConfig.resetTimeoutOnDuplicate&&tn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&gt||xe)&&this.toastrConfig.preventDuplicates&&null!==cn)return cn;this.previousToastMessage=xe;let Sn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Sn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Wn=this.overlay.create(tn.positionClass,this.overlayContainer);this.index=this.index+1;let pr=xe;xe&&tn.enableHtml&&(pr=this.sanitizer.sanitize(y.q3G.HTML,xe));const or=new et(Wn),jn=new it(this.index,tn,pr,gt,Ee,or),Fr=new Ut(jn,this._injector),wn=new we(tn.toastComponent,Fr),Jn=Wn.attach(wn,this.toastrConfig.newestOnTop);or.componentInstance=Jn.instance;const Dn={toastId:this.index,title:gt||"",message:xe||"",toastRef:or,onShown:or.afterActivate(),onHidden:or.afterClosed(),onTap:jn.onTap(),onAction:jn.onAction(),portal:Jn};return Sn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Dn.toastRef.activate()})),this.toasts.push(Dn),Dn}}return ve.\u0275fac=function(Ee){return new(Ee||ve)(y.LFG(pt),y.LFG(Nn),y.LFG(y.zs3),y.LFG(Ue.H7),y.LFG(y.R0b))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),Zr=(()=>{class ve{constructor(Ee,xe,gt){this.toastrService=Ee,this.toastPackage=xe,this.ngZone=gt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=xe.message,this.title=xe.title,this.options=xe.config,this.originalTimeout=xe.config.timeOut,this.toastClasses=`${xe.toastType} ${xe.config.toastClass}`,this.sub=xe.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=xe.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=xe.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=xe.toastRef.countDuplicate().subscribe(tn=>{this.duplicatesCount=tn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ee=(new Date).getTime();this.width=(this.hideTime-Ee)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Ee,xe){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Ee),xe)):this.timeout=setTimeout(()=>Ee(),xe)}outsideInterval(Ee,xe){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Ee),xe)):this.intervalId=setInterval(()=>Ee(),xe)}runInsideAngular(Ee){this.ngZone?this.ngZone.run(()=>Ee()):Ee()}}return ve.\u0275fac=function(Ee){return new(Ee||ve)(y.Y36(rn),y.Y36(it),y.Y36(y.R0b))},ve.\u0275cmp=y.Xpm({type:ve,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Ee,xe){1&Ee&&y.NdJ("click",function(){return xe.tapToast()})("mouseenter",function(){return xe.stickAround()})("mouseleave",function(){return xe.delayedHideToast()}),2&Ee&&(y.d8E("@flyInOut",xe.state),y.Tol(xe.toastClasses),y.Udp("display",xe.displayStyle))},attrs:Ke,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ee,xe){1&Ee&&(y.YNc(0,Je,3,0,"button",0),y.YNc(1,at,3,5,"div",1),y.YNc(2,be,1,3,"div",2),y.YNc(3,Ce,2,4,"div",3),y.YNc(4,tt,2,2,"div",4)),2&Ee&&(y.Q6J("ngIf",xe.options.closeButton),y.xp6(1),y.Q6J("ngIf",xe.title),y.xp6(1),y.Q6J("ngIf",xe.message&&xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.message&&!xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.options.progressBar))},directives:[ie.O5],encapsulation:2,data:{animation:[(0,B.X$)("flyInOut",[(0,B.SB)("inactive",(0,B.oB)({opacity:0})),(0,B.SB)("active",(0,B.oB)({opacity:1})),(0,B.SB)("removed",(0,B.oB)({opacity:0})),(0,B.eR)("inactive => active",(0,B.jt)("{{ easeTime }}ms {{ easing }}")),(0,B.eR)("active => removed",(0,B.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),ve})();const Ln=Object.assign(Object.assign({},Et),{toastComponent:Zr});let fr=(()=>{class ve{static forRoot(Ee={}){return{ngModule:ve,providers:[{provide:pt,useValue:{default:Ln,config:Ee}}]}}}return ve.\u0275fac=function(Ee){return new(Ee||ve)},ve.\u0275mod=y.oAB({type:ve}),ve.\u0275inj=y.cJS({imports:[[ie.ez]]}),ve})(),an=(()=>{class ve{constructor(Ee,xe,gt){this.toastrService=Ee,this.toastPackage=xe,this.appRef=gt,this.width=-1,this.toastClasses="",this.state="inactive",this.message=xe.message,this.title=xe.title,this.options=xe.config,this.originalTimeout=xe.config.timeOut,this.toastClasses=`${xe.toastType} ${xe.config.toastClass}`,this.sub=xe.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=xe.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=xe.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=xe.toastRef.countDuplicate().subscribe(tn=>{this.duplicatesCount=tn})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ee=(new Date).getTime();this.width=(this.hideTime-Ee)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return ve.\u0275fac=function(Ee){return new(Ee||ve)(y.Y36(rn),y.Y36(it),y.Y36(y.z2F))},ve.\u0275cmp=y.Xpm({type:ve,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Ee,xe){1&Ee&&y.NdJ("click",function(){return xe.tapToast()})("mouseenter",function(){return xe.stickAround()})("mouseleave",function(){return xe.delayedHideToast()}),2&Ee&&(y.Tol(xe.toastClasses),y.Udp("display",xe.displayStyle))},attrs:Ke,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ee,xe){1&Ee&&(y.YNc(0,Lt,3,0,"button",0),y.YNc(1,ht,3,5,"div",1),y.YNc(2,Bt,1,3,"div",2),y.YNc(3,mt,2,4,"div",3),y.YNc(4,Ft,2,2,"div",4)),2&Ee&&(y.Q6J("ngIf",xe.options.closeButton),y.xp6(1),y.Q6J("ngIf",xe.title),y.xp6(1),y.Q6J("ngIf",xe.message&&xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.message&&!xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.options.progressBar))},directives:[ie.O5],encapsulation:2}),ve})();Object.assign(Object.assign({},Et),{toastComponent:an})},5861:(fn,ct,$)=>{function y(X,ie,Ue,Ke,Je,Ge,at){try{var be=X[Ge](at),Ce=be.value}catch(tt){return void Ue(tt)}be.done?ie(Ce):Promise.resolve(Ce).then(Ke,Je)}function B(X){return function(){var ie=this,Ue=arguments;return new Promise(function(Ke,Je){var Ge=X.apply(ie,Ue);function at(Ce){y(Ge,Ke,Je,at,be,"next",Ce)}function be(Ce){y(Ge,Ke,Je,at,be,"throw",Ce)}at(void 0)})}}$.d(ct,{Z:()=>B})},7582:(fn,ct,$)=>{function ie(nt,Qe){var ve={};for(var De in nt)Object.prototype.hasOwnProperty.call(nt,De)&&Qe.indexOf(De)<0&&(ve[De]=nt[De]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(De=Object.getOwnPropertySymbols(nt);Ee<De.length;Ee++)Qe.indexOf(De[Ee])<0&&Object.prototype.propertyIsEnumerable.call(nt,De[Ee])&&(ve[De[Ee]]=nt[De[Ee]])}return ve}function tt(nt,Qe,ve,De){return new(ve||(ve=Promise))(function(xe,gt){function tn(Wn){try{Sn(De.next(Wn))}catch(pr){gt(pr)}}function cn(Wn){try{Sn(De.throw(Wn))}catch(pr){gt(pr)}}function Sn(Wn){Wn.done?xe(Wn.value):function Ee(xe){return xe instanceof ve?xe:new ve(function(gt){gt(xe)})}(Wn.value).then(tn,cn)}Sn((De=De.apply(nt,Qe||[])).next())})}function we(nt){return this instanceof we?(this.v=nt,this):new we(nt)}function Me(nt,Qe,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,De=ve.apply(nt,Qe||[]),xe=[];return Ee=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),tn("next"),tn("throw"),tn("return",function gt(jn){return function(Fr){return Promise.resolve(Fr).then(jn,pr)}}),Ee[Symbol.asyncIterator]=function(){return this},Ee;function tn(jn,Fr){De[jn]&&(Ee[jn]=function(wn){return new Promise(function(Jn,Dn){xe.push([jn,wn,Jn,Dn])>1||cn(jn,wn)})},Fr&&(Ee[jn]=Fr(Ee[jn])))}function cn(jn,Fr){try{!function Sn(jn){jn.value instanceof we?Promise.resolve(jn.value.v).then(Wn,pr):or(xe[0][2],jn)}(De[jn](Fr))}catch(wn){or(xe[0][3],wn)}}function Wn(jn){cn("next",jn)}function pr(jn){cn("throw",jn)}function or(jn,Fr){jn(Fr),xe.shift(),xe.length&&cn(xe[0][0],xe[0][1])}}function Et(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,Qe=nt[Symbol.asyncIterator];return Qe?Qe.call(nt):(nt=function Bt(nt){var Qe="function"==typeof Symbol&&Symbol.iterator,ve=Qe&&nt[Qe],De=0;if(ve)return ve.call(nt);if(nt&&"number"==typeof nt.length)return{next:function(){return nt&&De>=nt.length&&(nt=void 0),{value:nt&&nt[De++],done:!nt}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(nt),ve={},De("next"),De("throw"),De("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function De(xe){ve[xe]=nt[xe]&&function(gt){return new Promise(function(tn,cn){!function Ee(xe,gt,tn,cn){Promise.resolve(cn).then(function(Sn){xe({value:Sn,done:tn})},gt)}(tn,cn,(gt=nt[xe](gt)).done,gt.value)})}}}$.d(ct,{FC:()=>Me,KL:()=>Et,_T:()=>ie,mG:()=>tt,qq:()=>we}),"function"==typeof SuppressedError&&SuppressedError}},fn=>{fn(fn.s=359)}]);