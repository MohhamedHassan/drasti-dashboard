"use strict";(self.webpackChunkdrasti_teacher_dashboard=self.webpackChunkdrasti_teacher_dashboard||[]).push([[522],{522:(b,c,r)=>{r.r(c),r.d(c,{AllMsgsModule:()=>y});var l=r(9808),i=r(2729),t=r(5e3),u=r(2340),g=r(520);let m=(()=>{class e{constructor(s){this.http=s}getTeacherMaterials(){return this.http.get(`${u.N.apiUrl}teacher/materials`)}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(g.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=r(507);function h(e,n){1&e&&t._UZ(0,"span",9)}const v=function(e,n){return{studentId:e,studentName:n}};function M(e,n){if(1&e&&(t.TgZ(0,"div",4)(1,"div")(2,"h4",5),t._uU(3),t.qZA(),t.TgZ(4,"h6",6),t._uU(5),t.qZA(),t.TgZ(6,"p",7)(7,"small"),t._uU(8),t.qZA()()(),t.YNc(9,h,1,0,"span",8),t.qZA()),2&e){const s=n.$implicit;t.Q6J("queryParams",t.WLB(6,v,s.userId,s.userName))("routerLink","/material-chat/"+(null==s?null:s.materialId)+"/"+(null==s?null:s.materialName)),t.xp6(3),t.Oqu(s.materialName),t.xp6(2),t.Oqu(s.userName),t.xp6(3),t.Oqu(s.lastMessageDate),t.xp6(1),t.Q6J("ngIf",s.hasUnread)}}const f=[{path:"",component:(()=>{class e{constructor(s,o){this.http=s,this.chatService=o,this.studentsList=[],this.loading=!0,this.teacherId=localStorage.getItem("userid")||"",this.materials=[],this.studentsPerMaterial={},this.noMsgs=!0}ngOnInit(){this.http.getTeacherMaterials().subscribe(s=>{this.loading=!1,this.materials=null==s?void 0:s.data,console.log(s);let o=this.materials.map(a=>{var d;return null===(d=null==a?void 0:a.material)||void 0===d?void 0:d.id});console.log(o),this.chatService.getTeacherChatList(o,localStorage.getItem("userid")||"",a=>{this.studentsList=a})})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(m),t.Y36(p.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-all-msgs"]],decls:4,vars:1,consts:[[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-lg-8"],["style","\n          border-radius: 10px;\n          padding: 10px;\n          margin-bottom: 10px;\n          cursor: pointer;\n          border: 1px solid rgb(245 236 236);\n        ","class","student-item",3,"queryParams","routerLink",4,"ngFor","ngForOf"],[1,"student-item",2,"border-radius","10px","padding","10px","margin-bottom","10px","cursor","pointer","border","1px solid rgb(245 236 236)",3,"queryParams","routerLink"],[2,"margin","0"],[2,"margin","5px 0"],[2,"margin","0","color","gray"],["class","unread-dot",4,"ngIf"],[1,"unread-dot"]],template:function(s,o){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,M,10,9,"div",3),t.qZA()()()),2&s&&(t.xp6(3),t.Q6J("ngForOf",o.studentsList))},directives:[l.sg,i.rH,l.O5],styles:[".material-block[_ngcontent-%COMP%]{margin-bottom:20px}.student-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 0;width:100%;gap:16px}.unread-dot[_ngcontent-%COMP%]{background-color:#2b6cb0;display:block;width:10px;height:10px;border-radius:50%}"]}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.Bz.forChild(f)],i.Bz]}),e})();var x=r(4466);let y=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,A,x.m]]}),e})()}}]);