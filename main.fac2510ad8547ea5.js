"use strict";var wI=Object.defineProperty,CI=Object.defineProperties,II=Object.getOwnPropertyDescriptors,kw=Object.getOwnPropertySymbols,TI=Object.prototype.hasOwnProperty,bI=Object.prototype.propertyIsEnumerable,Fw=(hn,ut,U)=>ut in hn?wI(hn,ut,{enumerable:!0,configurable:!0,writable:!0,value:U}):hn[ut]=U,b_=(hn,ut)=>{for(var U in ut||(ut={}))TI.call(ut,U)&&Fw(hn,U,ut[U]);if(kw)for(var U of kw(ut))bI.call(ut,U)&&Fw(hn,U,ut[U]);return hn},D_=(hn,ut)=>CI(hn,II(ut));(self.webpackChunkdrasti_teacher_dashboard=self.webpackChunkdrasti_teacher_dashboard||[]).push([[179],{6215:(hn,ut,U)=>{U.d(ut,{nm:()=>Kr});var _=U(4976),Pe=(U(5e3),U(3692),U(259),U(5861)),je=U(6881),We=U(4859),Be=U(2090),rt=U(1877);const Ie=new Map,ve={activated:!1,tokenObservers:[]},Je={initialized:!1,enabled:!1};function Tt(at){return Ie.get(at)||Object.assign({},ve)}function bt(){return Je}class xe{constructor(Ze,lt,mt,kt,Tn){if(this.operation=Ze,this.retryPolicy=lt,this.getWaitDuration=mt,this.lowerBound=kt,this.upperBound=Tn,this.pending=null,this.nextErrorWaitInterval=kt,kt>Tn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ze){var lt=this;return(0,Pe.Z)(function*(){lt.stop();try{lt.pending=new Be.BH,yield function Qe(at){return new Promise(Ze=>{setTimeout(Ze,at)})}(lt.getNextRun(Ze)),lt.pending.resolve(),yield lt.pending.promise,lt.pending=new Be.BH,yield lt.operation(),lt.pending.resolve(),yield lt.pending.promise,lt.process(!0).catch(()=>{})}catch(mt){lt.retryPolicy(mt)?lt.process(!1).catch(()=>{}):lt.stop()}})()}getNextRun(Ze){if(Ze)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const lt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),lt}}}const It=new Be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ht(at){if(!Tt(at).activated)throw It.create("use-before-activation",{appName:at.name})}function _n(at,Ze){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,Pe.Z)(function*({url:at,body:Ze},lt){const mt={"Content-Type":"application/json"},kt=lt.getImmediate({optional:!0});if(kt){const ci=yield kt.getHeartbeatsHeader();ci&&(mt["X-Firebase-Client"]=ci)}const Tn={method:"POST",body:JSON.stringify(Ze),headers:mt};let Ar,Un;try{Ar=yield fetch(at,Tn)}catch(ci){throw It.create("fetch-network-error",{originalErrorMessage:null==ci?void 0:ci.message})}if(200!==Ar.status)throw It.create("fetch-status-error",{httpStatus:Ar.status});try{Un=yield Ar.json()}catch(ci){throw It.create("fetch-parse-error",{originalErrorMessage:null==ci?void 0:ci.message})}const nr=Un.ttl.match(/^([\d.]+)(s)$/);if(!nr||!nr[2]||isNaN(Number(nr[1])))throw It.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Un.ttl}`});const Oi=1e3*Number(nr[1]),ds=Date.now();return{token:Un.token,expireTimeMillis:ds+Oi,issuedAtTimeMillis:ds}})).apply(this,arguments)}function Ot(at,Ze){const{projectId:lt,appId:mt,apiKey:kt}=at.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${lt}/apps/${mt}:exchangeDebugToken?key=${kt}`,body:{debug_token:Ze}}}const un="firebase-app-check-store";let nt=null;function Te(){return nt||(nt=new Promise((at,Ze)=>{try{const lt=indexedDB.open("firebase-app-check-database",1);lt.onsuccess=mt=>{at(mt.target.result)},lt.onerror=mt=>{var kt;Ze(It.create("storage-open",{originalErrorMessage:null===(kt=mt.target.error)||void 0===kt?void 0:kt.message}))},lt.onupgradeneeded=mt=>{0===mt.oldVersion&&mt.target.result.createObjectStore(un,{keyPath:"compositeKey"})}}catch(lt){Ze(It.create("storage-open",{originalErrorMessage:null==lt?void 0:lt.message}))}}),nt)}function pn(){return(pn=(0,Pe.Z)(function*(at,Ze){const mt=(yield Te()).transaction(un,"readwrite"),Tn=mt.objectStore(un).put({compositeKey:at,value:Ze});return new Promise((Ar,Un)=>{Tn.onsuccess=nr=>{Ar()},mt.onerror=nr=>{var Oi;Un(It.create("storage-set",{originalErrorMessage:null===(Oi=nr.target.error)||void 0===Oi?void 0:Oi.message}))}})})).apply(this,arguments)}const _r=new rt.Yd("@firebase/app-check");function gn(at,Ze){return(0,Be.hl)()?function Ee(at,Ze){return function qt(at,Ze){return pn.apply(this,arguments)}(function cr(at){return`${at.options.appId}-${at.name}`}(at),Ze)}(at,Ze).catch(lt=>{_r.warn(`Failed to write token to IndexedDB. Error: ${lt}`)}):Promise.resolve()}function Ln(){return bt().enabled}function Qr(){return $i.apply(this,arguments)}function $i(){return($i=(0,Pe.Z)(function*(){const at=bt();if(at.enabled&&at.token)return at.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const He={error:"UNKNOWN_ERROR"};function Ge(at){return Be.US.encodeString(JSON.stringify(at),!1)}function ht(at){return At.apply(this,arguments)}function At(){return(At=(0,Pe.Z)(function*(at,Ze=!1){const lt=at.app;Ht(lt);const mt=Tt(lt);let Tn,kt=mt.token;if(kt&&!mr(kt)&&(mt.token=void 0,kt=void 0),!kt){const nr=yield mt.cachedTokenPromise;nr&&(mr(nr)?kt=nr:yield gn(lt,void 0))}if(!Ze&&kt&&mr(kt))return{token:kt.token};let Un,Ar=!1;if(Ln()){mt.exchangeTokenPromise||(mt.exchangeTokenPromise=_n(Ot(lt,yield Qr()),at.heartbeatServiceProvider).finally(()=>{mt.exchangeTokenPromise=void 0}),Ar=!0);const nr=yield mt.exchangeTokenPromise;return yield gn(lt,nr),mt.token=nr,{token:nr.token}}try{mt.exchangeTokenPromise||(mt.exchangeTokenPromise=mt.provider.getToken().finally(()=>{mt.exchangeTokenPromise=void 0}),Ar=!0),kt=yield Tt(lt).exchangeTokenPromise}catch(nr){"appCheck/throttled"===nr.code?_r.warn(nr.message):_r.error(nr),Tn=nr}return kt?Tn?Un=mr(kt)?{token:kt.token,internalError:Tn}:nn(Tn):(Un={token:kt.token},mt.token=kt,yield gn(lt,kt)):Un=nn(Tn),Ar&&lr(lt,Un),Un})).apply(this,arguments)}function sn(){return(sn=(0,Pe.Z)(function*(at){const Ze=at.app;Ht(Ze);const{provider:lt}=Tt(Ze);if(Ln()){const mt=yield Qr(),{token:kt}=yield _n(Ot(Ze,mt),at.heartbeatServiceProvider);return{token:kt}}{const{token:mt}=yield lt.getToken();return{token:mt}}})).apply(this,arguments)}function zn(at,Ze){const lt=Tt(at),mt=lt.tokenObservers.filter(kt=>kt.next!==Ze);0===mt.length&&lt.tokenRefresher&&lt.tokenRefresher.isRunning()&&lt.tokenRefresher.stop(),lt.tokenObservers=mt}function Vn(at){const{app:Ze}=at,lt=Tt(Ze);let mt=lt.tokenRefresher;mt||(mt=function yi(at){const{app:Ze}=at;return new xe((0,Pe.Z)(function*(){let mt;if(mt=Tt(Ze).token?yield ht(at,!0):yield ht(at),mt.error)throw mt.error;if(mt.internalError)throw mt.internalError}),()=>!0,()=>{const lt=Tt(Ze);if(lt.token){let mt=lt.token.issuedAtTimeMillis+.5*(lt.token.expireTimeMillis-lt.token.issuedAtTimeMillis)+3e5;return mt=Math.min(mt,lt.token.expireTimeMillis-3e5),Math.max(0,mt-Date.now())}return 0},3e4,96e4)}(at),lt.tokenRefresher=mt),!mt.isRunning()&&lt.isTokenAutoRefreshEnabled&&mt.start()}function lr(at,Ze){const lt=Tt(at).tokenObservers;for(const mt of lt)try{"EXTERNAL"===mt.type&&null!=Ze.error?mt.error(Ze.error):mt.next(Ze)}catch(kt){}}function mr(at){return at.expireTimeMillis-Date.now()>0}function nn(at){return{token:Ge(He),error:at}}class Sr{constructor(Ze,lt){this.app=Ze,this.heartbeatServiceProvider=lt}_delete(){const{tokenObservers:Ze}=Tt(this.app);for(const lt of Ze)zn(this.app,lt.next);return Promise.resolve()}}const St="app-check-internal";!function an(){(0,je._registerComponent)(new We.wA("app-check",at=>function er(at,Ze){return new Sr(at,Ze)}(at.getProvider("app").getImmediate(),at.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((at,Ze,lt)=>{at.getProvider(St).initialize()})),(0,je._registerComponent)(new We.wA(St,at=>function dr(at){return{getToken:Ze=>ht(at,Ze),getLimitedUseToken:()=>function Zt(at){return sn.apply(this,arguments)}(at),addTokenListener:Ze=>function br(at,Ze,lt,mt){const{app:kt}=at,Tn=Tt(kt);if(Tn.tokenObservers=[...Tn.tokenObservers,{next:lt,error:mt,type:Ze}],Tn.token&&mr(Tn.token)){const Un=Tn.token;Promise.resolve().then(()=>{lt({token:Un.token}),Vn(at)}).catch(()=>{})}Tn.cachedTokenPromise.then(()=>Vn(at))}(at,"INTERNAL",Ze),removeTokenListener:Ze=>zn(at.app,Ze)}}(at.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,je.registerVersion)("@firebase/app-check","0.8.0")}();class Kr{constructor(){return(0,_.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(hn,ut,U)=>{U.d(ut,{Ot:()=>ee,z6:()=>re});var _=U(259);U(5e3);class ee{constructor(it){return it}}class re{constructor(){return(0,_.C6)()}}},1205:(hn,ut,U)=>{U.d(ut,{zQ:()=>ln,ww:()=>rn,rT:()=>Nt,f7:()=>_n,L6:()=>be,_Q:()=>Ht,lh:()=>An,Qv:()=>It,nw:()=>Fn});var _=U(5e3),L=U(7579),ee=U(9646),re=U(8306),Pe=U(8996),je=U(6451),We=U(5363),Be=U(3900),rt=U(4004),Ie=U(6063);class ve extends L.x{constructor(ar=1/0,Rn=1/0,un=Ie.l){super(),this._bufferSize=ar,this._windowTime=Rn,this._timestampProvider=un,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Rn===1/0,this._bufferSize=Math.max(1,ar),this._windowTime=Math.max(1,Rn)}next(ar){const{isStopped:Rn,_buffer:un,_infiniteTimeWindow:st,_timestampProvider:nt,_windowTime:Te}=this;Rn||(un.push(ar),!st&&un.push(nt.now()+Te)),this._trimBuffer(),super.next(ar)}_subscribe(ar){this._throwIfClosed(),this._trimBuffer();const Rn=this._innerSubscribe(ar),{_infiniteTimeWindow:un,_buffer:st}=this,nt=st.slice();for(let Te=0;Te<nt.length&&!ar.closed;Te+=un?1:2)ar.next(nt[Te]);return this._checkFinalizedStatuses(ar),Rn}_trimBuffer(){const{_bufferSize:ar,_timestampProvider:Rn,_buffer:un,_infiniteTimeWindow:st}=this,nt=(st?1:2)*ar;if(ar<1/0&&nt<un.length&&un.splice(0,un.length-nt),!st){const Te=Rn.now();let Re=0;for(let Ee=1;Ee<un.length&&un[Ee]<=Te;Ee+=2)Re=Ee;Re&&un.splice(0,Re+1)}}}var Je=U(3099);function Tt(Ot,ar,Rn){let un,st=!1;return Ot&&"object"==typeof Ot?({bufferSize:un=1/0,windowTime:ar=1/0,refCount:st=!1,scheduler:Rn}=Ot):un=null!=Ot?Ot:1/0,(0,Je.B)({connector:()=>new ve(un,ar,Rn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:st})}var ft=U(590),bt=U(576);function Mt(Ot,ar){return(0,bt.m)(ar)?(0,Be.w)(()=>Ot,ar):(0,Be.w)(()=>Ot)}var Xe=U(9468),Ct=U(9300),Ke=U(4976),Kt=U(2011),it=U(9808),xe=U(6215),Qe=U(9260);const It=new _.OlP("angularfire2.auth.use-emulator"),be=new _.OlP("angularfire2.auth.settings"),Ht=new _.OlP("angularfire2.auth.tenant-id"),Nt=new _.OlP("angularfire2.auth.langugage-code"),An=new _.OlP("angularfire2.auth.use-device-language"),_n=new _.OlP("angularfire.auth.persistence"),Fn=(Ot,ar,Rn,un,st,nt,Te,Re)=>(0,Kt.cc)(`${Ot.name}.auth`,"AngularFireAuth",Ot.name,()=>{const Ee=ar.runOutsideAngular(()=>Ot.auth());if(Rn&&Ee.useEmulator(...Rn),un&&(Ee.tenantId=un),Ee.languageCode=st,nt&&Ee.useDeviceLanguage(),Te)for(const[Ne,ot]of Object.entries(Te))Ee.settings[Ne]=ot;return Re&&Ee.setPersistence(Re),Ee},[Rn,un,st,nt,Te,Re]);let ln=(()=>{class Ot{constructor(Rn,un,st,nt,Te,Re,Ee,Ne,ot,qt,pn,vn){const Nn=new L.x,cr=(0,ee.of)(void 0).pipe((0,We.Q)(Te.outsideAngular),(0,Be.w)(()=>nt.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,rt.U)(()=>(0,Kt.on)(Rn,nt,un)),(0,rt.U)(_r=>Fn(_r,nt,Re,Ne,ot,qt,Ee,pn)),Tt({bufferSize:1,refCount:!1}));if((0,it.PM)(st))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{cr.pipe((0,ft.P)()).subscribe();const jn=cr.pipe((0,Be.w)(sr=>sr.getRedirectResult().then(Pn=>Pn,()=>null)),Ke.iC,Tt({bufferSize:1,refCount:!1})),Xn=cr.pipe((0,Be.w)(sr=>new re.y(Pn=>({unsubscribe:nt.runOutsideAngular(()=>sr.onAuthStateChanged(Ln=>Pn.next(Ln),Ln=>Pn.error(Ln),()=>Pn.complete()))})))),gn=cr.pipe((0,Be.w)(sr=>new re.y(Pn=>({unsubscribe:nt.runOutsideAngular(()=>sr.onIdTokenChanged(Ln=>Pn.next(Ln),Ln=>Pn.error(Ln),()=>Pn.complete()))}))));this.authState=jn.pipe(Mt(Xn),(0,Xe.R)(Te.outsideAngular),(0,We.Q)(Te.insideAngular)),this.user=jn.pipe(Mt(gn),(0,Xe.R)(Te.outsideAngular),(0,We.Q)(Te.insideAngular)),this.idToken=this.user.pipe((0,Be.w)(sr=>sr?(0,Pe.D)(sr.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,Be.w)(sr=>sr?(0,Pe.D)(sr.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,je.T)(jn,Nn,this.authState.pipe((0,Ct.h)(sr=>!sr))).pipe((0,rt.U)(sr=>(null==sr?void 0:sr.user)?sr:null),(0,Xe.R)(Te.outsideAngular),(0,We.Q)(Te.insideAngular))}return(0,Kt.pX)(this,cr,nt,{spy:{apply:(_r,jn,Xn)=>{(_r.startsWith("signIn")||_r.startsWith("createUser"))&&Xn.then(gn=>Nn.next(gn))}}})}}return Ot.\u0275fac=function(Rn){return new(Rn||Ot)(_.LFG(Kt.Dh),_.LFG(Kt.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ke.HU),_.LFG(It,8),_.LFG(be,8),_.LFG(Ht,8),_.LFG(Nt,8),_.LFG(An,8),_.LFG(_n,8),_.LFG(xe.nm,8))},Ot.\u0275prov=_.Yz7({token:Ot,factory:Ot.\u0275fac,providedIn:"any"}),Ot})(),rn=(()=>{class Ot{constructor(){Qe.Z.registerVersion("angularfire",Ke.q4.full,"auth-compat")}}return Ot.\u0275fac=function(Rn){return new(Rn||Ot)},Ot.\u0275mod=_.oAB({type:Ot}),Ot.\u0275inj=_.cJS({providers:[ln]}),Ot})()},1762:(hn,ut,U)=>{U.d(ut,{ST:()=>y_,yb:()=>w0});var _=U(5e3),L=U(4986),ee=U(8306),re=U(8996),Pe=U(9646),je=U(4976),We=U(8675),Be=U(4482),rt=U(5403);function Ie(){return(0,Be.e)((r,e)=>{let t,s=!1;r.subscribe((0,rt.x)(e,a=>{const d=t;t=a,s&&e.next([d,a]),s=!0}))})}var be,ve=U(4004),Je=U(5026),Tt=U(1884),ft=U(9300),bt=U(2011),Mt=U(9808),Ct=(U(9568),U(3942)),Ke=U(5861),Kt=U(6881),it=U(4859),xe=U(1877),Qe=U(2090),_t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},It={},Ht=Ht||{},Nt=_t||self;function An(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function _n(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var ln="closure_uid_"+(1e9*Math.random()>>>0),rn=0;function Ot(r,e,t){return r.call.apply(r.bind,arguments)}function ar(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function Rn(r,e,t){return(Rn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ot:ar).apply(null,arguments)}function un(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function st(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,d){for(var m=Array(arguments.length-2),R=2;R<arguments.length;R++)m[R-2]=arguments[R];return e.prototype[a].apply(s,m)}}function nt(){this.s=this.s,this.o=this.o}nt.prototype.s=!1,nt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Fn(r){Object.prototype.hasOwnProperty.call(r,ln)&&r[ln]||(r[ln]=++rn)}(this)},nt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Re=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Ee(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function Ne(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(An(s)){const a=r.length||0,d=s.length||0;r.length=a+d;for(let m=0;m<d;m++)r[a+m]=s[m]}else r.push(s)}}function ot(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Nt.addEventListener("test",()=>{},e),Nt.removeEventListener("test",()=>{},e)}catch(t){}return r}();function pn(r){return/^[\s\xa0]*$/.test(r)}function vn(){var r=Nt.navigator;return r&&(r=r.userAgent)?r:""}function Nn(r){return-1!=vn().indexOf(r)}function cr(r){return cr[" "](r),r}cr[" "]=function(){};var $i,r,jn=Nn("Opera"),Xn=Nn("Trident")||Nn("MSIE"),gn=Nn("Edge"),sr=gn||Xn,Pn=Nn("Gecko")&&!(-1!=vn().toLowerCase().indexOf("webkit")&&!Nn("Edge"))&&!(Nn("Trident")||Nn("MSIE"))&&!Nn("Edge"),Ln=-1!=vn().toLowerCase().indexOf("webkit")&&!Nn("Edge");function Qr(){var r=Nt.document;return r?r.documentMode:void 0}e:{var xt="",He=(r=vn(),Pn?/rv:([^\);]+)(\)|;)/.exec(r):gn?/Edge\/([\d\.]+)/.exec(r):Xn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Ln?/WebKit\/(\S+)/.exec(r):jn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(He&&(xt=He?He[1]:""),Xn){var Ge=Qr();if(null!=Ge&&Ge>parseFloat(xt)){$i=String(Ge);break e}}$i=xt}var Zt=Nt.document&&Xn&&(Qr()||parseInt($i,10))||void 0;function sn(r,e){if(ot.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Pn){e:{try{cr(e.nodeName);var a=!0;break e}catch(d){}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:br[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&sn.$.h.call(this)}}st(sn,ot);var br={2:"touch",3:"pen",4:"mouse"};sn.prototype.h=function(){sn.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var zn="closure_listenable_"+(1e6*Math.random()|0),Vn=0;function yi(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Vn,this.fa=this.ia=!1}function lr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function mr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Sr(r){const e={};for(const t in r)e[t]=r[t];return e}const er="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let d=0;d<er.length;d++)t=er[d],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Zn(r){this.src=r,this.g={},this.h=0}function Pr(r,e){var t=e.type;if(t in r.g){var d,s=r.g[t],a=Re(s,e);(d=0<=a)&&Array.prototype.splice.call(s,a,1),d&&(lr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function jr(r,e,t,s){for(var a=0;a<r.length;++a){var d=r[a];if(!d.fa&&d.listener==e&&d.capture==!!t&&d.la==s)return a}return-1}Zn.prototype.add=function(r,e,t,s,a){var d=r.toString();(r=this.g[d])||(r=this.g[d]=[],this.h++);var m=jr(r,e,s,a);return-1<m?(e=r[m],t||(e.ia=!1)):((e=new yi(e,this.src,d,!!s,a)).ia=t,r.push(e)),e};var Jr="closure_lm_"+(1e6*Math.random()|0),Gi={};function Ni(r,e,t,s,a){if(s&&s.once)return Me(r,e,t,s,a);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Ni(r,e[d],t,s,a);return null}return t=ct(t),r&&r[zn]?r.O(e,t,_n(s)?!!s.capture:!!s,a):Br(r,e,t,!1,s,a)}function Br(r,e,t,s,a,d){if(!e)throw Error("Invalid event type");var m=_n(a)?!!a.capture:!!a,R=se(r);if(R||(r[Jr]=R=new Zn(r)),(t=R.add(e,t,s,m,d)).proxy)return t;if(s=function Fe(){const e=ie;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)qt||(a=m),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(z(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function Me(r,e,t,s,a){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Me(r,e[d],t,s,a);return null}return t=ct(t),r&&r[zn]?r.P(e,t,_n(s)?!!s.capture:!!s,a):Br(r,e,t,!0,s,a)}function me(r,e,t,s,a){if(Array.isArray(e))for(var d=0;d<e.length;d++)me(r,e[d],t,s,a);else s=_n(s)?!!s.capture:!!s,t=ct(t),r&&r[zn]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=jr(d=r.g[e],t,s,a))&&(lr(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete r.g[e],r.h--))):r&&(r=se(r))&&(e=r.g[e.toString()],r=-1,e&&(r=jr(e,t,s,a)),(t=-1<r?e[r]:null)&&ye(t))}function ye(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[zn])Pr(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(z(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=se(e))?(Pr(t,r),0==t.h&&(t.src=null,e[Jr]=null)):lr(r)}}}function z(r){return r in Gi?Gi[r]:Gi[r]="on"+r}function ie(r,e){if(r.fa)r=!0;else{e=new sn(e,this);var t=r.listener,s=r.la||r.src;r.ia&&ye(r),r=t.call(s,e)}return r}function se(r){return(r=r[Jr])instanceof Zn?r:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(r){return"function"==typeof r?r:(r[we]||(r[we]=function(e){return r.handleEvent(e)}),r[we])}function Bt(){nt.call(this),this.i=new Zn(this),this.S=this,this.J=null}function on(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new ot(e,r);else if(e instanceof ot)e.target=e.target||r;else{var a=e;dr(e=new ot(s,r),a)}if(a=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];a=bn(m,s,!0,e)&&a}if(a=bn(m=e.g=r,s,!0,e)&&a,a=bn(m,s,!1,e)&&a,t)for(d=0;d<t.length;d++)a=bn(m=e.g=t[d],s,!1,e)&&a}function bn(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.fa&&m.capture==t){var R=m.listener,G=m.la||m.src;m.ia&&Pr(r.i,m),a=!1!==R.call(G,s)&&a}}return a&&!s.defaultPrevented}st(Bt,nt),Bt.prototype[zn]=!0,Bt.prototype.removeEventListener=function(r,e,t,s){me(this,r,e,t,s)},Bt.prototype.N=function(){if(Bt.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)lr(t[s]);delete r.g[e],r.h--}}this.J=null},Bt.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Bt.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var gr=Nt.JSON.stringify;function si(){var r=or;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var wt=new class ir{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new gt,r=>r.reset());class gt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ut(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function St(r){Nt.setTimeout(()=>{throw r},0)}let an,In=!1,or=new class Ei{constructor(){this.h=this.g=null}add(e,t){const s=wt.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Kr=()=>{const r=Nt.Promise.resolve(void 0);an=()=>{r.then(yr)}};var yr=()=>{for(var r;r=si();){try{r.h.call(r.g)}catch(t){St(t)}var e=wt;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}In=!1};function Xr(r,e){Bt.call(this),this.h=r||1,this.g=e||Nt,this.j=Rn(this.qb,this),this.l=Date.now()}function Hr(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function cs(r,e,t){if("function"==typeof r)t&&(r=Rn(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Rn(r.handleEvent,r)}return 2147483647<Number(e)?-1:Nt.setTimeout(r,e||0)}function Rs(r){r.g=cs(()=>{r.g=null,r.i&&(r.i=!1,Rs(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}st(Xr,Bt),(be=Xr.prototype).ga=!1,be.T=null,be.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),on(this,"tick"),this.ga&&(Hr(this),this.start()))}},be.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},be.N=function(){Xr.$.N.call(this),Hr(this),delete this.g};class ur extends nt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(r){nt.call(this),this.h=r,this.g={}}st(Si,nt);var os=[];function Zs(r,e,t,s){Array.isArray(t)||(t&&(os[0]=t.toString()),t=os);for(var a=0;a<t.length;a++){var d=Ni(e,t[a],s||r.handleEvent,!1,r.h||r);if(!d)break;r.g[d.key]=d}}function Cr(r){mr(r.g,function(e,t){this.g.hasOwnProperty(t)&&ye(e)},r),r.g={}}function mn(){this.g=!0}function hr(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function at(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var d=a[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<a.length;m++)a[m]=""}}}return gr(t)}catch(R){return e}}(r,t)+(s?" "+s:"")})}Si.prototype.N=function(){Si.$.N.call(this),Cr(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mn.prototype.Ea=function(){this.g=!1},mn.prototype.info=function(){};var Ze={},lt=null;function mt(){return lt=lt||new Bt}function kt(r){ot.call(this,Ze.Ta,r)}function Tn(r){const e=mt();on(e,new kt(e))}function Ar(r,e){ot.call(this,Ze.STAT_EVENT,r),this.stat=e}function Un(r){const e=mt();on(e,new Ar(e,r))}function nr(r,e){ot.call(this,Ze.Ua,r),this.size=e}function Oi(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){r()},e)}Ze.Ta="serverreachability",st(kt,ot),Ze.STAT_EVENT="statevent",st(Ar,ot),Ze.Ua="timingevent",st(nr,ot);var ds={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ci={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Vi(){}function Ys(){}Vi.prototype.h=null;var Bs,Ui={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _o(){ot.call(this,"d")}function No(){ot.call(this,"c")}function ca(){}function ao(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new Si(this),this.P=Ms,this.V=new Xr(r=sr?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qs}function Qs(){this.i=null,this.g="",this.h=!1}st(_o,ot),st(No,ot),st(ca,Vi),ca.prototype.g=function(){return new XMLHttpRequest},ca.prototype.i=function(){return{}},Bs=new ca;var Ms=45e3,Ir={},xs={};function lo(r,e,t){r.L=1,r.v=bs(di(e)),r.s=t,r.S=!0,Oo(r,null)}function Oo(r,e){r.G=Date.now(),Go(r),r.A=di(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Dn(t.i,"t",s),r.C=0,t=r.l.J,r.h=new Qs,r.g=ha(r.l,t?e:null,!r.s),0<r.O&&(r.M=new ur(Rn(r.Pa,r,r.g),r.O)),Zs(r.U,r.g,"readystatechange",r.nb),e=r.I?Sr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Tn(),function tr(r,e,t,s,a,d){r.info(function(){if(r.g)if(d)for(var m="",R=d.split("&"),G=0;G<R.length;G++){var X=R[G].split("=");if(1<X.length){var ge=X[0];X=X[1];var Ue=ge.split("_");m=2<=Ue.length&&"type"==Ue[1]?m+(ge+"=")+X+"&":m+(ge+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+m})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Wi(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Ps(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=ki(r,t),a==xs){4==e&&(r.o=4,Un(14),s=!1),hr(r.j,r.m,null,"[Incomplete Response]");break}if(a==Ir){r.o=4,Un(15),hr(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}hr(r.j,r.m,a,null),fs(r,a)}Wi(r)&&a!=xs&&a!=Ir&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Un(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ta(e),e.M=!0,Un(11))):(hr(r.j,r.m,t,"[Invalid Chunked Response]"),zi(r),hs(r))}function ki(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?xs:(t=Number(e.substring(t,s)),isNaN(t)?Ir:(s+=1)+t>e.length?xs:(e=e.slice(s,s+t),r.C=s+t,e))}function Go(r){r.Y=Date.now()+r.P,$r(r,r.P)}function $r(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Oi(Rn(r.lb,r),e)}function ko(r){r.B&&(Nt.clearTimeout(r.B),r.B=null)}function hs(r){0==r.l.H||r.J||eo(r.l,r)}function zi(r){ko(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,Hr(r.V),Cr(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function fs(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||co(t.i,r)))if(!r.K&&co(t.i,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch(X){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Oi(Rn(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<r.G))break e;mi(t),Bi(t)}wo(t),Un(18)}if(1>=ti(t.i)&&t.oa){try{t.oa()}catch(X){}t.oa=void 0}}else Es(t,11)}else if((r.K||t.g==r)&&mi(t),!pn(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let X=a[e];if(t.V=X[0],X=X[1],2==t.H)if("c"==X[0]){t.K=X[1],t.pa=X[2];const ge=X[3];null!=ge&&(t.ra=ge,t.l.info("VER="+t.ra));const Ue=X[4];null!=Ue&&(t.Ga=Ue,t.l.info("SVER="+t.Ga));const Et=X[5];null!=Et&&"number"==typeof Et&&0<Et&&(t.L=s=1.5*Et,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const $t=r.g;if($t){const wn=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wn){var d=s.i;d.g||-1==wn.indexOf("spdy")&&-1==wn.indexOf("quic")&&-1==wn.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(Ci(d,d.h),d.h=null))}if(s.F){const Hn=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;Hn&&(s.Da=Hn,ei(s.I,s.F,Hn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var m=r;if((s=t).wa=ba(s,s.J?s.pa:null,s.Y),m.K){Qn(s.i,m);var R=m,G=s.L;G&&R.setTimeout(G),R.B&&(ko(R),Go(R)),s.g=m}else nl(s);0<t.j.length&&Eo(t)}else"stop"!=X[0]&&"close"!=X[0]||Es(t,7);else 3==t.H&&("stop"==X[0]||"close"==X[0]?"stop"==X[0]?Es(t,7):Li(t):"noop"!=X[0]&&t.h&&t.h.Aa(X),t.A=0)}Tn()}catch(X){}}function Js(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(An(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Ts(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if("undefined"!=typeof Map&&r instanceof Map)return Array.from(r.keys());if(!("undefined"!=typeof Set&&r instanceof Set)){if(An(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Ao(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if("undefined"!=typeof Map&&r instanceof Map||"undefined"!=typeof Set&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(An(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,d=0;d<a;d++)e.call(void 0,s[d],t&&t[d],r)}(be=ao.prototype).setTimeout=function(r){this.P=r},be.nb=function(r){r=r.target;const e=this.M;e&&3==Gr(r)?e.l():this.Pa(r)},be.Pa=function(r){try{if(r==this.g)e:{const ge=Gr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ge)&&(3!=ge||sr||this.g&&(this.h.h||this.g.ja()||hi(this.g)))){this.J||4!=ge||7==e||Tn(),ko(this);var t=this.g.da();this.ca=t;t:if(Wi(this)){var s=hi(this.g);r="";var a=s.length,d=4==Gr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){zi(this),hs(this);var m="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:d&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,m=this.h.g}else m=this.g.ja();if(this.i=200==t,function ts(r,e,t,s,a,d,m){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.W,ge,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pn(R)){var X=R;break t}}X=null}if(!(t=X)){this.i=!1,this.o=3,Un(12),zi(this),hs(this);break e}hr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fs(this,t)}this.S?(Ps(this,ge,m),sr&&this.i&&3==ge&&(Zs(this.U,this.V,"tick",this.mb),this.V.start())):(hr(this.j,this.m,m,null),fs(this,m)),4==ge&&zi(this),this.i&&!this.J&&(4==ge?eo(this.l,this):(this.i=!1,Go(this)))}else(function ri(r){const e={};r=(r.g&&2<=Gr(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<r.length;s++){if(pn(r[s]))continue;var t=Ut(r[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const d=e[a]||[];e[a]=d,d.push(t)}!function nn(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<m.indexOf("Unknown SID")?(this.o=3,Un(12)):(this.o=0,Un(13)),zi(this),hs(this)}}}catch(ge){}},be.mb=function(){if(this.g){var r=Gr(this.g),e=this.g.ja();this.C<e.length&&(ko(this),Ps(this,r,e),this.i&&4!=r&&Go(this))}},be.cancel=function(){this.J=!0,zi(this)},be.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Zr(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Tn(),Un(17)),zi(this),this.o=2,hs(this)):$r(this,this.Y-r)};var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ki(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ki){this.h=r.h,vs(this,r.j),this.s=r.s,this.g=r.g,Xs(this,r.m),this.l=r.l;var e=r.i,t=new he;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Nr(this,t),this.o=r.o}else r&&(e=String(r).match(_s))?(this.h=!1,vs(this,e[1]||"",!0),this.s=_i(e[2]||""),this.g=_i(e[3]||"",!0),Xs(this,e[4]),this.l=_i(e[5]||"",!0),Nr(this,e[6]||"",!0),this.o=_i(e[7]||"")):(this.h=!1,this.i=new he(null,this.h))}function di(r){return new Ki(r)}function vs(r,e,t){r.j=t?_i(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Xs(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Nr(r,e,t){e instanceof he?(r.i=e,function Rr(r,e){e&&!r.j&&(Oe(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Pt(this,s),Dn(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=wi(e,ue)),r.i=new he(e,r.h))}function ei(r,e,t){r.i.set(e,t)}function bs(r){return ei(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function _i(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function wi(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,ps),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function ps(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ki.prototype.toString=function(){var r=[],e=this.j;e&&r.push(wi(e,uo,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(wi(e,uo,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(wi(t,"/"==t.charAt(0)?V:Yr,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",wi(t,$)),r.join("")};var uo=/[#\/\?@]/g,Yr=/[#\?:]/g,V=/[#\?]/g,ue=/[#\?@]/g,$=/#/g;function he(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Oe(r){r.g||(r.g=new Map,r.h=0,r.i&&function Ro(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var d=r[t].substring(0,s);a=r[t].substring(s+1)}else d=r[t];e(d,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Pt(r,e){Oe(r),e=Yn(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function zt(r,e){return Oe(r),e=Yn(r,e),r.g.has(e)}function Dn(r,e,t){Pt(r,e),0<t.length&&(r.i=null,r.g.set(Yn(r,e),Ee(t)),r.h+=t.length)}function Yn(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function vr(r){this.l=r||vi,r=Nt.PerformanceNavigationTiming?0<(r=Nt.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ka&&Nt.g.Ka()&&Nt.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(be=he.prototype).add=function(r,e){Oe(this),this.i=null,r=Yn(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},be.forEach=function(r,e){Oe(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},be.ta=function(){Oe(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let d=0;d<a.length;d++)t.push(e[s])}return t},be.Z=function(r){Oe(this);let e=[];if("string"==typeof r)zt(this,r)&&(e=e.concat(this.g.get(Yn(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},be.set=function(r,e){return Oe(this),this.i=null,zt(this,r=Yn(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},be.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},be.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const d=encodeURIComponent(String(s)),m=this.Z(s);for(s=0;s<m.length;s++){var a=d;""!==m[s]&&(a+="="+encodeURIComponent(String(m[s]))),r.push(a)}}return this.i=r.join("&")};var vi=10;function gi(r){return!!r.h||!!r.g&&r.g.size>=r.j}function ti(r){return r.h?1:r.g?r.g.size:0}function co(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Ci(r,e){r.g?r.g.add(e):r.h=e}function Qn(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Ds(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Ee(r.i)}function ho(){this.g=new class{stringify(r){return Nt.JSON.stringify(r,void 0)}parse(r){return Nt.JSON.parse(r,void 0)}}}function vo(r,e,t){const s=t||"";try{Js(r,function(a,d){let m=a;_n(a)&&(m=gr(a)),e.push(s+d+"="+encodeURIComponent(m))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function j(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(d){}}function F(r){this.l=r.fc||null,this.j=r.ob||!1}function ce(r,e){Bt.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=Le,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vr.prototype.cancel=function(){if(this.i=Ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},st(F,Vi),F.prototype.g=function(){return new ce(this.l,this.j)},F.prototype.i=function(r){return function(){return r}}({}),st(ce,Bt);var Le=0;function Jt(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function qr(r){r.readyState=4,r.l=null,r.j=null,r.A=null,W(r)}function W(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(be=ce.prototype).open=function(r,e){if(this.readyState!=Le)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,W(this)},be.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Nt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},be.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qr(this)),this.readyState=Le},be.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,W(this)),this.g&&(this.readyState=3,W(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jt(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},be.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?qr(this):W(this),3==this.readyState&&Jt(this)}},be.Za=function(r){this.g&&(this.response=this.responseText=r,qr(this))},be.Ya=function(r){this.g&&(this.response=r,qr(this))},be.ka=function(){this.g&&qr(this)},be.setRequestHeader=function(r,e){this.v.append(r,e)},be.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},be.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(ce.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var q=Nt.JSON.parse;function pe(r){Bt.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=De,this.L=this.M=!1}st(pe,Bt);var De="",ze=/^https?$/i,vt=["POST","PUT"];function On(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,xn(r),Bn(r)}function xn(r){r.F||(r.F=!0,on(r,"complete"),on(r,"error"))}function Jn(r){if(r.h&&void 0!==Ht&&(!r.C[1]||4!=Gr(r)||2!=r.da()))if(r.v&&4==Gr(r))cs(r.La,0,r);else if(on(r,"readystatechange"),4==Gr(r)){r.h=!1;try{const m=r.da();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===m){var a=String(r.I).match(_s)[1]||null;!a&&Nt.self&&Nt.self.location&&(a=Nt.self.location.protocol.slice(0,-1)),s=!ze.test(a?a.toLowerCase():"")}t=s}if(t)on(r,"complete"),on(r,"success");else{r.m=6;try{var d=2<Gr(r)?r.g.statusText:""}catch(R){d=""}r.j=d+" ["+r.da()+"]",xn(r)}}finally{Bn(r)}}}function Bn(r,e){if(r.g){ni(r);const t=r.g,s=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||on(r,"ready");try{t.onreadystatechange=s}catch(a){}}}function ni(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Nt.clearTimeout(r.A),r.A=null)}function Gr(r){return r.g?r.g.readyState:0}function hi(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case De:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Fi(r){let e="";return mr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function oi(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Fi(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ei(r,e,t))}function Yi(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function ns(r){this.Ga=0,this.j=[],this.l=new mn,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yi("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yi("baseRetryDelayMs",5e3,r),this.hb=Yi("retryDelaySeedMs",1e4,r),this.eb=Yi("forwardChannelMaxRetries",2,r),this.xa=Yi("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new vr(r&&r.concurrentRequestLimit),this.Ja=new ho,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Li(r){if(Ns(r),3==r.H){var e=r.W++,t=di(r.I);if(ei(t,"SID",r.K),ei(t,"RID",e),ei(t,"TYPE","terminate"),fo(r,t),(e=new ao(r,r.l,e)).L=2,e.v=bs(di(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon)try{t=Nt.navigator.sendBeacon(e.v.toString(),"")}catch(s){}!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ha(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Go(e)}Ri(r)}function Bi(r){r.g&&(Ta(r),r.g.cancel(),r.g=null)}function Ns(r){Bi(r),r.u&&(Nt.clearTimeout(r.u),r.u=null),mi(r),r.i.cancel(),r.m&&("number"==typeof r.m&&Nt.clearTimeout(r.m),r.m=null)}function Eo(r){if(!gi(r.i)&&!r.m){r.m=!0;var e=r.Na;an||Kr(),In||(an(),In=!0),or.add(e,r),r.C=0}}function js(r,e){var t;t=e?e.m:r.W++;const s=di(r.I);ei(s,"SID",r.K),ei(s,"RID",t),ei(s,"AID",r.V),fo(r,s),r.o&&r.s&&oi(s,r.o,r.s),t=new ao(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=as(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Ci(r.i,t),lo(t,s,e)}function fo(r,e){r.na&&mr(r.na,function(t,s){ei(e,s,t)}),r.h&&Js({},function(t,s){ei(e,s,t)})}function as(r,e,t){t=Math.min(r.j.length,t);var s=r.h?Rn(r.h.Va,r.h,r):null;e:{var a=r.j;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=a[0].g,m.push("ofs="+d)):d=0:m.push("ofs="+d);let R=!0;for(let G=0;G<t;G++){let X=a[G].g;const ge=a[G].map;if(X-=d,0>X)d=Math.max(0,a[G].g-100),R=!1;else try{vo(ge,m,"req"+X+"_")}catch(Ue){s&&s(ge)}}if(R){s=m.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,s}function nl(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;an||Kr(),In||(an(),In=!0),or.add(e,r),r.A=0}}function wo(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Oi(Rn(r.Ma,r),ls(r,r.A)),r.A++,0))}function Ta(r){null!=r.B&&(Nt.clearTimeout(r.B),r.B=null)}function Wo(r){r.g=new ao(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=di(r.wa);ei(e,"RID","rpc"),ei(e,"SID",r.K),ei(e,"AID",r.V),ei(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&ei(e,"TO",r.qa),ei(e,"TYPE","xmlhttp"),fo(r,e),r.o&&r.s&&oi(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.v=bs(di(e)),t.s=null,t.S=!0,Oo(t,r)}function mi(r){null!=r.v&&(Nt.clearTimeout(r.v),r.v=null)}function eo(r,e){var t=null;if(r.g==e){mi(r),Ta(r),r.g=null;var s=2}else{if(!co(r.i,e))return;t=e.F,Qn(r.i,e),s=1}if(0!=r.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;on(s=mt(),new nr(s,t)),Eo(r)}else nl(r);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function da(r,e){return!(ti(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Oi(Rn(r.Na,r,e),ls(r,r.C)),r.C++,0)))}(r,e)||2==s&&wo(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),a){case 1:Es(r,5);break;case 4:Es(r,10);break;case 3:Es(r,6);break;default:Es(r,2)}}function ls(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function Es(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var s=Rn(r.pb,r);t||(t=new Ki("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||vs(t,"https"),bs(t)),function K(r,e){const t=new mn;if(Nt.Image){const s=new Image;s.onload=un(j,t,s,"TestLoadImage: loaded",!0,e),s.onerror=un(j,t,s,"TestLoadImage: error",!1,e),s.onabort=un(j,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=un(j,t,s,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else Un(2);r.H=0,r.h&&r.h.za(e),Ri(r),Ns(r)}function Ri(r){if(r.H=0,r.ma=[],r.h){const e=Ds(r.i);(0!=e.length||0!=r.j.length)&&(Ne(r.ma,e),Ne(r.ma,r.j),r.i.i.length=0,Ee(r.j),r.j.length=0),r.h.ya()}}function ba(r,e,t){var s=t instanceof Ki?di(t):new Ki(t);if(""!=s.g)e&&(s.g=e+"."+s.g),Xs(s,s.m);else{var a=Nt.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var d=new Ki(null);s&&vs(d,s),e&&(d.g=e),a&&Xs(d,a),t&&(d.l=t),s=d}return e=r.Da,(t=r.F)&&e&&ei(s,t,e),ei(s,"VER",r.ra),fo(r,s),s}function ha(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pe(t&&r.Ha&&!r.va?new F({ob:!0}):r.va)).Oa(r.J),e}function gl(){}function Mo(){if(Xn&&!(10<=Number(Zt)))throw Error("Environmental error: no available transport.")}function Hs(r,e){Bt.call(this),this.g=new ns(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!pn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Co(this)}function zo(r){_o.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function ta(){No.call(this),this.status=1}function Co(r){this.g=r}function to(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ml(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var d=r.g[3],m=(e=r.g[0])+(d^(t=r.g[1])&((a=r.g[2])^d))+s[0]+3614090360&4294967295;m=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=t+(m<<7&4294967295|m>>>25))+((m=d+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|m>>>20))+((m=a+(t^d&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|m>>>15))+((m=t+(e^a&(d^e))+s[3]+3250441966&4294967295)<<22&4294967295|m>>>10))+((m=e+(d^t&(a^d))+s[4]+4118548399&4294967295)<<7&4294967295|m>>>25))+((m=d+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|m>>>20))+((m=a+(t^d&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|m>>>15))+((m=t+(e^a&(d^e))+s[7]+4249261313&4294967295)<<22&4294967295|m>>>10))+((m=e+(d^t&(a^d))+s[8]+1770035416&4294967295)<<7&4294967295|m>>>25))+((m=d+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|m>>>20))+((m=a+(t^d&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|m>>>15))+((m=t+(e^a&(d^e))+s[11]+2304563134&4294967295)<<22&4294967295|m>>>10))+((m=e+(d^t&(a^d))+s[12]+1804603682&4294967295)<<7&4294967295|m>>>25))+((m=d+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|m>>>20))+((m=a+(t^d&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|m>>>15))+((m=t+(e^a&(d^e))+s[15]+1236535329&4294967295)<<22&4294967295|m>>>10))+((m=e+(a^d&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|m>>>27))+((m=d+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|m>>>23))+((m=a+(e^t&(d^e))+s[11]+643717713&4294967295)<<14&4294967295|m>>>18))+((m=t+(d^e&(a^d))+s[0]+3921069994&4294967295)<<20&4294967295|m>>>12))+((m=e+(a^d&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|m>>>27))+((m=d+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|m>>>23))+((m=a+(e^t&(d^e))+s[15]+3634488961&4294967295)<<14&4294967295|m>>>18))+((m=t+(d^e&(a^d))+s[4]+3889429448&4294967295)<<20&4294967295|m>>>12))+((m=e+(a^d&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|m>>>27))+((m=d+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|m>>>23))+((m=a+(e^t&(d^e))+s[3]+4107603335&4294967295)<<14&4294967295|m>>>18))+((m=t+(d^e&(a^d))+s[8]+1163531501&4294967295)<<20&4294967295|m>>>12))+((m=e+(a^d&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|m>>>27))+((m=d+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|m>>>23))+((m=a+(e^t&(d^e))+s[7]+1735328473&4294967295)<<14&4294967295|m>>>18))+((m=t+(d^e&(a^d))+s[12]+2368359562&4294967295)<<20&4294967295|m>>>12))+((m=e+(t^a^d)+s[5]+4294588738&4294967295)<<4&4294967295|m>>>28))+((m=d+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|m>>>21))+((m=a+(d^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|m>>>16))+((m=t+(a^d^e)+s[14]+4259657740&4294967295)<<23&4294967295|m>>>9))+((m=e+(t^a^d)+s[1]+2763975236&4294967295)<<4&4294967295|m>>>28))+((m=d+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|m>>>21))+((m=a+(d^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|m>>>16))+((m=t+(a^d^e)+s[10]+3200236656&4294967295)<<23&4294967295|m>>>9))+((m=e+(t^a^d)+s[13]+681279174&4294967295)<<4&4294967295|m>>>28))+((m=d+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|m>>>21))+((m=a+(d^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|m>>>16))+((m=t+(a^d^e)+s[6]+76029189&4294967295)<<23&4294967295|m>>>9))+((m=e+(t^a^d)+s[9]+3654602809&4294967295)<<4&4294967295|m>>>28))+((m=d+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|m>>>21))+((m=a+(d^e^t)+s[15]+530742520&4294967295)<<16&4294967295|m>>>16))+((m=t+(a^d^e)+s[2]+3299628645&4294967295)<<23&4294967295|m>>>9))+((m=e+(a^(t|~d))+s[0]+4096336452&4294967295)<<6&4294967295|m>>>26))+((m=d+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|m>>>22))+((m=a+(e^(d|~t))+s[14]+2878612391&4294967295)<<15&4294967295|m>>>17))+((m=t+(d^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|m>>>11))+((m=e+(a^(t|~d))+s[12]+1700485571&4294967295)<<6&4294967295|m>>>26))+((m=d+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|m>>>22))+((m=a+(e^(d|~t))+s[10]+4293915773&4294967295)<<15&4294967295|m>>>17))+((m=t+(d^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|m>>>11))+((m=e+(a^(t|~d))+s[8]+1873313359&4294967295)<<6&4294967295|m>>>26))+((m=d+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|m>>>22))+((m=a+(e^(d|~t))+s[6]+2734768916&4294967295)<<15&4294967295|m>>>17))+((m=t+(d^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|m>>>11))+((d=(e=t+((m=e+(a^(t|~d))+s[4]+4149444226&4294967295)<<6&4294967295|m>>>26))+((m=d+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|m>>>22))^((a=d+((m=a+(e^(d|~t))+s[2]+718787259&4294967295)<<15&4294967295|m>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(m<<21&4294967295|m>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+d&4294967295}function ai(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var d=0|r[a];s&&d==e||(t[a]=d,s=!1)}this.g=t}(be=pe.prototype).Oa=function(r){this.M=r},be.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Bs.g(),this.C=function Ai(r){return r.h||(r.h=r.i())}(this.u?this.u:Bs),this.g.onreadystatechange=Rn(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(d){return void On(this,d)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const d of s.keys())t.set(d,s.get(d))}s=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),a=Nt.FormData&&r instanceof Nt.FormData,!(0<=Re(vt,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,m]of t)this.g.setRequestHeader(d,m);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ni(this),0<this.B&&((this.L=function Yt(r){return Xn&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rn(this.ua,this)):this.A=cs(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(d){On(this,d)}},be.ua=function(){void 0!==Ht&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,on(this,"timeout"),this.abort(8))},be.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,on(this,"complete"),on(this,"abort"),Bn(this))},be.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bn(this,!0)),pe.$.N.call(this)},be.La=function(){this.s||(this.G||this.v||this.l?Jn(this):this.kb())},be.kb=function(){Jn(this)},be.isActive=function(){return!!this.g},be.da=function(){try{return 2<Gr(this)?this.g.status:-1}catch(r){return-1}},be.ja=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},be.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),q(e)}},be.Ia=function(){return this.m},be.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(be=ns.prototype).ra=8,be.H=1,be.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new ao(this,this.l,r);let d=this.s;if(this.U&&(d?(d=Sr(d),dr(d,this.U)):d=this.U),null!==this.o||this.O||(a.I=d,d=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=as(this,a,e),ei(t=di(this.I),"RID",r),ei(t,"CVER",22),this.F&&ei(t,"X-HTTP-Session-Id",this.F),fo(this,t),d&&(this.O?e="headers="+encodeURIComponent(String(Fi(d)))+"&"+e:this.o&&oi(t,this.o,d)),Ci(this.i,a),this.bb&&ei(t,"TYPE","init"),this.P?(ei(t,"$req",e),ei(t,"SID","null"),a.aa=!0,lo(a,t,null)):lo(a,t,e),this.H=2}}else 3==this.H&&(r?js(this,r):0==this.j.length||gi(this.i)||js(this))},be.Ma=function(){if(this.u=null,Wo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=Oi(Rn(this.jb,this),r)}},be.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Un(10),Bi(this),Wo(this))},be.ib=function(){null!=this.v&&(this.v=null,Bi(this),wo(this),Un(19))},be.pb=function(r){r?(this.l.info("Successfully pinged google.com"),Un(2)):(this.l.info("Failed to ping google.com"),Un(1))},be.isActive=function(){return!!this.h&&this.h.isActive(this)},(be=gl.prototype).Ba=function(){},be.Aa=function(){},be.za=function(){},be.ya=function(){},be.isActive=function(){return!0},be.Va=function(){},Mo.prototype.g=function(r,e){return new Hs(r,e)},st(Hs,Bt),Hs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;Un(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=ba(r,null,r.Y),Eo(r)},Hs.prototype.close=function(){Li(this.g)},Hs.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=gr(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&Eo(e)},Hs.prototype.N=function(){this.g.h=null,delete this.j,Li(this.g),delete this.g,Hs.$.N.call(this)},st(zo,_o),st(ta,No),st(Co,gl),Co.prototype.Ba=function(){on(this.g,"a")},Co.prototype.Aa=function(r){on(this.g,new zo(r))},Co.prototype.za=function(r){on(this.g,new ta)},Co.prototype.ya=function(){on(this.g,"b")},st(to,function ss(){this.blockSize=-1}),to.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},to.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,d=0;d<e;){if(0==a)for(;d<=t;)ml(this,r,d),d+=this.blockSize;if("string"==typeof r){for(;d<e;)if(s[a++]=r.charCodeAt(d++),a==this.blockSize){ml(this,s),a=0;break}}else for(;d<e;)if(s[a++]=r[d++],a==this.blockSize){ml(this,s),a=0;break}}this.h=a,this.i+=e},to.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var Ko={};function rs(r){return-128<=r&&128>r?function _r(r,e){var t=Ko;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new ai([0|e],0>e?-1:0)}):new ai([0|r],0>r?-1:0)}function Lo(r){if(isNaN(r)||!isFinite(r))return Da;if(0>r)return Mi(Lo(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=na;return new ai(e,0)}var na=4294967296,Da=rs(0),yl=rs(1),Al=rs(16777216);function qo(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function fa(r){return-1==r.h}function Mi(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new ai(t,~r.h).add(yl)}function ra(r,e){return r.add(Mi(e))}function Zo(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Os(r,e){this.g=r,this.h=e}function Yo(r,e){if(qo(e))throw Error("division by zero");if(qo(r))return new Os(Da,Da);if(fa(r))return e=Yo(Mi(r),e),new Os(Mi(e.g),Mi(e.h));if(fa(e))return e=Yo(r,Mi(e)),new Os(Mi(e.g),e.h);if(30<r.g.length){if(fa(r)||fa(e))throw Error("slowDivide_ only works with positive integers.");for(var t=yl,s=e;0>=s.X(r);)t=no(t),s=no(s);var a=Ss(t,1),d=Ss(s,1);for(s=Ss(s,2),t=Ss(t,2);!qo(s);){var m=d.add(s);0>=m.X(r)&&(a=a.add(t),d=m),s=Ss(s,1),t=Ss(t,1)}return e=ra(r,a.R(e)),new Os(a,e)}for(a=Da;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),m=(d=Lo(t)).R(e);fa(m)||0<m.X(r);)m=(d=Lo(t-=s)).R(e);qo(d)&&(d=yl),a=a.add(d),r=ra(r,m)}return new Os(a,r)}function no(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new ai(t,r.h)}function Ss(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],d=0;d<s;d++)a[d]=0<e?r.D(d+t)>>>e|r.D(d+t+1)<<32-e:r.D(d+t);return new ai(a,r.h)}(be=ai.prototype).ea=function(){if(fa(this))return-Mi(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:na+s)*e,e*=na}return r},be.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(qo(this))return"0";if(fa(this))return"-"+Mi(this).toString(r);for(var e=Lo(Math.pow(r,6)),t=this,s="";;){var a=Yo(t,e).g,d=((0<(t=ra(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(qo(t=a))return d+s;for(;6>d.length;)d="0"+d;s=d+s}},be.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},be.X=function(r){return fa(r=ra(this,r))?-1:qo(r)?0:1},be.abs=function(){return fa(this)?Mi(this):this},be.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var d=s+(65535&this.D(a))+(65535&r.D(a)),m=(d>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=m>>>16,t[a]=(m&=65535)<<16|(d&=65535)}return new ai(t,-2147483648&t[t.length-1]?-1:0)},be.R=function(r){if(qo(this)||qo(r))return Da;if(fa(this))return fa(r)?Mi(this).R(Mi(r)):Mi(Mi(this).R(r));if(fa(r))return Mi(this.R(Mi(r)));if(0>this.X(Al)&&0>r.X(Al))return Lo(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var d=this.D(s)>>>16,m=65535&this.D(s),R=r.D(a)>>>16,G=65535&r.D(a);t[2*s+2*a]+=m*G,Zo(t,2*s+2*a),t[2*s+2*a+1]+=d*G,Zo(t,2*s+2*a+1),t[2*s+2*a+1]+=m*R,Zo(t,2*s+2*a+1),t[2*s+2*a+2]+=d*R,Zo(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new ai(t,0)},be.gb=function(r){return Yo(this,r).h},be.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new ai(t,this.h&r.h)},be.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new ai(t,this.h|r.h)},be.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new ai(t,this.h^r.h)},Mo.prototype.createWebChannel=Mo.prototype.g,Hs.prototype.send=Hs.prototype.u,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,ci.COMPLETE="complete",Ys.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",Bt.prototype.listen=Bt.prototype.O,pe.prototype.listenOnce=pe.prototype.P,pe.prototype.getLastError=pe.prototype.Sa,pe.prototype.getLastErrorCode=pe.prototype.Ia,pe.prototype.getStatus=pe.prototype.da,pe.prototype.getResponseJson=pe.prototype.Wa,pe.prototype.getResponseText=pe.prototype.ja,pe.prototype.send=pe.prototype.ha,pe.prototype.setWithCredentials=pe.prototype.Oa,to.prototype.digest=to.prototype.l,to.prototype.reset=to.prototype.reset,to.prototype.update=to.prototype.j,ai.prototype.add=ai.prototype.add,ai.prototype.multiply=ai.prototype.R,ai.prototype.modulo=ai.prototype.gb,ai.prototype.compare=ai.prototype.X,ai.prototype.toNumber=ai.prototype.ea,ai.prototype.toString=ai.prototype.toString,ai.prototype.getBits=ai.prototype.D,ai.fromNumber=Lo,ai.fromString=function rl(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Mi(rl(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Lo(Math.pow(e,8)),s=Da,a=0;a<r.length;a+=8){var d=Math.min(8,r.length-a),m=parseInt(r.substring(a,a+d),e);8>d?(d=Lo(Math.pow(e,d)),s=s.R(d).add(Lo(m))):s=(s=s.R(t)).add(Lo(m))}return s};var Rl=It.createWebChannelTransport=function(){return new Mo},za=It.getStatEventTarget=function(){return mt()},Sa=It.ErrorCode=ds,Ml=It.EventType=ci,xl=It.Event=Ze,Io=It.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wl=It.FetchXmlHttpFactory=F,Aa=It.WebChannel=Ys,_l=It.XhrIo=pe,vl=It.Md5=to,pa=It.Integer=ai;const P="@firebase/firestore";class D{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}D.UNAUTHENTICATED=new D(null),D.GOOGLE_CREDENTIALS=new D("google-credentials-uid"),D.FIRST_PARTY=new D("first-party-uid"),D.MOCK_USER=new D("mock-user");let T="9.23.0";const H=new xe.Yd("@firebase/firestore");function J(){return H.logLevel}function fe(r,...e){if(H.logLevel<=xe.in.DEBUG){const t=e.map(yn);H.debug(`Firestore (${T}): ${r}`,...t)}}function Ve(r,...e){if(H.logLevel<=xe.in.ERROR){const t=e.map(yn);H.error(`Firestore (${T}): ${r}`,...t)}}function Ft(r,...e){if(H.logLevel<=xe.in.WARN){const t=e.map(yn);H.warn(`Firestore (${T}): ${r}`,...t)}}function yn(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function Xt(r="Unexpected state"){const e=`FIRESTORE (${T}) INTERNAL ASSERTION FAILED: `+r;throw Ve(e),new Error(e)}function Gt(r,e){r||Xt()}function en(r,e){return r}const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jt extends Qe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class il{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(D.UNAUTHENTICATED))}shutdown(){}}class ia{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ga{constructor(e){this.t=e,this.currentUser=D.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const d=X=>this.i!==a?(a=this.i,t(X)):Promise.resolve();let m=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Fr,e.enqueueRetryable(()=>d(this.currentUser))};const R=()=>{const X=m;e.enqueueRetryable((0,Ke.Z)(function*(){yield X.promise,yield d(s.currentUser)}))},G=X=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(X=>G(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?G(X):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Fr)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Gt("string"==typeof s.accessToken),new il(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gt(null===e||"string"==typeof e),new D(e)}}class Ka{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=D.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Tu{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ka(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(D.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qa{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=d=>{null!=d.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.T;return this.T=d.token,fe("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const a=d=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.I.onInit(d=>a(d)),setTimeout(()=>{if(!this.appCheck){const d=this.I.getImmediate({optional:!0});d?a(d):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Gt("string"==typeof t.token),this.T=t.token,new Pl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ec(r){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Ji{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=ec(40);for(let d=0;d<a.length;++d)s.length<20&&a[d]<t&&(s+=e.charAt(a[d]%e.length))}return s}}function xr(r,e){return r<e?-1:r>e?1:0}function Vo(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function tc(r){return r+"\0"}class ws{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ws.fromMillis(Date.now())}static fromDate(e){return ws.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ws(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xr(this.nanoseconds,e.nanoseconds):xr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new ws(0,0))}static max(){return new Gn(new ws(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Za{constructor(e,t,s){void 0===t?t=0:t>e.length&&Xt(),void 0===s?s=e.length-t:s>e.length-t&&Xt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Za.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const d=e.get(a),m=t.get(a);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ii extends Za{construct(e,t,s){return new ii(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new jt(Dt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new ii(t)}static emptyPath(){return new ii([])}}const su=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gs extends Za{construct(e,t,s){return new gs(e,t,s)}static isValidIdentifier(e){return su.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gs(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const d=()=>{if(0===s.length)throw new jt(Dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let m=!1;for(;a<e.length;){const R=e[a];if("\\"===R){if(a+1===e.length)throw new jt(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[a+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new jt(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=G,a+=2}else"`"===R?(m=!m,a++):"."!==R||m?(s+=R,a++):(d(),a++)}if(d(),m)throw new jt(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gs(t)}static emptyPath(){return new gs([])}}class fn{constructor(e){this.path=e}static fromPath(e){return new fn(ii.fromString(e))}static fromName(e){return new fn(ii.fromString(e).popFirst(5))}static empty(){return new fn(ii.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ii.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ii.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fn(new ii(e.slice()))}}class Ra{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Ma(r){return r.fields.find(e=>2===e.kind)}function Nl(r){return r.fields.filter(e=>2!==e.kind)}Ra.UNKNOWN_ID=-1;class ks{constructor(e,t){this.fieldPath=e,this.kind=t}}class zl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zl(0,To.min())}}function Ol(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Gn.fromTimestamp(1e9===s?new ws(t+1,0):new ws(t,s));return new To(a,fn.empty(),e)}function sl(r){return new To(r.readTime,r.key,-1)}class To{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new To(Gn.min(),fn.empty(),-1)}static max(){return new To(Gn.max(),fn.empty(),-1)}}function bu(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=fn.comparator(r.documentKey,e.documentKey),0!==t?t:xr(r.largestBatchId,e.largestBatchId))}const Kl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Du{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ol(r){return Pa.apply(this,arguments)}function Pa(){return Pa=(0,Ke.Z)(function*(r){if(r.code!==Dt.FAILED_PRECONDITION||r.message!==Kl)throw r;fe("LocalStore","Unexpectedly lost primary lease")}),Pa.apply(this,arguments)}class pt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pt((s,a)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,a)},this.catchCallback=d=>{this.wrapFailure(t,d).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pt?t:pt.resolve(t)}catch(t){return pt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pt.reject(t)}static resolve(e){return new pt((t,s)=>{t(e)})}static reject(e){return new pt((t,s)=>{s(e)})}static waitFor(e){return new pt((t,s)=>{let a=0,d=0,m=!1;e.forEach(R=>{++a,R.next(()=>{++d,m&&d===a&&t()},G=>s(G))}),m=!0,d===a&&t()})}static or(e){let t=pt.resolve(!1);for(const s of e)t=t.next(a=>a?pt.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,d)=>{s.push(t.call(this,a,d))}),this.waitFor(s)}static mapArray(e,t){return new pt((s,a)=>{const d=e.length,m=new Array(d);let R=0;for(let G=0;G<d;G++){const X=G;t(e[X]).next(ge=>{m[X]=ge,++R,R===d&&s(m)},ge=>a(ge))}})}static doWhile(e,t){return new pt((s,a)=>{const d=()=>{!0===e()?t().next(()=>{d()},a):s()};d()})}}class al{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Fr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Na(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=Oa(s.target.error);this.v.reject(new Na(e,a))}}static open(e,t,s,a){try{return new al(t,e.transaction(a,s))}catch(d){throw new Na(t,d)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kl(t)}}class ro{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===ro.S((0,Qe.z$)())&&Ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),ma(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Qe.hl)())return!1;if(ro.C())return!0;const e=(0,Qe.z$)(),t=ro.S(e),s=0<t&&t<10,a=ro.N(e),d=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,Ke.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{s(m.target.result)},d.onblocked=()=>{a(new Na(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const R=m.target.error;a("VersionError"===R.name?new jt(Dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new jt(Dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Na(e,R))},d.onupgradeneeded=m=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.V.O(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var d=this;return(0,Ke.Z)(function*(){const m="readonly"===t;let R=0;for(;;){++R;try{d.db=yield d.$(e);const G=al.open(d.db,e,m?"readonly":"readwrite",s),X=a(G).next(ge=>(G.P(),ge)).catch(ge=>(G.abort(ge),pt.reject(ge))).toPromise();return X.catch(()=>{}),yield G.R,X}catch(G){const X=G,ge="FirebaseError"!==X.name&&R<3;if(fe("SimpleDb","Transaction failed with error:",X.message,"Retrying:",ge),d.close(),!ge)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ql{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ma(this.L.delete())}}class Na extends jt{constructor(e,t){super(Dt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qo(r){return"IndexedDbTransactionError"===r.name}class kl{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ma(s)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),ma(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),d=[];return this.W(a,(m,R)=>{d.push(R)}).next(()=>d)}{const a=this.store.getAll(s.range);return new pt((d,m)=>{a.onerror=R=>{m(R.target.error)},a.onsuccess=R=>{d(R.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new pt((a,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{a(m.target.result)}})}J(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(d,m,R)=>R.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new pt((s,a)=>{t.onerror=d=>{const m=Oa(d.target.error);a(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(R=>{R?m.continue():s()}):s()}})}W(e,t){const s=[];return new pt((a,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const R=m.target.result;if(!R)return void a();const G=new ql(R),X=t(R.primaryKey,R.value,G);if(X instanceof pt){const ge=X.catch(Ue=>(G.done(),pt.reject(Ue)));s.push(ge)}G.isDone?a():null===G.K?R.continue():R.continue(G.K)}}).next(()=>pt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ma(r){return new pt((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=Oa(s.target.error);t(a)}})}let nc=!1;function Oa(r){const e=ro.S((0,Qe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nc||(nc=!0,setTimeout(()=>{throw s},0)),s}}return r}class rc{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ke.Z)(function*(){t.task=null;try{fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Qo(s)?fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ol(s)}yield t.et(6e4)}))}}class ka{constructor(e,t){this.localStore=e,this.persistence=t}nt(){var e=this;return(0,Ke.Z)(function*(t=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>e.st(s,t))}).apply(this,arguments)}st(e,t){const s=new Set;let a=t,d=!0;return pt.doWhile(()=>!0===d&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!s.has(m))return fe("IndexBackiller",`Processing collection: ${m}`),this.it(e,m,a).next(R=>{a-=R,s.add(m)});d=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.rt(a,d)).next(R=>(fe("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>m.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,d)=>{const m=sl(d);bu(m,s)>0&&(s=m)}),new To(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let po=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Uo(r){return null==r}function ya(r){return 0===r&&1/r==-1/0}function ou(r){return"number"==typeof r&&Number.isInteger(r)&&!ya(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function us(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ku(e)),e=Ou(r.get(t),e);return ku(e)}function Ou(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const d=r.charAt(a);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function ku(r){return r+"\x01\x01"}function $s(r){const e=r.length;if(Gt(e>=2),2===e)return Gt("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),ii.emptyPath();const t=e-2,s=[];let a="";for(let d=0;d<e;){const m=r.indexOf("\x01",d);switch((m<0||m>t)&&Xt(),r.charAt(m+1)){case"\x01":const R=r.substring(d,m);let G;0===a.length?G=R:(a+=R,G=a,a=""),s.push(G);break;case"\x10":a+=r.substring(d,m),a+="\0";break;case"\x11":a+=r.substring(d,m+1);break;default:Xt()}d=m+2}return new ii(s)}const ll=["userId","batchId"];function au(r,e){return[r,us(e)]}function Qa(r,e,t){return[r,us(e),t]}const lu={},El=["prefixPath","collectionGroup","readTime","documentId"],Fs=["prefixPath","collectionGroup","documentId"],Fu=["collectionGroup","readTime","prefixPath","documentId"],Fl=["canonicalId","targetId"],uu=["targetId","path"],cu=["path","targetId"],du=["collectionId","parent"],Zl=["indexId","uid"],Su=["uid","sequenceNumber"],Lu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hu=["indexId","uid","orderedDocumentKey"],Vu=["userId","collectionPath","documentId"],Ll=["userId","collectionPath","largestBatchId"],fu=["userId","collectionGroup","largestBatchId"],pu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gu=[...pu,"documentOverlays"],ul=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_a=ul,Vl=[..._a,"indexConfiguration","indexState","indexEntries"];class Uu extends Du{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function is(r,e){const t=en(r);return ro.M(t.ht,e)}function Fa(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function sa(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ul(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Pi{constructor(e,t){this.comparator=e,this.root=t||Gs.EMPTY}insert(e,t){return new Pi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(e){return new Pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new io(this.root,e,this.comparator,!1)}getReverseIterator(){return new io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new io(this.root,e,this.comparator,!0)}}class io{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?s(e.key,t):1,t&&a&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gs{constructor(e,t,s,a,d){this.key=e,this.value=t,this.color=null!=s?s:Gs.RED,this.left=null!=a?a:Gs.EMPTY,this.right=null!=d?d:Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,d){return new Gs(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const d=s(e,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===d?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Gs.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xt();const e=this.left.check();if(e!==this.right.check())throw Xt();return e+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1,Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt()}get value(){throw Xt()}get color(){throw Xt()}get left(){throw Xt()}get right(){throw Xt()}copy(r,e,t,s,a){return this}insert(r,e,t){return new Gs(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xi{constructor(e){this.comparator=e,this.data=new Pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wl(this.data.getIterator())}getIteratorFrom(e){return new wl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Xi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(0!==this.comparator(a,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xi(this.comparator);return t.data=e,t}}class wl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function La(r){return r.hasNext()?r.getNext():void 0}class ji{constructor(e){this.fields=e,e.sort(gs.comparator)}static empty(){return new ji([])}unionWith(e){let t=new Xi(gs.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class mu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw"undefined"!=typeof DOMException&&a instanceof DOMException?new mu("Invalid base64 string: "+a):a}}(e);return new Cs(t)}static fromUint8Array(e){const t=function(s){let a="";for(let d=0;d<s.length;++d)a+=String.fromCharCode(s[d]);return a}(e);return new Cs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cs.EMPTY_BYTE_STRING=new Cs("");const yu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bl(r){if(Gt(!!r),"string"==typeof r){let e=0;const t=yu.exec(r);if(Gt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:As(r.seconds),nanos:As(r.nanos)}}function As(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Is(r){return"string"==typeof r?Cs.fromBase64String(r):Cs.fromUint8Array(r)}function Ea(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Yl(r){const e=r.mapValue.fields.__previous_value__;return Ea(e)?Yl(e):e}function wa(r){const e=Bl(r.mapValue.fields.__local_write_time__.timestampValue);return new ws(e.seconds,e.nanos)}class go{constructor(e,t,s,a,d,m,R,G,X){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=R,this.longPollingOptions=G,this.useFetchStreams=X}}class Jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}const xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ja={nullValue:"NULL_VALUE"};function Xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ea(r)?4:En(r)?9007199254740991:10:Xt()}function bo(r,e){if(r===e)return!0;const t=Xa(r);if(t!==Xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return wa(r).isEqual(wa(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const d=Bl(s.timestampValue),m=Bl(a.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,Is(r.bytesValue).isEqual(Is(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return As(s.geoPointValue.latitude)===As(a.geoPointValue.latitude)&&As(s.geoPointValue.longitude)===As(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return As(s.integerValue)===As(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const d=As(s.doubleValue),m=As(a.doubleValue);return d===m?ya(d)===ya(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return Vo(r.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:return function(s,a){const d=s.mapValue.fields||{},m=a.mapValue.fields||{};if(Fa(d)!==Fa(m))return!1;for(const R in d)if(d.hasOwnProperty(R)&&(void 0===m[R]||!bo(d[R],m[R])))return!1;return!0}(r,e);default:return Xt()}var a}function _u(r,e){return void 0!==(r.values||[]).find(t=>bo(t,e))}function cl(r,e){if(r===e)return 0;const t=Xa(r),s=Xa(e);if(t!==s)return xr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xr(r.booleanValue,e.booleanValue);case 2:return function(a,d){const m=As(a.integerValue||a.doubleValue),R=As(d.integerValue||d.doubleValue);return m<R?-1:m>R?1:m===R?0:isNaN(m)?isNaN(R)?0:-1:1}(r,e);case 3:return Au(r.timestampValue,e.timestampValue);case 4:return Au(wa(r),wa(e));case 5:return xr(r.stringValue,e.stringValue);case 6:return function(a,d){const m=Is(a),R=Is(d);return m.compareTo(R)}(r.bytesValue,e.bytesValue);case 7:return function(a,d){const m=a.split("/"),R=d.split("/");for(let G=0;G<m.length&&G<R.length;G++){const X=xr(m[G],R[G]);if(0!==X)return X}return xr(m.length,R.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,d){const m=xr(As(a.latitude),As(d.latitude));return 0!==m?m:xr(As(a.longitude),As(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,d){const m=a.values||[],R=d.values||[];for(let G=0;G<m.length&&G<R.length;++G){const X=cl(m[G],R[G]);if(X)return X}return xr(m.length,R.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,d){if(a===xo.mapValue&&d===xo.mapValue)return 0;if(a===xo.mapValue)return 1;if(d===xo.mapValue)return-1;const m=a.fields||{},R=Object.keys(m),G=d.fields||{},X=Object.keys(G);R.sort(),X.sort();for(let ge=0;ge<R.length&&ge<X.length;++ge){const Ue=xr(R[ge],X[ge]);if(0!==Ue)return Ue;const Et=cl(m[R[ge]],G[X[ge]]);if(0!==Et)return Et}return xr(R.length,X.length)}(r.mapValue,e.mapValue);default:throw Xt()}}function Au(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return xr(r,e);const t=Bl(r),s=Bl(e),a=xr(t.seconds,s.seconds);return 0!==a?a:xr(t.nanos,s.nanos)}function jl(r){return Bu(r)}function Bu(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Bl(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Is(r.bytesValue).toBase64():"referenceValue"in r?fn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",d=!0;for(const m of s.values||[])d?d=!1:a+=",",a+=Bu(m);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let d="{",m=!0;for(const R of a)m?m=!1:d+=",",d+=`${R}:${Bu(s.fields[R])}`;return d+"}"}(r.mapValue):Xt();var e}function A(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function O(r){return!!r&&"integerValue"in r}function te(r){return!!r&&"arrayValue"in r}function Ce(r){return!!r&&"nullValue"in r}function qe(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function dt(r){return!!r&&"mapValue"in r}function Lt(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return sa(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Lt(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lt(r.arrayValue.values[t]);return e}return Object.assign({},r)}function En(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Cn(r){return"nullValue"in r?Ja:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?A(Jo.empty(),fn.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Xt()}function Wn(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?A(Jo.empty(),fn.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?xo:Xt()}function Or(r,e){const t=cl(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Er(r,e){const t=cl(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!dt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lt(t)}setAll(e){let t=gs.emptyPath(),s={},a=[];e.forEach((m,R)=>{if(!t.isImmediateParentOf(R)){const G=this.getFieldsMap(t);this.applyChanges(G,s,a),s={},a=[],t=R.popLast()}m?s[R.lastSegment()]=Lt(m):a.push(R.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,s,a)}delete(e){const t=this.field(e.popLast());dt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];dt(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){sa(t,(a,d)=>e[a]=d);for(const a of s)delete e[a]}clone(){return new Ii(Lt(this.value))}}function Ws(r){const e=[];return sa(r.fields,(t,s)=>{const a=new gs([t]);if(dt(s)){const d=Ws(s.mapValue).fields;if(0===d.length)e.push(a);else for(const m of d)e.push(a.child(m))}else e.push(a)}),new ji(e)}class Ti{constructor(e,t,s,a,d,m,R){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=d,this.data=m,this.documentState=R}static newInvalidDocument(e){return new Ti(e,0,Gn.min(),Gn.min(),Gn.min(),Ii.empty(),0)}static newFoundDocument(e,t,s,a){return new Ti(e,1,t,Gn.min(),s,a,0)}static newNoDocument(e,t){return new Ti(e,2,t,Gn.min(),Gn.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new Ti(e,3,t,Gn.min(),Gn.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xo{constructor(e,t){this.position=e,this.inclusive=t}}function dl(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const d=e[a],m=r.position[a];if(s=d.field.isKeyField()?fn.comparator(fn.fromName(m.referenceValue),t.key):cl(m,t.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function Ca(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!bo(r.position[t],e.position[t]))return!1;return!0}class Bo{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ru(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class md{}class fi extends md{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Z(e,t,s):"array-contains"===t?new f(e,s):"in"===t?new g(e,s):"not-in"===t?new b(e,s):"array-contains-any"===t?new Y(e,s):new fi(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new oe(e,s):new Ae(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cl(t,this.value)):null!==t&&Xa(this.value)===Xa(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qi extends md{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new qi(e,t)}matches(e){return el(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function el(r){return"and"===r.op}function Mu(r){return"or"===r.op}function Hl(r){return ic(r)&&el(r)}function ic(r){for(const e of r.filters)if(e instanceof qi)return!1;return!0}function N(r){if(r instanceof fi)return r.field.canonicalString()+r.op.toString()+jl(r.value);if(Hl(r))return r.filters.map(e=>N(e)).join(",");{const e=r.filters.map(t=>N(t)).join(",");return`${r.op}(${e})`}}function E(r,e){return r instanceof fi?(t=r,(s=e)instanceof fi&&t.op===s.op&&t.field.isEqual(s.field)&&bo(t.value,s.value)):r instanceof qi?function(t,s){return s instanceof qi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,d,m)=>a&&E(d,s.filters[m]),!0)}(r,e):void Xt();var t,s}function C(r,e){const t=r.filters.concat(e);return qi.create(t,r.op)}function x(r){return r instanceof fi?`${(e=r).field.canonicalString()} ${e.op} ${jl(e.value)}`:r instanceof qi?function(e){return e.op.toString()+" {"+e.getFilters().map(x).join(" ,")+"}"}(r):"Filter";var e}class Z extends fi{constructor(e,t,s){super(e,t,s),this.key=fn.fromName(s.referenceValue)}matches(e){const t=fn.comparator(e.key,this.key);return this.matchesComparison(t)}}class oe extends fi{constructor(e,t){super(e,"in",t),this.keys=w(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ae extends fi{constructor(e,t){super(e,"not-in",t),this.keys=w(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function w(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>fn.fromName(s.referenceValue))}class f extends fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return te(t)&&_u(t.arrayValue,this.value)}}class g extends fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_u(this.value.arrayValue,t)}}class b extends fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_u(this.value.arrayValue,t)}}class Y extends fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!te(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>_u(this.value.arrayValue,s))}}class ae{constructor(e,t=null,s=[],a=[],d=null,m=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=d,this.startAt=m,this.endAt=R,this.dt=null}}function $e(r,e=null,t=[],s=[],a=null,d=null,m=null){return new ae(r,e,t,s,a,d,m)}function et(r){const e=en(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>N(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Uo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>jl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>jl(s)).join(",")),e.dt=t}return e.dt}function Vt(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Ru(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!E(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ca(r.startAt,e.startAt)&&Ca(r.endAt,e.endAt)}function dn(r){return fn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Mn(r,e){return r.filters.filter(t=>t instanceof fi&&t.field.isEqual(e))}function kn(r,e,t){let s=Ja,a=!0;for(const d of Mn(r,e)){let m=Ja,R=!0;switch(d.op){case"<":case"<=":m=Cn(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,R=!1;break;case"!=":case"not-in":m=Ja}Or({value:s,inclusive:a},{value:m,inclusive:R})<0&&(s=m,a=R)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const m=t.position[d];Or({value:s,inclusive:a},{value:m,inclusive:t.inclusive})<0&&(s=m,a=t.inclusive);break}return{value:s,inclusive:a}}function Mr(r,e,t){let s=xo,a=!0;for(const d of Mn(r,e)){let m=xo,R=!0;switch(d.op){case">=":case">":m=Wn(d.value),R=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,R=!1;break;case"!=":case"not-in":m=xo}Er({value:s,inclusive:a},{value:m,inclusive:R})>0&&(s=m,a=R)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const m=t.position[d];Er({value:s,inclusive:a},{value:m,inclusive:t.inclusive})>0&&(s=m,a=t.inclusive);break}return{value:s,inclusive:a}}class li{constructor(e,t=null,s=[],a=[],d=null,m="F",R=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=d,this.limitType=m,this.startAt=R,this.endAt=G,this.wt=null,this._t=null}}function Va(r,e,t,s,a,d,m,R){return new li(r,e,t,s,a,d,m,R)}function zs(r){return new li(r)}function Do(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Ua(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function oa(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ms(r){return null!==r.collectionGroup}function Ia(r){const e=en(r);if(null===e.wt){e.wt=[];const t=oa(e),s=Ua(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Bo(t)),e.wt.push(new Bo(gs.keyField(),"asc"));else{let a=!1;for(const d of e.explicitOrderBy)e.wt.push(d),d.field.isKeyField()&&(a=!0);if(!a){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Bo(gs.keyField(),d))}}}return e.wt}function Ls(r){const e=en(r);if(!e._t)if("F"===e.limitType)e._t=$e(e.path,e.collectionGroup,Ia(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Ia(e))t.push(new Bo(d.field,"desc"===d.dir?"asc":"desc"));const s=e.endAt?new Xo(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Xo(e.startAt.position,e.startAt.inclusive):null;e._t=$e(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function Po(r,e){e.getFirstInequalityField(),oa(r);const t=r.filters.concat([e]);return new li(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function vu(r,e,t){return new li(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Jl(r,e){return Vt(Ls(r),Ls(e))&&r.limitType===e.limitType}function rr(r){return`${et(Ls(r))}|lt:${r.limitType}`}function wr(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>x(s)).join(", ")}]`),Uo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>jl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>jl(s)).join(",")),`Target(${t})`}(Ls(r))}; limitType=${r.limitType})`}function Tr(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):fn.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of Ia(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,d,m){const R=dl(a,d,m);return a.inclusive?R<=0:R<0}(t.startAt,Ia(t),s)||t.endAt&&!function(a,d,m){const R=dl(a,d,m);return a.inclusive?R>=0:R>0}(t.endAt,Ia(t),s)));var t,s}function bi(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function So(r){return(e,t)=>{let s=!1;for(const a of Ia(r)){const d=Cl(a,e,t);if(0!==d)return d;s=s||a.field.isKeyField()}return 0}}function Cl(r,e,t){const s=r.field.isKeyField()?fn.comparator(e.key,t.key):function(a,d,m){const R=d.data.field(a),G=m.data.field(a);return null!==R&&null!==G?cl(R,G):Xt()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Xt()}}class so{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,d]of s)if(this.equalsFn(a,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return void(a[d]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(t,s)=>{for(const[a,d]of s)e(a,d)})}isEmpty(){return Ul(this.inner)}size(){return this.innerSize}}const Ba=new Pi(fn.comparator);function Di(){return Ba}const Bc=new Pi(fn.comparator);function sc(...r){let e=Bc;for(const t of r)e=e.insert(t.key,t);return e}function aa(r){let e=Bc;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function la(){return ua()}function ea(){return ua()}function ua(){return new so(r=>r.toString(),(r,e)=>r.isEqual(e))}const vc=new Pi(fn.comparator),_p=new Xi(fn.comparator);function pi(...r){let e=_p;for(const t of r)e=e.add(t);return e}const vp=new Xi(xr);function jc(){return vp}function Yd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ya(e)?"-0":e}}function Qd(r){return{integerValue:""+r}}function Jd(r,e){return ou(e)?Qd(e):Yd(r,e)}class yd{constructor(){this._=void 0}}function Ep(r,e,t){return r instanceof oc?function(s,a){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Ea(a)&&(a=Yl(a)),a&&(d.fields.__previous_value__=a),{mapValue:d}}(t,e):r instanceof Xl?Xd(r,e):r instanceof ja?ac(r,e):function(s,a){const d=Cp(s,a),m=eh(d)+eh(s.gt);return O(d)&&O(s.gt)?Qd(m):Yd(s.serializer,m)}(r,e)}function wp(r,e,t){return r instanceof Xl?Xd(r,e):r instanceof ja?ac(r,e):t}function Cp(r,e){return r instanceof lc?O(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class oc extends yd{}class Xl extends yd{constructor(e){super(),this.elements=e}}function Xd(r,e){const t=th(e);for(const s of r.elements)t.some(a=>bo(a,s))||t.push(s);return{arrayValue:{values:t}}}class ja extends yd{constructor(e){super(),this.elements=e}}function ac(r,e){let t=th(e);for(const s of r.elements)t=t.filter(a=>!bo(a,s));return{arrayValue:{values:t}}}class lc extends yd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function eh(r){return As(r.integerValue||r.doubleValue)}function th(r){return te(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class _d{constructor(e,t){this.field=e,this.transform=t}}class qg{constructor(e,t){this.version=e,this.transformResults=t}}class Vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class wc{}function Zg(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new ke(r.key,Vs.none()):new v(r.key,r.data,Vs.none());{const t=r.data,s=Ii.empty();let a=new Xi(gs.comparator);for(let d of e.fields)if(!a.has(d)){let m=t.field(d);null===m&&d.length>1&&(d=d.popLast(),m=t.field(d)),null===m?s.delete(d):s.set(d,m),a=a.add(d)}return new S(r.key,s,new ji(a.toArray()),Vs.none())}}function S_(r,e,t){r instanceof v?function(s,a,d){const m=s.value.clone(),R=Q(s.fieldTransforms,a,d.transformResults);m.setAll(R),a.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,t):r instanceof S?function(s,a,d){if(!Ec(s.precondition,a))return void a.convertToUnknownDocument(d.version);const m=Q(s.fieldTransforms,a,d.transformResults),R=a.data;R.setAll(B(s)),R.setAll(m),a.convertToFoundDocument(d.version,R).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function p(r,e,t,s){return r instanceof v?function(a,d,m,R){if(!Ec(a.precondition,d))return m;const G=a.value.clone(),X=_e(a.fieldTransforms,R,d);return G.setAll(X),d.convertToFoundDocument(d.version,G).setHasLocalMutations(),null}(r,e,t,s):r instanceof S?function(a,d,m,R){if(!Ec(a.precondition,d))return m;const G=_e(a.fieldTransforms,R,d),X=d.data;return X.setAll(B(a)),X.setAll(G),d.convertToFoundDocument(d.version,X).setHasLocalMutations(),null===m?null:m.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(ge=>ge.field))}(r,e,t,s):(m=t,Ec(r.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m);var d,m}function u(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),d=Cp(s.transform,a||null);null!=d&&(null===t&&(t=Ii.empty()),t.set(s.field,d))}return t||null}function c(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Vo(t,s,(a,d)=>function Kg(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof Xl&&s instanceof Xl||t instanceof ja&&s instanceof ja?Vo(t.elements,s.elements,bo):t instanceof lc&&s instanceof lc?bo(t.gt,s.gt):t instanceof oc&&s instanceof oc);var t,s}(a,d))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class v extends wc{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class S extends wc{constructor(e,t,s,a,d=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function B(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Q(r,e,t){const s=new Map;Gt(r.length===t.length);for(let a=0;a<t.length;a++){const d=r[a],m=d.transform,R=e.data.field(d.field);s.set(d.field,wp(m,R,t[a]))}return s}function _e(r,e,t){const s=new Map;for(const a of r){const d=a.transform,m=t.data.field(a.field);s.set(a.field,Ep(d,m,e))}return s}class ke extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ye extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rt{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const d=this.mutations[a];d.key.isEqual(e.key)&&S_(d,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=p(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=p(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ea();return this.mutations.forEach(a=>{const d=e.get(a.key),m=d.overlayedDocument;let R=this.applyToLocalView(m,d.mutatedFields);R=t.has(a.key)?null:R;const G=Zg(m,R);null!==G&&s.set(a.key,G),m.isValidDocument()||m.convertToNoDocument(Gn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pi())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(t,s)=>c(t,s))&&Vo(this.baseMutations,e.baseMutations,(t,s)=>c(t,s))}}class Wt{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Gt(e.mutations.length===s.length);let a=vc;const d=e.mutations;for(let m=0;m<d.length;m++)a=a.insert(d[m].key,s[m].version);return new Wt(e,t,s,a)}}class tn{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Dr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lr,Vr;function uc(r){switch(r){default:return Xt();case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0}}function Hc(r){if(void 0===r)return Ve("GRPC error has no .code"),Dt.UNKNOWN;switch(r){case Lr.OK:return Dt.OK;case Lr.CANCELLED:return Dt.CANCELLED;case Lr.UNKNOWN:return Dt.UNKNOWN;case Lr.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case Lr.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case Lr.INTERNAL:return Dt.INTERNAL;case Lr.UNAVAILABLE:return Dt.UNAVAILABLE;case Lr.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case Lr.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case Lr.NOT_FOUND:return Dt.NOT_FOUND;case Lr.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case Lr.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case Lr.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case Lr.ABORTED:return Dt.ABORTED;case Lr.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case Lr.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case Lr.DATA_LOSS:return Dt.DATA_LOSS;default:return Xt()}}(Vr=Lr||(Lr={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class $c{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return nh}static getOrCreateInstance(){return null===nh&&(nh=new $c),nh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let nh=null;function A_(){return new TextEncoder}const rh=new pa([4294967295,4294967295],0);function sf(r){const e=A_().encode(r),t=new vl;return t.update(e),new Uint8Array(t.digest())}function Yg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new pa([t,s],0),new pa([a,d],0)]}class Ip{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Gc(`Invalid padding: ${t}`);if(s<0)throw new Gc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Gc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Gc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=pa.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(pa.fromNumber(s)));return 1===a.compare(rh)&&(a=new pa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=sf(e),[s,a]=Yg(t);for(let d=0;d<this.hashCount;d++){const m=this.Et(s,a,d);if(!this.At(m))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),m=new Ip(d,a,t);return s.forEach(R=>m.insert(R)),m}insert(e){if(0===this.It)return;const t=sf(e),[s,a]=Yg(t);for(let d=0;d<this.hashCount;d++){const m=this.Et(s,a,d);this.Rt(m)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ih{constructor(e,t,s,a,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,sh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ih(Gn.min(),a,new Pi(xr),Di(),pi())}}class sh{constructor(e,t,s,a,d){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new sh(s,t,pi(),pi(),pi())}}class Wc{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class Qg{constructor(e,t){this.targetId=e,this.Vt=t}}class Jg{constructor(e,t,s=Cs.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Xg{constructor(){this.St=0,this.Dt=tm(),this.Ct=Cs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=pi(),t=pi(),s=pi();return this.Dt.forEach((a,d)=>{switch(d){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Xt()}}),new sh(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=tm()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class R_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Di(),this.zt=em(),this.Wt=new Pi(xr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:Xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,d=this.se(s);if(d){const m=d.target;if(dn(m))if(0===a){const R=new fn(m.path);this.Yt(s,R,Ti.newNoDocument(R,Gn.min()))}else Gt(1===a);else{const R=this.ie(s);if(R!==a){const G=this.re(e,R);0!==G&&(this.ee(s),this.Wt=this.Wt.insert(s,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=$c.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(X,ge,Ue){var Et,$t,wn,Hn,qn,Wr;const Zi={localCacheCount:ge,existenceFilterCount:Ue.count},zr=Ue.unchangedNames;return zr&&(Zi.bloomFilter={applied:0===X,hashCount:null!==(Et=null==zr?void 0:zr.hashCount)&&void 0!==Et?Et:0,bitmapLength:null!==(Hn=null===(wn=null===($t=null==zr?void 0:zr.bits)||void 0===$t?void 0:$t.bitmap)||void 0===wn?void 0:wn.length)&&void 0!==Hn?Hn:0,padding:null!==(Wr=null===(qn=null==zr?void 0:zr.bits)||void 0===qn?void 0:qn.padding)&&void 0!==Wr?Wr:0}),Zi}(G,R,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:d="",padding:m=0},hashCount:R=0}=s;let G,X;try{G=Is(d).toUint8Array()}catch(ge){if(ge instanceof mu)return Ft("Decoding the base64 bloom filter in existence filter failed ("+ge.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ge}try{X=new Ip(G,m,R)}catch(ge){return Ft(ge instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",ge),1}return 0===X.It?1:a!==t-this.oe(e.targetId,X)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(d=>{const m=this.Gt.ue(),R=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.vt(R)||(this.Yt(e,d,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((d,m)=>{const R=this.se(m);if(R){if(d.current&&dn(R.target)){const G=new fn(R.target.path);null!==this.jt.get(G)||this.ae(m,G)||this.Yt(m,G,Ti.newNoDocument(G,e))}d.Mt&&(t.set(m,d.Ot()),d.Ft())}});let s=pi();this.zt.forEach((d,m)=>{let R=!0;m.forEachWhile(G=>{const X=this.se(G);return!X||"TargetPurposeLimboResolution"===X.purpose||(R=!1,!1)}),R&&(s=s.add(d))}),this.jt.forEach((d,m)=>m.setReadTime(e));const a=new ih(e,t,this.Wt,this.jt,s);return this.jt=Di(),this.zt=em(),this.Wt=new Pi(xr),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Xg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Xi(xr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Xg),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function em(){return new Pi(fn.comparator)}function tm(){return new Pi(fn.comparator)}const M_={asc:"ASCENDING",desc:"DESCENDING"},x_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nm={and:"AND",or:"OR"};class P_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cc(r,e){return r.useProto3Json||Uo(e)?e:{value:e}}function Il(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function lE(r,e){return Il(r,e.toTimestamp())}function jo(r){return Gt(!!r),Gn.fromTimestamp(function(e){const t=Bl(e);return new ws(t.seconds,t.nanos)}(r))}function rm(r,e){return(t=r,new ii(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tp(r){const e=ii.fromString(r);return Gt(lf(e)),e}function af(r,e){return rm(r.databaseId,e.path)}function xu(r,e){const t=Tp(e);if(t.get(1)!==r.databaseId.projectId)throw new jt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new jt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new fn(im(t))}function bp(r,e){return rm(r.databaseId,e)}function Dp(r){const e=Tp(r);return 4===e.length?ii.emptyPath():im(e)}function oh(r){return new ii(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function im(r){return Gt(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Eu(r,e,t){return{name:af(r,e),fields:t.value.mapValue.fields}}function sm(r,e,t){const s=xu(r,e.name),a=jo(e.updateTime),d=e.createTime?jo(e.createTime):Gn.min(),m=new Ii({mapValue:{fields:e.fields}}),R=Ti.newFoundDocument(s,a,d,m);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}function ah(r,e){let t;if(e instanceof v)t={update:Eu(r,e.key,e.value)};else if(e instanceof ke)t={delete:af(r,e.key)};else if(e instanceof S)t={update:Eu(r,e.key,e.data),updateMask:L_(e.fieldMask)};else{if(!(e instanceof Ye))return Xt();t={verify:af(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,d){const m=d.transform;if(m instanceof oc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Xl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ja)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof lc)return{fieldPath:d.field.canonicalString(),increment:m.gt};throw Xt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:lE(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Xt()),t;var a}function Sp(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Vs.updateTime(jo(a.updateTime)):void 0!==a.exists?Vs.exists(a.exists):Vs.none():Vs.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(d,m){let R=null;"setToServerValue"in m?(Gt("REQUEST_TIME"===m.setToServerValue),R=new oc):"appendMissingElements"in m?R=new Xl(m.appendMissingElements.values||[]):"removeAllFromArray"in m?R=new ja(m.removeAllFromArray.values||[]):"increment"in m?R=new lc(d,m.increment):Xt();const G=gs.fromServerFormat(m.fieldPath);return new _d(G,R)}(r,a)):[];var a;if(e.update){const a=xu(r,e.update.name),d=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new ji((e.updateMask.fieldPaths||[]).map(X=>gs.fromServerFormat(X)));return new S(a,d,m,t,s)}return new v(a,d,t,s)}if(e.delete){const a=xu(r,e.delete);return new ke(a,t)}if(e.verify){const a=xu(r,e.verify);return new Ye(a,t)}return Xt()}function Ap(r,e){return{documents:[bp(r,e.path)]}}function Rp(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=bp(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bp(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(G){if(0!==G.length)return Mp(qi.create(G,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const d=function(G){if(0!==G.length)return G.map(X=>{return{field:Pu((ge=X).field),direction:lm(ge.dir)};var ge})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Cc(r,e.limit);var R,G;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function am(r){let e=Dp(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Gt(1===s);const ge=t.from[0];ge.allDescendants?a=ge.collectionId:e=e.child(ge.collectionId)}let d=[];t.where&&(d=function(ge){const Ue=ui(ge);return Ue instanceof qi&&Hl(Ue)?Ue.getFilters():[Ue]}(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(ge=>{return new Bo(hl((Ue=ge).field),function(Et){switch(Et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ue.direction));var Ue}));let R=null;t.limit&&(R=function(ge){let Ue;return Ue="object"==typeof ge?ge.value:ge,Uo(Ue)?null:Ue}(t.limit));let G=null;var ge;t.startAt&&(G=new Xo((ge=t.startAt).values||[],!!ge.before));let X=null;return t.endAt&&(X=function(ge){return new Xo(ge.values||[],!ge.before)}(t.endAt)),Va(e,a,m,d,R,"F",G,X)}function ui(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hl(e.unaryFilter.field);return fi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=hl(e.unaryFilter.field);return fi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=hl(e.unaryFilter.field);return fi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=hl(e.unaryFilter.field);return fi.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Xt()}}(r):void 0!==r.fieldFilter?fi.create(hl((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return qi.create(e.compositeFilter.filters.map(t=>ui(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Xt()}}(e.compositeFilter.op))}(r):Xt();var e}function lm(r){return M_[r]}function um(r){return x_[r]}function cm(r){return nm[r]}function Pu(r){return{fieldPath:r.canonicalString()}}function hl(r){return gs.fromServerFormat(r.fieldPath)}function Mp(r){return r instanceof fi?function(e){if("=="===e.op){if(qe(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NAN"}};if(Ce(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qe(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NOT_NAN"}};if(Ce(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(e.field),op:um(e.op),value:e.value}}}(r):r instanceof qi?function(e){const t=e.getFilters().map(s=>Mp(s));return 1===t.length?t[0]:{compositeFilter:{op:cm(e.op),filters:t}}}(r):Xt()}function L_(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lf(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class tl{constructor(e,t,s,a,d=Gn.min(),m=Gn.min(),R=Cs.EMPTY_BYTE_STRING,G=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=R,this.expectedCount=G}withSequenceNumber(e){return new tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uf{constructor(e){this.fe=e}}function cf(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:af(a=r.fe,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Il(a,d.version.toTimestamp()),createTime:Il(a,d.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Ic(e.version)};else{if(!e.isUnknownDocument())return Xt();s.unknownDocument={path:t.path.toArray(),version:Ic(e.version)}}var a,d;return s}function xp(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ic(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vd(r){const e=new ws(r.seconds,r.nanoseconds);return Gn.fromTimestamp(e)}function ju(r,e){const t=(e.baseMutations||[]).map(d=>Sp(r.fe,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const s=e.mutations.map(d=>Sp(r.fe,d)),a=ws.fromMillis(e.localWriteTimeMs);return new Rt(e.batchId,a,t,s)}function Tc(r){const e=vd(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?vd(r.lastLimboFreeSnapshotVersion):Gn.min();let s;var a;return void 0!==r.query.documents?(Gt(1===(a=r.query).documents.length),s=Ls(zs(Dp(a.documents[0])))):s=Ls(am(r.query)),new tl(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Cs.fromBase64String(r.resumeToken))}function df(r,e){const t=Ic(e.snapshotVersion),s=Ic(e.lastLimboFreeSnapshotVersion);let a;a=dn(e.target)?Ap(r.fe,e.target):Rp(r.fe,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:et(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function lh(r){const e=am({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?vu(e,e.limit,"L"):e}function uh(r,e){return new tn(e.largestBatchId,Sp(r.fe,e.overlayMutation))}function V_(r,e){const t=e.path.lastSegment();return[r,us(e.path.popLast()),t]}function hm(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Ic(s.readTime),documentKey:us(s.documentKey.path),largestBatchId:s.largestBatchId}}class U_{getBundleMetadata(e,t){return fm(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:vd(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return fm(e).put({bundleId:(s=t).id,createTime:Ic(jo(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return pm(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:lh(a.bundledQuery),readTime:vd(a.readTime)};var a})}saveNamedQuery(e,t){return pm(e).put({name:(s=t).name,readTime:Ic(jo(s.readTime)),bundledQuery:s.bundledQuery});var s}}function fm(r){return is(r,"bundles")}function pm(r){return is(r,"namedQueries")}class ch{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new ch(e,t.uid||"")}getOverlay(e,t){return hf(e).get(V_(this.userId,t)).next(s=>s?uh(this.serializer,s):null)}getOverlays(e,t){const s=la();return pt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((d,m)=>{const R=new tn(t,m);a.push(this.we(e,R))}),pt.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(m=>a.add(us(m.getCollectionPath())));const d=[];return a.forEach(m=>{const R=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,s+1],!1,!0);d.push(hf(e).J("collectionPathOverlayIndex",R))}),pt.waitFor(d)}getOverlaysForCollection(e,t,s){const a=la(),d=us(t),m=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return hf(e).j("collectionPathOverlayIndex",m).next(R=>{for(const G of R){const X=uh(this.serializer,G);a.set(X.getKey(),X)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const d=la();let m;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hf(e).X({index:"collectionGroupOverlayIndex",range:R},(G,X,ge)=>{const Ue=uh(this.serializer,X);d.size()<a||Ue.largestBatchId===m?(d.set(Ue.getKey(),Ue),m=Ue.largestBatchId):ge.done()}).next(()=>d)}we(e,t){return hf(e).put(function(s,a,d){const[m,R,G]=V_(a,d.mutation.key);return{userId:a,collectionPath:R,documentId:G,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:ah(s.fe,d.mutation)}}(this.serializer,this.userId,t))}}function hf(r){return is(r,"documentOverlays")}class zc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(As(e.integerValue));else if("doubleValue"in e){const s=As(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),ya(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Is(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?En(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Xt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),fn.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function uE(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function Pp(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const d=uE(255&t[a]);if(s+=d,8!==d)break}return s}(r);return Math.ceil(e/8)}zc.Ve=new zc;class gm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Pp(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Pp(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,a,!1),new Uint8Array(d.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class B_{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Np{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class ff{constructor(){this.je=new gm,this.ze=new B_(this.je),this.We=new Np(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Ed{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ed(this.indexId,this.documentKey,this.arrayValue,s)}}function Kc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=j_(r.arrayValue,e.arrayValue),0!==t?t:(t=j_(r.directionalValue,e.directionalValue),0!==t?t:fn.comparator(r.documentKey,e.documentKey)))}function j_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class cE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){Gt(e.collectionGroup===this.collectionId);const t=Ma(e);if(void 0!==t&&!this.en(t))return!1;const s=Nl(e);let a=new Set,d=0,m=0;for(;d<s.length&&this.en(s[d]);++d)a=a.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const R=s[d];if(!this.nn(this.Ze,R)||!this.sn(this.Ye[m++],R))return!1}++d}for(;d<s.length;++d){const R=s[d];if(m>=this.Ye.length||!this.sn(this.Ye[m++],R))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function H_(r){var e,t;if(Gt(r instanceof fi||r instanceof qi),r instanceof fi){if(r instanceof g){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(d=>fi.create(r.field,"==",d)))||[];return qi.create(a,"or")}return r}const s=r.filters.map(a=>H_(a));return qi.create(s,r.op)}function dE(r){if(0===r.getFilters().length)return[];const e=Hu(H_(r));return Gt($_(e)),mm(e)||ym(e)?[e]:e.getFilters()}function mm(r){return r instanceof fi}function ym(r){return r instanceof qi&&Hl(r)}function $_(r){return mm(r)||ym(r)||function(e){if(e instanceof qi&&Mu(e)){for(const t of e.getFilters())if(!mm(t)&&!ym(t))return!1;return!0}return!1}(r)}function Hu(r){if(Gt(r instanceof fi||r instanceof qi),r instanceof fi)return r;if(1===r.filters.length)return Hu(r.filters[0]);const e=r.filters.map(s=>Hu(s));let t=qi.create(e,r.op);return t=hh(t),$_(t)?t:(Gt(t instanceof qi),Gt(el(t)),Gt(t.filters.length>1),t.filters.reduce((s,a)=>dh(s,a)))}function dh(r,e){let t;return Gt(r instanceof fi||r instanceof qi),Gt(e instanceof fi||e instanceof qi),t=r instanceof fi?e instanceof fi?qi.create([r,e],"and"):_m(r,e):e instanceof fi?_m(e,r):function(s,a){if(Gt(s.filters.length>0&&a.filters.length>0),el(s)&&el(a))return C(s,a.getFilters());const d=Mu(s)?s:a,m=Mu(s)?a:s,R=d.filters.map(G=>dh(G,m));return qi.create(R,"or")}(r,e),hh(t)}function _m(r,e){if(el(e))return C(e,r.getFilters());{const t=e.filters.map(s=>dh(r,s));return qi.create(t,"or")}}function hh(r){if(Gt(r instanceof fi||r instanceof qi),r instanceof fi)return r;const e=r.getFilters();if(1===e.length)return hh(e[0]);if(ic(r))return r;const t=e.map(a=>hh(a)),s=[];return t.forEach(a=>{a instanceof fi?s.push(a):a instanceof qi&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:qi.create(s,r.op)}class Op{constructor(){this.rn=new pf}addToCollectionParentIndex(e,t){return this.rn.add(t),pt.resolve()}getCollectionParents(e,t){return pt.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return pt.resolve()}deleteFieldIndex(e,t){return pt.resolve()}getDocumentsMatchingTarget(e,t){return pt.resolve(null)}getIndexType(e,t){return pt.resolve(0)}getFieldIndexes(e,t){return pt.resolve([])}getNextCollectionGroupToUpdate(e){return pt.resolve(null)}getMinOffset(e,t){return pt.resolve(To.min())}getMinOffsetFromCollectionGroup(e,t){return pt.resolve(To.min())}updateCollectionGroup(e,t,s){return pt.resolve()}updateIndexEntries(e,t){return pt.resolve()}}class pf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Xi(ii.comparator),d=!a.has(s);return this.index[t]=a.add(s),d}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Xi(ii.comparator)).toArray()}}const wd=new Uint8Array(0);class G_{constructor(e,t){this.user=e,this.databaseId=t,this.on=new pf,this.un=new so(s=>et(s),(s,a)=>Vt(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const d={collectionId:s,parent:us(a)};return cc(e).put(d)}return pt.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[tc(t),""],!1,!0);return cc(e).j(a).next(d=>{for(const m of d){if(m.collectionId!==t)break;s.push($s(m.parent))}return s})}addFieldIndex(e,t){const s=gf(e),a={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var m;delete a.indexId;const d=s.add(a);if(t.indexState){const m=qc(e);return d.next(R=>{m.put(hm(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const s=gf(e),a=qc(e),d=Cd(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Cd(e);let a=!0;const d=new Map;return pt.forEach(this.cn(t),m=>this.an(e,m).next(R=>{a&&(a=!!R),d.set(m,R)})).next(()=>{if(a){let m=pi();const R=[];return pt.forEach(d,(G,X)=>{var ge;fe("IndexedDbIndexManager",`Using index ${ge=G,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(zr=>`${zr.fieldPath}:${zr.kind}`).join(",")}`} to execute ${et(t)}`);const Ue=function(zr,$o){const Ks=Ma($o);if(void 0===Ks)return null;for(const qs of Mn(zr,Ks.fieldPath))switch(qs.op){case"array-contains-any":return qs.value.arrayValue.values||[];case"array-contains":return[qs.value]}return null}(X,G),Et=function(zr,$o){const Ks=new Map;for(const qs of Nl($o))for(const Sl of Mn(zr,qs.fieldPath))switch(Sl.op){case"==":case"in":Ks.set(qs.fieldPath.canonicalString(),Sl.value);break;case"not-in":case"!=":return Ks.set(qs.fieldPath.canonicalString(),Sl.value),Array.from(Ks.values())}return null}(X,G),$t=function(zr,$o){const Ks=[];let qs=!0;for(const Sl of Nl($o)){const Vc=0===Sl.kind?kn(zr,Sl.fieldPath,zr.startAt):Mr(zr,Sl.fieldPath,zr.startAt);Ks.push(Vc.value),qs&&(qs=Vc.inclusive)}return new Xo(Ks,qs)}(X,G),wn=function(zr,$o){const Ks=[];let qs=!0;for(const Sl of Nl($o)){const Vc=0===Sl.kind?Mr(zr,Sl.fieldPath,zr.endAt):kn(zr,Sl.fieldPath,zr.endAt);Ks.push(Vc.value),qs&&(qs=Vc.inclusive)}return new Xo(Ks,qs)}(X,G),Hn=this.hn(G,X,$t),qn=this.hn(G,X,wn),Wr=this.ln(G,X,Et),Zi=this.fn(G.indexId,Ue,Hn,$t.inclusive,qn,wn.inclusive,Wr);return pt.forEach(Zi,zr=>s.H(zr,t.limit).next($o=>{$o.forEach(Ks=>{const qs=fn.fromSegments(Ks.documentKey);m.has(qs)||(m=m.add(qs),R.push(qs))})}))}).next(()=>R)}return pt.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:dE(qi.create(e.filters,"and")).map(s=>$e(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,d,m,R){const G=(null!=t?t.length:1)*Math.max(s.length,d.length),X=G/(null!=t?t.length:1),ge=[];for(let Ue=0;Ue<G;++Ue){const Et=t?this.dn(t[Ue/X]):wd,$t=this.wn(e,Et,s[Ue%X],a),wn=this._n(e,Et,d[Ue%X],m),Hn=R.map(qn=>this.wn(e,Et,qn,!0));ge.push(...this.createRange($t,wn,Hn))}return ge}wn(e,t,s,a){const d=new Ed(e,fn.empty(),t,s);return a?d:d.Je()}_n(e,t,s,a){const d=new Ed(e,fn.empty(),t,s);return a?d.Je():d}an(e,t){const s=new cE(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(d=>{let m=null;for(const R of d)s.tn(R)&&(!m||R.fields.length>m.fields.length)&&(m=R);return m})}getIndexType(e,t){let s=2;const a=this.cn(t);return pt.forEach(a,d=>this.an(e,d).next(m=>{m?0!==s&&m.fields.length<function(R){let G=new Xi(gs.comparator),X=!1;for(const ge of R.filters)for(const Ue of ge.getFlattenedFilters())Ue.field.isKeyField()||("array-contains"===Ue.op||"array-contains-any"===Ue.op?X=!0:G=G.add(Ue.field));for(const ge of R.orderBy)ge.field.isKeyField()||(G=G.add(ge.field));return G.size+(X?1:0)}(d)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new ff;for(const a of Nl(e)){const d=t.data.field(a.fieldPath);if(null==d)return null;const m=s.He(a.kind);zc.Ve._e(d,m)}return s.Qe()}dn(e){const t=new ff;return zc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new ff;return zc.Ve._e(A(this.databaseId,t),s.He(function(a){const d=Nl(a);return 0===d.length?0:d[d.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new ff);let d=0;for(const m of Nl(e)){const R=s[d++];for(const G of a)if(this.yn(t,m.fieldPath)&&te(R))a=this.pn(a,m,R);else{const X=G.He(m.kind);zc.Ve._e(R,X)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],d=[];for(const m of s.arrayValue.values||[])for(const R of a){const G=new ff;G.seed(R.Qe()),zc.Ve._e(m,G.He(t.kind)),d.push(G)}return d}yn(e,t){return!!e.filters.find(s=>s instanceof fi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=gf(e),a=qc(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(d=>{const m=[];return pt.forEach(d,R=>a.get([R.indexId,this.uid]).next(G=>{m.push(function(X,ge){const Ue=ge?new zl(ge.sequenceNumber,new To(vd(ge.readTime),new fn($s(ge.documentKey)),ge.largestBatchId)):zl.empty(),Et=X.fields.map(([$t,wn])=>new ks(gs.fromServerFormat($t),wn));return new Ra(X.indexId,X.collectionGroup,Et,Ue)}(R,G))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const d=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==d?d:xr(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=gf(e),d=qc(e);return this.Tn(e).next(m=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>pt.forEach(R,G=>d.put(hm(G.indexId,this.user,m,s)))))}updateIndexEntries(e,t){const s=new Map;return pt.forEach(t,(a,d)=>{const m=s.get(a.collectionGroup);return(m?pt.resolve(m):this.getFieldIndexes(e,a.collectionGroup)).next(R=>(s.set(a.collectionGroup,R),pt.forEach(R,G=>this.En(e,a,G).next(X=>{const ge=this.An(d,G);return X.isEqual(ge)?pt.resolve():this.vn(e,d,G,X,ge)}))))})}Rn(e,t,s,a){return Cd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Cd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Cd(e);let d=new Xi(Kc);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(m,R)=>{d=d.add(new Ed(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>d)}An(e,t){let s=new Xi(Kc);const a=this.mn(t,e);if(null==a)return s;const d=Ma(t);if(null!=d){const m=e.data.field(d.fieldPath);if(te(m))for(const R of m.arrayValue.values||[])s=s.add(new Ed(t.indexId,e.key,this.dn(R),a))}else s=s.add(new Ed(t.indexId,e.key,wd,a));return s}vn(e,t,s,a,d){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(R,G,X,ge,Ue){const Et=R.getIterator(),$t=G.getIterator();let wn=La(Et),Hn=La($t);for(;wn||Hn;){let qn=!1,Wr=!1;if(wn&&Hn){const Zi=X(wn,Hn);Zi<0?Wr=!0:Zi>0&&(qn=!0)}else null!=wn?Wr=!0:qn=!0;qn?(ge(Hn),Hn=La($t)):Wr?(Ue(wn),wn=La(Et)):(wn=La(Et),Hn=La($t))}}(a,d,Kc,R=>{m.push(this.Rn(e,t,s,R))},R=>{m.push(this.Pn(e,t,s,R))}),pt.waitFor(m)}Tn(e){let t=1;return qc(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,d)=>{d.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((m,R)=>Kc(m,R)).filter((m,R,G)=>!R||0!==Kc(m,G[R-1]));const a=[];a.push(e);for(const m of s){const R=Kc(m,e),G=Kc(m,t);if(0===R)a[0]=e.Je();else if(R>0&&G<0)a.push(m),a.push(m.Je());else if(G>0)break}a.push(t);const d=[];for(let m=0;m<a.length;m+=2){if(this.bn(a[m],a[m+1]))return[];d.push(IDBKeyRange.bound([a[m].indexId,this.uid,a[m].arrayValue,a[m].directionalValue,wd,[]],[a[m+1].indexId,this.uid,a[m+1].arrayValue,a[m+1].directionalValue,wd,[]]))}return d}bn(e,t){return Kc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vm)}getMinOffset(e,t){return pt.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||Xt())).next(vm)}}function cc(r){return is(r,"collectionParents")}function Cd(r){return is(r,"indexEntries")}function gf(r){return is(r,"indexConfiguration")}function qc(r){return is(r,"indexState")}function vm(r){Gt(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;bu(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new To(e.readTime,e.documentKey,t)}const kp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fl{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new fl(e,fl.DEFAULT_COLLECTION_PERCENTILE,fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Em(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let R=0;const G=s.X({range:m},(ge,Ue,Et)=>(R++,Et.delete()));d.push(G.next(()=>{Gt(1===R)}));const X=[];for(const ge of t.mutations){const Ue=Qa(e,ge.key.path,t.batchId);d.push(a.delete(Ue)),X.push(ge.key)}return pt.waitFor(d).next(()=>X)}function bc(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Xt();e=r.noDocument}return JSON.stringify(e).length}fl.DEFAULT_COLLECTION_PERCENTILE=10,fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fl.DEFAULT=new fl(41943040,fl.DEFAULT_COLLECTION_PERCENTILE,fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fl.DISABLED=new fl(-1,0,0);class dc{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){Gt(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new dc(d,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eu(e).X({index:"userMutationsIndex",range:s},(a,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const d=$u(e),m=eu(e);return m.add({}).next(R=>{Gt("number"==typeof R);const G=new Rt(R,t,s,a),X=function(Et,$t,wn){const Hn=wn.baseMutations.map(Wr=>ah(Et.fe,Wr)),qn=wn.mutations.map(Wr=>ah(Et.fe,Wr));return{userId:$t,batchId:wn.batchId,localWriteTimeMs:wn.localWriteTime.toMillis(),baseMutations:Hn,mutations:qn}}(this.serializer,this.userId,G),ge=[];let Ue=new Xi((Et,$t)=>xr(Et.canonicalString(),$t.canonicalString()));for(const Et of a){const $t=Qa(this.userId,Et.key.path,R);Ue=Ue.add(Et.key.path.popLast()),ge.push(m.put(X)),ge.push(d.put($t,lu))}return Ue.forEach(Et=>{ge.push(this.indexManager.addToCollectionParentIndex(e,Et))}),e.addOnCommittedListener(()=>{this.Vn[R]=G.keys()}),pt.waitFor(ge).next(()=>G)})}lookupMutationBatch(e,t){return eu(e).get(t).next(s=>s?(Gt(s.userId===this.userId),ju(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?pt.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return eu(e).X({index:"userMutationsIndex",range:a},(m,R,G)=>{R.userId===this.userId&&(Gt(R.batchId>=s),d=ju(this.serializer,R)),G.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return eu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,d,m)=>{s=d.batchId,m.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eu(e).j("userMutationsIndex",t).next(s=>s.map(a=>ju(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=au(this.userId,t.path),a=IDBKeyRange.lowerBound(s),d=[];return $u(e).X({range:a},(m,R,G)=>{const[X,ge,Ue]=m,Et=$s(ge);if(X===this.userId&&t.path.isEqual(Et))return eu(e).get(Ue).next($t=>{if(!$t)throw Xt();Gt($t.userId===this.userId),d.push(ju(this.serializer,$t))});G.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Xi(xr);const a=[];return t.forEach(d=>{const m=au(this.userId,d.path),R=IDBKeyRange.lowerBound(m),G=$u(e).X({range:R},(X,ge,Ue)=>{const[Et,$t,wn]=X,Hn=$s($t);Et===this.userId&&d.path.isEqual(Hn)?s=s.add(wn):Ue.done()});a.push(G)}),pt.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,d=au(this.userId,s),m=IDBKeyRange.lowerBound(d);let R=new Xi(xr);return $u(e).X({range:m},(G,X,ge)=>{const[Ue,Et,$t]=G,wn=$s(Et);Ue===this.userId&&s.isPrefixOf(wn)?wn.length===a&&(R=R.add($t)):ge.done()}).next(()=>this.Dn(e,R))}Dn(e,t){const s=[],a=[];return t.forEach(d=>{a.push(eu(e).get(d).next(m=>{if(null===m)throw Xt();Gt(m.userId===this.userId),s.push(ju(this.serializer,m))}))}),pt.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Em(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),pt.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return $u(e).X({range:s},(d,m,R)=>{if(d[0]===this.userId){const G=$s(d[1]);a.push(G)}else R.done()}).next(()=>{Gt(0===a.length)})})}containsKey(e,t){return mf(e,this.userId,t)}xn(e){return Zc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mf(r,e,t){const s=au(e,t.path),a=s[1],d=IDBKeyRange.lowerBound(s);let m=!1;return $u(r).X({range:d,Y:!0},(R,G,X)=>{const[ge,Ue,Et]=R;ge===e&&Ue===a&&(m=!0),X.done()}).next(()=>m)}function eu(r){return is(r,"mutations")}function $u(r){return is(r,"documentMutations")}function Zc(r){return is(r,"mutationQueues")}class Yc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yc(0)}static Mn(){return new Yc(-1)}}class wm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Yc(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Gn.fromTimestamp(new ws(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(Gt(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const d=[];return Qc(e).X((m,R)=>{const G=Tc(R);G.sequenceNumber<=t&&null===s.get(G.targetId)&&(a++,d.push(this.removeTargetData(e,G)))}).next(()=>pt.waitFor(d)).next(()=>a)}forEachTarget(e,t){return Qc(e).X((s,a)=>{const d=Tc(a);t(d)})}$n(e){return yf(e).get("targetGlobalKey").next(t=>(Gt(null!==t),t))}On(e,t){return yf(e).put("targetGlobalKey",t)}Fn(e,t){return Qc(e).put(df(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=et(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Qc(e).X({range:a,index:"queryTargetsIndex"},(m,R,G)=>{const X=Tc(R);Vt(t,X.target)&&(d=X,G.done())}).next(()=>d)}addMatchingKeys(e,t,s){const a=[],d=Gu(e);return t.forEach(m=>{const R=us(m.path);a.push(d.put({targetId:s,path:R})),a.push(this.referenceDelegate.addReference(e,s,m))}),pt.waitFor(a)}removeMatchingKeys(e,t,s){const a=Gu(e);return pt.forEach(t,d=>{const m=us(d.path);return pt.waitFor([a.delete([s,m]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,t){const s=Gu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Gu(e);let d=pi();return a.X({range:s,Y:!0},(m,R,G)=>{const X=$s(m[1]),ge=new fn(X);d=d.add(ge)}).next(()=>d)}containsKey(e,t){const s=us(t.path),a=IDBKeyRange.bound([s],[tc(s)],!1,!0);let d=0;return Gu(e).X({index:"documentTargetsIndex",Y:!0,range:a},([m,R],G,X)=>{0!==m&&(d++,X.done())}).next(()=>d>0)}le(e,t){return Qc(e).get(t).next(s=>s?Tc(s):null)}}function Qc(r){return is(r,"targets")}function yf(r){return is(r,"targetGlobal")}function Gu(r){return is(r,"targetDocuments")}function Fp([r,e],[t,s]){const a=xr(r,t);return 0===a?xr(e,s):a}class _f{constructor(e){this.Ln=e,this.buffer=new Xi(Fp),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Fp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cm{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ke.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Qo(s)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ol(s)}yield t.Qn(3e5)}))}}class Im{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return pt.resolve(po.ct);const s=new _f(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),pt.resolve(kp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kp):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,d,m,R,G,X;const ge=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ue=>(Ue>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ue}`),a=this.params.maximumSequenceNumbersToCollect):a=Ue,m=Date.now(),this.nthSequenceNumber(e,a))).next(Ue=>(s=Ue,R=Date.now(),this.removeTargets(e,s,t))).next(Ue=>(d=Ue,G=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ue=>(X=Date.now(),J()<=xe.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-ge}ms\n\tDetermined least recently used ${a} in `+(R-m)+`ms\n\tRemoved ${d} targets in `+(G-R)+`ms\n\tRemoved ${Ue} documents in `+(X-G)+`ms\nTotal Duration: ${X-ge}ms`),pt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:d,documentsRemoved:Ue})))}}class Tm{constructor(e,t){this.db=e,this.garbageCollector=function W_(r,e){return new Im(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return fh(e,s)}removeReference(e,t,s){return fh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return fh(e,t)}Xn(e,t){return function(s,a){let d=!1;return Zc(s).Z(m=>mf(s,m,a).next(R=>(R&&(d=!0),pt.resolve(!R)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let d=0;return this.Yn(e,(m,R)=>{if(R<=t){const G=this.Xn(e,m).next(X=>{if(!X)return d++,s.getEntry(e,m).next(()=>(s.removeEntry(m,Gn.min()),Gu(e).delete([0,us(m.path)])))});a.push(G)}}).next(()=>pt.waitFor(a)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return fh(e,t)}Yn(e,t){const s=Gu(e);let a,d=po.ct;return s.X({index:"documentTargetsIndex"},([m,R],{path:G,sequenceNumber:X})=>{0===m?(d!==po.ct&&t(new fn($s(a)),d),d=X,a=G):d=po.ct}).next(()=>{d!==po.ct&&t(new fn($s(a)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fh(r,e){return Gu(r).put((s=r.currentSequenceNumber,{targetId:0,path:us(e.path),sequenceNumber:s}));var s}class bm{constructor(){this.changes=new so(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?pt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Dm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Jc(e).put(s)}removeEntry(e,t,s){return Jc(e).delete(function(a,d){const m=a.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],xp(d),m[m.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Ti.newInvalidDocument(t);return Jc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ph(t))},(a,d)=>{s=this.ts(t,d)}).next(()=>s)}es(e,t){let s={size:0,document:Ti.newInvalidDocument(t)};return Jc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ph(t))},(a,d)=>{s={document:this.ts(t,d),size:bc(d)}}).next(()=>s)}getEntries(e,t){let s=Di();return this.ns(e,t,(a,d)=>{const m=this.ts(a,d);s=s.insert(a,m)}).next(()=>s)}ss(e,t){let s=Di(),a=new Pi(fn.comparator);return this.ns(e,t,(d,m)=>{const R=this.ts(d,m);s=s.insert(d,R),a=a.insert(d,bc(m))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return pt.resolve();let a=new Xi(q_);t.forEach(G=>a=a.add(G));const d=IDBKeyRange.bound(ph(a.first()),ph(a.last())),m=a.getIterator();let R=m.getNext();return Jc(e).X({index:"documentKeyIndex",range:d},(G,X,ge)=>{const Ue=fn.fromSegments([...X.prefixPath,X.collectionGroup,X.documentId]);for(;R&&q_(R,Ue)<0;)s(R,null),R=m.getNext();R&&R.isEqual(Ue)&&(s(R,X),R=m.hasNext()?m.getNext():null),R?ge.G(ph(R)):ge.done()}).next(()=>{for(;R;)s(R,null),R=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const d=t.path,m=[d.popLast().toArray(),d.lastSegment(),xp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],R=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jc(e).j(IDBKeyRange.bound(m,R,!0)).next(G=>{let X=Di();for(const ge of G){const Ue=this.ts(fn.fromSegments(ge.prefixPath.concat(ge.collectionGroup,ge.documentId)),ge);Ue.isFoundDocument()&&(Tr(t,Ue)||a.has(Ue.key))&&(X=X.insert(Ue.key,Ue))}return X})}getAllFromCollectionGroup(e,t,s,a){let d=Di();const m=K_(t,s),R=K_(t,To.max());return Jc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,R,!0)},(G,X,ge)=>{const Ue=this.ts(fn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);d=d.insert(Ue.key,Ue),d.size===a&&ge.done()}).next(()=>d)}newChangeBuffer(e){return new z_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $l(e).get("remoteDocumentGlobalKey").next(t=>(Gt(!!t),t))}Zn(e,t){return $l(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function dm(r,e){let t;if(e.document)t=sm(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=fn.fromSegments(e.noDocument.path),a=vd(e.noDocument.readTime);t=Ti.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xt();{const s=fn.fromSegments(e.unknownDocument.path),a=vd(e.unknownDocument.version);t=Ti.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new ws(s[0],s[1]);return Gn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Gn.min()))return s}return Ti.newInvalidDocument(e)}}function Sm(r){return new Dm(r)}class z_ extends bm{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new so(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Xi((d,m)=>xr(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const R=this.us.get(d);if(t.push(this.os.removeEntry(e,d,R.readTime)),m.isValidDocument()){const G=cf(this.os.serializer,m);a=a.add(d.path.popLast()),s+=bc(G)-R.size,t.push(this.os.addEntry(e,d,G))}else if(s-=R.size,this.trackRemovals){const G=cf(this.os.serializer,m.convertToNoDocument(Gn.min()));t.push(this.os.addEntry(e,d,G))}}),a.forEach(d=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.os.updateMetadata(e,s)),pt.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((d,m)=>{this.us.set(d,{size:m,readTime:s.get(d).readTime})}),s))}}function $l(r){return is(r,"remoteDocumentGlobal")}function Jc(r){return is(r,"remoteDocumentsV14")}function ph(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function K_(r,e){const t=e.documentKey.path.toArray();return[r,xp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function q_(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let d=0;d<t.length-2&&d<s.length-2;++d)if(a=xr(t[d],s[d]),a)return a;return a=xr(t.length,s.length),a||(a=xr(t[t.length-2],s[s.length-2]),a||xr(t[t.length-1],s[s.length-1]))}class Am{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Z_{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&p(s.mutation,a,ji.empty(),ws.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,pi()).next(()=>s))}getLocalViewOfDocuments(e,t,s=pi()){const a=la();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(d=>{let m=sc();return d.forEach((R,G)=>{m=m.insert(R,G.overlayedDocument)}),m}))}getOverlayedDocuments(e,t){const s=la();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,pi()))}populateOverlays(e,t,s){const a=[];return s.forEach(d=>{t.has(d)||a.push(d)}),this.documentOverlayCache.getOverlays(e,a).next(d=>{d.forEach((m,R)=>{t.set(m,R)})})}computeViews(e,t,s,a){let d=Di();const m=ua(),R=ua();return t.forEach((G,X)=>{const ge=s.get(X.key);a.has(X.key)&&(void 0===ge||ge.mutation instanceof S)?d=d.insert(X.key,X):void 0!==ge?(m.set(X.key,ge.mutation.getFieldMask()),p(ge.mutation,X,ge.mutation.getFieldMask(),ws.now())):m.set(X.key,ji.empty())}),this.recalculateAndSaveOverlays(e,d).next(G=>(G.forEach((X,ge)=>m.set(X,ge)),t.forEach((X,ge)=>{var Ue;return R.set(X,new Am(ge,null!==(Ue=m.get(X))&&void 0!==Ue?Ue:null))}),R))}recalculateAndSaveOverlays(e,t){const s=ua();let a=new Pi((m,R)=>m-R),d=pi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(m=>{for(const R of m)R.keys().forEach(G=>{const X=t.get(G);if(null===X)return;let ge=s.get(G)||ji.empty();ge=R.applyToLocalView(X,ge),s.set(G,ge);const Ue=(a.get(R.batchId)||pi()).add(G);a=a.insert(R.batchId,Ue)})}).next(()=>{const m=[],R=a.getReverseIterator();for(;R.hasNext();){const G=R.getNext(),X=G.key,ge=G.value,Ue=ea();ge.forEach(Et=>{if(!d.has(Et)){const $t=Zg(t.get(Et),s.get(Et));null!==$t&&Ue.set(Et,$t),d=d.add(Et)}}),m.push(this.documentOverlayCache.saveOverlays(e,X,Ue))}return pt.waitFor(m)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return fn.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ms(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(d=>{const m=a-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-d.size):pt.resolve(la());let R=-1,G=d;return m.next(X=>pt.forEach(X,(ge,Ue)=>(R<Ue.largestBatchId&&(R=Ue.largestBatchId),d.get(ge)?pt.resolve():this.remoteDocumentCache.getEntry(e,ge).next(Et=>{G=G.insert(ge,Et)}))).next(()=>this.populateOverlays(e,X,d)).next(()=>this.computeViews(e,G,X,pi())).next(ge=>({batchId:R,changes:aa(ge)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fn(t)).next(s=>{let a=sc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let d=sc();return this.indexManager.getCollectionParents(e,a).next(m=>pt.forEach(m,R=>{const G=(X=t,ge=R.child(a),new li(ge,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,ge;return this.getDocumentsMatchingCollectionQuery(e,G,s).next(X=>{X.forEach((ge,Ue)=>{d=d.insert(ge,Ue)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(a=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(d=>{a.forEach((R,G)=>{const X=G.getKey();null===d.get(X)&&(d=d.insert(X,Ti.newInvalidDocument(X)))});let m=sc();return d.forEach((R,G)=>{const X=a.get(R);void 0!==X&&p(X.mutation,G,ji.empty(),ws.now()),Tr(t,G)&&(m=m.insert(R,G))}),m})}}class Y_{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return pt.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:jo(s.createTime)}),pt.resolve()}getNamedQuery(e,t){return pt.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:lh(s.bundledQuery),readTime:jo(s.readTime)}),pt.resolve();var s}}class Lp{constructor(){this.overlays=new Pi(fn.comparator),this.ls=new Map}getOverlay(e,t){return pt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=la();return pt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,d)=>{this.we(e,t,d)}),pt.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(d=>this.overlays=this.overlays.remove(d)),this.ls.delete(s)),pt.resolve()}getOverlaysForCollection(e,t,s){const a=la(),d=t.length+1,m=new fn(t.child("")),R=this.overlays.getIteratorFrom(m);for(;R.hasNext();){const G=R.getNext().value,X=G.getKey();if(!t.isPrefixOf(X.path))break;X.path.length===d&&G.largestBatchId>s&&a.set(G.getKey(),G)}return pt.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let d=new Pi((X,ge)=>X-ge);const m=this.overlays.getIterator();for(;m.hasNext();){const X=m.getNext().value;if(X.getKey().getCollectionGroup()===t&&X.largestBatchId>s){let ge=d.get(X.largestBatchId);null===ge&&(ge=la(),d=d.insert(X.largestBatchId,ge)),ge.set(X.getKey(),X)}}const R=la(),G=d.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((X,ge)=>R.set(X,ge)),!(R.size()>=a)););return pt.resolve(R)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const m=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new tn(t,s));let d=this.ls.get(t);void 0===d&&(d=pi(),this.ls.set(t,d)),this.ls.set(t,d.add(s.key))}}class vf{constructor(){this.fs=new Xi(Ha.ds),this.ws=new Xi(Ha._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Ha(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Ha(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new fn(new ii([])),s=new Ha(t,e),a=new Ha(t,e+1),d=[];return this.ws.forEachInRange([s,a],m=>{this.ys(m),d.push(m.key)}),d}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new fn(new ii([])),s=new Ha(t,e),a=new Ha(t,e+1);let d=pi();return this.ws.forEachInRange([s,a],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new Ha(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ha{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return fn.comparator(e.key,t.key)||xr(e.As,t.As)}static _s(e,t){return xr(e.As,t.As)||fn.comparator(e.key,t.key)}}class Q_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Xi(Ha.ds)}checkEmpty(e){return pt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const d=this.vs;this.vs++;const m=new Rt(d,t,s,a);this.mutationQueue.push(m);for(const R of a)this.Rs=this.Rs.add(new Ha(R.key,d)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return pt.resolve(m)}lookupMutationBatch(e,t){return pt.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),d=a<0?0:a;return pt.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return pt.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ha(t,0),a=new Ha(t,Number.POSITIVE_INFINITY),d=[];return this.Rs.forEachInRange([s,a],m=>{const R=this.Ps(m.As);d.push(R)}),pt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Xi(xr);return t.forEach(a=>{const d=new Ha(a,0),m=new Ha(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([d,m],R=>{s=s.add(R.As)})}),pt.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let d=s;fn.isDocumentKey(d)||(d=d.child(""));const m=new Ha(new fn(d),0);let R=new Xi(xr);return this.Rs.forEachWhile(G=>{const X=G.key.path;return!!s.isPrefixOf(X)&&(X.length===a&&(R=R.add(G.As)),!0)},m),pt.resolve(this.Vs(R))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Gt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return pt.forEach(t.mutations,a=>{const d=new Ha(a.key,t.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Ha(t,0),a=this.Rs.firstAfterOrEqual(s);return pt.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return pt.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class J_{constructor(e){this.Ds=e,this.docs=new Pi(fn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),d=a?a.size:0,m=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return pt.resolve(s?s.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let s=Di();return t.forEach(a=>{const d=this.docs.get(a);s=s.insert(a,d?d.document.mutableCopy():Ti.newInvalidDocument(a))}),pt.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let d=Di();const m=t.path,R=new fn(m.child("")),G=this.docs.getIteratorFrom(R);for(;G.hasNext();){const{key:X,value:{document:ge}}=G.getNext();if(!m.isPrefixOf(X.path))break;X.path.length>m.length+1||bu(sl(ge),s)<=0||(a.has(ge.key)||Tr(t,ge))&&(d=d.insert(ge.key,ge.mutableCopy()))}return pt.resolve(d)}getAllFromCollectionGroup(e,t,s,a){Xt()}Cs(e,t){return pt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Rm(this)}getSize(e){return pt.resolve(this.size)}}class Rm extends bm{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),pt.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class X_{constructor(e){this.persistence=e,this.xs=new so(t=>et(t),Vt),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new vf,this.targetCount=0,this.Ms=Yc.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),pt.resolve()}getLastRemoteSnapshotVersion(e){return pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pt.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),pt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),pt.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,pt.resolve()}updateTargetData(e,t){return this.Fn(t),pt.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,pt.resolve()}removeTargets(e,t,s){let a=0;const d=[];return this.xs.forEach((m,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.xs.delete(m),d.push(this.removeMatchingKeysForTargetId(e,R.targetId)),a++)}),pt.waitFor(d).next(()=>a)}getTargetCount(e){return pt.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return pt.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),pt.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,d=[];return a&&t.forEach(m=>{d.push(a.markPotentiallyOrphaned(e,m))}),pt.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),pt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return pt.resolve(s)}containsKey(e,t){return pt.resolve(this.ks.containsKey(t))}}class Ef{constructor(e,t){this.$s={},this.overlays={},this.Os=new po(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new X_(this),this.indexManager=new Op,this.remoteDocumentCache=new J_(s=>this.referenceDelegate.Ls(s)),this.serializer=new uf(t),this.qs=new Y_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Q_(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const a=new ev(this.Os.next());return this.referenceDelegate.Us(),s(a).next(d=>this.referenceDelegate.Ks(a).next(()=>d)).toPromise().then(d=>(a.raiseOnCommittedEvent(),d))}Gs(e,t){return pt.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class ev extends Du{constructor(e){super(),this.currentSequenceNumber=e}}class wf{constructor(e){this.persistence=e,this.Qs=new vf,this.js=null}static zs(e){return new wf(e)}get Ws(){if(this.js)return this.js;throw Xt()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),pt.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),pt.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),pt.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(d=>this.Ws.add(d.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pt.forEach(this.Ws,s=>{const a=fn.fromPath(s);return this.Hs(e,a).next(d=>{d||t.removeEntry(a,Gn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return pt.or([()=>pt.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Mm{constructor(e){this.serializer=e}O(e,t,s,a){const d=new al("createOrUpgrade",t);var R;s<1&&a>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ll,{unique:!0}),R.createObjectStore("documentMutations"),xm(e),function(R){R.createObjectStore("remoteDocuments")}(e));let m=pt.resolve();return s<3&&a>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),xm(e)),m=m.next(()=>function(R){const G=R.store("targetGlobal"),X={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",X)}(d))),s<4&&a>=4&&(0!==s&&(m=m.next(()=>function(R,G){return G.store("mutations").j().next(X=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ll,{unique:!0});const ge=G.store("mutations"),Ue=X.map(Et=>ge.put(Et));return pt.waitFor(Ue)})}(e,d))),m=m.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(m=m.next(()=>this.Ys(d))),s<6&&a>=6&&(m=m.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(d)))),s<7&&a>=7&&(m=m.next(()=>this.Zs(d))),s<8&&a>=8&&(m=m.next(()=>this.ti(e,d))),s<9&&a>=9&&(m=m.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(m=m.next(()=>this.ei(d))),s<11&&a>=11&&(m=m.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(m=m.next(()=>{!function(R){const G=R.createObjectStore("documentOverlays",{keyPath:Vu});G.createIndex("collectionPathOverlayIndex",Ll,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",fu,{unique:!1})}(e)})),s<13&&a>=13&&(m=m.next(()=>function(R){const G=R.createObjectStore("remoteDocumentsV14",{keyPath:El});G.createIndex("documentKeyIndex",Fs),G.createIndex("collectionGroupIndex",Fu)}(e)).next(()=>this.ni(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(m=m.next(()=>this.si(e,d))),s<15&&a>=15&&(m=m.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:Zl}).createIndex("sequenceNumberIndex",Su,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:Lu}).createIndex("documentKeyIndex",hu,{unique:!1})}(e))),m}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=bc(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>pt.forEach(a,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",m).next(R=>pt.forEach(R,G=>{Gt(G.userId===d.userId);const X=ju(this.serializer,G);return Em(e,d.userId,X).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const d=[];return s.X((m,R)=>{const G=new ii(m),X=[0,us(G)];d.push(t.get(X).next(ge=>ge?pt.resolve():t.put({targetId:0,path:us(G),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>pt.waitFor(d))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:du});const s=t.store("collectionParents"),a=new pf,d=m=>{if(a.add(m)){const R=m.lastSegment(),G=m.popLast();return s.put({collectionId:R,parent:us(G)})}};return t.store("remoteDocuments").X({Y:!0},(m,R)=>{const G=new ii(m);return d(G.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([m,R,G],X)=>{const ge=$s(R);return d(ge.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const d=Tc(a),m=df(this.serializer,d);return t.put(m)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((d,m)=>{const R=t.store("remoteDocumentsV14"),G=(X=m,X.document?new fn(ii.fromString(X.document.name).popFirst(5)):X.noDocument?fn.fromSegments(X.noDocument.path):X.unknownDocument?fn.fromSegments(X.unknownDocument.path):Xt()).path.toArray();var X;const ge={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};a.push(R.put(ge))}).next(()=>pt.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Sm(this.serializer),d=new Ef(wf.zs,this.serializer.fe);return s.j().next(m=>{const R=new Map;return m.forEach(G=>{var X;let ge=null!==(X=R.get(G.userId))&&void 0!==X?X:pi();ju(this.serializer,G).keys().forEach(Ue=>ge=ge.add(Ue)),R.set(G.userId,ge)}),pt.forEach(R,(G,X)=>{const ge=new D(X),Ue=ch.de(this.serializer,ge),Et=d.getIndexManager(ge),$t=dc.de(ge,this.serializer,Et,d.referenceDelegate);return new Z_(a,$t,Ue,Et).recalculateAndSaveOverlaysForDocumentKeys(new Uu(t,po.ct),G).next()})})}}function xm(r){r.createObjectStore("targetDocuments",{keyPath:uu}).createIndex("documentTargetsIndex",cu,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fl,{unique:!0}),r.createObjectStore("targetGlobal")}const wu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mh{constructor(e,t,s,a,d,m,R,G,X,ge,Ue=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=d,this.window=m,this.document=R,this.ri=X,this.oi=ge,this.ui=Ue,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Et=>Promise.resolve(),!mh.D())throw new jt(Dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tm(this,a),this.di=t+"main",this.serializer=new uf(G),this.wi=new ro(this.di,this.ui,new Mm(this.serializer)),this.Bs=new wm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sm(this.serializer),this.qs=new U_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ge&&Ve("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new jt(Dt.FAILED_PRECONDITION,wu);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new po(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,Ke.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ke.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ke.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Qo(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return yh(e).get("owner").next(t=>pt.resolve(this.Ri(t)))}Pi(e){return Cf(e).delete(this.clientId)}bi(){var e=this;return(0,Ke.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=is(s,"clientMetadata");return a.j().next(d=>{const m=e.Si(d,18e5),R=d.filter(G=>-1===m.indexOf(G));return pt.forEach(R,G=>a.delete(G.clientId)).next(()=>R)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?pt.resolve(!0):yh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new jt(Dt.FAILED_PRECONDITION,wu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cf(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const m=!this.inForeground&&a.inForeground,R=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||m&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ke.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Uu(t,po.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Cf(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return dc.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new G_(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return ch.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){fe("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",d=15===(m=this.ui)?Vl:14===m?_a:13===m?ul:12===m?gu:11===m?pu:void Xt();var m;let R;return this.wi.runTransaction(e,a,d,G=>(R=new Uu(G,this.Os?this.Os.next():po.ct),"readwrite-primary"===t?this.Ti(R).next(X=>!!X||this.Ei(R)).next(X=>{if(!X)throw Ve(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new jt(Dt.FAILED_PRECONDITION,Kl);return s(R)}).next(X=>this.vi(R).next(()=>X)):this.Oi(R).next(()=>s(R)))).then(G=>(R.raiseOnCommittedEvent(),G))}Oi(e){return yh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new jt(Dt.FAILED_PRECONDITION,wu)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yh(e).put("owner",t)}static D(){return ro.D()}Ai(e){const t=yh(e);return t.get("owner").next(s=>this.Ri(s)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pt.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ve(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Qe.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return fe("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ve("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ve("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yh(r){return is(r,"owner")}function Cf(r){return is(r,"clientMetadata")}function Pm(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class If{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=pi(),a=pi();for(const d of t.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:a=a.add(d.doc.key)}return new If(e,t.fromCache,s,a)}}class Nm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(d=>d||this.Gi(e,t,a,s)).next(d=>d||this.Qi(e,t))}Ki(e,t){if(Do(t))return pt.resolve(null);let s=Ls(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=vu(t,null,"F"),s=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const m=pi(...d);return this.Ui.getDocuments(e,m).next(R=>this.indexManager.getMinOffset(e,s).next(G=>{const X=this.ji(t,R);return this.zi(t,X,m,G.readTime)?this.Ki(e,vu(t,null,"F")):this.Wi(e,X,t,G)}))})))}Gi(e,t,s,a){return Do(t)||a.isEqual(Gn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(d=>{const m=this.ji(t,d);return this.zi(t,m,s,a)?this.Qi(e,t):(J()<=xe.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),wr(t)),this.Wi(e,m,t,Ol(a,-1)))})}ji(e,t){let s=new Xi(So(e));return t.forEach((a,d)=>{Tr(e,d)&&(s=s.add(d))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(a)>0)}Qi(e,t){return J()<=xe.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",wr(t)),this.Ui.getDocumentsMatchingQuery(e,t,To.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(d=>(t.forEach(m=>{d=d.insert(m.key,m)}),d))}}class tv{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Pi(xr),this.Yi=new so(d=>et(d),Vt),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z_(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Om(r,e,t,s){return new tv(r,e,t,s)}function Tf(r,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,Ke.Z)(function*(r,e){const t=en(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(d=>(a=d,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(d=>{const m=[],R=[];let G=pi();for(const X of a){m.push(X.batchId);for(const ge of X.mutations)G=G.add(ge.key)}for(const X of d){R.push(X.batchId);for(const ge of X.mutations)G=G.add(ge.key)}return t.localDocuments.getDocuments(s,G).next(X=>({er:X,removedBatchIds:m,addedBatchIds:R}))})})}),Vp.apply(this,arguments)}function nv(r,e){const t=en(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),d=t.Zi.newChangeBuffer({trackRemovals:!0});return function(m,R,G,X){const ge=G.batch,Ue=ge.keys();let Et=pt.resolve();return Ue.forEach($t=>{Et=Et.next(()=>X.getEntry(R,$t)).next(wn=>{const Hn=G.docVersions.get($t);Gt(null!==Hn),wn.version.compareTo(Hn)<0&&(ge.applyToRemoteDocument(wn,G),wn.isValidDocument()&&(wn.setReadTime(G.commitVersion),X.addEntry(wn)))})}),Et.next(()=>m.mutationQueue.removeMutationBatch(R,ge))}(t,s,e,d).next(()=>d.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let R=pi();for(let G=0;G<m.mutationResults.length;++G)m.mutationResults[G].transformResults.length>0&&(R=R.add(m.batch.mutations[G].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function _h(r){const e=en(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Up(r,e){const t=en(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const R=[];e.targetChanges.forEach((ge,Ue)=>{const Et=a.get(Ue);if(!Et)return;R.push(t.Bs.removeMatchingKeys(d,ge.removedDocuments,Ue).next(()=>t.Bs.addMatchingKeys(d,ge.addedDocuments,Ue)));let $t=Et.withSequenceNumber(d.currentSequenceNumber);var wn,Hn,qn;null!==e.targetMismatches.get(Ue)?$t=$t.withResumeToken(Cs.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):ge.resumeToken.approximateByteSize()>0&&($t=$t.withResumeToken(ge.resumeToken,s)),a=a.insert(Ue,$t),Hn=$t,qn=ge,(0===(wn=Et).resumeToken.approximateByteSize()||Hn.snapshotVersion.toMicroseconds()-wn.snapshotVersion.toMicroseconds()>=3e8||qn.addedDocuments.size+qn.modifiedDocuments.size+qn.removedDocuments.size>0)&&R.push(t.Bs.updateTargetData(d,$t))});let G=Di(),X=pi();if(e.documentUpdates.forEach(ge=>{e.resolvedLimboDocuments.has(ge)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(d,ge))}),R.push(km(d,m,e.documentUpdates).next(ge=>{G=ge.nr,X=ge.sr})),!s.isEqual(Gn.min())){const ge=t.Bs.getLastRemoteSnapshotVersion(d).next(Ue=>t.Bs.setTargetsMetadata(d,d.currentSequenceNumber,s));R.push(ge)}return pt.waitFor(R).next(()=>m.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,G,X)).next(()=>G)}).then(d=>(t.Ji=a,d))}function km(r,e,t){let s=pi(),a=pi();return t.forEach(d=>s=s.add(d)),e.getEntries(r,s).next(d=>{let m=Di();return t.forEach((R,G)=>{const X=d.get(R);G.isFoundDocument()!==X.isFoundDocument()&&(a=a.add(R)),G.isNoDocument()&&G.version.isEqual(Gn.min())?(e.removeEntry(R,G.readTime),m=m.insert(R,G)):!X.isValidDocument()||G.version.compareTo(X.version)>0||0===G.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(G),m=m.insert(R,G)):fe("LocalStore","Ignoring outdated watch update for ",R,". Current version:",X.version," Watch version:",G.version)}),{nr:m,sr:a}})}function Bp(r,e){const t=en(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Dc(r,e){const t=en(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(d=>d?(a=d,pt.resolve(a)):t.Bs.allocateTargetId(s).next(m=>(a=new tl(e,m,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Xc(r,e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ke.Z)(function*(r,e,t){const s=en(r),a=s.Ji.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",d,m=>s.persistence.referenceDelegate.removeTarget(m,a)))}catch(m){if(!Qo(m))throw m;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),Fm.apply(this,arguments)}function jp(r,e,t){const s=en(r);let a=Gn.min(),d=pi();return s.persistence.runTransaction("Execute query","readonly",m=>function(R,G,X){const ge=en(R),Ue=ge.Yi.get(X);return void 0!==Ue?pt.resolve(ge.Ji.get(Ue)):ge.Bs.getTargetData(G,X)}(s,m,Ls(e)).next(R=>{if(R)return a=R.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(m,R.targetId).next(G=>{d=G})}).next(()=>s.Hi.getDocumentsMatchingQuery(m,e,t?a:Gn.min(),t?d:pi())).next(R=>(Lm(s,bi(e),R),{documents:R,ir:d})))}function bf(r,e){const t=en(r),s=en(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",d=>s.le(d,e).next(m=>m?m.target:null))}function rv(r,e){const t=en(r),s=t.Xi.get(e)||Gn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,Ol(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Lm(t,e,a),a))}function Lm(r,e,t){let s=r.Xi.get(e)||Gn.min();t.forEach((a,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),r.Xi.set(e,s)}function Df(){return Df=(0,Ke.Z)(function*(r,e,t,s){const a=en(r);let d=pi(),m=Di();for(const X of t){const ge=e.rr(X.metadata.name);X.document&&(d=d.add(ge));const Ue=e.ur(X);Ue.setReadTime(e.cr(X.metadata.readTime)),m=m.insert(ge,Ue)}const R=a.Zi.newChangeBuffer({trackRemovals:!0}),G=yield Dc(a,(X=s,Ls(zs(ii.fromString(`__bundle__/docs/${X}`)))));var X;return a.persistence.runTransaction("Apply bundle documents","readwrite",X=>km(X,R,m).next(ge=>(R.apply(X),ge)).next(ge=>a.Bs.removeMatchingKeysForTargetId(X,G.targetId).next(()=>a.Bs.addMatchingKeys(X,d,G.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(X,ge.nr,ge.sr)).next(()=>ge.nr)))}),Df.apply(this,arguments)}function Um(r,e){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,Ke.Z)(function*(r,e,t=pi()){const s=yield Dc(r,Ls(lh(e.bundledQuery))),a=en(r);return a.persistence.runTransaction("Save named query","readwrite",d=>{const m=jo(e.readTime);if(s.snapshotVersion.compareTo(m)>=0)return a.qs.saveNamedQuery(d,e);const R=s.withResumeToken(Cs.EMPTY_BYTE_STRING,m);return a.Ji=a.Ji.insert(R.targetId,R),a.Bs.updateTargetData(d,R).next(()=>a.Bs.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>a.Bs.addMatchingKeys(d,t,s.targetId)).next(()=>a.qs.saveNamedQuery(d,e))})}),Sf.apply(this,arguments)}function Hp(r,e){return`firestore_clients_${r}_${e}`}function Wu(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Id(r,e){return`firestore_targets_${r}_${e}`}class Af{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let d,m="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(d=new jt(a.error.code,a.error.message))),m?new Af(e,t,a.state,d):(Ve("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vh{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(a=new jt(s.error.code,s.error.message))),d?new vh(e,s.state,a):(Ve("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $p{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,d=jc();for(let m=0;a&&m<s.activeTargetIds.length;++m)a=ou(s.activeTargetIds[m]),d=d.add(s.activeTargetIds[m]);return a?new $p(e,d):(Ve("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Eh{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Eh(t.clientId,t.onlineState):(Ve("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rf{constructor(){this.activeTargetIds=jc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wh{constructor(e,t,s,a,d){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pi(xr),this.started=!1,this.yr=[];const m=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.pr=Hp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Rf),this.Tr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const d=e.getItem(Hp(e.persistenceKey,a));if(d){const m=$p.ar(a,d);m&&(e.gr=e.gr.insert(m.clientId,m))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Id(this.persistenceKey,e));if(s){const a=vh.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Id(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(fe("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void Ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ke.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(d){let m=po.ct;if(null!=d)try{const R=JSON.parse(d);Gt("number"==typeof R),m=R}catch(R){Ve("SharedClientState","Failed to read sequence number from WebStorage",R)}return m}(s.newValue);a!==po.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(d=>t.syncEngine.Qr(d)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new Af(this.currentUser,e,t,s),d=Wu(this.persistenceKey,this.currentUser,e);this.setItem(d,a.hr())}Cr(e){const t=Wu(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Id(this.persistenceKey,e),d=new vh(e,t,s);this.setItem(a,d.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return $p.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Af.ar(new D(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return vh.ar(a,t)}br(e){return Eh.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),d=this.Sr(s),m=[],R=[];return d.forEach(G=>{a.has(G)||m.push(G)}),a.forEach(G=>{d.has(G)||R.push(G)}),this.syncEngine.Wr(m,R).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=jc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Td{constructor(){this.Hr=new Rf,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Rf,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iv{Yr(e){}shutdown(){}}class Mf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ch=null;function xf(){return null===Ch?Ch=268435456+Math.round(2147483648*Math.random()):Ch++,"0x"+Ch.toString(16)}const Bm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const $a="WebChannelConnection";class ov extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,d){const m=xf(),R=this.To(e,t);fe("RestConnection",`Sending RPC '${e}' ${m}:`,R,s);const G={};return this.Eo(G,a,d),this.Ao(e,R,G,s).then(X=>(fe("RestConnection",`Received RPC '${e}' ${m}: `,X),X),X=>{throw Ft("RestConnection",`RPC '${e}' ${m} failed with error: `,X,"url: ",R,"request:",s),X})}vo(e,t,s,a,d,m){return this.Io(e,t,s,a,d)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+T,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,d)=>e[d]=a),s&&s.headers.forEach((a,d)=>e[d]=a)}To(e,t){return`${this.mo}/v1/${t}:${Bm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const d=xf();return new Promise((m,R)=>{const G=new _l;G.setWithCredentials(!0),G.listenOnce(Ml.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Sa.NO_ERROR:const ge=G.getResponseJson();fe($a,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(ge)),m(ge);break;case Sa.TIMEOUT:fe($a,`RPC '${e}' ${d} timed out`),R(new jt(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case Sa.HTTP_ERROR:const Ue=G.getStatus();if(fe($a,`RPC '${e}' ${d} failed with status:`,Ue,"response text:",G.getResponseText()),Ue>0){let Et=G.getResponseJson();Array.isArray(Et)&&(Et=Et[0]);const $t=null==Et?void 0:Et.error;if($t&&$t.status&&$t.message){const wn=function(Hn){const qn=Hn.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(qn)>=0?qn:Dt.UNKNOWN}($t.status);R(new jt(wn,$t.message))}else R(new jt(Dt.UNKNOWN,"Server responded with status "+G.getStatus()))}else R(new jt(Dt.UNAVAILABLE,"Connection failed."));break;default:Xt()}}finally{fe($a,`RPC '${e}' ${d} completed.`)}});const X=JSON.stringify(a);fe($a,`RPC '${e}' ${d} sending request:`,a),G.send(t,"POST",X,s,15)})}Ro(e,t,s){const a=xf(),d=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Rl(),R=za(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},X=this.longPollingOptions.timeoutSeconds;void 0!==X&&(G.longPollingTimeout=Math.round(1e3*X)),this.useFetchStreams&&(G.xmlHttpFactory=new Wl({})),this.Eo(G.initMessageHeaders,t,s),G.encodeInitMessageHeaders=!0;const ge=d.join("");fe($a,`Creating RPC '${e}' stream ${a}: ${ge}`,G);const Ue=m.createWebChannel(ge,G);let Et=!1,$t=!1;const wn=new sv({ro:qn=>{$t?fe($a,`Not sending because RPC '${e}' stream ${a} is closed:`,qn):(Et||(fe($a,`Opening RPC '${e}' stream ${a} transport.`),Ue.open(),Et=!0),fe($a,`RPC '${e}' stream ${a} sending:`,qn),Ue.send(qn))},oo:()=>Ue.close()}),Hn=(qn,Wr,Zi)=>{qn.listen(Wr,zr=>{try{Zi(zr)}catch($o){setTimeout(()=>{throw $o},0)}})};return Hn(Ue,Aa.EventType.OPEN,()=>{$t||fe($a,`RPC '${e}' stream ${a} transport opened.`)}),Hn(Ue,Aa.EventType.CLOSE,()=>{$t||($t=!0,fe($a,`RPC '${e}' stream ${a} transport closed`),wn.wo())}),Hn(Ue,Aa.EventType.ERROR,qn=>{$t||($t=!0,Ft($a,`RPC '${e}' stream ${a} transport errored:`,qn),wn.wo(new jt(Dt.UNAVAILABLE,"The operation could not be completed")))}),Hn(Ue,Aa.EventType.MESSAGE,qn=>{var Wr;if(!$t){const Zi=qn.data[0];Gt(!!Zi);const zr=Zi,$o=zr.error||(null===(Wr=zr[0])||void 0===Wr?void 0:Wr.error);if($o){fe($a,`RPC '${e}' stream ${a} received error:`,$o);const Ks=$o.status;let qs=function(Vc){const C0=Lr[Vc];if(void 0!==C0)return Hc(C0)}(Ks),Sl=$o.message;void 0===qs&&(qs=Dt.INTERNAL,Sl="Unknown error status: "+Ks+" with message "+$o.message),$t=!0,wn.wo(new jt(qs,Sl)),Ue.close()}else fe($a,`RPC '${e}' stream ${a} received:`,Zi),wn._o(Zi)}}),Hn(R,xl.STAT_EVENT,qn=>{qn.stat===Io.PROXY?fe($a,`RPC '${e}' stream ${a} detected buffering proxy`):qn.stat===Io.NOPROXY&&fe($a,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{wn.fo()},0),wn}}function jm(){return"undefined"!=typeof window?window:null}function Ih(){return"undefined"!=typeof document?document:null}function zu(r){return new P_(r,!0)}class Pf{constructor(e,t,s=1e3,a=1.5,d=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=d,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Hm{constructor(e,t,s,a,d,m,R,G){this.ii=e,this.$o=s,this.Oo=a,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=R,this.listener=G,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Pf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ke.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ke.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,Ke.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===Dt.RESOURCE_EXHAUSTED?(Ve(t.toString()),Ve("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===Dt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new jt(Dt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,Ke.Z)(function*(){e.state=0,e.start()}))}tu(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class av extends Hm{constructor(e,t,s,a,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,m),this.serializer=d}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function O_(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:Xt(),a=e.targetChange.targetIds||[],d=function(G,X){return G.useProto3Json?(Gt(void 0===X||"string"==typeof X),Cs.fromBase64String(X||"")):(Gt(void 0===X||X instanceof Uint8Array),Cs.fromUint8Array(X||new Uint8Array))}(r,e.targetChange.resumeToken),m=e.targetChange.cause,R=m&&function(G){const X=void 0===G.code?Dt.UNKNOWN:Hc(G.code);return new jt(X,G.message||"")}(m);t=new Jg(s,a,d,R||null)}else if("documentChange"in e){const s=e.documentChange,a=xu(r,s.document.name),d=jo(s.document.updateTime),m=s.document.createTime?jo(s.document.createTime):Gn.min(),R=new Ii({mapValue:{fields:s.document.fields}}),G=Ti.newFoundDocument(a,d,m,R);t=new Wc(s.targetIds||[],s.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const s=e.documentDelete,a=xu(r,s.document),d=s.readTime?jo(s.readTime):Gn.min(),m=Ti.newNoDocument(a,d);t=new Wc([],s.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const s=e.documentRemove,a=xu(r,s.document);t=new Wc([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Xt();{const s=e.filter,{count:a=0,unchangedNames:d}=s,m=new Dr(a,d);t=new Qg(s.targetId,m)}}var G;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return Gn.min();const d=a.targetChange;return d.targetIds&&d.targetIds.length?Gn.min():d.readTime?jo(d.readTime):Gn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=oh(this.serializer),t.addTarget=function(a,d){let m;const R=d.target;if(m=dn(R)?{documents:Ap(a,R)}:{query:Rp(a,R)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=N_(a,d.resumeToken);const G=Cc(a,d.expectedCount);null!==G&&(m.expectedCount=G)}else if(d.snapshotVersion.compareTo(Gn.min())>0){m.readTime=Il(a,d.snapshotVersion.toTimestamp());const G=Cc(a,d.expectedCount);null!==G&&(m.expectedCount=G)}return m}(this.serializer,e);const s=function F_(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=oh(this.serializer),t.removeTarget=e,this.Wo(t)}}class bd extends Hm{constructor(e,t,s,a,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,m),this.serializer=d,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function k_(r,e){return r&&r.length>0?(Gt(void 0!==e),r.map(t=>function(s,a){let d=jo(s.updateTime?s.updateTime:a);return d.isEqual(Gn.min())&&(d=jo(a)),new qg(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=jo(e.commitTime);return this.listener.cu(s,t)}return Gt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=oh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ah(this.serializer,s))};this.Wo(t)}}class lv extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new jt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,d])=>this.connection.Io(e,t,s,a,d)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new jt(Dt.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.vo(e,t,s,d,m,a)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new jt(Dt.UNKNOWN,d.toString())})}terminate(){this.lu=!0}}class cv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ve(t),this.mu=!1):fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ku{constructor(e,t,s,a,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=d,this.Pu.Yr(R=>{s.enqueueAndForget((0,Ke.Z)(function*(){var G;nd(m)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,Ke.Z)(function*(X){const ge=en(X);ge.vu.add(4),yield td(ge),ge.bu.set("Unknown"),ge.vu.delete(4),yield ed(ge)}),function(X){return G.apply(this,arguments)})(m))}))}),this.bu=new cv(s,a)}}function ed(r){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,Ke.Z)(function*(r){if(nd(r))for(const e of r.Ru)yield e(!0)}),Nf.apply(this,arguments)}function td(r){return Of.apply(this,arguments)}function Of(){return Of=(0,Ke.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Of.apply(this,arguments)}function Th(r,e){const t=en(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),kf(t)?zp(t):hc(t).Ko()&&Wp(t,e))}function bh(r,e){const t=en(r),s=hc(t);t.Au.delete(e),s.Ko()&&$m(t,e),0===t.Au.size&&(s.Ko()?s.jo():nd(t)&&t.bu.set("Unknown"))}function Wp(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hc(r).su(e)}function $m(r,e){r.Vu.qt(e),hc(r).iu(e)}function zp(r){r.Vu=new R_({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),hc(r).start(),r.bu.gu()}function kf(r){return nd(r)&&!hc(r).Uo()&&r.Au.size>0}function nd(r){return 0===en(r).vu.size}function Kp(r){r.Vu=void 0}function dv(r){return qp.apply(this,arguments)}function qp(){return qp=(0,Ke.Z)(function*(r){r.Au.forEach((e,t)=>{Wp(r,e)})}),qp.apply(this,arguments)}function hE(r,e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,Ke.Z)(function*(r,e){Kp(r),kf(r)?(r.bu.Iu(e),zp(r)):r.bu.set("Unknown")}),Gm.apply(this,arguments)}function Zp(r,e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,Ke.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof Jg&&2===e.state&&e.cause)try{yield(s=(0,Ke.Z)(function*(a,d){const m=d.cause;for(const R of d.targetIds)a.Au.has(R)&&(yield a.remoteSyncer.rejectListen(R,m),a.Au.delete(R),a.Vu.removeTarget(R))}),function(a,d){return s.apply(this,arguments)})(r,e)}catch(s){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Dh(r,s)}else if(e instanceof Wc?r.Vu.Ht(e):e instanceof Qg?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(Gn.min()))try{const s=yield _h(r.localStore);t.compareTo(s)>=0&&(yield function(a,d){const m=a.Vu.ce(d);return m.targetChanges.forEach((R,G)=>{if(R.resumeToken.approximateByteSize()>0){const X=a.Au.get(G);X&&a.Au.set(G,X.withResumeToken(R.resumeToken,d))}}),m.targetMismatches.forEach((R,G)=>{const X=a.Au.get(R);if(!X)return;a.Au.set(R,X.withResumeToken(Cs.EMPTY_BYTE_STRING,X.snapshotVersion)),$m(a,R);const ge=new tl(X.target,R,G,X.sequenceNumber);Wp(a,ge)}),a.remoteSyncer.applyRemoteEvent(m)}(r,t))}catch(s){fe("RemoteStore","Failed to raise snapshot:",s),yield Dh(r,s)}var s}),Yp.apply(this,arguments)}function Dh(r,e,t){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Ke.Z)(function*(r,e,t){if(!Qo(e))throw e;r.vu.add(1),yield td(r),r.bu.set("Offline"),t||(t=()=>_h(r.localStore)),r.asyncQueue.enqueueRetryable((0,Ke.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield ed(r)}))}),Ff.apply(this,arguments)}function hv(r,e){return e().catch(t=>Dh(r,t,e))}function pl(r){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,Ke.Z)(function*(r){const e=en(r),t=tu(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;fE(e);)try{const a=yield Bp(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,zm(e,a)}catch(a){yield Dh(e,a)}Qp(e)&&Jp(e)}),Wm.apply(this,arguments)}function fE(r){return nd(r)&&r.Eu.length<10}function zm(r,e){r.Eu.push(e);const t=tu(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function Qp(r){return nd(r)&&!tu(r).Uo()&&r.Eu.length>0}function Jp(r){tu(r).start()}function fv(r){return Km.apply(this,arguments)}function Km(){return Km=(0,Ke.Z)(function*(r){tu(r).hu()}),Km.apply(this,arguments)}function qm(r){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,Ke.Z)(function*(r){const e=tu(r);for(const t of r.Eu)e.uu(t.mutations)}),Sh.apply(this,arguments)}function pv(r,e,t){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,Ke.Z)(function*(r,e,t){const s=r.Eu.shift(),a=Wt.from(s,e,t);yield hv(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield pl(r)}),Ah.apply(this,arguments)}function gv(r,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,Ke.Z)(function*(r,e){var t;e&&tu(r).ou&&(yield(t=(0,Ke.Z)(function*(s,a){if(uc(d=a.code)&&d!==Dt.ABORTED){const m=s.Eu.shift();tu(s).Qo(),yield hv(s,()=>s.remoteSyncer.rejectFailedWrite(m.batchId,a)),yield pl(s)}var d}),function(s,a){return t.apply(this,arguments)})(r,e)),Qp(r)&&Jp(r)}),Xp.apply(this,arguments)}function Zm(r,e){return eg.apply(this,arguments)}function eg(){return eg=(0,Ke.Z)(function*(r,e){const t=en(r);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const s=nd(t);t.vu.add(3),yield td(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield ed(t)}),eg.apply(this,arguments)}function tg(r,e){return ng.apply(this,arguments)}function ng(){return ng=(0,Ke.Z)(function*(r,e){const t=en(r);e?(t.vu.delete(2),yield ed(t)):e||(t.vu.add(2),yield td(t),t.bu.set("Unknown"))}),ng.apply(this,arguments)}function hc(r){return r.Su||(r.Su=function(e,t,s){const a=en(e);return a.fu(),new av(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:dv.bind(null,r),ao:hE.bind(null,r),nu:Zp.bind(null,r)}),r.Ru.push(function(){var e=(0,Ke.Z)(function*(t){t?(r.Su.Qo(),kf(r)?zp(r):r.bu.set("Unknown")):(yield r.Su.stop(),Kp(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function tu(r){return r.Du||(r.Du=function(e,t,s){const a=en(e);return a.fu(),new bd(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fv.bind(null,r),ao:gv.bind(null,r),au:qm.bind(null,r),cu:pv.bind(null,r)}),r.Ru.push(function(){var e=(0,Ke.Z)(function*(t){t?(r.Du.Qo(),yield pl(r)):(yield r.Du.stop(),r.Eu.length>0&&(fe("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class rg{constructor(e,t,s,a,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=d,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,s,a,d){const m=Date.now()+s,R=new rg(e,t,m,a,d);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jt(Dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qu(r,e){if(Ve("AsyncQueue",`${e}: ${r}`),Qo(r))return new jt(Dt.UNAVAILABLE,`${e}: ${r}`);throw r}class Dd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||fn.comparator(t.key,s.key):(t,s)=>fn.comparator(t.key,s.key),this.keyedMap=sc(),this.sortedSet=new Pi(this.comparator)}static emptySet(e){return new Dd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(!a.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Dd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Ym{constructor(){this.Cu=new Pi(fn.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Xt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Sc{constructor(e,t,s,a,d,m,R,G,X){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=R,this.excludesMetadataChanges=G,this.hasCachedResults=X}static fromInitialDocuments(e,t,s,a,d){const m=[];return t.forEach(R=>{m.push({type:0,doc:R})}),new Sc(e,t,Dd.emptySet(t),m,s,a,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Zu{constructor(){this.Nu=void 0,this.listeners=[]}}class Rh{constructor(){this.queries=new so(e=>rr(e),Jl),this.onlineState="Unknown",this.ku=new Set}}function Ga(r,e){return fc.apply(this,arguments)}function fc(){return fc=(0,Ke.Z)(function*(r,e){const t=en(r),s=e.query;let a=!1,d=t.queries.get(s);if(d||(a=!0,d=new Zu),a)try{d.Nu=yield t.onListen(s)}catch(m){const R=qu(m,`Initialization of query '${wr(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,d),d.listeners.push(e),e.Mu(t.onlineState),d.Nu&&e.$u(d.Nu)&&Ac(t)}),fc.apply(this,arguments)}function Sd(r,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,Ke.Z)(function*(r,e){const t=en(r),s=e.query;let a=!1;const d=t.queries.get(s);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),a=0===d.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Gl.apply(this,arguments)}function ig(r,e){const t=en(r);let s=!1;for(const a of e){const m=t.queries.get(a.query);if(m){for(const R of m.listeners)R.$u(a)&&(s=!0);m.Nu=a}}s&&Ac(t)}function Ad(r,e,t){const s=en(r),a=s.queries.get(e);if(a)for(const d of a.listeners)d.onError(t);s.queries.delete(e)}function Ac(r){r.ku.forEach(e=>{e.next()})}class Rc{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Sc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Rd{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class rd{constructor(e){this.serializer=e}rr(e){return xu(this.serializer,e)}ur(e){return e.metadata.exists?sm(this.serializer,e.document,!1):Ti.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return jo(e)}}class Md{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=id(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=ii.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new rd(this.serializer);for(const a of e)if(a.metadata.queries){const d=s.rr(a.metadata.name);for(const m of a.metadata.queries){const R=(t.get(m)||pi()).add(d);t.set(m,R)}}return t}complete(){var e=this;return(0,Ke.Z)(function*(){const t=yield function Vm(r,e,t,s){return Df.apply(this,arguments)}(e.localStore,new rd(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Um(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function id(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class sd{constructor(e){this.key=e}}class od{constructor(e){this.key=e}}class sg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=pi(),this.mutatedKeys=pi(),this.tc=So(e),this.ec=new Dd(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Ym,a=t?t.ec:this.ec;let d=t?t.mutatedKeys:this.mutatedKeys,m=a,R=!1;const G="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,X="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((ge,Ue)=>{const Et=a.get(ge),$t=Tr(this.query,Ue)?Ue:null,wn=!!Et&&this.mutatedKeys.has(Et.key),Hn=!!$t&&($t.hasLocalMutations||this.mutatedKeys.has($t.key)&&$t.hasCommittedMutations);let qn=!1;Et&&$t?Et.data.isEqual($t.data)?wn!==Hn&&(s.track({type:3,doc:$t}),qn=!0):this.rc(Et,$t)||(s.track({type:2,doc:$t}),qn=!0,(G&&this.tc($t,G)>0||X&&this.tc($t,X)<0)&&(R=!0)):!Et&&$t?(s.track({type:0,doc:$t}),qn=!0):Et&&!$t&&(s.track({type:1,doc:Et}),qn=!0,(G||X)&&(R=!0)),qn&&($t?(m=m.add($t),d=Hn?d.add(ge):d.delete(ge)):(m=m.delete(ge),d=d.delete(ge)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const ge="F"===this.query.limitType?m.last():m.first();m=m.delete(ge.key),d=d.delete(ge.key),s.track({type:1,doc:ge})}return{ec:m,ic:s,zi:R,mutatedKeys:d}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const d=e.ic.xu();d.sort((X,ge)=>function(Ue,Et){const $t=wn=>{switch(wn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt()}};return $t(Ue)-$t(Et)}(X.type,ge.type)||this.tc(X.doc,ge.doc)),this.oc(s);const m=t?this.uc():[],R=0===this.Zu.size&&this.current?1:0,G=R!==this.Xu;return this.Xu=R,0!==d.length||G?{snapshot:new Sc(this.query,e.ec,a,d,e.mutatedKeys,0===R,G,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:m}:{cc:m}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ym,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=pi(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new od(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new sd(s))}),t}hc(e){this.Yu=e.ir,this.Zu=pi();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Sc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Qm{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Jm{constructor(e){this.key=e,this.fc=!1}}class Xm{constructor(e,t,s,a,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.dc={},this.wc=new so(R=>rr(R),Jl),this._c=new Map,this.mc=new Set,this.gc=new Pi(fn.comparator),this.yc=new Map,this.Ic=new vf,this.Tc={},this.Ec=new Map,this.Ac=Yc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ey(r,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Ke.Z)(function*(r,e){const t=hy(r);let s,a;const d=t.wc.get(e);if(d)s=d.targetId,t.sharedClientState.addLocalQueryTarget(s),a=d.view.lc();else{const m=yield Dc(t.localStore,Ls(e)),R=t.sharedClientState.addLocalQueryTarget(m.targetId);s=m.targetId,a=yield Vf(t,e,s,"current"===R,m.resumeToken),t.isPrimaryClient&&Th(t.remoteStore,m)}return a}),Lf.apply(this,arguments)}function Vf(r,e,t,s,a){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Ke.Z)(function*(r,e,t,s,a){r.Rc=(Ue,Et,$t)=>{return(wn=(0,Ke.Z)(function*(Hn,qn,Wr,Zi){let zr=qn.view.sc(Wr);zr.zi&&(zr=yield jp(Hn.localStore,qn.query,!1).then(({documents:qs})=>qn.view.sc(qs,zr)));const $o=Zi&&Zi.targetChanges.get(qn.targetId),Ks=qn.view.applyChanges(zr,Hn.isPrimaryClient,$o);return iy(Hn,qn.targetId,Ks.cc),Ks.snapshot}),function(Hn,qn,Wr,Zi){return wn.apply(this,arguments)})(r,Ue,Et,$t);var wn};const d=yield jp(r.localStore,e,!0),m=new sg(e,d.ir),R=m.sc(d.documents),G=sh.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),X=m.applyChanges(R,r.isPrimaryClient,G);iy(r,t,X.cc);const ge=new Qm(e,t,m);return r.wc.set(e,ge),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),X.snapshot}),Uf.apply(this,arguments)}function ty(r,e){return og.apply(this,arguments)}function og(){return og=(0,Ke.Z)(function*(r,e){const t=en(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(d=>!Jl(d,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Xc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),bh(t.remoteStore,s.targetId),xd(t,s.targetId)}).catch(ol))):(xd(t,s.targetId),yield Xc(t.localStore,s.targetId,!0))}),og.apply(this,arguments)}function ag(){return ag=(0,Ke.Z)(function*(r,e,t){const s=Nh(r);try{const a=yield function(d,m){const R=en(d),G=ws.now(),X=m.reduce((Et,$t)=>Et.add($t.key),pi());let ge,Ue;return R.persistence.runTransaction("Locally write mutations","readwrite",Et=>{let $t=Di(),wn=pi();return R.Zi.getEntries(Et,X).next(Hn=>{$t=Hn,$t.forEach((qn,Wr)=>{Wr.isValidDocument()||(wn=wn.add(qn))})}).next(()=>R.localDocuments.getOverlayedDocuments(Et,$t)).next(Hn=>{ge=Hn;const qn=[];for(const Wr of m){const Zi=u(Wr,ge.get(Wr.key).overlayedDocument);null!=Zi&&qn.push(new S(Wr.key,Zi,Ws(Zi.value.mapValue),Vs.exists(!0)))}return R.mutationQueue.addMutationBatch(Et,G,qn,m)}).next(Hn=>{Ue=Hn;const qn=Hn.applyToLocalDocumentSet(ge,wn);return R.documentOverlayCache.saveOverlays(Et,Hn.batchId,qn)})}).then(()=>({batchId:Ue.batchId,changes:aa(ge)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,m,R){let G=d.Tc[d.currentUser.toKey()];G||(G=new Pi(xr)),G=G.insert(m,R),d.Tc[d.currentUser.toKey()]=G}(s,a.batchId,t),yield Yu(s,a.changes),yield pl(s.remoteStore)}catch(a){const d=qu(a,"Failed to persist write");t.reject(d)}}),ag.apply(this,arguments)}function lg(r,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,Ke.Z)(function*(r,e){const t=en(r);try{const s=yield Up(t.localStore,e);e.targetChanges.forEach((a,d)=>{const m=t.yc.get(d);m&&(Gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?m.fc=!0:a.modifiedDocuments.size>0?Gt(m.fc):a.removedDocuments.size>0&&(Gt(m.fc),m.fc=!1))}),yield Yu(t,s,e)}catch(s){yield ol(s)}}),Bf.apply(this,arguments)}function ry(r,e,t){const s=en(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((d,m)=>{const R=m.view.Mu(e);R.snapshot&&a.push(R.snapshot)}),function(d,m){const R=en(d);R.onlineState=m;let G=!1;R.queries.forEach((X,ge)=>{for(const Ue of ge.listeners)Ue.Mu(m)&&(G=!0)}),G&&Ac(R)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function mv(r,e,t){return jf.apply(this,arguments)}function jf(){return jf=(0,Ke.Z)(function*(r,e,t){const s=en(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),d=a&&a.key;if(d){let m=new Pi(fn.comparator);m=m.insert(d,Ti.newNoDocument(d,Gn.min()));const R=pi().add(d),G=new ih(Gn.min(),new Map,new Pi(xr),m,R);yield lg(s,G),s.gc=s.gc.remove(d),s.yc.delete(e),dg(s)}else yield Xc(s.localStore,e,!1).then(()=>xd(s,e,t)).catch(ol)}),jf.apply(this,arguments)}function yv(r,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Ke.Z)(function*(r,e){const t=en(r),s=e.batch.batchId;try{const a=yield nv(t.localStore,e);xh(t,s,null),Mh(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Yu(t,a)}catch(a){yield ol(a)}}),Hf.apply(this,arguments)}function _v(r,e,t){return ug.apply(this,arguments)}function ug(){return ug=(0,Ke.Z)(function*(r,e,t){const s=en(r);try{const a=yield function(d,m){const R=en(d);return R.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let X;return R.mutationQueue.lookupMutationBatch(G,m).next(ge=>(Gt(null!==ge),X=ge.keys(),R.mutationQueue.removeMutationBatch(G,ge))).next(()=>R.mutationQueue.performConsistencyCheck(G)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(G,X,m)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,X)).next(()=>R.localDocuments.getDocuments(G,X))})}(s.localStore,e);xh(s,e,t),Mh(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Yu(s,a)}catch(a){yield ol(a)}}),ug.apply(this,arguments)}function cg(){return cg=(0,Ke.Z)(function*(r,e){const t=en(r);nd(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const m=en(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>m.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=qu(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),cg.apply(this,arguments)}function Mh(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function xh(r,e,t){const s=en(r);let a=s.Tc[s.currentUser.toKey()];if(a){const d=a.get(e);d&&(t?d.reject(t):d.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function xd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||vv(r,s)})}function vv(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(bh(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),dg(r))}function iy(r,e,t){for(const s of t)s instanceof sd?(r.Ic.addReference(s.key,e),gE(r,s)):s instanceof od?(fe("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||vv(r,s.key)):Xt()}function gE(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(fe("SyncEngine","New document in limbo: "+t),r.mc.add(s),dg(r))}function dg(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new fn(ii.fromString(e)),s=r.Ac.next();r.yc.set(s,new Jm(t)),r.gc=r.gc.insert(t,s),Th(r.remoteStore,new tl(Ls(zs(t.path)),s,"TargetPurposeLimboResolution",po.ct))}}function Yu(r,e,t){return sy.apply(this,arguments)}function sy(){return sy=(0,Ke.Z)(function*(r,e,t){const s=en(r),a=[],d=[],m=[];var R;s.wc.isEmpty()||(s.wc.forEach((R,G)=>{m.push(s.Rc(G,e,t).then(X=>{if((X||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(G.targetId,(null==X?void 0:X.fromCache)?"not-current":"current"),X){a.push(X);const ge=If.Li(G.targetId,X);d.push(ge)}}))}),yield Promise.all(m),s.dc.nu(a),yield(R=(0,Ke.Z)(function*(G,X){const ge=en(G);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ue=>pt.forEach(X,Et=>pt.forEach(Et.Fi,$t=>ge.persistence.referenceDelegate.addReference(Ue,Et.targetId,$t)).next(()=>pt.forEach(Et.Bi,$t=>ge.persistence.referenceDelegate.removeReference(Ue,Et.targetId,$t)))))}catch(Ue){if(!Qo(Ue))throw Ue;fe("LocalStore","Failed to update sequence numbers: "+Ue)}for(const Ue of X){const Et=Ue.targetId;if(!Ue.fromCache){const $t=ge.Ji.get(Et),Hn=$t.withLastLimboFreeSnapshotVersion($t.snapshotVersion);ge.Ji=ge.Ji.insert(Et,Hn)}}}),function(G,X){return R.apply(this,arguments)})(s.localStore,d))}),sy.apply(this,arguments)}function Ev(r,e){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,Ke.Z)(function*(r,e){const t=en(r);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const s=yield Tf(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(m=>{m.forEach(R=>{R.reject(new jt(Dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Yu(t,s.er)}var a}),Mc.apply(this,arguments)}function wv(r,e){const t=en(r),s=t.yc.get(e);if(s&&s.fc)return pi().add(s.key);{let a=pi();const d=t._c.get(e);if(!d)return a;for(const m of d){const R=t.wc.get(m);a=a.unionWith(R.view.nc)}return a}}function oy(r,e){return hg.apply(this,arguments)}function hg(){return hg=(0,Ke.Z)(function*(r,e){const t=en(r),s=yield jp(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&iy(t,e.targetId,a.cc),a}),hg.apply(this,arguments)}function ay(r,e){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,Ke.Z)(function*(r,e){const t=en(r);return rv(t.localStore,e).then(s=>Yu(t,s))}),Pd.apply(this,arguments)}function Cv(r,e,t,s){return $f.apply(this,arguments)}function $f(){return $f=(0,Ke.Z)(function*(r,e,t,s){const a=en(r),d=yield function(m,R){const G=en(m),X=en(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ge=>X.Sn(ge,R).next(Ue=>Ue?G.localDocuments.getDocuments(ge,Ue):pt.resolve(null)))}(a.localStore,e);var R;null!==d?("pending"===t?yield pl(a.remoteStore):"acknowledged"===t||"rejected"===t?(xh(a,e,s||null),Mh(a,e),R=e,en(en(a.localStore).mutationQueue).Cn(R)):Xt(),yield Yu(a,d)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),$f.apply(this,arguments)}function fg(){return fg=(0,Ke.Z)(function*(r,e){const t=en(r);if(hy(t),Nh(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield ly(t,s.toArray());t.vc=!0,yield tg(t.remoteStore,!0);for(const d of a)Th(t.remoteStore,d)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?s.push(m):a=a.then(()=>(xd(t,m),Xc(t.localStore,m,!0))),bh(t.remoteStore,m)}),yield a,yield ly(t,s),function(d){const m=en(d);m.yc.forEach((R,G)=>{bh(m.remoteStore,G)}),m.Ic.Ts(),m.yc=new Map,m.gc=new Pi(fn.comparator)}(t),t.vc=!1,yield tg(t.remoteStore,!1)}}),fg.apply(this,arguments)}function ly(r,e,t){return pg.apply(this,arguments)}function pg(){return pg=(0,Ke.Z)(function*(r,e,t){const s=en(r),a=[],d=[];for(const m of e){let R;const G=s._c.get(m);if(G&&0!==G.length){R=yield Dc(s.localStore,Ls(G[0]));for(const X of G){const ge=s.wc.get(X),Ue=yield oy(s,ge);Ue.snapshot&&d.push(Ue.snapshot)}}else{const X=yield bf(s.localStore,m);R=yield Dc(s.localStore,X),yield Vf(s,uy(X),m,!1,R.resumeToken)}a.push(R)}return s.dc.nu(d),a}),pg.apply(this,arguments)}function uy(r){return Va(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function cy(r){const e=en(r);return en(en(e.localStore).persistence).$i()}function Tv(r,e,t,s){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,Ke.Z)(function*(r,e,t,s){const a=en(r);if(a.vc)return void fe("SyncEngine","Ignoring unexpected query state notification.");const d=a._c.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield rv(a.localStore,bi(d[0])),R=ih.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Cs.EMPTY_BYTE_STRING);yield Yu(a,m,R);break}case"rejected":yield Xc(a.localStore,e,!0),xd(a,e,s);break;default:Xt()}}),Gf.apply(this,arguments)}function dy(r,e,t){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,Ke.Z)(function*(r,e,t){const s=hy(r);if(s.vc){for(const a of e){if(s._c.has(a)){fe("SyncEngine","Adding an already active target "+a);continue}const d=yield bf(s.localStore,a),m=yield Dc(s.localStore,d);yield Vf(s,uy(d),m.targetId,!1,m.resumeToken),Th(s.remoteStore,m)}for(const a of t)s._c.has(a)&&(yield Xc(s.localStore,a,!1).then(()=>{bh(s.remoteStore,a),xd(s,a)}).catch(ol))}}),Ph.apply(this,arguments)}function hy(r){const e=en(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=lg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mv.bind(null,e),e.dc.nu=ig.bind(null,e.eventManager),e.dc.Pc=Ad.bind(null,e.eventManager),e}function Nh(r){const e=en(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_v.bind(null,e),e}class Wf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ke.Z)(function*(){t.serializer=zu(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Om(this.persistence,new Nm,e.initialUser,this.serializer)}createPersistence(e){return new Ef(wf.zs,this.serializer)}createSharedClientState(e){return new Td}terminate(){var e=this;return(0,Ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zf extends Wf{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ke.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Nh(s.Vc.syncEngine),yield pl(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Om(this.persistence,new Nm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Cm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new ka(t,this.persistence);return new rc(e.asyncQueue,s)}createPersistence(e){const t=Pm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?fl.withCacheSize(this.cacheSizeBytes):fl.DEFAULT;return new mh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jm(),Ih(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Td}}class Kf extends zf{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ke.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof wh&&(s.sharedClientState.syncEngine={jr:Cv.bind(null,a),zr:Tv.bind(null,a),Wr:dy.bind(null,a),$i:cy.bind(null,a),Qr:ay.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var d=(0,Ke.Z)(function*(m){yield function Iv(r,e){return fg.apply(this,arguments)}(s.Vc.syncEngine,m),s.gcScheduler&&(m&&!s.gcScheduler.started?s.gcScheduler.start():m||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(m&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():m||s.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jm();if(!wh.D(t))throw new jt(Dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Pm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class xc{initialize(e,t){var s=this;return(0,Ke.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>ry(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ev.bind(null,s.syncEngine),yield tg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Rh}createDatastore(e){const t=zu(e.databaseInfo.databaseId),s=new ov(e.databaseInfo);return new lv(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,d=R=>ry(this.syncEngine,R,0),m=Mf.D()?new Mf:new iv,new Ku(t,s,a,d,m);var t,s,a,d,m}createSyncEngine(e,t){return function(s,a,d,m,R,G,X){const ge=new Xm(s,a,d,m,R,G);return X&&(ge.vc=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ke.Z)(function*(t){const s=en(t);fe("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield td(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fy(r,e=10240){let t=0;return{read:()=>(0,Ke.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ke.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ad{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ve("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ke.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ke.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const d=yield e.$c(a);return new Rd(JSON.parse(d),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ke.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,Ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class gg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new jt(Dt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,Ke.Z)(function*(d,m){const R=en(d),G=oh(R.serializer)+"/documents",X={documents:m.map($t=>af(R.serializer,$t))},ge=yield R.vo("BatchGetDocuments",G,X,m.length),Ue=new Map;ge.forEach($t=>{const wn=function om(r,e){return"found"in e?function(t,s){Gt(!!s.found);const a=xu(t,s.found.name),d=jo(s.found.updateTime),m=s.found.createTime?jo(s.found.createTime):Gn.min(),R=new Ii({mapValue:{fields:s.found.fields}});return Ti.newFoundDocument(a,d,m,R)}(r,e):"missing"in e?function(t,s){Gt(!!s.missing),Gt(!!s.readTime);const a=xu(t,s.missing),d=jo(s.readTime);return Ti.newNoDocument(a,d)}(r,e):Xt()}(R.serializer,$t);Ue.set(wn.key.toString(),wn)});const Et=[];return m.forEach($t=>{const wn=Ue.get($t.toString());Gt(!!wn),Et.push(wn)}),Et}),function(d,m){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ke(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const d=fn.fromPath(a);e.mutations.push(new Ye(d,e.precondition(d)))}),yield(s=(0,Ke.Z)(function*(a,d){const m=en(a),R=oh(m.serializer)+"/documents",G={writes:d.map(X=>ah(m.serializer,X))};yield m.Io("Commit",R,G)}),function(a,d){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xt();t=Gn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new jt(Dt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gn.min())?Vs.exists(!1):Vs.updateTime(t):Vs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gn.min()))throw new jt(Dt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vs.updateTime(t)}return Vs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mE{constructor(e,t,s,a,d){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=d,this.Bc=s.maxAttempts,this.qo=new Pf(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ke.Z)(function*(){const t=new gg(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(d=>{e.Uc(d)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Uo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uc(t)}return!1}}class Dv{constructor(e,t,s,a){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=D.UNAUTHENTICATED,this.clientId=Ji.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var m=(0,Ke.Z)(function*(R){fe("FirestoreClient","Received user=",R.uid),yield d.authCredentialListener(R),d.user=R});return function(R){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(s,m=>(fe("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,Ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new jt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ke.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=qu(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function ld(r,e){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,Ke.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,Ke.Z)(function*(d){s.isEqual(d)||(yield Tf(e.localStore,d),s=d)});return function(d){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),Nd.apply(this,arguments)}function Zf(r,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Ke.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield Jf(r);fe("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Zm(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,d)=>Zm(e.remoteStore,d)),r._onlineComponents=e}),Yf.apply(this,arguments)}function Qf(r){return"FirebaseError"===r.name?r.code===Dt.FAILED_PRECONDITION||r.code===Dt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function Jf(r){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,Ke.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ld(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Qf(t))throw t;Ft("Error using user provided cache. Falling back to memory cache: "+t),yield ld(r,new Wf)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield ld(r,new Wf);return r._offlineComponents}),Xf.apply(this,arguments)}function Od(r){return ep.apply(this,arguments)}function ep(){return ep=(0,Ke.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zf(r,r._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield Zf(r,new xc))),r._onlineComponents}),ep.apply(this,arguments)}function py(r){return Jf(r).then(e=>e.persistence)}function kh(r){return Jf(r).then(e=>e.localStore)}function mg(r){return Od(r).then(e=>e.remoteStore)}function Fh(r){return Od(r).then(e=>e.syncEngine)}function kd(r){return _g.apply(this,arguments)}function _g(){return _g=(0,Ke.Z)(function*(r){const e=yield Od(r),t=e.eventManager;return t.onListen=ey.bind(null,e.syncEngine),t.onUnlisten=ty.bind(null,e.syncEngine),t}),_g.apply(this,arguments)}function Eg(r,e,t={}){const s=new Fr;return r.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(a,d,m,R,G){const X=new ad({next:Ue=>{d.enqueueAndForget(()=>Sd(a,ge));const Et=Ue.docs.has(m);!Et&&Ue.fromCache?G.reject(new jt(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):Et&&Ue.fromCache&&R&&"server"===R.source?G.reject(new jt(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Ue)},error:Ue=>G.reject(Ue)}),ge=new Rc(zs(m.path),X,{includeMetadataChanges:!0,Ku:!0});return Ga(a,ge)}(yield kd(r),r.asyncQueue,e,t,s)})),s.promise}function wg(r,e,t={}){const s=new Fr;return r.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(a,d,m,R,G){const X=new ad({next:Ue=>{d.enqueueAndForget(()=>Sd(a,ge)),Ue.fromCache&&"server"===R.source?G.reject(new jt(Dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Ue)},error:Ue=>G.reject(Ue)}),ge=new Rc(m,X,{includeMetadataChanges:!0,Ku:!0});return Ga(a,ge)}(yield kd(r),r.asyncQueue,e,t,s)})),s.promise}function Cg(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const Av=new Map;function Ig(r,e,t){if(!t)throw new jt(Dt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function wy(r,e,t,s){if(!0===e&&!0===s)throw new jt(Dt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Tg(r){if(!fn.isDocumentKey(r))throw new jt(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Cy(r){if(fn.isDocumentKey(r))throw new jt(Dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Ho(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Xt()}function Hi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new jt(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ho(r);throw new jt(Dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Iy(r,e){if(e<=0)throw new jt(Dt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Ty{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new jt(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jt(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Cg(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new jt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new jt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new jt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new jt(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jt(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Qi;switch(t.type){case"firstParty":return new Tu(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new jt(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Av.get(e);t&&(fe("ComponentProvider","Removing Datastore"),Av.delete(e),t.terminate())}(this),Promise.resolve()}}class oo{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oo(this.firestore,e,this._key)}}class Wa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class Tl extends Wa{constructor(e,t,s){super(e,t,zs(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oo(this.firestore,null,new fn(e))}withConverter(e){return new Tl(this.firestore,e,this._path)}}function Dy(r,e,...t){if(r=(0,Qe.m9)(r),Ig("collection","path",e),r instanceof Fd){const s=ii.fromString(e,...t);return Cy(s),new Tl(r,null,s)}{if(!(r instanceof oo||r instanceof Tl))throw new jt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ii.fromString(e,...t));return Cy(s),new Tl(r.firestore,null,s)}}function Lh(r,e,...t){if(r=(0,Qe.m9)(r),1===arguments.length&&(e=Ji.A()),Ig("doc","path",e),r instanceof Fd){const s=ii.fromString(e,...t);return Tg(s),new oo(r,null,new fn(s))}{if(!(r instanceof oo||r instanceof Tl))throw new jt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ii.fromString(e,...t));return Tg(s),new oo(r.firestore,r instanceof Tl?r.converter:null,new fn(s))}}function Sy(r,e){return r=(0,Qe.m9)(r),e=(0,Qe.m9)(e),(r instanceof oo||r instanceof Tl)&&(e instanceof oo||e instanceof Tl)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function tp(r,e){return r=(0,Qe.m9)(r),e=(0,Qe.m9)(e),r instanceof Wa&&e instanceof Wa&&r.firestore===e.firestore&&Jl(r._query,e._query)&&r.converter===e.converter}class yE{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Pf(this,"async_queue_retry"),this.Xc=()=>{const t=Ih();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Ih();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ih();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Fr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ke.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Qo(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,Ve("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=rg.createAndSchedule(this,e,t,s,d=>this.na(d));return this.zc.push(a),a}Zc(){this.Wc&&Xt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ke.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Vh(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class bg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mo extends Fd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new yE,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cu(this),this._firestoreClient.terminate()}}function ys(r){return r._firestoreClient||Cu(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Cu(r){var e,t,s;const a=r._freezeSettings(),d=(R=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new go(r._databaseId,R,r._persistenceKey,(X=a).host,X.ssl,X.experimentalForceLongPolling,X.experimentalAutoDetectLongPolling,Cg(X.experimentalLongPollingOptions),X.useFetchStreams));var R,X;r._firestoreClient=new Dv(r._authCredentials,r._appCheckCredentials,r._queue,d),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function My(r,e,t){const s=new Fr;return r.asyncQueue.enqueue((0,Ke.Z)(function*(){try{yield ld(r,t),yield Zf(r,e),s.resolve()}catch(a){const d=a;if(!Qf(d))throw d;Ft("Error enabling indexeddb cache. Falling back to memory cache: "+d),s.reject(d)}})).then(()=>s.promise)}function Py(r){if(r._initialized||r._terminated)throw new jt(Dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nu(Cs.fromBase64String(e))}catch(t){throw new jt(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nu(Cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new jt(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pc{constructor(e){this._methodName=e}}class Vd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new jt(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new jt(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xr(this._lat,e._lat)||xr(this._long,e._long)}}const rp=/^__.*__$/;class Sg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new S(e,this.data,this.fieldMask,t,this.fieldTransforms):new v(e,this.data,t,this.fieldTransforms)}}class Ag{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new S(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rg(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt()}}class Uh{constructor(e,t,s,a,d,m){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===d&&this.ua(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Uh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return sp(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Rg(this.ca)&&rp.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Oy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||zu(e)}ya(e,t,s,a=!1){return new Uh({ca:e,methodName:t,ga:s,path:gs.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(r){const e=r._freezeSettings(),t=zu(r._databaseId);return new Oy(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Bh(r,e,t,s,a,d={}){const m=r.ya(d.merge||d.mergeFields?2:0,e,t,a);Ng("Data must be an object, but it was:",m,s);const R=Ly(s,m);let G,X;if(d.merge)G=new ji(m.fieldMask),X=m.fieldTransforms;else if(d.mergeFields){const ge=[];for(const Ue of d.mergeFields){const Et=jh(e,Ue,t);if(!m.contains(Et))throw new jt(Dt.INVALID_ARGUMENT,`Field '${Et}' is specified in your field mask but missing from your input data.`);Uy(ge,Et)||ge.push(Et)}G=new ji(ge),X=m.fieldTransforms.filter(Ue=>G.covers(Ue.field))}else G=null,X=m.fieldTransforms;return new Sg(new Ii(R),G,X)}class Ud extends Pc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ud}}function ky(r,e,t){return new Uh({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mg extends Pc{_toFieldTransform(e){return new _d(e.path,new oc)}isEqual(e){return e instanceof Mg}}class Fv extends Pc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ky(this,e,!0),s=this.pa.map(d=>ud(d,t)),a=new Xl(s);return new _d(e.path,a)}isEqual(e){return this===e}}class Lv extends Pc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ky(this,e,!0),s=this.pa.map(d=>ud(d,t)),a=new ja(s);return new _d(e.path,a)}isEqual(e){return this===e}}class Vv extends Pc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new lc(e.serializer,Jd(e.serializer,this.Ia));return new _d(e.path,t)}isEqual(e){return this===e}}function xg(r,e,t,s){const a=r.ya(1,e,t);Ng("Data must be an object, but it was:",a,s);const d=[],m=Ii.empty();sa(s,(G,X)=>{const ge=ip(e,G,t);X=(0,Qe.m9)(X);const Ue=a.da(ge);if(X instanceof Ud)d.push(ge);else{const Et=ud(X,Ue);null!=Et&&(d.push(ge),m.set(ge,Et))}});const R=new ji(d);return new Ag(m,R,a.fieldTransforms)}function Pg(r,e,t,s,a,d){const m=r.ya(1,e,t),R=[jh(e,s,t)],G=[a];if(d.length%2!=0)throw new jt(Dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Et=0;Et<d.length;Et+=2)R.push(jh(e,d[Et])),G.push(d[Et+1]);const X=[],ge=Ii.empty();for(let Et=R.length-1;Et>=0;--Et)if(!Uy(X,R[Et])){const $t=R[Et];let wn=G[Et];wn=(0,Qe.m9)(wn);const Hn=m.da($t);if(wn instanceof Ud)X.push($t);else{const qn=ud(wn,Hn);null!=qn&&(X.push($t),ge.set($t,qn))}}const Ue=new ji(X);return new Ag(ge,Ue,m.fieldTransforms)}function Fy(r,e,t,s=!1){return ud(t,r.ya(s?4:3,e))}function ud(r,e){if(Vy(r=(0,Qe.m9)(r)))return Ng("Unsupported field value:",e,r),Ly(r,e);if(r instanceof Pc)return function(t,s){if(!Rg(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let d=0;for(const m of t){let R=ud(m,s.wa(d));null==R&&(R={nullValue:"NULL_VALUE"}),a.push(R),d++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,Qe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Jd(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=ws.fromDate(t);return{timestampValue:Il(s.serializer,a)}}if(t instanceof ws){const a=new ws(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Il(s.serializer,a)}}if(t instanceof Vd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nu)return{bytesValue:N_(s.serializer,t._byteString)};if(t instanceof oo){const a=s.databaseId,d=t.firestore._databaseId;if(!d.isEqual(a))throw s._a(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:rm(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Ho(t)}`)}(r,e)}function Ly(r,e){const t={};return Ul(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(r,(s,a)=>{const d=ud(a,e.ha(s));null!=d&&(t[s]=d)}),{mapValue:{fields:t}}}function Vy(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof ws||r instanceof Vd||r instanceof nu||r instanceof oo||r instanceof Pc)}function Ng(r,e,t){if(!Vy(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Ho(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function jh(r,e,t){if((e=(0,Qe.m9)(e))instanceof gc)return e._internalPath;if("string"==typeof e)return ip(r,e);throw sp("Field path arguments must be of type string or ",r,!1,void 0,t)}const Uv=new RegExp("[~\\*/\\[\\]]");function ip(r,e,t){if(e.search(Uv)>=0)throw sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new gc(...e.split("."))._internalPath}catch(s){throw sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function sp(r,e,t,s,a){const d=s&&!s.isEmpty(),m=void 0!==a;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let G="";return(d||m)&&(G+=" (found",d&&(G+=` in field ${s}`),m&&(G+=` in document ${a}`),G+=")"),new jt(Dt.INVALID_ARGUMENT,R+r+G)}function Uy(r,e){return r.some(t=>t.isEqual(e))}class Hh{constructor(e,t,s,a,d){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new oo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new By(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($h("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class By extends Hh{data(){return super.data()}}function $h(r,e){return"string"==typeof e?ip(r,e):e instanceof gc?e._internalPath:e._delegate._internalPath}function Og(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new jt(Dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class Bd extends op{}function mc(r,e,...t){let s=[];e instanceof op&&s.push(e),s=s.concat(t),function(a){const d=a.filter(R=>R instanceof cd).length,m=a.filter(R=>R instanceof jd).length;if(d>1||d>0&&m>0)throw new jt(Dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class jd extends Bd{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new jd(e,t,s)}_apply(e){const t=this._parse(e);return Wh(e._query,t),new Wa(e.firestore,e.converter,Po(e._query,t))}_parse(e){const t=Nc(e.firestore);return function(a,d,m,R,G,X,ge){let Ue;if(G.isKeyField()){if("array-contains"===X||"array-contains-any"===X)throw new jt(Dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${X}' queries on documentId().`);if("in"===X||"not-in"===X){zy(ge,X);const Et=[];for(const $t of ge)Et.push(Wy(R,a,$t));Ue={arrayValue:{values:Et}}}else Ue=Wy(R,a,ge)}else"in"!==X&&"not-in"!==X&&"array-contains-any"!==X||zy(ge,X),Ue=Fy(m,"where",ge,"in"===X||"not-in"===X);return fi.create(G,X,Ue)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class cd extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cd(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:qi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let d=s;const m=a.getFlattenedFilters();for(const R of m)Wh(d,R),d=Po(d,R)}(e._query,t),new Wa(e.firestore,e.converter,Po(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yc extends Bd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yc(e,t)}_apply(e){const t=function(s,a,d){if(null!==s.startAt)throw new jt(Dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new jt(Dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new Bo(a,d);return function(R,G){if(null===Ua(R)){const X=oa(R);null!==X&&Ky(0,X,G.field)}}(s,m),m}(e._query,this._field,this._direction);return new Wa(e.firestore,e.converter,function(s,a){const d=s.explicitOrderBy.concat([a]);return new li(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class ap extends Bd{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new ap(e,t,s)}_apply(e){return new Wa(e.firestore,e.converter,vu(e._query,this._limit,this._limitType))}}class $d extends Bd{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new $d(e,t,s)}_apply(e){const t=Gy(e,this.type,this._docOrFields,this._inclusive);return new Wa(e.firestore,e.converter,(a=t,new li((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Gh extends Bd{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Gh(e,t,s)}_apply(e){const t=Gy(e,this.type,this._docOrFields,this._inclusive);return new Wa(e.firestore,e.converter,(a=t,new li((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Gy(r,e,t,s){if(t[0]=(0,Qe.m9)(t[0]),t[0]instanceof Hh)return function(a,d,m,R,G){if(!R)throw new jt(Dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const X=[];for(const ge of Ia(a))if(ge.field.isKeyField())X.push(A(d,R.key));else{const Ue=R.data.field(ge.field);if(Ea(Ue))throw new jt(Dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ue){const Et=ge.field.canonicalString();throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Et}' (used as the orderBy) does not exist.`)}X.push(Ue)}return new Xo(X,G)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Nc(r.firestore);return function(d,m,R,G,X,ge){const Ue=d.explicitOrderBy;if(X.length>Ue.length)throw new jt(Dt.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Et=[];for(let $t=0;$t<X.length;$t++){const wn=X[$t];if(Ue[$t].field.isKeyField()){if("string"!=typeof wn)throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof wn}`);if(!ms(d)&&-1!==wn.indexOf("/"))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${wn}' contains a slash.`);const Hn=d.path.child(ii.fromString(wn));if(!fn.isDocumentKey(Hn))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Hn}' is not because it contains an odd number of segments.`);const qn=new fn(Hn);Et.push(A(m,qn))}else{const Hn=Fy(R,G,wn);Et.push(Hn)}}return new Xo(Et,ge)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Wy(r,e,t){if("string"==typeof(t=(0,Qe.m9)(t))){if(""===t)throw new jt(Dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ms(e)&&-1!==t.indexOf("/"))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ii.fromString(t));if(!fn.isDocumentKey(s))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return A(r,new fn(s))}if(t instanceof oo)return A(r,t._key);throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ho(t)}.`)}function zy(r,e){if(!Array.isArray(r)||0===r.length)throw new jt(Dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wh(r,e){if(e.isInequality()){const s=oa(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const d=Ua(r);null!==d&&Ky(0,a,d)}const t=function(s,a){for(const d of s)for(const m of d.getFlattenedFilters())if(a.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new jt(Dt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ky(r,e,t){if(!t.isEqual(e))throw new jt(Dt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gd{convertValue(e,t="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return As(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return sa(e,(a,d)=>{s[a]=this.convertValue(d,t)}),s}convertGeoPoint(e){return new Vd(As(e.latitude),As(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Yl(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const t=Bl(e);return new ws(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ii.fromString(e);Gt(lf(s));const a=new Jo(s.get(1),s.get(3)),d=new fn(s.popFirst(5));return a.isEqual(t)||Ve(`Document ${d} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function yo(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class EE extends Gd{constructor(e){super(),this.firestore=e}convertBytes(e){return new nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oo(this.firestore,null,t)}}class Oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ju extends Hh{constructor(e,t,s,a,d,m){super(e,t,s,a,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field($h("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Kh extends Ju{data(e={}){return super.data(e)}}class kc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Oc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Kh(this._firestore,this._userDataWriter,s.key,s,new Oc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new jt(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(m=>({type:"added",doc:new Kh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new Oc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>a||3!==m.type).map(m=>{const R=new Kh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new Oc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let G=-1,X=-1;return 0!==m.type&&(G=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),X=d.indexOf(m.doc.key)),{type:Kv(m.type),doc:R,oldIndex:G,newIndex:X}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kv(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt()}}function Wd(r,e){return r instanceof Ju&&e instanceof Ju?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof kc&&e instanceof kc&&r._firestore===e._firestore&&tp(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class Fc extends Gd{constructor(e){super(),this.firestore=e}convertBytes(e){return new nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oo(this.firestore,null,t)}}function Qy(r,e,t){r=Hi(r,oo);const s=Hi(r.firestore,mo),a=yo(r.converter,e,t);return dd(s,[Bh(Nc(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,Vs.none())])}function zd(r,e,t,...s){r=Hi(r,oo);const a=Hi(r.firestore,mo),d=Nc(a);let m;return m="string"==typeof(e=(0,Qe.m9)(e))||e instanceof gc?Pg(d,"updateDoc",r._key,e,t,s):xg(d,"updateDoc",r._key,e),dd(a,[m.toMutation(r._key,Vs.exists(!0))])}function Jy(r,...e){var t,s,a;r=(0,Qe.m9)(r);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||Vh(e[m])||(d=e[m],m++);const R={includeMetadataChanges:d.includeMetadataChanges};if(Vh(e[m])){const Ue=e[m];e[m]=null===(t=Ue.next)||void 0===t?void 0:t.bind(Ue),e[m+1]=null===(s=Ue.error)||void 0===s?void 0:s.bind(Ue),e[m+2]=null===(a=Ue.complete)||void 0===a?void 0:a.bind(Ue)}let G,X,ge;if(r instanceof oo)X=Hi(r.firestore,mo),ge=zs(r._key.path),G={next:Ue=>{e[m]&&e[m](up(X,r,Ue))},error:e[m+1],complete:e[m+2]};else{const Ue=Hi(r,Wa);X=Hi(Ue.firestore,mo),ge=Ue._query;const Et=new Fc(X);G={next:$t=>{e[m]&&e[m](new kc(X,Et,Ue,$t))},error:e[m+1],complete:e[m+2]},Og(r._query)}return function(Ue,Et,$t,wn){const Hn=new ad(wn),qn=new Rc(Et,Hn,$t);return Ue.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return Ga(yield kd(Ue),qn)})),()=>{Hn.Dc(),Ue.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return Sd(yield kd(Ue),qn)}))}}(ys(X),ge,R,G)}function dd(r,e){return function(t,s){const a=new Fr;return t.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function ny(r,e,t){return ag.apply(this,arguments)}(yield Fh(t),s,a)})),a.promise}(ys(r),e)}function up(r,e,t){const s=t.docs.get(e._key),a=new Fc(r);return new Ju(r,a,e._key,s,new Oc(t.hasPendingWrites,t.fromCache),e.converter)}const Zh={maxAttempts:5};class e_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nc(e)}set(e,t,s){this._verifyNotCommitted();const a=Lc(e,this._firestore),d=yo(a.converter,t,s),m=Bh(this._dataReader,"WriteBatch.set",a._key,d,null!==a.converter,s);return this._mutations.push(m.toMutation(a._key,Vs.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const d=Lc(e,this._firestore);let m;return m="string"==typeof(t=(0,Qe.m9)(t))||t instanceof gc?Pg(this._dataReader,"WriteBatch.update",d._key,t,s,a):xg(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,Vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lc(e,this._firestore);return this._mutations=this._mutations.concat(new ke(t._key,Vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new jt(Dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lc(r,e){if((r=(0,Qe.m9)(r)).firestore!==e)throw new jt(Dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Nc(e)}get(e){const t=Lc(e,this._firestore),s=new EE(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Xt();const d=a[0];if(d.isFoundDocument())return new Hh(this._firestore,s,d.key,d,t.converter);if(d.isNoDocument())return new Hh(this._firestore,s,t._key,null,t.converter);throw Xt()})}set(e,t,s){const a=Lc(e,this._firestore),d=yo(a.converter,t,s),m=Bh(this._dataReader,"Transaction.set",a._key,d,null!==a.converter,s);return this._transaction.set(a._key,m),this}update(e,t,s,...a){const d=Lc(e,this._firestore);let m;return m="string"==typeof(t=(0,Qe.m9)(t))||t instanceof gc?Pg(this._dataReader,"Transaction.update",d._key,t,s,a):xg(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=Lc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lc(e,this._firestore),s=new Fc(this._firestore);return super.get(e).then(a=>new Ju(this._firestore,s,t._key,a._document,new Oc(!1,!1),t.converter))}}function dp(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function i_(){if("undefined"==typeof Uint8Array)throw new jt("unimplemented","Uint8Arrays are not available in this environment.")}function hp(){if(!function va(){return"undefined"!=typeof atob}())throw new jt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){T=Kt.SDK_VERSION,(0,Kt._registerComponent)(new it.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const d=t.getProvider("app").getImmediate(),m=new mo(new ga(t.getProvider("auth-internal")),new qa(t.getProvider("app-check-internal")),function(R,G){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new jt(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(R.options.projectId,G)}(d,s),d);return a=Object.assign({useFetchStreams:e},a),m._setSettings(a),m},"PUBLIC").setMultipleInstances(!0)),(0,Kt.registerVersion)(P,"3.13.0",r),(0,Kt.registerVersion)(P,"3.13.0","esm2017")}();class Yh{constructor(e){this._delegate=e}static fromBase64String(e){return hp(),new Yh(nu.fromBase64String(e))}static fromUint8Array(e){return i_(),new Yh(nu.fromUint8Array(e))}toBase64(){return hp(),this._delegate.toBase64()}toUint8Array(){return i_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fp(r){return function s_(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class p0{enableIndexedDbPersistence(e,t){return function Ay(r,e){Py(r=Hi(r,mo));const t=ys(r);if(t._uninitializedComponentsProvider)throw new jt(Dt.FAILED_PRECONDITION,"SDK cache is already specified.");Ft("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new xc;return My(t,a,new zf(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ry(r){Py(r=Hi(r,mo));const e=ys(r);if(e._uninitializedComponentsProvider)throw new jt(Dt.FAILED_PRECONDITION,"SDK cache is already specified.");Ft("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new xc;return My(e,s,new Kf(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xv(r){if(r._initialized&&!r._terminated)throw new jt(Dt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Ke.Z)(function*(){try{yield(t=(0,Ke.Z)(function*(s){if(!ro.D())return Promise.resolve();const a=s+"main";yield ro.delete(a)}),function(s){return t.apply(this,arguments)})(Pm(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class o_{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ft("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function by(r,e,t,s={}){var a;const d=(r=Hi(r,Fd))._getSettings(),m=`${e}:${t}`;if("firestore.googleapis.com"!==d.host&&d.host!==m&&Ft("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},d),{host:m,ssl:!1})),s.mockUserToken){let R,G;if("string"==typeof s.mockUserToken)R=s.mockUserToken,G=D.MOCK_USER;else{R=(0,Qe.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const X=s.mockUserToken.sub||s.mockUserToken.user_id;if(!X)throw new jt(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");G=new D(X)}r._authCredentials=new ia(new il(R,G))}}(this._delegate,e,t,s)}enableNetwork(){return function Nv(r){return function Sv(r){return r.asyncQueue.enqueue((0,Ke.Z)(function*(){const e=yield py(r),t=yield mg(r);return e.setNetworkEnabled(!0),function(s){const a=en(s);return a.vu.delete(0),ed(a)}(t)}))}(ys(r=Hi(r,mo)))}(this._delegate)}disableNetwork(){return function Dg(r){return function gy(r){return r.asyncQueue.enqueue((0,Ke.Z)(function*(){const e=yield py(r),t=yield mg(r);return e.setNetworkEnabled(!1),(s=(0,Ke.Z)(function*(a){const d=en(a);d.vu.add(0),yield td(d),d.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(ys(r=Hi(r,mo)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,wy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Pv(r){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function pE(r,e){return cg.apply(this,arguments)}(yield Fh(e),t)})),t.promise}(ys(r=Hi(r,mo)))}(this._delegate)}onSnapshotsInSync(e){return function Qv(r,e){return function yy(r,e){const t=new ad(e);return r.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return s=yield kd(r),a=t,en(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return s=yield kd(r),a=t,void en(s).ku.delete(a);var s,a}))}}(ys(r=Hi(r,mo)),Vh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new jt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qd(this,Dy(this._delegate,e))}catch(t){throw bl(t,"collection()","Firestore.collection()")}}doc(e){try{return new Iu(this,Lh(this._delegate,e))}catch(t){throw bl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Dl(this,function Rv(r,e){if(r=Hi(r,Fd),Ig("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jt(Dt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wa(r,null,(t=e,new li(ii.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=Hi(r,mo);const s=Object.assign(Object.assign({},Zh),t);return function(a){if(a.maxAttempts<1)throw new jt(Dt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,d,m){const R=new Fr;return a.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){const G=yield function yg(r){return Od(r).then(e=>e.datastore)}(a);new mE(a.asyncQueue,G,m,d,R).run()})),R.promise}(ys(r),a=>e(new a0(r,a)),s)}(this._delegate,t=>e(new a_(this,t)))}batch(){return ys(this._delegate),new Fg(new e_(this._delegate,e=>dd(this._delegate,e)))}loadBundle(e){return function Ov(r,e){const t=ys(r=Hi(r,mo)),s=new bg;return function _y(r,e,t,s){const a=function(d,m){let R;return R="string"==typeof d?A_().encode(d):d,G=function(G,X){if(G instanceof Uint8Array)return fy(G,X);if(G instanceof ArrayBuffer)return fy(new Uint8Array(G),X);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new qf(G,m);var G}(t,zu(e));r.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){!function bv(r,e,t){const s=en(r);var a;(a=(0,Ke.Z)(function*(d,m,R){try{const G=yield m.getMetadata();if(yield function(Et,$t){const wn=en(Et),Hn=jo($t.createTime);return wn.persistence.runTransaction("hasNewerBundle","readonly",qn=>wn.qs.getBundleMetadata(qn,$t.id)).then(qn=>!!qn&&qn.createTime.compareTo(Hn)>=0)}(d.localStore,G))return yield m.close(),R._completeWith({taskState:"Success",documentsLoaded:(Et=G).totalDocuments,bytesLoaded:Et.totalBytes,totalDocuments:Et.totalDocuments,totalBytes:Et.totalBytes}),Promise.resolve(new Set);R._updateProgress(id(G));const X=new Md(G,d.localStore,m.serializer);let ge=yield m.bc();for(;ge;){const Et=yield X.zu(ge);Et&&R._updateProgress(Et),ge=yield m.bc()}const Ue=yield X.complete();return yield Yu(d,Ue.Ju,void 0),yield function(Et,$t){const wn=en(Et);return wn.persistence.runTransaction("Save bundle","readwrite",Hn=>wn.qs.saveBundleMetadata(Hn,$t))}(d.localStore,G),R._completeWith(Ue.progress),Promise.resolve(Ue.Hu)}catch(G){return Ft("SyncEngine",`Loading bundle failed with ${G}`),R._failWith(G),Promise.resolve(new Set)}var Et}),function(d,m,R){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Fh(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function xy(r,e){return function vy(r,e){return r.asyncQueue.enqueue((0,Ke.Z)(function*(){return function(t,s){const a=en(t);return a.persistence.runTransaction("Get named query","readonly",d=>a.qs.getNamedQuery(d,s))}(yield kh(r),e)}))}(ys(r=Hi(r,mo)),e).then(t=>t?new Wa(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Dl(this,t):null)}}class pp extends Gd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yh(new nu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Iu.forKey(t,this.firestore,null)}}class a_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}get(e){const t=fd(e);return this._delegate.get(t).then(s=>new Qh(this._firestore,new Ju(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=fd(e);return s?(dp("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=fd(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=fd(e);return this._delegate.delete(t),this}}class Fg{constructor(e){this._delegate=e}set(e,t,s){const a=fd(e);return s?(dp("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=fd(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=fd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hd{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Kh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jh(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=hd.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let d=a.get(t);return d||(d=new hd(e,new pp(e),t),a.set(t,d)),d}}hd.INSTANCES=new WeakMap;class Iu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new jt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Iu(t,new oo(t._delegate,s,new fn(e)))}static forKey(e,t,s){return new Iu(t,new oo(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new qd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qd(this.firestore,Dy(this._delegate,e))}catch(t){throw bl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Qe.m9)(e))instanceof oo&&Sy(this._delegate,e)}set(e,t){t=dp("DocumentReference.set",t);try{return t?Qy(this._delegate,e,t):Qy(this._delegate,e)}catch(s){throw bl(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?zd(this._delegate,e):zd(this._delegate,e,t,...s)}catch(a){throw bl(a,"updateDoc()","DocumentReference.update()")}}delete(){return function qh(r){return dd(Hi(r.firestore,mo),[new ke(r._key,Vs.none())])}(this._delegate)}onSnapshot(...e){const t=l_(e),s=u_(e,a=>new Qh(this.firestore,new Ju(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Jy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Zv(r){r=Hi(r,oo);const e=Hi(r.firestore,mo),t=ys(e),s=new Fc(e);return function vg(r,e){const t=new Fr;return r.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return(s=(0,Ke.Z)(function*(a,d,m){try{const R=yield function(G,X){const ge=en(G);return ge.persistence.runTransaction("read document","readonly",Ue=>ge.localDocuments.getDocument(Ue,X))}(a,d);R.isFoundDocument()?m.resolve(R):R.isNoDocument()?m.resolve(null):m.reject(new jt(Dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const G=qu(R,`Failed to get document '${d} from cache`);m.reject(G)}}),function(a,d,m){return s.apply(this,arguments)})(yield kh(r),e,t);var s})),t.promise}(t,r._key).then(a=>new Ju(e,s,r._key,a,new Oc(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function lp(r){r=Hi(r,oo);const e=Hi(r.firestore,mo);return Eg(ys(e),r._key,{source:"server"}).then(t=>up(e,r,t))}(this._delegate):function qv(r){r=Hi(r,oo);const e=Hi(r.firestore,mo);return Eg(ys(e),r._key).then(t=>up(e,r,t))}(this._delegate),t.then(s=>new Qh(this.firestore,new Ju(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Iu(this.firestore,this._delegate.withConverter(e?hd.getInstance(this.firestore,e):null))}}function bl(r,e,t){return r.message=r.message.replace(e,t),r}function l_(r){for(const e of r)if("object"==typeof e&&!fp(e))return e;return{}}function u_(r,e){var t,s;let a;return a=fp(r[0])?r[0]:fp(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:d=>{a.next&&a.next(e(d))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Qh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Iu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Wd(this._delegate,e._delegate)}}class Jh extends Qh{data(e){const t=this._delegate.data(e);return function xi(r,e){r||Xt()}(void 0!==t),t}}class Dl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}where(e,t,s){try{return new Dl(this.firestore,mc(this._delegate,function jy(r,e,t){const s=e,a=$h("where",r);return jd._create(a,s,t)}(e,t,s)))}catch(a){throw bl(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Dl(this.firestore,mc(this._delegate,function jv(r,e="asc"){const t=e,s=$h("orderBy",r);return yc._create(s,t)}(e,t)))}catch(s){throw bl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Dl(this.firestore,mc(this._delegate,function Hd(r){return Iy("limit",r),ap._create("limit",r,"F")}(e)))}catch(t){throw bl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Dl(this.firestore,mc(this._delegate,function Hv(r){return Iy("limitToLast",r),ap._create("limitToLast",r,"L")}(e)))}catch(t){throw bl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Dl(this.firestore,mc(this._delegate,function _E(...r){return $d._create("startAt",r,!0)}(...e)))}catch(t){throw bl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Dl(this.firestore,mc(this._delegate,function $y(...r){return $d._create("startAfter",r,!1)}(...e)))}catch(t){throw bl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Dl(this.firestore,mc(this._delegate,function vE(...r){return Gh._create("endBefore",r,!1)}(...e)))}catch(t){throw bl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Dl(this.firestore,mc(this._delegate,function Ur(...r){return Gh._create("endAt",r,!0)}(...e)))}catch(t){throw bl(t,"endAt()","Query.endAt()")}}isEqual(e){return tp(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Zy(r){r=Hi(r,Wa);const e=Hi(r.firestore,mo),t=ys(e),s=new Fc(e);return function my(r,e){const t=new Fr;return r.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return(s=(0,Ke.Z)(function*(a,d,m){try{const R=yield jp(a,d,!0),G=new sg(d,R.ir),X=G.sc(R.documents),ge=G.applyChanges(X,!1);m.resolve(ge.snapshot)}catch(R){const G=qu(R,`Failed to execute query '${d} against cache`);m.reject(G)}}),function(a,d,m){return s.apply(this,arguments)})(yield kh(r),e,t);var s})),t.promise}(t,r._query).then(a=>new kc(e,s,r,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function Yy(r){r=Hi(r,Wa);const e=Hi(r.firestore,mo),t=ys(e),s=new Fc(e);return wg(t,r._query,{source:"server"}).then(a=>new kc(e,s,r,a))}(this._delegate):function qy(r){r=Hi(r,Wa);const e=Hi(r.firestore,mo),t=ys(e),s=new Fc(e);return Og(r._query),wg(t,r._query).then(a=>new kc(e,s,r,a))}(this._delegate),t.then(s=>new gp(this.firestore,new kc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=l_(e),s=u_(e,a=>new gp(this.firestore,new kc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Jy(this._delegate,t,s)}withConverter(e){return new Dl(this.firestore,this._delegate.withConverter(e?hd.getInstance(this.firestore,e):null))}}class c_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Dl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new c_(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Jh(this._firestore,s))})}isEqual(e){return Wd(this._delegate,e._delegate)}}class qd extends Dl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Iu(this.firestore,e):null}doc(e){try{return new Iu(this.firestore,void 0===e?Lh(this._delegate):Lh(this._delegate,e))}catch(t){throw bl(t,"doc()","CollectionReference.doc()")}}add(e){return function Yv(r,e){const t=Hi(r.firestore,mo),s=Lh(r),a=yo(r.converter,e);return dd(t,[Bh(Nc(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,Vs.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Iu(this.firestore,t))}isEqual(e){return Sy(this._delegate,e._delegate)}withConverter(e){return new qd(this.firestore,this._delegate.withConverter(e?hd.getInstance(this.firestore,e):null))}}function fd(r){return Hi(r,oo)}class mp{constructor(...e){this._delegate=new gc(...e)}static documentId(){return new mp(gs.keyField().canonicalString())}isEqual(e){return(e=(0,Qe.m9)(e))instanceof gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class pd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function t_(){return new Mg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pd(e)}static delete(){const e=function u0(){return new Ud("deleteField")}();return e._methodName="FieldValue.delete",new pd(e)}static arrayUnion(...e){const t=function c0(...r){return new Fv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new pd(t)}static arrayRemove(...e){const t=function d0(...r){return new Lv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new pd(t)}static increment(e){const t=function Kd(r){return new Vv("increment",r)}(e);return t._methodName="FieldValue.increment",new pd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const g0={Firestore:o_,GeoPoint:Vd,Timestamp:ws,Blob:Yh,Transaction:a_,WriteBatch:Fg,DocumentReference:Iu,DocumentSnapshot:Qh,Query:Dl,QueryDocumentSnapshot:Jh,QuerySnapshot:gp,CollectionReference:qd,FieldPath:mp,FieldValue:pd,setLogLevel:function kg(r){!function de(r){H.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function Lg(r){(function m0(r,e){r.INTERNAL.registerComponent(new it.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},g0)))})(r,(e,t)=>new o_(e,t,new p0)),r.registerVersion("@firebase/firestore-compat","0.3.12")}(Ct.Z);var Xu=U(1205),d_=U(6215),Vg=U(9260);function h_(r,e){return function y0(r,e=L.z){return new ee.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function Bg(r,e){return h_(r,e).pipe((0,ve.U)(t=>({payload:t,type:"query"})))}function Xh(r,e){return Bg(r,e).pipe((0,We.O)(void 0),Ie(),(0,ve.U)(([t,s])=>{const a=s.payload.docChanges(),d=a.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((m,R)=>{const G=a.find(ge=>ge.doc.ref.isEqual(m.ref)),X=null==t?void 0:t.payload.docs.find(ge=>ge.ref.isEqual(m.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(m.metadata)||!G&&X&&JSON.stringify(X.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:m}})}),d}))}function f_(r,e,t){return Xh(r,t).pipe((0,Je.R)((s,a)=>function p_(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function g_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return jg(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jg(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jg(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(d=>d.payload),e),[]),(0,Tt.x)(),(0,ve.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function jg(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function _0(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class m_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Xh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ve.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,We.O)(void 0),Ie(),(0,ft.h)(([s,a])=>a.length>0||!s),(0,ve.U)(([s,a])=>a),je.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Je.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=_0(e);return f_(this.query,t,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(e={}){return Bg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),je.iC)}get(e){return(0,re.D)(this.query.get(e)).pipe(je.iC)}add(e){return this.ref.add(e)}doc(e){return new ef(this.ref.doc(e),this.afs)}}class ef{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:d}=Hg(s,t);return new m_(a,d,this.afs)}snapshotChanges(){return function Ug(r,e){return h_(r,e).pipe((0,We.O)(void 0),Ie(),(0,ve.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ve.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,re.D)(this.ref.get(e)).pipe(je.iC)}}class v0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Xh(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,ft.h)(t=>t.length>0),je.iC):Xh(this.query,this.afs.schedulers.outsideAngular).pipe(je.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Je.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=_0(e);return f_(this.query,t,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(e={}){return Bg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),je.iC)}get(e){return(0,re.D)(this.query.get(e)).pipe(je.iC)}}const gd=new _.OlP("angularfire2.enableFirestorePersistence"),Zd=new _.OlP("angularfire2.firestore.persistenceSettings"),E0=new _.OlP("angularfire2.firestore.settings"),TE=new _.OlP("angularfire2.firestore.use-emulator");function Hg(r,e=(t=>t)){return{query:e(r),ref:r}}let y_=(()=>{class r{constructor(t,s,a,d,m,R,G,X,ge,Ue,Et,$t,wn,Hn,qn,Wr,Zi){this.schedulers=G;const zr=(0,bt.on)(t,R,s),$o=ge;Ue&&(0,Xu.nw)(zr,R,Et,wn,Hn,qn,$t,Wr),[this.firestore,this.persistenceEnabled$]=(0,bt.cc)(`${zr.name}.firestore`,"AngularFirestore",zr.name,()=>{const Ks=R.runOutsideAngular(()=>zr.firestore());if(d&&Ks.settings(d),$o&&Ks.useEmulator(...$o),a&&!(0,Mt.PM)(m)){const qs=()=>{try{return(0,re.D)(Ks.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(Sl){return"undefined"!=typeof console&&console.warn(Sl),(0,Pe.of)(!1)}};return[Ks,R.runOutsideAngular(qs)]}return[Ks,(0,Pe.of)(!1)]},[d,$o,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=Hg(a,s),R=this.schedulers.ngZone.run(()=>d);return new m_(R,m,this)}collectionGroup(t,s){const a=s||(m=>m),d=this.firestore.collectionGroup(t);return new v0(a(d),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new ef(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(_.LFG(bt.Dh),_.LFG(bt.xv,8),_.LFG(gd,8),_.LFG(E0,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(je.HU),_.LFG(Zd,8),_.LFG(TE,8),_.LFG(Xu.zQ,8),_.LFG(Xu.Qv,8),_.LFG(Xu.L6,8),_.LFG(Xu._Q,8),_.LFG(Xu.rT,8),_.LFG(Xu.lh,8),_.LFG(Xu.f7,8),_.LFG(d_.nm,8))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),w0=(()=>{class r{constructor(){Vg.Z.registerVersion("angularfire",je.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:gd,useValue:!0},{provide:Zd,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=_.oAB({type:r}),r.\u0275inj=_.cJS({providers:[y_]}),r})()},377:(hn,ut,U)=>{U.d(ut,{Q1:()=>ce,TE:()=>qr});var _=U(8306),L=U(9646),ee=U(8996),re=U(4986),Pe=U(4482),je=U(5403),Be=U(4004),rt=U(3900),Ie=U(4976),ve=U(5e3),Je=U(2011),Tt=U(3942),ft=U(5861),bt=U(6881),Mt=U(2090),Xe=U(4859);const Ct="firebasestorage.googleapis.com",Ke="storageBucket";class Qe extends Mt.ZR{constructor(q,pe,De=0){super(It(q),`Firebase Storage: ${pe} (${It(q)})`),this.status_=De,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(q){this.status_=q}_codeEquals(q){return It(q)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(q){this.customData.serverResponse=q,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var _t=(()=>{return(W=_t||(_t={})).UNKNOWN="unknown",W.OBJECT_NOT_FOUND="object-not-found",W.BUCKET_NOT_FOUND="bucket-not-found",W.PROJECT_NOT_FOUND="project-not-found",W.QUOTA_EXCEEDED="quota-exceeded",W.UNAUTHENTICATED="unauthenticated",W.UNAUTHORIZED="unauthorized",W.UNAUTHORIZED_APP="unauthorized-app",W.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",W.INVALID_CHECKSUM="invalid-checksum",W.CANCELED="canceled",W.INVALID_EVENT_NAME="invalid-event-name",W.INVALID_URL="invalid-url",W.INVALID_DEFAULT_BUCKET="invalid-default-bucket",W.NO_DEFAULT_BUCKET="no-default-bucket",W.CANNOT_SLICE_BLOB="cannot-slice-blob",W.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",W.NO_DOWNLOAD_URL="no-download-url",W.INVALID_ARGUMENT="invalid-argument",W.INVALID_ARGUMENT_COUNT="invalid-argument-count",W.APP_DELETED="app-deleted",W.INVALID_ROOT_OPERATION="invalid-root-operation",W.INVALID_FORMAT="invalid-format",W.INTERNAL_ERROR="internal-error",W.UNSUPPORTED_ENVIRONMENT="unsupported-environment",_t;var W})();function It(W){return"storage/"+W}function be(){return new Qe(_t.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ln(){return new Qe(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rn(){return new Qe(_t.CANCELED,"User canceled the upload/download.")}function un(){return new Qe(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Re(W){return new Qe(_t.INVALID_ARGUMENT,W)}function Ee(){return new Qe(_t.APP_DELETED,"The Firebase app was deleted.")}function Ne(W){return new Qe(_t.INVALID_ROOT_OPERATION,"The operation '"+W+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ot(W,q){return new Qe(_t.INVALID_FORMAT,"String does not match format '"+W+"': "+q)}function qt(W){throw new Qe(_t.INTERNAL_ERROR,"Internal error: "+W)}class pn{constructor(q,pe){this.bucket=q,this.path_=pe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const q=encodeURIComponent;return"/b/"+q(this.bucket)+"/o/"+q(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(q,pe){let De;try{De=pn.makeFromUrl(q,pe)}catch(ze){return new pn(q,"")}if(""===De.path)return De;throw function ar(W){return new Qe(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+W+"'.")}(q)}static makeFromUrl(q,pe){let De=null;const ze="([A-Za-z0-9.\\-_]+)",On=new RegExp("^gs://"+ze+"(/(.*))?$","i");function Jn(Bi){Bi.path_=decodeURIComponent(Bi.path)}const ni=pe.replace(/[.]/g,"\\."),Li=[{regex:On,indices:{bucket:1,path:3},postModify:function vt(Bi){"/"===Bi.path.charAt(Bi.path.length-1)&&(Bi.path_=Bi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ni}/v[A-Za-z0-9_]+/b/${ze}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Jn},{regex:new RegExp(`^https?://${pe===Ct?"(?:storage.googleapis.com|storage.cloud.google.com)":pe}/${ze}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Jn}];for(let Bi=0;Bi<Li.length;Bi++){const Ns=Li[Bi],Eo=Ns.regex.exec(q);if(Eo){let js=Eo[Ns.indices.path];js||(js=""),De=new pn(Eo[Ns.indices.bucket],js),Ns.postModify(De);break}}if(null==De)throw function Ot(W){return new Qe(_t.INVALID_URL,"Invalid URL '"+W+"'.")}(q);return De}}class vn{constructor(q){this.promise_=Promise.reject(q)}getPromise(){return this.promise_}cancel(q=!1){}}function gn(W){return"string"==typeof W||W instanceof String}function sr(W){return Pn()&&W instanceof Blob}function Pn(){return"undefined"!=typeof Blob&&!(0,Mt.UG)()}function Ln(W,q,pe,De){if(De<q)throw Re(`Invalid value for '${W}'. Expected ${q} or greater.`);if(De>pe)throw Re(`Invalid value for '${W}'. Expected ${pe} or less.`)}function Qr(W,q,pe){let De=q;return null==pe&&(De=`https://${q}`),`${pe}://${De}/v0${W}`}function $i(W){const q=encodeURIComponent;let pe="?";for(const De in W)W.hasOwnProperty(De)&&(pe=pe+(q(De)+"=")+q(W[De])+"&");return pe=pe.slice(0,-1),pe}var xt=(()=>{return(W=xt||(xt={}))[W.NO_ERROR=0]="NO_ERROR",W[W.NETWORK_ERROR=1]="NETWORK_ERROR",W[W.ABORT=2]="ABORT",xt;var W})();function He(W,q){const pe=W>=500&&W<600,ze=-1!==[408,429].indexOf(W),vt=-1!==q.indexOf(W);return pe||ze||vt}class Ge{constructor(q,pe,De,ze,vt,Yt,On,xn,Jn,Bn,ni,Gr=!0){this.url_=q,this.method_=pe,this.headers_=De,this.body_=ze,this.successCodes_=vt,this.additionalRetryCodes_=Yt,this.callback_=On,this.errorCallback_=xn,this.timeout_=Jn,this.progressCallback_=Bn,this.connectionFactory_=ni,this.retry=Gr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((hi,ri)=>{this.resolve_=hi,this.reject_=ri,this.start_()})}start_(){const pe=(De,ze)=>{const vt=this.resolve_,Yt=this.reject_,On=ze.connection;if(ze.wasSuccessCode)try{const xn=this.callback_(On,On.getResponse());!function _r(W){return void 0!==W}(xn)?vt():vt(xn)}catch(xn){Yt(xn)}else if(null!==On){const xn=be();xn.serverResponse=On.getErrorText(),Yt(this.errorCallback_?this.errorCallback_(On,xn):xn)}else Yt(ze.canceled?this.appDelete_?Ee():rn():ln())};this.canceled_?pe(0,new ht(!1,null,!0)):this.backoffId_=function Nn(W,q,pe){let De=1,ze=null,vt=null,Yt=!1,On=0;function xn(){return 2===On}let Jn=!1;function Bn(...oi){Jn||(Jn=!0,q.apply(null,oi))}function ni(oi){ze=setTimeout(()=>{ze=null,W(hi,xn())},oi)}function Gr(){vt&&clearTimeout(vt)}function hi(oi,...Yi){if(Jn)return void Gr();if(oi)return Gr(),void Bn.call(null,oi,...Yi);if(xn()||Yt)return Gr(),void Bn.call(null,oi,...Yi);let Li;De<64&&(De*=2),1===On?(On=2,Li=0):Li=1e3*(De+Math.random()),ni(Li)}let ri=!1;function Fi(oi){ri||(ri=!0,Gr(),!Jn&&(null!==ze?(oi||(On=2),clearTimeout(ze),ni(0)):oi||(On=1)))}return ni(0),vt=setTimeout(()=>{Yt=!0,Fi(!0)},pe),Fi}((De,ze)=>{if(ze)return void De(!1,new ht(!1,null,!0));const vt=this.connectionFactory_();this.pendingConnection_=vt;const Yt=On=>{null!==this.progressCallback_&&this.progressCallback_(On.loaded,On.lengthComputable?On.total:-1)};null!==this.progressCallback_&&vt.addUploadProgressListener(Yt),vt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&vt.removeUploadProgressListener(Yt),this.pendingConnection_=null;const On=vt.getErrorCode()===xt.NO_ERROR,xn=vt.getStatus();if(!On||He(xn,this.additionalRetryCodes_)&&this.retry){const Bn=vt.getErrorCode()===xt.ABORT;return void De(!1,new ht(!1,null,Bn))}const Jn=-1!==this.successCodes_.indexOf(xn);De(!0,new ht(Jn,vt))})},pe,this.timeout_)}getPromise(){return this.promise_}cancel(q){this.canceled_=!0,this.appDelete_=q||!1,null!==this.backoffId_&&function cr(W){W(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ht{constructor(q,pe,De){this.wasSuccessCode=q,this.connection=pe,this.canceled=!!De}}function yi(...W){const q=function Vn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==q){const pe=new q;for(let De=0;De<W.length;De++)pe.append(W[De]);return pe.getBlob()}if(Pn())return new Blob(W);throw new Qe(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sr{constructor(q,pe){this.data=q,this.contentType=pe||null}}function er(W,q){switch(W){case nn.RAW:return new Sr(dr(q));case nn.BASE64:case nn.BASE64URL:return new Sr(Pr(W,q));case nn.DATA_URL:return new Sr(function Jr(W){const q=new jr(W);return q.base64?Pr(nn.BASE64,q.rest):function Zn(W){let q;try{q=decodeURIComponent(W)}catch(pe){throw ot(nn.DATA_URL,"Malformed data URL.")}return dr(q)}(q.rest)}(q),function Gi(W){return new jr(W).contentType}(q))}throw be()}function dr(W){const q=[];for(let pe=0;pe<W.length;pe++){let De=W.charCodeAt(pe);De<=127?q.push(De):De<=2047?q.push(192|De>>6,128|63&De):55296==(64512&De)?pe<W.length-1&&56320==(64512&W.charCodeAt(pe+1))?(De=65536|(1023&De)<<10|1023&W.charCodeAt(++pe),q.push(240|De>>18,128|De>>12&63,128|De>>6&63,128|63&De)):q.push(239,191,189):56320==(64512&De)?q.push(239,191,189):q.push(224|De>>12,128|De>>6&63,128|63&De)}return new Uint8Array(q)}function Pr(W,q){switch(W){case nn.BASE64:{const ze=-1!==q.indexOf("-"),vt=-1!==q.indexOf("_");if(ze||vt)throw ot(W,"Invalid character '"+(ze?"-":"_")+"' found: is it base64url encoded?");break}case nn.BASE64URL:{const ze=-1!==q.indexOf("+"),vt=-1!==q.indexOf("/");if(ze||vt)throw ot(W,"Invalid character '"+(ze?"+":"/")+"' found: is it base64 encoded?");q=q.replace(/-/g,"+").replace(/_/g,"/");break}}let pe;try{pe=function mr(W){if("undefined"==typeof atob)throw function Te(W){return new Qe(_t.UNSUPPORTED_ENVIRONMENT,`${W} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(W)}(q)}catch(ze){throw ze.message.includes("polyfill")?ze:ot(W,"Invalid character found")}const De=new Uint8Array(pe.length);for(let ze=0;ze<pe.length;ze++)De[ze]=pe.charCodeAt(ze);return De}class jr{constructor(q){this.base64=!1,this.contentType=null;const pe=q.match(/^data:([^,]+)?,/);if(null===pe)throw ot(nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const De=pe[1]||null;null!=De&&(this.base64=function Ni(W,q){return W.length>=q.length&&W.substring(W.length-q.length)===q}(De,";base64"),this.contentType=this.base64?De.substring(0,De.length-7):De),this.rest=q.substring(q.indexOf(",")+1)}}class Br{constructor(q,pe){let De=0,ze="";sr(q)?(this.data_=q,De=q.size,ze=q.type):q instanceof ArrayBuffer?(pe?this.data_=new Uint8Array(q):(this.data_=new Uint8Array(q.byteLength),this.data_.set(new Uint8Array(q))),De=this.data_.length):q instanceof Uint8Array&&(pe?this.data_=q:(this.data_=new Uint8Array(q.length),this.data_.set(q)),De=q.length),this.size_=De,this.type_=ze}size(){return this.size_}type(){return this.type_}slice(q,pe){if(sr(this.data_)){const ze=function lr(W,q,pe){return W.webkitSlice?W.webkitSlice(q,pe):W.mozSlice?W.mozSlice(q,pe):W.slice?W.slice(q,pe):null}(this.data_,q,pe);return null===ze?null:new Br(ze)}{const De=new Uint8Array(this.data_.buffer,q,pe-q);return new Br(De,!0)}}static getBlob(...q){if(Pn()){const pe=q.map(De=>De instanceof Br?De.data_:De);return new Br(yi.apply(null,pe))}{const pe=q.map(Yt=>gn(Yt)?er(nn.RAW,Yt).data:Yt.data_);let De=0;pe.forEach(Yt=>{De+=Yt.byteLength});const ze=new Uint8Array(De);let vt=0;return pe.forEach(Yt=>{for(let On=0;On<Yt.length;On++)ze[vt++]=Yt[On]}),new Br(ze,!0)}}uploadData(){return this.data_}}function Fe(W){let q;try{q=JSON.parse(W)}catch(pe){return null}return function Xn(W){return"object"==typeof W&&!Array.isArray(W)}(q)?q:null}function ye(W){const q=W.lastIndexOf("/",W.length-2);return-1===q?W:W.slice(q+1)}function z(W,q){return q}class ie{constructor(q,pe,De,ze){this.server=q,this.local=pe||q,this.writable=!!De,this.xform=ze||z}}let se=null;function ct(){if(se)return se;const W=[];W.push(new ie("bucket")),W.push(new ie("generation")),W.push(new ie("metageneration")),W.push(new ie("name","fullPath",!0));const pe=new ie("name");pe.xform=function q(vt,Yt){return function we(W){return!gn(W)||W.length<2?W:ye(W)}(Yt)},W.push(pe);const ze=new ie("size");return ze.xform=function De(vt,Yt){return void 0!==Yt?Number(Yt):Yt},W.push(ze),W.push(new ie("timeCreated")),W.push(new ie("updated")),W.push(new ie("md5Hash",null,!0)),W.push(new ie("cacheControl",null,!0)),W.push(new ie("contentDisposition",null,!0)),W.push(new ie("contentEncoding",null,!0)),W.push(new ie("contentLanguage",null,!0)),W.push(new ie("contentType",null,!0)),W.push(new ie("metadata","customMetadata",!0)),se=W,se}function bn(W,q,pe){const De=Fe(q);return null===De?null:function on(W,q,pe){const De={type:"file"},ze=pe.length;for(let vt=0;vt<ze;vt++){const Yt=pe[vt];De[Yt.local]=Yt.xform(De,q[Yt.server])}return function Bt(W,q){Object.defineProperty(W,"ref",{get:function pe(){const vt=new pn(W.bucket,W.fullPath);return q._makeStorageReference(vt)}})}(De,W),De}(W,De,pe)}function ir(W,q){const pe={},De=q.length;for(let ze=0;ze<De;ze++){const vt=q[ze];vt.writable&&(pe[vt.server]=W[vt.local])}return JSON.stringify(pe)}const si="prefixes";class Ut{constructor(q,pe,De,ze){this.url=q,this.method=pe,this.handler=De,this.timeout=ze,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function St(W){if(!W)throw be()}function an(W,q){return function pe(De,ze){const vt=bn(W,ze,q);return St(null!==vt),vt}}function Kr(W){return function q(pe,De){let ze;return ze=401===pe.getStatus()?pe.getErrorText().includes("Firebase App Check token is invalid")?function _n(){return new Qe(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function An(){return new Qe(_t.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===pe.getStatus()?function Nt(W){return new Qe(_t.QUOTA_EXCEEDED,"Quota for bucket '"+W+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(W.bucket):403===pe.getStatus()?function Fn(W){return new Qe(_t.UNAUTHORIZED,"User does not have permission to access '"+W+"'.")}(W.path):De,ze.status=pe.getStatus(),ze.serverResponse=De.serverResponse,ze}}function yr(W){const q=Kr(W);return function pe(De,ze){let vt=q(De,ze);return 404===De.getStatus()&&(vt=function Ht(W){return new Qe(_t.OBJECT_NOT_FOUND,"Object '"+W+"' does not exist.")}(W.path)),vt.serverResponse=ze.serverResponse,vt}}function Xr(W,q,pe){const ze=Qr(q.fullServerUrl(),W.host,W._protocol),Yt=W.maxOperationRetryTime,On=new Ut(ze,"GET",an(W,pe),Yt);return On.errorHandler=yr(q),On}function Hr(W,q,pe,De,ze){const vt={};vt.prefix=q.isRoot?"":q.path+"/",pe&&pe.length>0&&(vt.delimiter=pe),De&&(vt.pageToken=De),ze&&(vt.maxResults=ze);const On=Qr(q.bucketOnlyServerUrl(),W.host,W._protocol),Jn=W.maxOperationRetryTime,Bn=new Ut(On,"GET",function In(W,q){return function pe(De,ze){const vt=function gt(W,q,pe){const De=Fe(pe);return null===De?null:function wt(W,q,pe){const De={prefixes:[],items:[],nextPageToken:pe.nextPageToken};if(pe[si])for(const ze of pe[si]){const vt=ze.replace(/\/$/,""),Yt=W._makeStorageReference(new pn(q,vt));De.prefixes.push(Yt)}if(pe.items)for(const ze of pe.items){const vt=W._makeStorageReference(new pn(q,ze.name));De.items.push(vt)}return De}(W,q,De)}(W,q,ze);return St(null!==vt),vt}}(W,q.bucket),Jn);return Bn.urlParams=vt,Bn.errorHandler=Kr(q),Bn}function Zs(W,q,pe){const De=Object.assign({},pe);return De.fullPath=W.path,De.size=q.size(),De.contentType||(De.contentType=function os(W,q){return W&&W.contentType||q&&q.type()||"application/octet-stream"}(null,q)),De}class mn{constructor(q,pe,De,ze){this.current=q,this.total=pe,this.finalized=!!De,this.metadata=ze||null}}function tr(W,q){let pe=null;try{pe=W.getResponseHeader("X-Goog-Upload-Status")}catch(ze){St(!1)}return St(!!pe&&-1!==(q||["active"]).indexOf(pe)),pe}const Ze={STATE_CHANGED:"state_changed"},lt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mt(W){switch(W){case"running":case"pausing":case"canceling":return lt.RUNNING;case"paused":return lt.PAUSED;case"success":return lt.SUCCESS;case"canceled":return lt.CANCELED;default:return lt.ERROR}}class kt{constructor(q,pe,De){if(function jn(W){return"function"==typeof W}(q)||null!=pe||null!=De)this.next=q,this.error=null!=pe?pe:void 0,this.complete=null!=De?De:void 0;else{const vt=q;this.next=vt.next,this.error=vt.error,this.complete=vt.complete}}}function Tn(W){return(...q)=>{Promise.resolve().then(()=>W(...q))}}class nr extends class Un{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xt.NO_ERROR,this.sendPromise_=new Promise(q=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xt.ABORT,q()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xt.NETWORK_ERROR,q()}),this.xhr_.addEventListener("load",()=>{q()})})}send(q,pe,De,ze){if(this.sent_)throw qt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(pe,q,!0),void 0!==ze)for(const vt in ze)ze.hasOwnProperty(vt)&&this.xhr_.setRequestHeader(vt,ze[vt].toString());return void 0!==De?this.xhr_.send(De):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(q){return-1}}getResponse(){if(!this.sent_)throw qt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(q){return this.xhr_.getResponseHeader(q)}addUploadProgressListener(q){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",q)}removeUploadProgressListener(q){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",q)}}{initXhr(){this.xhr_.responseType="text"}}function Oi(){return new nr}class Ys{constructor(q,pe,De=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=q,this._blob=pe,this._metadata=De,this._mappings=ct(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=ze=>{if(this._request=void 0,this._chunkMultiplier=1,ze._codeEquals(_t.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const vt=this.isExponentialBackoffExpired();if(He(ze.status,[])){if(!vt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();ze=ln()}this._error=ze,this._transition("error")}},this._metadataErrorHandler=ze=>{this._request=void 0,ze._codeEquals(_t.CANCELED)?this.completeTransitions_():(this._error=ze,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((ze,vt)=>{this._resolve=ze,this._reject=vt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const q=this._transferred;return pe=>this._updateProgress(q+pe)}_shouldDoResumable(q){return q.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(q){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([pe,De])=>{switch(this._state){case"running":q(pe,De);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((q,pe)=>{const De=function ts(W,q,pe,De,ze){const vt=q.bucketOnlyServerUrl(),Yt=Zs(q,De,ze),On={name:Yt.fullPath},xn=Qr(vt,W.host,W._protocol),Bn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${De.size()}`,"X-Goog-Upload-Header-Content-Type":Yt.contentType,"Content-Type":"application/json; charset=utf-8"},ni=ir(Yt,pe),ri=new Ut(xn,"POST",function hi(Fi){let oi;tr(Fi);try{oi=Fi.getResponseHeader("X-Goog-Upload-URL")}catch(Yi){St(!1)}return St(gn(oi)),oi},W.maxUploadRetryTime);return ri.urlParams=On,ri.headers=Bn,ri.body=ni,ri.errorHandler=Kr(q),ri}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ze=this._ref.storage._makeRequest(De,Oi,q,pe);this._request=ze,ze.getPromise().then(vt=>{this._request=void 0,this._uploadUrl=vt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const q=this._uploadUrl;this._resolveToken((pe,De)=>{const ze=function hr(W,q,pe,De){const xn=new Ut(pe,"POST",function vt(Jn){const Bn=tr(Jn,["active","final"]);let ni=null;try{ni=Jn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(hi){St(!1)}ni||St(!1);const Gr=Number(ni);return St(!isNaN(Gr)),new mn(Gr,De.size(),"final"===Bn)},W.maxUploadRetryTime);return xn.headers={"X-Goog-Upload-Command":"query"},xn.errorHandler=Kr(q),xn}(this._ref.storage,this._ref._location,q,this._blob),vt=this._ref.storage._makeRequest(ze,Oi,pe,De);this._request=vt,vt.getPromise().then(Yt=>{this._request=void 0,this._updateProgress(Yt.current),this._needToFetchStatus=!1,Yt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const q=262144*this._chunkMultiplier,pe=new mn(this._transferred,this._blob.size()),De=this._uploadUrl;this._resolveToken((ze,vt)=>{let Yt;try{Yt=function at(W,q,pe,De,ze,vt,Yt,On){const xn=new mn(0,0);if(Yt?(xn.current=Yt.current,xn.total=Yt.total):(xn.current=0,xn.total=De.size()),De.size()!==xn.total)throw function st(){return new Qe(_t.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Jn=xn.total-xn.current;let Bn=Jn;ze>0&&(Bn=Math.min(Bn,ze));const ni=xn.current;let hi="";hi=0===Bn?"finalize":Jn===Bn?"upload, finalize":"upload";const ri={"X-Goog-Upload-Command":hi,"X-Goog-Upload-Offset":`${xn.current}`},Fi=De.slice(ni,ni+Bn);if(null===Fi)throw un();const Li=new Ut(pe,"POST",function oi(Bi,Ns){const Eo=tr(Bi,["active","final"]),da=xn.current+Bn,js=De.size();let fo;return fo="final"===Eo?an(q,vt)(Bi,Ns):null,new mn(da,js,"final"===Eo,fo)},q.maxUploadRetryTime);return Li.headers=ri,Li.body=Fi.uploadData(),Li.progressCallback=On||null,Li.errorHandler=Kr(W),Li}(this._ref._location,this._ref.storage,De,this._blob,q,this._mappings,pe,this._makeProgressCallback())}catch(xn){return this._error=xn,void this._transition("error")}const On=this._ref.storage._makeRequest(Yt,Oi,ze,vt,!1);this._request=On,On.getPromise().then(xn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(xn.current),xn.finalized?(this._metadata=xn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((q,pe)=>{const De=Xr(this._ref.storage,this._ref._location,this._mappings),ze=this._ref.storage._makeRequest(De,Oi,q,pe);this._request=ze,ze.getPromise().then(vt=>{this._request=void 0,this._metadata=vt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((q,pe)=>{const De=function Cr(W,q,pe,De,ze){const vt=q.bucketOnlyServerUrl(),Yt={"X-Goog-Upload-Protocol":"multipart"},xn=function On(){let Li="";for(let Bi=0;Bi<2;Bi++)Li+=Math.random().toString().slice(2);return Li}();Yt["Content-Type"]="multipart/related; boundary="+xn;const Jn=Zs(q,De,ze),Bn=ir(Jn,pe),hi=Br.getBlob("--"+xn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Bn+"\r\n--"+xn+"\r\nContent-Type: "+Jn.contentType+"\r\n\r\n",De,"\r\n--"+xn+"--");if(null===hi)throw un();const ri={name:Jn.fullPath},Fi=Qr(vt,W.host,W._protocol),Yi=W.maxUploadRetryTime,ns=new Ut(Fi,"POST",an(W,pe),Yi);return ns.urlParams=ri,ns.headers=Yt,ns.body=hi.uploadData(),ns.errorHandler=Kr(q),ns}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ze=this._ref.storage._makeRequest(De,Oi,q,pe);this._request=ze,ze.getPromise().then(vt=>{this._request=void 0,this._metadata=vt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(q){const pe=this._transferred;this._transferred=q,this._transferred!==pe&&this._notifyObservers()}_transition(q){if(this._state!==q)switch(q){case"canceling":case"pausing":this._state=q,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const pe="paused"===this._state;this._state=q,pe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=q,this._notifyObservers();break;case"canceled":this._error=rn(),this._state=q,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const q=mt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:q,metadata:this._metadata,task:this,ref:this._ref}}on(q,pe,De,ze){const vt=new kt(pe||void 0,De||void 0,ze||void 0);return this._addObserver(vt),()=>{this._removeObserver(vt)}}then(q,pe){return this._promise.then(q,pe)}catch(q){return this.then(null,q)}_addObserver(q){this._observers.push(q),this._notifyObserver(q)}_removeObserver(q){const pe=this._observers.indexOf(q);-1!==pe&&this._observers.splice(pe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(pe=>{this._notifyObserver(pe)})}_finishPromise(){if(void 0!==this._resolve){let q=!0;switch(mt(this._state)){case lt.SUCCESS:Tn(this._resolve.bind(null,this.snapshot))();break;case lt.CANCELED:case lt.ERROR:Tn(this._reject.bind(null,this._error))();break;default:q=!1}q&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(q){switch(mt(this._state)){case lt.RUNNING:case lt.PAUSED:q.next&&Tn(q.next.bind(q,this.snapshot))();break;case lt.SUCCESS:q.complete&&Tn(q.complete.bind(q))();break;default:q.error&&Tn(q.error.bind(q,this._error))()}}resume(){const q="paused"===this._state||"pausing"===this._state;return q&&this._transition("running"),q}pause(){const q="running"===this._state;return q&&this._transition("pausing"),q}cancel(){const q="running"===this._state||"pausing"===this._state;return q&&this._transition("canceling"),q}}class Ui{constructor(q,pe){this._service=q,this._location=pe instanceof pn?pe:pn.makeFromUrl(pe,q.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(q,pe){return new Ui(q,pe)}get root(){const q=new pn(this._location.bucket,"");return this._newRef(this._service,q)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ye(this._location.path)}get storage(){return this._service}get parent(){const q=function Me(W){if(0===W.length)return null;const q=W.lastIndexOf("/");return-1===q?"":W.slice(0,q)}(this._location.path);if(null===q)return null;const pe=new pn(this._location.bucket,q);return new Ui(this._service,pe)}_throwIfRoot(q){if(""===this._location.path)throw Ne(q)}}function Ms(W,q,pe){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,ft.Z)(function*(W,q,pe){const ze=yield xs(W,{pageToken:pe});q.prefixes.push(...ze.prefixes),q.items.push(...ze.items),null!=ze.nextPageToken&&(yield Ms(W,q,ze.nextPageToken))})).apply(this,arguments)}function xs(W,q){null!=q&&"number"==typeof q.maxResults&&Ln("options.maxResults",1,1e3,q.maxResults);const pe=q||{},De=Hr(W.storage,W._location,"/",pe.pageToken,pe.maxResults);return W.storage.makeRequestWithTokens(De,Oi)}function Wi(W){W._throwIfRoot("getDownloadURL");const q=function Rs(W,q,pe){const ze=Qr(q.fullServerUrl(),W.host,W._protocol),Yt=W.maxOperationRetryTime,On=new Ut(ze,"GET",function or(W,q){return function pe(De,ze){const vt=bn(W,ze,q);return St(null!==vt),function gr(W,q,pe,De){const ze=Fe(q);if(null===ze||!gn(ze.downloadTokens))return null;const vt=ze.downloadTokens;if(0===vt.length)return null;const Yt=encodeURIComponent;return vt.split(",").map(Jn=>{const ni=W.fullPath;return Qr("/b/"+Yt(W.bucket)+"/o/"+Yt(ni),pe,De)+$i({alt:"media",token:Jn})})[0]}(vt,ze,W.host,W._protocol)}}(W,pe),Yt);return On.errorHandler=yr(q),On}(W.storage,W._location,ct());return W.storage.makeRequestWithTokens(q,Oi).then(pe=>{if(null===pe)throw function nt(){return new Qe(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return pe})}function ki(W,q){const pe=function me(W,q){const pe=q.split("/").filter(De=>De.length>0).join("/");return 0===W.length?pe:W+"/"+pe}(W._location.path,q),De=new pn(W._location.bucket,pe);return new Ui(W.storage,De)}function ko(W,q){if(W instanceof Ao){const pe=W;if(null==pe._bucket)throw function Rn(){return new Qe(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ke+"' property when initializing the app?")}();const De=new Ui(pe,pe._bucket);return null!=q?ko(De,q):De}return void 0!==q?ki(W,q):W}function hs(W,q){if(q&&function Go(W){return/^[A-Za-z]+:\/\//.test(W)}(q)){if(W instanceof Ao)return function $r(W,q){return new Ui(W,q)}(W,q);throw Re("To use ref(service, url), the first argument must be a Storage instance.")}return ko(W,q)}function zi(W,q){const pe=null==q?void 0:q[Ke];return null==pe?null:pn.makeFromBucketSpec(pe,W)}class Ao{constructor(q,pe,De,ze,vt){this.app=q,this._authProvider=pe,this._appCheckProvider=De,this._url=ze,this._firebaseVersion=vt,this._bucket=null,this._host=Ct,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=ze?pn.makeFromBucketSpec(ze,this._host):zi(this._host,this.app.options)}get host(){return this._host}set host(q){this._host=q,this._bucket=null!=this._url?pn.makeFromBucketSpec(this._url,q):zi(q,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(q){Ln("time",0,Number.POSITIVE_INFINITY,q),this._maxUploadRetryTime=q}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(q){Ln("time",0,Number.POSITIVE_INFINITY,q),this._maxOperationRetryTime=q}_getAuthToken(){var q=this;return(0,ft.Z)(function*(){if(q._overrideAuthToken)return q._overrideAuthToken;const pe=q._authProvider.getImmediate({optional:!0});if(pe){const De=yield pe.getToken();if(null!==De)return De.accessToken}return null})()}_getAppCheckToken(){var q=this;return(0,ft.Z)(function*(){const pe=q._appCheckProvider.getImmediate({optional:!0});return pe?(yield pe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(q=>q.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(q){return new Ui(this,q)}_makeRequest(q,pe,De,ze,vt=!0){if(this._deleted)return new vn(Ee());{const Yt=function zn(W,q,pe,De,ze,vt,Yt=!0){const On=$i(W.urlParams),xn=W.url+On,Jn=Object.assign({},W.headers);return function sn(W,q){q&&(W["X-Firebase-GMPID"]=q)}(Jn,q),function At(W,q){null!==q&&q.length>0&&(W.Authorization="Firebase "+q)}(Jn,pe),function Zt(W,q){W["X-Firebase-Storage-Version"]="webjs/"+(null!=q?q:"AppManager")}(Jn,vt),function br(W,q){null!==q&&(W["X-Firebase-AppCheck"]=q)}(Jn,De),new Ge(xn,W.method,Jn,W.body,W.successCodes,W.additionalRetryCodes,W.handler,W.errorHandler,W.timeout,W.progressCallback,ze,Yt)}(q,this._appId,De,ze,pe,this._firebaseVersion,vt);return this._requests.add(Yt),Yt.getPromise().then(()=>this._requests.delete(Yt),()=>this._requests.delete(Yt)),Yt}}makeRequestWithTokens(q,pe){var De=this;return(0,ft.Z)(function*(){const[ze,vt]=yield Promise.all([De._getAuthToken(),De._getAppCheckToken()]);return De._makeRequest(q,pe,ze,vt).getPromise()})()}}const Ts="@firebase/storage";function ps(W,q){return hs(W=(0,Mt.m9)(W),q)}function he(W,{instanceIdentifier:q}){const pe=W.getProvider("app").getImmediate(),De=W.getProvider("auth-internal"),ze=W.getProvider("app-check-internal");return new Ao(pe,De,ze,q,bt.SDK_VERSION)}!function Oe(){(0,bt._registerComponent)(new Xe.wA("storage",he,"PUBLIC").setMultipleInstances(!0)),(0,bt.registerVersion)(Ts,"0.11.2",""),(0,bt.registerVersion)(Ts,"0.11.2","esm2017")}();class Pt{constructor(q,pe,De){this._delegate=q,this.task=pe,this.ref=De}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class zt{constructor(q,pe){this._delegate=q,this._ref=pe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pt(this._delegate.snapshot,this,this._ref)}then(q,pe){return this._delegate.then(De=>{if(q)return q(new Pt(De,this,this._ref))},pe)}on(q,pe,De,ze){let vt;return pe&&(vt="function"==typeof pe?Yt=>pe(new Pt(Yt,this,this._ref)):{next:pe.next?Yt=>pe.next(new Pt(Yt,this,this._ref)):void 0,complete:pe.complete||void 0,error:pe.error||void 0}),this._delegate.on(q,vt,De||void 0,ze||void 0)}}class Dn{constructor(q,pe){this._delegate=q,this._service=pe}get prefixes(){return this._delegate.prefixes.map(q=>new Yn(q,this._service))}get items(){return this._delegate.items.map(q=>new Yn(q,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Yn{constructor(q,pe){this._delegate=q,this.storage=pe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(q){const pe=function uo(W,q){return ki(W,q)}(this._delegate,q);return new Yn(pe,this.storage)}get root(){return new Yn(this._delegate.root,this.storage)}get parent(){const q=this._delegate.parent;return null==q?null:new Yn(q,this.storage)}put(q,pe){return this._throwIfRoot("put"),new zt(function vs(W,q,pe){return function ca(W,q,pe){return W._throwIfRoot("uploadBytesResumable"),new Ys(W,new Br(q),pe)}(W=(0,Mt.m9)(W),q,pe)}(this._delegate,q,pe),this)}putString(q,pe=nn.RAW,De){this._throwIfRoot("putString");const ze=er(pe,q),vt=Object.assign({},De);return null==vt.contentType&&null!=ze.contentType&&(vt.contentType=ze.contentType),new zt(new Ys(this._delegate,new Br(ze.data,!0),vt),this)}listAll(){return function bs(W){return function Qs(W){const q={prefixes:[],items:[]};return Ms(W,q).then(()=>q)}(W=(0,Mt.m9)(W))}(this._delegate).then(q=>new Dn(q,this.storage))}list(q){return function ei(W,q){return xs(W=(0,Mt.m9)(W),q)}(this._delegate,q||void 0).then(pe=>new Dn(pe,this.storage))}getMetadata(){return function Xs(W){return function lo(W){W._throwIfRoot("getMetadata");const q=Xr(W.storage,W._location,ct());return W.storage.makeRequestWithTokens(q,Oi)}(W=(0,Mt.m9)(W))}(this._delegate)}updateMetadata(q){return function Nr(W,q){return function Oo(W,q){W._throwIfRoot("updateMetadata");const pe=function ur(W,q,pe,De){const vt=Qr(q.fullServerUrl(),W.host,W._protocol),On=ir(pe,De),Jn=W.maxOperationRetryTime,Bn=new Ut(vt,"PATCH",an(W,De),Jn);return Bn.headers={"Content-Type":"application/json; charset=utf-8"},Bn.body=On,Bn.errorHandler=yr(q),Bn}(W.storage,W._location,q,ct());return W.storage.makeRequestWithTokens(pe,Oi)}(W=(0,Mt.m9)(W),q)}(this._delegate,q)}getDownloadURL(){return function _i(W){return Wi(W=(0,Mt.m9)(W))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function wi(W){return function Ps(W){W._throwIfRoot("deleteObject");const q=function Si(W,q){const De=Qr(q.fullServerUrl(),W.host,W._protocol),On=new Ut(De,"DELETE",function Yt(xn,Jn){},W.maxOperationRetryTime);return On.successCodes=[200,204],On.errorHandler=yr(q),On}(W.storage,W._location);return W.storage.makeRequestWithTokens(q,Oi)}(W=(0,Mt.m9)(W))}(this._delegate)}_throwIfRoot(q){if(""===this._delegate._location.path)throw Ne(q)}}class Rr{constructor(q,pe){this.app=q,this._delegate=pe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(q){if(fr(q))throw Re("ref() expected a child path but got a URL, use refFromURL instead.");return new Yn(ps(this._delegate,q),this)}refFromURL(q){if(!fr(q))throw Re("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pn.makeFromUrl(q,this._delegate.host)}catch(pe){throw Re("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yn(ps(this._delegate,q),this)}setMaxUploadRetryTime(q){this._delegate.maxUploadRetryTime=q}setMaxOperationRetryTime(q){this._delegate.maxOperationRetryTime=q}useEmulator(q,pe,De={}){!function V(W,q,pe,De={}){!function fs(W,q,pe,De={}){W.host=`${q}:${pe}`,W._protocol="http";const{mockUserToken:ze}=De;ze&&(W._overrideAuthToken="string"==typeof ze?ze:(0,Mt.Sg)(ze,W.app.options.projectId))}(W,q,pe,De)}(this._delegate,q,pe,De)}}function fr(W){return/^[A-Za-z]+:\/\//.test(W)}function ti(W,{instanceIdentifier:q}){const pe=W.getProvider("app-compat").getImmediate(),De=W.getProvider("storage").getImmediate({identifier:q});return new Rr(pe,De)}!function co(W){const q={TaskState:lt,TaskEvent:Ze,StringFormat:nn,Storage:Rr,Reference:Yn};W.INTERNAL.registerComponent(new Xe.wA("storage-compat",ti,"PUBLIC").setServiceProps(q).setMultipleInstances(!0)),W.registerVersion("@firebase/storage-compat","0.3.2")}(Tt.Z);var Ci=U(6215),Qn=U(9260);function Fo(W){const q=function Ds(W){return new _.y(q=>{const pe=Yt=>q.next(Yt);pe(W.snapshot);const vt=W.on("state_changed",pe);return W.then(Yt=>{pe(Yt),q.complete()},Yt=>{pe(W.snapshot),(Yt=>{q.error(Yt)})(Yt)}),function(){vt()}}).pipe(function We(W,q=re.z){return(0,Pe.e)((pe,De)=>{let ze=null,vt=null,Yt=null;const On=()=>{if(ze){ze.unsubscribe(),ze=null;const Jn=vt;vt=null,De.next(Jn)}};function xn(){const Jn=Yt+W,Bn=q.now();if(Bn<Jn)return ze=this.schedule(void 0,Jn-Bn),void De.add(ze);On()}pe.subscribe((0,je.x)(De,Jn=>{vt=Jn,Yt=q.now(),ze||(ze=q.schedule(xn,W),De.add(ze))},()=>{On(),De.complete()},void 0,()=>{vt=ze=null}))})}(0))}(W);return{task:W,then:W.then.bind(W),catch:W.catch.bind(W),pause:W.pause.bind(W),cancel:W.cancel.bind(W),resume:W.resume.bind(W),snapshotChanges:()=>q,percentageChanges:()=>q.pipe((0,Be.U)(pe=>pe.bytesTransferred/pe.totalBytes*100))}}function ho(W){return{getDownloadURL:()=>(0,L.of)(void 0).pipe(Ie.fc,(0,rt.w)(()=>W.getDownloadURL()),Ie.iC),getMetadata:()=>(0,L.of)(void 0).pipe(Ie.fc,(0,rt.w)(()=>W.getMetadata()),Ie.iC),delete:()=>(0,ee.D)(W.delete()),child:q=>ho(W.child(q)),updateMetadata:q=>(0,ee.D)(W.updateMetadata(q)),put:(q,pe)=>Fo(W.put(q,pe)),putString:(q,pe,De)=>Fo(W.putString(q,pe,De)),list:q=>(0,ee.D)(W.list(q)),listAll:()=>(0,ee.D)(W.listAll())}}const vo=new ve.OlP("angularfire2.storageBucket"),K=new ve.OlP("angularfire2.storage.maxUploadRetryTime"),j=new ve.OlP("angularfire2.storage.maxOperationRetryTime"),F=new ve.OlP("angularfire2.storage.use-emulator");let ce=(()=>{class W{constructor(pe,De,ze,vt,Yt,On,xn,Jn,Bn,ni){const Gr=(0,Je.on)(pe,Yt,De);this.storage=(0,Je.cc)(`${Gr.name}.storage.${ze}`,"AngularFireStorage",Gr.name,()=>{const hi=Yt.runOutsideAngular(()=>Gr.storage(ze||void 0)),ri=Bn;return ri&&hi.useEmulator(...ri),xn&&hi.setMaxUploadRetryTime(xn),Jn&&hi.setMaxOperationRetryTime(Jn),hi},[xn,Jn])}ref(pe){return ho(this.storage.ref(pe))}refFromURL(pe){return ho(this.storage.refFromURL(pe))}upload(pe,De,ze){return ho(this.storage.ref(pe)).put(De,ze)}}return W.\u0275fac=function(pe){return new(pe||W)(ve.LFG(Je.Dh),ve.LFG(Je.xv,8),ve.LFG(vo,8),ve.LFG(ve.Lbi),ve.LFG(ve.R0b),ve.LFG(Ie.HU),ve.LFG(K,8),ve.LFG(j,8),ve.LFG(F,8),ve.LFG(Ci.nm,8))},W.\u0275prov=ve.Yz7({token:W,factory:W.\u0275fac,providedIn:"any"}),W})(),Jt=(()=>{class W{}return W.\u0275fac=function(pe){return new(pe||W)},W.\u0275mod=ve.oAB({type:W}),W.\u0275inj=ve.cJS({}),W})(),qr=(()=>{class W{constructor(){Qn.Z.registerVersion("angularfire",Ie.q4.full,"gcs-compat")}}return W.\u0275fac=function(pe){return new(pe||W)},W.\u0275mod=ve.oAB({type:W}),W.\u0275inj=ve.cJS({providers:[ce],imports:[Jt]}),W})()},2011:(hn,ut,U)=>{U.d(ut,{Dh:()=>Be,GT:()=>je,cc:()=>ft,hO:()=>Tt,on:()=>Ie,pX:()=>Pe,xv:()=>rt});var _=U(5e3),L=U(9260),ee=U(4976);hn=U.hmd(hn);const re=["ngOnDestroy"],Pe=(Ct,Ke,Kt,it={})=>new Proxy(Ct,{get:(xe,Qe)=>Kt.runOutsideAngular(()=>{var _t;if(Ct[Qe])return(null===(_t=null==it?void 0:it.spy)||void 0===_t?void 0:_t.get)&&it.spy.get(Qe,Ct[Qe]),Ct[Qe];if(re.indexOf(Qe)>-1)return()=>{};const It=Ke.toPromise().then(be=>{const Ht=be&&be[Qe];return"function"==typeof Ht?Ht.bind(be):Ht&&Ht.then?Ht.then(Nt=>Kt.run(()=>Nt)):Kt.run(()=>Ht)});return new Proxy(()=>{},{get:(be,Ht)=>It[Ht],apply:(be,Ht,Nt)=>It.then(An=>{var _n;const Fn=An&&An(...Nt);return(null===(_n=null==it?void 0:it.spy)||void 0===_n?void 0:_n.apply)&&it.spy.apply(Qe,Nt,Fn),Fn})})})}),je=(Ct,Ke)=>{Ke.forEach(Kt=>{Object.getOwnPropertyNames(Kt.prototype||Kt).forEach(it=>{Object.defineProperty(Ct.prototype,it,Object.getOwnPropertyDescriptor(Kt.prototype||Kt,it))})})};class We{constructor(Ke){return Ke}}const Be=new _.OlP("angularfire2.app.options"),rt=new _.OlP("angularfire2.app.name");function Ie(Ct,Ke,Kt){const xe="object"==typeof Kt&&Kt||{};xe.name=xe.name||"string"==typeof Kt&&Kt||"[DEFAULT]";const _t=L.Z.apps.filter(It=>It&&It.name===xe.name)[0]||Ke.runOutsideAngular(()=>L.Z.initializeApp(Ct,xe));try{JSON.stringify(Ct)!==JSON.stringify(_t.options)&&ve("error",`${_t.name} Firebase App already initialized with different options${hn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(It){}return new We(_t)}const ve=(Ct,...Ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Ct](...Ke)},Je={provide:We,useFactory:Ie,deps:[Be,_.R0b,[new _.FiY,rt]]};let Tt=(()=>{class Ct{constructor(Kt){L.Z.registerVersion("angularfire",ee.q4.full,"core"),L.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),L.Z.registerVersion("angular",_.q4F.full,Kt.toString())}static initializeApp(Kt,it){return{ngModule:Ct,providers:[{provide:Be,useValue:Kt},{provide:rt,useValue:it}]}}}return Ct.\u0275fac=function(Kt){return new(Kt||Ct)(_.LFG(_.Lbi))},Ct.\u0275mod=_.oAB({type:Ct}),Ct.\u0275inj=_.cJS({providers:[Je]}),Ct})();function ft(Ct,Ke,Kt,it,xe){const[,Qe,_t]=globalThis.\u0275AngularfireInstanceCache.find(It=>It[0]===Ct)||[];if(Qe)return function bt(Ct,Ke){try{return Ct.toString()===Ke.toString()}catch(Kt){return Ct===Ke}}(xe,_t)||(Xe("error",`${Ke} was already initialized on the ${Kt} Firebase App with different settings.${Mt?" You may need to reload as Firebase is not HMR aware.":""}`),Xe("warn",{is:xe,was:_t})),Qe;{const It=it();return globalThis.\u0275AngularfireInstanceCache.push([Ct,It,xe]),It}}const Mt=!!hn.hot,Xe=(Ct,...Ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Ct](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(hn,ut,U)=>{U.d(ut,{q4:()=>Xi,iC:()=>Au,fc:()=>_u,HU:()=>xo,vb:()=>Yl,JM:()=>Ea,u3:()=>Ql});var _=U(5e3),L=U(259),ee=U(5861),re=U(6881),Pe=U(2090),je=U(4859),We=U(1877);let rt,Ie;const Tt=new WeakMap,ft=new WeakMap,bt=new WeakMap,Mt=new WeakMap,Xe=new WeakMap;let Kt={get(A,O,te){if(A instanceof IDBTransaction){if("done"===O)return ft.get(A);if("objectStoreNames"===O)return A.objectStoreNames||bt.get(A);if("store"===O)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return _t(A[O])},set:(A,O,te)=>(A[O]=te,!0),has:(A,O)=>A instanceof IDBTransaction&&("done"===O||"store"===O)||O in A};function Qe(A){return"function"==typeof A?function xe(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Je(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...O){return A.apply(It(this),O),_t(Tt.get(this))}:function(...O){return _t(A.apply(It(this),O))}:function(O,...te){const Ce=A.call(It(this),O,...te);return bt.set(Ce,O.sort?O.sort():[O]),_t(Ce)}}(A):(A instanceof IDBTransaction&&function Ke(A){if(ft.has(A))return;const O=new Promise((te,Ce)=>{const qe=()=>{A.removeEventListener("complete",dt),A.removeEventListener("error",Lt),A.removeEventListener("abort",Lt)},dt=()=>{te(),qe()},Lt=()=>{Ce(A.error||new DOMException("AbortError","AbortError")),qe()};A.addEventListener("complete",dt),A.addEventListener("error",Lt),A.addEventListener("abort",Lt)});ft.set(A,O)}(A),((A,O)=>O.some(te=>A instanceof te))(A,function ve(){return rt||(rt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,Kt):A)}function _t(A){if(A instanceof IDBRequest)return function Ct(A){const O=new Promise((te,Ce)=>{const qe=()=>{A.removeEventListener("success",dt),A.removeEventListener("error",Lt)},dt=()=>{te(_t(A.result)),qe()},Lt=()=>{Ce(A.error),qe()};A.addEventListener("success",dt),A.addEventListener("error",Lt)});return O.then(te=>{te instanceof IDBCursor&&Tt.set(te,A)}).catch(()=>{}),Xe.set(O,A),O}(A);if(Mt.has(A))return Mt.get(A);const O=Qe(A);return O!==A&&(Mt.set(A,O),Xe.set(O,A)),O}const It=A=>Xe.get(A),Nt=["get","getKey","getAll","getAllKeys","count"],An=["put","add","delete","clear"],_n=new Map;function Fn(A,O){if(!(A instanceof IDBDatabase)||O in A||"string"!=typeof O)return;if(_n.get(O))return _n.get(O);const te=O.replace(/FromIndex$/,""),Ce=O!==te,qe=An.includes(te);if(!(te in(Ce?IDBIndex:IDBObjectStore).prototype)||!qe&&!Nt.includes(te))return;const dt=function(){var Lt=(0,ee.Z)(function*(En,...Cn){const Wn=this.transaction(En,qe?"readwrite":"readonly");let Or=Wn.store;return Ce&&(Or=Or.index(Cn.shift())),(yield Promise.all([Or[te](...Cn),qe&&Wn.done]))[0]});return function(Cn){return Lt.apply(this,arguments)}}();return _n.set(O,dt),dt}!function it(A){Kt=A(Kt)}(A=>D_(b_({},A),{get:(O,te,Ce)=>Fn(O,te)||A.get(O,te,Ce),has:(O,te)=>!!Fn(O,te)||A.has(O,te)}));const ln="@firebase/installations",ar="w:0.6.4",Rn="FIS_v2",Ee=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(A){return A instanceof Pe.ZR&&A.code.includes("request-failed")}function ot({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function qt(A){return{token:A.token,requestStatus:2,expiresIn:Xn(A.expiresIn),creationTime:Date.now()}}function pn(A,O){return vn.apply(this,arguments)}function vn(){return(vn=(0,ee.Z)(function*(A,O){const Ce=(yield O.json()).error;return Ee.create("request-failed",{requestName:A,serverCode:Ce.code,serverMessage:Ce.message,serverStatus:Ce.status})})).apply(this,arguments)}function Nn({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function cr(A,{refreshToken:O}){const te=Nn(A);return te.append("Authorization",function gn(A){return`${Rn} ${A}`}(O)),te}function _r(A){return jn.apply(this,arguments)}function jn(){return(jn=(0,ee.Z)(function*(A){const O=yield A();return O.status>=500&&O.status<600?A():O})).apply(this,arguments)}function Xn(A){return Number(A.replace("s","000"))}function sr(A,O){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,ee.Z)(function*({appConfig:A,heartbeatServiceProvider:O},{fid:te}){const Ce=ot(A),qe=Nn(A),dt=O.getImmediate({optional:!0});if(dt){const Wn=yield dt.getHeartbeatsHeader();Wn&&qe.append("x-firebase-client",Wn)}const En={method:"POST",headers:qe,body:JSON.stringify({fid:te,authVersion:Rn,appId:A.appId,sdkVersion:ar})},Cn=yield _r(()=>fetch(Ce,En));if(Cn.ok){const Wn=yield Cn.json();return{fid:Wn.fid||te,registrationStatus:2,refreshToken:Wn.refreshToken,authToken:qt(Wn.authToken)}}throw yield pn("Create Installation",Cn)})).apply(this,arguments)}function Ln(A){return new Promise(O=>{setTimeout(O,A)})}const $i=/^[cdef][\w-]{21}$/;function He(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const te=function Ge(A){return function Qr(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return $i.test(te)?te:""}catch(A){return""}}function ht(A){return`${A.appName}!${A.appId}`}const At=new Map;function Zt(A,O){const te=ht(A);zn(te,O),function Vn(A,O){const te=function lr(){return!yi&&"BroadcastChannel"in self&&(yi=new BroadcastChannel("[Firebase] FID Change"),yi.onmessage=A=>{zn(A.data.key,A.data.fid)}),yi}();te&&te.postMessage({key:A,fid:O}),function mr(){0===At.size&&yi&&(yi.close(),yi=null)}()}(te,O)}function zn(A,O){const te=At.get(A);if(te)for(const Ce of te)Ce(O)}let yi=null;const er="firebase-installations-store";let dr=null;function Zn(){return dr||(dr=function be(A,O,{blocked:te,upgrade:Ce,blocking:qe,terminated:dt}={}){const Lt=indexedDB.open(A,O),En=_t(Lt);return Ce&&Lt.addEventListener("upgradeneeded",Cn=>{Ce(_t(Lt.result),Cn.oldVersion,Cn.newVersion,_t(Lt.transaction))}),te&&Lt.addEventListener("blocked",()=>te()),En.then(Cn=>{dt&&Cn.addEventListener("close",()=>dt()),qe&&Cn.addEventListener("versionchange",()=>qe())}).catch(()=>{}),En}("firebase-installations-database",1,{upgrade:(A,O)=>{0===O&&A.createObjectStore(er)}})),dr}function Pr(A,O){return jr.apply(this,arguments)}function jr(){return(jr=(0,ee.Z)(function*(A,O){const te=ht(A),qe=(yield Zn()).transaction(er,"readwrite"),dt=qe.objectStore(er),Lt=yield dt.get(te);return yield dt.put(O,te),yield qe.done,(!Lt||Lt.fid!==O.fid)&&Zt(A,O.fid),O})).apply(this,arguments)}function Jr(A){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,ee.Z)(function*(A){const O=ht(A),Ce=(yield Zn()).transaction(er,"readwrite");yield Ce.objectStore(er).delete(O),yield Ce.done})).apply(this,arguments)}function Ni(A,O){return Br.apply(this,arguments)}function Br(){return(Br=(0,ee.Z)(function*(A,O){const te=ht(A),qe=(yield Zn()).transaction(er,"readwrite"),dt=qe.objectStore(er),Lt=yield dt.get(te),En=O(Lt);return void 0===En?yield dt.delete(te):yield dt.put(En,te),yield qe.done,En&&(!Lt||Lt.fid!==En.fid)&&Zt(A,En.fid),En})).apply(this,arguments)}function Fe(A){return Me.apply(this,arguments)}function Me(){return(Me=(0,ee.Z)(function*(A){let O;const te=yield Ni(A.appConfig,Ce=>{const qe=me(Ce),dt=ye(A,qe);return O=dt.registrationPromise,dt.installationEntry});return""===te.fid?{installationEntry:yield O}:{installationEntry:te,registrationPromise:O}})).apply(this,arguments)}function me(A){return Bt(A||{fid:He(),registrationStatus:0})}function ye(A,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(Ee.create("app-offline"))};const te={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},Ce=function z(A,O){return ie.apply(this,arguments)}(A,te);return{installationEntry:te,registrationPromise:Ce}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:se(A)}:{installationEntry:O}}function ie(){return(ie=(0,ee.Z)(function*(A,O){try{const te=yield sr(A,O);return Pr(A.appConfig,te)}catch(te){throw Ne(te)&&409===te.customData.serverCode?yield Jr(A.appConfig):yield Pr(A.appConfig,{fid:O.fid,registrationStatus:0}),te}})).apply(this,arguments)}function se(A){return we.apply(this,arguments)}function we(){return(we=(0,ee.Z)(function*(A){let O=yield ct(A.appConfig);for(;1===O.registrationStatus;)yield Ln(100),O=yield ct(A.appConfig);if(0===O.registrationStatus){const{installationEntry:te,registrationPromise:Ce}=yield Fe(A);return Ce||te}return O})).apply(this,arguments)}function ct(A){return Ni(A,O=>{if(!O)throw Ee.create("installation-not-found");return Bt(O)})}function Bt(A){return function on(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function bn(A,O){return gr.apply(this,arguments)}function gr(){return(gr=(0,ee.Z)(function*({appConfig:A,heartbeatServiceProvider:O},te){const Ce=ir(A,te),qe=cr(A,te),dt=O.getImmediate({optional:!0});if(dt){const Wn=yield dt.getHeartbeatsHeader();Wn&&qe.append("x-firebase-client",Wn)}const En={method:"POST",headers:qe,body:JSON.stringify({installation:{sdkVersion:ar,appId:A.appId}})},Cn=yield _r(()=>fetch(Ce,En));if(Cn.ok)return qt(yield Cn.json());throw yield pn("Generate Auth Token",Cn)})).apply(this,arguments)}function ir(A,{fid:O}){return`${ot(A)}/${O}/authTokens:generate`}function si(A){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,ee.Z)(function*(A,O=!1){let te;const Ce=yield Ni(A.appConfig,dt=>{if(!In(dt))throw Ee.create("not-registered");const Lt=dt.authToken;if(!O&&or(Lt))return dt;if(1===Lt.requestStatus)return te=wt(A,O),dt;{if(!navigator.onLine)throw Ee.create("app-offline");const En=yr(dt);return te=St(A,En),En}});return te?yield te:Ce.authToken})).apply(this,arguments)}function wt(A,O){return gt.apply(this,arguments)}function gt(){return(gt=(0,ee.Z)(function*(A,O){let te=yield Ut(A.appConfig);for(;1===te.authToken.requestStatus;)yield Ln(100),te=yield Ut(A.appConfig);const Ce=te.authToken;return 0===Ce.requestStatus?si(A,O):Ce})).apply(this,arguments)}function Ut(A){return Ni(A,O=>{if(!In(O))throw Ee.create("not-registered");return function Xr(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function St(A,O){return an.apply(this,arguments)}function an(){return(an=(0,ee.Z)(function*(A,O){try{const te=yield bn(A,O),Ce=Object.assign(Object.assign({},O),{authToken:te});return yield Pr(A.appConfig,Ce),te}catch(te){if(!Ne(te)||401!==te.customData.serverCode&&404!==te.customData.serverCode){const Ce=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield Pr(A.appConfig,Ce)}else yield Jr(A.appConfig);throw te}})).apply(this,arguments)}function In(A){return void 0!==A&&2===A.registrationStatus}function or(A){return 2===A.requestStatus&&!function Kr(A){const O=Date.now();return O<A.creationTime||A.creationTime+A.expiresIn<O+36e5}(A)}function yr(A){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:O})}function cs(){return(cs=(0,ee.Z)(function*(A){const O=A,{installationEntry:te,registrationPromise:Ce}=yield Fe(O);return Ce?Ce.catch(console.error):si(O).catch(console.error),te.fid})).apply(this,arguments)}function ur(){return(ur=(0,ee.Z)(function*(A,O=!1){const te=A;return yield Si(te),(yield si(te,O)).token})).apply(this,arguments)}function Si(A){return os.apply(this,arguments)}function os(){return(os=(0,ee.Z)(function*(A){const{registrationPromise:O}=yield Fe(A);O&&(yield O)})).apply(this,arguments)}function Ze(A){return Ee.create("missing-app-config-values",{valueName:A})}const lt="installations",kt=A=>{const O=A.getProvider("app").getImmediate(),te=function at(A){if(!A||!A.options)throw Ze("App Configuration");if(!A.name)throw Ze("App Name");const O=["projectId","apiKey","appId"];for(const te of O)if(!A.options[te])throw Ze(te);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(O);return{app:O,appConfig:te,heartbeatServiceProvider:(0,re._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},Tn=A=>{const O=A.getProvider("app").getImmediate(),te=(0,re._getProvider)(O,lt).getImmediate();return{getId:()=>function Hr(A){return cs.apply(this,arguments)}(te),getToken:qe=>function Rs(A){return ur.apply(this,arguments)}(te,qe)}};(function Ar(){(0,re._registerComponent)(new je.wA(lt,kt,"PUBLIC")),(0,re._registerComponent)(new je.wA("installations-internal",Tn,"PRIVATE"))})(),(0,re.registerVersion)(ln,"0.6.4"),(0,re.registerVersion)(ln,"0.6.4","esm2017");const Un="@firebase/remote-config",Vi=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ko{constructor(O,te,Ce,qe){this.client=O,this.storage=te,this.storageCache=Ce,this.logger=qe}isCachedDataFresh(O,te){if(!te)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ce=Date.now()-te,qe=Ce<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${qe}.`),qe}fetch(O){var te=this;return(0,ee.Z)(function*(){const[Ce,qe]=yield Promise.all([te.storage.getLastSuccessfulFetchTimestampMillis(),te.storage.getLastSuccessfulFetchResponse()]);if(qe&&te.isCachedDataFresh(O.cacheMaxAgeMillis,Ce))return qe;O.eTag=qe&&qe.eTag;const dt=yield te.client.fetch(O),Lt=[te.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===dt.status&&Lt.push(te.storage.setLastSuccessfulFetchResponse(dt)),yield Promise.all(Lt),dt})()}}function hs(A=navigator){return A.languages&&A.languages[0]||A.language}class zi{constructor(O,te,Ce,qe,dt,Lt){this.firebaseInstallations=O,this.sdkVersion=te,this.namespace=Ce,this.projectId=qe,this.apiKey=dt,this.appId=Lt}fetch(O){var te=this;return(0,ee.Z)(function*(){const[Ce,qe]=yield Promise.all([te.firebaseInstallations.getId(),te.firebaseInstallations.getToken()]),Lt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${te.projectId}/namespaces/${te.namespace}:fetch?key=${te.apiKey}`,En={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Cn={sdk_version:te.sdkVersion,app_instance_id:Ce,app_instance_id_token:qe,app_id:te.appId,language_code:hs()},Wn={method:"POST",headers:En,body:JSON.stringify(Cn)},Or=fetch(Lt,Wn),Er=new Promise((Ca,Bo)=>{O.signal.addEventListener(()=>{const Ru=new Error("The operation was aborted.");Ru.name="AbortError",Bo(Ru)})});let Ii;try{yield Promise.race([Or,Er]),Ii=yield Or}catch(Ca){let Bo="fetch-client-network";throw"AbortError"===(null==Ca?void 0:Ca.name)&&(Bo="fetch-timeout"),Vi.create(Bo,{originalErrorMessage:null==Ca?void 0:Ca.message})}let Ws=Ii.status;const Ti=Ii.headers.get("ETag")||void 0;let Xo,dl;if(200===Ii.status){let Ca;try{Ca=yield Ii.json()}catch(Bo){throw Vi.create("fetch-client-parse",{originalErrorMessage:null==Bo?void 0:Bo.message})}Xo=Ca.entries,dl=Ca.state}if("INSTANCE_STATE_UNSPECIFIED"===dl?Ws=500:"NO_CHANGE"===dl?Ws=304:("NO_TEMPLATE"===dl||"EMPTY_CONFIG"===dl)&&(Xo={}),304!==Ws&&200!==Ws)throw Vi.create("fetch-status",{httpStatus:Ws});return{status:Ws,eTag:Ti,config:Xo}})()}}class Ts{constructor(O,te){this.client=O,this.storage=te}fetch(O){var te=this;return(0,ee.Z)(function*(){const Ce=(yield te.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return te.attemptFetch(O,Ce)})()}attemptFetch(O,te){var Ce=this;return(0,ee.Z)(function*(qe,{throttleEndTimeMillis:dt,backoffCount:Lt}){yield function fs(A,O){return new Promise((te,Ce)=>{const qe=Math.max(O-Date.now(),0),dt=setTimeout(te,qe);A.addEventListener(()=>{clearTimeout(dt),Ce(Vi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(qe.signal,dt);try{const En=yield Ce.client.fetch(qe);return yield Ce.storage.deleteThrottleMetadata(),En}catch(En){if(!function Ao(A){if(!(A instanceof Pe.ZR&&A.customData))return!1;const O=Number(A.customData.httpStatus);return 429===O||500===O||503===O||504===O}(En))throw En;const Cn={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(Lt),backoffCount:Lt+1};return yield Ce.storage.setThrottleMetadata(Cn),Ce.attemptFetch(qe,Cn)}}).apply(this,arguments)}}class Ro{constructor(O,te,Ce,qe,dt){this.app=O,this._client=te,this._storageCache=Ce,this._storage=qe,this._logger=dt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ki(A,O){const te=A.target.error||void 0;return Vi.create(O,{originalErrorMessage:te&&(null==te?void 0:te.message)})}const di="app_namespace_store";class ei{constructor(O,te,Ce,qe=function Nr(){return new Promise((A,O)=>{try{const te=indexedDB.open("firebase_remote_config",1);te.onerror=Ce=>{O(Ki(Ce,"storage-open"))},te.onsuccess=Ce=>{A(Ce.target.result)},te.onupgradeneeded=Ce=>{0===Ce.oldVersion&&Ce.target.result.createObjectStore(di,{keyPath:"compositeKey"})}}catch(te){O(Vi.create("storage-open",{originalErrorMessage:null==te?void 0:te.message}))}})}()){this.appId=O,this.appName=te,this.namespace=Ce,this.openDbPromise=qe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var te=this;return(0,ee.Z)(function*(){const Ce=yield te.openDbPromise;return new Promise((qe,dt)=>{const En=Ce.transaction([di],"readonly").objectStore(di),Cn=te.createCompositeKey(O);try{const Wn=En.get(Cn);Wn.onerror=Or=>{dt(Ki(Or,"storage-get"))},Wn.onsuccess=Or=>{const Er=Or.target.result;qe(Er?Er.value:void 0)}}catch(Wn){dt(Vi.create("storage-get",{originalErrorMessage:null==Wn?void 0:Wn.message}))}})})()}set(O,te){var Ce=this;return(0,ee.Z)(function*(){const qe=yield Ce.openDbPromise;return new Promise((dt,Lt)=>{const Cn=qe.transaction([di],"readwrite").objectStore(di),Wn=Ce.createCompositeKey(O);try{const Or=Cn.put({compositeKey:Wn,value:te});Or.onerror=Er=>{Lt(Ki(Er,"storage-set"))},Or.onsuccess=()=>{dt()}}catch(Or){Lt(Vi.create("storage-set",{originalErrorMessage:null==Or?void 0:Or.message}))}})})()}delete(O){var te=this;return(0,ee.Z)(function*(){const Ce=yield te.openDbPromise;return new Promise((qe,dt)=>{const En=Ce.transaction([di],"readwrite").objectStore(di),Cn=te.createCompositeKey(O);try{const Wn=En.delete(Cn);Wn.onerror=Or=>{dt(Ki(Or,"storage-delete"))},Wn.onsuccess=()=>{qe()}}catch(Wn){dt(Vi.create("storage-delete",{originalErrorMessage:null==Wn?void 0:Wn.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class bs{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,ee.Z)(function*(){const te=O.storage.getLastFetchStatus(),Ce=O.storage.getLastSuccessfulFetchTimestampMillis(),qe=O.storage.getActiveConfig(),dt=yield te;dt&&(O.lastFetchStatus=dt);const Lt=yield Ce;Lt&&(O.lastSuccessfulFetchTimestampMillis=Lt);const En=yield qe;En&&(O.activeConfig=En)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function uo(){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,ee.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(A){return!1}})).apply(this,arguments)}let ue,$;!function _i(){(0,re._registerComponent)(new je.wA("remote-config",function A(O,{instanceIdentifier:te}){const Ce=O.getProvider("app").getImmediate(),qe=O.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vi.create("registration-window");if(!(0,Pe.hl)())throw Vi.create("indexed-db-unavailable");const{projectId:dt,apiKey:Lt,appId:En}=Ce.options;if(!dt)throw Vi.create("registration-project-id");if(!Lt)throw Vi.create("registration-api-key");if(!En)throw Vi.create("registration-app-id");const Cn=new ei(En,Ce.name,te=te||"firebase"),Wn=new bs(Cn),Or=new We.Yd(Un);Or.logLevel=We.in.ERROR;const Er=new zi(qe,re.SDK_VERSION,te,dt,Lt,En),Ii=new Ts(Er,Cn),Ws=new ko(Ii,Cn,Wn,Or),Ti=new Ro(Ce,Ws,Wn,Cn,Or);return function Ms(A){const O=(0,Pe.m9)(A);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Ti),Ti},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Un,"0.4.4"),(0,re.registerVersion)(Un,"0.4.4","esm2017")}();const Pt=new WeakMap,zt=new WeakMap,Dn=new WeakMap,Yn=new WeakMap,Rr=new WeakMap;let vi={get(A,O,te){if(A instanceof IDBTransaction){if("done"===O)return zt.get(A);if("objectStoreNames"===O)return A.objectStoreNames||Dn.get(A);if("store"===O)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return Ci(A[O])},set:(A,O,te)=>(A[O]=te,!0),has:(A,O)=>A instanceof IDBTransaction&&("done"===O||"store"===O)||O in A};function co(A){return"function"==typeof A?function ti(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Oe(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...O){return A.apply(Qn(this),O),Ci(Pt.get(this))}:function(...O){return Ci(A.apply(Qn(this),O))}:function(O,...te){const Ce=A.call(Qn(this),O,...te);return Dn.set(Ce,O.sort?O.sort():[O]),Ci(Ce)}}(A):(A instanceof IDBTransaction&&function vr(A){if(zt.has(A))return;const O=new Promise((te,Ce)=>{const qe=()=>{A.removeEventListener("complete",dt),A.removeEventListener("error",Lt),A.removeEventListener("abort",Lt)},dt=()=>{te(),qe()},Lt=()=>{Ce(A.error||new DOMException("AbortError","AbortError")),qe()};A.addEventListener("complete",dt),A.addEventListener("error",Lt),A.addEventListener("abort",Lt)});zt.set(A,O)}(A),((A,O)=>O.some(te=>A instanceof te))(A,function he(){return ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,vi):A)}function Ci(A){if(A instanceof IDBRequest)return function fr(A){const O=new Promise((te,Ce)=>{const qe=()=>{A.removeEventListener("success",dt),A.removeEventListener("error",Lt)},dt=()=>{te(Ci(A.result)),qe()},Lt=()=>{Ce(A.error),qe()};A.addEventListener("success",dt),A.addEventListener("error",Lt)});return O.then(te=>{te instanceof IDBCursor&&Pt.set(te,A)}).catch(()=>{}),Rr.set(O,A),O}(A);if(Yn.has(A))return Yn.get(A);const O=co(A);return O!==A&&(Yn.set(A,O),Rr.set(O,A)),O}const Qn=A=>Rr.get(A);function Ds(A,O,{blocked:te,upgrade:Ce,blocking:qe,terminated:dt}={}){const Lt=indexedDB.open(A,O),En=Ci(Lt);return Ce&&Lt.addEventListener("upgradeneeded",Cn=>{Ce(Ci(Lt.result),Cn.oldVersion,Cn.newVersion,Ci(Lt.transaction))}),te&&Lt.addEventListener("blocked",()=>te()),En.then(Cn=>{dt&&Cn.addEventListener("close",()=>dt()),qe&&Cn.addEventListener("versionchange",()=>qe())}).catch(()=>{}),En}function Fo(A,{blocked:O}={}){const te=indexedDB.deleteDatabase(A);return O&&te.addEventListener("blocked",()=>O()),Ci(te).then(()=>{})}const ho=["get","getKey","getAll","getAllKeys","count"],vo=["put","add","delete","clear"],K=new Map;function j(A,O){if(!(A instanceof IDBDatabase)||O in A||"string"!=typeof O)return;if(K.get(O))return K.get(O);const te=O.replace(/FromIndex$/,""),Ce=O!==te,qe=vo.includes(te);if(!(te in(Ce?IDBIndex:IDBObjectStore).prototype)||!qe&&!ho.includes(te))return;const dt=function(){var Lt=(0,ee.Z)(function*(En,...Cn){const Wn=this.transaction(En,qe?"readwrite":"readonly");let Or=Wn.store;return Ce&&(Or=Or.index(Cn.shift())),(yield Promise.all([Or[te](...Cn),qe&&Wn.done]))[0]});return function(Cn){return Lt.apply(this,arguments)}}();return K.set(O,dt),dt}!function gi(A){vi=A(vi)}(A=>D_(b_({},A),{get:(O,te,Ce)=>j(O,te)||A.get(O,te,Ce),has:(O,te)=>!!j(O,te)||A.has(O,te)}));const F="/firebase-messaging-sw.js",ce="/firebase-cloud-messaging-push-scope",Le="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qr="google.c.a.c_id",W="google.c.a.c_l",q="google.c.a.ts",pe="google.c.a.e";var ze=(()=>{return(A=ze||(ze={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",ze;var A})();function vt(A){const O=new Uint8Array(A);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yt(A){const te=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ce=atob(te),qe=new Uint8Array(Ce.length);for(let dt=0;dt<Ce.length;++dt)qe[dt]=Ce.charCodeAt(dt);return qe}const On="fcm_token_details_db",Jn="fcm_token_object_Store";function Bn(A){return ni.apply(this,arguments)}function ni(){return ni=(0,ee.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(dt=>dt.name).includes(On))return null;let O=null;return(yield Ds(On,5,{upgrade:(Ce=(0,ee.Z)(function*(qe,dt,Lt,En){var Cn;if(dt<2||!qe.objectStoreNames.contains(Jn))return;const Wn=En.objectStore(Jn),Or=yield Wn.index("fcmSenderId").get(A);if(yield Wn.clear(),Or)if(2===dt){const Er=Or;if(!Er.auth||!Er.p256dh||!Er.endpoint)return;O={token:Er.fcmToken,createTime:null!==(Cn=Er.createTime)&&void 0!==Cn?Cn:Date.now(),subscriptionOptions:{auth:Er.auth,p256dh:Er.p256dh,endpoint:Er.endpoint,swScope:Er.swScope,vapidKey:"string"==typeof Er.vapidKey?Er.vapidKey:vt(Er.vapidKey)}}}else if(3===dt){const Er=Or;O={token:Er.fcmToken,createTime:Er.createTime,subscriptionOptions:{auth:vt(Er.auth),p256dh:vt(Er.p256dh),endpoint:Er.endpoint,swScope:Er.swScope,vapidKey:vt(Er.vapidKey)}}}else if(4===dt){const Er=Or;O={token:Er.fcmToken,createTime:Er.createTime,subscriptionOptions:{auth:vt(Er.auth),p256dh:vt(Er.p256dh),endpoint:Er.endpoint,swScope:Er.swScope,vapidKey:vt(Er.vapidKey)}}}}),function(dt,Lt,En,Cn){return Ce.apply(this,arguments)})})).close(),yield Fo(On),yield Fo("fcm_vapid_details_db"),yield Fo("undefined"),Gr(O)?O:null;var Ce}),ni.apply(this,arguments)}function Gr(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:O}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const Fi="firebase-messaging-store";let oi=null;function Yi(){return oi||(oi=Ds("firebase-messaging-database",1,{upgrade:(A,O)=>{0===O&&A.createObjectStore(Fi)}})),oi}function ns(A){return Li.apply(this,arguments)}function Li(){return(Li=(0,ee.Z)(function*(A){const O=js(A),Ce=yield(yield Yi()).transaction(Fi).objectStore(Fi).get(O);if(Ce)return Ce;{const qe=yield Bn(A.appConfig.senderId);if(qe)return yield Bi(A,qe),qe}})).apply(this,arguments)}function Bi(A,O){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,ee.Z)(function*(A,O){const te=js(A),qe=(yield Yi()).transaction(Fi,"readwrite");return yield qe.objectStore(Fi).put(O,te),yield qe.done,O})).apply(this,arguments)}function Eo(A){return da.apply(this,arguments)}function da(){return(da=(0,ee.Z)(function*(A){const O=js(A),Ce=(yield Yi()).transaction(Fi,"readwrite");yield Ce.objectStore(Fi).delete(O),yield Ce.done})).apply(this,arguments)}function js({appConfig:A}){return A.appId}const as=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function nl(A,O){return wo.apply(this,arguments)}function wo(){return(wo=(0,ee.Z)(function*(A,O){const te=yield Es(A),Ce=ba(O),qe={method:"POST",headers:te,body:JSON.stringify(Ce)};let dt;try{dt=yield(yield fetch(ls(A.appConfig),qe)).json()}catch(Lt){throw as.create("token-subscribe-failed",{errorInfo:null==Lt?void 0:Lt.toString()})}if(dt.error)throw as.create("token-subscribe-failed",{errorInfo:dt.error.message});if(!dt.token)throw as.create("token-subscribe-no-token");return dt.token})).apply(this,arguments)}function Ta(A,O){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,ee.Z)(function*(A,O){const te=yield Es(A),Ce=ba(O.subscriptionOptions),qe={method:"PATCH",headers:te,body:JSON.stringify(Ce)};let dt;try{dt=yield(yield fetch(`${ls(A.appConfig)}/${O.token}`,qe)).json()}catch(Lt){throw as.create("token-update-failed",{errorInfo:null==Lt?void 0:Lt.toString()})}if(dt.error)throw as.create("token-update-failed",{errorInfo:dt.error.message});if(!dt.token)throw as.create("token-update-no-token");return dt.token})).apply(this,arguments)}function mi(A,O){return eo.apply(this,arguments)}function eo(){return(eo=(0,ee.Z)(function*(A,O){const Ce={method:"DELETE",headers:yield Es(A)};try{const dt=yield(yield fetch(`${ls(A.appConfig)}/${O}`,Ce)).json();if(dt.error)throw as.create("token-unsubscribe-failed",{errorInfo:dt.error.message})}catch(qe){throw as.create("token-unsubscribe-failed",{errorInfo:null==qe?void 0:qe.toString()})}})).apply(this,arguments)}function ls({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function Es(A){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,ee.Z)(function*({appConfig:A,installations:O}){const te=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${te}`})})).apply(this,arguments)}function ba({p256dh:A,auth:O,endpoint:te,vapidKey:Ce}){const qe={web:{endpoint:te,auth:O,p256dh:A}};return Ce!==Le&&(qe.web.applicationPubKey=Ce),qe}const ha=6048e5;function gl(A){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,ee.Z)(function*(A){const O=yield ml(A.swRegistration,A.vapidKey),te={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:O.endpoint,auth:vt(O.getKey("auth")),p256dh:vt(O.getKey("p256dh"))},Ce=yield ns(A.firebaseDependencies);if(Ce){if(Ko(Ce.subscriptionOptions,te))return Date.now()>=Ce.createTime+ha?ta(A,{token:Ce.token,createTime:Date.now(),subscriptionOptions:te}):Ce.token;try{yield mi(A.firebaseDependencies,Ce.token)}catch(qe){console.warn(qe)}return ss(A.firebaseDependencies,te)}return ss(A.firebaseDependencies,te)})).apply(this,arguments)}function Hs(A){return zo.apply(this,arguments)}function zo(){return(zo=(0,ee.Z)(function*(A){const O=yield ns(A.firebaseDependencies);O&&(yield mi(A.firebaseDependencies,O.token),yield Eo(A.firebaseDependencies));const te=yield A.swRegistration.pushManager.getSubscription();return!te||te.unsubscribe()})).apply(this,arguments)}function ta(A,O){return Co.apply(this,arguments)}function Co(){return(Co=(0,ee.Z)(function*(A,O){try{const te=yield Ta(A.firebaseDependencies,O),Ce=Object.assign(Object.assign({},O),{token:te,createTime:Date.now()});return yield Bi(A.firebaseDependencies,Ce),te}catch(te){throw yield Hs(A),te}})).apply(this,arguments)}function ss(A,O){return to.apply(this,arguments)}function to(){return(to=(0,ee.Z)(function*(A,O){const Ce={token:yield nl(A,O),createTime:Date.now(),subscriptionOptions:O};return yield Bi(A,Ce),Ce.token})).apply(this,arguments)}function ml(A,O){return ai.apply(this,arguments)}function ai(){return(ai=(0,ee.Z)(function*(A,O){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yt(O)})})).apply(this,arguments)}function Ko(A,O){return O.vapidKey===A.vapidKey&&O.endpoint===A.endpoint&&O.auth===A.auth&&O.p256dh===A.p256dh}function rs(A){const O={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function Lo(A,O){if(!O.notification)return;A.notification={};const te=O.notification.title;te&&(A.notification.title=te);const Ce=O.notification.body;Ce&&(A.notification.body=Ce);const qe=O.notification.image;qe&&(A.notification.image=qe);const dt=O.notification.icon;dt&&(A.notification.icon=dt)}(O,A),function rl(A,O){!O.data||(A.data=O.data)}(O,A),function na(A,O){var te,Ce,qe,dt,Lt;if(!O.fcmOptions&&!(null===(te=O.notification)||void 0===te?void 0:te.click_action))return;A.fcmOptions={};const En=null!==(qe=null===(Ce=O.fcmOptions)||void 0===Ce?void 0:Ce.link)&&void 0!==qe?qe:null===(dt=O.notification)||void 0===dt?void 0:dt.click_action;En&&(A.fcmOptions.link=En);const Cn=null===(Lt=O.fcmOptions)||void 0===Lt?void 0:Lt.analytics_label;Cn&&(A.fcmOptions.analyticsLabel=Cn)}(O,A),O}function Da(A){return"object"==typeof A&&!!A&&qr in A}function yl(A,O){const te=[];for(let Ce=0;Ce<A.length;Ce++)te.push(A.charAt(Ce)),Ce<O.length&&te.push(O.charAt(Ce));return te.join("")}function qo(A){return as.create("missing-app-config-values",{valueName:A})}yl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fa{constructor(O,te,Ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const qe=function Al(A){if(!A||!A.options)throw qo("App Configuration Object");if(!A.name)throw qo("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:te}=A;for(const Ce of O)if(!te[Ce])throw qo(Ce);return{appName:A.name,projectId:te.projectId,apiKey:te.apiKey,appId:te.appId,senderId:te.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:qe,installations:te,analyticsProvider:Ce}}_delete(){return Promise.resolve()}}function Mi(A){return ra.apply(this,arguments)}function ra(){return(ra=(0,ee.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(F,{scope:ce}),A.swRegistration.update().catch(()=>{})}catch(O){throw as.create("failed-service-worker-registration",{browserErrorMessage:null==O?void 0:O.message})}})).apply(this,arguments)}function Zo(A,O){return Os.apply(this,arguments)}function Os(){return(Os=(0,ee.Z)(function*(A,O){if(!O&&!A.swRegistration&&(yield Mi(A)),O||!A.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw as.create("invalid-sw-registration");A.swRegistration=O}})).apply(this,arguments)}function Yo(A,O){return no.apply(this,arguments)}function no(){return(no=(0,ee.Z)(function*(A,O){O?A.vapidKey=O:A.vapidKey||(A.vapidKey=Le)})).apply(this,arguments)}function Rl(){return(Rl=(0,ee.Z)(function*(A,O){if(!navigator)throw as.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw as.create("permission-blocked");return yield Yo(A,null==O?void 0:O.vapidKey),yield Zo(A,null==O?void 0:O.serviceWorkerRegistration),gl(A)})).apply(this,arguments)}function za(A,O,te){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,ee.Z)(function*(A,O,te){const Ce=Ml(O);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(Ce,{message_id:te[qr],message_name:te[W],message_time:te[q],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ml(A){switch(A){case ze.NOTIFICATION_CLICKED:return"notification_open";case ze.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Io(){return(Io=(0,ee.Z)(function*(A,O){const te=O.data;if(!te.isFirebaseMessaging)return;A.onMessageHandler&&te.messageType===ze.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(rs(te)):A.onMessageHandler.next(rs(te)));const Ce=te.data;Da(Ce)&&"1"===Ce[pe]&&(yield za(A,te.messageType,Ce))})).apply(this,arguments)}const Wl="@firebase/messaging",_l=A=>{const O=new fa(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",te=>function xl(A,O){return Io.apply(this,arguments)}(O,te)),O},vl=A=>{const O=A.getProvider("messaging").getImmediate();return{getToken:Ce=>function Ss(A,O){return Rl.apply(this,arguments)}(O,Ce)}};function P(){return D.apply(this,arguments)}function D(){return(D=(0,ee.Z)(function*(){try{yield(0,Pe.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pa(){(0,re._registerComponent)(new je.wA("messaging",_l,"PUBLIC")),(0,re._registerComponent)(new je.wA("messaging-internal",vl,"PRIVATE")),(0,re.registerVersion)(Wl,"0.12.4"),(0,re.registerVersion)(Wl,"0.12.4","esm2017")}();const Xt="analytics",Gt="firebase_id",Dt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jt="https://www.googletagmanager.com/gtag/js",Fr=new We.Yd("@firebase/analytics"),Qi=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ia(A){if(!A.startsWith(jt)){const O=Qi.create("invalid-gtag-resource",{gtagURL:A});return Fr.warn(O.message),""}return A}function ga(A){return Promise.all(A.map(O=>O.catch(te=>te)))}function Tu(A,O){const te=function Ka(A,O){let te;return window.trustedTypes&&(te=window.trustedTypes.createPolicy(A,O)),te}("firebase-js-sdk-policy",{createScriptURL:ia}),Ce=document.createElement("script"),qe=`${jt}?l=${A}&id=${O}`;Ce.src=te?null==te?void 0:te.createScriptURL(qe):qe,Ce.async=!0,document.head.appendChild(Ce)}function qa(A,O,te,Ce,qe,dt){return iu.apply(this,arguments)}function iu(){return(iu=(0,ee.Z)(function*(A,O,te,Ce,qe,dt){const Lt=Ce[qe];try{if(Lt)yield O[Lt];else{const Cn=(yield ga(te)).find(Wn=>Wn.measurementId===qe);Cn&&(yield O[Cn.appId])}}catch(En){Fr.error(En)}A("config",qe,dt)})).apply(this,arguments)}function ec(A,O,te,Ce,qe){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,ee.Z)(function*(A,O,te,Ce,qe){try{let dt=[];if(qe&&qe.send_to){let Lt=qe.send_to;Array.isArray(Lt)||(Lt=[Lt]);const En=yield ga(te);for(const Cn of Lt){const Wn=En.find(Er=>Er.measurementId===Cn),Or=Wn&&O[Wn.appId];if(!Or){dt=[];break}dt.push(Or)}}0===dt.length&&(dt=Object.values(O)),yield Promise.all(dt),A("event",Ce,qe||{})}catch(dt){Fr.error(dt)}})).apply(this,arguments)}function tc(A){const O=window.document.getElementsByTagName("script");for(const te of Object.values(O))if(te.src&&te.src.includes(jt)&&te.src.includes(A))return te;return null}const ii=new class Za{constructor(O={},te=1e3){this.throttleMetadata=O,this.intervalMillis=te}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,te){this.throttleMetadata[O]=te}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function su(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function gs(A){return fn.apply(this,arguments)}function fn(){return(fn=(0,ee.Z)(function*(A){var O;const{appId:te,apiKey:Ce}=A,qe={method:"GET",headers:su(Ce)},dt=Dt.replace("{app-id}",te),Lt=yield fetch(dt,qe);if(200!==Lt.status&&304!==Lt.status){let En="";try{const Cn=yield Lt.json();(null===(O=Cn.error)||void 0===O?void 0:O.message)&&(En=Cn.error.message)}catch(Cn){}throw Qi.create("config-fetch-failed",{httpStatus:Lt.status,responseMessage:En})}return Lt.json()})).apply(this,arguments)}function Ra(A){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,ee.Z)(function*(A,O=ii,te){const{appId:Ce,apiKey:qe,measurementId:dt}=A.options;if(!Ce)throw Qi.create("no-app-id");if(!qe){if(dt)return{measurementId:dt,appId:Ce};throw Qi.create("no-api-key")}const Lt=O.getThrottleMetadata(Ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},En=new zl;return setTimeout((0,ee.Z)(function*(){En.abort()}),void 0!==te?te:6e4),Nl({appId:Ce,apiKey:qe,measurementId:dt},Lt,En,O)})).apply(this,arguments)}function Nl(A,O,te){return xa.apply(this,arguments)}function xa(){return(xa=(0,ee.Z)(function*(A,{throttleEndTimeMillis:O,backoffCount:te},Ce,qe=ii){var dt;const{appId:Lt,measurementId:En}=A;try{yield ks(Ce,O)}catch(Cn){if(En)return Fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${En} provided in the "measurementId" field in the local Firebase config. [${null==Cn?void 0:Cn.message}]`),{appId:Lt,measurementId:En};throw Cn}try{const Cn=yield gs(A);return qe.deleteThrottleMetadata(Lt),Cn}catch(Cn){const Wn=Cn;if(!Ya(Wn)){if(qe.deleteThrottleMetadata(Lt),En)return Fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${En} provided in the "measurementId" field in the local Firebase config. [${null==Wn?void 0:Wn.message}]`),{appId:Lt,measurementId:En};throw Cn}const Or=503===Number(null===(dt=null==Wn?void 0:Wn.customData)||void 0===dt?void 0:dt.httpStatus)?(0,Pe.$s)(te,qe.intervalMillis,30):(0,Pe.$s)(te,qe.intervalMillis),Er={throttleEndTimeMillis:Date.now()+Or,backoffCount:te+1};return qe.setThrottleMetadata(Lt,Er),Fr.debug(`Calling attemptFetch again in ${Or} millis`),Nl(A,Er,Ce,qe)}})).apply(this,arguments)}function ks(A,O){return new Promise((te,Ce)=>{const qe=Math.max(O-Date.now(),0),dt=setTimeout(te,qe);A.addEventListener(()=>{clearTimeout(dt),Ce(Qi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function Ya(A){if(!(A instanceof Pe.ZR&&A.customData))return!1;const O=Number(A.customData.httpStatus);return 429===O||500===O||503===O||504===O}class zl{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let Ol,Qo;function To(){return(To=(0,ee.Z)(function*(A,O,te,Ce,qe){if(qe&&qe.global)A("event",te,Ce);else{const dt=yield O;A("event",te,Object.assign(Object.assign({},Ce),{send_to:dt}))}})).apply(this,arguments)}function kl(A){Qo=A}function ma(A){Ol=A}function nc(){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,ee.Z)(function*(){if(!(0,Pe.hl)())return Fr.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(A){return Fr.warn(Qi.create("indexeddb-unavailable",{errorInfo:null==A?void 0:A.toString()}).message),!1}return!0})).apply(this,arguments)}function ka(){return(ka=(0,ee.Z)(function*(A,O,te,Ce,qe,dt,Lt){var En;const Cn=Ra(A);Cn.then(Ws=>{te[Ws.measurementId]=Ws.appId,A.options.measurementId&&Ws.measurementId!==A.options.measurementId&&Fr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Ws.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ws=>Fr.error(Ws)),O.push(Cn);const Wn=nc().then(Ws=>{if(Ws)return Ce.getId()}),[Or,Er]=yield Promise.all([Cn,Wn]);tc(dt)||Tu(dt,Or.measurementId),Qo&&(qe("consent","default",Qo),kl(void 0)),qe("js",new Date);const Ii=null!==(En=null==Lt?void 0:Lt.config)&&void 0!==En?En:{};return Ii.origin="firebase",Ii.update=!0,null!=Er&&(Ii[Gt]=Er),qe("config",Or.measurementId,Ii),Ol&&(qe("set",Ol),ma(void 0)),Or.measurementId})).apply(this,arguments)}class po{constructor(O){this.app=O}_delete(){return delete Uo[this.app.options.appId],Promise.resolve()}}let Uo={},ya=[];const ou={};let ku,$s,us="dataLayer",ll=!1;function lu(A,O,te){!function Qa(){const A=[];if((0,Pe.ru)()&&A.push("This is a browser extension environment."),(0,Pe.zI)()||A.push("Cookies are not available."),A.length>0){const O=A.map((Ce,qe)=>`(${qe+1}) ${Ce}`).join(" "),te=Qi.create("invalid-analytics-context",{errorInfo:O});Fr.warn(te.message)}}();const Ce=A.options.appId;if(!Ce)throw Qi.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Qi.create("no-api-key");Fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Uo[Ce])throw Qi.create("already-exists",{id:Ce});if(!ll){!function Pl(A){let O=[];Array.isArray(window[A])?O=window[A]:window[A]=O}(us);const{wrappedGtag:dt,gtagCore:Lt}=function Vo(A,O,te,Ce,qe){let dt=function(...Lt){window[Ce].push(arguments)};return window[qe]&&"function"==typeof window[qe]&&(dt=window[qe]),window[qe]=function xr(A,O,te,Ce){function dt(){return(dt=(0,ee.Z)(function*(Lt,...En){try{if("event"===Lt){const[Cn,Wn]=En;yield ec(A,O,te,Cn,Wn)}else if("config"===Lt){const[Cn,Wn]=En;yield qa(A,O,te,Ce,Cn,Wn)}else if("consent"===Lt){const[Cn]=En;A("consent","update",Cn)}else if("get"===Lt){const[Cn,Wn,Or]=En;A("get",Cn,Wn,Or)}else if("set"===Lt){const[Cn]=En;A("set",Cn)}else A(Lt,...En)}catch(Cn){Fr.error(Cn)}})).apply(this,arguments)}return function qe(Lt){return dt.apply(this,arguments)}}(dt,A,O,te),{gtagCore:dt,wrappedGtag:window[qe]}}(Uo,ya,ou,us,"gtag");$s=dt,ku=Lt,ll=!0}return Uo[Ce]=function rc(A,O,te,Ce,qe,dt,Lt){return ka.apply(this,arguments)}(A,ya,ou,O,ku,us,te),new po(A)}function Fu(){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,ee.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(A){return!1}})).apply(this,arguments)}const fu="@firebase/analytics";!function gu(){(0,re._registerComponent)(new je.wA(Xt,(O,{options:te})=>lu(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),te),"PUBLIC")),(0,re._registerComponent)(new je.wA("analytics-internal",function A(O){try{const te=O.getProvider(Xt).getImmediate();return{logEvent:(Ce,qe,dt)=>function Vu(A,O,te,Ce){A=(0,Pe.m9)(A),function sl(A,O,te,Ce,qe){return To.apply(this,arguments)}($s,Uo[A.app.options.appId],O,te,Ce).catch(qe=>Fr.error(qe))}(te,Ce,qe,dt)}}catch(te){throw Qi.create("interop-component-reg-failed",{reason:te})}},"PRIVATE")),(0,re.registerVersion)(fu,"0.10.0"),(0,re.registerVersion)(fu,"0.10.0","esm2017")}();var ul=U(4408),Vl=U(7565);const is=new class Uu extends Vl.v{}(class _a extends ul.o{constructor(O,te){super(O,te),this.scheduler=O,this.work=te}schedule(O,te=0){return te>0?super.schedule(O,te):(this.delay=te,this.state=O,this.scheduler.flush(this),this)}execute(O,te){return te>0||this.closed?super.execute(O,te):this._execute(O,te)}requestAsyncId(O,te,Ce=0){return null!=Ce&&Ce>0||null==Ce&&this.delay>0?super.requestAsyncId(O,te,Ce):(O.flush(this),0)}});var sa=U(4986),Ul=U(8306),Pi=U(8505),io=U(5363),Gs=U(9468);const Xi=new _.GfV("7.6.1"),wl="__angularfire_symbol__analyticsIsSupportedValue",La="__angularfire_symbol__analyticsIsSupported",ji="__angularfire_symbol__remoteConfigIsSupportedValue",mu="__angularfire_symbol__remoteConfigIsSupported",va="__angularfire_symbol__messagingIsSupportedValue",Cs="__angularfire_symbol__messagingIsSupported";function Ea(A,O,te){if(O){if(1===O.length)return O[0];const dt=O.filter(Lt=>Lt.app===te);if(1===dt.length)return dt[0]}return te.container.getProvider(A).getImmediate({optional:!0})}globalThis[La]||(globalThis[La]=Fu().then(A=>globalThis[wl]=A).catch(()=>globalThis[wl]=!1)),globalThis[Cs]||(globalThis[Cs]=P().then(A=>globalThis[va]=A).catch(()=>globalThis[va]=!1)),globalThis[mu]||(globalThis[mu]=uo().then(A=>globalThis[ji]=A).catch(()=>globalThis[ji]=!1));const Yl=(A,O)=>{const te=O?[O]:(0,L.C6)(),Ce=[];return te.forEach(qe=>{qe.container.getProvider(A).instances.forEach(Lt=>{Ce.includes(Lt)||Ce.push(Lt)})}),Ce};function wa(){}class go{constructor(O,te=is){this.zone=O,this.delegate=te}now(){return this.delegate.now()}schedule(O,te,Ce){const qe=this.zone;return this.delegate.schedule(function(Lt){qe.runGuarded(()=>{O.apply(this,[Lt])})},te,Ce)}}class Jo{constructor(O){this.zone=O,this.task=null}call(O,te){const Ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wa,{},wa,wa)),te.pipe((0,Pi.b)({next:Ce,complete:Ce,error:Ce})).subscribe(O).add(Ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xo=(()=>{class A{constructor(te){this.ngZone=te,this.outsideAngular=te.runOutsideAngular(()=>new go(Zone.current)),this.insideAngular=te.run(()=>new go(Zone.current,sa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(te){return new(te||A)(_.LFG(_.R0b))},A.\u0275prov=_.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Ja(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Xa(A){return Ja().ngZone.runOutsideAngular(()=>A())}function bo(A){return Ja().ngZone.run(()=>A())}function _u(A){return A.pipe((0,io.Q)(Ja().outsideAngular))}function Au(A){return Ja(),function jl(A){return function(te){return(te=te.lift(new Jo(A.ngZone))).pipe((0,Gs.R)(A.outsideAngular),(0,io.Q)(A.insideAngular))}}(Ja())(A)}const Bu=(A,O)=>function(){const Ce=arguments;return O&&setTimeout(()=>{"scheduled"===O.state&&O.invoke()},10),bo(()=>A.apply(void 0,Ce))},Ql=(A,O)=>function(){let te;const Ce=arguments;for(let dt=0;dt<arguments.length;dt++)"function"==typeof Ce[dt]&&(O&&(te||(te=bo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wa,{},wa,wa)))),Ce[dt]=Bu(Ce[dt],te));const qe=Xa(()=>A.apply(this,Ce));if(!O){if(qe instanceof Ul.y){const dt=Ja();return qe.pipe((0,Gs.R)(dt.outsideAngular),(0,io.Q)(dt.insideAngular))}return bo(()=>qe)}return qe instanceof Ul.y?qe.pipe(Au):qe instanceof Promise?bo(()=>new Promise((dt,Lt)=>qe.then(En=>bo(()=>dt(En)),En=>bo(()=>Lt(En))))):"function"==typeof qe&&te?function(){return setTimeout(()=>{te&&"scheduled"===te.state&&te.invoke()},10),qe.apply(this,arguments)}:bo(()=>qe)}},1389:(hn,ut,U)=>{U.d(ut,{$:()=>F,A:()=>ve,D:()=>ft,I:()=>Zr,J:()=>kt,L:()=>$r,N:()=>Ni,P:()=>rc,Q:()=>ei,R:()=>Du,U:()=>ps,V:()=>uo,W:()=>Yr,X:()=>wi,Y:()=>he,Z:()=>Oe,_:()=>Rr,a:()=>J,a0:()=>Le,a1:()=>qr,a2:()=>De,a3:()=>Jn,a4:()=>ni,a5:()=>hi,a6:()=>Fi,a7:()=>Yi,a8:()=>Li,a9:()=>Ns,aA:()=>be,aB:()=>La,aC:()=>Jr,aD:()=>Br,aE:()=>Pi,aF:()=>hu,aG:()=>Lu,aH:()=>mn,aL:()=>Ve,aO:()=>ue,aa:()=>Eo,ab:()=>js,ac:()=>fo,ad:()=>Ta,ae:()=>mi,af:()=>ls,ai:()=>ha,aj:()=>Mo,ak:()=>Hs,an:()=>ti,ao:()=>Lo,aq:()=>no,ar:()=>Wl,as:()=>Nt,at:()=>Bt,au:()=>se,av:()=>it,aw:()=>Er,ax:()=>Cs,ay:()=>on,az:()=>xe,b:()=>T,c:()=>$s,d:()=>lu,e:()=>au,f:()=>fu,g:()=>Uu,h:()=>ul,i:()=>Gn,j:()=>sa,k:()=>dl,l:()=>ro,m:()=>Ru,p:()=>Be,r:()=>Na,s:()=>pt,u:()=>nc});var _=U(5861),L=U(2090),ee=U(6881),re=U(7582),Pe=U(1877),je=U(4859);const Be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ft=function Je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},bt=function Tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Mt=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ct=new Pe.Yd("@firebase/auth");function Kt(w,...f){Ct.logLevel<=Pe.in.ERROR&&Ct.error(`Auth (${ee.SDK_VERSION}): ${w}`,...f)}function it(w,...f){throw It(w,...f)}function xe(w,...f){return It(w,...f)}function Qe(w,f,g){const b=Object.assign(Object.assign({},bt()),{[f]:g});return new L.LL("auth","Firebase",b).create(f,{appName:w.name})}function _t(w,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&it(w,"argument-error"),Qe(w,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function It(w,...f){if("string"!=typeof w){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(g,...b)}return Mt.create(w,...f)}function be(w,f,...g){if(!w)throw It(f,...g)}function Ht(w){const f="INTERNAL ASSERTION FAILED: "+w;throw Kt(f),new Error(f)}function Nt(w,f){w||Ht(f)}function An(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function _n(){return"http:"===Fn()||"https:"===Fn()}function Fn(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ot{constructor(f,g){this.shortDelay=f,this.longDelay=g,Nt(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function ln(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_n()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ar(w,f){Nt(w.emulator,"Emulator should always be set here");const{url:g}=w.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Rn{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},st=new Ot(3e4,6e4);function nt(w,f){return w.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:w.tenantId}):f}function Te(w,f,g,b){return Re.apply(this,arguments)}function Re(){return(Re=(0,_.Z)(function*(w,f,g,b,Y={}){return Ee(w,Y,(0,_.Z)(function*(){let ae={},$e={};b&&("GET"===f?$e=b:ae={body:JSON.stringify(b)});const et=(0,L.xO)(Object.assign({key:w.config.apiKey},$e)).slice(1),Vt=yield w._getAdditionalHeaders();return Vt["Content-Type"]="application/json",w.languageCode&&(Vt["X-Firebase-Locale"]=w.languageCode),Rn.fetch()(pn(w,w.config.apiHost,g,et),Object.assign({method:f,headers:Vt,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function Ee(w,f,g){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,_.Z)(function*(w,f,g){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},un),f);try{const Y=new vn(w),ae=yield Promise.race([g(),Y.promise]);Y.clearNetworkTimeout();const $e=yield ae.json();if("needConfirmation"in $e)throw Nn(w,"account-exists-with-different-credential",$e);if(ae.ok&&!("errorMessage"in $e))return $e;{const et=ae.ok?$e.errorMessage:$e.error.message,[Vt,dn]=et.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Vt)throw Nn(w,"credential-already-in-use",$e);if("EMAIL_EXISTS"===Vt)throw Nn(w,"email-already-in-use",$e);if("USER_DISABLED"===Vt)throw Nn(w,"user-disabled",$e);const Mn=b[Vt]||Vt.toLowerCase().replace(/[_\s]+/g,"-");if(dn)throw Qe(w,Mn,dn);it(w,Mn)}}catch(Y){if(Y instanceof L.ZR)throw Y;it(w,"network-request-failed",{message:String(Y)})}})).apply(this,arguments)}function ot(w,f,g,b){return qt.apply(this,arguments)}function qt(){return(qt=(0,_.Z)(function*(w,f,g,b,Y={}){const ae=yield Te(w,f,g,b,Y);return"mfaPendingCredential"in ae&&it(w,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function pn(w,f,g,b){const Y=`${f}${g}?${b}`;return w.config.emulator?ar(w.config,Y):`${w.config.apiScheme}://${Y}`}class vn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(xe(this.auth,"network-request-failed")),st.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(w,f,g){const b={appName:w.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const Y=xe(w,f,b);return Y.customData._tokenResponse=g,Y}function _r(){return(_r=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function jn(w,f){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function gn(w,f){return sr.apply(this,arguments)}function sr(){return(sr=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Pn(w){if(w)try{const f=new Date(Number(w));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function $i(){return($i=(0,_.Z)(function*(w,f=!1){const g=(0,L.m9)(w),b=yield g.getIdToken(f),Y=He(b);be(Y&&Y.exp&&Y.auth_time&&Y.iat,g.auth,"internal-error");const ae="object"==typeof Y.firebase?Y.firebase:void 0,$e=null==ae?void 0:ae.sign_in_provider;return{claims:Y,token:b,authTime:Pn(xt(Y.auth_time)),issuedAtTime:Pn(xt(Y.iat)),expirationTime:Pn(xt(Y.exp)),signInProvider:$e||null,signInSecondFactor:(null==ae?void 0:ae.sign_in_second_factor)||null}})).apply(this,arguments)}function xt(w){return 1e3*Number(w)}function He(w){const[f,g,b]=w.split(".");if(void 0===f||void 0===g||void 0===b)return Kt("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,L.tV)(g);return Y?JSON.parse(Y):(Kt("Failed to decode base64 JWT payload"),null)}catch(Y){return Kt("Caught error parsing JWT payload as JSON",null==Y?void 0:Y.toString()),null}}function ht(w,f){return At.apply(this,arguments)}function At(){return(At=(0,_.Z)(function*(w,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof L.ZR&&Zt(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}function Zt({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class sn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const Y=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,_.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===(null==g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class br{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pn(this.lastLoginAt),this.creationTime=Pn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zn(w){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,_.Z)(function*(w){var f;const g=w.auth,b=yield w.getIdToken(),Y=yield ht(w,gn(g,{idToken:b}));be(null==Y?void 0:Y.users.length,g,"internal-error");const ae=Y.users[0];w._notifyReloadListener(ae);const $e=(null===(f=ae.providerUserInfo)||void 0===f?void 0:f.length)?nn(ae.providerUserInfo):[],et=mr(w.providerData,$e),Mn=!!w.isAnonymous&&!(w.email&&ae.passwordHash||(null==et?void 0:et.length)),kn={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:et,metadata:new br(ae.createdAt,ae.lastLoginAt),isAnonymous:Mn};Object.assign(w,kn)})).apply(this,arguments)}function lr(){return(lr=(0,_.Z)(function*(w){const f=(0,L.m9)(w);yield zn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function mr(w,f){return[...w.filter(b=>!f.some(Y=>Y.providerId===b.providerId)),...f]}function nn(w){return w.map(f=>{var{providerId:g}=f,b=(0,re._T)(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function er(){return(er=(0,_.Z)(function*(w,f){const g=yield Ee(w,{},(0,_.Z)(function*(){const b=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:Y,apiKey:ae}=w.config,$e=pn(w,Y,"/v1/token",`key=${ae}`),et=yield w._getAdditionalHeaders();return et["Content-Type"]="application/x-www-form-urlencoded",Rn.fetch()($e,{method:"POST",headers:et,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){be(f.idToken,"internal-error"),be(void 0!==f.idToken,"internal-error"),be(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Ge(w){const f=He(w);return be(f,"internal-error"),be(void 0!==f.exp,"internal-error"),be(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f){var g=this;return(0,_.Z)(function*(b,Y=!1){return be(!g.accessToken||g.refreshToken,b,"user-token-expired"),Y||!g.accessToken||g.isExpired?g.refreshToken?(yield g.refresh(b,g.refreshToken),g.accessToken):null:g.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,_.Z)(function*(){const{accessToken:Y,refreshToken:ae,expiresIn:$e}=yield function Sr(w,f){return er.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(Y,ae,Number($e))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:Y,expirationTime:ae}=g,$e=new dr;return b&&(be("string"==typeof b,"internal-error",{appName:f}),$e.refreshToken=b),Y&&(be("string"==typeof Y,"internal-error",{appName:f}),$e.accessToken=Y),ae&&(be("number"==typeof ae,"internal-error",{appName:f}),$e.expirationTime=ae),$e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new dr,this.toJSON())}_performRefresh(){return Ht("not implemented")}}function Zn(w,f){be("string"==typeof w||void 0===w,"internal-error",{appName:f})}class Pr{constructor(f){var{uid:g,auth:b,stsTokenManager:Y}=f,ae=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new br(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,_.Z)(function*(){const b=yield ht(g,g.stsTokenManager.getToken(g.auth,f));return be(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function Qr(w){return $i.apply(this,arguments)}(this,f)}reload(){return function yi(w){return lr.apply(this,arguments)}(this)}_assign(f){this!==f&&(be(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new Pr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f){var g=this;return(0,_.Z)(function*(b,Y=!1){let ae=!1;b.idToken&&b.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(b),ae=!0),Y&&(yield zn(g)),yield g.auth._persistUserIfCurrent(g),ae&&g.auth._notifyListenersIfCurrent(g)}).apply(this,arguments)}delete(){var f=this;return(0,_.Z)(function*(){const g=yield f.getIdToken();return yield ht(f,function cr(w,f){return _r.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,Y,ae,$e,et,Vt,dn,Mn;const kn=null!==(b=g.displayName)&&void 0!==b?b:void 0,Mr=null!==(Y=g.email)&&void 0!==Y?Y:void 0,li=null!==(ae=g.phoneNumber)&&void 0!==ae?ae:void 0,Va=null!==($e=g.photoURL)&&void 0!==$e?$e:void 0,zs=null!==(et=g.tenantId)&&void 0!==et?et:void 0,Do=null!==(Vt=g._redirectEventId)&&void 0!==Vt?Vt:void 0,Ua=null!==(dn=g.createdAt)&&void 0!==dn?dn:void 0,oa=null!==(Mn=g.lastLoginAt)&&void 0!==Mn?Mn:void 0,{uid:ms,emailVerified:Ia,isAnonymous:Ls,providerData:Po,stsTokenManager:vu}=g;be(ms&&vu,f,"internal-error");const Jl=dr.fromJSON(this.name,vu);be("string"==typeof ms,f,"internal-error"),Zn(kn,f.name),Zn(Mr,f.name),be("boolean"==typeof Ia,f,"internal-error"),be("boolean"==typeof Ls,f,"internal-error"),Zn(li,f.name),Zn(Va,f.name),Zn(zs,f.name),Zn(Do,f.name),Zn(Ua,f.name),Zn(oa,f.name);const rr=new Pr({uid:ms,auth:f,email:Mr,emailVerified:Ia,displayName:kn,isAnonymous:Ls,photoURL:Va,phoneNumber:li,tenantId:zs,stsTokenManager:Jl,createdAt:Ua,lastLoginAt:oa});return Po&&Array.isArray(Po)&&(rr.providerData=Po.map(wr=>Object.assign({},wr))),Do&&(rr._redirectEventId=Do),rr}static _fromIdTokenResponse(f,g){return(0,_.Z)(function*(b,Y,ae=!1){const $e=new dr;$e.updateFromServerResponse(Y);const et=new Pr({uid:Y.localId,auth:b,stsTokenManager:$e,isAnonymous:ae});return yield zn(et),et}).apply(this,arguments)}}const jr=new Map;function Jr(w){Nt(w instanceof Function,"Expected a class definition");let f=jr.get(w);return f?(Nt(f instanceof w,"Instance stored in cache mismatched with class"),f):(f=new w,jr.set(w,f),f)}const Ni=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(g,b){var Y=this;return(0,_.Z)(function*(){Y.storage[g]=b})()}_get(g){var b=this;return(0,_.Z)(function*(){const Y=b.storage[g];return void 0===Y?null:Y})()}_remove(g){var b=this;return(0,_.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return w.type="NONE",w})();function Br(w,f,g){return`firebase:${w}:${f}:${g}`}class Fe{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:Y,name:ae}=this.auth;this.fullUserKey=Br(this.userKey,Y.apiKey,ae),this.fullPersistenceKey=Br("persistence",Y.apiKey,ae),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Pr._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,_.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g){return(0,_.Z)(function*(b,Y,ae="authUser"){if(!Y.length)return new Fe(Jr(Ni),b,ae);const $e=(yield Promise.all(Y.map(function(){var kn=(0,_.Z)(function*(Mr){if(yield Mr._isAvailable())return Mr});return function(Mr){return kn.apply(this,arguments)}}()))).filter(kn=>kn);let et=$e[0]||Jr(Ni);const Vt=Br(ae,b.config.apiKey,b.name);let dn=null;for(const kn of Y)try{const Mr=yield kn._get(Vt);if(Mr){const li=Pr._fromJSON(b,Mr);kn!==et&&(dn=li),et=kn;break}}catch(Mr){}const Mn=$e.filter(kn=>kn._shouldAllowMigration);return et._shouldAllowMigration&&Mn.length?(et=Mn[0],dn&&(yield et._set(Vt,dn.toJSON())),yield Promise.all(Y.map(function(){var kn=(0,_.Z)(function*(Mr){if(Mr!==et)try{yield Mr._remove(Vt)}catch(li){}});return function(Mr){return kn.apply(this,arguments)}}())),new Fe(et,b,ae)):new Fe(et,b,ae)}).apply(this,arguments)}}function Me(w){const f=w.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ie(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(me(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(we(f))return"Blackberry";if(ct(f))return"Webos";if(ye(f))return"Safari";if((f.includes("chrome/")||z(f))&&!f.includes("edge/"))return"Chrome";if(se(f))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function me(w=(0,L.z$)()){return/firefox\//i.test(w)}function ye(w=(0,L.z$)()){const f=w.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function z(w=(0,L.z$)()){return/crios\//i.test(w)}function ie(w=(0,L.z$)()){return/iemobile/i.test(w)}function se(w=(0,L.z$)()){return/android/i.test(w)}function we(w=(0,L.z$)()){return/blackberry/i.test(w)}function ct(w=(0,L.z$)()){return/webos/i.test(w)}function Bt(w=(0,L.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function on(w=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function ir(w=(0,L.z$)()){return Bt(w)||se(w)||ct(w)||we(w)||/windows phone/i.test(w)||ie(w)}function Ei(w,f=[]){let g;switch(w){case"Browser":g=Me((0,L.z$)());break;case"Worker":g=`${Me((0,L.z$)())}-${w}`;break;default:g=w}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ee.SDK_VERSION}/${b}`}function gt(){return(gt=(0,_.Z)(function*(w){return(yield Te(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ut(w,f){return St.apply(this,arguments)}function St(){return(St=(0,_.Z)(function*(w,f){return Te(w,"GET","/v2/recaptchaConfig",nt(w,f))})).apply(this,arguments)}function an(w){return void 0!==w&&void 0!==w.getResponse}function In(w){return void 0!==w&&void 0!==w.enterprise}class or{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function yr(w){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=f,b.onerror=Y=>{const ae=xe("internal-error");ae.customData=Y,g(ae)},b.type="text/javascript",b.charset="UTF-8",function Kr(){var w,f;return null!==(f=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==f?f:document}().appendChild(b)})}function Xr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class ur{constructor(f){this.type="recaptcha-enterprise",this.auth=mn(f)}verify(){var f=this;return(0,_.Z)(function*(g="verify",b=!1){function ae(){return ae=(0,_.Z)(function*(et){if(!b){if(null==et.tenantId&&null!=et._agentRecaptchaConfig)return et._agentRecaptchaConfig.siteKey;if(null!=et.tenantId&&void 0!==et._tenantRecaptchaConfigs[et.tenantId])return et._tenantRecaptchaConfigs[et.tenantId].siteKey}return new Promise(function(){var Vt=(0,_.Z)(function*(dn,Mn){Ut(et,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(kn=>{if(void 0!==kn.recaptchaKey){const Mr=new or(kn);return null==et.tenantId?et._agentRecaptchaConfig=Mr:et._tenantRecaptchaConfigs[et.tenantId]=Mr,dn(Mr.siteKey)}Mn(new Error("recaptcha Enterprise site key undefined"))}).catch(kn=>{Mn(kn)})});return function(dn,Mn){return Vt.apply(this,arguments)}}())}),ae.apply(this,arguments)}function $e(et,Vt,dn){const Mn=window.grecaptcha;In(Mn)?Mn.enterprise.ready(()=>{Mn.enterprise.execute(et,{action:g}).then(kn=>{Vt(kn)}).catch(()=>{Vt("NO_RECAPTCHA")})}):dn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((et,Vt)=>{(function Y(et){return ae.apply(this,arguments)})(f.auth).then(dn=>{if(!b&&In(window.grecaptcha))$e(dn,et,Vt);else{if("undefined"==typeof window)return void Vt(new Error("RecaptchaVerifier is only supported in browser"));yr("https://www.google.com/recaptcha/enterprise.js?render="+dn).then(()=>{$e(dn,et,Vt)}).catch(Mn=>{Vt(Mn)})}}).catch(dn=>{Vt(dn)})})}).apply(this,arguments)}}function Si(w,f,g){return os.apply(this,arguments)}function os(){return(os=(0,_.Z)(function*(w,f,g,b=!1){const Y=new ur(w);let ae;try{ae=yield Y.verify(g)}catch(et){ae=yield Y.verify(g,!0)}const $e=Object.assign({},f);return Object.assign($e,b?{captchaResp:ae}:{captchaResponse:ae}),Object.assign($e,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($e,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$e})).apply(this,arguments)}class Zs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const b=ae=>new Promise(($e,et)=>{try{$e(f(ae))}catch(Vt){et(Vt)}});b.onAbort=g,this.queue.push(b);const Y=this.queue.length-1;return()=>{this.queue[Y]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,_.Z)(function*(){if(g.auth.currentUser===f)return;const b=[];try{for(const Y of g.queue)yield Y(f),Y.onAbort&&b.push(Y.onAbort)}catch(Y){b.reverse();for(const ae of b)try{ae()}catch($e){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null==Y?void 0:Y.message})}})()}}class Cr{constructor(f,g,b,Y){this.app=f,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=b,this.config=Y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tr(this),this.idTokenSubscription=new tr(this),this.beforeStateQueue=new Zs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=Y.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=Jr(g)),this._initializationPromise=this.queue((0,_.Z)(function*(){var Y,ae;if(!b._deleted&&(b.persistenceManager=yield Fe.create(b,f),!b._deleted)){if(null===(Y=b._popupRedirectResolver)||void 0===Y?void 0:Y._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch($e){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(ae=b.currentUser)||void 0===ae?void 0:ae.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,_.Z)(function*(){var b;const Y=yield g.assertedPersistence.getCurrentUser();let ae=Y,$e=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const et=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,Vt=null==ae?void 0:ae._redirectEventId,dn=yield g.tryRedirectSignIn(f);(!et||et===Vt)&&(null==dn?void 0:dn.user)&&(ae=dn.user,$e=!0)}if(!ae)return g.directlySetCurrentUser(null);if(!ae._redirectEventId){if($e)try{yield g.beforeStateQueue.runMiddleware(ae)}catch(et){ae=Y,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(et))}return ae?g.reloadAndSetCurrentUserOrClear(ae):g.directlySetCurrentUser(null)}return be(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===ae._redirectEventId?g.directlySetCurrentUser(ae):g.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(f){var g=this;return(0,_.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(Y){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,_.Z)(function*(){try{yield zn(f)}catch(b){if("auth/network-request-failed"!==(null==b?void 0:b.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function rn(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,_.Z)(function*(){const b=f?(0,L.m9)(f):null;return b&&be(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,_.Z)(function*(b,Y=!1){if(!g._deleted)return b&&be(g.tenantId===b.tenantId,g,"tenant-id-mismatch"),Y||(yield g.beforeStateQueue.runMiddleware(b)),g.queue((0,_.Z)(function*(){yield g.directlySetCurrentUser(b),g.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,_.Z)(function*(){yield g.assertedPersistence.setPersistence(Jr(f))}))}initializeRecaptchaConfig(){var f=this;return(0,_.Z)(function*(){const g=yield Ut(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new or(g);null==f.tenantId?f._agentRecaptchaConfig=b:f._tenantRecaptchaConfigs[f.tenantId]=b,b.emailPasswordEnabled&&new ur(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,_.Z)(function*(){const Y=yield b.getOrInitRedirectPersistenceManager(g);return null===f?Y.removeCurrentUser():Y.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,_.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&Jr(f)||g._popupRedirectResolver;be(b,g,"argument-error"),g.redirectPersistenceManager=yield Fe.create(g,[Jr(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,_.Z)(function*(){var b,Y;return g._isInitialized&&(yield g.queue((0,_.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(Y=g.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,_.Z)(function*(){if(f===g.currentUser)return g.queue((0,_.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,Y){if(this._deleted)return()=>{};const ae="function"==typeof g?g:g.next.bind(g),$e=this._isInitialized?Promise.resolve():this._initializationPromise;return be($e,this,"internal-error"),$e.then(()=>ae(this.currentUser)),"function"==typeof g?f.addObserver(g,b,Y):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,_.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var g;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const Y=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();Y&&(b["X-Firebase-Client"]=Y);const ae=yield f._getAppCheckToken();return ae&&(b["X-Firebase-AppCheck"]=ae),b})()}_getAppCheckToken(){var f=this;return(0,_.Z)(function*(){var g;const b=yield null===(g=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return(null==b?void 0:b.error)&&function Ke(w,...f){Ct.logLevel<=Pe.in.WARN&&Ct.warn(`Auth (${ee.SDK_VERSION}): ${w}`,...f)}(`Error while retrieving App Check token: ${b.error}`),null==b?void 0:b.token})()}}function mn(w){return(0,L.m9)(w)}class tr{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zr(w,f,g){const b=mn(w);be(b._canInitEmulator,b,"emulator-config-failed"),be(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const Y=!!(null==g?void 0:g.disableWarnings),ae=at(f),{host:$e,port:et}=function Ze(w){const f=at(w),g=/(\/\/)?([^?#/]+)/.exec(w.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(b);if(Y){const ae=Y[1];return{host:ae,port:lt(b.substr(ae.length+1))}}{const[ae,$e]=b.split(":");return{host:ae,port:lt($e)}}}(f);b.config.emulator={url:`${ae}//${$e}${null===et?"":`:${et}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:$e,port:et,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function mt(){function w(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function at(w){const f=w.indexOf(":");return f<0?"":w.substr(0,f+1)}function lt(w){if(!w)return null;const f=Number(w);return isNaN(f)?null:f}class kt{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ht("not implemented")}_getIdTokenResponse(f){return Ht("not implemented")}_linkToIdToken(f,g){return Ht("not implemented")}_getReauthenticationResolver(f){return Ht("not implemented")}}function Tn(w,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:resetPassword",nt(w,f))})).apply(this,arguments)}function Un(w,f){return nr.apply(this,arguments)}function nr(){return(nr=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Oi(w,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:update",nt(w,f))})).apply(this,arguments)}function ci(w,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signInWithPassword",nt(w,f))})).apply(this,arguments)}function Ai(w,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:sendOobCode",nt(w,f))})).apply(this,arguments)}function Ui(w,f){return _o.apply(this,arguments)}function _o(){return(_o=(0,_.Z)(function*(w,f){return Ai(w,f)})).apply(this,arguments)}function No(w,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.Z)(function*(w,f){return Ai(w,f)})).apply(this,arguments)}function ca(w,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,_.Z)(function*(w,f){return Ai(w,f)})).apply(this,arguments)}function Qs(w,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,_.Z)(function*(w,f){return Ai(w,f)})).apply(this,arguments)}function xs(){return(xs=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signInWithEmailLink",nt(w,f))})).apply(this,arguments)}function Oo(){return(Oo=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signInWithEmailLink",nt(w,f))})).apply(this,arguments)}class Wi extends kt{constructor(f,g,b,Y=null){super("password",b),this._email=f,this._password=g,this._tenantId=Y}static _fromEmailAndPassword(f,g){return new Wi(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new Wi(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,_.Z)(function*(){var b;switch(g.signInMethod){case"password":const Y={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null===(b=f._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const ae=yield Si(f,Y,"signInWithPassword");return ci(f,ae)}return ci(f,Y).catch(function(){var ae=(0,_.Z)(function*($e){if("auth/missing-recaptcha-token"===$e.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const et=yield Si(f,Y,"signInWithPassword");return ci(f,et)}return Promise.reject($e)});return function($e){return ae.apply(this,arguments)}}());case"emailLink":return function Ir(w,f){return xs.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:it(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,_.Z)(function*(){switch(b.signInMethod){case"password":return Un(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function lo(w,f){return Oo.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:it(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ps(w,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signInWithIdp",nt(w,f))})).apply(this,arguments)}class $r extends kt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new $r(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):it("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:Y}=g,ae=(0,re._T)(g,["providerId","signInMethod"]);if(!b||!Y)return null;const $e=new $r(b,Y);return $e.idToken=ae.idToken||void 0,$e.accessToken=ae.accessToken||void 0,$e.secret=ae.secret,$e.nonce=ae.nonce,$e.pendingToken=ae.pendingToken||null,$e}_getIdTokenResponse(f){return Ps(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Ps(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ps(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,L.xO)(g)}return f}}function ko(w,f){return hs.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:sendVerificationCode",nt(w,f))})).apply(this,arguments)}function fs(){return(fs=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signInWithPhoneNumber",nt(w,f))})).apply(this,arguments)}function Ts(){return(Ts=(0,_.Z)(function*(w,f){const g=yield ot(w,"POST","/v1/accounts:signInWithPhoneNumber",nt(w,f));if(g.temporaryProof)throw Nn(w,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Js={USER_NOT_FOUND:"user-not-found"};function Ro(){return(Ro=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signInWithPhoneNumber",nt(w,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Js)})).apply(this,arguments)}class Ki extends kt{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ki({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ki({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function zi(w,f){return fs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Ao(w,f){return Ts.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function _s(w,f){return Ro.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:Y}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:Y}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:Y,temporaryProof:ae}=f;return b||g||Y||ae?new Ki({verificationId:g,verificationCode:b,phoneNumber:Y,temporaryProof:ae}):null}}class Xs{constructor(f){var g,b,Y,ae,$e,et;const Vt=(0,L.zd)((0,L.pd)(f)),dn=null!==(g=Vt.apiKey)&&void 0!==g?g:null,Mn=null!==(b=Vt.oobCode)&&void 0!==b?b:null,kn=function di(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=Vt.mode)&&void 0!==Y?Y:null);be(dn&&Mn&&kn,"argument-error"),this.apiKey=dn,this.operation=kn,this.code=Mn,this.continueUrl=null!==(ae=Vt.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==($e=Vt.languageCode)&&void 0!==$e?$e:null,this.tenantId=null!==(et=Vt.tenantId)&&void 0!==et?et:null}static parseLink(f){const g=function vs(w){const f=(0,L.zd)((0,L.pd)(w)).link,g=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,b=(0,L.zd)((0,L.pd)(w)).deep_link_id;return(b?(0,L.zd)((0,L.pd)(b)).link:null)||b||g||f||w}(f);try{return new Xs(g)}catch(b){return null}}}let ei=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(g,b){return Wi._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const Y=Xs.parseLink(b);return be(Y,"argument-error"),Wi._fromEmailAndCode(g,Y.code,Y.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class bs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class _i extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class wi extends _i{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return be("providerId"in g&&"signInMethod"in g,"argument-error"),$r._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return be(f.idToken||f.accessToken,"argument-error"),$r._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return wi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return wi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:Y,pendingToken:ae,nonce:$e,providerId:et}=f;if(!b&&!Y&&!g&&!ae||!et)return null;try{return new wi(et)._credential({idToken:g,accessToken:b,nonce:$e,pendingToken:ae})}catch(Vt){return null}}}let ps=(()=>{class w extends _i{constructor(){super("facebook.com")}static credential(g){return $r._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch(b){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),uo=(()=>{class w extends _i{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return $r._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:Y}=g;if(!b&&!Y)return null;try{return w.credential(b,Y)}catch(ae){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Yr=(()=>{class w extends _i{constructor(){super("github.com")}static credential(g){return $r._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch(b){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ue extends kt{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ps(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Ps(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ps(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:Y,pendingToken:ae}=g;return b&&Y&&ae&&b===Y?new ue(b,ae):null}static _create(f,g){return new ue(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class he extends bs{constructor(f){be(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return he.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return he.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ue.fromJSON(f);return be(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return ue._create(b,g)}catch(Y){return null}}}let Oe=(()=>{class w extends _i{constructor(){super("twitter.com")}static credential(g,b){return $r._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:Y}=g;if(!b||!Y)return null;try{return w.credential(b,Y)}catch(ae){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Pt(w,f){return zt.apply(this,arguments)}function zt(){return(zt=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signUp",nt(w,f))})).apply(this,arguments)}class Dn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b){return(0,_.Z)(function*(Y,ae,$e,et=!1){const Vt=yield Pr._fromIdTokenResponse(Y,$e,et),dn=Yn($e);return new Dn({user:Vt,providerId:dn,_tokenResponse:$e,operationType:ae})}).apply(this,arguments)}static _forOperation(f,g,b){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const Y=Yn(b);return new Dn({user:f,providerId:Y,_tokenResponse:b,operationType:g})})()}}function Yn(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Rr(w){return fr.apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(w){var f;const g=mn(w);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Dn({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield Pt(g,{returnSecureToken:!0}),Y=yield Dn._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class vr extends L.ZR{constructor(f,g,b,Y){var ae;super(g.code,g.message),this.operationType=b,this.user=Y,Object.setPrototypeOf(this,vr.prototype),this.customData={appName:f.name,tenantId:null!==(ae=f.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,Y){return new vr(f,g,b,Y)}}function vi(w,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(w):g._getIdTokenResponse(w)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?vr._fromErrorAndOperation(w,ae,f,b):ae})}function gi(w){return new Set(w.map(({providerId:f})=>f).filter(f=>!!f))}function ti(w,f){return co.apply(this,arguments)}function co(){return(co=(0,_.Z)(function*(w,f){const g=(0,L.m9)(w);yield Ds(!0,g,f);const{providerUserInfo:b}=yield jn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),Y=gi(b||[]);return g.providerData=g.providerData.filter(ae=>Y.has(ae.providerId)),Y.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ci(w,f){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,_.Z)(function*(w,f,g=!1){const b=yield ht(w,f._linkToIdToken(w.auth,yield w.getIdToken()),g);return Dn._forOperation(w,"link",b)})).apply(this,arguments)}function Ds(w,f,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,_.Z)(function*(w,f,g){yield zn(f);const Y=!1===w?"provider-already-linked":"no-such-provider";be(gi(f.providerData).has(g)===w,f.auth,Y)})).apply(this,arguments)}function ho(w,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,_.Z)(function*(w,f,g=!1){const{auth:b}=w,Y="reauthenticate";try{const ae=yield ht(w,vi(b,Y,f,w),g);be(ae.idToken,b,"internal-error");const $e=He(ae.idToken);be($e,b,"internal-error");const{sub:et}=$e;return be(w.uid===et,b,"user-mismatch"),Dn._forOperation(w,Y,ae)}catch(ae){throw"auth/user-not-found"===(null==ae?void 0:ae.code)&&it(b,"user-mismatch"),ae}})).apply(this,arguments)}function K(w,f){return j.apply(this,arguments)}function j(){return(j=(0,_.Z)(function*(w,f,g=!1){const b="signIn",Y=yield vi(w,b,f),ae=yield Dn._fromIdTokenResponse(w,b,Y);return g||(yield w._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function F(w,f){return ce.apply(this,arguments)}function ce(){return(ce=(0,_.Z)(function*(w,f){return K(mn(w),f)})).apply(this,arguments)}function Le(w,f){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,_.Z)(function*(w,f){const g=(0,L.m9)(w);return yield Ds(!1,g,f.providerId),Ci(g,f)})).apply(this,arguments)}function qr(w,f){return W.apply(this,arguments)}function W(){return(W=(0,_.Z)(function*(w,f){return ho((0,L.m9)(w),f)})).apply(this,arguments)}function q(w,f){return pe.apply(this,arguments)}function pe(){return(pe=(0,_.Z)(function*(w,f){return ot(w,"POST","/v1/accounts:signInWithCustomToken",nt(w,f))})).apply(this,arguments)}function De(w,f){return ze.apply(this,arguments)}function ze(){return(ze=(0,_.Z)(function*(w,f){const g=mn(w),b=yield q(g,{token:f,returnSecureToken:!0}),Y=yield Dn._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class vt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Yt._fromServerResponse(f,g):"totpInfo"in g?On._fromServerResponse(f,g):it(f,"internal-error")}}class Yt extends vt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Yt(g)}}class On extends vt{constructor(f){super("totp",f)}static _fromServerResponse(f,g){return new On(g)}}function xn(w,f,g){var b;be((null===(b=g.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),be(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(be(g.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(be(g.android.packageName.length>0,w,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Jn(w,f,g){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,_.Z)(function*(w,f,g){var b;const Y=mn(w),ae={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null===(b=Y._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const $e=yield Si(Y,ae,"getOobCode",!0);g&&xn(Y,$e,g),yield No(Y,$e)}else g&&xn(Y,ae,g),yield No(Y,ae).catch(function(){var $e=(0,_.Z)(function*(et){if("auth/missing-recaptcha-token"!==et.code)return Promise.reject(et);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Vt=yield Si(Y,ae,"getOobCode",!0);g&&xn(Y,Vt,g),yield No(Y,Vt)}});return function(et){return $e.apply(this,arguments)}}())}),Bn.apply(this,arguments)}function ni(w,f,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,_.Z)(function*(w,f,g){yield Tn((0,L.m9)(w),{oobCode:f,newPassword:g})})).apply(this,arguments)}function hi(w,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,_.Z)(function*(w,f){yield Oi((0,L.m9)(w),{oobCode:f})})).apply(this,arguments)}function Fi(w,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.Z)(function*(w,f){const g=(0,L.m9)(w),b=yield Tn(g,{oobCode:f}),Y=b.requestType;switch(be(Y,g,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":be(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":be(b.mfaInfo,g,"internal-error");default:be(b.email,g,"internal-error")}let ae=null;return b.mfaInfo&&(ae=vt._fromServerResponse(mn(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:ae},operation:Y}})).apply(this,arguments)}function Yi(w,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,_.Z)(function*(w,f){const{data:g}=yield Fi((0,L.m9)(w),f);return g.email})).apply(this,arguments)}function Li(w,f,g){return Bi.apply(this,arguments)}function Bi(){return Bi=(0,_.Z)(function*(w,f,g){var b;const Y=mn(w),ae={returnSecureToken:!0,email:f,password:g,clientType:"CLIENT_TYPE_WEB"};let $e;if(null===(b=Y._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const dn=yield Si(Y,ae,"signUpPassword");$e=Pt(Y,dn)}else $e=Pt(Y,ae).catch(function(){var dn=(0,_.Z)(function*(Mn){if("auth/missing-recaptcha-token"===Mn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const kn=yield Si(Y,ae,"signUpPassword");return Pt(Y,kn)}return Promise.reject(Mn)});return function(Mn){return dn.apply(this,arguments)}}());const et=yield $e.catch(dn=>Promise.reject(dn)),Vt=yield Dn._fromIdTokenResponse(Y,"signIn",et);return yield Y._updateCurrentUser(Vt.user),Vt}),Bi.apply(this,arguments)}function Ns(w,f,g){return F((0,L.m9)(w),ei.credential(f,g))}function Eo(w,f,g){return da.apply(this,arguments)}function da(){return da=(0,_.Z)(function*(w,f,g){var b;const Y=mn(w),ae={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function $e(et,Vt){be(Vt.handleCodeInApp,Y,"argument-error"),Vt&&xn(Y,et,Vt)}if(null===(b=Y._getRecaptchaConfig())||void 0===b?void 0:b.emailPasswordEnabled){const et=yield Si(Y,ae,"getOobCode",!0);$e(et,g),yield ca(Y,et)}else $e(ae,g),yield ca(Y,ae).catch(function(){var et=(0,_.Z)(function*(Vt){if("auth/missing-recaptcha-token"!==Vt.code)return Promise.reject(Vt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const dn=yield Si(Y,ae,"getOobCode",!0);$e(dn,g),yield ca(Y,dn)}});return function(Vt){return et.apply(this,arguments)}}())}),da.apply(this,arguments)}function js(w,f){const g=Xs.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}function fo(w,f,g){return as.apply(this,arguments)}function as(){return(as=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w),Y=ei.credentialWithLink(f,g||An());return be(Y._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),F(b,Y)})).apply(this,arguments)}function nl(w,f){return wo.apply(this,arguments)}function wo(){return(wo=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:createAuthUri",nt(w,f))})).apply(this,arguments)}function Ta(w,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,_.Z)(function*(w,f){const b={identifier:f,continueUri:_n()?An():"http://localhost"},{signinMethods:Y}=yield nl((0,L.m9)(w),b);return Y||[]})).apply(this,arguments)}function mi(w,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(w,f){const g=(0,L.m9)(w),Y={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};f&&xn(g.auth,Y,f);const{email:ae}=yield Ui(g.auth,Y);ae!==w.email&&(yield w.reload())})).apply(this,arguments)}function ls(w,f,g){return Es.apply(this,arguments)}function Es(){return(Es=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:f};g&&xn(b.auth,ae,g);const{email:$e}=yield Qs(b.auth,ae);$e!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ri(w,f){return ba.apply(this,arguments)}function ba(){return(ba=(0,_.Z)(function*(w,f){return Te(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ha(w,f){return gl.apply(this,arguments)}function gl(){return(gl=(0,_.Z)(function*(w,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,L.m9)(w),ae={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},$e=yield ht(b,Ri(b.auth,ae));b.displayName=$e.displayName||null,b.photoURL=$e.photoUrl||null;const et=b.providerData.find(({providerId:Vt})=>"password"===Vt);et&&(et.displayName=b.displayName,et.photoURL=b.photoURL),yield b._updateTokensIfNecessary($e)})).apply(this,arguments)}function Mo(w,f){return zo((0,L.m9)(w),f,null)}function Hs(w,f){return zo((0,L.m9)(w),null,f)}function zo(w,f,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,_.Z)(function*(w,f,g){const{auth:b}=w,ae={idToken:yield w.getIdToken(),returnSecureToken:!0};f&&(ae.email=f),g&&(ae.password=g);const $e=yield ht(w,Un(b,ae));yield w._updateTokensIfNecessary($e,!0)})).apply(this,arguments)}class ss{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class to extends ss{constructor(f,g,b,Y){super(f,g,b),this.username=Y}}class ml extends ss{constructor(f,g){super(f,"facebook.com",g)}}class ai extends to{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Ko extends ss{constructor(f,g){super(f,"google.com",g)}}class rs extends to{constructor(f,g,b){super(f,"twitter.com",g,b)}}function Lo(w){const{user:f,_tokenResponse:g}=w;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Co(w){var f,g;if(!w)return null;const{providerId:b}=w,Y=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},ae=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&(null==w?void 0:w.idToken)){const $e=null===(g=null===(f=He(w.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if($e)return new ss(ae,"anonymous"!==$e&&"custom"!==$e?$e:null)}if(!b)return null;switch(b){case"facebook.com":return new ml(ae,Y);case"github.com":return new ai(ae,Y);case"google.com":return new Ko(ae,Y);case"twitter.com":return new rs(ae,Y,w.screenName||null);case"custom":case"anonymous":return new ss(ae,null);default:return new ss(ae,b,Y)}}(g)}class Os{constructor(f,g,b){this.type=f,this.credential=g,this.auth=b}static _fromIdtoken(f,g){return new Os("enroll",f,g)}static _fromMfaPendingCredential(f){return new Os("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Os._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return Os._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Yo{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=mn(f),Y=g.customData._serverResponse,ae=(Y.mfaInfo||[]).map(et=>vt._fromServerResponse(b,et));be(Y.mfaPendingCredential,b,"internal-error");const $e=Os._fromMfaPendingCredential(Y.mfaPendingCredential);return new Yo($e,ae,function(){var et=(0,_.Z)(function*(Vt){const dn=yield Vt._process(b,$e);delete Y.mfaInfo,delete Y.mfaPendingCredential;const Mn=Object.assign(Object.assign({},Y),{idToken:dn.idToken,refreshToken:dn.refreshToken});switch(g.operationType){case"signIn":const kn=yield Dn._fromIdTokenResponse(b,g.operationType,Mn);return yield b._updateCurrentUser(kn.user),kn;case"reauthenticate":return be(g.user,b,"internal-error"),Dn._forOperation(g.user,g.operationType,Mn);default:it(b,"internal-error")}});return function(Vt){return et.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,_.Z)(function*(){return g.signInResolver(f)})()}}function no(w,f){var g;const b=(0,L.m9)(w),Y=f;return be(f.customData.operationType,b,"argument-error"),be(null===(g=Y.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),Yo._fromError(b,Y)}function Ss(w,f){return Te(w,"POST","/v2/accounts/mfaEnrollment:start",nt(w,f))}class xl{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>vt._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new xl(f)}getSession(){var f=this;return(0,_.Z)(function*(){return Os._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var b=this;return(0,_.Z)(function*(){const Y=f,ae=yield b.getSession(),$e=yield ht(b.user,Y._process(b.user.auth,ae,g));return yield b.user._updateTokensIfNecessary($e),b.user.reload()})()}unenroll(f){var g=this;return(0,_.Z)(function*(){const b="string"==typeof f?f:f.uid,Y=yield g.user.getIdToken();try{const ae=yield ht(g.user,function Ml(w,f){return Te(w,"POST","/v2/accounts/mfaEnrollment:withdraw",nt(w,f))}(g.user.auth,{idToken:Y,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:$e})=>$e!==b),yield g.user._updateTokensIfNecessary(ae),yield g.user.reload()}catch(ae){throw ae}})()}}const Io=new WeakMap;function Wl(w){const f=(0,L.m9)(w);return Io.has(f)||Io.set(f,xl._fromUser(f)),Io.get(f)}const Aa="__sak";class _l{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Aa,"1"),this.storage.removeItem(Aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const T=(()=>{class w extends _l{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vl(){const w=(0,L.z$)();return ye(w)||Bt(w)}()&&function si(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=ir(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const Y=this.storage.getItem(b),ae=this.localCache[b];Y!==ae&&g(b,ae,Y)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((et,Vt,dn)=>{this.notifyListeners(et,dn)});const Y=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const et=this.storage.getItem(Y);if(g.newValue!==et)null!==g.newValue?this.storage.setItem(Y,g.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===g.newValue&&!b)return}const ae=()=>{const et=this.storage.getItem(Y);!b&&this.localCache[Y]===et||this.notifyListeners(Y,et)},$e=this.storage.getItem(Y);!function gr(){return(0,L.w1)()&&10===document.documentMode}()||$e===g.newValue||g.newValue===g.oldValue?ae():setTimeout(ae,10)}notifyListeners(g,b){this.localCache[g]=b;const Y=this.listeners[g];if(Y)for(const ae of Array.from(Y))ae(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var Y=()=>super._set,ae=this;return(0,_.Z)(function*(){yield Y().call(ae,g,b),ae.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,Y=this;return(0,_.Z)(function*(){const ae=yield b().call(Y,g);return Y.localCache[g]=JSON.stringify(ae),ae})()}_remove(g){var b=()=>super._remove,Y=this;return(0,_.Z)(function*(){yield b().call(Y,g),delete Y.localCache[g]})()}}return w.type="LOCAL",w})(),J=(()=>{class w extends _l{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return w.type="SESSION",w})();let fe=(()=>{class w{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(ae=>ae.isListeningto(g));if(b)return b;const Y=new w(g);return this.receivers.push(Y),Y}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,_.Z)(function*(){const Y=g,{eventId:ae,eventType:$e,data:et}=Y.data,Vt=b.handlersMap[$e];if(!(null==Vt?void 0:Vt.size))return;Y.ports[0].postMessage({status:"ack",eventId:ae,eventType:$e});const dn=Array.from(Vt).map(function(){var kn=(0,_.Z)(function*(Mr){return Mr(Y.origin,et)});return function(Mr){return kn.apply(this,arguments)}}()),Mn=yield function de(w){return Promise.all(w.map(function(){var f=(0,_.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(dn);Y.ports[0].postMessage({status:"done",eventId:ae,eventType:$e,response:Mn})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ve(w="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return w+g}class Ft{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g){var b=this;return(0,_.Z)(function*(Y,ae,$e=50){const et="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!et)throw new Error("connection_unavailable");let Vt,dn;return new Promise((Mn,kn)=>{const Mr=Ve("",20);et.port1.start();const li=setTimeout(()=>{kn(new Error("unsupported_event"))},$e);dn={messageChannel:et,onMessage(Va){const zs=Va;if(zs.data.eventId===Mr)switch(zs.data.status){case"ack":clearTimeout(li),Vt=setTimeout(()=>{kn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Vt),Mn(zs.data.response);break;default:clearTimeout(li),clearTimeout(Vt),kn(new Error("invalid_response"))}}},b.handlers.add(dn),et.port1.addEventListener("message",dn.onMessage),b.target.postMessage({eventType:Y,eventId:Mr,data:ae},[et.port2])}).finally(()=>{dn&&b.removeMessageHandler(dn)})}).apply(this,arguments)}}function yn(){return window}function Gt(){return void 0!==yn().WorkerGlobalScope&&"function"==typeof yn().importScripts}function en(){return(en=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Fr="firebaseLocalStorageDb",Qi="firebaseLocalStorage",ia="fbase_key";class ga{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ka(w,f){return w.transaction([Qi],f?"readwrite":"readonly").objectStore(Qi)}function Pl(){const w=indexedDB.open(Fr,1);return new Promise((f,g)=>{w.addEventListener("error",()=>{g(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(Qi,{keyPath:ia})}catch(Y){g(Y)}}),w.addEventListener("success",(0,_.Z)(function*(){const b=w.result;b.objectStoreNames.contains(Qi)?f(b):(b.close(),yield function Tu(){const w=indexedDB.deleteDatabase(Fr);return new ga(w).toPromise()}(),f(yield Pl()))}))})}function qa(w,f,g){return iu.apply(this,arguments)}function iu(){return(iu=(0,_.Z)(function*(w,f,g){const b=Ka(w,!0).put({[ia]:f,value:g});return new ga(b).toPromise()})).apply(this,arguments)}function Ji(){return(Ji=(0,_.Z)(function*(w,f){const g=Ka(w,!1).get(f),b=yield new ga(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function xr(w,f){const g=Ka(w,!0).delete(f);return new ga(g).toPromise()}const Gn=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,_.Z)(function*(){return g.db||(g.db=yield Pl()),g.db})()}_withRetries(g){var b=this;return(0,_.Z)(function*(){let Y=0;for(;;)try{const ae=yield b._openDb();return yield g(ae)}catch(ae){if(Y++>3)throw ae;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,_.Z)(function*(){return Gt()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,_.Z)(function*(){g.receiver=fe._getInstance(function jt(){return Gt()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,_.Z)(function*(Y,ae){return{keyProcessed:(yield g._poll()).includes(ae.key)}});return function(Y,ae){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,_.Z)(function*(Y,ae){return["keyChanged"]});return function(Y,ae){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,_.Z)(function*(){var b,Y;if(g.activeServiceWorker=yield function xi(){return en.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ft(g.activeServiceWorker);const ae=yield g.sender._send("ping",{},800);!ae||(null===(b=ae[0])||void 0===b?void 0:b.fulfilled)&&(null===(Y=ae[0])||void 0===Y?void 0:Y.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,_.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Dt(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(Y){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Pl();return yield qa(g,Aa,"1"),yield xr(g,Aa),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,_.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var Y=this;return(0,_.Z)(function*(){return Y._withPendingWrite((0,_.Z)(function*(){return yield Y._withRetries(ae=>qa(ae,g,b)),Y.localCache[g]=b,Y.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,_.Z)(function*(){const Y=yield b._withRetries(ae=>function ec(w,f){return Ji.apply(this,arguments)}(ae,g));return b.localCache[g]=Y,Y})()}_remove(g){var b=this;return(0,_.Z)(function*(){return b._withPendingWrite((0,_.Z)(function*(){return yield b._withRetries(Y=>xr(Y,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,_.Z)(function*(){const b=yield g._withRetries($e=>{const et=Ka($e,!1).getAll();return new ga(et).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const Y=[],ae=new Set;for(const{fbase_key:$e,value:et}of b)ae.add($e),JSON.stringify(g.localCache[$e])!==JSON.stringify(et)&&(g.notifyListeners($e,et),Y.push($e));for(const $e of Object.keys(g.localCache))g.localCache[$e]&&!ae.has($e)&&(g.notifyListeners($e,null),Y.push($e));return Y})()}notifyListeners(g,b){this.localCache[g]=b;const Y=this.listeners[g];if(Y)for(const ae of Array.from(Y))ae(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Za(w,f){return Te(w,"POST","/v2/accounts/mfaSignIn:start",nt(w,f))}const Ra=1e12;class Ma{constructor(f){this.auth=f,this.counter=Ra,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new Nl(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||Ra;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ra))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,_.Z)(function*(){var b;return null===(b=g._widgets.get(f||Ra))||void 0===b||b.execute(),""})()}}class Nl{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof f?document.getElementById(f):f;be(Y,"argument-error",{appName:g}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xa(w){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ks=Xr("rcb"),Ya=new Ot(3e4,6e4);class Ol{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=yn().grecaptcha)||void 0===f?void 0:f.render)}load(f,g=""){return be(function sl(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(g),f,"argument-error"),this.shouldResolveImmediately(g)&&an(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((b,Y)=>{const ae=yn().setTimeout(()=>{Y(xe(f,"network-request-failed"))},Ya.get());yn()[ks]=()=>{yn().clearTimeout(ae),delete yn()[ks];const et=yn().grecaptcha;if(!et||!an(et))return void Y(xe(f,"internal-error"));const Vt=et.render;et.render=(dn,Mn)=>{const kn=Vt(dn,Mn);return this.counter++,kn},this.hostLanguage=g,b(et)},yr(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:ks,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(ae),Y(xe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!!(null===(g=yn().grecaptcha)||void 0===g?void 0:g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class To{load(f){return(0,_.Z)(function*(){return new Ma(f)})()}clearedOneInstance(){}}const bu="recaptcha",Kl={theme:"light",type:"image"};class Du{constructor(f,g=Object.assign({},Kl),b){this.parameters=g,this.type=bu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(b),this.isInvisible="invisible"===this.parameters.size,be("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof f?document.getElementById(f):f;be(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new To:new Ol,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(ae=>{const $e=et=>{!et||(f.tokenChangeListeners.delete($e),ae(et))};f.tokenChangeListeners.add($e),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=yn()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){be(_n()&&!Gt(),f.auth,"internal-error"),yield function ol(){let w=null;return new Promise(f=>{"complete"!==document.readyState?(w=()=>f(),window.addEventListener("load",w)):f()}).catch(f=>{throw w&&window.removeEventListener("load",w),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function wt(w){return gt.apply(this,arguments)}(f.auth);be(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pa{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ki._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function pt(w,f,g){return al.apply(this,arguments)}function al(){return(al=(0,_.Z)(function*(w,f,g){const b=mn(w),Y=yield kl(b,f,(0,L.m9)(g));return new Pa(Y,ae=>F(b,ae))})).apply(this,arguments)}function ro(w,f,g){return ql.apply(this,arguments)}function ql(){return(ql=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w);yield Ds(!1,b,"phone");const Y=yield kl(b.auth,f,(0,L.m9)(g));return new Pa(Y,ae=>Le(b,ae))})).apply(this,arguments)}function Na(w,f,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w),Y=yield kl(b.auth,f,(0,L.m9)(g));return new Pa(Y,ae=>qr(b,ae))})).apply(this,arguments)}function kl(w,f,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,_.Z)(function*(w,f,g){var b;const Y=yield g.verify();try{let ae;if(be("string"==typeof Y,w,"argument-error"),be(g.type===bu,w,"argument-error"),ae="string"==typeof f?{phoneNumber:f}:f,"session"in ae){const $e=ae.session;if("phoneNumber"in ae)return be("enroll"===$e.type,w,"internal-error"),(yield Ss(w,{idToken:$e.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{be("signin"===$e.type,w,"internal-error");const et=(null===(b=ae.multiFactorHint)||void 0===b?void 0:b.uid)||ae.multiFactorUid;return be(et,w,"missing-multi-factor-info"),(yield Za(w,{mfaPendingCredential:$e.credential,mfaEnrollmentId:et,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$e}=yield ko(w,{phoneNumber:ae.phoneNumber,recaptchaToken:Y});return $e}}finally{g._reset()}})).apply(this,arguments)}function nc(w,f){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.Z)(function*(w,f){yield Ci((0,L.m9)(w),f)})).apply(this,arguments)}let rc=(()=>{class w{constructor(g){this.providerId=w.PROVIDER_ID,this.auth=mn(g)}verifyPhoneNumber(g,b){return kl(this.auth,g,(0,L.m9)(b))}static credential(g,b){return Ki._fromVerification(g,b)}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:Y}=g;return b&&Y?Ki._fromTokenResponse(b,Y):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ka(w,f){return f?Jr(f):(be(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class po extends kt{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ps(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ps(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ps(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Uo(w){return K(w.auth,new po(w),w.bypassAuthState)}function ya(w){const{auth:f,user:g}=w;return be(g,f,"internal-error"),ho(g,new po(w),w.bypassAuthState)}function ou(w){return us.apply(this,arguments)}function us(){return(us=(0,_.Z)(function*(w){const{auth:f,user:g}=w;return be(g,f,"internal-error"),Ci(g,new po(w),w.bypassAuthState)})).apply(this,arguments)}class Ou{constructor(f,g,b,Y,ae=!1){this.auth=f,this.resolver=b,this.user=Y,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,_.Z)(function*(b,Y){f.pendingPromise={resolve:b,reject:Y};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(ae){f.reject(ae)}});return function(b,Y){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,_.Z)(function*(){const{urlResponse:b,sessionId:Y,postBody:ae,tenantId:$e,error:et,type:Vt}=f;if(et)return void g.reject(et);const dn={auth:g.auth,requestUri:b,sessionId:Y,tenantId:$e||void 0,postBody:ae||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Vt)(dn))}catch(Mn){g.reject(Mn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Uo;case"linkViaPopup":case"linkViaRedirect":return ou;case"reauthViaPopup":case"reauthViaRedirect":return ya;default:it(this.auth,"internal-error")}}resolve(f){Nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ku=new Ot(2e3,1e4);function $s(w,f,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,_.Z)(function*(w,f,g){const b=mn(w);_t(w,f,bs);const Y=ka(b,g);return new Fs(b,"signInViaPopup",f,Y).executeNotNull()})).apply(this,arguments)}function au(w,f,g){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w);_t(b.auth,f,bs);const Y=ka(b.auth,g);return new Fs(b.auth,"reauthViaPopup",f,Y,b).executeNotNull()})).apply(this,arguments)}function lu(w,f,g){return El.apply(this,arguments)}function El(){return(El=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w);_t(b.auth,f,bs);const Y=ka(b.auth,g);return new Fs(b.auth,"linkViaPopup",f,Y,b).executeNotNull()})).apply(this,arguments)}let Fs=(()=>{class w extends Ou{constructor(g,b,Y,ae,$e){super(g,b,ae,$e),this.provider=Y,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var g=this;return(0,_.Z)(function*(){const b=yield g.execute();return be(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,_.Z)(function*(){Nt(1===g.filter.length,"Popup operations only handle one event");const b=Ve();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(Y=>{g.reject(Y)}),g.resolver._isIframeWebStorageSupported(g.auth,Y=>{Y||g.reject(xe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,Y;this.pollId=(null===(Y=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===Y?void 0:Y.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,ku.get())};g()}}return w.currentPopupAction=null,w})();const Fl=new Map;class uu extends Ou{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,_.Z)(function*(){let b=Fl.get(g.auth._key());if(!b){try{const ae=(yield function cu(w,f){return du.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(ae)}catch(Y){b=()=>Promise.reject(Y)}Fl.set(g.auth._key(),b)}return g.bypassAuthState||Fl.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const Y=yield b.auth._redirectUserForId(f.eventId);if(Y)return b.user=Y,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function du(){return(du=(0,_.Z)(function*(w,f){const g=Ll(f),b=Vu(w);if(!(yield b._isAvailable()))return!1;const Y="true"===(yield b._get(g));return yield b._remove(g),Y})).apply(this,arguments)}function Zl(w,f){return Su.apply(this,arguments)}function Su(){return(Su=(0,_.Z)(function*(w,f){return Vu(w)._set(Ll(f),"true")})).apply(this,arguments)}function Lu(){Fl.clear()}function hu(w,f){Fl.set(w._key(),f)}function Vu(w){return Jr(w._redirectPersistence)}function Ll(w){return Br("pendingRedirect",w.config.apiKey,w.name)}function fu(w,f,g){return function pu(w,f,g){return gu.apply(this,arguments)}(w,f,g)}function gu(){return(gu=(0,_.Z)(function*(w,f,g){const b=mn(w);_t(w,f,bs),yield b._initializationPromise;const Y=ka(b,g);return yield Zl(Y,b),Y._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function ul(w,f,g){return function _a(w,f,g){return Vl.apply(this,arguments)}(w,f,g)}function Vl(){return(Vl=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w);_t(b.auth,f,bs),yield b.auth._initializationPromise;const Y=ka(b.auth,g);yield Zl(Y,b.auth);const ae=yield Gs(b);return Y._openRedirect(b.auth,f,"reauthViaRedirect",ae)})).apply(this,arguments)}function Uu(w,f,g){return function is(w,f,g){return Fa.apply(this,arguments)}(w,f,g)}function Fa(){return(Fa=(0,_.Z)(function*(w,f,g){const b=(0,L.m9)(w);_t(b.auth,f,bs),yield b.auth._initializationPromise;const Y=ka(b.auth,g);yield Ds(!1,b,f.providerId),yield Zl(Y,b.auth);const ae=yield Gs(b);return Y._openRedirect(b.auth,f,"linkViaRedirect",ae)})).apply(this,arguments)}function sa(w,f){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,_.Z)(function*(w,f){return yield mn(w)._initializationPromise,Pi(w,f,!1)})).apply(this,arguments)}function Pi(w,f){return io.apply(this,arguments)}function io(){return(io=(0,_.Z)(function*(w,f,g=!1){const b=mn(w),Y=ka(b,f),$e=yield new uu(b,Y,g).execute();return $e&&!g&&(delete $e.user._redirectEventId,yield b._persistUserIfCurrent($e.user),yield b._setRedirectUser(null,f)),$e})).apply(this,arguments)}function Gs(w){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,_.Z)(function*(w){const f=Ve(`${w.uid}:::`);return w._redirectEventId=f,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),f})).apply(this,arguments)}class La{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function va(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mu(w);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!mu(f)){const Y=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(xe(this.auth,Y))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ji(f))}saveEventToCache(f){this.cachedEventUids.add(ji(f)),this.lastProcessedEventTime=Date.now()}}function ji(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(f=>f).join("-")}function mu({type:w,error:f}){return"unknown"===w&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Cs(w){return yu.apply(this,arguments)}function yu(){return(yu=(0,_.Z)(function*(w,f={}){return Te(w,"GET","/v1/projects",f)})).apply(this,arguments)}const Bl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,As=/^https?/;function Ea(){return(Ea=(0,_.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:f}=yield Cs(w);for(const g of f)try{if(Yl(g))return}catch(b){}it(w,"unauthorized-domain")})).apply(this,arguments)}function Yl(w){const f=An(),{protocol:g,hostname:b}=new URL(f);if(w.startsWith("chrome-extension://")){const $e=new URL(w);return""===$e.hostname&&""===b?"chrome-extension:"===g&&w.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&$e.hostname===b}if(!As.test(g))return!1;if(Bl.test(w))return b===w;const Y=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(b)}const wa=new Ot(3e4,6e4);function go(){const w=yn().___jsl;if(null==w?void 0:w.H)for(const f of Object.keys(w.H))if(w.H[f].r=w.H[f].r||[],w.H[f].L=w.H[f].L||[],w.H[f].r=[...w.H[f].L],w.CP)for(let g=0;g<w.CP.length;g++)w.CP[g]=null}let xo=null;function Ja(w){return xo=xo||function Jo(w){return new Promise((f,g)=>{var b,Y,ae;function $e(){go(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{go(),g(xe(w,"network-request-failed"))},timeout:wa.get()})}if(null===(Y=null===(b=yn().gapi)||void 0===b?void 0:b.iframes)||void 0===Y?void 0:Y.Iframe)f(gapi.iframes.getContext());else{if(!(null===(ae=yn().gapi)||void 0===ae?void 0:ae.load)){const et=Xr("iframefcb");return yn()[et]=()=>{gapi.load?$e():g(xe(w,"network-request-failed"))},yr(`https://apis.google.com/js/api.js?onload=${et}`).catch(Vt=>g(Vt))}$e()}}).catch(f=>{throw xo=null,f})}(w),xo}const Xa=new Ot(5e3,15e3),cl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Au=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jl(w){const f=w.config;be(f.authDomain,w,"auth-domain-config-required");const g=f.emulator?ar(f,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:w.name,v:ee.SDK_VERSION},Y=Au.get(w.config.apiHost);Y&&(b.eid=Y);const ae=w._getFrameworks();return ae.length&&(b.fw=ae.join(",")),`${g}?${(0,L.xO)(b).slice(1)}`}function Ql(){return Ql=(0,_.Z)(function*(w){const f=yield Ja(w),g=yn().gapi;return be(g,w,"internal-error"),f.open({where:document.body,url:jl(w),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cl,dontclear:!0},b=>new Promise(function(){var Y=(0,_.Z)(function*(ae,$e){yield b.restyle({setHideOnLeave:!1});const et=xe(w,"network-request-failed"),Vt=yn().setTimeout(()=>{$e(et)},Xa.get());function dn(){yn().clearTimeout(Vt),ae(b)}b.ping(dn).then(dn,()=>{$e(et)})});return function(ae,$e){return Y.apply(this,arguments)}}()))}),Ql.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dt{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}const Or=encodeURIComponent("fac");function Er(w,f,g,b,Y,ae){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,_.Z)(function*(w,f,g,b,Y,ae){be(w.config.authDomain,w,"auth-domain-config-required"),be(w.config.apiKey,w,"invalid-api-key");const $e={apiKey:w.config.apiKey,appName:w.name,authType:g,redirectUrl:b,v:ee.SDK_VERSION,eventId:Y};if(f instanceof bs){f.setDefaultLanguage(w.languageCode),$e.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||($e.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Mn,kn]of Object.entries(ae||{}))$e[Mn]=kn}if(f instanceof _i){const Mn=f.getScopes().filter(kn=>""!==kn);Mn.length>0&&($e.scopes=Mn.join(","))}w.tenantId&&($e.tid=w.tenantId);const et=$e;for(const Mn of Object.keys(et))void 0===et[Mn]&&delete et[Mn];const Vt=yield w._getAppCheckToken(),dn=Vt?`#${Or}=${encodeURIComponent(Vt)}`:"";return`${Ws(w)}?${(0,L.xO)(et).slice(1)}${dn}`})).apply(this,arguments)}function Ws({config:w}){return w.emulator?ar(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}const Ti="webStorageSupport",dl=class Xo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=J,this._completeRedirectFn=Pi,this._overrideRedirectResult=hu}_openPopup(f,g,b,Y){var ae=this;return(0,_.Z)(function*(){var $e;Nt(null===($e=ae.eventManagers[f._key()])||void 0===$e?void 0:$e.manager,"_initialize() not called before _openPopup()");const et=yield Er(f,g,b,An(),Y);return function Lt(w,f,g,b=500,Y=600){const ae=Math.max((window.screen.availHeight-Y)/2,0).toString(),$e=Math.max((window.screen.availWidth-b)/2,0).toString();let et="";const Vt=Object.assign(Object.assign({},A),{width:b.toString(),height:Y.toString(),top:ae,left:$e}),dn=(0,L.z$)().toLowerCase();g&&(et=z(dn)?"_blank":g),me(dn)&&(f=f||"http://localhost",Vt.scrollbars="yes");const Mn=Object.entries(Vt).reduce((Mr,[li,Va])=>`${Mr}${li}=${Va},`,"");if(function bn(w=(0,L.z$)()){var f;return Bt(w)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(dn)&&"_self"!==et)return function En(w,f){const g=document.createElement("a");g.href=w,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",et),new dt(null);const kn=window.open(f||"",et,Mn);be(kn,w,"popup-blocked");try{kn.focus()}catch(Mr){}return new dt(kn)}(f,et,Ve())})()}_openRedirect(f,g,b,Y){var ae=this;return(0,_.Z)(function*(){return yield ae._originValidation(f),function Xt(w){yn().location.href=w}(yield Er(f,g,b,An(),Y)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:Y,promise:ae}=this.eventManagers[g];return Y?Promise.resolve(Y):(Nt(ae,"If manager is not set, promise should be"),ae)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,_.Z)(function*(){const b=yield function Bu(w){return Ql.apply(this,arguments)}(f),Y=new La(f);return b.register("authEvent",ae=>(be(null==ae?void 0:ae.authEvent,f,"invalid-auth-event"),{status:Y.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:Y},g.iframes[f._key()]=b,Y})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ti,{type:Ti},Y=>{var ae;const $e=null===(ae=null==Y?void 0:Y[0])||void 0===ae?void 0:ae[Ti];void 0!==$e&&g(!!$e),it(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Is(w){return Ea.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ir()||ye()||Bt()}};class Bo extends class Ca{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ht("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Bo(f)}_finalizeEnroll(f,g,b){return function Rl(w,f){return Te(w,"POST","/v2/accounts/mfaEnrollment:finalize",nt(w,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function ii(w,f){return Te(w,"POST","/v2/accounts/mfaSignIn:finalize",nt(w,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ru=(()=>{class w{constructor(){}static assertion(g){return Bo._fromCredential(g)}}return w.FACTOR_ID="phone",w})();var Mu="@firebase/auth";class ic{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,_.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{f((null==b?void 0:b.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,L.Pz)("authIdTokenMaxAge"),function E(w){(0,ee._registerComponent)(new je.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),Y=f.getProvider("heartbeat"),ae=f.getProvider("app-check-internal"),{apiKey:$e,authDomain:et}=b.options;be($e&&!$e.includes(":"),"invalid-api-key",{appName:b.name});const Vt={apiKey:$e,authDomain:et,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ei(w)},dn=new Cr(b,Y,ae,Vt);return function hr(w,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(Jr);(null==f?void 0:f.errorMap)&&w._updateErrorMap(f.errorMap),w._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(dn,g),dn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new je.wA("auth-internal",f=>{const g=mn(f.getProvider("auth").getImmediate());return new ic(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Mu,"0.23.2",function N(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,ee.registerVersion)(Mu,"0.23.2","esm2017")}("Browser")},1627:(hn,ut,U)=>{U.d(ut,{$o:()=>eh,AM:()=>rt,Bd:()=>ua,Bt:()=>qg,EW:()=>_p,FQ:()=>Ul,G$:()=>Ci,HE:()=>la,IO:()=>pi,JH:()=>N,Jr:()=>zs,Kk:()=>So,Lx:()=>vu,MQ:()=>Ua,N8:()=>ja,Od:()=>Y,Ot:()=>Xd,R:()=>sc,S1:()=>oa,Sb:()=>lc,Sl:()=>$e,TD:()=>Xl,TQ:()=>Tr,U2:()=>dn,U7:()=>th,VF:()=>b,Vt:()=>Do,Vx:()=>Vt,Wu:()=>Ls,cy:()=>et,dH:()=>ac,e0:()=>rr,g2:()=>Di,i3:()=>wc,iH:()=>Ae,iU:()=>f,jM:()=>li,mI:()=>io,nP:()=>Vs,qT:()=>w,t8:()=>ae,tn:()=>Z,vA:()=>ic,vh:()=>so,wj:()=>Jd,yv:()=>Va});var _=U(5861),L=U(6881),ee=U(4859),re=U(2090),Pe=U(1877);const je="@firebase/database";let Be="";function rt(p){Be=p}class Ie{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,re.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,re.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class ve{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,re.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Je=function(p){try{if("undefined"!=typeof window&&void 0!==window[p]){const u=window[p];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Ie(u)}}catch(u){}return new ve},Tt=Je("localStorage"),ft=Je("sessionStorage"),bt=new Pe.Yd("@firebase/database"),Mt=function(){let p=1;return function(){return p++}}(),Xe=function(p){const u=(0,re.dS)(p),c=new re.gQ;c.update(u);const v=c.digest();return re.US.encodeByteArray(v)},Ct=function(...p){let u="";for(let c=0;c<p.length;c++){const v=p[c];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?u+=Ct.apply(null,v):u+="object"==typeof v?(0,re.Wl)(v):v,u+=" "}return u};let Ke=null,Kt=!0;const it=function(p,u){(0,re.hu)(!u||!0===p||!1===p,"Can't turn on custom loggers persistently."),!0===p?(bt.logLevel=Pe.in.VERBOSE,Ke=bt.log.bind(bt),u&&ft.set("logging_enabled",!0)):"function"==typeof p?Ke=p:(Ke=null,ft.remove("logging_enabled"))},xe=function(...p){if(!0===Kt&&(Kt=!1,null===Ke&&!0===ft.get("logging_enabled")&&it(!0)),Ke){const u=Ct.apply(null,p);Ke(u)}},Qe=function(p){return function(...u){xe(p,...u)}},_t=function(...p){const u="FIREBASE INTERNAL ERROR: "+Ct(...p);bt.error(u)},It=function(...p){const u=`FIREBASE FATAL ERROR: ${Ct(...p)}`;throw bt.error(u),new Error(u)},be=function(...p){const u="FIREBASE WARNING: "+Ct(...p);bt.warn(u)},Nt=function(p){return"number"==typeof p&&(p!=p||p===Number.POSITIVE_INFINITY||p===Number.NEGATIVE_INFINITY)},_n="[MIN_NAME]",Fn="[MAX_NAME]",ln=function(p,u){if(p===u)return 0;if(p===_n||u===Fn)return-1;if(u===_n||p===Fn)return 1;{const c=qt(p),v=qt(u);return null!==c?null!==v?c-v==0?p.length-u.length:c-v:-1:null!==v?1:p<u?-1:1}},rn=function(p,u){return p===u?0:p<u?-1:1},Ot=function(p,u){if(u&&p in u)return u[p];throw new Error("Missing required key ("+p+") in object: "+(0,re.Wl)(u))},ar=function(p){if("object"!=typeof p||null===p)return(0,re.Wl)(p);const u=[];for(const v in p)u.push(v);u.sort();let c="{";for(let v=0;v<u.length;v++)0!==v&&(c+=","),c+=(0,re.Wl)(u[v]),c+=":",c+=ar(p[u[v]]);return c+="}",c},Rn=function(p,u){const c=p.length;if(c<=u)return[p];const v=[];for(let S=0;S<c;S+=u)v.push(p.substring(S,S+u>c?c:S+u));return v};function un(p,u){for(const c in p)p.hasOwnProperty(c)&&u(c,p[c])}const st=function(p){(0,re.hu)(!Nt(p),"Invalid JSON number");const v=1023;let S,B,Q,_e,ke;0===p?(B=0,Q=0,S=1/p==-1/0?1:0):(S=p<0,(p=Math.abs(p))>=Math.pow(2,1-v)?(_e=Math.min(Math.floor(Math.log(p)/Math.LN2),v),B=_e+v,Q=Math.round(p*Math.pow(2,52-_e)-Math.pow(2,52))):(B=0,Q=Math.round(p/Math.pow(2,-1074))));const Ye=[];for(ke=52;ke;ke-=1)Ye.push(Q%2?1:0),Q=Math.floor(Q/2);for(ke=11;ke;ke-=1)Ye.push(B%2?1:0),B=Math.floor(B/2);Ye.push(S?1:0),Ye.reverse();const Rt=Ye.join("");let Wt="";for(ke=0;ke<64;ke+=8){let tn=parseInt(Rt.substr(ke,8),2).toString(16);1===tn.length&&(tn="0"+tn),Wt+=tn}return Wt.toLowerCase()},Ee=new RegExp("^-?(0*)\\d{1,10}$"),qt=function(p){if(Ee.test(p)){const u=Number(p);if(u>=-2147483648&&u<=2147483647)return u}return null},pn=function(p){try{p()}catch(u){setTimeout(()=>{throw be("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Nn=function(p,u){const c=setTimeout(p,u);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class cr{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(v=>this.appCheck=v)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,v)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,v):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(v=>v.addTokenListener(u))}notifyForInvalidToken(){be(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _r{constructor(u,c,v){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(S=>this.auth_=S)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,v)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,v):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',be(u)}}let jn=(()=>{class p{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return p.OWNER="owner",p})();const Qr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ge="websocket",ht="long_polling";class At{constructor(u,c,v,S,B=!1,Q="",_e=!1,ke=!1){this.secure=c,this.namespace=v,this.webSocketOnly=S,this.nodeAdmin=B,this.persistenceKey=Q,this.includeNamespaceInQueryParams=_e,this.isUsingEmulator=ke,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tt.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Tt.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function sn(p,u,c){let v;if((0,re.hu)("string"==typeof u,"typeof type must == string"),(0,re.hu)("object"==typeof c,"typeof params must == object"),u===Ge)v=(p.secure?"wss://":"ws://")+p.internalHost+"/.ws?";else{if(u!==ht)throw new Error("Unknown connection type: "+u);v=(p.secure?"https://":"http://")+p.internalHost+"/.lp?"}(function Zt(p){return p.host!==p.internalHost||p.isCustomHost()||p.includeNamespaceInQueryParams})(p)&&(c.ns=p.namespace);const S=[];return un(c,(B,Q)=>{S.push(B+"="+Q)}),v+S.join("&")}class br{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,re.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,re.p$)(this.counters_)}}const zn={},Vn={};function yi(p){const u=p.toString();return zn[u]||(zn[u]=new br),zn[u]}class mr{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let S=0;S<v.length;++S)v[S]&&pn(()=>{this.onMessage_(v[S])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class se{constructor(u,c,v,S,B,Q,_e){this.connId=u,this.repoInfo=c,this.applicationId=v,this.appCheckToken=S,this.authToken=B,this.transportSessionId=Q,this.lastSessionId=_e,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qe(u),this.stats_=yi(c),this.urlFn=ke=>(this.appCheckToken&&(ke.ac=this.appCheckToken),sn(c,ht,ke))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new mr(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(p){if((0,re.Yr)()||"complete"===document.readyState)p();else{let u=!1;const c=function(){document.body?u||(u=!0,p()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new we((...B)=>{const[Q,_e,ke,Ye,Rt]=B;if(this.incrementIncomingBytes_(B),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===Q)this.id=_e,this.password=ke;else{if("close"!==Q)throw new Error("Unrecognized command received: "+Q);_e?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(_e,()=>{this.onClosed_()})):this.onClosed_()}},(...B)=>{const[Q,_e]=B;this.incrementIncomingBytes_(B),this.myPacketOrderer.handleResponse(Q,_e)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Qr.test(location.hostname)&&(v.r="f");const S=this.urlFn(v);this.log_("Connecting via long-poll to "+S),this.scriptTagHolder.addTag(S,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){se.forceAllow_=!0}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!se.forceAllow_&&(se.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,re.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const v=(0,re.h$)(c),S=Rn(v,1840);for(let B=0;B<S.length;B++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[B]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=u,v.pw=c,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,re.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class we{constructor(u,c,v,S){if(this.onDisconnect=v,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Mt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=we.createIFrame_();let B="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(B='<script>document.domain="'+document.domain+'";<\/script>');const Q="<html><body>"+B+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(Q),this.myIFrame.doc.close()}catch(_e){xe("frame writing exception"),_e.stack&&xe(_e.stack),xe(_e)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||xe("No IE domain setting required")}catch(c){const v=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),v="",S=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const Q=this.pendingSegs.shift();v=v+"&seg"+S+"="+Q.seg+"&ts"+S+"="+Q.ts+"&d"+S+"="+Q.d,S++}return c+=v,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,v){this.pendingSegs.push({seg:u,ts:c,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const v=()=>{this.outstandingRequests.delete(c),this.newRequest_()},S=setTimeout(v,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(S),v()})}addTag(u,c){(0,re.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=u,v.onload=v.onreadystatechange=function(){const S=v.readyState;(!S||"loaded"===S||"complete"===S)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),c())},v.onerror=()=>{xe("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let on=null;"undefined"!=typeof MozWebSocket?on=MozWebSocket:"undefined"!=typeof WebSocket&&(on=WebSocket);let bn=(()=>{class p{constructor(c,v,S,B,Q,_e,ke){this.connId=c,this.applicationId=S,this.appCheckToken=B,this.authToken=Q,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qe(this.connId),this.stats_=yi(v),this.connURL=p.connectionURL_(v,_e,ke,B,S),this.nodeAdmin=v.nodeAdmin}static connectionURL_(c,v,S,B,Q){const _e={v:"5"};return!(0,re.Yr)()&&"undefined"!=typeof location&&location.hostname&&Qr.test(location.hostname)&&(_e.r="f"),v&&(_e.s=v),S&&(_e.ls=S),B&&(_e.ac=B),Q&&(_e.p=Q),sn(c,Ge,_e)}open(c,v){this.onDisconnect=v,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tt.set("previous_websocket_failure",!0);try{let S;if((0,re.Yr)()){S={headers:{"User-Agent":`Firebase/5/${Be}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Q=process.env,_e=0===this.connURL.indexOf("wss://")?Q.HTTPS_PROXY||Q.https_proxy:Q.HTTP_PROXY||Q.http_proxy;_e&&(S.proxy={origin:_e})}this.mySock=new on(this.connURL,[],S)}catch(S){this.log_("Error instantiating WebSocket.");const B=S.message||S.data;return B&&this.log_(B),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=S=>{this.handleIncomingFrame(S)},this.mySock.onerror=S=>{this.log_("WebSocket error.  Closing connection.");const B=S.message||S.data;B&&this.log_(B),this.onClosed_()}}start(){}static forceDisallow(){p.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const S=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);S&&S.length>1&&parseFloat(S[1])<4.4&&(c=!0)}return!c&&null!==on&&!p.forceDisallow_}static previouslyFailed(){return Tt.isInMemoryStorage||!0===Tt.get("previous_websocket_failure")}markConnectionHealthy(){Tt.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const S=(0,re.cI)(v);this.onMessage(S)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const v=Number(c);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const v=c.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const S=this.extractFrameCount_(v);null!==S&&this.appendFrame_(S)}}send(c){this.resetKeepAlive();const v=(0,re.Wl)(c);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const S=Rn(v,16384);S.length>1&&this.sendString_(String(S.length));for(let B=0;B<S.length;B++)this.sendString_(S[B])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return p.responsesRequiredToBeHealthy=2,p.healthyTimeout=3e4,p})(),gr=(()=>{class p{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[se,bn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const v=bn&&bn.isAvailable();let S=v&&!bn.previouslyFailed();if(c.webSocketOnly&&(v||be("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),S=!0),S)this.transports_=[bn];else{const B=this.transports_=[];for(const Q of p.ALL_TRANSPORTS)Q&&Q.isAvailable()&&B.push(Q);p.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return p.globalTransportInitialized_=!1,p})();class cs{constructor(u,c,v,S,B,Q,_e,ke,Ye,Rt){this.id=u,this.repoInfo_=c,this.applicationId_=v,this.appCheckToken_=S,this.authToken_=B,this.onMessage_=Q,this.onReady_=_e,this.onDisconnect_=ke,this.onKill_=Ye,this.lastSessionId=Rt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qe("c:"+this.id+":"),this.transportManager_=new gr(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,v)},Math.floor(0));const S=u.healthyTimeout||0;S>0&&(this.healthyTimeout_=Nn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(S)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Ot("t",u),v=Ot("d",u);if("c"===c)this.onSecondaryControl_(v);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Ot("t",u),v=Ot("d",u);"c"===c?this.onControl_(v):"d"===c&&this.onDataMessage_(v)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Ot("t",u);if("d"in u){const v=u.d;if("h"===c){const S=Object.assign({},v);this.repoInfo_.isUsingEmulator&&(S.h=this.repoInfo_.host),this.onHandshake_(S)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(v):"r"===c?this.onReset_(v):"e"===c?_t("Server Error: "+v):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_t("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,v=u.v,S=u.h;this.sessionId=u.s,this.repoInfo_.host=S,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==v&&be("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,v),Nn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Rs{put(u,c,v,S){}merge(u,c,v,S){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,v){}onDisconnectMerge(u,c,v){}onDisconnectCancel(u,c){}reportStats(u){}}class ur{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,re.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const v=[...this.listeners_[u]];for(let S=0;S<v.length;S++)v[S].callback.apply(v[S].context,c)}}on(u,c,v){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:v});const S=this.getInitialEvent(u);S&&c.apply(v,S)}off(u,c,v){this.validateEventType_(u);const S=this.listeners_[u]||[];for(let B=0;B<S.length;B++)if(S[B].callback===c&&(!v||v===S[B].context))return void S.splice(B,1)}validateEventType_(u){(0,re.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class Si extends ur{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Si}getInitialEvent(u){return(0,re.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Cr{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let v=0;for(let S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[v]=this.pieces_[S],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function mn(){return new Cr("")}function tr(p){return p.pieceNum_>=p.pieces_.length?null:p.pieces_[p.pieceNum_]}function ts(p){return p.pieces_.length-p.pieceNum_}function hr(p){let u=p.pieceNum_;return u<p.pieces_.length&&u++,new Cr(p.pieces_,u)}function Zr(p){return p.pieceNum_<p.pieces_.length?p.pieces_[p.pieces_.length-1]:null}function Ze(p,u=0){return p.pieces_.slice(p.pieceNum_+u)}function lt(p){if(p.pieceNum_>=p.pieces_.length)return null;const u=[];for(let c=p.pieceNum_;c<p.pieces_.length-1;c++)u.push(p.pieces_[c]);return new Cr(u,0)}function mt(p,u){const c=[];for(let v=p.pieceNum_;v<p.pieces_.length;v++)c.push(p.pieces_[v]);if(u instanceof Cr)for(let v=u.pieceNum_;v<u.pieces_.length;v++)c.push(u.pieces_[v]);else{const v=u.split("/");for(let S=0;S<v.length;S++)v[S].length>0&&c.push(v[S])}return new Cr(c,0)}function kt(p){return p.pieceNum_>=p.pieces_.length}function Tn(p,u){const c=tr(p),v=tr(u);if(null===c)return u;if(c===v)return Tn(hr(p),hr(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+p+")")}function Ar(p,u){const c=Ze(p,0),v=Ze(u,0);for(let S=0;S<c.length&&S<v.length;S++){const B=ln(c[S],v[S]);if(0!==B)return B}return c.length===v.length?0:c.length<v.length?-1:1}function Un(p,u){if(ts(p)!==ts(u))return!1;for(let c=p.pieceNum_,v=u.pieceNum_;c<=p.pieces_.length;c++,v++)if(p.pieces_[c]!==u.pieces_[v])return!1;return!0}function nr(p,u){let c=p.pieceNum_,v=u.pieceNum_;if(ts(p)>ts(u))return!1;for(;c<p.pieces_.length;){if(p.pieces_[c]!==u.pieces_[v])return!1;++c,++v}return!0}class Oi{constructor(u,c){this.errorPrefix_=c,this.parts_=Ze(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,re.ug)(this.parts_[v]);Vi(this)}}function Vi(p){if(p.byteLength_>768)throw new Error(p.errorPrefix_+"has a key path longer than 768 bytes ("+p.byteLength_+").");if(p.parts_.length>32)throw new Error(p.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ai(p))}function Ai(p){return 0===p.parts_.length?"":"in property '"+p.parts_.join(".")+"'"}class Ys extends ur{constructor(){let u,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",u="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const v=!document[u];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new Ys}getInitialEvent(u){return(0,re.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Ui=1e3;let lo,Ms=(()=>{class p extends Rs{constructor(c,v,S,B,Q,_e,ke,Ye){if(super(),this.repoInfo_=c,this.applicationId_=v,this.onDataUpdate_=S,this.onConnectStatus_=B,this.onServerInfoUpdate_=Q,this.authTokenProvider_=_e,this.appCheckTokenProvider_=ke,this.authOverride_=Ye,this.id=p.nextPersistentConnectionId_++,this.log_=Qe("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ui,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ye&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ys.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Si.getInstance().on("online",this.onOnline_,this)}sendRequest(c,v,S){const B=++this.requestNumber_,Q={r:B,a:c,b:v};this.log_((0,re.Wl)(Q)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Q),S&&(this.requestCBHash_[B]=S)}get(c){this.initConnection_();const v=new re.BH,S={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:S,onComplete:_e=>{const ke=_e.d;"ok"===_e.s?v.resolve(ke):v.reject(ke)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(c,v,S,B){this.initConnection_();const Q=c._queryIdentifier,_e=c._path.toString();this.log_("Listen called for "+_e+" "+Q),this.listens.has(_e)||this.listens.set(_e,new Map),(0,re.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(_e).has(Q),"listen() called twice for same path/queryId.");const ke={onComplete:B,hashFn:v,query:c,tag:S};this.listens.get(_e).set(Q,ke),this.connected_&&this.sendListen_(ke)}sendGet_(c){const v=this.outstandingGets_[c];this.sendRequest("g",v.request,S=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(S)})}sendListen_(c){const v=c.query,S=v._path.toString(),B=v._queryIdentifier;this.log_("Listen on "+S+" for "+B);const Q={p:S};c.tag&&(Q.q=v._queryObject,Q.t=c.tag),Q.h=c.hashFn(),this.sendRequest("q",Q,ke=>{const Ye=ke.d,Rt=ke.s;p.warnOnListenWarnings_(Ye,v),(this.listens.get(S)&&this.listens.get(S).get(B))===c&&(this.log_("listen response",ke),"ok"!==Rt&&this.removeListen_(S,B),c.onComplete&&c.onComplete(Rt,Ye))})}static warnOnListenWarnings_(c,v){if(c&&"object"==typeof c&&(0,re.r3)(c,"w")){const S=(0,re.DV)(c,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){const B='".indexOn": "'+v._queryParams.getIndex().toString()+'"',Q=v._path.toString();be(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${B} at ${Q} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,re.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,v=(0,re.w9)(c)?"auth":"gauth",S={cred:c};null===this.authOverride_?S.noauth=!0:"object"==typeof this.authOverride_&&(S.authvar=this.authOverride_),this.sendRequest(v,S,B=>{const Q=B.s,_e=B.d||"error";this.authToken_===c&&("ok"===Q?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(Q,_e))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const v=c.s,S=c.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,S)})}unlisten(c,v){const S=c._path.toString(),B=c._queryIdentifier;this.log_("Unlisten called for "+S+" "+B),(0,re.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,B)&&this.connected_&&this.sendUnlisten_(S,B,c._queryObject,v)}sendUnlisten_(c,v,S,B){this.log_("Unlisten on "+c+" for "+v);const Q={p:c};B&&(Q.q=S,Q.t=B),this.sendRequest("n",Q)}onDisconnectPut(c,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,v,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:v,onComplete:S})}onDisconnectMerge(c,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,v,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:v,onComplete:S})}onDisconnectCancel(c,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,v):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(c,v,S,B){const Q={p:v,d:S};this.log_("onDisconnect "+c,Q),this.sendRequest(c,Q,_e=>{B&&setTimeout(()=>{B(_e.s,_e.d)},Math.floor(0))})}put(c,v,S,B){this.putInternal("p",c,v,S,B)}merge(c,v,S,B){this.putInternal("m",c,v,S,B)}putInternal(c,v,S,B,Q){this.initConnection_();const _e={p:v,d:S};void 0!==Q&&(_e.h=Q),this.outstandingPuts_.push({action:c,request:_e,onComplete:B}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(c){const v=this.outstandingPuts_[c].action,S=this.outstandingPuts_[c].request,B=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(v,S,Q=>{this.log_(v+" response",Q),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),B&&B(Q.s,Q.d)})}reportStats(c){if(this.connected_){const v={c};this.log_("reportStats",v),this.sendRequest("s",v,S=>{"ok"!==S.s&&this.log_("reportStats","Error sending stats: "+S.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,re.Wl)(c));const v=c.r,S=this.requestCBHash_[v];S&&(delete this.requestCBHash_[v],S(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,v){this.log_("handleServerMessage",c,v),"d"===c?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===c?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===c?this.onListenRevoked_(v.p,v.q):"ac"===c?this.onAuthRevoked_(v.s,v.d):"apc"===c?this.onAppCheckRevoked_(v.s,v.d):"sd"===c?this.onSecurityDebugPacket_(v):_t("Unrecognized action received from server: "+(0,re.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ui),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-c);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,_.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const v=c.onDataMessage_.bind(c),S=c.onReady_.bind(c),B=c.onRealtimeDisconnect_.bind(c),Q=c.id+":"+p.nextConnectionId_++,_e=c.lastSessionId;let ke=!1,Ye=null;const Rt=function(){Ye?Ye.close():(ke=!0,B())};c.realtime_={close:Rt,sendRequest:function(Kn){(0,re.hu)(Ye,"sendRequest call when we're not connected not allowed."),Ye.sendRequest(Kn)}};const tn=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Kn,Dr]=yield Promise.all([c.authTokenProvider_.getToken(tn),c.appCheckTokenProvider_.getToken(tn)]);ke?xe("getToken() completed but was canceled"):(xe("getToken() completed. Creating connection."),c.authToken_=Kn&&Kn.accessToken,c.appCheckToken_=Dr&&Dr.token,Ye=new cs(Q,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,v,S,B,Lr=>{be(Lr+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},_e))}catch(Kn){c.log_("Failed to get token: "+Kn),ke||(c.repoInfo_.nodeAdmin&&be(Kn),Rt())}}})()}interrupt(c){xe("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){xe("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const v=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const v=this.outstandingPuts_[c];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,v){let S;S=v?v.map(Q=>ar(Q)).join("$"):"default";const B=this.removeListen_(c,S);B&&B.onComplete&&B.onComplete("permission_denied")}removeListen_(c,v){const S=new Cr(c).toString();let B;if(this.listens.has(S)){const Q=this.listens.get(S);B=Q.get(v),Q.delete(v),0===Q.size&&this.listens.delete(S)}else B=void 0;return B}onAuthRevoked_(c,v){xe("Auth token revoked: "+c+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,v){xe("App check token revoked: "+c+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const v of c.values())this.sendListen_(v);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let v="js";(0,re.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+v+"."+Be.replace(/\./g,"-")]=1,(0,re.uI)()?c["framework.cordova"]=1:(0,re.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Si.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&c}}return p.nextPersistentConnectionId_=0,p.nextConnectionId_=0,p})();class Ir{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new Ir(u,c)}}class xs{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const v=new Ir(_n,u),S=new Ir(_n,c);return 0!==this.compare(v,S)}minPost(){return Ir.MIN}}class Oo extends xs{static get __EMPTY_NODE(){return lo}static set __EMPTY_NODE(u){lo=u}compare(u,c){return ln(u.name,c.name)}isDefinedOn(u){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return Ir.MIN}maxPost(){return new Ir(Fn,lo)}makePost(u,c){return(0,re.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new Ir(u,lo)}toString(){return".key"}}const Wi=new Oo;class Ps{constructor(u,c,v,S,B=null){this.isReverse_=S,this.resultGenerator_=B,this.nodeStack_=[];let Q=1;for(;!u.isEmpty();)if(Q=c?v(u.key,c):1,S&&(Q*=-1),Q<0)u=this.isReverse_?u.left:u.right;else{if(0===Q){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let zi,ki=(()=>{class p{constructor(c,v,S,B,Q){this.key=c,this.value=v,this.color=null!=S?S:p.RED,this.left=null!=B?B:$r.EMPTY_NODE,this.right=null!=Q?Q:$r.EMPTY_NODE}copy(c,v,S,B,Q){return new p(null!=c?c:this.key,null!=v?v:this.value,null!=S?S:this.color,null!=B?B:this.left,null!=Q?Q:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,v,S){let B=this;const Q=S(c,B.key);return B=Q<0?B.copy(null,null,null,B.left.insert(c,v,S),null):0===Q?B.copy(null,v,null,null,null):B.copy(null,null,null,null,B.right.insert(c,v,S)),B.fixUp_()}removeMin_(){if(this.left.isEmpty())return $r.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,v){let S,B;if(S=this,v(c,S.key)<0)!S.left.isEmpty()&&!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),S=S.copy(null,null,null,S.left.remove(c,v),null);else{if(S.left.isRed_()&&(S=S.rotateRight_()),!S.right.isEmpty()&&!S.right.isRed_()&&!S.right.left.isRed_()&&(S=S.moveRedRight_()),0===v(c,S.key)){if(S.right.isEmpty())return $r.EMPTY_NODE;B=S.right.min_(),S=S.copy(B.key,B.value,null,null,S.right.removeMin_())}S=S.copy(null,null,null,null,S.right.remove(c,v))}return S.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,p.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,p.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,v)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return p.RED=!0,p.BLACK=!1,p})();class $r{constructor(u,c=$r.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new $r(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,ki.BLACK,null,null))}remove(u){return new $r(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,ki.BLACK,null,null))}get(u){let c,v=this.root_;for(;!v.isEmpty();){if(c=this.comparator_(u,v.key),0===c)return v.value;c<0?v=v.left:c>0&&(v=v.right)}return null}getPredecessorKey(u){let c,v=this.root_,S=null;for(;!v.isEmpty();){if(c=this.comparator_(u,v.key),0===c){if(v.left.isEmpty())return S?S.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}c<0?v=v.left:c>0&&(S=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Ps(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new Ps(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new Ps(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new Ps(this.root_,null,this.comparator_,!0,u)}}function ko(p,u){return ln(p.name,u.name)}function hs(p,u){return ln(p,u)}$r.EMPTY_NODE=new class Go{copy(u,c,v,S,B){return this}insert(u,c,v){return new ki(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ao=function(p){return"number"==typeof p?"number:"+st(p):"string:"+p},Ts=function(p){if(p.isLeafNode()){const u=p.val();(0,re.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,re.r3)(u,".sv"),"Priority must be a string or number.")}else(0,re.hu)(p===zi||p.isEmpty(),"priority of unexpected type.");(0,re.hu)(p===zi||p.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Js,Ro,Ki,_s=(()=>{class p{constructor(c,v=p.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=v,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ts(this.priorityNode_)}static set __childrenNodeConstructor(c){Js=c}static get __childrenNodeConstructor(){return Js}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new p(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return kt(c)?this:".priority"===tr(c)?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,v){return null}updateImmediateChild(c,v){return".priority"===c?this.updatePriority(v):v.isEmpty()&&".priority"!==c?this:p.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,v).updatePriority(this.priorityNode_)}updateChild(c,v){const S=tr(c);return null===S?v:v.isEmpty()&&".priority"!==S?this:((0,re.hu)(".priority"!==S||1===ts(c),".priority must be the last token in a path"),this.updateImmediateChild(S,p.__childrenNodeConstructor.EMPTY_NODE.updateChild(hr(c),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,v){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Ao(this.priorityNode_.val())+":");const v=typeof this.value_;c+=v+":",c+="number"===v?st(this.value_):this.value_,this.lazyHash_=Xe(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===p.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof p.__childrenNodeConstructor?-1:((0,re.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const v=typeof c.value_,S=typeof this.value_,B=p.VALUE_TYPE_ORDER.indexOf(v),Q=p.VALUE_TYPE_ORDER.indexOf(S);return(0,re.hu)(B>=0,"Unknown leaf type: "+v),(0,re.hu)(Q>=0,"Unknown leaf type: "+S),B===Q?"object"===S?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:Q-B}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const v=c;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return p.VALUE_TYPE_ORDER=["object","boolean","number","string"],p})();const Nr=new class Xs extends xs{compare(u,c){const v=u.node.getPriority(),S=c.node.getPriority(),B=v.compareTo(S);return 0===B?ln(u.name,c.name):B}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return Ir.MIN}maxPost(){return new Ir(Fn,new _s("[PRIORITY-POST]",Ki))}makePost(u,c){const v=Ro(u);return new Ir(c,new _s("[PRIORITY-POST]",v))}toString(){return".priority"}},ei=Math.log(2);class bs{constructor(u){this.count=parseInt(Math.log(u+1)/ei,10),this.current_=this.count-1;const S=(B=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&S}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const _i=function(p,u,c,v){p.sort(u);const S=function(ke,Ye){const Rt=Ye-ke;let Wt,tn;if(0===Rt)return null;if(1===Rt)return Wt=p[ke],tn=c?c(Wt):Wt,new ki(tn,Wt.node,ki.BLACK,null,null);{const Kn=parseInt(Rt/2,10)+ke,Dr=S(ke,Kn),Lr=S(Kn+1,Ye);return Wt=p[Kn],tn=c?c(Wt):Wt,new ki(tn,Wt.node,ki.BLACK,Dr,Lr)}},_e=function(ke){let Ye=null,Rt=null,Wt=p.length;const tn=function(Dr,Lr){const Vr=Wt-Dr,uc=Wt;Wt-=Dr;const Hc=S(Vr+1,uc),$c=p[Vr],nh=c?c($c):$c;Kn(new ki(nh,$c.node,Lr,null,Hc))},Kn=function(Dr){Ye?(Ye.left=Dr,Ye=Dr):(Rt=Dr,Ye=Dr)};for(let Dr=0;Dr<ke.count;++Dr){const Lr=ke.nextBitIsOne(),Vr=Math.pow(2,ke.count-(Dr+1));Lr?tn(Vr,ki.BLACK):(tn(Vr,ki.BLACK),tn(Vr,ki.RED))}return Rt}(new bs(p.length));return new $r(v||u,_e)};let wi;const ps={};class uo{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,re.hu)(ps&&Nr,"ChildrenNode.ts has not been loaded"),wi=wi||new uo({".priority":ps},{".priority":Nr}),wi}get(u){const c=(0,re.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof $r?c:null}hasIndex(u){return(0,re.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,re.hu)(u!==Wi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let S=!1;const B=c.getIterator(Ir.Wrap);let _e,Q=B.getNext();for(;Q;)S=S||u.isDefinedOn(Q.node),v.push(Q),Q=B.getNext();_e=S?_i(v,u.getCompare()):ps;const ke=u.toString(),Ye=Object.assign({},this.indexSet_);Ye[ke]=u;const Rt=Object.assign({},this.indexes_);return Rt[ke]=_e,new uo(Rt,Ye)}addToIndexes(u,c){const v=(0,re.UI)(this.indexes_,(S,B)=>{const Q=(0,re.DV)(this.indexSet_,B);if((0,re.hu)(Q,"Missing index implementation for "+B),S===ps){if(Q.isDefinedOn(u.node)){const _e=[],ke=c.getIterator(Ir.Wrap);let Ye=ke.getNext();for(;Ye;)Ye.name!==u.name&&_e.push(Ye),Ye=ke.getNext();return _e.push(u),_i(_e,Q.getCompare())}return ps}{const _e=c.get(u.name);let ke=S;return _e&&(ke=ke.remove(new Ir(u.name,_e))),ke.insert(u,u.node)}});return new uo(v,this.indexSet_)}removeFromIndexes(u,c){const v=(0,re.UI)(this.indexes_,S=>{if(S===ps)return S;{const B=c.get(u.name);return B?S.remove(new Ir(u.name,B)):S}});return new uo(v,this.indexSet_)}}let Yr,V=(()=>{class p{constructor(c,v,S){this.children_=c,this.priorityNode_=v,this.indexMap_=S,this.lazyHash_=null,this.priorityNode_&&Ts(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yr||(Yr=new p(new $r(hs),null,uo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yr}updatePriority(c){return this.children_.isEmpty()?this:new p(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const v=this.children_.get(c);return null===v?Yr:v}}getChild(c){const v=tr(c);return null===v?this:this.getImmediateChild(v).getChild(hr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,v){if((0,re.hu)(v,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(v);{const S=new Ir(c,v);let B,Q;v.isEmpty()?(B=this.children_.remove(c),Q=this.indexMap_.removeFromIndexes(S,this.children_)):(B=this.children_.insert(c,v),Q=this.indexMap_.addToIndexes(S,this.children_));const _e=B.isEmpty()?Yr:this.priorityNode_;return new p(B,_e,Q)}}updateChild(c,v){const S=tr(c);if(null===S)return v;{(0,re.hu)(".priority"!==tr(c)||1===ts(c),".priority must be the last token in a path");const B=this.getImmediateChild(S).updateChild(hr(c),v);return this.updateImmediateChild(S,B)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const v={};let S=0,B=0,Q=!0;if(this.forEachChild(Nr,(_e,ke)=>{v[_e]=ke.val(c),S++,Q&&p.INTEGER_REGEXP_.test(_e)?B=Math.max(B,Number(_e)):Q=!1}),!c&&Q&&B<2*S){const _e=[];for(const ke in v)_e[ke]=v[ke];return _e}return c&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Ao(this.getPriority().val())+":"),this.forEachChild(Nr,(v,S)=>{const B=S.hash();""!==B&&(c+=":"+v+":"+B)}),this.lazyHash_=""===c?"":Xe(c)}return this.lazyHash_}getPredecessorChildName(c,v,S){const B=this.resolveIndex_(S);if(B){const Q=B.getPredecessorKey(new Ir(c,v));return Q?Q.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const v=this.resolveIndex_(c);if(v){const S=v.minKey();return S&&S.name}return this.children_.minKey()}getFirstChild(c){const v=this.getFirstChildName(c);return v?new Ir(v,this.children_.get(v)):null}getLastChildName(c){const v=this.resolveIndex_(c);if(v){const S=v.maxKey();return S&&S.name}return this.children_.maxKey()}getLastChild(c){const v=this.getLastChildName(c);return v?new Ir(v,this.children_.get(v)):null}forEachChild(c,v){const S=this.resolveIndex_(c);return S?S.inorderTraversal(B=>v(B.name,B.node)):this.children_.inorderTraversal(v)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,v){const S=this.resolveIndex_(v);if(S)return S.getIteratorFrom(c,B=>B);{const B=this.children_.getIteratorFrom(c.name,Ir.Wrap);let Q=B.peek();for(;null!=Q&&v.compare(Q,c)<0;)B.getNext(),Q=B.peek();return B}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,v){const S=this.resolveIndex_(v);if(S)return S.getReverseIteratorFrom(c,B=>B);{const B=this.children_.getReverseIteratorFrom(c.name,Ir.Wrap);let Q=B.peek();for(;null!=Q&&v.compare(Q,c)>0;)B.getNext(),Q=B.peek();return B}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===$?-1:0}withIndex(c){if(c===Wi||this.indexMap_.hasIndex(c))return this;{const v=this.indexMap_.addIndex(c,this.children_);return new p(this.children_,this.priorityNode_,v)}}isIndexed(c){return c===Wi||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const v=c;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const S=this.getIterator(Nr),B=v.getIterator(Nr);let Q=S.getNext(),_e=B.getNext();for(;Q&&_e;){if(Q.name!==_e.name||!Q.node.equals(_e.node))return!1;Q=S.getNext(),_e=B.getNext()}return null===Q&&null===_e}return!1}return!1}}resolveIndex_(c){return c===Wi?null:this.indexMap_.get(c.toString())}}return p.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,p})();const $=new class ue extends V{constructor(){super(new $r(hs),V.EMPTY_NODE,uo.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return V.EMPTY_NODE}isEmpty(){return!1}};function Oe(p,u=null){if(null===p)return V.EMPTY_NODE;if("object"==typeof p&&".priority"in p&&(u=p[".priority"]),(0,re.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof p&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!=typeof p||".sv"in p)return new _s(p,Oe(u));if(p instanceof Array){let c=V.EMPTY_NODE;return un(p,(v,S)=>{if((0,re.r3)(p,v)&&"."!==v.substring(0,1)){const B=Oe(S);(B.isLeafNode()||!B.isEmpty())&&(c=c.updateImmediateChild(v,B))}}),c.updatePriority(Oe(u))}{const c=[];let v=!1;if(un(p,(Q,_e)=>{if("."!==Q.substring(0,1)){const ke=Oe(_e);ke.isEmpty()||(v=v||!ke.getPriority().isEmpty(),c.push(new Ir(Q,ke)))}}),0===c.length)return V.EMPTY_NODE;const B=_i(c,ko,Q=>Q.name,hs);if(v){const Q=_i(c,Nr.getCompare());return new V(B,Oe(u),new uo({".priority":Q},{".priority":Nr}))}return new V(B,Oe(u),uo.Default)}}Object.defineProperties(Ir,{MIN:{value:new Ir(_n,V.EMPTY_NODE)},MAX:{value:new Ir(Fn,$)}}),Oo.__EMPTY_NODE=V.EMPTY_NODE,_s.__childrenNodeConstructor=V,function fs(p){zi=p}($),function vs(p){Ki=p}($),function di(p){Ro=p}(Oe);class Pt extends xs{constructor(u){super(),this.indexPath_=u,(0,re.hu)(!kt(u)&&".priority"!==tr(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const v=this.extractChild(u.node),S=this.extractChild(c.node),B=v.compareTo(S);return 0===B?ln(u.name,c.name):B}makePost(u,c){const v=Oe(u),S=V.EMPTY_NODE.updateChild(this.indexPath_,v);return new Ir(c,S)}maxPost(){const u=V.EMPTY_NODE.updateChild(this.indexPath_,$);return new Ir(Fn,u)}toString(){return Ze(this.indexPath_,0).join("/")}}const Dn=new class zt extends xs{compare(u,c){const v=u.node.compareTo(c.node);return 0===v?ln(u.name,c.name):v}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return Ir.MIN}maxPost(){return Ir.MAX}makePost(u,c){const v=Oe(u);return new Ir(c,v)}toString(){return".value"}};function Yn(p){return{type:"value",snapshotNode:p}}function Rr(p,u){return{type:"child_added",snapshotNode:u,childName:p}}function fr(p,u){return{type:"child_removed",snapshotNode:u,childName:p}}function vr(p,u,c){return{type:"child_changed",snapshotNode:u,childName:p,oldSnap:c}}class gi{constructor(u){this.index_=u}updateChild(u,c,v,S,B,Q){(0,re.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const _e=u.getImmediateChild(c);return _e.getChild(S).equals(v.getChild(S))&&_e.isEmpty()===v.isEmpty()||(null!=Q&&(v.isEmpty()?u.hasChild(c)?Q.trackChildChange(fr(c,_e)):(0,re.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):_e.isEmpty()?Q.trackChildChange(Rr(c,v)):Q.trackChildChange(vr(c,v,_e))),u.isLeafNode()&&v.isEmpty())?u:u.updateImmediateChild(c,v).withIndex(this.index_)}updateFullNode(u,c,v){return null!=v&&(u.isLeafNode()||u.forEachChild(Nr,(S,B)=>{c.hasChild(S)||v.trackChildChange(fr(S,B))}),c.isLeafNode()||c.forEachChild(Nr,(S,B)=>{if(u.hasChild(S)){const Q=u.getImmediateChild(S);Q.equals(B)||v.trackChildChange(vr(S,B,Q))}else v.trackChildChange(Rr(S,B))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?V.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ti{constructor(u){this.indexedFilter_=new gi(u.getIndex()),this.index_=u.getIndex(),this.startPost_=ti.getStartPost_(u),this.endPost_=ti.getEndPost_(u),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),u)<=0:this.index_.compare(this.getStartPost(),u)<0,v=this.endIsInclusive_?this.index_.compare(u,this.getEndPost())<=0:this.index_.compare(u,this.getEndPost())<0;return c&&v}updateChild(u,c,v,S,B,Q){return this.matches(new Ir(c,v))||(v=V.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,v,S,B,Q)}updateFullNode(u,c,v){c.isLeafNode()&&(c=V.EMPTY_NODE);let S=c.withIndex(this.index_);S=S.updatePriority(V.EMPTY_NODE);const B=this;return c.forEachChild(Nr,(Q,_e)=>{B.matches(new Ir(Q,_e))||(S=S.updateImmediateChild(Q,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,S,v)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class co{constructor(u){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=c=>{const v=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new ti(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft(),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}updateChild(u,c,v,S,B,Q){return this.rangedFilter_.matches(new Ir(c,v))||(v=V.EMPTY_NODE),u.getImmediateChild(c).equals(v)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,v,S,B,Q):this.fullLimitUpdateChild_(u,c,v,B,Q)}updateFullNode(u,c,v){let S;if(c.isLeafNode()||c.isEmpty())S=V.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let B;S=V.EMPTY_NODE.withIndex(this.index_),B=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let Q=0;for(;B.hasNext()&&Q<this.limit_;){const _e=B.getNext();if(this.withinDirectionalStart(_e)){if(!this.withinDirectionalEnd(_e))break;S=S.updateImmediateChild(_e.name,_e.node),Q++}}}else{let B;S=c.withIndex(this.index_),S=S.updatePriority(V.EMPTY_NODE),B=this.reverse_?S.getReverseIterator(this.index_):S.getIterator(this.index_);let Q=0;for(;B.hasNext();){const _e=B.getNext();Q<this.limit_&&this.withinDirectionalStart(_e)&&this.withinDirectionalEnd(_e)?Q++:S=S.updateImmediateChild(_e.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,S,v)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,v,S,B){let Q;if(this.reverse_){const Wt=this.index_.getCompare();Q=(tn,Kn)=>Wt(Kn,tn)}else Q=this.index_.getCompare();const _e=u;(0,re.hu)(_e.numChildren()===this.limit_,"");const ke=new Ir(c,v),Ye=this.reverse_?_e.getFirstChild(this.index_):_e.getLastChild(this.index_),Rt=this.rangedFilter_.matches(ke);if(_e.hasChild(c)){const Wt=_e.getImmediateChild(c);let tn=S.getChildAfterChild(this.index_,Ye,this.reverse_);for(;null!=tn&&(tn.name===c||_e.hasChild(tn.name));)tn=S.getChildAfterChild(this.index_,tn,this.reverse_);const Kn=null==tn?1:Q(tn,ke);if(Rt&&!v.isEmpty()&&Kn>=0)return null!=B&&B.trackChildChange(vr(c,v,Wt)),_e.updateImmediateChild(c,v);{null!=B&&B.trackChildChange(fr(c,Wt));const Lr=_e.updateImmediateChild(c,V.EMPTY_NODE);return null!=tn&&this.rangedFilter_.matches(tn)?(null!=B&&B.trackChildChange(Rr(tn.name,tn.node)),Lr.updateImmediateChild(tn.name,tn.node)):Lr}}return v.isEmpty()?u:Rt&&Q(Ye,ke)>=0?(null!=B&&(B.trackChildChange(fr(Ye.name,Ye.node)),B.trackChildChange(Rr(c,v))),_e.updateImmediateChild(c,v).updateImmediateChild(Ye.name,V.EMPTY_NODE)):u}}class Ci{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_n}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nr}copy(){const u=new Ci;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.startAfterSet_=this.startAfterSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.endBeforeSet_=this.endBeforeSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function ho(p,u,c){const v=p.copy();return v.startSet_=!0,void 0===u&&(u=null),v.indexStartValue_=u,null!=c?(v.startNameSet_=!0,v.indexStartName_=c):(v.startNameSet_=!1,v.indexStartName_=""),v}function K(p,u,c){const v=p.copy();return v.endSet_=!0,void 0===u&&(u=null),v.indexEndValue_=u,void 0!==c?(v.endNameSet_=!0,v.indexEndName_=c):(v.endNameSet_=!1,v.indexEndName_=""),v}function F(p,u){const c=p.copy();return c.index_=u,c}function ce(p){const u={};if(p.isDefault())return u;let c;if(p.index_===Nr?c="$priority":p.index_===Dn?c="$value":p.index_===Wi?c="$key":((0,re.hu)(p.index_ instanceof Pt,"Unrecognized index type!"),c=p.index_.toString()),u.orderBy=(0,re.Wl)(c),p.startSet_){const v=p.startAfterSet_?"startAfter":"startAt";u[v]=(0,re.Wl)(p.indexStartValue_),p.startNameSet_&&(u[v]+=","+(0,re.Wl)(p.indexStartName_))}if(p.endSet_){const v=p.endBeforeSet_?"endBefore":"endAt";u[v]=(0,re.Wl)(p.indexEndValue_),p.endNameSet_&&(u[v]+=","+(0,re.Wl)(p.indexEndName_))}return p.limitSet_&&(p.isViewFromLeft()?u.limitToFirst=p.limit_:u.limitToLast=p.limit_),u}function Le(p){const u={};if(p.startSet_&&(u.sp=p.indexStartValue_,p.startNameSet_&&(u.sn=p.indexStartName_),u.sin=!p.startAfterSet_),p.endSet_&&(u.ep=p.indexEndValue_,p.endNameSet_&&(u.en=p.indexEndName_),u.ein=!p.endBeforeSet_),p.limitSet_){u.l=p.limit_;let c=p.viewFrom_;""===c&&(c=p.isViewFromLeft()?"l":"r"),u.vf=c}return p.index_!==Nr&&(u.i=p.index_.toString()),u}class Jt extends Rs{constructor(u,c,v,S){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=v,this.appCheckTokenProvider_=S,this.log_=Qe("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,re.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,v,S){const B=u._path.toString();this.log_("Listen called for "+B+" "+u._queryIdentifier);const Q=Jt.getListenId_(u,v),_e={};this.listens_[Q]=_e;const ke=ce(u._queryParams);this.restRequest_(B+".json",ke,(Ye,Rt)=>{let Wt=Rt;if(404===Ye&&(Wt=null,Ye=null),null===Ye&&this.onDataUpdate_(B,Wt,!1,v),(0,re.DV)(this.listens_,Q)===_e){let tn;tn=Ye?401===Ye?"permission_denied":"rest_error:"+Ye:"ok",S(tn,null)}})}unlisten(u,c){const v=Jt.getListenId_(u,c);delete this.listens_[v]}get(u){const c=ce(u._queryParams),v=u._path.toString(),S=new re.BH;return this.restRequest_(v+".json",c,(B,Q)=>{let _e=Q;404===B&&(_e=null,B=null),null===B?(this.onDataUpdate_(v,_e,!1,null),S.resolve(_e)):S.reject(new Error(_e))}),S.promise}refreshAuthToken(u){}restRequest_(u,c={},v){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([S,B])=>{S&&S.accessToken&&(c.auth=S.accessToken),B&&B.token&&(c.ac=B.token);const Q=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,re.xO)(c);this.log_("Sending REST request for "+Q);const _e=new XMLHttpRequest;_e.onreadystatechange=()=>{if(v&&4===_e.readyState){this.log_("REST Response for "+Q+" received. status:",_e.status,"response:",_e.responseText);let ke=null;if(_e.status>=200&&_e.status<300){try{ke=(0,re.cI)(_e.responseText)}catch(Ye){be("Failed to parse JSON response for "+Q+": "+_e.responseText)}v(null,ke)}else 401!==_e.status&&404!==_e.status&&be("Got unsuccessful REST response for "+Q+" Status: "+_e.status),v(_e.status);v=null}},_e.open("GET",Q,!0),_e.send()})}}class qr{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function W(){return{value:null,children:new Map}}function q(p,u,c){if(kt(u))p.value=c,p.children.clear();else if(null!==p.value)p.value=p.value.updateChild(u,c);else{const v=tr(u);p.children.has(v)||p.children.set(v,W()),q(p.children.get(v),u=hr(u),c)}}function pe(p,u){if(kt(u))return p.value=null,p.children.clear(),!0;if(null!==p.value){if(p.value.isLeafNode())return!1;{const c=p.value;return p.value=null,c.forEachChild(Nr,(v,S)=>{q(p,new Cr(v),S)}),pe(p,u)}}if(p.children.size>0){const c=tr(u);return u=hr(u),p.children.has(c)&&pe(p.children.get(c),u)&&p.children.delete(c),0===p.children.size}return!0}function De(p,u,c){null!==p.value?c(u,p.value):function ze(p,u){p.children.forEach((c,v)=>{u(v,c)})}(p,(v,S)=>{De(S,new Cr(u.toString()+"/"+v),c)})}class vt{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&un(this.last_,(v,S)=>{c[v]=c[v]-S}),this.last_=u,c}}class Jn{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new vt(u);const v=1e4+2e4*Math.random();Nn(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const u=this.statsListener_.get(),c={};let v=!1;un(u,(S,B)=>{B>0&&(0,re.r3)(this.statsToReport_,S)&&(c[S]=B,v=!0)}),v&&this.server_.reportStats(c),Nn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Bn=(()=>{return(p=Bn||(Bn={}))[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Bn;var p})();function hi(p){return{fromUser:!1,fromServer:!0,queryId:p,tagged:!0}}class ri{constructor(u,c,v){this.path=u,this.affectedTree=c,this.revert=v,this.type=Bn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(kt(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Cr(u));return new ri(mn(),c,this.revert)}}return(0,re.hu)(tr(this.path)===u,"operationForChild called for unrelated child."),new ri(hr(this.path),this.affectedTree,this.revert)}}class Fi{constructor(u,c){this.source=u,this.path=c,this.type=Bn.LISTEN_COMPLETE}operationForChild(u){return kt(this.path)?new Fi(this.source,mn()):new Fi(this.source,hr(this.path))}}class oi{constructor(u,c,v){this.source=u,this.path=c,this.snap=v,this.type=Bn.OVERWRITE}operationForChild(u){return kt(this.path)?new oi(this.source,mn(),this.snap.getImmediateChild(u)):new oi(this.source,hr(this.path),this.snap)}}class Yi{constructor(u,c,v){this.source=u,this.path=c,this.children=v,this.type=Bn.MERGE}operationForChild(u){if(kt(this.path)){const c=this.children.subtree(new Cr(u));return c.isEmpty()?null:c.value?new oi(this.source,mn(),c.value):new Yi(this.source,mn(),c)}return(0,re.hu)(tr(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Yi(this.source,hr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ns{constructor(u,c,v){this.node_=u,this.fullyInitialized_=c,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(kt(u))return this.isFullyInitialized()&&!this.filtered_;const c=tr(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Li{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function Ns(p,u,c,v,S,B){const Q=v.filter(_e=>_e.type===c);Q.sort((_e,ke)=>function da(p,u,c){if(null==u.childName||null==c.childName)throw(0,re.g5)("Should only compare child_ events.");const v=new Ir(u.childName,u.snapshotNode),S=new Ir(c.childName,c.snapshotNode);return p.index_.compare(v,S)}(p,_e,ke)),Q.forEach(_e=>{const ke=function Eo(p,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,p.index_)),u}(p,_e,B);S.forEach(Ye=>{Ye.respondsTo(_e.type)&&u.push(Ye.createEvent(ke,p.query_))})})}function js(p,u){return{eventCache:p,serverCache:u}}function fo(p,u,c,v){return js(new ns(u,c,v),p.serverCache)}function as(p,u,c,v){return js(p.eventCache,new ns(u,c,v))}function nl(p){return p.eventCache.isFullyInitialized()?p.eventCache.getNode():null}function wo(p){return p.serverCache.isFullyInitialized()?p.serverCache.getNode():null}let Ta;class mi{constructor(u,c=(()=>(Ta||(Ta=new $r(rn)),Ta))()){this.value=u,this.children=c}static fromObject(u){let c=new mi(null);return un(u,(v,S)=>{c=c.set(new Cr(v),S)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:mn(),value:this.value};if(kt(u))return null;{const v=tr(u),S=this.children.get(v);if(null!==S){const B=S.findRootMostMatchingPathAndValue(hr(u),c);return null!=B?{path:mt(new Cr(v),B.path),value:B.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(kt(u))return this;{const c=tr(u),v=this.children.get(c);return null!==v?v.subtree(hr(u)):new mi(null)}}set(u,c){if(kt(u))return new mi(c,this.children);{const v=tr(u),B=(this.children.get(v)||new mi(null)).set(hr(u),c),Q=this.children.insert(v,B);return new mi(this.value,Q)}}remove(u){if(kt(u))return this.children.isEmpty()?new mi(null):new mi(null,this.children);{const c=tr(u),v=this.children.get(c);if(v){const S=v.remove(hr(u));let B;return B=S.isEmpty()?this.children.remove(c):this.children.insert(c,S),null===this.value&&B.isEmpty()?new mi(null):new mi(this.value,B)}return this}}get(u){if(kt(u))return this.value;{const c=tr(u),v=this.children.get(c);return v?v.get(hr(u)):null}}setTree(u,c){if(kt(u))return c;{const v=tr(u),B=(this.children.get(v)||new mi(null)).setTree(hr(u),c);let Q;return Q=B.isEmpty()?this.children.remove(v):this.children.insert(v,B),new mi(this.value,Q)}}fold(u){return this.fold_(mn(),u)}fold_(u,c){const v={};return this.children.inorderTraversal((S,B)=>{v[S]=B.fold_(mt(u,S),c)}),c(u,this.value,v)}findOnPath(u,c){return this.findOnPath_(u,mn(),c)}findOnPath_(u,c,v){const S=!!this.value&&v(c,this.value);if(S)return S;if(kt(u))return null;{const B=tr(u),Q=this.children.get(B);return Q?Q.findOnPath_(hr(u),mt(c,B),v):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,mn(),c)}foreachOnPath_(u,c,v){if(kt(u))return this;{this.value&&v(c,this.value);const S=tr(u),B=this.children.get(S);return B?B.foreachOnPath_(hr(u),mt(c,S),v):new mi(null)}}foreach(u){this.foreach_(mn(),u)}foreach_(u,c){this.children.inorderTraversal((v,S)=>{S.foreach_(mt(u,v),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,v)=>{v.value&&u(c,v.value)})}}class eo{constructor(u){this.writeTree_=u}static empty(){return new eo(new mi(null))}}function ls(p,u,c){if(kt(u))return new eo(new mi(c));{const v=p.writeTree_.findRootMostValueAndPath(u);if(null!=v){const S=v.path;let B=v.value;const Q=Tn(S,u);return B=B.updateChild(Q,c),new eo(p.writeTree_.set(S,B))}{const S=new mi(c),B=p.writeTree_.setTree(u,S);return new eo(B)}}}function Es(p,u,c){let v=p;return un(c,(S,B)=>{v=ls(v,mt(u,S),B)}),v}function Ri(p,u){if(kt(u))return eo.empty();{const c=p.writeTree_.setTree(u,new mi(null));return new eo(c)}}function ba(p,u){return null!=ha(p,u)}function ha(p,u){const c=p.writeTree_.findRootMostValueAndPath(u);return null!=c?p.writeTree_.get(c.path).getChild(Tn(c.path,u)):null}function gl(p){const u=[],c=p.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Nr,(v,S)=>{u.push(new Ir(v,S))}):p.writeTree_.children.inorderTraversal((v,S)=>{null!=S.value&&u.push(new Ir(v,S.value))}),u}function Mo(p,u){if(kt(u))return p;{const c=ha(p,u);return new eo(null!=c?new mi(c):p.writeTree_.subtree(u))}}function Hs(p){return p.writeTree_.isEmpty()}function zo(p,u){return ta(mn(),p.writeTree_,u)}function ta(p,u,c){if(null!=u.value)return c.updateChild(p,u.value);{let v=null;return u.children.inorderTraversal((S,B)=>{".priority"===S?((0,re.hu)(null!==B.value,"Priority writes must always be leaf nodes"),v=B.value):c=ta(mt(p,S),B,c)}),!c.getChild(p).isEmpty()&&null!==v&&(c=c.updateChild(mt(p,".priority"),v)),c}}function Co(p,u){return za(u,p)}function Ko(p,u){if(p.snap)return nr(p.path,u);for(const c in p.children)if(p.children.hasOwnProperty(c)&&nr(mt(p.path,c),u))return!0;return!1}function Lo(p){return p.visible}function rl(p,u,c){let v=eo.empty();for(let S=0;S<p.length;++S){const B=p[S];if(u(B)){const Q=B.path;let _e;if(B.snap)nr(c,Q)?(_e=Tn(c,Q),v=ls(v,_e,B.snap)):nr(Q,c)&&(_e=Tn(Q,c),v=ls(v,mn(),B.snap.getChild(_e)));else{if(!B.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(nr(c,Q))_e=Tn(c,Q),v=Es(v,_e,B.children);else if(nr(Q,c))if(_e=Tn(Q,c),kt(_e))v=Es(v,mn(),B.children);else{const ke=(0,re.DV)(B.children,tr(_e));if(ke){const Ye=ke.getChild(hr(_e));v=ls(v,mn(),Ye)}}}}}return v}function na(p,u,c,v,S){if(v||S){const B=Mo(p.visibleWrites,u);return!S&&Hs(B)?c:S||null!=c||ba(B,mn())?zo(rl(p.allWrites,function(Ye){return(Ye.visible||S)&&(!v||!~v.indexOf(Ye.writeId))&&(nr(Ye.path,u)||nr(u,Ye.path))},u),c||V.EMPTY_NODE):null}{const B=ha(p.visibleWrites,u);if(null!=B)return B;{const Q=Mo(p.visibleWrites,u);return Hs(Q)?c:null!=c||ba(Q,mn())?zo(Q,c||V.EMPTY_NODE):null}}}function ra(p,u,c,v){return na(p.writeTree,p.treePath,u,c,v)}function Zo(p,u){return function Da(p,u,c){let v=V.EMPTY_NODE;const S=ha(p.visibleWrites,u);if(S)return S.isLeafNode()||S.forEachChild(Nr,(B,Q)=>{v=v.updateImmediateChild(B,Q)}),v;if(c){const B=Mo(p.visibleWrites,u);return c.forEachChild(Nr,(Q,_e)=>{const ke=zo(Mo(B,new Cr(Q)),_e);v=v.updateImmediateChild(Q,ke)}),gl(B).forEach(Q=>{v=v.updateImmediateChild(Q.name,Q.node)}),v}return gl(Mo(p.visibleWrites,u)).forEach(Q=>{v=v.updateImmediateChild(Q.name,Q.node)}),v}(p.writeTree,p.treePath,u)}function Os(p,u,c,v){return function yl(p,u,c,v,S){(0,re.hu)(v||S,"Either existingEventSnap or existingServerSnap must exist");const B=mt(u,c);if(ba(p.visibleWrites,B))return null;{const Q=Mo(p.visibleWrites,B);return Hs(Q)?S.getChild(c):zo(Q,S.getChild(c))}}(p.writeTree,p.treePath,u,c,v)}function Yo(p,u){return function qo(p,u){return ha(p.visibleWrites,u)}(p.writeTree,mt(p.treePath,u))}function Ss(p,u,c){return function Al(p,u,c,v){const S=mt(u,c),B=ha(p.visibleWrites,S);return null!=B?B:v.isCompleteForChild(c)?zo(Mo(p.visibleWrites,S),v.getNode().getImmediateChild(c)):null}(p.writeTree,p.treePath,u,c)}function Rl(p,u){return za(mt(p.treePath,u),p.writeTree)}function za(p,u){return{treePath:p,writeTree:u}}class Sa{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,v=u.childName;(0,re.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const S=this.changeMap.get(v);if(S){const B=S.type;if("child_added"===c&&"child_removed"===B)this.changeMap.set(v,vr(v,u.snapshotNode,S.snapshotNode));else if("child_removed"===c&&"child_added"===B)this.changeMap.delete(v);else if("child_removed"===c&&"child_changed"===B)this.changeMap.set(v,fr(v,S.oldSnap));else if("child_changed"===c&&"child_added"===B)this.changeMap.set(v,Rr(v,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==B)throw(0,re.g5)("Illegal combination of changes: "+u+" occurred after "+S);this.changeMap.set(v,vr(v,u.snapshotNode,S.oldSnap))}}else this.changeMap.set(v,u)}getChanges(){return Array.from(this.changeMap.values())}}const xl=new class Ml{getCompleteChild(u){return null}getChildAfterChild(u,c,v){return null}};class Io{constructor(u,c,v=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=v}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const v=null!=this.optCompleteServerCache_?new ns(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ss(this.writes_,u,v)}}getChildAfterChild(u,c,v){const S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wo(this.viewCache_),B=function no(p,u,c,v,S,B){return function fa(p,u,c,v,S,B,Q){let _e;const ke=Mo(p.visibleWrites,u),Ye=ha(ke,mn());if(null!=Ye)_e=Ye;else{if(null==c)return[];_e=zo(ke,c)}if(_e=_e.withIndex(Q),_e.isEmpty()||_e.isLeafNode())return[];{const Rt=[],Wt=Q.getCompare(),tn=B?_e.getReverseIteratorFrom(v,Q):_e.getIteratorFrom(v,Q);let Kn=tn.getNext();for(;Kn&&Rt.length<S;)0!==Wt(Kn,v)&&Rt.push(Kn),Kn=tn.getNext();return Rt}}(p.writeTree,p.treePath,u,c,v,S,B)}(this.writes_,S,c,1,v,u);return 0===B.length?null:B[0]}}function pa(p,u,c,v,S,B){const Q=u.eventCache;if(null!=Yo(v,c))return u;{let _e,ke;if(kt(c))if((0,re.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ye=wo(u),Wt=Zo(v,Ye instanceof V?Ye:V.EMPTY_NODE);_e=p.filter.updateFullNode(u.eventCache.getNode(),Wt,B)}else{const Ye=ra(v,wo(u));_e=p.filter.updateFullNode(u.eventCache.getNode(),Ye,B)}else{const Ye=tr(c);if(".priority"===Ye){(0,re.hu)(1===ts(c),"Can't have a priority with additional path components");const Rt=Q.getNode();ke=u.serverCache.getNode();const Wt=Os(v,c,Rt,ke);_e=null!=Wt?p.filter.updatePriority(Rt,Wt):Q.getNode()}else{const Rt=hr(c);let Wt;if(Q.isCompleteForChild(Ye)){ke=u.serverCache.getNode();const tn=Os(v,c,Q.getNode(),ke);Wt=null!=tn?Q.getNode().getImmediateChild(Ye).updateChild(Rt,tn):Q.getNode().getImmediateChild(Ye)}else Wt=Ss(v,Ye,u.serverCache);_e=null!=Wt?p.filter.updateChild(Q.getNode(),Ye,Wt,Rt,S,B):Q.getNode()}}return fo(u,_e,Q.isFullyInitialized()||kt(c),p.filter.filtersNodes())}}function P(p,u,c,v,S,B,Q,_e){const ke=u.serverCache;let Ye;const Rt=Q?p.filter:p.filter.getIndexedFilter();if(kt(c))Ye=Rt.updateFullNode(ke.getNode(),v,null);else if(Rt.filtersNodes()&&!ke.isFiltered()){const Kn=ke.getNode().updateChild(c,v);Ye=Rt.updateFullNode(ke.getNode(),Kn,null)}else{const Kn=tr(c);if(!ke.isCompleteForPath(c)&&ts(c)>1)return u;const Dr=hr(c),Vr=ke.getNode().getImmediateChild(Kn).updateChild(Dr,v);Ye=".priority"===Kn?Rt.updatePriority(ke.getNode(),Vr):Rt.updateChild(ke.getNode(),Kn,Vr,Dr,xl,null)}const Wt=as(u,Ye,ke.isFullyInitialized()||kt(c),Rt.filtersNodes());return pa(p,Wt,c,S,new Io(S,Wt,B),_e)}function D(p,u,c,v,S,B,Q){const _e=u.eventCache;let ke,Ye;const Rt=new Io(S,u,B);if(kt(c))Ye=p.filter.updateFullNode(u.eventCache.getNode(),v,Q),ke=fo(u,Ye,!0,p.filter.filtersNodes());else{const Wt=tr(c);if(".priority"===Wt)Ye=p.filter.updatePriority(u.eventCache.getNode(),v),ke=fo(u,Ye,_e.isFullyInitialized(),_e.isFiltered());else{const tn=hr(c),Kn=_e.getNode().getImmediateChild(Wt);let Dr;if(kt(tn))Dr=v;else{const Lr=Rt.getCompleteChild(Wt);Dr=null!=Lr?".priority"===Zr(tn)&&Lr.getChild(lt(tn)).isEmpty()?Lr:Lr.updateChild(tn,v):V.EMPTY_NODE}ke=Kn.equals(Dr)?u:fo(u,p.filter.updateChild(_e.getNode(),Wt,Dr,tn,Rt,Q),_e.isFullyInitialized(),p.filter.filtersNodes())}}return ke}function T(p,u){return p.eventCache.isCompleteForChild(u)}function J(p,u,c){return c.foreach((v,S)=>{u=u.updateChild(v,S)}),u}function de(p,u,c,v,S,B,Q,_e){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ye,ke=u;Ye=kt(c)?v:new mi(null).setTree(c,v);const Rt=u.serverCache.getNode();return Ye.children.inorderTraversal((Wt,tn)=>{if(Rt.hasChild(Wt)){const Dr=J(0,u.serverCache.getNode().getImmediateChild(Wt),tn);ke=P(p,ke,new Cr(Wt),Dr,S,B,Q,_e)}}),Ye.children.inorderTraversal((Wt,tn)=>{const Kn=!u.serverCache.isCompleteForChild(Wt)&&null===tn.value;if(!Rt.hasChild(Wt)&&!Kn){const Lr=J(0,u.serverCache.getNode().getImmediateChild(Wt),tn);ke=P(p,ke,new Cr(Wt),Lr,S,B,Q,_e)}}),ke}class yn{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const v=this.query_._queryParams,S=new gi(v.getIndex()),B=function Qn(p){return p.loadsAllData()?new gi(p.getIndex()):p.hasLimit()?new co(p):new ti(p)}(v);this.processor_=function Wl(p){return{filter:p}}(B);const Q=c.serverCache,_e=c.eventCache,ke=S.updateFullNode(V.EMPTY_NODE,Q.getNode(),null),Ye=B.updateFullNode(V.EMPTY_NODE,_e.getNode(),null),Rt=new ns(ke,Q.isFullyInitialized(),S.filtersNodes()),Wt=new ns(Ye,_e.isFullyInitialized(),B.filtersNodes());this.viewCache_=js(Wt,Rt),this.eventGenerator_=new Li(this.query_)}get query(){return this.query_}}function xi(p,u){const c=wo(p.viewCache_);return c&&(p.query._queryParams.loadsAllData()||!kt(u)&&!c.getImmediateChild(tr(u)).isEmpty())?c.getChild(u):null}function en(p){return 0===p.eventRegistrations_.length}function jt(p,u,c){const v=[];if(c){(0,re.hu)(null==u,"A cancel should cancel all event registrations.");const S=p.query._path;p.eventRegistrations_.forEach(B=>{const Q=B.createCancelEvent(c,S);Q&&v.push(Q)})}if(u){let S=[];for(let B=0;B<p.eventRegistrations_.length;++B){const Q=p.eventRegistrations_[B];if(Q.matches(u)){if(u.hasAnyCallback()){S=S.concat(p.eventRegistrations_.slice(B+1));break}}else S.push(Q)}p.eventRegistrations_=S}else p.eventRegistrations_=[];return v}function Fr(p,u,c,v){u.type===Bn.MERGE&&null!==u.source.queryId&&((0,re.hu)(wo(p.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(nl(p.viewCache_),"Missing event cache, even though we have a server cache"));const S=p.viewCache_,B=function _l(p,u,c,v,S){const B=new Sa;let Q,_e;if(c.type===Bn.OVERWRITE){const Ye=c;Ye.source.fromUser?Q=D(p,u,Ye.path,Ye.snap,v,S,B):((0,re.hu)(Ye.source.fromServer,"Unknown source."),_e=Ye.source.tagged||u.serverCache.isFiltered()&&!kt(Ye.path),Q=P(p,u,Ye.path,Ye.snap,v,S,_e,B))}else if(c.type===Bn.MERGE){const Ye=c;Ye.source.fromUser?Q=function H(p,u,c,v,S,B,Q){let _e=u;return v.foreach((ke,Ye)=>{const Rt=mt(c,ke);T(u,tr(Rt))&&(_e=D(p,_e,Rt,Ye,S,B,Q))}),v.foreach((ke,Ye)=>{const Rt=mt(c,ke);T(u,tr(Rt))||(_e=D(p,_e,Rt,Ye,S,B,Q))}),_e}(p,u,Ye.path,Ye.children,v,S,B):((0,re.hu)(Ye.source.fromServer,"Unknown source."),_e=Ye.source.tagged||u.serverCache.isFiltered(),Q=de(p,u,Ye.path,Ye.children,v,S,_e,B))}else if(c.type===Bn.ACK_USER_WRITE){const Ye=c;Q=Ye.revert?function Ft(p,u,c,v,S,B){let Q;if(null!=Yo(v,c))return u;{const _e=new Io(v,u,S),ke=u.eventCache.getNode();let Ye;if(kt(c)||".priority"===tr(c)){let Rt;if(u.serverCache.isFullyInitialized())Rt=ra(v,wo(u));else{const Wt=u.serverCache.getNode();(0,re.hu)(Wt instanceof V,"serverChildren would be complete if leaf node"),Rt=Zo(v,Wt)}Ye=p.filter.updateFullNode(ke,Rt,B)}else{const Rt=tr(c);let Wt=Ss(v,Rt,u.serverCache);null==Wt&&u.serverCache.isCompleteForChild(Rt)&&(Wt=ke.getImmediateChild(Rt)),Ye=null!=Wt?p.filter.updateChild(ke,Rt,Wt,hr(c),_e,B):u.eventCache.getNode().hasChild(Rt)?p.filter.updateChild(ke,Rt,V.EMPTY_NODE,hr(c),_e,B):ke,Ye.isEmpty()&&u.serverCache.isFullyInitialized()&&(Q=ra(v,wo(u)),Q.isLeafNode()&&(Ye=p.filter.updateFullNode(Ye,Q,B)))}return Q=u.serverCache.isFullyInitialized()||null!=Yo(v,mn()),fo(u,Ye,Q,p.filter.filtersNodes())}}(p,u,Ye.path,v,S,B):function fe(p,u,c,v,S,B,Q){if(null!=Yo(S,c))return u;const _e=u.serverCache.isFiltered(),ke=u.serverCache;if(null!=v.value){if(kt(c)&&ke.isFullyInitialized()||ke.isCompleteForPath(c))return P(p,u,c,ke.getNode().getChild(c),S,B,_e,Q);if(kt(c)){let Ye=new mi(null);return ke.getNode().forEachChild(Wi,(Rt,Wt)=>{Ye=Ye.set(new Cr(Rt),Wt)}),de(p,u,c,Ye,S,B,_e,Q)}return u}{let Ye=new mi(null);return v.foreach((Rt,Wt)=>{const tn=mt(c,Rt);ke.isCompleteForPath(tn)&&(Ye=Ye.set(Rt,ke.getNode().getChild(tn)))}),de(p,u,c,Ye,S,B,_e,Q)}}(p,u,Ye.path,Ye.affectedTree,v,S,B)}else{if(c.type!==Bn.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+c.type);Q=function Ve(p,u,c,v,S){const B=u.serverCache;return pa(p,as(u,B.getNode(),B.isFullyInitialized()||kt(c),B.isFiltered()),c,v,xl,S)}(p,u,c.path,v,B)}const ke=B.getChanges();return function vl(p,u,c){const v=u.eventCache;if(v.isFullyInitialized()){const S=v.getNode().isLeafNode()||v.getNode().isEmpty(),B=nl(p);(c.length>0||!p.eventCache.isFullyInitialized()||S&&!v.getNode().equals(B)||!v.getNode().getPriority().equals(B.getPriority()))&&c.push(Yn(nl(u)))}}(u,Q,ke),{viewCache:Q,changes:ke}}(p.processor_,S,u,c,v);return function Aa(p,u){(0,re.hu)(u.eventCache.getNode().isIndexed(p.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(u.serverCache.getNode().isIndexed(p.filter.getIndex()),"Server snap not indexed")}(p.processor_,B.viewCache),(0,re.hu)(B.viewCache.serverCache.isFullyInitialized()||!S.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),p.viewCache_=B.viewCache,Qi(p,B.changes,B.viewCache.eventCache.getNode(),null)}function Qi(p,u,c,v){return function Bi(p,u,c,v){const S=[],B=[];return u.forEach(Q=>{"child_changed"===Q.type&&p.index_.indexedValueChanged(Q.oldSnap,Q.snapshotNode)&&B.push(function vi(p,u){return{type:"child_moved",snapshotNode:u,childName:p}}(Q.childName,Q.snapshotNode))}),Ns(p,S,"child_removed",u,v,c),Ns(p,S,"child_added",u,v,c),Ns(p,S,"child_moved",B,v,c),Ns(p,S,"child_changed",u,v,c),Ns(p,S,"value",u,v,c),S}(p.eventGenerator_,u,c,v?[v]:p.eventRegistrations_)}let ia,ii;class ga{constructor(){this.views=new Map}}function qa(p,u,c,v){const S=u.source.queryId;if(null!==S){const B=p.views.get(S);return(0,re.hu)(null!=B,"SyncTree gave us an op for an invalid query."),Fr(B,u,c,v)}{let B=[];for(const Q of p.views.values())B=B.concat(Fr(Q,u,c,v));return B}}function iu(p,u,c,v,S){const Q=p.views.get(u._queryIdentifier);if(!Q){let _e=ra(c,S?v:null),ke=!1;_e?ke=!0:v instanceof V?(_e=Zo(c,v),ke=!1):(_e=V.EMPTY_NODE,ke=!1);const Ye=js(new ns(_e,ke,!1),new ns(v,S,!1));return new yn(u,Ye)}return Q}function xr(p){const u=[];for(const c of p.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function Vo(p,u){let c=null;for(const v of p.views.values())c=c||xi(v,u);return c}function tc(p,u){return u._queryParams.loadsAllData()?Za(p):p.views.get(u._queryIdentifier)}function ws(p,u){return null!=tc(p,u)}function Gn(p){return null!=Za(p)}function Za(p){for(const u of p.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let fn=1;class Ra{constructor(u){this.listenProvider_=u,this.syncPointTree_=new mi(null),this.pendingWriteTree_=function Mi(){return{visibleWrites:eo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ma(p,u,c,v,S){return function ss(p,u,c,v,S){(0,re.hu)(v>p.lastWriteId,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),p.allWrites.push({path:u,snap:c,writeId:v,visible:S}),S&&(p.visibleWrites=ls(p.visibleWrites,u,c)),p.lastWriteId=v}(p.pendingWriteTree_,u,c,v,S),S?Pa(p,new oi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function xa(p,u,c=!1){const v=function ml(p,u){for(let c=0;c<p.allWrites.length;c++){const v=p.allWrites[c];if(v.writeId===u)return v}return null}(p.pendingWriteTree_,u);if(function ai(p,u){const c=p.allWrites.findIndex(_e=>_e.writeId===u);(0,re.hu)(c>=0,"removeWrite called with nonexistent writeId.");const v=p.allWrites[c];p.allWrites.splice(c,1);let S=v.visible,B=!1,Q=p.allWrites.length-1;for(;S&&Q>=0;){const _e=p.allWrites[Q];_e.visible&&(Q>=c&&Ko(_e,v.path)?S=!1:nr(v.path,_e.path)&&(B=!0)),Q--}return!!S&&(B?(function rs(p){p.visibleWrites=rl(p.allWrites,Lo,mn()),p.lastWriteId=p.allWrites.length>0?p.allWrites[p.allWrites.length-1].writeId:-1}(p),!0):(v.snap?p.visibleWrites=Ri(p.visibleWrites,v.path):un(v.children,ke=>{p.visibleWrites=Ri(p.visibleWrites,mt(v.path,ke))}),!0))}(p.pendingWriteTree_,u)){let B=new mi(null);return null!=v.snap?B=B.set(mn(),!0):un(v.children,Q=>{B=B.set(new Cr(Q),!0)}),Pa(p,new ri(v.path,B,c))}return[]}function ks(p,u,c){return Pa(p,new oi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function sl(p,u,c,v,S=!1){const B=u._path,Q=p.syncPointTree_.get(B);let _e=[];if(Q&&("default"===u._queryIdentifier||ws(Q,u))){const ke=function Ji(p,u,c,v){const S=u._queryIdentifier,B=[];let Q=[];const _e=Gn(p);if("default"===S)for(const[ke,Ye]of p.views.entries())Q=Q.concat(jt(Ye,c,v)),en(Ye)&&(p.views.delete(ke),Ye.query._queryParams.loadsAllData()||B.push(Ye.query));else{const ke=p.views.get(S);ke&&(Q=Q.concat(jt(ke,c,v)),en(ke)&&(p.views.delete(S),ke.query._queryParams.loadsAllData()||B.push(ke.query)))}return _e&&!Gn(p)&&B.push(new(function Tu(){return(0,re.hu)(ia,"Reference.ts has not been loaded"),ia}())(u._repo,u._path)),{removed:B,events:Q}}(Q,u,c,v);(function Pl(p){return 0===p.views.size})(Q)&&(p.syncPointTree_=p.syncPointTree_.remove(B));const Ye=ke.removed;if(_e=ke.events,!S){const Rt=-1!==Ye.findIndex(tn=>tn._queryParams.loadsAllData()),Wt=p.syncPointTree_.findOnPath(B,(tn,Kn)=>Gn(Kn));if(Rt&&!Wt){const tn=p.syncPointTree_.subtree(B);if(!tn.isEmpty()){const Kn=function nc(p){return p.fold((u,c,v)=>{if(c&&Gn(c))return[Za(c)];{let S=[];return c&&(S=xr(c)),un(v,(B,Q)=>{S=S.concat(Q)}),S}})}(tn);for(let Dr=0;Dr<Kn.length;++Dr){const Lr=Kn[Dr],Vr=Lr.query,uc=ro(p,Lr);p.listenProvider_.startListening(Oa(Vr),ql(p,Vr),uc.hashFn,uc.onComplete)}}}!Wt&&Ye.length>0&&!v&&(Rt?p.listenProvider_.stopListening(Oa(u),null):Ye.forEach(tn=>{const Kn=p.queryToTagMap.get(Na(tn));p.listenProvider_.stopListening(Oa(tn),Kn)}))}!function rc(p,u){for(let c=0;c<u.length;++c){const v=u[c];if(!v._queryParams.loadsAllData()){const S=Na(v),B=p.queryToTagMap.get(S);p.queryToTagMap.delete(S),p.tagToQueryMap.delete(B)}}}(p,Ye)}return _e}function To(p,u,c,v){const S=Qo(p,v);if(null!=S){const B=kl(S),Q=B.path,_e=B.queryId,ke=Tn(Q,u);return ma(p,Q,new oi(hi(_e),ke,c))}return[]}function Kl(p,u,c,v=!1){const S=u._path;let B=null,Q=!1;p.syncPointTree_.foreachOnPath(S,(tn,Kn)=>{const Dr=Tn(tn,S);B=B||Vo(Kn,Dr),Q=Q||Gn(Kn)});let ke,_e=p.syncPointTree_.get(S);_e?(Q=Q||Gn(_e),B=B||Vo(_e,mn())):(_e=new ga,p.syncPointTree_=p.syncPointTree_.set(S,_e)),null!=B?ke=!0:(ke=!1,B=V.EMPTY_NODE,p.syncPointTree_.subtree(S).foreachChild((Kn,Dr)=>{const Lr=Vo(Dr,mn());Lr&&(B=B.updateImmediateChild(Kn,Lr))}));const Ye=ws(_e,u);if(!Ye&&!u._queryParams.loadsAllData()){const tn=Na(u);(0,re.hu)(!p.queryToTagMap.has(tn),"View does not exist, but we have a tag");const Kn=function ka(){return fn++}();p.queryToTagMap.set(tn,Kn),p.tagToQueryMap.set(Kn,tn)}let Wt=function ec(p,u,c,v,S,B){const Q=iu(p,u,v,S,B);return p.views.has(u._queryIdentifier)||p.views.set(u._queryIdentifier,Q),function Dt(p,u){p.eventRegistrations_.push(u)}(Q,c),function il(p,u){const c=p.viewCache_.eventCache,v=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Nr,(B,Q)=>{v.push(Rr(B,Q))}),c.isFullyInitialized()&&v.push(Yn(c.getNode())),Qi(p,v,c.getNode(),u)}(Q,c)}(_e,u,c,Co(p.pendingWriteTree_,S),B,ke);if(!Ye&&!Q&&!v){const tn=tc(_e,u);Wt=Wt.concat(function po(p,u,c){const v=u._path,S=ql(p,u),B=ro(p,c),Q=p.listenProvider_.startListening(Oa(u),S,B.hashFn,B.onComplete),_e=p.syncPointTree_.subtree(v);if(S)(0,re.hu)(!Gn(_e.value),"If we're adding a query, it shouldn't be shadowed");else{const ke=_e.fold((Ye,Rt,Wt)=>{if(!kt(Ye)&&Rt&&Gn(Rt))return[Za(Rt).query];{let tn=[];return Rt&&(tn=tn.concat(xr(Rt).map(Kn=>Kn.query))),un(Wt,(Kn,Dr)=>{tn=tn.concat(Dr)}),tn}});for(let Ye=0;Ye<ke.length;++Ye){const Rt=ke[Ye];p.listenProvider_.stopListening(Oa(Rt),ql(p,Rt))}}return Q}(p,u,tn))}return Wt}function Du(p,u,c){const S=p.pendingWriteTree_,B=p.syncPointTree_.findOnPath(u,(Q,_e)=>{const Ye=Vo(_e,Tn(Q,u));if(Ye)return Ye});return na(S,u,B,c,!0)}function Pa(p,u){return pt(u,p.syncPointTree_,null,Co(p.pendingWriteTree_,mn()))}function pt(p,u,c,v){if(kt(p.path))return al(p,u,c,v);{const S=u.get(mn());null==c&&null!=S&&(c=Vo(S,mn()));let B=[];const Q=tr(p.path),_e=p.operationForChild(Q),ke=u.children.get(Q);if(ke&&_e){const Ye=c?c.getImmediateChild(Q):null,Rt=Rl(v,Q);B=B.concat(pt(_e,ke,Ye,Rt))}return S&&(B=B.concat(qa(S,p,v,c))),B}}function al(p,u,c,v){const S=u.get(mn());null==c&&null!=S&&(c=Vo(S,mn()));let B=[];return u.children.inorderTraversal((Q,_e)=>{const ke=c?c.getImmediateChild(Q):null,Ye=Rl(v,Q),Rt=p.operationForChild(Q);Rt&&(B=B.concat(al(Rt,_e,ke,Ye)))}),S&&(B=B.concat(qa(S,p,v,c))),B}function ro(p,u){const c=u.query,v=ql(p,c);return{hashFn:()=>(function Xt(p){return p.viewCache_.serverCache.getNode()}(u)||V.EMPTY_NODE).hash(),onComplete:S=>{if("ok"===S)return v?function Ol(p,u,c){const v=Qo(p,c);if(v){const S=kl(v),B=S.path,Q=S.queryId,_e=Tn(B,u);return ma(p,B,new Fi(hi(Q),_e))}return[]}(p,c._path,v):function zl(p,u){return Pa(p,new Fi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(p,c._path);{const B=function Re(p,u){let c="Unknown Error";"too_big"===p?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===p?c="Client doesn't have permission to access the desired data.":"unavailable"===p&&(c="The service is unavailable");const v=new Error(p+" at "+u._path.toString()+": "+c);return v.code=p.toUpperCase(),v}(S,c);return sl(p,c,null,B)}}}}function ql(p,u){const c=Na(u);return p.queryToTagMap.get(c)}function Na(p){return p._path.toString()+"$"+p._queryIdentifier}function Qo(p,u){return p.tagToQueryMap.get(u)}function kl(p){const u=p.indexOf("$");return(0,re.hu)(-1!==u&&u<p.length-1,"Bad queryKey."),{queryId:p.substr(u+1),path:new Cr(p.substr(0,u))}}function ma(p,u,c){const v=p.syncPointTree_.get(u);return(0,re.hu)(v,"Missing sync point for query tag that we're tracking"),qa(v,c,Co(p.pendingWriteTree_,u),null)}function Oa(p){return p._queryParams.loadsAllData()&&!p._queryParams.isDefault()?new(function gs(){return(0,re.hu)(ii,"Reference.ts has not been loaded"),ii}())(p._repo,p._path):p}class Uo{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new Uo(c)}node(){return this.node_}}class ya{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=mt(this.path_,u);return new ya(this.syncTree_,c)}node(){return Du(this.syncTree_,this.path_)}}const us=function(p,u,c){return p&&"object"==typeof p?((0,re.hu)(".sv"in p,"Unexpected leaf node or priority contents"),"string"==typeof p[".sv"]?Ou(p[".sv"],u,c):"object"==typeof p[".sv"]?ku(p[".sv"],u):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2))):p},Ou=function(p,u,c){if("timestamp"===p)return c.timestamp;(0,re.hu)(!1,"Unexpected server value: "+p)},ku=function(p,u,c){p.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2));const v=p.increment;"number"!=typeof v&&(0,re.hu)(!1,"Unexpected increment value: "+v);const S=u.node();if((0,re.hu)(null!=S,"Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return v;const Q=S.getValue();return"number"!=typeof Q?v:Q+v},$s=function(p,u,c,v){return au(u,new ya(c,p),v)},ll=function(p,u,c){return au(p,new Uo(u),c)};function au(p,u,c){const v=p.getPriority().val(),S=us(v,u.getImmediateChild(".priority"),c);let B;if(p.isLeafNode()){const Q=p,_e=us(Q.getValue(),u,c);return _e!==Q.getValue()||S!==Q.getPriority().val()?new _s(_e,Oe(S)):p}{const Q=p;return B=Q,S!==Q.getPriority().val()&&(B=B.updatePriority(new _s(S))),Q.forEachChild(Nr,(_e,ke)=>{const Ye=au(ke,u.getImmediateChild(_e),c);Ye!==ke&&(B=B.updateImmediateChild(_e,Ye))}),B}}class Qa{constructor(u="",c=null,v={children:{},childCount:0}){this.name=u,this.parent=c,this.node=v}}function lu(p,u){let c=u instanceof Cr?u:new Cr(u),v=p,S=tr(c);for(;null!==S;){const B=(0,re.DV)(v.node.children,S)||{children:{},childCount:0};v=new Qa(S,v,B),c=hr(c),S=tr(c)}return v}function El(p){return p.node.value}function Fs(p,u){p.node.value=u,Su(p)}function Fu(p){return p.node.childCount>0}function uu(p,u){un(p.node.children,(c,v)=>{u(new Qa(c,p,v))})}function cu(p,u,c,v){c&&!v&&u(p),uu(p,S=>{cu(S,u,!0,v)}),c&&v&&u(p)}function Zl(p){return new Cr(null===p.parent?p.name:Zl(p.parent)+"/"+p.name)}function Su(p){null!==p.parent&&function Lu(p,u,c){const v=function Fl(p){return void 0===El(p)&&!Fu(p)}(c),S=(0,re.r3)(p.node.children,u);v&&S?(delete p.node.children[u],p.node.childCount--,Su(p)):!v&&!S&&(p.node.children[u]=c.node,p.node.childCount++,Su(p))}(p.parent,p.name,p)}const hu=/[\[\].#$\/\u0000-\u001F\u007F]/,Vu=/[\[\].#$\u0000-\u001F\u007F]/,Ll=10485760,fu=function(p){return"string"==typeof p&&0!==p.length&&!hu.test(p)},pu=function(p){return"string"==typeof p&&0!==p.length&&!Vu.test(p)},ul=function(p){return null===p||"string"==typeof p||"number"==typeof p&&!Nt(p)||p&&"object"==typeof p&&(0,re.r3)(p,".sv")},_a=function(p,u,c,v){v&&void 0===u||Vl((0,re.gK)(p,"value"),u,c)},Vl=function(p,u,c){const v=c instanceof Cr?new Oi(c,p):c;if(void 0===u)throw new Error(p+"contains undefined "+Ai(v));if("function"==typeof u)throw new Error(p+"contains a function "+Ai(v)+" with contents = "+u.toString());if(Nt(u))throw new Error(p+"contains "+u.toString()+" "+Ai(v));if("string"==typeof u&&u.length>Ll/3&&(0,re.ug)(u)>Ll)throw new Error(p+"contains a string greater than "+Ll+" utf8 bytes "+Ai(v)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let S=!1,B=!1;if(un(u,(Q,_e)=>{if(".value"===Q)S=!0;else if(".priority"!==Q&&".sv"!==Q&&(B=!0,!fu(Q)))throw new Error(p+" contains an invalid key ("+Q+") "+Ai(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ds(p,u){p.parts_.length>0&&(p.byteLength_+=1),p.parts_.push(u),p.byteLength_+=(0,re.ug)(u),Vi(p)})(v,Q),Vl(p,_e,v),function ci(p){const u=p.parts_.pop();p.byteLength_-=(0,re.ug)(u),p.parts_.length>0&&(p.byteLength_-=1)}(v)}),S&&B)throw new Error(p+' contains ".value" child '+Ai(v)+" in addition to actual children.")}},is=function(p,u,c,v){if(v&&void 0===u)return;const S=(0,re.gK)(p,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(S+" must be an object containing the children to replace.");const B=[];un(u,(Q,_e)=>{const ke=new Cr(Q);if(Vl(S,_e,mt(c,ke)),".priority"===Zr(ke)&&!ul(_e))throw new Error(S+"contains an invalid value for '"+ke.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");B.push(ke)}),function(p,u){let c,v;for(c=0;c<u.length;c++){v=u[c];const B=Ze(v);for(let Q=0;Q<B.length;Q++)if((".priority"!==B[Q]||Q!==B.length-1)&&!fu(B[Q]))throw new Error(p+"contains an invalid key ("+B[Q]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Ar);let S=null;for(c=0;c<u.length;c++){if(v=u[c],null!==S&&nr(S,v))throw new Error(p+"contains a path "+S.toString()+" that is ancestor of another path "+v.toString());S=v}}(S,B)},Fa=function(p,u,c){if(!c||void 0!==u){if(Nt(u))throw new Error((0,re.gK)(p,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ul(u))throw new Error((0,re.gK)(p,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sa=function(p,u,c,v){if(!(v&&void 0===c||fu(c)))throw new Error((0,re.gK)(p,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ul=function(p,u,c,v){if(!(v&&void 0===c||pu(c)))throw new Error((0,re.gK)(p,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},io=function(p,u){if(".info"===tr(u))throw new Error(p+" failed = Can't modify data under /.info/")},Gs=function(p,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!fu(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(p){return p&&(p=p.replace(/^\/*\.info(\/|$)/,"/")),pu(p)}(c))throw new Error((0,re.gK)(p,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Xi{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wl(p,u){let c=null;for(let v=0;v<u.length;v++){const S=u[v],B=S.getPath();null!==c&&!Un(B,c.path)&&(p.eventLists_.push(c),c=null),null===c&&(c={events:[],path:B}),c.events.push(S)}c&&p.eventLists_.push(c)}function La(p,u,c){wl(p,c),mu(p,v=>Un(v,u))}function ji(p,u,c){wl(p,c),mu(p,v=>nr(v,u)||nr(u,v))}function mu(p,u){p.recursionDepth_++;let c=!0;for(let v=0;v<p.eventLists_.length;v++){const S=p.eventLists_[v];S&&(u(S.path)?(va(p.eventLists_[v]),p.eventLists_[v]=null):c=!1)}c&&(p.eventLists_=[]),p.recursionDepth_--}function va(p){for(let u=0;u<p.events.length;u++){const c=p.events[u];if(null!==c){p.events[u]=null;const v=c.getEventRunner();Ke&&xe("event: "+c.toString()),pn(v)}}}const Cs="repo_interrupt";class Bl{constructor(u,c,v,S){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=v,this.appCheckProvider_=S,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=W(),this.transactionQueueTree_=new Qa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Is(p){const c=p.infoData_.getNode(new Cr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function Ea(p){return function(p){return(p=p||{}).timestamp=p.timestamp||(new Date).getTime(),p}({timestamp:Is(p)})}function Yl(p,u,c,v,S){p.dataUpdateCount++;const B=new Cr(u);c=p.interceptServerDataCallback_?p.interceptServerDataCallback_(u,c):c;let Q=[];if(S)if(v){const ke=(0,re.UI)(c,Ye=>Oe(Ye));Q=function bu(p,u,c,v){const S=Qo(p,v);if(S){const B=kl(S),Q=B.path,_e=B.queryId,ke=Tn(Q,u),Ye=mi.fromObject(c);return ma(p,Q,new Yi(hi(_e),ke,Ye))}return[]}(p.serverSyncTree_,B,ke,S)}else{const ke=Oe(c);Q=To(p.serverSyncTree_,B,ke,S)}else if(v){const ke=(0,re.UI)(c,Ye=>Oe(Ye));Q=function Ya(p,u,c){const v=mi.fromObject(c);return Pa(p,new Yi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,v))}(p.serverSyncTree_,B,ke)}else{const ke=Oe(c);Q=ks(p.serverSyncTree_,B,ke)}let _e=B;Q.length>0&&(_e=Wn(p,B)),ji(p.eventQueue_,_e,Q)}function wa(p,u){Jo(p,"connected",u),!1===u&&function _u(p){Ce(p,"onDisconnectEvents");const u=Ea(p),c=W();De(p.onDisconnect_,mn(),(S,B)=>{const Q=$s(S,B,p.serverSyncTree_,u);q(c,S,Q)});let v=[];De(c,mn(),(S,B)=>{v=v.concat(ks(p.serverSyncTree_,S,B));const Q=Xo(p,S);Wn(p,Q)}),p.onDisconnect_=W(),ji(p.eventQueue_,mn(),v)}(p)}function Jo(p,u,c){const v=new Cr("/.info/"+u),S=Oe(c);p.infoData_.updateSnapshot(v,S);const B=ks(p.infoSyncTree_,v,S);ji(p.eventQueue_,v,B)}function xo(p){return p.nextWriteId_++}function Xa(p,u,c,v,S){Ce(p,"set",{path:u.toString(),value:c,priority:v});const B=Ea(p),Q=Oe(c,v),_e=Du(p.serverSyncTree_,u),ke=ll(Q,_e,B),Ye=xo(p),Rt=Ma(p.serverSyncTree_,u,ke,Ye,!0);wl(p.eventQueue_,Rt),p.server_.put(u.toString(),Q.val(!0),(tn,Kn)=>{const Dr="ok"===tn;Dr||be("set at "+u+" failed: "+tn);const Lr=xa(p.serverSyncTree_,Ye,!Dr);ji(p.eventQueue_,u,Lr),qe(0,S,tn,Kn)});const Wt=Xo(p,u);Wn(p,Wt),ji(p.eventQueue_,Wt,[])}function cl(p,u,c){p.server_.onDisconnectCancel(u.toString(),(v,S)=>{"ok"===v&&pe(p.onDisconnect_,u),qe(0,c,v,S)})}function Au(p,u,c,v){const S=Oe(c);p.server_.onDisconnectPut(u.toString(),S.val(!0),(B,Q)=>{"ok"===B&&q(p.onDisconnect_,u,S),qe(0,v,B,Q)})}function A(p,u,c){let v;v=".info"===tr(u._path)?sl(p.infoSyncTree_,u,c):sl(p.serverSyncTree_,u,c),La(p.eventQueue_,u._path,v)}function O(p){p.persistentConnection_&&p.persistentConnection_.interrupt(Cs)}function Ce(p,...u){let c="";p.persistentConnection_&&(c=p.persistentConnection_.id+":"),xe(c,...u)}function qe(p,u,c,v){u&&pn(()=>{if("ok"===c)u(null);else{const S=(c||"error").toUpperCase();let B=S;v&&(B+=": "+v);const Q=new Error(B);Q.code=S,u(Q)}})}function Lt(p,u,c){return Du(p.serverSyncTree_,u,c)||V.EMPTY_NODE}function En(p,u=p.transactionQueueTree_){if(u||Ti(p,u),El(u)){const c=Ii(p,u);(0,re.hu)(c.length>0,"Sending zero length transaction queue"),c.every(S=>0===S.status)&&function Cn(p,u,c){const v=c.map(Ye=>Ye.currentWriteId),S=Lt(p,u,v);let B=S;const Q=S.hash();for(let Ye=0;Ye<c.length;Ye++){const Rt=c[Ye];(0,re.hu)(0===Rt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Rt.status=1,Rt.retryCount++;const Wt=Tn(u,Rt.path);B=B.updateChild(Wt,Rt.currentOutputSnapshotRaw)}const _e=B.val(!0),ke=u;p.server_.put(ke.toString(),_e,Ye=>{Ce(p,"transaction put response",{path:ke.toString(),status:Ye});let Rt=[];if("ok"===Ye){const Wt=[];for(let tn=0;tn<c.length;tn++)c[tn].status=2,Rt=Rt.concat(xa(p.serverSyncTree_,c[tn].currentWriteId)),c[tn].onComplete&&Wt.push(()=>c[tn].onComplete(null,!0,c[tn].currentOutputSnapshotResolved)),c[tn].unwatcher();Ti(p,lu(p.transactionQueueTree_,u)),En(p,p.transactionQueueTree_),ji(p.eventQueue_,u,Rt);for(let tn=0;tn<Wt.length;tn++)pn(Wt[tn])}else{if("datastale"===Ye)for(let Wt=0;Wt<c.length;Wt++)c[Wt].status=3===c[Wt].status?4:0;else{be("transaction at "+ke.toString()+" failed: "+Ye);for(let Wt=0;Wt<c.length;Wt++)c[Wt].status=4,c[Wt].abortReason=Ye}Wn(p,u)}},Q)}(p,Zl(u),c)}else Fu(u)&&uu(u,c=>{En(p,c)})}function Wn(p,u){const c=Er(p,u),v=Zl(c);return function Or(p,u,c){if(0===u.length)return;const v=[];let S=[];const Q=u.filter(_e=>0===_e.status).map(_e=>_e.currentWriteId);for(let _e=0;_e<u.length;_e++){const ke=u[_e],Ye=Tn(c,ke.path);let Wt,Rt=!1;if((0,re.hu)(null!==Ye,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ke.status)Rt=!0,Wt=ke.abortReason,S=S.concat(xa(p.serverSyncTree_,ke.currentWriteId,!0));else if(0===ke.status)if(ke.retryCount>=25)Rt=!0,Wt="maxretry",S=S.concat(xa(p.serverSyncTree_,ke.currentWriteId,!0));else{const tn=Lt(p,ke.path,Q);ke.currentInputSnapshot=tn;const Kn=u[_e].update(tn.val());if(void 0!==Kn){Vl("transaction failed: Data returned ",Kn,ke.path);let Dr=Oe(Kn);"object"==typeof Kn&&null!=Kn&&(0,re.r3)(Kn,".priority")||(Dr=Dr.updatePriority(tn.getPriority()));const Vr=ke.currentWriteId,uc=Ea(p),Hc=ll(Dr,tn,uc);ke.currentOutputSnapshotRaw=Dr,ke.currentOutputSnapshotResolved=Hc,ke.currentWriteId=xo(p),Q.splice(Q.indexOf(Vr),1),S=S.concat(Ma(p.serverSyncTree_,ke.path,Hc,ke.currentWriteId,ke.applyLocally)),S=S.concat(xa(p.serverSyncTree_,Vr,!0))}else Rt=!0,Wt="nodata",S=S.concat(xa(p.serverSyncTree_,ke.currentWriteId,!0))}ji(p.eventQueue_,c,S),S=[],Rt&&(u[_e].status=2,setTimeout(u[_e].unwatcher,Math.floor(0)),u[_e].onComplete&&v.push("nodata"===Wt?()=>u[_e].onComplete(null,!1,u[_e].currentInputSnapshot):()=>u[_e].onComplete(new Error(Wt),!1,null)))}Ti(p,p.transactionQueueTree_);for(let _e=0;_e<v.length;_e++)pn(v[_e]);En(p,p.transactionQueueTree_)}(p,Ii(p,c),v),v}function Er(p,u){let c,v=p.transactionQueueTree_;for(c=tr(u);null!==c&&void 0===El(v);)v=lu(v,c),c=tr(u=hr(u));return v}function Ii(p,u){const c=[];return Ws(p,u,c),c.sort((v,S)=>v.order-S.order),c}function Ws(p,u,c){const v=El(u);if(v)for(let S=0;S<v.length;S++)c.push(v[S]);uu(u,S=>{Ws(p,S,c)})}function Ti(p,u){const c=El(u);if(c){let v=0;for(let S=0;S<c.length;S++)2!==c[S].status&&(c[v]=c[S],v++);c.length=v,Fs(u,c.length>0?c:void 0)}uu(u,v=>{Ti(p,v)})}function Xo(p,u){const c=Zl(Er(p,u)),v=lu(p.transactionQueueTree_,u);return function du(p,u,c){let v=c?p:p.parent;for(;null!==v;){if(u(v))return!0;v=v.parent}}(v,S=>{dl(p,S)}),dl(p,v),cu(v,S=>{dl(p,S)}),c}function dl(p,u){const c=El(u);if(c){const v=[];let S=[],B=-1;for(let Q=0;Q<c.length;Q++)3===c[Q].status||(1===c[Q].status?((0,re.hu)(B===Q-1,"All SENT items should be at beginning of queue."),B=Q,c[Q].status=3,c[Q].abortReason="set"):((0,re.hu)(0===c[Q].status,"Unexpected transaction status in abort"),c[Q].unwatcher(),S=S.concat(xa(p.serverSyncTree_,c[Q].currentWriteId,!0)),c[Q].onComplete&&v.push(c[Q].onComplete.bind(null,new Error("set"),!1,null))));-1===B?Fs(u,void 0):c.length=B+1,ji(p.eventQueue_,Zl(u),S);for(let Q=0;Q<v.length;Q++)pn(v[Q])}}const Ru=function(p,u){const c=md(p),v=c.namespace;return"firebase.com"===c.domain&&It(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==c.domain&&It("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&be("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new At(c.host,c.secure,v,"ws"===c.scheme||"wss"===c.scheme,u,"",v!==c.subdomain),path:new Cr(c.pathString)}},md=function(p){let u="",c="",v="",S="",B="",Q=!0,_e="https",ke=443;if("string"==typeof p){let Ye=p.indexOf("//");Ye>=0&&(_e=p.substring(0,Ye-1),p=p.substring(Ye+2));let Rt=p.indexOf("/");-1===Rt&&(Rt=p.length);let Wt=p.indexOf("?");-1===Wt&&(Wt=p.length),u=p.substring(0,Math.min(Rt,Wt)),Rt<Wt&&(S=function Ca(p){let u="";const c=p.split("/");for(let v=0;v<c.length;v++)if(c[v].length>0){let S=c[v];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch(B){}u+="/"+S}return u}(p.substring(Rt,Wt)));const tn=function Bo(p){const u={};"?"===p.charAt(0)&&(p=p.substring(1));for(const c of p.split("&")){if(0===c.length)continue;const v=c.split("=");2===v.length?u[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):be(`Invalid query segment '${c}' in query '${p}'`)}return u}(p.substring(Math.min(p.length,Wt)));Ye=u.indexOf(":"),Ye>=0?(Q="https"===_e||"wss"===_e,ke=parseInt(u.substring(Ye+1),10)):Ye=u.length;const Kn=u.slice(0,Ye);if("localhost"===Kn.toLowerCase())c="localhost";else if(Kn.split(".").length<=2)c=Kn;else{const Dr=u.indexOf(".");v=u.substring(0,Dr).toLowerCase(),c=u.substring(Dr+1),B=v}"ns"in tn&&(B=tn.ns)}return{host:u,port:ke,domain:c,subdomain:v,secure:Q,scheme:_e,pathString:S,namespace:B}},fi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qi=function(){let p=0;const u=[];return function(c){const v=c===p;let S;p=c;const B=new Array(8);for(S=7;S>=0;S--)B[S]=fi.charAt(c%64),c=Math.floor(c/64);(0,re.hu)(0===c,"Cannot push at time == 0");let Q=B.join("");if(v){for(S=11;S>=0&&63===u[S];S--)u[S]=0;u[S]++}else for(S=0;S<12;S++)u[S]=Math.floor(64*Math.random());for(S=0;S<12;S++)Q+=fi.charAt(u[S]);return(0,re.hu)(20===Q.length,"nextPushId: Length should be 20."),Q}}();class el{constructor(u,c,v,S){this.eventType=u,this.eventRegistration=c,this.snapshot=v,this.prevName=S}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Wl)(this.snapshot.exportVal())}}class Mu{constructor(u,c,v){this.eventRegistration=u,this.error=c,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Hl{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class ic{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new re.BH;return cl(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){io("OnDisconnect.remove",this._path);const u=new re.BH;return Au(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){io("OnDisconnect.set",this._path),_a("OnDisconnect.set",u,this._path,!1);const c=new re.BH;return Au(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){io("OnDisconnect.setWithPriority",this._path),_a("OnDisconnect.setWithPriority",u,this._path,!1),Fa("OnDisconnect.setWithPriority",c,!1);const v=new re.BH;return function jl(p,u,c,v,S){const B=Oe(c,v);p.server_.onDisconnectPut(u.toString(),B.val(!0),(Q,_e)=>{"ok"===Q&&q(p.onDisconnect_,u,B),qe(0,S,Q,_e)})}(this._repo,this._path,u,c,v.wrapCallback(()=>{})),v.promise}update(u){io("OnDisconnect.update",this._path),is("OnDisconnect.update",u,this._path,!1);const c=new re.BH;return function Bu(p,u,c,v){if((0,re.xb)(c))return xe("onDisconnect().update() called with empty data.  Don't do anything."),void qe(0,v,"ok",void 0);p.server_.onDisconnectMerge(u.toString(),c,(S,B)=>{"ok"===S&&un(c,(Q,_e)=>{const ke=Oe(_e);q(p.onDisconnect_,mt(u,Q),ke)}),qe(0,v,S,B)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class N{constructor(u,c,v,S){this._repo=u,this._path=c,this._queryParams=v,this._orderByCalled=S}get key(){return kt(this._path)?null:Zr(this._path)}get ref(){return new Z(this._repo,this._path)}get _queryIdentifier(){const u=Le(this._queryParams),c=ar(u);return"{}"===c?"default":c}get _queryObject(){return Le(this._queryParams)}isEqual(u){if(!((u=(0,re.m9)(u))instanceof N))return!1;const c=this._repo===u._repo,v=Un(this._path,u._path);return c&&v&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function at(p){let u="";for(let c=p.pieceNum_;c<p.pieces_.length;c++)""!==p.pieces_[c]&&(u+="/"+encodeURIComponent(String(p.pieces_[c])));return u||"/"}(this._path)}}function E(p,u){if(!0===p._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function C(p){let u=null,c=null;if(p.hasStart()&&(u=p.getIndexStartValue()),p.hasEnd()&&(c=p.getIndexEndValue()),p.getIndex()===Wi){const v="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",S="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(p.hasStart()){if(p.getIndexStartName()!==_n)throw new Error(v);if("string"!=typeof u)throw new Error(S)}if(p.hasEnd()){if(p.getIndexEndName()!==Fn)throw new Error(v);if("string"!=typeof c)throw new Error(S)}}else if(p.getIndex()===Nr){if(null!=u&&!ul(u)||null!=c&&!ul(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(p.getIndex()instanceof Pt||p.getIndex()===Dn,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function x(p){if(p.hasStart()&&p.hasEnd()&&p.hasLimit()&&!p.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Z extends N{constructor(u,c){super(u,c,new Ci,!1)}get parent(){const u=lt(this._path);return null===u?null:new Z(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class oe{constructor(u,c,v){this._node=u,this.ref=c,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Cr(u),v=f(this.ref,u);return new oe(this._node.getChild(c),v,Nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,S)=>u(new oe(S,f(this.ref,v),Nr)))}hasChild(u){const c=new Cr(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ae(p,u){return(p=(0,re.m9)(p))._checkNotDeleted("ref"),void 0!==u?f(p._root,u):p._root}function w(p,u){(p=(0,re.m9)(p))._checkNotDeleted("refFromURL");const c=Ru(u,p._repo.repoInfo_.nodeAdmin);Gs("refFromURL",c);const v=c.repoInfo;return!p._repo.repoInfo_.isCustomHost()&&v.host!==p._repo.repoInfo_.host&&It("refFromURL: Host name does not match the current database: (found "+v.host+" but expected "+p._repo.repoInfo_.host+")"),Ae(p,c.path.toString())}function f(p,u){return null===tr((p=(0,re.m9)(p))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Ul("child","path",c,!1)):Ul("child","path",u,!1),new Z(p._repo,mt(p._path,u));var c}function b(p,u){p=(0,re.m9)(p),io("push",p._path),_a("push",u,p._path,!0);const c=Is(p._repo),v=qi(c),S=f(p,v),B=f(p,v);let Q;return Q=null!=u?ae(B,u).then(()=>B):Promise.resolve(B),S.then=Q.then.bind(Q),S.catch=Q.then.bind(Q,void 0),S}function Y(p){return io("remove",p._path),ae(p,null)}function ae(p,u){p=(0,re.m9)(p),io("set",p._path),_a("set",u,p._path,!1);const c=new re.BH;return Xa(p._repo,p._path,u,null,c.wrapCallback(()=>{})),c.promise}function $e(p,u){p=(0,re.m9)(p),io("setPriority",p._path),Fa("setPriority",u,!1);const c=new re.BH;return Xa(p._repo,mt(p._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}function et(p,u,c){if(io("setWithPriority",p._path),_a("setWithPriority",u,p._path,!1),Fa("setWithPriority",c,!1),".length"===p.key||".keys"===p.key)throw"setWithPriority failed: "+p.key+" is a read-only object.";const v=new re.BH;return Xa(p._repo,p._path,u,c,v.wrapCallback(()=>{})),v.promise}function Vt(p,u){is("update",u,p._path,!1);const c=new re.BH;return function bo(p,u,c,v){Ce(p,"update",{path:u.toString(),value:c});let S=!0;const B=Ea(p),Q={};if(un(c,(_e,ke)=>{S=!1,Q[_e]=$s(mt(u,_e),Oe(ke),p.serverSyncTree_,B)}),S)xe("update() called with empty data.  Don't do anything."),qe(0,v,"ok",void 0);else{const _e=xo(p),ke=function Nl(p,u,c,v){!function to(p,u,c,v){(0,re.hu)(v>p.lastWriteId,"Stacking an older merge on top of newer ones"),p.allWrites.push({path:u,children:c,writeId:v,visible:!0}),p.visibleWrites=Es(p.visibleWrites,u,c),p.lastWriteId=v}(p.pendingWriteTree_,u,c,v);const S=mi.fromObject(c);return Pa(p,new Yi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,S))}(p.serverSyncTree_,u,Q,_e);wl(p.eventQueue_,ke),p.server_.merge(u.toString(),c,(Ye,Rt)=>{const Wt="ok"===Ye;Wt||be("update at "+u+" failed: "+Ye);const tn=xa(p.serverSyncTree_,_e,!Wt),Kn=tn.length>0?Wn(p,u):u;ji(p.eventQueue_,Kn,tn),qe(0,v,Ye,Rt)}),un(c,Ye=>{const Rt=Xo(p,mt(u,Ye));Wn(p,Rt)}),ji(p.eventQueue_,u,[])}}(p._repo,p._path,u,c.wrapCallback(()=>{})),c.promise}function dn(p){p=(0,re.m9)(p);const u=new Hl(()=>{}),c=new Mn(u);return function Ja(p,u,c){const v=function ol(p,u){const c=u._path;let v=null;p.syncPointTree_.foreachOnPath(c,(Ye,Rt)=>{const Wt=Tn(Ye,c);v=v||Vo(Rt,Wt)});let S=p.syncPointTree_.get(c);S?v=v||Vo(S,mn()):(S=new ga,p.syncPointTree_=p.syncPointTree_.set(c,S));const B=null!=v,Q=B?new ns(v,!0,!1):null;return function Gt(p){return nl(p.viewCache_)}(iu(S,u,Co(p.pendingWriteTree_,u._path),B?Q.getNode():V.EMPTY_NODE,B))}(p.serverSyncTree_,u);return null!=v?Promise.resolve(v):p.server_.get(u).then(S=>{const B=Oe(S).withIndex(u._queryParams.getIndex());let Q;if(Kl(p.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())Q=ks(p.serverSyncTree_,u._path,B);else{const _e=ql(p.serverSyncTree_,u);Q=To(p.serverSyncTree_,u._path,B,_e)}return ji(p.eventQueue_,u._path,Q),sl(p.serverSyncTree_,u,c,null,!0),B},S=>(Ce(p,"get for query "+(0,re.Wl)(u)+" failed: "+S),Promise.reject(new Error(S))))}(p._repo,p,c).then(v=>new oe(v,new Z(p._repo,p._path),p._queryParams.getIndex()))}class Mn{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const v=c._queryParams.getIndex();return new el("value",this,new oe(u.snapshotNode,new Z(c._repo,c._path),v))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Mu(this,u,c):null}matches(u){return u instanceof Mn&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kn{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Mu(this,u,c):null}createEvent(u,c){(0,re.hu)(null!=u.childName,"Child events should have a childName.");const v=f(new Z(c._repo,c._path),u.childName),S=c._queryParams.getIndex();return new el(u.type,this,new oe(u.snapshotNode,v,S),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof kn&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Mr(p,u,c,v,S){let B;if("object"==typeof v&&(B=void 0,S=v),"function"==typeof v&&(B=v),S&&S.onlyOnce){const ke=c,Ye=(Rt,Wt)=>{A(p._repo,p,_e),ke(Rt,Wt)};Ye.userCallback=c.userCallback,Ye.context=c.context,c=Ye}const Q=new Hl(c,B||void 0),_e="value"===u?new Mn(Q):new kn(u,Q);return function Ql(p,u,c){let v;v=".info"===tr(u._path)?Kl(p.infoSyncTree_,u,c):Kl(p.serverSyncTree_,u,c),La(p.eventQueue_,u._path,v)}(p._repo,p,_e),()=>A(p._repo,p,_e)}function li(p,u,c,v){return Mr(p,"value",u,c,v)}function Va(p,u,c,v){return Mr(p,"child_added",u,c,v)}function zs(p,u,c,v){return Mr(p,"child_changed",u,c,v)}function Do(p,u,c,v){return Mr(p,"child_moved",u,c,v)}function Ua(p,u,c,v){return Mr(p,"child_removed",u,c,v)}function oa(p,u,c){let v=null;const S=c?new Hl(c):null;"value"===u?v=new Mn(S):u&&(v=new kn(u,S)),A(p._repo,p,v)}class ms{}class Ia extends ms{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){_a("endAt",this._value,u._path,!0);const c=K(u._queryParams,this._value,this._key);if(x(c),C(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new N(u._repo,u._path,c,u._orderByCalled)}}function Ls(p,u){return sa("endAt","key",u,!0),new Ia(p,u)}class Po extends ms{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){_a("endBefore",this._value,u._path,!1);const c=function j(p,u,c){let v;return v=K(p,u,p.index_===Wi||c?c:_n),v.endBeforeSet_=!0,v}(u._queryParams,this._value,this._key);if(x(c),C(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new N(u._repo,u._path,c,u._orderByCalled)}}function vu(p,u){return sa("endBefore","key",u,!0),new Po(p,u)}class Jl extends ms{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){_a("startAt",this._value,u._path,!0);const c=ho(u._queryParams,this._value,this._key);if(x(c),C(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new N(u._repo,u._path,c,u._orderByCalled)}}function rr(p=null,u){return sa("startAt","key",u,!0),new Jl(p,u)}class wr extends ms{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){_a("startAfter",this._value,u._path,!1);const c=function vo(p,u,c){let v;return v=ho(p,u,p.index_===Wi||c?c:Fn),v.startAfterSet_=!0,v}(u._queryParams,this._value,this._key);if(x(c),C(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new N(u._repo,u._path,c,u._orderByCalled)}}function Tr(p,u){return sa("startAfter","key",u,!0),new wr(p,u)}class bi extends ms{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new N(u._repo,u._path,function Ds(p,u){const c=p.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}function So(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bi(p)}class Cl extends ms{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new N(u._repo,u._path,function Fo(p,u){const c=p.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}function so(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Cl(p)}class Ba extends ms{constructor(u){super(),this._path=u}_apply(u){E(u,"orderByChild");const c=new Cr(this._path);if(kt(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const v=new Pt(c),S=F(u._queryParams,v);return C(S),new N(u._repo,u._path,S,!0)}}function Di(p){if("$key"===p)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===p)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===p)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ul("orderByChild","path",p,!1),new Ba(p)}class Bc extends ms{_apply(u){E(u,"orderByKey");const c=F(u._queryParams,Wi);return C(c),new N(u._repo,u._path,c,!0)}}function sc(){return new Bc}class aa extends ms{_apply(u){E(u,"orderByPriority");const c=F(u._queryParams,Nr);return C(c),new N(u._repo,u._path,c,!0)}}function la(){return new aa}class ea extends ms{_apply(u){E(u,"orderByValue");const c=F(u._queryParams,Dn);return C(c),new N(u._repo,u._path,c,!0)}}function ua(){return new ea}class vc extends ms{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(_a("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ia(this._value,this._key)._apply(new Jl(this._value,this._key)._apply(u))}}function _p(p,u){return sa("equalTo","key",u,!0),new vc(p,u)}function pi(p,...u){let c=(0,re.m9)(p);for(const v of u)c=v._apply(c);return c}(function Ka(p){(0,re.hu)(!ia,"__referenceConstructor has already been defined"),ia=p})(Z),function su(p){(0,re.hu)(!ii,"__referenceConstructor has already been defined"),ii=p}(Z);const jc={};function Jd(p,u,c,v,S){let B=v||p.options.databaseURL;void 0===B&&(p.options.projectId||It("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xe("Using default host for project ",p.options.projectId),B=`${p.options.projectId}-default-rtdb.firebaseio.com`);let ke,Ye,Q=Ru(B,S),_e=Q.repoInfo;"undefined"!=typeof process&&process.env&&(Ye=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ye?(ke=!0,B=`http://${Ye}?ns=${_e.namespace}`,Q=Ru(B,S),_e=Q.repoInfo):ke=!Q.repoInfo.secure;const Rt=S&&ke?new jn(jn.OWNER):new _r(p.name,p.options,u);Gs("Invalid Firebase Database URL",Q),kt(Q.path)||It("Database URL must point to the root of a Firebase Database (not including a child path).");const Wt=function Ep(p,u,c,v){let S=jc[u.name];S||(S={},jc[u.name]=S);let B=S[p.toURLString()];return B&&It("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),B=new Bl(p,false,c,v),S[p.toURLString()]=B,B}(_e,p,Rt,new cr(p.name,c));return new Cp(Wt,p)}class Cp{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function As(p,u,c){if(p.stats_=yi(p.repoInfo_),p.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)p.server_=new Jt(p.repoInfo_,(v,S,B,Q)=>{Yl(p,v,S,B,Q)},p.authTokenProvider_,p.appCheckProvider_),setTimeout(()=>wa(p,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Wl)(c)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}p.persistentConnection_=new Ms(p.repoInfo_,u,(v,S,B,Q)=>{Yl(p,v,S,B,Q)},v=>{wa(p,v)},v=>{!function go(p,u){un(u,(c,v)=>{Jo(p,c,v)})}(p,v)},p.authTokenProvider_,p.appCheckProvider_,c),p.server_=p.persistentConnection_}p.authTokenProvider_.addTokenChangeListener(v=>{p.server_.refreshAuthToken(v)}),p.appCheckProvider_.addTokenChangeListener(v=>{p.server_.refreshAppCheckToken(v.token)}),p.statsReporter_=function lr(p,u){const c=p.toString();return Vn[c]||(Vn[c]=u()),Vn[c]}(p.repoInfo_,()=>new Jn(p.stats_,p.server_)),p.infoData_=new qr,p.infoSyncTree_=new Ra({startListening:(v,S,B,Q)=>{let _e=[];const ke=p.infoData_.getNode(v._path);return ke.isEmpty()||(_e=ks(p.infoSyncTree_,v._path,ke),setTimeout(()=>{Q("ok")},0)),_e},stopListening:()=>{}}),Jo(p,"connected",!1),p.serverSyncTree_=new Ra({startListening:(v,S,B,Q)=>(p.server_.listen(v,B,S,(_e,ke)=>{const Ye=Q(_e,ke);ji(p.eventQueue_,v._path,Ye)}),[]),stopListening:(v,S)=>{p.server_.unlisten(v,S)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Z(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function yd(p,u){const c=jc[u];(!c||c[p.key]!==p)&&It(`Database ${u}(${p.repoInfo_}) has already been deleted.`),O(p),delete c[p.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&It("Cannot call "+u+" on a deleted database.")}}function oc(){gr.IS_TRANSPORT_INITIALIZED&&be("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Xl(){oc(),se.forceDisallow()}function Xd(){oc(),bn.forceDisallow(),se.forceAllow()}function ja(p=(0,L.getApp)(),u){const c=(0,L._getProvider)(p,"database").getImmediate({identifier:u});if(!c._instanceStarted){const v=(0,re.P0)("database");v&&ac(c,...v)}return c}function ac(p,u,c,v={}){(p=(0,re.m9)(p))._checkNotDeleted("useEmulator"),p._instanceStarted&&It("Cannot call useEmulator() after instance has already been initialized.");const S=p._repoInternal;let B;if(S.repoInfo_.nodeAdmin)v.mockUserToken&&It('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),B=new jn(jn.OWNER);else if(v.mockUserToken){const Q="string"==typeof v.mockUserToken?v.mockUserToken:(0,re.Sg)(v.mockUserToken,p.app.options.projectId);B=new jn(Q)}!function Qd(p,u,c,v){p.repoInfo_=new At(`${u}:${c}`,!1,p.repoInfo_.namespace,p.repoInfo_.webSocketOnly,p.repoInfo_.nodeAdmin,p.repoInfo_.persistenceKey,p.repoInfo_.includeNamespaceInQueryParams,!0),v&&(p.authTokenProvider_=v)}(S,u,c,B)}function lc(p){(p=(0,re.m9)(p))._checkNotDeleted("goOffline"),O(p._repo)}function eh(p){(p=(0,re.m9)(p))._checkNotDeleted("goOnline"),function te(p){p.persistentConnection_&&p.persistentConnection_.resume(Cs)}(p._repo)}function th(p,u){it(p,u)}const Kg={".sv":"timestamp"};function qg(){return Kg}function Vs(p){return{".sv":{increment:p}}}class Ec{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function wc(p,u,c){var v;if(p=(0,re.m9)(p),io("Reference.transaction",p._path),".length"===p.key||".keys"===p.key)throw"Reference.transaction failed: "+p.key+" is a read-only object.";const S=null===(v=null==c?void 0:c.applyLocally)||void 0===v||v,B=new re.BH,_e=li(p,()=>{});return function dt(p,u,c,v,S,B){Ce(p,"transaction on "+u);const Q={path:u,update:c,onComplete:v,status:null,order:Mt(),applyLocally:B,retryCount:0,unwatcher:S,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},_e=Lt(p,u,void 0);Q.currentInputSnapshot=_e;const ke=Q.update(_e.val());if(void 0===ke)Q.unwatcher(),Q.currentOutputSnapshotRaw=null,Q.currentOutputSnapshotResolved=null,Q.onComplete&&Q.onComplete(null,!1,Q.currentInputSnapshot);else{Vl("transaction failed: Data returned ",ke,Q.path),Q.status=0;const Ye=lu(p.transactionQueueTree_,u),Rt=El(Ye)||[];let Wt;Rt.push(Q),Fs(Ye,Rt),"object"==typeof ke&&null!==ke&&(0,re.r3)(ke,".priority")?(Wt=(0,re.DV)(ke,".priority"),(0,re.hu)(ul(Wt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Wt=(Du(p.serverSyncTree_,u)||V.EMPTY_NODE).getPriority().val();const tn=Ea(p),Kn=Oe(ke,Wt),Dr=ll(Kn,_e,tn);Q.currentOutputSnapshotRaw=Kn,Q.currentOutputSnapshotResolved=Dr,Q.currentWriteId=xo(p);const Lr=Ma(p.serverSyncTree_,u,Dr,Q.currentWriteId,Q.applyLocally);ji(p.eventQueue_,u,Lr),En(p,p.transactionQueueTree_)}}(p._repo,p._path,u,(ke,Ye,Rt)=>{let Wt=null;ke?B.reject(ke):(Wt=new oe(Rt,new Z(p._repo,p._path),Nr),B.resolve(new Ec(Ye,Wt)))},_e,S),B.promise}Ms.prototype.simpleListen=function(p,u){this.sendRequest("q",{p},u)},Ms.prototype.echo=function(p,u){this.sendRequest("echo",{d:p},u)},function _d(p){rt(L.SDK_VERSION),(0,L._registerComponent)(new ee.wA("database",(u,{instanceIdentifier:c})=>Jd(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,L.registerVersion)(je,"0.14.4",p),(0,L.registerVersion)(je,"0.14.4","esm2017")}()},2090:(hn,ut,U)=>{U.d(ut,{$s:()=>Jr,BH:()=>Qe,DV:()=>Xn,Dv:()=>zn,G6:()=>ar,GJ:()=>_r,L:()=>rt,LL:()=>Re,P0:()=>Kt,Pz:()=>xe,Sg:()=>_t,UG:()=>Ht,UI:()=>sr,US:()=>je,Wj:()=>lr,Wl:()=>qt,Yr:()=>Ot,ZB:()=>Je,ZR:()=>Te,aH:()=>it,b$:()=>_n,cI:()=>ot,dS:()=>nn,eu:()=>un,g5:()=>ee,gK:()=>Vn,gQ:()=>Ge,h$:()=>Be,hl:()=>Rn,hu:()=>L,jU:()=>Nt,lb:()=>mr,m9:()=>Br,ne:()=>ht,p$:()=>ve,pd:()=>He,r3:()=>jn,ru:()=>An,tV:()=>Ie,uI:()=>be,ug:()=>Sr,vZ:()=>Pn,w1:()=>ln,w9:()=>cr,xO:()=>$i,xb:()=>gn,z$:()=>It,zI:()=>st,zd:()=>xt});const L=function(Fe,Me){if(!Fe)throw ee(Me)},ee=function(Fe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Fe)},re=function(Fe){const Me=[];let me=0;for(let ye=0;ye<Fe.length;ye++){let z=Fe.charCodeAt(ye);z<128?Me[me++]=z:z<2048?(Me[me++]=z>>6|192,Me[me++]=63&z|128):55296==(64512&z)&&ye+1<Fe.length&&56320==(64512&Fe.charCodeAt(ye+1))?(z=65536+((1023&z)<<10)+(1023&Fe.charCodeAt(++ye)),Me[me++]=z>>18|240,Me[me++]=z>>12&63|128,Me[me++]=z>>6&63|128,Me[me++]=63&z|128):(Me[me++]=z>>12|224,Me[me++]=z>>6&63|128,Me[me++]=63&z|128)}return Me},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Fe,Me){if(!Array.isArray(Fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const me=Me?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let z=0;z<Fe.length;z+=3){const ie=Fe[z],se=z+1<Fe.length,we=se?Fe[z+1]:0,ct=z+2<Fe.length,Bt=ct?Fe[z+2]:0;let gr=(15&we)<<2|Bt>>6,ir=63&Bt;ct||(ir=64,se||(gr=64)),ye.push(me[ie>>2],me[(3&ie)<<4|we>>4],me[gr],me[ir])}return ye.join("")},encodeString(Fe,Me){return this.HAS_NATIVE_SUPPORT&&!Me?btoa(Fe):this.encodeByteArray(re(Fe),Me)},decodeString(Fe,Me){return this.HAS_NATIVE_SUPPORT&&!Me?atob(Fe):function(Fe){const Me=[];let me=0,ye=0;for(;me<Fe.length;){const z=Fe[me++];if(z<128)Me[ye++]=String.fromCharCode(z);else if(z>191&&z<224){const ie=Fe[me++];Me[ye++]=String.fromCharCode((31&z)<<6|63&ie)}else if(z>239&&z<365){const ct=((7&z)<<18|(63&Fe[me++])<<12|(63&Fe[me++])<<6|63&Fe[me++])-65536;Me[ye++]=String.fromCharCode(55296+(ct>>10)),Me[ye++]=String.fromCharCode(56320+(1023&ct))}else{const ie=Fe[me++],se=Fe[me++];Me[ye++]=String.fromCharCode((15&z)<<12|(63&ie)<<6|63&se)}}return Me.join("")}(this.decodeStringToByteArray(Fe,Me))},decodeStringToByteArray(Fe,Me){this.init_();const me=Me?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let z=0;z<Fe.length;){const ie=me[Fe.charAt(z++)],we=z<Fe.length?me[Fe.charAt(z)]:0;++z;const Bt=z<Fe.length?me[Fe.charAt(z)]:64;++z;const bn=z<Fe.length?me[Fe.charAt(z)]:64;if(++z,null==ie||null==we||null==Bt||null==bn)throw new We;ye.push(ie<<2|we>>4),64!==Bt&&(ye.push(we<<4&240|Bt>>2),64!==bn&&ye.push(Bt<<6&192|bn))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Fe=0;Fe<this.ENCODED_VALS.length;Fe++)this.byteToCharMap_[Fe]=this.ENCODED_VALS.charAt(Fe),this.charToByteMap_[this.byteToCharMap_[Fe]]=Fe,this.byteToCharMapWebSafe_[Fe]=this.ENCODED_VALS_WEBSAFE.charAt(Fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Fe]]=Fe,Fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Fe)]=Fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Fe)]=Fe)}}};class We extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(Fe){const Me=re(Fe);return je.encodeByteArray(Me,!0)},rt=function(Fe){return Be(Fe).replace(/\./g,"")},Ie=function(Fe){try{return je.decodeString(Fe,!0)}catch(Me){console.error("base64Decode failed: ",Me)}return null};function ve(Fe){return Je(void 0,Fe)}function Je(Fe,Me){if(!(Me instanceof Object))return Me;switch(Me.constructor){case Date:return new Date(Me.getTime());case Object:void 0===Fe&&(Fe={});break;case Array:Fe=[];break;default:return Me}for(const me in Me)!Me.hasOwnProperty(me)||!Tt(me)||(Fe[me]=Je(Fe[me],Me[me]));return Fe}function Tt(Fe){return"__proto__"!==Fe}const Ct=()=>{try{return function ft(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Fe=process.env.__FIREBASE_DEFAULTS__;return Fe?JSON.parse(Fe):void 0})()||(()=>{if("undefined"==typeof document)return;let Fe;try{Fe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(me){return}const Me=Fe&&Ie(Fe[1]);return Me&&JSON.parse(Me)})()}catch(Fe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Fe}`)}},Kt=Fe=>{const Me=(Fe=>{var Me,me;return null===(me=null===(Me=Ct())||void 0===Me?void 0:Me.emulatorHosts)||void 0===me?void 0:me[Fe]})(Fe);if(!Me)return;const me=Me.lastIndexOf(":");if(me<=0||me+1===Me.length)throw new Error(`Invalid host ${Me} with no separate hostname and port!`);const ye=parseInt(Me.substring(me+1),10);return"["===Me[0]?[Me.substring(1,me-1),ye]:[Me.substring(0,me),ye]},it=()=>{var Fe;return null===(Fe=Ct())||void 0===Fe?void 0:Fe.config},xe=Fe=>{var Me;return null===(Me=Ct())||void 0===Me?void 0:Me[`_${Fe}`]};class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Me,me)=>{this.resolve=Me,this.reject=me})}wrapCallback(Me){return(me,ye)=>{me?this.reject(me):this.resolve(ye),"function"==typeof Me&&(this.promise.catch(()=>{}),1===Me.length?Me(me):Me(me,ye))}}}function _t(Fe,Me){if(Fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=Me||"demo-project",z=Fe.iat||0,ie=Fe.sub||Fe.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:z,exp:z+3600,auth_time:z,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},Fe);return[rt(JSON.stringify({alg:"none",type:"JWT"})),rt(JSON.stringify(se)),""].join(".")}function It(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function Ht(){var Fe;const Me=null===(Fe=Ct())||void 0===Fe?void 0:Fe.forceEnvironment;if("node"===Me)return!0;if("browser"===Me)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(me){return!1}}function Nt(){return"object"==typeof self&&self.self===self}function An(){const Fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Fe&&void 0!==Fe.id}function _n(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ln(){const Fe=It();return Fe.indexOf("MSIE ")>=0||Fe.indexOf("Trident/")>=0}function Ot(){return!1}function ar(){return!Ht()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rn(){try{return"object"==typeof indexedDB}catch(Fe){return!1}}function un(){return new Promise((Fe,Me)=>{try{let me=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(ye);z.onsuccess=()=>{z.result.close(),me||self.indexedDB.deleteDatabase(ye),Fe(!0)},z.onupgradeneeded=()=>{me=!1},z.onerror=()=>{var ie;Me((null===(ie=z.error)||void 0===ie?void 0:ie.message)||"")}}catch(me){Me(me)}})}function st(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Te extends Error{constructor(Me,me,ye){super(me),this.code=Me,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor(Me,me,ye){this.service=Me,this.serviceName=me,this.errors=ye}create(Me,...me){const ye=me[0]||{},z=`${this.service}/${Me}`,ie=this.errors[Me],se=ie?function Ee(Fe,Me){return Fe.replace(Ne,(me,ye)=>{const z=Me[ye];return null!=z?String(z):`<${ye}?>`})}(ie,ye):"Error";return new Te(z,`${this.serviceName}: ${se} (${z}).`,ye)}}const Ne=/\{\$([^}]+)}/g;function ot(Fe){return JSON.parse(Fe)}function qt(Fe){return JSON.stringify(Fe)}const pn=function(Fe){let Me={},me={},ye={},z="";try{const ie=Fe.split(".");Me=ot(Ie(ie[0])||""),me=ot(Ie(ie[1])||""),z=ie[2],ye=me.d||{},delete me.d}catch(ie){}return{header:Me,claims:me,data:ye,signature:z}},cr=function(Fe){const me=pn(Fe).claims;return!!me&&"object"==typeof me&&me.hasOwnProperty("iat")},_r=function(Fe){const Me=pn(Fe).claims;return"object"==typeof Me&&!0===Me.admin};function jn(Fe,Me){return Object.prototype.hasOwnProperty.call(Fe,Me)}function Xn(Fe,Me){if(Object.prototype.hasOwnProperty.call(Fe,Me))return Fe[Me]}function gn(Fe){for(const Me in Fe)if(Object.prototype.hasOwnProperty.call(Fe,Me))return!1;return!0}function sr(Fe,Me,me){const ye={};for(const z in Fe)Object.prototype.hasOwnProperty.call(Fe,z)&&(ye[z]=Me.call(me,Fe[z],z,Fe));return ye}function Pn(Fe,Me){if(Fe===Me)return!0;const me=Object.keys(Fe),ye=Object.keys(Me);for(const z of me){if(!ye.includes(z))return!1;const ie=Fe[z],se=Me[z];if(Ln(ie)&&Ln(se)){if(!Pn(ie,se))return!1}else if(ie!==se)return!1}for(const z of ye)if(!me.includes(z))return!1;return!0}function Ln(Fe){return null!==Fe&&"object"==typeof Fe}function $i(Fe){const Me=[];for(const[me,ye]of Object.entries(Fe))Array.isArray(ye)?ye.forEach(z=>{Me.push(encodeURIComponent(me)+"="+encodeURIComponent(z))}):Me.push(encodeURIComponent(me)+"="+encodeURIComponent(ye));return Me.length?"&"+Me.join("&"):""}function xt(Fe){const Me={};return Fe.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[z,ie]=ye.split("=");Me[decodeURIComponent(z)]=decodeURIComponent(ie)}}),Me}function He(Fe){const Me=Fe.indexOf("?");if(!Me)return"";const me=Fe.indexOf("#",Me);return Fe.substring(Me,me>0?me:void 0)}class Ge{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Me=1;Me<this.blockSize;++Me)this.pad_[Me]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Me,me){me||(me=0);const ye=this.W_;if("string"==typeof Me)for(let bn=0;bn<16;bn++)ye[bn]=Me.charCodeAt(me)<<24|Me.charCodeAt(me+1)<<16|Me.charCodeAt(me+2)<<8|Me.charCodeAt(me+3),me+=4;else for(let bn=0;bn<16;bn++)ye[bn]=Me[me]<<24|Me[me+1]<<16|Me[me+2]<<8|Me[me+3],me+=4;for(let bn=16;bn<80;bn++){const gr=ye[bn-3]^ye[bn-8]^ye[bn-14]^ye[bn-16];ye[bn]=4294967295&(gr<<1|gr>>>31)}let Bt,on,z=this.chain_[0],ie=this.chain_[1],se=this.chain_[2],we=this.chain_[3],ct=this.chain_[4];for(let bn=0;bn<80;bn++){bn<40?bn<20?(Bt=we^ie&(se^we),on=1518500249):(Bt=ie^se^we,on=1859775393):bn<60?(Bt=ie&se|we&(ie|se),on=2400959708):(Bt=ie^se^we,on=3395469782);const gr=(z<<5|z>>>27)+Bt+ct+on+ye[bn]&4294967295;ct=we,we=se,se=4294967295&(ie<<30|ie>>>2),ie=z,z=gr}this.chain_[0]=this.chain_[0]+z&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+we&4294967295,this.chain_[4]=this.chain_[4]+ct&4294967295}update(Me,me){if(null==Me)return;void 0===me&&(me=Me.length);const ye=me-this.blockSize;let z=0;const ie=this.buf_;let se=this.inbuf_;for(;z<me;){if(0===se)for(;z<=ye;)this.compress_(Me,z),z+=this.blockSize;if("string"==typeof Me){for(;z<me;)if(ie[se]=Me.charCodeAt(z),++se,++z,se===this.blockSize){this.compress_(ie),se=0;break}}else for(;z<me;)if(ie[se]=Me[z],++se,++z,se===this.blockSize){this.compress_(ie),se=0;break}}this.inbuf_=se,this.total_+=me}digest(){const Me=[];let me=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let z=this.blockSize-1;z>=56;z--)this.buf_[z]=255&me,me/=256;this.compress_(this.buf_);let ye=0;for(let z=0;z<5;z++)for(let ie=24;ie>=0;ie-=8)Me[ye]=this.chain_[z]>>ie&255,++ye;return Me}}function ht(Fe,Me){const me=new At(Fe,Me);return me.subscribe.bind(me)}class At{constructor(Me,me){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=me,this.task.then(()=>{Me(this)}).catch(ye=>{this.error(ye)})}next(Me){this.forEachObserver(me=>{me.next(Me)})}error(Me){this.forEachObserver(me=>{me.error(Me)}),this.close(Me)}complete(){this.forEachObserver(Me=>{Me.complete()}),this.close()}subscribe(Me,me,ye){let z;if(void 0===Me&&void 0===me&&void 0===ye)throw new Error("Missing Observer.");z=function sn(Fe,Me){if("object"!=typeof Fe||null===Fe)return!1;for(const me of Me)if(me in Fe&&"function"==typeof Fe[me])return!0;return!1}(Me,["next","error","complete"])?Me:{next:Me,error:me,complete:ye},void 0===z.next&&(z.next=br),void 0===z.error&&(z.error=br),void 0===z.complete&&(z.complete=br);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch(se){}}),this.observers.push(z),ie}unsubscribeOne(Me){void 0===this.observers||void 0===this.observers[Me]||(delete this.observers[Me],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Me){if(!this.finalized)for(let me=0;me<this.observers.length;me++)this.sendOne(me,Me)}sendOne(Me,me){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Me])try{me(this.observers[Me])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(Me){this.finalized||(this.finalized=!0,void 0!==Me&&(this.finalError=Me),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function br(){}const zn=function(Fe,Me,me,ye){let z;if(ye<Me?z="at least "+Me:ye>me&&(z=0===me?"none":"no more than "+me),z)throw new Error(Fe+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+z+".")};function Vn(Fe,Me){return`${Fe} failed: ${Me} argument `}function lr(Fe,Me,me,ye){if((!ye||me)&&"function"!=typeof me)throw new Error(Vn(Fe,Me)+"must be a valid function.")}function mr(Fe,Me,me,ye){if((!ye||me)&&("object"!=typeof me||null===me))throw new Error(Vn(Fe,Me)+"must be a valid context object.")}const nn=function(Fe){const Me=[];let me=0;for(let ye=0;ye<Fe.length;ye++){let z=Fe.charCodeAt(ye);if(z>=55296&&z<=56319){const ie=z-55296;ye++,L(ye<Fe.length,"Surrogate pair missing trail surrogate."),z=65536+(ie<<10)+(Fe.charCodeAt(ye)-56320)}z<128?Me[me++]=z:z<2048?(Me[me++]=z>>6|192,Me[me++]=63&z|128):z<65536?(Me[me++]=z>>12|224,Me[me++]=z>>6&63|128,Me[me++]=63&z|128):(Me[me++]=z>>18|240,Me[me++]=z>>12&63|128,Me[me++]=z>>6&63|128,Me[me++]=63&z|128)}return Me},Sr=function(Fe){let Me=0;for(let me=0;me<Fe.length;me++){const ye=Fe.charCodeAt(me);ye<128?Me++:ye<2048?Me+=2:ye>=55296&&ye<=56319?(Me+=4,me++):Me+=3}return Me};function Jr(Fe,Me=1e3,me=2){const ye=Me*Math.pow(me,Fe),z=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+z)}function Br(Fe){return Fe&&Fe._delegate?Fe._delegate:Fe}},5089:(hn,ut,U)=>{U.d(ut,{e:()=>Pe});var _=U(2340),L=U(5e3),ee=U(520),re=U(2729);let Pe=(()=>{class je{constructor(Be,rt){this.http=Be,this.router=rt,this.logoutloading=!1}login(Be){return this.http.post(`${_.N.apiUrl}login_teacher`,Be)}logout(){this.logoutloading=!0,this.http.post(`${_.N.apiUrl}logout`,{}).subscribe(Be=>{localStorage.clear(),this.router.navigate(["/auth/login"]),this.logoutloading=!1,window.location.reload()})}}return je.\u0275fac=function(Be){return new(Be||je)(L.LFG(ee.eN),L.LFG(re.F0))},je.\u0275prov=L.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})()},507:(hn,ut,U)=>{U.d(ut,{a:()=>re});var _=U(1591),L=U(5e3),ee=U(2290);let re=(()=>{class Pe{constructor(We){this.toastr=We,this.showNotification=!1,this.notificationInfo=null,this.db=(0,_.N8)(),this.messageRef=null}listenToChatUsers(We,Be,rt){const Ie=(0,_.iH)(this.db,`Subjects-Messages/${We}`);(0,_.jM)(Ie,ve=>{var Je,Tt;const ft=ve.val();if(!ft)return rt([]);const bt=[];for(const Mt in ft){const Xe=Object.values(ft[Mt]),Ct=Xe.sort((it,xe)=>new Date(it.date).getTime()-new Date(xe.date).getTime()),Ke=Ct[Ct.length-1],Kt=Xe.some(it=>!1===it.did_read&&it.from_id!==Be&&"_1"!==it.from_id&&!it.from_display_name);Mt!=localStorage.getItem("userid")&&bt.push({userId:Mt,name:(null===(Je=Ct.find(it=>it.from_id!==Be&&"_1"!==it.from_id&&!it.from_display_name))||void 0===Je?void 0:Je.from)||"\u0637\u0627\u0644\u0628",phone:(null===(Tt=Ct.find(it=>it.from_id!==Be&&"_1"!==it.from_id&&!it.from_display_name))||void 0===Tt?void 0:Tt.from_number)||"",hasUnread:Kt,lastDate:Ke.date})}bt.sort((Mt,Xe)=>new Date(Xe.lastDate).getTime()-new Date(Mt.lastDate).getTime()),rt(bt)})}listenToMessages(We,Be,rt,Ie){this.messageRef&&(0,_.S1)(this.messageRef);const ve=`Subjects-Messages/${We}/${Be}`;this.messageRef=(0,_.iH)(this.db,ve);const Je=[];(0,_.yv)(this.messageRef,Tt=>{const ft=Tt.val(),bt=Tt.key;ft.from_id!==rt&&"_1"!==ft.from_id&&!1===ft.did_read&&!ft.from_display_name&&(console.log(ve),(0,_.Vx)((0,_.iH)(this.db,`${ve}/${bt}`),{did_read:!0})),Je.push(Object.assign(Object.assign({},ft),{key:bt}));const Mt=[...Je].sort((Xe,Ct)=>new Date(Xe.date).getTime()-new Date(Ct.date).getTime());Ie([...Mt])})}markMessagesAsRead(We,Be,rt){const Ie=`Subjects-Messages/${We}/${Be}`,ve=(0,_.iH)(this.db,Ie);(0,_.U2)(ve).then(Je=>{Je.forEach(Tt=>{const ft=Tt.val();ft.from_id!==rt&&"_1"!==ft.from_id&&!1===ft.did_read&&!ft.from_display_name&&(console.log("doneeee"),(0,_.Vx)((0,_.iH)(this.db,`${Ie}/${Tt.key}`),{did_read:!0}))})})}stopListeningToMessages(){this.messageRef&&((0,_.S1)(this.messageRef),this.messageRef=null)}getTeacherChatList(We,Be,rt){let Ie=[];We.forEach(ve=>{const Je=(0,_.iH)(this.db,`Subjects-Messages/${ve}`);(0,_.yv)(Je,Tt=>{const ft=Tt.key,bt=(0,_.iH)(this.db,`Subjects-Messages/${ve}/${ft}`);(0,_.yv)(bt,Mt=>{console.log("ui");const Xe=Mt.val();if(Xe.to_id==ve||Xe.from_id==localStorage.getItem("userid")){const Ct=!Xe.did_read&&Xe.from_id!==Be,Ke=Ie.findIndex(Kt=>Kt.userId===ft&&Kt.materialId===ve);if(Ke>-1){const Kt=new Date(Ie[Ke].lastMessageDate).getTime();new Date(Xe.date).getTime()>Kt&&(Ie[Ke].lastMessageDate=Xe.date,Ie[Ke].lastMessage="audio"==(null==Xe?void 0:Xe.type)?"\u0631\u0633\u0627\u0644\u0629 \u0635\u0648\u062a\u064a\u0629":"photo"==(null==Xe?void 0:Xe.type)?"\u0635\u0648\u0631\u0629":Xe.message_content||""),Ie[Ke].hasUnread=Ie[Ke].hasUnread||Ct}else Xe.from_id!=localStorage.getItem("userid")&&Ie.push({materialId:ve,materialName:Xe.material_name,userId:ft,userName:Xe.from,lastMessageDate:Xe.date,lastMessage:"audio"==(null==Xe?void 0:Xe.type)?"\u0631\u0633\u0627\u0644\u0629 \u0635\u0648\u062a\u064a\u0629":"photo"==(null==Xe?void 0:Xe.type)?"\u0635\u0648\u0631\u0629":Xe.message_content||"",hasUnread:Ct});Ie.sort((Kt,it)=>new Date(it.lastMessageDate).getTime()-new Date(Kt.lastMessageDate).getTime()),rt([...Ie])}}),(0,_.Jr)(bt,Mt=>{const Xe=Mt.val();console.log(Xe,Ie),Ie=Ie.map(Ct=>Ct.materialId==Xe.to_id&&Ct.userId==Xe.from_id?Object.assign(Object.assign({},Ct),{hasUnread:!Xe.did_read,lastMessage:"audio"==(null==Xe?void 0:Xe.type)?"\u0631\u0633\u0627\u0644\u0629 \u0635\u0648\u062a\u064a\u0629":"photo"==(null==Xe?void 0:Xe.type)?"\u0635\u0648\u0631\u0629":Xe.message_content||"",lastMessageDate:Xe.date}):Ct),rt([...Ie])})})})}listenForNewMessages(We,Be){const rt=new Date;We.forEach(Ie=>{const ve=(0,_.iH)(this.db,`Subjects-Messages/${Ie}`);(0,_.yv)(ve,Je=>{const ft=(0,_.iH)(this.db,`Subjects-Messages/${Ie}/${Je.key}`);(0,_.yv)(ft,bt=>{const Mt=bt.val();new Date(Mt.date)>rt&&We.includes(Mt.to_id)&&Mt.from_id!==Be&&"_1"!==Mt.from_id&&!Mt.from_display_name&&(this.showNotification=!0,this.notificationInfo=Mt,setTimeout(()=>{this.showNotification=!1,this.notificationInfo=null},5e3))})})})}}return Pe.\u0275fac=function(We){return new(We||Pe)(L.LFG(ee._W))},Pe.\u0275prov=L.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})()},2169:(hn,ut,U)=>{U.d(ut,{Y:()=>re});var _=U(2340),L=U(5e3),ee=U(520);let re=(()=>{class Pe{constructor(We){this.http=We}getHomeStages(){return this.http.get(`${_.N.apiUrl}teacher/materials`)}}return Pe.\u0275fac=function(We){return new(We||Pe)(L.LFG(ee.eN))},Pe.\u0275prov=L.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})()},4466:(hn,ut,U)=>{U.d(ut,{m:()=>Be});var _=U(9808),L=U(2729),ee=U(2382),re=U(520),Pe=U(2290),je=U(377),We=U(5e3);let Be=(()=>{class rt{}return rt.\u0275fac=function(ve){return new(ve||rt)},rt.\u0275mod=We.oAB({type:rt}),rt.\u0275inj=We.cJS({providers:[_.uU],imports:[[je.TE,_.ez,L.Bz,ee.UX,ee.u5,re.JF,Pe.Rh.forRoot()],je.TE,ee.UX,ee.u5,re.JF,Pe.Rh]}),rt})()},2340:(hn,ut,U)=>{U.d(ut,{N:()=>_});const _={production:!0,apiUrl:"https://drastiiq8.com/demo-dev/Drasti-Backend/public/api/"}},6867:(hn,ut,U)=>{var _=U(2313),L=U(5e3),ee=U(2729);let re=(()=>{class N{constructor(C){this.router=C}canActivate(C,x){return!localStorage.getItem("namnamToken")||(this.router.navigate(["/"]),!1)}}return N.\u0275fac=function(C){return new(C||N)(L.LFG(ee.F0))},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),Pe=(()=>{class N{constructor(C){this.title=C}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - NAMNAM")}}return N.\u0275fac=function(C){return new(C||N)(L.Y36(_.Dx))},N.\u0275cmp=L.Xpm({type:N,selectors:[["app-notfound"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(C,x){1&C&&(L.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),L._uU(4,"\u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627."),L.qZA()()()())},styles:[""]}),N})(),je=(()=>{class N{constructor(C){this.router=C}canActivate(C,x){return!!localStorage.getItem("namnamToken")||(this.router.navigate(["/auth/login"]),!1)}}return N.\u0275fac=function(C){return new(C||N)(L.LFG(ee.F0))},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const We=[{path:"",loadChildren:()=>Promise.all([U.e(592),U.e(499)]).then(U.bind(U,6499)).then(N=>N.HomeModule),canActivate:[je]},{path:"material-chat/:id/:name",loadChildren:()=>Promise.all([U.e(592),U.e(359)]).then(U.bind(U,8359)).then(N=>N.ChattingModule),canActivate:[je]},{path:"all-msgs",loadChildren:()=>Promise.all([U.e(592),U.e(522)]).then(U.bind(U,522)).then(N=>N.AllMsgsModule),canActivate:[je]},{path:"auth",loadChildren:()=>U.e(836).then(U.bind(U,7836)).then(N=>N.AuthModule),canActivate:[re]},{path:"**",component:Pe}];let Be=(()=>{class N{}return N.\u0275fac=function(C){return new(C||N)},N.\u0275mod=L.oAB({type:N}),N.\u0275inj=L.cJS({imports:[[ee.Bz.forRoot(We,{initialNavigation:"enabled",scrollPositionRestoration:"enabled"})],ee.Bz]}),N})();var rt=U(259),Ie=U(1591),ve=U(4004),Je=U(4986),Tt=U(8306),ft=U(9646),bt=U(6451),Mt=U(3099),Xe=U(3900),Ct=U(5026),Ke=U(1884),Kt=U(4482),it=U(5403),xe=U(8421),Qe=U(4671),_t=U(5032),It=U(7669),Nt=U(4976),An=U(2011),Fn=(U(9568),U(3942)),ln=U(4859),rn=U(1627),Ot=U(2090);const st=new(U(1877).Yd)("@firebase/database-compat"),nt=function(N){st.warn("FIREBASE WARNING: "+N)};class Ee{constructor(E){this._delegate=E}cancel(E){(0,Ot.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Ot.Wj)("OnDisconnect.cancel","onComplete",E,!0);const C=this._delegate.cancel();return E&&C.then(()=>E(null),x=>E(x)),C}remove(E){(0,Ot.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Ot.Wj)("OnDisconnect.remove","onComplete",E,!0);const C=this._delegate.remove();return E&&C.then(()=>E(null),x=>E(x)),C}set(E,C){(0,Ot.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Ot.Wj)("OnDisconnect.set","onComplete",C,!0);const x=this._delegate.set(E);return C&&x.then(()=>C(null),Z=>C(Z)),x}setWithPriority(E,C,x){(0,Ot.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Ot.Wj)("OnDisconnect.setWithPriority","onComplete",x,!0);const Z=this._delegate.setWithPriority(E,C);return x&&Z.then(()=>x(null),oe=>x(oe)),Z}update(E,C){if((0,Ot.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(E)){const Z={};for(let oe=0;oe<E.length;++oe)Z[""+oe]=E[oe];E=Z,nt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Ot.Wj)("OnDisconnect.update","onComplete",C,!0);const x=this._delegate.update(E);return C&&x.then(()=>C(null),Z=>C(Z)),x}}class Ne{constructor(E,C){this.committed=E,this.snapshot=C}toJSON(){return(0,Ot.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ot{constructor(E,C){this._database=E,this._delegate=C}val(){return(0,Ot.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Ot.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Ot.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Ot.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(E){return(0,Ot.Dv)("DataSnapshot.child",0,1,arguments.length),E=String(E),(0,rn.FQ)("DataSnapshot.child","path",E,!1),new ot(this._database,this._delegate.child(E))}hasChild(E){return(0,Ot.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,rn.FQ)("DataSnapshot.hasChild","path",E,!1),this._delegate.hasChild(E)}getPriority(){return(0,Ot.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(E){return(0,Ot.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Ot.Wj)("DataSnapshot.forEach","action",E,!1),this._delegate.forEach(C=>E(new ot(this._database,C)))}hasChildren(){return(0,Ot.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Ot.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Ot.Dv)("DataSnapshot.ref",0,0,arguments.length),new pn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qt{constructor(E,C){this.database=E,this._delegate=C}on(E,C,x,Z){var oe;(0,Ot.Dv)("Query.on",2,4,arguments.length),(0,Ot.Wj)("Query.on","callback",C,!1);const Ae=qt.getCancelAndContextArgs_("Query.on",x,Z),w=(g,b)=>{C.call(Ae.context,new ot(this.database,g),b)};w.userCallback=C,w.context=Ae.context;const f=null===(oe=Ae.cancel)||void 0===oe?void 0:oe.bind(Ae.context);switch(E){case"value":return(0,rn.jM)(this._delegate,w,f),C;case"child_added":return(0,rn.yv)(this._delegate,w,f),C;case"child_removed":return(0,rn.MQ)(this._delegate,w,f),C;case"child_changed":return(0,rn.Jr)(this._delegate,w,f),C;case"child_moved":return(0,rn.Vt)(this._delegate,w,f),C;default:throw new Error((0,Ot.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(E,C,x){if((0,Ot.Dv)("Query.off",0,3,arguments.length),function(N,E,C){if(void 0!==E)switch(E){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Ot.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,E),(0,Ot.Wj)("Query.off","callback",C,!0),(0,Ot.lb)("Query.off","context",x,!0),C){const Z=()=>{};Z.userCallback=C,Z.context=x,(0,rn.S1)(this._delegate,E,Z)}else(0,rn.S1)(this._delegate,E)}get(){return(0,rn.U2)(this._delegate).then(E=>new ot(this.database,E))}once(E,C,x,Z){(0,Ot.Dv)("Query.once",1,4,arguments.length),(0,Ot.Wj)("Query.once","callback",C,!0);const oe=qt.getCancelAndContextArgs_("Query.once",x,Z),Ae=new Ot.BH,w=(g,b)=>{const Y=new ot(this.database,g);C&&C.call(oe.context,Y,b),Ae.resolve(Y)};w.userCallback=C,w.context=oe.context;const f=g=>{oe.cancel&&oe.cancel.call(oe.context,g),Ae.reject(g)};switch(E){case"value":(0,rn.jM)(this._delegate,w,f,{onlyOnce:!0});break;case"child_added":(0,rn.yv)(this._delegate,w,f,{onlyOnce:!0});break;case"child_removed":(0,rn.MQ)(this._delegate,w,f,{onlyOnce:!0});break;case"child_changed":(0,rn.Jr)(this._delegate,w,f,{onlyOnce:!0});break;case"child_moved":(0,rn.Vt)(this._delegate,w,f,{onlyOnce:!0});break;default:throw new Error((0,Ot.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return Ae.promise}limitToFirst(E){return(0,Ot.Dv)("Query.limitToFirst",1,1,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.Kk)(E)))}limitToLast(E){return(0,Ot.Dv)("Query.limitToLast",1,1,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.vh)(E)))}orderByChild(E){return(0,Ot.Dv)("Query.orderByChild",1,1,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.g2)(E)))}orderByKey(){return(0,Ot.Dv)("Query.orderByKey",0,0,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.R)()))}orderByPriority(){return(0,Ot.Dv)("Query.orderByPriority",0,0,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.HE)()))}orderByValue(){return(0,Ot.Dv)("Query.orderByValue",0,0,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.Bd)()))}startAt(E=null,C){return(0,Ot.Dv)("Query.startAt",0,2,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.e0)(E,C)))}startAfter(E=null,C){return(0,Ot.Dv)("Query.startAfter",0,2,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.TQ)(E,C)))}endAt(E=null,C){return(0,Ot.Dv)("Query.endAt",0,2,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.Wu)(E,C)))}endBefore(E=null,C){return(0,Ot.Dv)("Query.endBefore",0,2,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.Lx)(E,C)))}equalTo(E,C){return(0,Ot.Dv)("Query.equalTo",1,2,arguments.length),new qt(this.database,(0,rn.IO)(this._delegate,(0,rn.EW)(E,C)))}toString(){return(0,Ot.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Ot.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(E){if((0,Ot.Dv)("Query.isEqual",1,1,arguments.length),!(E instanceof qt))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(E._delegate)}static getCancelAndContextArgs_(E,C,x){const Z={cancel:void 0,context:void 0};if(C&&x)Z.cancel=C,(0,Ot.Wj)(E,"cancel",Z.cancel,!0),Z.context=x,(0,Ot.lb)(E,"context",Z.context,!0);else if(C)if("object"==typeof C&&null!==C)Z.context=C;else{if("function"!=typeof C)throw new Error((0,Ot.gK)(E,"cancelOrContext")+" must either be a cancel callback or a context object.");Z.cancel=C}return Z}get ref(){return new pn(this.database,new rn.tn(this._delegate._repo,this._delegate._path))}}class pn extends qt{constructor(E,C){super(E,new rn.JH(C._repo,C._path,new rn.G$,!1)),this.database=E,this._delegate=C}getKey(){return(0,Ot.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(E){return(0,Ot.Dv)("Reference.child",1,1,arguments.length),"number"==typeof E&&(E=String(E)),new pn(this.database,(0,rn.iU)(this._delegate,E))}getParent(){(0,Ot.Dv)("Reference.parent",0,0,arguments.length);const E=this._delegate.parent;return E?new pn(this.database,E):null}getRoot(){return(0,Ot.Dv)("Reference.root",0,0,arguments.length),new pn(this.database,this._delegate.root)}set(E,C){(0,Ot.Dv)("Reference.set",1,2,arguments.length),(0,Ot.Wj)("Reference.set","onComplete",C,!0);const x=(0,rn.t8)(this._delegate,E);return C&&x.then(()=>C(null),Z=>C(Z)),x}update(E,C){if((0,Ot.Dv)("Reference.update",1,2,arguments.length),Array.isArray(E)){const Z={};for(let oe=0;oe<E.length;++oe)Z[""+oe]=E[oe];E=Z,nt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,rn.mI)("Reference.update",this._delegate._path),(0,Ot.Wj)("Reference.update","onComplete",C,!0);const x=(0,rn.Vx)(this._delegate,E);return C&&x.then(()=>C(null),Z=>C(Z)),x}setWithPriority(E,C,x){(0,Ot.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Ot.Wj)("Reference.setWithPriority","onComplete",x,!0);const Z=(0,rn.cy)(this._delegate,E,C);return x&&Z.then(()=>x(null),oe=>x(oe)),Z}remove(E){(0,Ot.Dv)("Reference.remove",0,1,arguments.length),(0,Ot.Wj)("Reference.remove","onComplete",E,!0);const C=(0,rn.Od)(this._delegate);return E&&C.then(()=>E(null),x=>E(x)),C}transaction(E,C,x){(0,Ot.Dv)("Reference.transaction",1,3,arguments.length),(0,Ot.Wj)("Reference.transaction","transactionUpdate",E,!1),(0,Ot.Wj)("Reference.transaction","onComplete",C,!0),function(N,E,C,x){if(void 0!==C&&"boolean"!=typeof C)throw new Error((0,Ot.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,x);const Z=(0,rn.i3)(this._delegate,E,{applyLocally:x}).then(oe=>new Ne(oe.committed,new ot(this.database,oe.snapshot)));return C&&Z.then(oe=>C(null,oe.committed,oe.snapshot),oe=>C(oe,!1,null)),Z}setPriority(E,C){(0,Ot.Dv)("Reference.setPriority",1,2,arguments.length),(0,Ot.Wj)("Reference.setPriority","onComplete",C,!0);const x=(0,rn.Sl)(this._delegate,E);return C&&x.then(()=>C(null),Z=>C(Z)),x}push(E,C){(0,Ot.Dv)("Reference.push",0,2,arguments.length),(0,Ot.Wj)("Reference.push","onComplete",C,!0);const x=(0,rn.VF)(this._delegate,E),Z=x.then(Ae=>new pn(this.database,Ae));C&&Z.then(()=>C(null),Ae=>C(Ae));const oe=new pn(this.database,x);return oe.then=Z.then.bind(Z),oe.catch=Z.catch.bind(Z,void 0),oe}onDisconnect(){return(0,rn.mI)("Reference.onDisconnect",this._delegate._path),new Ee(new rn.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vn{constructor(E,C){this._delegate=E,this.app=C,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:rn.TD,forceLongPolling:rn.Ot}}useEmulator(E,C,x={}){(0,rn.dH)(this._delegate,E,C,x)}ref(E){if((0,Ot.Dv)("database.ref",0,1,arguments.length),E instanceof pn){const C=(0,rn.qT)(this._delegate,E.toString());return new pn(this,C)}{const C=(0,rn.iH)(this._delegate,E);return new pn(this,C)}}refFromURL(E){(0,Ot.Dv)("database.refFromURL",1,1,arguments.length);const x=(0,rn.qT)(this._delegate,E);return new pn(this,x)}goOffline(){return(0,Ot.Dv)("database.goOffline",0,0,arguments.length),(0,rn.Sb)(this._delegate)}goOnline(){return(0,Ot.Dv)("database.goOnline",0,0,arguments.length),(0,rn.$o)(this._delegate)}}vn.ServerValue={TIMESTAMP:(0,rn.Bt)(),increment:N=>(0,rn.nP)(N)};var cr=Object.freeze({__proto__:null,initStandalone:function Nn({app:N,url:E,version:C,customAuthImpl:x,namespace:Z,nodeAdmin:oe=!1}){(0,rn.AM)(C);const Ae=new ln.zt("auth-internal",new ln.H0("database-standalone"));return Ae.setComponent(new ln.wA("auth-internal",()=>x,"PRIVATE")),{instance:new vn((0,rn.wj)(N,Ae,void 0,E,oe),N),namespace:Z}}});const _r=vn.ServerValue;!function jn(N){N.INTERNAL.registerComponent(new ln.wA("database-compat",(E,{instanceIdentifier:C})=>{const x=E.getProvider("app-compat").getImmediate(),Z=E.getProvider("database").getImmediate({identifier:C});return new vn(Z,x)},"PUBLIC").setServiceProps({Reference:pn,Query:qt,Database:vn,DataSnapshot:ot,enableLogging:rn.U7,INTERNAL:cr,ServerValue:_r}).setMultipleInstances(!0)),N.registerVersion("@firebase/database-compat","0.3.4")}(Fn.Z);var Xn=U(1205),gn=U(6215);function Qr(N){return null==N}function $i(N){return"function"==typeof N.set}function xt(N,E){return $i(E)?E:N.ref(E)}function He(N,E){if(function Pn(N){return"string"==typeof N}(N))return E.stringCase();if($i(N))return E.firebaseCase();if(function Ln(N){return"function"==typeof N.exportVal}(N))return E.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof N)}function Ge(N,E,C="on",x=Je.z){return new Tt.y(Z=>{let oe=null;return oe=N[C](E,(Ae,w)=>{x.schedule(()=>{Z.next({snapshot:Ae,prevKey:w})}),"once"===C&&x.schedule(()=>Z.complete())},Ae=>{x.schedule(()=>Z.error(Ae))}),"on"===C?{unsubscribe(){null!=oe&&N.off(E,oe)}}:{unsubscribe(){}}}).pipe((0,ve.U)(Z=>{const{snapshot:oe,prevKey:Ae}=Z;let w=null;return oe.exists()&&(w=oe.key),{type:E,payload:oe,prevKey:Ae,key:w}}),(0,Mt.B)())}function At(N,E){const C=N.length;for(let x=0;x<C;x++)if(N[x].payload.key===E)return x;return-1}function sn(N,E){const{payload:C,prevKey:x,key:Z}=E,oe=At(N,Z),Ae=function Zt(N,E){if(Qr(E))return 0;{const C=At(N,E);return-1===C?N.length:C+1}}(N,x);switch(E.type){case"value":if(E.payload&&E.payload.exists()){let w=null;E.payload.forEach(f=>{const g={payload:f,type:"value",prevKey:w,key:f.key};return w=f.key,N=[...N,g],!1})}return N;case"child_added":if(oe>-1){const w=N[oe-1];(w&&w.key||null)!==x&&(N=N.filter(f=>f.payload.key!==C.key)).splice(Ae,0,E)}else{if(null==x)return[E,...N];(N=N.slice()).splice(Ae,0,E)}return N;case"child_removed":return N.filter(w=>w.payload.key!==C.key);case"child_changed":return N.map(w=>w.payload.key===Z?E:w);case"child_moved":if(oe>-1){const w=N.splice(oe,1)[0];return(N=N.slice()).splice(Ae,0,w),N}return N;default:return N}}function br(N){return(Qr(N)||0===N.length)&&(N=["child_added","child_removed","child_changed","child_moved"]),N}function zn(N,E,C){return function ht(N,E,C){return Ge(N,"value","once",C).pipe((0,Xe.w)(x=>{const Z=[(0,ft.of)(x)];return E.forEach(oe=>Z.push(Ge(N,oe,"on",C))),(0,bt.T)(...Z).pipe((0,Ct.R)(sn,[]))}),(0,Ke.x)())}(N,E=br(E),C)}function Vn(N,E,C){const x=(E=br(E)).map(Z=>Ge(N,Z,"on",C));return(0,bt.T)(...x)}function nn(N,E){return function(x,Z){return He(x,{stringCase:()=>N.child(x)[E](Z),firebaseCase:()=>x[E](Z),snapshotCase:()=>x.ref[E](Z)})}}function Sr(N){return function(C){return C?He(C,{stringCase:()=>N.child(C).remove(),firebaseCase:()=>C.remove(),snapshotCase:()=>C.ref.remove()}):N.remove()}}function dr(N,E){return function(){return Ge(N,"value","on",E)}}U(9260);const Pr=new L.OlP("angularfire2.realtimeDatabaseURL"),jr=new L.OlP("angularfire2.database.use-emulator");let Jr=(()=>{class N{constructor(C,x,Z,oe,Ae,w,f,g,b,Y,ae,$e,et,Vt,dn){this.schedulers=w;const Mn=f,kn=(0,An.on)(C,Ae,x);g&&(0,Xn.nw)(kn,Ae,b,ae,$e,et,Y,Vt),this.database=(0,An.cc)(`${kn.name}.database.${Z}`,"AngularFireDatabase",kn.name,()=>{const Mr=Ae.runOutsideAngular(()=>kn.database(Z||void 0));return Mn&&Mr.useEmulator(...Mn),Mr},[Mn])}list(C,x){const Z=this.schedulers.ngZone.runOutsideAngular(()=>xt(this.database,C));let oe=Z;return x&&(oe=x(Z)),function er(N,E){const C=E.schedulers.outsideAngular,x=E.schedulers.ngZone.run(()=>N.ref);return{query:N,update:nn(x,"update"),set:nn(x,"set"),push:Z=>x.push(Z),remove:Sr(x),snapshotChanges:Z=>zn(N,Z,C).pipe(Nt.iC),stateChanges:Z=>Vn(N,Z,C).pipe(Nt.iC),auditTrail:Z=>function yi(N,E,C){return function mr(N,E,C){return function lr(N,E){return Ge(N,"value","on",E).pipe((0,ve.U)(C=>{let x;return C.payload.forEach(Z=>(x=Z.key,!1)),{data:C,lastKeyToLoad:x}}))}(N,C).pipe(function be(...N){const E=(0,It.jO)(N);return(0,Kt.e)((C,x)=>{const Z=N.length,oe=new Array(Z);let Ae=N.map(()=>!1),w=!1;for(let f=0;f<Z;f++)(0,xe.Xf)(N[f]).subscribe((0,it.x)(x,g=>{oe[f]=g,!w&&!Ae[f]&&(Ae[f]=!0,(w=Ae.every(Qe.y))&&(Ae=null))},_t.Z));C.subscribe((0,it.x)(x,f=>{if(w){const g=[f,...oe];x.next(E?E(...g):g)}}))})}(E),(0,ve.U)(([Z,oe])=>{const Ae=Z.lastKeyToLoad,w=oe.map(f=>f.key);return{actions:oe,lastKeyToLoad:Ae,loadedKeys:w}}),function Ht(N){return(0,Kt.e)((E,C)=>{let x=!1,Z=0;E.subscribe((0,it.x)(C,oe=>(x||(x=!N(oe,Z++)))&&C.next(oe)))})}(Z=>-1===Z.loadedKeys.indexOf(Z.lastKeyToLoad)),(0,ve.U)(Z=>Z.actions))}(N,Vn(N,E).pipe((0,Ct.R)((Z,oe)=>[...Z,oe],[])),C)}(N,Z,C).pipe(Nt.iC),valueChanges:(Z,oe)=>zn(N,Z,C).pipe((0,ve.U)(w=>w.map(f=>oe&&oe.idField?Object.assign(Object.assign({},f.payload.val()),{[oe.idField]:f.key}):f.payload.val())),Nt.iC)}}(oe,this)}object(C){return function Zn(N,E){return{query:N,snapshotChanges:()=>dr(N,E.schedulers.outsideAngular)().pipe(Nt.iC),update:C=>N.ref.update(C),set:C=>N.ref.set(C),remove:()=>N.ref.remove(),valueChanges:()=>dr(N,E.schedulers.outsideAngular)().pipe(Nt.iC,(0,ve.U)(x=>x.payload.exists()?x.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>xt(this.database,C)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return N.\u0275fac=function(C){return new(C||N)(L.LFG(An.Dh),L.LFG(An.xv,8),L.LFG(Pr,8),L.LFG(L.Lbi),L.LFG(L.R0b),L.LFG(Nt.HU),L.LFG(jr,8),L.LFG(Xn.zQ,8),L.LFG(Xn.Qv,8),L.LFG(Xn.L6,8),L.LFG(Xn._Q,8),L.LFG(Xn.rT,8),L.LFG(Xn.lh,8),L.LFG(Xn.f7,8),L.LFG(gn.nm,8))},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac,providedIn:"any"}),N})();var Ni=U(2169),Br=U(507),Fe=U(5089),Me=U(9808);function me(N,E){if(1&N){const C=L.EpF();L.TgZ(0,"div",6)(1,"a",7),L._uU(2,"\u0645\u0648\u0627\u062f\u064a"),L.qZA(),L._UZ(3,"span",8),L.TgZ(4,"a",9),L._uU(5,"\u0627\u0644\u0627\u0633\u0626\u0644\u0629"),L.qZA(),L._UZ(6,"span",8),L.TgZ(7,"button",10),L.NdJ("click",function(){return L.CHM(C),L.oxw().authService.logout()}),L._uU(8," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),L.qZA()()}if(2&N){const C=L.oxw();L.xp6(7),L.Q6J("disabled",C.authService.logoutloading)}}let ye=(()=>{class N{constructor(C){this.authService=C}ngOnInit(){}isLogin(){return!!localStorage.getItem("namnamToken")}}return N.\u0275fac=function(C){return new(C||N)(L.Y36(Fe.e))},N.\u0275cmp=L.Xpm({type:N,selectors:[["app-navbar"]],decls:7,vars:1,consts:[[1,"container","mt-2","d-md-none",2,"direction","ltr","text-align","left"],[1,"container","flx"],[1,"logoParent"],["routerLink","/","aria-label","NAMNAM"],["src","assets/0838de4f-5271-4e88-99d9-c0f89edfe1c2.jfif","alt","NAMNAM",1,"mainlogo"],["class","loginParent","style","display: flex; gap: 10px; align-items: center",4,"ngIf"],[1,"loginParent",2,"display","flex","gap","10px","align-items","center"],["routerLink","/"],[1,"mx-2"],["routerLink","/all-msgs"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(C,x){1&C&&(L.TgZ(0,"nav"),L._UZ(1,"div",0),L.TgZ(2,"div",1)(3,"div",2)(4,"a",3),L._UZ(5,"img",4),L.qZA()(),L.YNc(6,me,9,1,"div",5),L.qZA()()),2&C&&(L.xp6(6),L.Q6J("ngIf",x.isLogin()))},directives:[ee.yS,Me.O5],styles:[""]}),N})();function z(N,E){if(1&N&&(L.TgZ(0,"div",1)(1,"div",2)(2,"div"),L._UZ(3,"img",3),L.qZA(),L.TgZ(4,"div")(5,"p",4),L._uU(6),L.qZA(),L.TgZ(7,"p",5),L._uU(8),L.qZA()()()()),2&N){const C=L.oxw();L.xp6(6),L.hij(" ",null==C.chatService.notificationInfo?null:C.chatService.notificationInfo.from," "),L.xp6(2),L.hij(" \u0645\u0627\u062f\u0629 ",null==C.chatService.notificationInfo?null:C.chatService.notificationInfo.material_name," ")}}let ie=(()=>{class N{constructor(C,x,Z,oe){this.router=C,this.dbb=x,this.homeService=Z,this.chatService=oe,this.teacherId=localStorage.getItem("userid")}ngOnInit(){this.app=(0,rt.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,Ie.N8)(this.app),localStorage.getItem("userid")&&this.listenForTeacherMessages()}listenForTeacherMessages(){this.homeService.getHomeStages().pipe((0,ve.U)(C=>{var x;let Z=[];return(null===(x=null==C?void 0:C.data)||void 0===x?void 0:x.length)&&(null==C||C.data.forEach(oe=>{var Ae;Z.push(String(null===(Ae=null==oe?void 0:oe.material)||void 0===Ae?void 0:Ae.id))})),Z})).subscribe(C=>{this.chatService.listenForNewMessages(C,localStorage.getItem("userid")||"")})}}return N.\u0275fac=function(C){return new(C||N)(L.Y36(ee.F0),L.Y36(Jr),L.Y36(Ni.Y),L.Y36(Br.a))},N.\u0275cmp=L.Xpm({type:N,selectors:[["app-root"]],decls:3,vars:1,consts:[["routerLink","/all-msgs","style","\n    position: fixed;\n    right: 20px;\n    bottom: 20px;\n    width: 250px;\n    border: 2px solid #920f11;\n    border-radius: 10px;\n    padding: 10px;\n    background-color: white;\n    cursor: pointer;\n  ","class","notification",4,"ngIf"],["routerLink","/all-msgs",1,"notification",2,"position","fixed","right","20px","bottom","20px","width","250px","border","2px solid #920f11","border-radius","10px","padding","10px","background-color","white","cursor","pointer"],[2,"display","flex","gap","5px","align-items","center","flex-direction","column","text-align","center"],["src","assets/logo.png","alt","NAMNAM",2,"width","50px","border-radius","50%"],[2,"margin-bottom","5px","text-align","center"],[2,"margin","0","text-align","center"]],template:function(C,x){1&C&&(L._UZ(0,"app-navbar")(1,"router-outlet"),L.YNc(2,z,9,2,"div",0)),2&C&&(L.xp6(2),L.Q6J("ngIf",x.chatService.showNotification))},directives:[ye,ee.lC,Me.O5,ee.rH],styles:[""]}),N})();var se=U(1777);const we=!1;function Bt(N){return new L.vHH(3e3,we)}function Ar(){return"undefined"!=typeof window&&void 0!==window.document}function Un(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function nr(N){switch(N.length){case 0:return new se.ZN;case 1:return N[0];default:return new se.ZE(N)}}function Oi(N,E,C,x,Z={},oe={}){const Ae=[],w=[];let f=-1,g=null;if(x.forEach(b=>{const Y=b.offset,ae=Y==f,$e=ae&&g||{};Object.keys(b).forEach(et=>{let Vt=et,dn=b[et];if("offset"!==et)switch(Vt=E.normalizePropertyName(Vt,Ae),dn){case se.k1:dn=Z[et];break;case se.l3:dn=oe[et];break;default:dn=E.normalizeStyleValue(et,Vt,dn,Ae)}$e[Vt]=dn}),ae||w.push($e),g=$e,f=Y}),Ae.length)throw function Cr(N){return new L.vHH(3502,we)}();return w}function ds(N,E,C,x){switch(E){case"start":N.onStart(()=>x(C&&ci(C,"start",N)));break;case"done":N.onDone(()=>x(C&&ci(C,"done",N)));break;case"destroy":N.onDestroy(()=>x(C&&ci(C,"destroy",N)))}}function ci(N,E,C){const x=C.totalTime,oe=Vi(N.element,N.triggerName,N.fromState,N.toState,E||N.phaseName,null==x?N.totalTime:x,!!C.disabled),Ae=N._data;return null!=Ae&&(oe._data=Ae),oe}function Vi(N,E,C,x,Z="",oe=0,Ae){return{element:N,triggerName:E,fromState:C,toState:x,phaseName:Z,totalTime:oe,disabled:!!Ae}}function Ai(N,E,C){let x;return N instanceof Map?(x=N.get(E),x||N.set(E,x=C)):(x=N[E],x||(x=N[E]=C)),x}function Ys(N){const E=N.indexOf(":");return[N.substring(1,E),N.substr(E+1)]}let Ui=(N,E)=>!1,_o=(N,E,C)=>[],No=null;function Bs(N){const E=N.parentNode||N.host;return E===No?null:E}(Un()||"undefined"!=typeof Element)&&(Ar()?(No=(()=>document.documentElement)(),Ui=(N,E)=>{for(;E;){if(E===N)return!0;E=Bs(E)}return!1}):Ui=(N,E)=>N.contains(E),_o=(N,E,C)=>{if(C)return Array.from(N.querySelectorAll(E));const x=N.querySelector(E);return x?[x]:[]});let Qs=null,Ms=!1;function Ir(N){Qs||(Qs=function xs(){return"undefined"!=typeof document?document.body:null}()||{},Ms=!!Qs.style&&"WebkitAppearance"in Qs.style);let E=!0;return Qs.style&&!function ao(N){return"ebkit"==N.substring(1,6)}(N)&&(E=N in Qs.style,!E&&Ms&&(E="Webkit"+N.charAt(0).toUpperCase()+N.substr(1)in Qs.style)),E}const lo=Ui,Oo=_o;let Ps=(()=>{class N{validateStyleProperty(C){return Ir(C)}matchesElement(C,x){return!1}containsElement(C,x){return lo(C,x)}getParentElement(C){return Bs(C)}query(C,x,Z){return Oo(C,x,Z)}computeStyle(C,x,Z){return Z||""}animate(C,x,Z,oe,Ae,w=[],f){return new se.ZN(Z,oe)}}return N.\u0275fac=function(C){return new(C||N)},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac}),N})(),ki=(()=>{class N{}return N.NOOP=new Ps,N})();const hs="ng-enter",zi="ng-leave",fs="ng-trigger",Ao=".ng-trigger",Ts="ng-animating",Js=".ng-animating";function _s(N){if("number"==typeof N)return N;const E=N.match(/^(-?[\.\d]+)(m?s)/);return!E||E.length<2?0:Ro(parseFloat(E[1]),E[2])}function Ro(N,E){return"s"===E?1e3*N:N}function Ki(N,E,C){return N.hasOwnProperty("duration")?N:function di(N,E,C){let Z,oe=0,Ae="";if("string"==typeof N){const w=N.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===w)return E.push(Bt()),{duration:0,delay:0,easing:""};Z=Ro(parseFloat(w[1]),w[2]);const f=w[3];null!=f&&(oe=Ro(parseFloat(f),w[4]));const g=w[5];g&&(Ae=g)}else Z=N;if(!C){let w=!1,f=E.length;Z<0&&(E.push(function on(){return new L.vHH(3100,we)}()),w=!0),oe<0&&(E.push(function bn(){return new L.vHH(3101,we)}()),w=!0),w&&E.splice(f,0,Bt())}return{duration:Z,delay:oe,easing:Ae}}(N,E,C)}function vs(N,E={}){return Object.keys(N).forEach(C=>{E[C]=N[C]}),E}function Nr(N,E,C={}){if(E)for(let x in N)C[x]=N[x];else vs(N,C);return C}function ei(N,E,C){return C?E+":"+C+";":""}function bs(N){let E="";for(let C=0;C<N.style.length;C++){const x=N.style.item(C);E+=ei(0,x,N.style.getPropertyValue(x))}for(const C in N.style)N.style.hasOwnProperty(C)&&!C.startsWith("_")&&(E+=ei(0,Pt(C),N.style[C]));N.setAttribute("style",E)}function _i(N,E,C){N.style&&(Object.keys(E).forEach(x=>{const Z=Oe(x);C&&!C.hasOwnProperty(x)&&(C[x]=N.style[Z]),N.style[Z]=E[x]}),Un()&&bs(N))}function wi(N,E){N.style&&(Object.keys(E).forEach(C=>{const x=Oe(C);N.style[x]=""}),Un()&&bs(N))}function ps(N){return Array.isArray(N)?1==N.length?N[0]:(0,se.vP)(N):N}const Yr=new RegExp("{{\\s*(.+?)\\s*}}","g");function V(N){let E=[];if("string"==typeof N){let C;for(;C=Yr.exec(N);)E.push(C[1]);Yr.lastIndex=0}return E}function ue(N,E,C){const x=N.toString(),Z=x.replace(Yr,(oe,Ae)=>{let w=E[Ae];return E.hasOwnProperty(Ae)||(C.push(function ir(N){return new L.vHH(3003,we)}()),w=""),w.toString()});return Z==x?N:Z}function $(N){const E=[];let C=N.next();for(;!C.done;)E.push(C.value),C=N.next();return E}const he=/-+([a-z0-9])/g;function Oe(N){return N.replace(he,(...E)=>E[1].toUpperCase())}function Pt(N){return N.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yn(N,E,C){switch(E.type){case 7:return N.visitTrigger(E,C);case 0:return N.visitState(E,C);case 1:return N.visitTransition(E,C);case 2:return N.visitSequence(E,C);case 3:return N.visitGroup(E,C);case 4:return N.visitAnimate(E,C);case 5:return N.visitKeyframes(E,C);case 6:return N.visitStyle(E,C);case 8:return N.visitReference(E,C);case 9:return N.visitAnimateChild(E,C);case 10:return N.visitAnimateRef(E,C);case 11:return N.visitQuery(E,C);case 12:return N.visitStagger(E,C);default:throw function si(N){return new L.vHH(3004,we)}()}}function Rr(N,E){return window.getComputedStyle(N)[E]}function Ds(N,E){const C=[];return"string"==typeof N?N.split(/\s*,\s*/).forEach(x=>function Fo(N,E,C){if(":"==N[0]){const f=function ho(N,E){switch(N){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(C,x)=>parseFloat(x)>parseFloat(C);case":decrement":return(C,x)=>parseFloat(x)<parseFloat(C);default:return E.push(function ur(N){return new L.vHH(3016,we)}()),"* => *"}}(N,C);if("function"==typeof f)return void E.push(f);N=f}const x=N.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==x||x.length<4)return C.push(function Rs(N){return new L.vHH(3015,we)}()),E;const Z=x[1],oe=x[2],Ae=x[3];E.push(j(Z,Ae));"<"==oe[0]&&!("*"==Z&&"*"==Ae)&&E.push(j(Ae,Z))}(x,C,E)):C.push(N),C}const vo=new Set(["true","1"]),K=new Set(["false","0"]);function j(N,E){const C=vo.has(N)||K.has(N),x=vo.has(E)||K.has(E);return(Z,oe)=>{let Ae="*"==N||N==Z,w="*"==E||E==oe;return!Ae&&C&&"boolean"==typeof Z&&(Ae=Z?vo.has(N):K.has(N)),!w&&x&&"boolean"==typeof oe&&(w=oe?vo.has(E):K.has(E)),Ae&&w}}const F=":self",ce=new RegExp(`s*${F}s*,?`,"g");function Le(N,E,C,x){return new qr(N).build(E,C,x)}class qr{constructor(E){this._driver=E}build(E,C,x){const Z=new pe(C);this._resetContextStyleTimingState(Z);const oe=Yn(this,ps(E),Z);return Z.unsupportedCSSPropertiesFound.size&&Z.unsupportedCSSPropertiesFound.keys(),oe}_resetContextStyleTimingState(E){E.currentQuerySelector="",E.collectedStyles={},E.collectedStyles[""]={},E.currentTime=0}visitTrigger(E,C){let x=C.queryCount=0,Z=C.depCount=0;const oe=[],Ae=[];return"@"==E.name.charAt(0)&&C.errors.push(function wt(){return new L.vHH(3006,we)}()),E.definitions.forEach(w=>{if(this._resetContextStyleTimingState(C),0==w.type){const f=w,g=f.name;g.toString().split(/\s*,\s*/).forEach(b=>{f.name=b,oe.push(this.visitState(f,C))}),f.name=g}else if(1==w.type){const f=this.visitTransition(w,C);x+=f.queryCount,Z+=f.depCount,Ae.push(f)}else C.errors.push(function gt(){return new L.vHH(3007,we)}())}),{type:7,name:E.name,states:oe,transitions:Ae,queryCount:x,depCount:Z,options:null}}visitState(E,C){const x=this.visitStyle(E.styles,C),Z=E.options&&E.options.params||null;if(x.containsDynamicStyles){const oe=new Set,Ae=Z||{};x.styles.forEach(w=>{if(ze(w)){const f=w;Object.keys(f).forEach(g=>{V(f[g]).forEach(b=>{Ae.hasOwnProperty(b)||oe.add(b)})})}}),oe.size&&($(oe.values()),C.errors.push(function Ut(N,E){return new L.vHH(3008,we)}()))}return{type:0,name:E.name,style:x,options:Z?{params:Z}:null}}visitTransition(E,C){C.queryCount=0,C.depCount=0;const x=Yn(this,ps(E.animation),C);return{type:1,matchers:Ds(E.expr,C.errors),animation:x,queryCount:C.queryCount,depCount:C.depCount,options:Yt(E.options)}}visitSequence(E,C){return{type:2,steps:E.steps.map(x=>Yn(this,x,C)),options:Yt(E.options)}}visitGroup(E,C){const x=C.currentTime;let Z=0;const oe=E.steps.map(Ae=>{C.currentTime=x;const w=Yn(this,Ae,C);return Z=Math.max(Z,C.currentTime),w});return C.currentTime=Z,{type:3,steps:oe,options:Yt(E.options)}}visitAnimate(E,C){const x=function vt(N,E){if(N.hasOwnProperty("duration"))return N;if("number"==typeof N)return On(Ki(N,E).duration,0,"");const C=N;if(C.split(/\s+/).some(oe=>"{"==oe.charAt(0)&&"{"==oe.charAt(1))){const oe=On(0,0,"");return oe.dynamic=!0,oe.strValue=C,oe}const Z=Ki(C,E);return On(Z.duration,Z.delay,Z.easing)}(E.timings,C.errors);C.currentAnimateTimings=x;let Z,oe=E.styles?E.styles:(0,se.oB)({});if(5==oe.type)Z=this.visitKeyframes(oe,C);else{let Ae=E.styles,w=!1;if(!Ae){w=!0;const g={};x.easing&&(g.easing=x.easing),Ae=(0,se.oB)(g)}C.currentTime+=x.duration+x.delay;const f=this.visitStyle(Ae,C);f.isEmptyStep=w,Z=f}return C.currentAnimateTimings=null,{type:4,timings:x,style:Z,options:null}}visitStyle(E,C){const x=this._makeStyleAst(E,C);return this._validateStyleAst(x,C),x}_makeStyleAst(E,C){const x=[];Array.isArray(E.styles)?E.styles.forEach(Ae=>{"string"==typeof Ae?Ae==se.l3?x.push(Ae):C.errors.push(function St(N){return new L.vHH(3002,we)}()):x.push(Ae)}):x.push(E.styles);let Z=!1,oe=null;return x.forEach(Ae=>{if(ze(Ae)){const w=Ae,f=w.easing;if(f&&(oe=f,delete w.easing),!Z)for(let g in w)if(w[g].toString().indexOf("{{")>=0){Z=!0;break}}}),{type:6,styles:x,easing:oe,offset:E.offset,containsDynamicStyles:Z,options:null}}_validateStyleAst(E,C){const x=C.currentAnimateTimings;let Z=C.currentTime,oe=C.currentTime;x&&oe>0&&(oe-=x.duration+x.delay),E.styles.forEach(Ae=>{"string"!=typeof Ae&&Object.keys(Ae).forEach(w=>{if(!this._driver.validateStyleProperty(w))return delete Ae[w],void C.unsupportedCSSPropertiesFound.add(w);const f=C.collectedStyles[C.currentQuerySelector],g=f[w];let b=!0;g&&(oe!=Z&&oe>=g.startTime&&Z<=g.endTime&&(C.errors.push(function In(N,E,C,x,Z){return new L.vHH(3010,we)}()),b=!1),oe=g.startTime),b&&(f[w]={startTime:oe,endTime:Z}),C.options&&function uo(N,E,C){const x=E.params||{},Z=V(N);Z.length&&Z.forEach(oe=>{x.hasOwnProperty(oe)||C.push(function gr(N){return new L.vHH(3001,we)}())})}(Ae[w],C.options,C.errors)})})}visitKeyframes(E,C){const x={type:5,styles:[],options:null};if(!C.currentAnimateTimings)return C.errors.push(function or(){return new L.vHH(3011,we)}()),x;let oe=0;const Ae=[];let w=!1,f=!1,g=0;const b=E.steps.map(Mn=>{const kn=this._makeStyleAst(Mn,C);let Mr=null!=kn.offset?kn.offset:function De(N){if("string"==typeof N)return null;let E=null;if(Array.isArray(N))N.forEach(C=>{if(ze(C)&&C.hasOwnProperty("offset")){const x=C;E=parseFloat(x.offset),delete x.offset}});else if(ze(N)&&N.hasOwnProperty("offset")){const C=N;E=parseFloat(C.offset),delete C.offset}return E}(kn.styles),li=0;return null!=Mr&&(oe++,li=kn.offset=Mr),f=f||li<0||li>1,w=w||li<g,g=li,Ae.push(li),kn});f&&C.errors.push(function Kr(){return new L.vHH(3012,we)}()),w&&C.errors.push(function yr(){return new L.vHH(3200,we)}());const Y=E.steps.length;let ae=0;oe>0&&oe<Y?C.errors.push(function Xr(){return new L.vHH(3202,we)}()):0==oe&&(ae=1/(Y-1));const $e=Y-1,et=C.currentTime,Vt=C.currentAnimateTimings,dn=Vt.duration;return b.forEach((Mn,kn)=>{const Mr=ae>0?kn==$e?1:ae*kn:Ae[kn],li=Mr*dn;C.currentTime=et+Vt.delay+li,Vt.duration=li,this._validateStyleAst(Mn,C),Mn.offset=Mr,x.styles.push(Mn)}),x}visitReference(E,C){return{type:8,animation:Yn(this,ps(E.animation),C),options:Yt(E.options)}}visitAnimateChild(E,C){return C.depCount++,{type:9,options:Yt(E.options)}}visitAnimateRef(E,C){return{type:10,animation:this.visitReference(E.animation,C),options:Yt(E.options)}}visitQuery(E,C){const x=C.currentQuerySelector,Z=E.options||{};C.queryCount++,C.currentQuery=E;const[oe,Ae]=function W(N){const E=!!N.split(/\s*,\s*/).find(C=>C==F);return E&&(N=N.replace(ce,"")),N=N.replace(/@\*/g,Ao).replace(/@\w+/g,C=>Ao+"-"+C.substr(1)).replace(/:animating/g,Js),[N,E]}(E.selector);C.currentQuerySelector=x.length?x+" "+oe:oe,Ai(C.collectedStyles,C.currentQuerySelector,{});const w=Yn(this,ps(E.animation),C);return C.currentQuery=null,C.currentQuerySelector=x,{type:11,selector:oe,limit:Z.limit||0,optional:!!Z.optional,includeSelf:Ae,animation:w,originalSelector:E.selector,options:Yt(E.options)}}visitStagger(E,C){C.currentQuery||C.errors.push(function Hr(){return new L.vHH(3013,we)}());const x="full"===E.timings?{duration:0,delay:0,easing:"full"}:Ki(E.timings,C.errors,!0);return{type:12,animation:Yn(this,ps(E.animation),C),timings:x,options:null}}}class pe{constructor(E){this.errors=E,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ze(N){return!Array.isArray(N)&&"object"==typeof N}function Yt(N){return N?(N=vs(N)).params&&(N.params=function q(N){return N?vs(N):null}(N.params)):N={},N}function On(N,E,C){return{duration:N,delay:E,easing:C}}function xn(N,E,C,x,Z,oe,Ae=null,w=!1){return{type:1,element:N,keyframes:E,preStyleProps:C,postStyleProps:x,duration:Z,delay:oe,totalTime:Z+oe,easing:Ae,subTimeline:w}}class Jn{constructor(){this._map=new Map}get(E){return this._map.get(E)||[]}append(E,C){let x=this._map.get(E);x||this._map.set(E,x=[]),x.push(...C)}has(E){return this._map.has(E)}clear(){this._map.clear()}}const Gr=new RegExp(":enter","g"),ri=new RegExp(":leave","g");function Fi(N,E,C,x,Z,oe={},Ae={},w,f,g=[]){return(new oi).buildKeyframes(N,E,C,x,Z,oe,Ae,w,f,g)}class oi{buildKeyframes(E,C,x,Z,oe,Ae,w,f,g,b=[]){g=g||new Jn;const Y=new ns(E,C,g,Z,oe,b,[]);Y.options=f,Y.currentTimeline.setStyles([Ae],null,Y.errors,f),Yn(this,x,Y);const ae=Y.timelines.filter($e=>$e.containsAnimation());if(Object.keys(w).length){let $e;for(let et=ae.length-1;et>=0;et--){const Vt=ae[et];if(Vt.element===C){$e=Vt;break}}$e&&!$e.allowOnlyTimelineStyles()&&$e.setStyles([w],null,Y.errors,f)}return ae.length?ae.map($e=>$e.buildKeyframes()):[xn(C,[],[],[],0,0,"",!1)]}visitTrigger(E,C){}visitState(E,C){}visitTransition(E,C){}visitAnimateChild(E,C){const x=C.subInstructions.get(C.element);if(x){const Z=C.createSubContext(E.options),oe=C.currentTimeline.currentTime,Ae=this._visitSubInstructions(x,Z,Z.options);oe!=Ae&&C.transformIntoNewTimeline(Ae)}C.previousNode=E}visitAnimateRef(E,C){const x=C.createSubContext(E.options);x.transformIntoNewTimeline(),this.visitReference(E.animation,x),C.transformIntoNewTimeline(x.currentTimeline.currentTime),C.previousNode=E}_visitSubInstructions(E,C,x){let oe=C.currentTimeline.currentTime;const Ae=null!=x.duration?_s(x.duration):null,w=null!=x.delay?_s(x.delay):null;return 0!==Ae&&E.forEach(f=>{const g=C.appendInstructionToTimeline(f,Ae,w);oe=Math.max(oe,g.duration+g.delay)}),oe}visitReference(E,C){C.updateOptions(E.options,!0),Yn(this,E.animation,C),C.previousNode=E}visitSequence(E,C){const x=C.subContextCount;let Z=C;const oe=E.options;if(oe&&(oe.params||oe.delay)&&(Z=C.createSubContext(oe),Z.transformIntoNewTimeline(),null!=oe.delay)){6==Z.previousNode.type&&(Z.currentTimeline.snapshotCurrentStyles(),Z.previousNode=Yi);const Ae=_s(oe.delay);Z.delayNextStep(Ae)}E.steps.length&&(E.steps.forEach(Ae=>Yn(this,Ae,Z)),Z.currentTimeline.applyStylesToKeyframe(),Z.subContextCount>x&&Z.transformIntoNewTimeline()),C.previousNode=E}visitGroup(E,C){const x=[];let Z=C.currentTimeline.currentTime;const oe=E.options&&E.options.delay?_s(E.options.delay):0;E.steps.forEach(Ae=>{const w=C.createSubContext(E.options);oe&&w.delayNextStep(oe),Yn(this,Ae,w),Z=Math.max(Z,w.currentTimeline.currentTime),x.push(w.currentTimeline)}),x.forEach(Ae=>C.currentTimeline.mergeTimelineCollectedStyles(Ae)),C.transformIntoNewTimeline(Z),C.previousNode=E}_visitTiming(E,C){if(E.dynamic){const x=E.strValue;return Ki(C.params?ue(x,C.params,C.errors):x,C.errors)}return{duration:E.duration,delay:E.delay,easing:E.easing}}visitAnimate(E,C){const x=C.currentAnimateTimings=this._visitTiming(E.timings,C),Z=C.currentTimeline;x.delay&&(C.incrementTime(x.delay),Z.snapshotCurrentStyles());const oe=E.style;5==oe.type?this.visitKeyframes(oe,C):(C.incrementTime(x.duration),this.visitStyle(oe,C),Z.applyStylesToKeyframe()),C.currentAnimateTimings=null,C.previousNode=E}visitStyle(E,C){const x=C.currentTimeline,Z=C.currentAnimateTimings;!Z&&x.getCurrentStyleProperties().length&&x.forwardFrame();const oe=Z&&Z.easing||E.easing;E.isEmptyStep?x.applyEmptyStep(oe):x.setStyles(E.styles,oe,C.errors,C.options),C.previousNode=E}visitKeyframes(E,C){const x=C.currentAnimateTimings,Z=C.currentTimeline.duration,oe=x.duration,w=C.createSubContext().currentTimeline;w.easing=x.easing,E.styles.forEach(f=>{w.forwardTime((f.offset||0)*oe),w.setStyles(f.styles,f.easing,C.errors,C.options),w.applyStylesToKeyframe()}),C.currentTimeline.mergeTimelineCollectedStyles(w),C.transformIntoNewTimeline(Z+oe),C.previousNode=E}visitQuery(E,C){const x=C.currentTimeline.currentTime,Z=E.options||{},oe=Z.delay?_s(Z.delay):0;oe&&(6===C.previousNode.type||0==x&&C.currentTimeline.getCurrentStyleProperties().length)&&(C.currentTimeline.snapshotCurrentStyles(),C.previousNode=Yi);let Ae=x;const w=C.invokeQuery(E.selector,E.originalSelector,E.limit,E.includeSelf,!!Z.optional,C.errors);C.currentQueryTotal=w.length;let f=null;w.forEach((g,b)=>{C.currentQueryIndex=b;const Y=C.createSubContext(E.options,g);oe&&Y.delayNextStep(oe),g===C.element&&(f=Y.currentTimeline),Yn(this,E.animation,Y),Y.currentTimeline.applyStylesToKeyframe(),Ae=Math.max(Ae,Y.currentTimeline.currentTime)}),C.currentQueryIndex=0,C.currentQueryTotal=0,C.transformIntoNewTimeline(Ae),f&&(C.currentTimeline.mergeTimelineCollectedStyles(f),C.currentTimeline.snapshotCurrentStyles()),C.previousNode=E}visitStagger(E,C){const x=C.parentContext,Z=C.currentTimeline,oe=E.timings,Ae=Math.abs(oe.duration),w=Ae*(C.currentQueryTotal-1);let f=Ae*C.currentQueryIndex;switch(oe.duration<0?"reverse":oe.easing){case"reverse":f=w-f;break;case"full":f=x.currentStaggerTime}const b=C.currentTimeline;f&&b.delayNextStep(f);const Y=b.currentTime;Yn(this,E.animation,C),C.previousNode=E,x.currentStaggerTime=Z.currentTime-Y+(Z.startTime-x.currentTimeline.startTime)}}const Yi={};class ns{constructor(E,C,x,Z,oe,Ae,w,f){this._driver=E,this.element=C,this.subInstructions=x,this._enterClassName=Z,this._leaveClassName=oe,this.errors=Ae,this.timelines=w,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Yi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Li(this._driver,C,0),w.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(E,C){if(!E)return;const x=E;let Z=this.options;null!=x.duration&&(Z.duration=_s(x.duration)),null!=x.delay&&(Z.delay=_s(x.delay));const oe=x.params;if(oe){let Ae=Z.params;Ae||(Ae=this.options.params={}),Object.keys(oe).forEach(w=>{(!C||!Ae.hasOwnProperty(w))&&(Ae[w]=ue(oe[w],Ae,this.errors))})}}_copyOptions(){const E={};if(this.options){const C=this.options.params;if(C){const x=E.params={};Object.keys(C).forEach(Z=>{x[Z]=C[Z]})}}return E}createSubContext(E=null,C,x){const Z=C||this.element,oe=new ns(this._driver,Z,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Z,x||0));return oe.previousNode=this.previousNode,oe.currentAnimateTimings=this.currentAnimateTimings,oe.options=this._copyOptions(),oe.updateOptions(E),oe.currentQueryIndex=this.currentQueryIndex,oe.currentQueryTotal=this.currentQueryTotal,oe.parentContext=this,this.subContextCount++,oe}transformIntoNewTimeline(E){return this.previousNode=Yi,this.currentTimeline=this.currentTimeline.fork(this.element,E),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(E,C,x){const Z={duration:null!=C?C:E.duration,delay:this.currentTimeline.currentTime+(null!=x?x:0)+E.delay,easing:""},oe=new Bi(this._driver,E.element,E.keyframes,E.preStyleProps,E.postStyleProps,Z,E.stretchStartingKeyframe);return this.timelines.push(oe),Z}incrementTime(E){this.currentTimeline.forwardTime(this.currentTimeline.duration+E)}delayNextStep(E){E>0&&this.currentTimeline.delayNextStep(E)}invokeQuery(E,C,x,Z,oe,Ae){let w=[];if(Z&&w.push(this.element),E.length>0){E=(E=E.replace(Gr,"."+this._enterClassName)).replace(ri,"."+this._leaveClassName);let g=this._driver.query(this.element,E,1!=x);0!==x&&(g=x<0?g.slice(g.length+x,g.length):g.slice(0,x)),w.push(...g)}return!oe&&0==w.length&&Ae.push(function cs(N){return new L.vHH(3014,we)}()),w}}class Li{constructor(E,C,x,Z){this._driver=E,this.element=C,this.startTime=x,this._elementTimelineStylesLookup=Z,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(C),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(C,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(E){const C=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||C?(this.forwardTime(this.currentTime+E),C&&this.snapshotCurrentStyles()):this.startTime+=E}fork(E,C){return this.applyStylesToKeyframe(),new Li(this._driver,E,C||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(E){this.applyStylesToKeyframe(),this.duration=E,this._loadKeyframe()}_updateStyle(E,C){this._localTimelineStyles[E]=C,this._globalTimelineStyles[E]=C,this._styleSummary[E]={time:this.currentTime,value:C}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(E){E&&(this._previousKeyframe.easing=E),Object.keys(this._globalTimelineStyles).forEach(C=>{this._backFill[C]=this._globalTimelineStyles[C]||se.l3,this._currentKeyframe[C]=se.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(E,C,x,Z){C&&(this._previousKeyframe.easing=C);const oe=Z&&Z.params||{},Ae=function Eo(N,E){const C={};let x;return N.forEach(Z=>{"*"===Z?(x=x||Object.keys(E),x.forEach(oe=>{C[oe]=se.l3})):Nr(Z,!1,C)}),C}(E,this._globalTimelineStyles);Object.keys(Ae).forEach(w=>{const f=ue(Ae[w],oe,x);this._pendingStyles[w]=f,this._localTimelineStyles.hasOwnProperty(w)||(this._backFill[w]=this._globalTimelineStyles.hasOwnProperty(w)?this._globalTimelineStyles[w]:se.l3),this._updateStyle(w,f)})}applyStylesToKeyframe(){const E=this._pendingStyles,C=Object.keys(E);0!=C.length&&(this._pendingStyles={},C.forEach(x=>{this._currentKeyframe[x]=E[x]}),Object.keys(this._localTimelineStyles).forEach(x=>{this._currentKeyframe.hasOwnProperty(x)||(this._currentKeyframe[x]=this._localTimelineStyles[x])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(E=>{const C=this._localTimelineStyles[E];this._pendingStyles[E]=C,this._updateStyle(E,C)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const E=[];for(let C in this._currentKeyframe)E.push(C);return E}mergeTimelineCollectedStyles(E){Object.keys(E._styleSummary).forEach(C=>{const x=this._styleSummary[C],Z=E._styleSummary[C];(!x||Z.time>x.time)&&this._updateStyle(C,Z.value)})}buildKeyframes(){this.applyStylesToKeyframe();const E=new Set,C=new Set,x=1===this._keyframes.size&&0===this.duration;let Z=[];this._keyframes.forEach((w,f)=>{const g=Nr(w,!0);Object.keys(g).forEach(b=>{const Y=g[b];Y==se.k1?E.add(b):Y==se.l3&&C.add(b)}),x||(g.offset=f/this.duration),Z.push(g)});const oe=E.size?$(E.values()):[],Ae=C.size?$(C.values()):[];if(x){const w=Z[0],f=vs(w);w.offset=0,f.offset=1,Z=[w,f]}return xn(this.element,Z,oe,Ae,this.duration,this.startTime,this.easing,!1)}}class Bi extends Li{constructor(E,C,x,Z,oe,Ae,w=!1){super(E,C,Ae.delay),this.keyframes=x,this.preStyleProps=Z,this.postStyleProps=oe,this._stretchStartingKeyframe=w,this.timings={duration:Ae.duration,delay:Ae.delay,easing:Ae.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let E=this.keyframes,{delay:C,duration:x,easing:Z}=this.timings;if(this._stretchStartingKeyframe&&C){const oe=[],Ae=x+C,w=C/Ae,f=Nr(E[0],!1);f.offset=0,oe.push(f);const g=Nr(E[0],!1);g.offset=Ns(w),oe.push(g);const b=E.length-1;for(let Y=1;Y<=b;Y++){let ae=Nr(E[Y],!1);ae.offset=Ns((C+ae.offset*x)/Ae),oe.push(ae)}x=Ae,C=0,Z="",E=oe}return xn(this.element,E,this.preStyleProps,this.postStyleProps,x,C,Z,!0)}}function Ns(N,E=3){const C=Math.pow(10,E-1);return Math.round(N*C)/C}class js{}class as extends js{normalizePropertyName(E,C){return Oe(E)}normalizeStyleValue(E,C,x,Z){let oe="";const Ae=x.toString().trim();if(nl[C]&&0!==x&&"0"!==x)if("number"==typeof x)oe="px";else{const w=x.match(/^[+-]?[\d\.]+([a-z]*)$/);w&&0==w[1].length&&Z.push(function Ei(N,E){return new L.vHH(3005,we)}())}return Ae+oe}}const nl=(()=>function wo(N){const E={};return N.forEach(C=>E[C]=!0),E}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ta(N,E,C,x,Z,oe,Ae,w,f,g,b,Y,ae){return{type:0,element:N,triggerName:E,isRemovalTransition:Z,fromState:C,fromStyles:oe,toState:x,toStyles:Ae,timelines:w,queriedElements:f,preStyleProps:g,postStyleProps:b,totalTime:Y,errors:ae}}const Wo={};class mi{constructor(E,C,x){this._triggerName=E,this.ast=C,this._stateStyles=x}match(E,C,x,Z){return function eo(N,E,C,x,Z){return N.some(oe=>oe(E,C,x,Z))}(this.ast.matchers,E,C,x,Z)}buildStyles(E,C,x){const Z=this._stateStyles["*"],oe=this._stateStyles[E],Ae=Z?Z.buildStyles(C,x):{};return oe?oe.buildStyles(C,x):Ae}build(E,C,x,Z,oe,Ae,w,f,g,b){const Y=[],ae=this.ast.options&&this.ast.options.params||Wo,et=this.buildStyles(x,w&&w.params||Wo,Y),Vt=f&&f.params||Wo,dn=this.buildStyles(Z,Vt,Y),Mn=new Set,kn=new Map,Mr=new Map,li="void"===Z,Va={params:Object.assign(Object.assign({},ae),Vt)},zs=b?[]:Fi(E,C,this.ast.animation,oe,Ae,et,dn,Va,g,Y);let Do=0;if(zs.forEach(oa=>{Do=Math.max(oa.duration+oa.delay,Do)}),Y.length)return Ta(C,this._triggerName,x,Z,li,et,dn,[],[],kn,Mr,Do,Y);zs.forEach(oa=>{const ms=oa.element,Ia=Ai(kn,ms,{});oa.preStyleProps.forEach(Po=>Ia[Po]=!0);const Ls=Ai(Mr,ms,{});oa.postStyleProps.forEach(Po=>Ls[Po]=!0),ms!==C&&Mn.add(ms)});const Ua=$(Mn.values());return Ta(C,this._triggerName,x,Z,li,et,dn,zs,Ua,kn,Mr,Do)}}class ls{constructor(E,C,x){this.styles=E,this.defaultParams=C,this.normalizer=x}buildStyles(E,C){const x={},Z=vs(this.defaultParams);return Object.keys(E).forEach(oe=>{const Ae=E[oe];null!=Ae&&(Z[oe]=Ae)}),this.styles.styles.forEach(oe=>{if("string"!=typeof oe){const Ae=oe;Object.keys(Ae).forEach(w=>{let f=Ae[w];f.length>1&&(f=ue(f,Z,C));const g=this.normalizer.normalizePropertyName(w,C);f=this.normalizer.normalizeStyleValue(w,g,f,C),x[g]=f})}}),x}}class Ri{constructor(E,C,x){this.name=E,this.ast=C,this._normalizer=x,this.transitionFactories=[],this.states={},C.states.forEach(Z=>{this.states[Z.name]=new ls(Z.style,Z.options&&Z.options.params||{},x)}),ha(this.states,"true","1"),ha(this.states,"false","0"),C.transitions.forEach(Z=>{this.transitionFactories.push(new mi(E,Z,this.states))}),this.fallbackTransition=function ba(N,E,C){return new mi(N,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ae,w)=>!0],options:null,queryCount:0,depCount:0},E)}(E,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(E,C,x,Z){return this.transitionFactories.find(Ae=>Ae.match(E,C,x,Z))||null}matchStyles(E,C,x){return this.fallbackTransition.buildStyles(E,C,x)}}function ha(N,E,C){N.hasOwnProperty(E)?N.hasOwnProperty(C)||(N[C]=N[E]):N.hasOwnProperty(C)&&(N[E]=N[C])}const gl=new Jn;class Mo{constructor(E,C,x){this.bodyNode=E,this._driver=C,this._normalizer=x,this._animations={},this._playersById={},this.players=[]}register(E,C){const x=[],oe=Le(this._driver,C,x,[]);if(x.length)throw function mn(N){return new L.vHH(3503,we)}();this._animations[E]=oe}_buildPlayer(E,C,x){const Z=E.element,oe=Oi(0,this._normalizer,0,E.keyframes,C,x);return this._driver.animate(Z,oe,E.duration,E.delay,E.easing,[],!0)}create(E,C,x={}){const Z=[],oe=this._animations[E];let Ae;const w=new Map;if(oe?(Ae=Fi(this._driver,C,oe,hs,zi,{},{},x,gl,Z),Ae.forEach(b=>{const Y=Ai(w,b.element,{});b.postStyleProps.forEach(ae=>Y[ae]=null)})):(Z.push(function tr(){return new L.vHH(3300,we)}()),Ae=[]),Z.length)throw function ts(N){return new L.vHH(3504,we)}();w.forEach((b,Y)=>{Object.keys(b).forEach(ae=>{b[ae]=this._driver.computeStyle(Y,ae,se.l3)})});const g=nr(Ae.map(b=>{const Y=w.get(b.element);return this._buildPlayer(b,{},Y)}));return this._playersById[E]=g,g.onDestroy(()=>this.destroy(E)),this.players.push(g),g}destroy(E){const C=this._getPlayer(E);C.destroy(),delete this._playersById[E];const x=this.players.indexOf(C);x>=0&&this.players.splice(x,1)}_getPlayer(E){const C=this._playersById[E];if(!C)throw function hr(N){return new L.vHH(3301,we)}();return C}listen(E,C,x,Z){const oe=Vi(C,"","","");return ds(this._getPlayer(E),x,oe,Z),()=>{}}command(E,C,x,Z){if("register"==x)return void this.register(E,Z[0]);if("create"==x)return void this.create(E,C,Z[0]||{});const oe=this._getPlayer(E);switch(x){case"play":oe.play();break;case"pause":oe.pause();break;case"reset":oe.reset();break;case"restart":oe.restart();break;case"finish":oe.finish();break;case"init":oe.init();break;case"setPosition":oe.setPosition(parseFloat(Z[0]));break;case"destroy":this.destroy(E)}}}const Hs="ng-animate-queued",ta="ng-animate-disabled",ml=[],ai={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ko={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},rs="__ng_removed";class Lo{constructor(E,C=""){this.namespaceId=C;const x=E&&E.hasOwnProperty("value");if(this.value=function fa(N){return null!=N?N:null}(x?E.value:E),x){const oe=vs(E);delete oe.value,this.options=oe}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(E){const C=E.params;if(C){const x=this.options.params;Object.keys(C).forEach(Z=>{null==x[Z]&&(x[Z]=C[Z])})}}}const rl="void",na=new Lo(rl);class Da{constructor(E,C,x){this.id=E,this.hostElement=C,this._engine=x,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+E,no(C,this._hostClassName)}listen(E,C,x,Z){if(!this._triggers.hasOwnProperty(C))throw function Zr(N,E){return new L.vHH(3302,we)}();if(null==x||0==x.length)throw function at(N){return new L.vHH(3303,we)}();if(!function ra(N){return"start"==N||"done"==N}(x))throw function Ze(N,E){return new L.vHH(3400,we)}();const oe=Ai(this._elementListeners,E,[]),Ae={name:C,phase:x,callback:Z};oe.push(Ae);const w=Ai(this._engine.statesByElement,E,{});return w.hasOwnProperty(C)||(no(E,fs),no(E,fs+"-"+C),w[C]=na),()=>{this._engine.afterFlush(()=>{const f=oe.indexOf(Ae);f>=0&&oe.splice(f,1),this._triggers[C]||delete w[C]})}}register(E,C){return!this._triggers[E]&&(this._triggers[E]=C,!0)}_getTrigger(E){const C=this._triggers[E];if(!C)throw function lt(N){return new L.vHH(3401,we)}();return C}trigger(E,C,x,Z=!0){const oe=this._getTrigger(C),Ae=new Al(this.id,C,E);let w=this._engine.statesByElement.get(E);w||(no(E,fs),no(E,fs+"-"+C),this._engine.statesByElement.set(E,w={}));let f=w[C];const g=new Lo(x,this.id);if(!(x&&x.hasOwnProperty("value"))&&f&&g.absorbOptions(f.options),w[C]=g,f||(f=na),g.value!==rl&&f.value===g.value){if(!function Ml(N,E){const C=Object.keys(N),x=Object.keys(E);if(C.length!=x.length)return!1;for(let Z=0;Z<C.length;Z++){const oe=C[Z];if(!E.hasOwnProperty(oe)||N[oe]!==E[oe])return!1}return!0}(f.params,g.params)){const Vt=[],dn=oe.matchStyles(f.value,f.params,Vt),Mn=oe.matchStyles(g.value,g.params,Vt);Vt.length?this._engine.reportError(Vt):this._engine.afterFlush(()=>{wi(E,dn),_i(E,Mn)})}return}const ae=Ai(this._engine.playersByElement,E,[]);ae.forEach(Vt=>{Vt.namespaceId==this.id&&Vt.triggerName==C&&Vt.queued&&Vt.destroy()});let $e=oe.matchTransition(f.value,g.value,E,g.params),et=!1;if(!$e){if(!Z)return;$e=oe.fallbackTransition,et=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:C,transition:$e,fromState:f,toState:g,player:Ae,isFallbackTransition:et}),et||(no(E,Hs),Ae.onStart(()=>{Ss(E,Hs)})),Ae.onDone(()=>{let Vt=this.players.indexOf(Ae);Vt>=0&&this.players.splice(Vt,1);const dn=this._engine.playersByElement.get(E);if(dn){let Mn=dn.indexOf(Ae);Mn>=0&&dn.splice(Mn,1)}}),this.players.push(Ae),ae.push(Ae),Ae}deregister(E){delete this._triggers[E],this._engine.statesByElement.forEach((C,x)=>{delete C[E]}),this._elementListeners.forEach((C,x)=>{this._elementListeners.set(x,C.filter(Z=>Z.name!=E))})}clearElementCache(E){this._engine.statesByElement.delete(E),this._elementListeners.delete(E);const C=this._engine.playersByElement.get(E);C&&(C.forEach(x=>x.destroy()),this._engine.playersByElement.delete(E))}_signalRemovalForInnerTriggers(E,C){const x=this._engine.driver.query(E,Ao,!0);x.forEach(Z=>{if(Z[rs])return;const oe=this._engine.fetchNamespacesByElement(Z);oe.size?oe.forEach(Ae=>Ae.triggerLeaveAnimation(Z,C,!1,!0)):this.clearElementCache(Z)}),this._engine.afterFlushAnimationsDone(()=>x.forEach(Z=>this.clearElementCache(Z)))}triggerLeaveAnimation(E,C,x,Z){const oe=this._engine.statesByElement.get(E),Ae=new Map;if(oe){const w=[];if(Object.keys(oe).forEach(f=>{if(Ae.set(f,oe[f].value),this._triggers[f]){const g=this.trigger(E,f,rl,Z);g&&w.push(g)}}),w.length)return this._engine.markElementAsRemoved(this.id,E,!0,C,Ae),x&&nr(w).onDone(()=>this._engine.processLeaveNode(E)),!0}return!1}prepareLeaveAnimationListeners(E){const C=this._elementListeners.get(E),x=this._engine.statesByElement.get(E);if(C&&x){const Z=new Set;C.forEach(oe=>{const Ae=oe.name;if(Z.has(Ae))return;Z.add(Ae);const f=this._triggers[Ae].fallbackTransition,g=x[Ae]||na,b=new Lo(rl),Y=new Al(this.id,Ae,E);this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:Ae,transition:f,fromState:g,toState:b,player:Y,isFallbackTransition:!0})})}}removeNode(E,C){const x=this._engine;if(E.childElementCount&&this._signalRemovalForInnerTriggers(E,C),this.triggerLeaveAnimation(E,C,!0))return;let Z=!1;if(x.totalAnimations){const oe=x.players.length?x.playersByQueriedElement.get(E):[];if(oe&&oe.length)Z=!0;else{let Ae=E;for(;Ae=Ae.parentNode;)if(x.statesByElement.get(Ae)){Z=!0;break}}}if(this.prepareLeaveAnimationListeners(E),Z)x.markElementAsRemoved(this.id,E,!1,C);else{const oe=E[rs];(!oe||oe===ai)&&(x.afterFlush(()=>this.clearElementCache(E)),x.destroyInnerAnimations(E),x._onRemovalComplete(E,C))}}insertNode(E,C){no(E,this._hostClassName)}drainQueuedTransitions(E){const C=[];return this._queue.forEach(x=>{const Z=x.player;if(Z.destroyed)return;const oe=x.element,Ae=this._elementListeners.get(oe);Ae&&Ae.forEach(w=>{if(w.name==x.triggerName){const f=Vi(oe,x.triggerName,x.fromState.value,x.toState.value);f._data=E,ds(x.player,w.phase,f,w.callback)}}),Z.markedForDestroy?this._engine.afterFlush(()=>{Z.destroy()}):C.push(x)}),this._queue=[],C.sort((x,Z)=>{const oe=x.transition.ast.depCount,Ae=Z.transition.ast.depCount;return 0==oe||0==Ae?oe-Ae:this._engine.driver.containsElement(x.element,Z.element)?1:-1})}destroy(E){this.players.forEach(C=>C.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,E)}elementContainsData(E){let C=!1;return this._elementListeners.has(E)&&(C=!0),C=!!this._queue.find(x=>x.element===E)||C,C}}class yl{constructor(E,C,x){this.bodyNode=E,this.driver=C,this._normalizer=x,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Z,oe)=>{}}_onRemovalComplete(E,C){this.onRemovalComplete(E,C)}get queuedPlayers(){const E=[];return this._namespaceList.forEach(C=>{C.players.forEach(x=>{x.queued&&E.push(x)})}),E}createNamespace(E,C){const x=new Da(E,C,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,C)?this._balanceNamespaceList(x,C):(this.newHostElements.set(C,x),this.collectEnterElement(C)),this._namespaceLookup[E]=x}_balanceNamespaceList(E,C){const x=this._namespaceList,Z=this.namespacesByHostElement,oe=x.length-1;if(oe>=0){let Ae=!1;if(void 0!==this.driver.getParentElement){let w=this.driver.getParentElement(C);for(;w;){const f=Z.get(w);if(f){const g=x.indexOf(f);x.splice(g+1,0,E),Ae=!0;break}w=this.driver.getParentElement(w)}}else for(let w=oe;w>=0;w--)if(this.driver.containsElement(x[w].hostElement,C)){x.splice(w+1,0,E),Ae=!0;break}Ae||x.unshift(E)}else x.push(E);return Z.set(C,E),E}register(E,C){let x=this._namespaceLookup[E];return x||(x=this.createNamespace(E,C)),x}registerTrigger(E,C,x){let Z=this._namespaceLookup[E];Z&&Z.register(C,x)&&this.totalAnimations++}destroy(E,C){if(!E)return;const x=this._fetchNamespace(E);this.afterFlush(()=>{this.namespacesByHostElement.delete(x.hostElement),delete this._namespaceLookup[E];const Z=this._namespaceList.indexOf(x);Z>=0&&this._namespaceList.splice(Z,1)}),this.afterFlushAnimationsDone(()=>x.destroy(C))}_fetchNamespace(E){return this._namespaceLookup[E]}fetchNamespacesByElement(E){const C=new Set,x=this.statesByElement.get(E);if(x){const Z=Object.keys(x);for(let oe=0;oe<Z.length;oe++){const Ae=x[Z[oe]].namespaceId;if(Ae){const w=this._fetchNamespace(Ae);w&&C.add(w)}}}return C}trigger(E,C,x,Z){if(Mi(C)){const oe=this._fetchNamespace(E);if(oe)return oe.trigger(C,x,Z),!0}return!1}insertNode(E,C,x,Z){if(!Mi(C))return;const oe=C[rs];if(oe&&oe.setForRemoval){oe.setForRemoval=!1,oe.setForMove=!0;const Ae=this.collectedLeaveElements.indexOf(C);Ae>=0&&this.collectedLeaveElements.splice(Ae,1)}if(E){const Ae=this._fetchNamespace(E);Ae&&Ae.insertNode(C,x)}Z&&this.collectEnterElement(C)}collectEnterElement(E){this.collectedEnterElements.push(E)}markElementAsDisabled(E,C){C?this.disabledNodes.has(E)||(this.disabledNodes.add(E),no(E,ta)):this.disabledNodes.has(E)&&(this.disabledNodes.delete(E),Ss(E,ta))}removeNode(E,C,x,Z){if(Mi(C)){const oe=E?this._fetchNamespace(E):null;if(oe?oe.removeNode(C,Z):this.markElementAsRemoved(E,C,!1,Z),x){const Ae=this.namespacesByHostElement.get(C);Ae&&Ae.id!==E&&Ae.removeNode(C,Z)}}else this._onRemovalComplete(C,Z)}markElementAsRemoved(E,C,x,Z,oe){this.collectedLeaveElements.push(C),C[rs]={namespaceId:E,setForRemoval:Z,hasAnimation:x,removedBeforeQueried:!1,previousTriggersValues:oe}}listen(E,C,x,Z,oe){return Mi(C)?this._fetchNamespace(E).listen(C,x,Z,oe):()=>{}}_buildInstruction(E,C,x,Z,oe){return E.transition.build(this.driver,E.element,E.fromState.value,E.toState.value,x,Z,E.fromState.options,E.toState.options,C,oe)}destroyInnerAnimations(E){let C=this.driver.query(E,Ao,!0);C.forEach(x=>this.destroyActiveAnimationsForElement(x)),0!=this.playersByQueriedElement.size&&(C=this.driver.query(E,Js,!0),C.forEach(x=>this.finishActiveQueriedAnimationOnElement(x)))}destroyActiveAnimationsForElement(E){const C=this.playersByElement.get(E);C&&C.forEach(x=>{x.queued?x.markedForDestroy=!0:x.destroy()})}finishActiveQueriedAnimationOnElement(E){const C=this.playersByQueriedElement.get(E);C&&C.forEach(x=>x.finish())}whenRenderingDone(){return new Promise(E=>{if(this.players.length)return nr(this.players).onDone(()=>E());E()})}processLeaveNode(E){var C;const x=E[rs];if(x&&x.setForRemoval){if(E[rs]=ai,x.namespaceId){this.destroyInnerAnimations(E);const Z=this._fetchNamespace(x.namespaceId);Z&&Z.clearElementCache(E)}this._onRemovalComplete(E,x.setForRemoval)}(null===(C=E.classList)||void 0===C?void 0:C.contains(ta))&&this.markElementAsDisabled(E,!1),this.driver.query(E,".ng-animate-disabled",!0).forEach(Z=>{this.markElementAsDisabled(Z,!1)})}flush(E=-1){let C=[];if(this.newHostElements.size&&(this.newHostElements.forEach((x,Z)=>this._balanceNamespaceList(x,Z)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let x=0;x<this.collectedEnterElements.length;x++)no(this.collectedEnterElements[x],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const x=[];try{C=this._flushAnimations(x,E)}finally{for(let Z=0;Z<x.length;Z++)x[Z]()}}else for(let x=0;x<this.collectedLeaveElements.length;x++)this.processLeaveNode(this.collectedLeaveElements[x]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(x=>x()),this._flushFns=[],this._whenQuietFns.length){const x=this._whenQuietFns;this._whenQuietFns=[],C.length?nr(C).onDone(()=>{x.forEach(Z=>Z())}):x.forEach(Z=>Z())}}reportError(E){throw function mt(N){return new L.vHH(3402,we)}()}_flushAnimations(E,C){const x=new Jn,Z=[],oe=new Map,Ae=[],w=new Map,f=new Map,g=new Map,b=new Set;this.disabledNodes.forEach(rr=>{b.add(rr);const wr=this.driver.query(rr,".ng-animate-queued",!0);for(let Tr=0;Tr<wr.length;Tr++)b.add(wr[Tr])});const Y=this.bodyNode,ae=Array.from(this.statesByElement.keys()),$e=Yo(ae,this.collectedEnterElements),et=new Map;let Vt=0;$e.forEach((rr,wr)=>{const Tr=hs+Vt++;et.set(wr,Tr),rr.forEach(bi=>no(bi,Tr))});const dn=[],Mn=new Set,kn=new Set;for(let rr=0;rr<this.collectedLeaveElements.length;rr++){const wr=this.collectedLeaveElements[rr],Tr=wr[rs];Tr&&Tr.setForRemoval&&(dn.push(wr),Mn.add(wr),Tr.hasAnimation?this.driver.query(wr,".ng-star-inserted",!0).forEach(bi=>Mn.add(bi)):kn.add(wr))}const Mr=new Map,li=Yo(ae,Array.from(Mn));li.forEach((rr,wr)=>{const Tr=zi+Vt++;Mr.set(wr,Tr),rr.forEach(bi=>no(bi,Tr))}),E.push(()=>{$e.forEach((rr,wr)=>{const Tr=et.get(wr);rr.forEach(bi=>Ss(bi,Tr))}),li.forEach((rr,wr)=>{const Tr=Mr.get(wr);rr.forEach(bi=>Ss(bi,Tr))}),dn.forEach(rr=>{this.processLeaveNode(rr)})});const Va=[],zs=[];for(let rr=this._namespaceList.length-1;rr>=0;rr--)this._namespaceList[rr].drainQueuedTransitions(C).forEach(Tr=>{const bi=Tr.player,So=Tr.element;if(Va.push(bi),this.collectedEnterElements.length){const aa=So[rs];if(aa&&aa.setForMove){if(aa.previousTriggersValues&&aa.previousTriggersValues.has(Tr.triggerName)){const la=aa.previousTriggersValues.get(Tr.triggerName),ea=this.statesByElement.get(Tr.element);ea&&ea[Tr.triggerName]&&(ea[Tr.triggerName].value=la)}return void bi.destroy()}}const Cl=!Y||!this.driver.containsElement(Y,So),so=Mr.get(So),Ba=et.get(So),Di=this._buildInstruction(Tr,x,Ba,so,Cl);if(Di.errors&&Di.errors.length)return void zs.push(Di);if(Cl)return bi.onStart(()=>wi(So,Di.fromStyles)),bi.onDestroy(()=>_i(So,Di.toStyles)),void Z.push(bi);if(Tr.isFallbackTransition)return bi.onStart(()=>wi(So,Di.fromStyles)),bi.onDestroy(()=>_i(So,Di.toStyles)),void Z.push(bi);const Bc=[];Di.timelines.forEach(aa=>{aa.stretchStartingKeyframe=!0,this.disabledNodes.has(aa.element)||Bc.push(aa)}),Di.timelines=Bc,x.append(So,Di.timelines),Ae.push({instruction:Di,player:bi,element:So}),Di.queriedElements.forEach(aa=>Ai(w,aa,[]).push(bi)),Di.preStyleProps.forEach((aa,la)=>{const ea=Object.keys(aa);if(ea.length){let ua=f.get(la);ua||f.set(la,ua=new Set),ea.forEach(vc=>ua.add(vc))}}),Di.postStyleProps.forEach((aa,la)=>{const ea=Object.keys(aa);let ua=g.get(la);ua||g.set(la,ua=new Set),ea.forEach(vc=>ua.add(vc))})});if(zs.length){const rr=[];zs.forEach(wr=>{rr.push(function Tn(N,E){return new L.vHH(3505,we)}())}),Va.forEach(wr=>wr.destroy()),this.reportError(rr)}const Do=new Map,Ua=new Map;Ae.forEach(rr=>{const wr=rr.element;x.has(wr)&&(Ua.set(wr,wr),this._beforeAnimationBuild(rr.player.namespaceId,rr.instruction,Do))}),Z.forEach(rr=>{const wr=rr.element;this._getPreviousPlayers(wr,!1,rr.namespaceId,rr.triggerName,null).forEach(bi=>{Ai(Do,wr,[]).push(bi),bi.destroy()})});const oa=dn.filter(rr=>xl(rr,f,g)),ms=new Map;Os(ms,this.driver,kn,g,se.l3).forEach(rr=>{xl(rr,f,g)&&oa.push(rr)});const Ls=new Map;$e.forEach((rr,wr)=>{Os(Ls,this.driver,new Set(rr),f,se.k1)}),oa.forEach(rr=>{const wr=ms.get(rr),Tr=Ls.get(rr);ms.set(rr,Object.assign(Object.assign({},wr),Tr))});const Po=[],vu=[],Jl={};Ae.forEach(rr=>{const{element:wr,player:Tr,instruction:bi}=rr;if(x.has(wr)){if(b.has(wr))return Tr.onDestroy(()=>_i(wr,bi.toStyles)),Tr.disabled=!0,Tr.overrideTotalTime(bi.totalTime),void Z.push(Tr);let So=Jl;if(Ua.size>1){let so=wr;const Ba=[];for(;so=so.parentNode;){const Di=Ua.get(so);if(Di){So=Di;break}Ba.push(so)}Ba.forEach(Di=>Ua.set(Di,So))}const Cl=this._buildAnimation(Tr.namespaceId,bi,Do,oe,Ls,ms);if(Tr.setRealPlayer(Cl),So===Jl)Po.push(Tr);else{const so=this.playersByElement.get(So);so&&so.length&&(Tr.parentPlayer=nr(so)),Z.push(Tr)}}else wi(wr,bi.fromStyles),Tr.onDestroy(()=>_i(wr,bi.toStyles)),vu.push(Tr),b.has(wr)&&Z.push(Tr)}),vu.forEach(rr=>{const wr=oe.get(rr.element);if(wr&&wr.length){const Tr=nr(wr);rr.setRealPlayer(Tr)}}),Z.forEach(rr=>{rr.parentPlayer?rr.syncPlayerEvents(rr.parentPlayer):rr.destroy()});for(let rr=0;rr<dn.length;rr++){const wr=dn[rr],Tr=wr[rs];if(Ss(wr,zi),Tr&&Tr.hasAnimation)continue;let bi=[];if(w.size){let Cl=w.get(wr);Cl&&Cl.length&&bi.push(...Cl);let so=this.driver.query(wr,Js,!0);for(let Ba=0;Ba<so.length;Ba++){let Di=w.get(so[Ba]);Di&&Di.length&&bi.push(...Di)}}const So=bi.filter(Cl=>!Cl.destroyed);So.length?Rl(this,wr,So):this.processLeaveNode(wr)}return dn.length=0,Po.forEach(rr=>{this.players.push(rr),rr.onDone(()=>{rr.destroy();const wr=this.players.indexOf(rr);this.players.splice(wr,1)}),rr.play()}),Po}elementContainsData(E,C){let x=!1;const Z=C[rs];return Z&&Z.setForRemoval&&(x=!0),this.playersByElement.has(C)&&(x=!0),this.playersByQueriedElement.has(C)&&(x=!0),this.statesByElement.has(C)&&(x=!0),this._fetchNamespace(E).elementContainsData(C)||x}afterFlush(E){this._flushFns.push(E)}afterFlushAnimationsDone(E){this._whenQuietFns.push(E)}_getPreviousPlayers(E,C,x,Z,oe){let Ae=[];if(C){const w=this.playersByQueriedElement.get(E);w&&(Ae=w)}else{const w=this.playersByElement.get(E);if(w){const f=!oe||oe==rl;w.forEach(g=>{g.queued||!f&&g.triggerName!=Z||Ae.push(g)})}}return(x||Z)&&(Ae=Ae.filter(w=>!(x&&x!=w.namespaceId||Z&&Z!=w.triggerName))),Ae}_beforeAnimationBuild(E,C,x){const oe=C.element,Ae=C.isRemovalTransition?void 0:E,w=C.isRemovalTransition?void 0:C.triggerName;for(const f of C.timelines){const g=f.element,b=g!==oe,Y=Ai(x,g,[]);this._getPreviousPlayers(g,b,Ae,w,C.toState).forEach($e=>{const et=$e.getRealPlayer();et.beforeDestroy&&et.beforeDestroy(),$e.destroy(),Y.push($e)})}wi(oe,C.fromStyles)}_buildAnimation(E,C,x,Z,oe,Ae){const w=C.triggerName,f=C.element,g=[],b=new Set,Y=new Set,ae=C.timelines.map(et=>{const Vt=et.element;b.add(Vt);const dn=Vt[rs];if(dn&&dn.removedBeforeQueried)return new se.ZN(et.duration,et.delay);const Mn=Vt!==f,kn=function za(N){const E=[];return Sa(N,E),E}((x.get(Vt)||ml).map(Do=>Do.getRealPlayer())).filter(Do=>!!Do.element&&Do.element===Vt),Mr=oe.get(Vt),li=Ae.get(Vt),Va=Oi(0,this._normalizer,0,et.keyframes,Mr,li),zs=this._buildPlayer(et,Va,kn);if(et.subTimeline&&Z&&Y.add(Vt),Mn){const Do=new Al(E,w,Vt);Do.setRealPlayer(zs),g.push(Do)}return zs});g.forEach(et=>{Ai(this.playersByQueriedElement,et.element,[]).push(et),et.onDone(()=>function qo(N,E,C){let x;if(N instanceof Map){if(x=N.get(E),x){if(x.length){const Z=x.indexOf(C);x.splice(Z,1)}0==x.length&&N.delete(E)}}else if(x=N[E],x){if(x.length){const Z=x.indexOf(C);x.splice(Z,1)}0==x.length&&delete N[E]}return x}(this.playersByQueriedElement,et.element,et))}),b.forEach(et=>no(et,Ts));const $e=nr(ae);return $e.onDestroy(()=>{b.forEach(et=>Ss(et,Ts)),_i(f,C.toStyles)}),Y.forEach(et=>{Ai(Z,et,[]).push($e)}),$e}_buildPlayer(E,C,x){return C.length>0?this.driver.animate(E.element,C,E.duration,E.delay,E.easing,x):new se.ZN(E.duration,E.delay)}}class Al{constructor(E,C,x){this.namespaceId=E,this.triggerName=C,this.element=x,this._player=new se.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(E){this._containsRealPlayer||(this._player=E,Object.keys(this._queuedCallbacks).forEach(C=>{this._queuedCallbacks[C].forEach(x=>ds(E,C,void 0,x))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(E.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(E){this.totalTime=E}syncPlayerEvents(E){const C=this._player;C.triggerCallback&&E.onStart(()=>C.triggerCallback("start")),E.onDone(()=>this.finish()),E.onDestroy(()=>this.destroy())}_queueEvent(E,C){Ai(this._queuedCallbacks,E,[]).push(C)}onDone(E){this.queued&&this._queueEvent("done",E),this._player.onDone(E)}onStart(E){this.queued&&this._queueEvent("start",E),this._player.onStart(E)}onDestroy(E){this.queued&&this._queueEvent("destroy",E),this._player.onDestroy(E)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(E){this.queued||this._player.setPosition(E)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(E){const C=this._player;C.triggerCallback&&C.triggerCallback(E)}}function Mi(N){return N&&1===N.nodeType}function Zo(N,E){const C=N.style.display;return N.style.display=null!=E?E:"none",C}function Os(N,E,C,x,Z){const oe=[];C.forEach(f=>oe.push(Zo(f)));const Ae=[];x.forEach((f,g)=>{const b={};f.forEach(Y=>{const ae=b[Y]=E.computeStyle(g,Y,Z);(!ae||0==ae.length)&&(g[rs]=Ko,Ae.push(g))}),N.set(g,b)});let w=0;return C.forEach(f=>Zo(f,oe[w++])),Ae}function Yo(N,E){const C=new Map;if(N.forEach(w=>C.set(w,[])),0==E.length)return C;const Z=new Set(E),oe=new Map;function Ae(w){if(!w)return 1;let f=oe.get(w);if(f)return f;const g=w.parentNode;return f=C.has(g)?g:Z.has(g)?1:Ae(g),oe.set(w,f),f}return E.forEach(w=>{const f=Ae(w);1!==f&&C.get(f).push(w)}),C}function no(N,E){var C;null===(C=N.classList)||void 0===C||C.add(E)}function Ss(N,E){var C;null===(C=N.classList)||void 0===C||C.remove(E)}function Rl(N,E,C){nr(C).onDone(()=>N.processLeaveNode(E))}function Sa(N,E){for(let C=0;C<N.length;C++){const x=N[C];x instanceof se.ZE?Sa(x.players,E):E.push(x)}}function xl(N,E,C){const x=C.get(N);if(!x)return!1;let Z=E.get(N);return Z?x.forEach(oe=>Z.add(oe)):E.set(N,x),C.delete(N),!0}class Io{constructor(E,C,x){this.bodyNode=E,this._driver=C,this._normalizer=x,this._triggerCache={},this.onRemovalComplete=(Z,oe)=>{},this._transitionEngine=new yl(E,C,x),this._timelineEngine=new Mo(E,C,x),this._transitionEngine.onRemovalComplete=(Z,oe)=>this.onRemovalComplete(Z,oe)}registerTrigger(E,C,x,Z,oe){const Ae=E+"-"+Z;let w=this._triggerCache[Ae];if(!w){const f=[],b=Le(this._driver,oe,f,[]);if(f.length)throw function Zs(N,E){return new L.vHH(3404,we)}();w=function Es(N,E,C){return new Ri(N,E,C)}(Z,b,this._normalizer),this._triggerCache[Ae]=w}this._transitionEngine.registerTrigger(C,Z,w)}register(E,C){this._transitionEngine.register(E,C)}destroy(E,C){this._transitionEngine.destroy(E,C)}onInsert(E,C,x,Z){this._transitionEngine.insertNode(E,C,x,Z)}onRemove(E,C,x,Z){this._transitionEngine.removeNode(E,C,Z||!1,x)}disableAnimations(E,C){this._transitionEngine.markElementAsDisabled(E,C)}process(E,C,x,Z){if("@"==x.charAt(0)){const[oe,Ae]=Ys(x);this._timelineEngine.command(oe,C,Ae,Z)}else this._transitionEngine.trigger(E,C,x,Z)}listen(E,C,x,Z,oe){if("@"==x.charAt(0)){const[Ae,w]=Ys(x);return this._timelineEngine.listen(Ae,C,w,oe)}return this._transitionEngine.listen(E,C,x,Z,oe)}flush(E=-1){this._transitionEngine.flush(E)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Aa=(()=>{class N{constructor(C,x,Z){this._element=C,this._startStyles=x,this._endStyles=Z,this._state=0;let oe=N.initialStylesByElement.get(C);oe||N.initialStylesByElement.set(C,oe={}),this._initialStyles=oe}start(){this._state<1&&(this._startStyles&&_i(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_i(this._element,this._initialStyles),this._endStyles&&(_i(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(N.initialStylesByElement.delete(this._element),this._startStyles&&(wi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wi(this._element,this._endStyles),this._endStyles=null),_i(this._element,this._initialStyles),this._state=3)}}return N.initialStylesByElement=new WeakMap,N})();function _l(N){let E=null;const C=Object.keys(N);for(let x=0;x<C.length;x++){const Z=C[x];vl(Z)&&(E=E||{},E[Z]=N[Z])}return E}function vl(N){return"display"===N||"position"===N}class pa{constructor(E,C,x,Z){this.element=E,this.keyframes=C,this.options=x,this._specialStyles=Z,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=x.duration,this._delay=x.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(E=>E()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const E=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,E,this.options),this._finalKeyframe=E.length?E[E.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(E,C,x){return E.animate(C,x)}onStart(E){this._onStartFns.push(E)}onDone(E){this._onDoneFns.push(E)}onDestroy(E){this._onDestroyFns.push(E)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(E=>E()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(E=>E()),this._onDestroyFns=[])}setPosition(E){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=E*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const E={};if(this.hasStarted()){const C=this._finalKeyframe;Object.keys(C).forEach(x=>{"offset"!=x&&(E[x]=this._finished?C[x]:Rr(this.element,x))})}this.currentSnapshot=E}triggerCallback(E){const C="start"==E?this._onStartFns:this._onDoneFns;C.forEach(x=>x()),C.length=0}}class P{validateStyleProperty(E){return Ir(E)}matchesElement(E,C){return!1}containsElement(E,C){return lo(E,C)}getParentElement(E){return Bs(E)}query(E,C,x){return Oo(E,C,x)}computeStyle(E,C,x){return window.getComputedStyle(E)[C]}animate(E,C,x,Z,oe,Ae=[]){const f={duration:x,delay:Z,fill:0==Z?"both":"forwards"};oe&&(f.easing=oe);const g={},b=Ae.filter(ae=>ae instanceof pa);(function zt(N,E){return 0===N||0===E})(x,Z)&&b.forEach(ae=>{let $e=ae.currentSnapshot;Object.keys($e).forEach(et=>g[et]=$e[et])}),C=function Dn(N,E,C){const x=Object.keys(C);if(x.length&&E.length){let oe=E[0],Ae=[];if(x.forEach(w=>{oe.hasOwnProperty(w)||Ae.push(w),oe[w]=C[w]}),Ae.length)for(var Z=1;Z<E.length;Z++){let w=E[Z];Ae.forEach(function(f){w[f]=Rr(N,f)})}}return E}(E,C=C.map(ae=>Nr(ae,!1)),g);const Y=function Wl(N,E){let C=null,x=null;return Array.isArray(E)&&E.length?(C=_l(E[0]),E.length>1&&(x=_l(E[E.length-1]))):E&&(C=_l(E)),C||x?new Aa(N,C,x):null}(E,C);return new pa(E,C,f,Y)}}let D=(()=>{class N extends se._j{constructor(C,x){super(),this._nextAnimationId=0,this._renderer=C.createRenderer(x.body,{id:"0",encapsulation:L.ifc.None,styles:[],data:{animation:[]}})}build(C){const x=this._nextAnimationId.toString();this._nextAnimationId++;const Z=Array.isArray(C)?(0,se.vP)(C):C;return J(this._renderer,null,x,"register",[Z]),new T(x,this._renderer)}}return N.\u0275fac=function(C){return new(C||N)(L.LFG(L.FYo),L.LFG(Me.K0))},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac}),N})();class T extends se.LC{constructor(E,C){super(),this._id=E,this._renderer=C}create(E,C){return new H(this._id,E,C||{},this._renderer)}}class H{constructor(E,C,x,Z){this.id=E,this.element=C,this._renderer=Z,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",x)}_listen(E,C){return this._renderer.listen(this.element,`@@${this.id}:${E}`,C)}_command(E,...C){return J(this._renderer,this.element,this.id,E,C)}onDone(E){this._listen("done",E)}onStart(E){this._listen("start",E)}onDestroy(E){this._listen("destroy",E)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(E){this._command("setPosition",E)}getPosition(){var E,C;return null!==(C=null===(E=this._renderer.engine.players[+this.id])||void 0===E?void 0:E.getPosition())&&void 0!==C?C:0}}function J(N,E,C,x,Z){return N.setProperty(E,`@@${C}:${x}`,Z)}const fe="@.disabled";let Ve=(()=>{class N{constructor(C,x,Z){this.delegate=C,this.engine=x,this._zone=Z,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),x.onRemovalComplete=(oe,Ae)=>{const w=null==Ae?void 0:Ae.parentNode(oe);w&&Ae.removeChild(w,oe)}}createRenderer(C,x){const oe=this.delegate.createRenderer(C,x);if(!(C&&x&&x.data&&x.data.animation)){let b=this._rendererCache.get(oe);return b||(b=new Ft("",oe,this.engine),this._rendererCache.set(oe,b)),b}const Ae=x.id,w=x.id+"-"+this._currentId;this._currentId++,this.engine.register(w,C);const f=b=>{Array.isArray(b)?b.forEach(f):this.engine.registerTrigger(Ae,w,C,b.name,b)};return x.data.animation.forEach(f),new yn(this,w,oe,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(C,x,Z){C>=0&&C<this._microtaskId?this._zone.run(()=>x(Z)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(oe=>{const[Ae,w]=oe;Ae(w)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([x,Z]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return N.\u0275fac=function(C){return new(C||N)(L.LFG(L.FYo),L.LFG(Io),L.LFG(L.R0b))},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac}),N})();class Ft{constructor(E,C,x){this.namespaceId=E,this.delegate=C,this.engine=x,this.destroyNode=this.delegate.destroyNode?Z=>C.destroyNode(Z):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(E,C){return this.delegate.createElement(E,C)}createComment(E){return this.delegate.createComment(E)}createText(E){return this.delegate.createText(E)}appendChild(E,C){this.delegate.appendChild(E,C),this.engine.onInsert(this.namespaceId,C,E,!1)}insertBefore(E,C,x,Z=!0){this.delegate.insertBefore(E,C,x),this.engine.onInsert(this.namespaceId,C,E,Z)}removeChild(E,C,x){this.engine.onRemove(this.namespaceId,C,this.delegate,x)}selectRootElement(E,C){return this.delegate.selectRootElement(E,C)}parentNode(E){return this.delegate.parentNode(E)}nextSibling(E){return this.delegate.nextSibling(E)}setAttribute(E,C,x,Z){this.delegate.setAttribute(E,C,x,Z)}removeAttribute(E,C,x){this.delegate.removeAttribute(E,C,x)}addClass(E,C){this.delegate.addClass(E,C)}removeClass(E,C){this.delegate.removeClass(E,C)}setStyle(E,C,x,Z){this.delegate.setStyle(E,C,x,Z)}removeStyle(E,C,x){this.delegate.removeStyle(E,C,x)}setProperty(E,C,x){"@"==C.charAt(0)&&C==fe?this.disableAnimations(E,!!x):this.delegate.setProperty(E,C,x)}setValue(E,C){this.delegate.setValue(E,C)}listen(E,C,x){return this.delegate.listen(E,C,x)}disableAnimations(E,C){this.engine.disableAnimations(E,C)}}class yn extends Ft{constructor(E,C,x,Z){super(C,x,Z),this.factory=E,this.namespaceId=C}setProperty(E,C,x){"@"==C.charAt(0)?"."==C.charAt(1)&&C==fe?this.disableAnimations(E,x=void 0===x||!!x):this.engine.process(this.namespaceId,E,C.substr(1),x):this.delegate.setProperty(E,C,x)}listen(E,C,x){if("@"==C.charAt(0)){const Z=function Xt(N){switch(N){case"body":return document.body;case"document":return document;case"window":return window;default:return N}}(E);let oe=C.substr(1),Ae="";return"@"!=oe.charAt(0)&&([oe,Ae]=function Gt(N){const E=N.indexOf(".");return[N.substring(0,E),N.substr(E+1)]}(oe)),this.engine.listen(this.namespaceId,Z,oe,Ae,w=>{this.factory.scheduleListenerCallback(w._data||-1,x,w)})}return this.delegate.listen(E,C,x)}}let xi=(()=>{class N extends Io{constructor(C,x,Z){super(C.body,x,Z)}ngOnDestroy(){this.flush()}}return N.\u0275fac=function(C){return new(C||N)(L.LFG(Me.K0),L.LFG(ki),L.LFG(js))},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac}),N})();const jt=new L.OlP("AnimationModuleType"),Fr=[{provide:se._j,useClass:D},{provide:js,useFactory:function en(){return new as}},{provide:Io,useClass:xi},{provide:L.FYo,useFactory:function Dt(N,E,C){return new Ve(N,E,C)},deps:[_.se,Io,L.R0b]}],il=[{provide:ki,useFactory:()=>new P},{provide:jt,useValue:"BrowserAnimations"},...Fr],Qi=[{provide:ki,useClass:Ps},{provide:jt,useValue:"NoopAnimations"},...Fr];let ia=(()=>{class N{static withConfig(C){return{ngModule:N,providers:C.disableAnimations?Qi:il}}}return N.\u0275fac=function(C){return new(C||N)},N.\u0275mod=L.oAB({type:N}),N.\u0275inj=L.cJS({providers:il,imports:[_.b2]}),N})();var Ka=U(4466),Tu=U(520),Pl=U(1762);let qa=(()=>{class N{constructor(){}intercept(C,x){let Z=C.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("namnamToken")}`}});return x.handle(Z)}}return N.\u0275fac=function(C){return new(C||N)},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac}),N})();var iu=U(262),ec=U(2843),Ji=U(2290);let xr=(()=>{class N{constructor(C,x){this.router=C,this.toastr=x}intercept(C,x){return x.handle(C).pipe((0,iu.K)(Z=>{var oe,Ae,w;let f=null===(oe=null==Z?void 0:Z.error)||void 0===oe?void 0:oe.errors;if(Array.isArray(f)&&(null==f?void 0:f.length))for(let g=0;g<(null==f?void 0:f.length);g++)(null===(Ae=f[g])||void 0===Ae?void 0:Ae.message)&&this.toastr.error(null===(w=f[g])||void 0===w?void 0:w.message);else(null==f?void 0:f.message)&&this.toastr.error(null==f?void 0:f.message);return-1!==[401,403].indexOf(Z.status)&&(localStorage.clear(),window.location.reload()),(0,ec._)(Z)}))}}return N.\u0275fac=function(C){return new(C||N)(L.LFG(ee.F0),L.LFG(Ji._W))},N.\u0275prov=L.Yz7({token:N,factory:N.\u0275fac}),N})();var Vo=U(3692);U(1389),U(6881);class ii{constructor(){return(0,Nt.vb)("auth")}}class is{constructor(E){return E}}const Fa="database",Pi=new L.OlP("angularfire2.database-instances");function Gs(N){return(E,C)=>{const x=E.runOutsideAngular(()=>N(C));return new is(x)}}const Xi={provide:class sa{constructor(){return(0,Nt.vb)(Fa)}},deps:[[new L.FiY,Pi]]},wl={provide:is,useFactory:function io(N,E){const C=(0,Nt.JM)(Fa,N,E);return C&&new is(C)},deps:[[new L.FiY,Pi],Vo.Ot]};let La=(()=>{class N{constructor(){(0,rt.KN)("angularfire",Nt.q4.full,"rtdb")}}return N.\u0275fac=function(C){return new(C||N)},N.\u0275mod=L.oAB({type:N}),N.\u0275inj=L.cJS({providers:[wl,Xi]}),N})();function ji(N,...E){return{ngModule:La,providers:[{provide:Pi,useFactory:Gs(N),multi:!0,deps:[L.R0b,L.zs3,Nt.HU,Vo.z6,[new L.FiY,ii],[new L.FiY,gn.nm],...E]}]}}const cl=(0,Nt.u3)(Ie.N8,!0);let Hl=(()=>{class N{}return N.\u0275fac=function(C){return new(C||N)},N.\u0275mod=L.oAB({type:N,bootstrap:[ie]}),N.\u0275inj=L.cJS({providers:[{provide:Tu.TP,useClass:qa,multi:!0},{provide:Tu.TP,useClass:xr,multi:!0}],imports:[[_.b2.withServerTransition({appId:"serverApp"}),Be,ia,Ka.m,Pl.yb,Xn.ww,An.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),ji(()=>cl())]]}),N})();U(2340).N.production&&(0,L.G48)(),_.q6().bootstrapModule(Hl).catch(N=>console.error(N))},8306:(hn,ut,U)=>{U.d(ut,{y:()=>Ie});var _=U(930),L=U(727),ee=U(8822),re=U(4671);var We=U(2416),Be=U(576),rt=U(2806);let Ie=(()=>{class ft{constructor(Mt){Mt&&(this._subscribe=Mt)}lift(Mt){const Xe=new ft;return Xe.source=this,Xe.operator=Mt,Xe}subscribe(Mt,Xe,Ct){const Ke=function Tt(ft){return ft&&ft instanceof _.Lv||function Je(ft){return ft&&(0,Be.m)(ft.next)&&(0,Be.m)(ft.error)&&(0,Be.m)(ft.complete)}(ft)&&(0,L.Nn)(ft)}(Mt)?Mt:new _.Hp(Mt,Xe,Ct);return(0,rt.x)(()=>{const{operator:Kt,source:it}=this;Ke.add(Kt?Kt.call(Ke,it):it?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(Mt){try{return this._subscribe(Mt)}catch(Xe){Mt.error(Xe)}}forEach(Mt,Xe){return new(Xe=ve(Xe))((Ct,Ke)=>{const Kt=new _.Hp({next:it=>{try{Mt(it)}catch(xe){Ke(xe),Kt.unsubscribe()}},error:Ke,complete:Ct});this.subscribe(Kt)})}_subscribe(Mt){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(Mt)}[ee.L](){return this}pipe(...Mt){return function je(ft){return 0===ft.length?re.y:1===ft.length?ft[0]:function(Mt){return ft.reduce((Xe,Ct)=>Ct(Xe),Mt)}}(Mt)(this)}toPromise(Mt){return new(Mt=ve(Mt))((Xe,Ct)=>{let Ke;this.subscribe(Kt=>Ke=Kt,Kt=>Ct(Kt),()=>Xe(Ke))})}}return ft.create=bt=>new ft(bt),ft})();function ve(ft){var bt;return null!==(bt=null!=ft?ft:We.v.Promise)&&void 0!==bt?bt:Promise}},7579:(hn,ut,U)=>{U.d(ut,{x:()=>We});var _=U(8306),L=U(727);const re=(0,U(3888).d)(rt=>function(){rt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=U(8737),je=U(2806);let We=(()=>{class rt extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ve){const Je=new Be(this,this);return Je.operator=ve,Je}_throwIfClosed(){if(this.closed)throw new re}next(ve){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Je of this.currentObservers)Je.next(ve)}})}error(ve){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ve;const{observers:Je}=this;for(;Je.length;)Je.shift().error(ve)}})}complete(){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ve}=this;for(;ve.length;)ve.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ve;return(null===(ve=this.observers)||void 0===ve?void 0:ve.length)>0}_trySubscribe(ve){return this._throwIfClosed(),super._trySubscribe(ve)}_subscribe(ve){return this._throwIfClosed(),this._checkFinalizedStatuses(ve),this._innerSubscribe(ve)}_innerSubscribe(ve){const{hasError:Je,isStopped:Tt,observers:ft}=this;return Je||Tt?L.Lc:(this.currentObservers=null,ft.push(ve),new L.w0(()=>{this.currentObservers=null,(0,Pe.P)(ft,ve)}))}_checkFinalizedStatuses(ve){const{hasError:Je,thrownError:Tt,isStopped:ft}=this;Je?ve.error(Tt):ft&&ve.complete()}asObservable(){const ve=new _.y;return ve.source=this,ve}}return rt.create=(Ie,ve)=>new Be(Ie,ve),rt})();class Be extends We{constructor(Ie,ve){super(),this.destination=Ie,this.source=ve}next(Ie){var ve,Je;null===(Je=null===(ve=this.destination)||void 0===ve?void 0:ve.next)||void 0===Je||Je.call(ve,Ie)}error(Ie){var ve,Je;null===(Je=null===(ve=this.destination)||void 0===ve?void 0:ve.error)||void 0===Je||Je.call(ve,Ie)}complete(){var Ie,ve;null===(ve=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.complete)||void 0===ve||ve.call(Ie)}_subscribe(Ie){var ve,Je;return null!==(Je=null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Ie))&&void 0!==Je?Je:L.Lc}}},930:(hn,ut,U)=>{U.d(ut,{Hp:()=>Mt,Lv:()=>Je});var _=U(576),L=U(727),ee=U(2416),re=U(7849),Pe=U(5032);const je=rt("C",void 0,void 0);function rt(it,xe,Qe){return{kind:it,value:xe,error:Qe}}var Ie=U(3410),ve=U(2806);class Je extends L.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,L.Nn)(xe)&&xe.add(this)):this.destination=Kt}static create(xe,Qe,_t){return new Mt(xe,Qe,_t)}next(xe){this.isStopped?Ke(function Be(it){return rt("N",it,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Ke(function We(it){return rt("E",void 0,it)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Ke(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tt=Function.prototype.bind;function ft(it,xe){return Tt.call(it,xe)}class bt{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:Qe}=this;if(Qe.next)try{Qe.next(xe)}catch(_t){Xe(_t)}}error(xe){const{partialObserver:Qe}=this;if(Qe.error)try{Qe.error(xe)}catch(_t){Xe(_t)}else Xe(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(Qe){Xe(Qe)}}}class Mt extends Je{constructor(xe,Qe,_t){let It;if(super(),(0,_.m)(xe)||!xe)It={next:null!=xe?xe:void 0,error:null!=Qe?Qe:void 0,complete:null!=_t?_t:void 0};else{let be;this&&ee.v.useDeprecatedNextContext?(be=Object.create(xe),be.unsubscribe=()=>this.unsubscribe(),It={next:xe.next&&ft(xe.next,be),error:xe.error&&ft(xe.error,be),complete:xe.complete&&ft(xe.complete,be)}):It=xe}this.destination=new bt(It)}}function Xe(it){ee.v.useDeprecatedSynchronousErrorHandling?(0,ve.O)(it):(0,re.h)(it)}function Ke(it,xe){const{onStoppedNotification:Qe}=ee.v;Qe&&Ie.z.setTimeout(()=>Qe(it,xe))}const Kt={closed:!0,next:Pe.Z,error:function Ct(it){throw it},complete:Pe.Z}},727:(hn,ut,U)=>{U.d(ut,{Lc:()=>je,w0:()=>Pe,Nn:()=>We});var _=U(576);const ee=(0,U(3888).d)(rt=>function(ve){rt(this),this.message=ve?`${ve.length} errors occurred during unsubscription:\n${ve.map((Je,Tt)=>`${Tt+1}) ${Je.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ve});var re=U(8737);class Pe{constructor(Ie){this.initialTeardown=Ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ie;if(!this.closed){this.closed=!0;const{_parentage:ve}=this;if(ve)if(this._parentage=null,Array.isArray(ve))for(const ft of ve)ft.remove(this);else ve.remove(this);const{initialTeardown:Je}=this;if((0,_.m)(Je))try{Je()}catch(ft){Ie=ft instanceof ee?ft.errors:[ft]}const{_finalizers:Tt}=this;if(Tt){this._finalizers=null;for(const ft of Tt)try{Be(ft)}catch(bt){Ie=null!=Ie?Ie:[],bt instanceof ee?Ie=[...Ie,...bt.errors]:Ie.push(bt)}}if(Ie)throw new ee(Ie)}}add(Ie){var ve;if(Ie&&Ie!==this)if(this.closed)Be(Ie);else{if(Ie instanceof Pe){if(Ie.closed||Ie._hasParent(this))return;Ie._addParent(this)}(this._finalizers=null!==(ve=this._finalizers)&&void 0!==ve?ve:[]).push(Ie)}}_hasParent(Ie){const{_parentage:ve}=this;return ve===Ie||Array.isArray(ve)&&ve.includes(Ie)}_addParent(Ie){const{_parentage:ve}=this;this._parentage=Array.isArray(ve)?(ve.push(Ie),ve):ve?[ve,Ie]:Ie}_removeParent(Ie){const{_parentage:ve}=this;ve===Ie?this._parentage=null:Array.isArray(ve)&&(0,re.P)(ve,Ie)}remove(Ie){const{_finalizers:ve}=this;ve&&(0,re.P)(ve,Ie),Ie instanceof Pe&&Ie._removeParent(this)}}Pe.EMPTY=(()=>{const rt=new Pe;return rt.closed=!0,rt})();const je=Pe.EMPTY;function We(rt){return rt instanceof Pe||rt&&"closed"in rt&&(0,_.m)(rt.remove)&&(0,_.m)(rt.add)&&(0,_.m)(rt.unsubscribe)}function Be(rt){(0,_.m)(rt)?rt():rt.unsubscribe()}},2416:(hn,ut,U)=>{U.d(ut,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(hn,ut,U)=>{U.d(ut,{z:()=>Pe});var _=U(8189),ee=U(7669),re=U(8996);function Pe(...je){return function L(){return(0,_.J)(1)}()((0,re.D)(je,(0,ee.yG)(je)))}},515:(hn,ut,U)=>{U.d(ut,{E:()=>L});const L=new(U(8306).y)(Pe=>Pe.complete())},8996:(hn,ut,U)=>{U.d(ut,{D:()=>xe});var _=U(8421),L=U(5363),ee=U(9468),je=U(8306),Be=U(2202),rt=U(576),Ie=U(9672);function Je(Qe,_t){if(!Qe)throw new Error("Iterable cannot be null");return new je.y(It=>{(0,Ie.f)(It,_t,()=>{const be=Qe[Symbol.asyncIterator]();(0,Ie.f)(It,_t,()=>{be.next().then(Ht=>{Ht.done?It.complete():It.next(Ht.value)})},0,!0)})})}var Tt=U(3670),ft=U(8239),bt=U(1144),Mt=U(6495),Xe=U(2206),Ct=U(4532),Ke=U(3260);function xe(Qe,_t){return _t?function it(Qe,_t){if(null!=Qe){if((0,Tt.c)(Qe))return function re(Qe,_t){return(0,_.Xf)(Qe).pipe((0,ee.R)(_t),(0,L.Q)(_t))}(Qe,_t);if((0,bt.z)(Qe))return function We(Qe,_t){return new je.y(It=>{let be=0;return _t.schedule(function(){be===Qe.length?It.complete():(It.next(Qe[be++]),It.closed||this.schedule())})})}(Qe,_t);if((0,ft.t)(Qe))return function Pe(Qe,_t){return(0,_.Xf)(Qe).pipe((0,ee.R)(_t),(0,L.Q)(_t))}(Qe,_t);if((0,Xe.D)(Qe))return Je(Qe,_t);if((0,Mt.T)(Qe))return function ve(Qe,_t){return new je.y(It=>{let be;return(0,Ie.f)(It,_t,()=>{be=Qe[Be.h](),(0,Ie.f)(It,_t,()=>{let Ht,Nt;try{({value:Ht,done:Nt}=be.next())}catch(An){return void It.error(An)}Nt?It.complete():It.next(Ht)},0,!0)}),()=>(0,rt.m)(null==be?void 0:be.return)&&be.return()})}(Qe,_t);if((0,Ke.L)(Qe))return function Kt(Qe,_t){return Je((0,Ke.Q)(Qe),_t)}(Qe,_t)}throw(0,Ct.z)(Qe)}(Qe,_t):(0,_.Xf)(Qe)}},8421:(hn,ut,U)=>{U.d(ut,{Xf:()=>Tt});var _=U(7582),L=U(1144),ee=U(8239),re=U(8306),Pe=U(3670),je=U(2206),We=U(4532),Be=U(6495),rt=U(3260),Ie=U(576),ve=U(7849),Je=U(8822);function Tt(it){if(it instanceof re.y)return it;if(null!=it){if((0,Pe.c)(it))return function ft(it){return new re.y(xe=>{const Qe=it[Je.L]();if((0,Ie.m)(Qe.subscribe))return Qe.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(it);if((0,L.z)(it))return function bt(it){return new re.y(xe=>{for(let Qe=0;Qe<it.length&&!xe.closed;Qe++)xe.next(it[Qe]);xe.complete()})}(it);if((0,ee.t)(it))return function Mt(it){return new re.y(xe=>{it.then(Qe=>{xe.closed||(xe.next(Qe),xe.complete())},Qe=>xe.error(Qe)).then(null,ve.h)})}(it);if((0,je.D)(it))return Ct(it);if((0,Be.T)(it))return function Xe(it){return new re.y(xe=>{for(const Qe of it)if(xe.next(Qe),xe.closed)return;xe.complete()})}(it);if((0,rt.L)(it))return function Ke(it){return Ct((0,rt.Q)(it))}(it)}throw(0,We.z)(it)}function Ct(it){return new re.y(xe=>{(function Kt(it,xe){var Qe,_t,It,be;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Qe=(0,_.KL)(it);!(_t=yield Qe.next()).done;)if(xe.next(_t.value),xe.closed)return}catch(Ht){It={error:Ht}}finally{try{_t&&!_t.done&&(be=Qe.return)&&(yield be.call(Qe))}finally{if(It)throw It.error}}xe.complete()})})(it,xe).catch(Qe=>xe.error(Qe))})}},6451:(hn,ut,U)=>{U.d(ut,{T:()=>je});var _=U(8189),L=U(8421),ee=U(515),re=U(7669),Pe=U(8996);function je(...We){const Be=(0,re.yG)(We),rt=(0,re._6)(We,1/0),Ie=We;return Ie.length?1===Ie.length?(0,L.Xf)(Ie[0]):(0,_.J)(rt)((0,Pe.D)(Ie,Be)):ee.E}},9646:(hn,ut,U)=>{U.d(ut,{of:()=>ee});var _=U(7669),L=U(8996);function ee(...re){const Pe=(0,_.yG)(re);return(0,L.D)(re,Pe)}},2843:(hn,ut,U)=>{U.d(ut,{_:()=>ee});var _=U(8306),L=U(576);function ee(re,Pe){const je=(0,L.m)(re)?re:()=>re,We=Be=>Be.error(je());return new _.y(Pe?Be=>Pe.schedule(We,0,Be):We)}},5403:(hn,ut,U)=>{U.d(ut,{x:()=>L});var _=U(930);function L(re,Pe,je,We,Be){return new ee(re,Pe,je,We,Be)}class ee extends _.Lv{constructor(Pe,je,We,Be,rt,Ie){super(Pe),this.onFinalize=rt,this.shouldUnsubscribe=Ie,this._next=je?function(ve){try{je(ve)}catch(Je){Pe.error(Je)}}:super._next,this._error=Be?function(ve){try{Be(ve)}catch(Je){Pe.error(Je)}finally{this.unsubscribe()}}:super._error,this._complete=We?function(){try{We()}catch(ve){Pe.error(ve)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:je}=this;super.unsubscribe(),!je&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},262:(hn,ut,U)=>{U.d(ut,{K:()=>re});var _=U(8421),L=U(5403),ee=U(4482);function re(Pe){return(0,ee.e)((je,We)=>{let Ie,Be=null,rt=!1;Be=je.subscribe((0,L.x)(We,void 0,void 0,ve=>{Ie=(0,_.Xf)(Pe(ve,re(Pe)(je))),Be?(Be.unsubscribe(),Be=null,Ie.subscribe(We)):rt=!0})),rt&&(Be.unsubscribe(),Be=null,Ie.subscribe(We))})}},4351:(hn,ut,U)=>{U.d(ut,{b:()=>ee});var _=U(5577),L=U(576);function ee(re,Pe){return(0,L.m)(Pe)?(0,_.z)(re,Pe,1):(0,_.z)(re,1)}},6590:(hn,ut,U)=>{U.d(ut,{d:()=>ee});var _=U(4482),L=U(5403);function ee(re){return(0,_.e)((Pe,je)=>{let We=!1;Pe.subscribe((0,L.x)(je,Be=>{We=!0,je.next(Be)},()=>{We||je.next(re),je.complete()}))})}},1884:(hn,ut,U)=>{U.d(ut,{x:()=>re});var _=U(4671),L=U(4482),ee=U(5403);function re(je,We=_.y){return je=null!=je?je:Pe,(0,L.e)((Be,rt)=>{let Ie,ve=!0;Be.subscribe((0,ee.x)(rt,Je=>{const Tt=We(Je);(ve||!je(Ie,Tt))&&(ve=!1,Ie=Tt,rt.next(Je))}))})}function Pe(je,We){return je===We}},9300:(hn,ut,U)=>{U.d(ut,{h:()=>ee});var _=U(4482),L=U(5403);function ee(re,Pe){return(0,_.e)((je,We)=>{let Be=0;je.subscribe((0,L.x)(We,rt=>re.call(Pe,rt,Be++)&&We.next(rt)))})}},590:(hn,ut,U)=>{U.d(ut,{P:()=>We});var _=U(6805),L=U(9300),ee=U(5698),re=U(6590),Pe=U(8068),je=U(4671);function We(Be,rt){const Ie=arguments.length>=2;return ve=>ve.pipe(Be?(0,L.h)((Je,Tt)=>Be(Je,Tt,ve)):je.y,(0,ee.q)(1),Ie?(0,re.d)(rt):(0,Pe.T)(()=>new _.K))}},4004:(hn,ut,U)=>{U.d(ut,{U:()=>ee});var _=U(4482),L=U(5403);function ee(re,Pe){return(0,_.e)((je,We)=>{let Be=0;je.subscribe((0,L.x)(We,rt=>{We.next(re.call(Pe,rt,Be++))}))})}},8189:(hn,ut,U)=>{U.d(ut,{J:()=>ee});var _=U(5577),L=U(4671);function ee(re=1/0){return(0,_.z)(L.y,re)}},5577:(hn,ut,U)=>{U.d(ut,{z:()=>Be});var _=U(4004),L=U(8421),ee=U(4482),re=U(9672),Pe=U(5403),We=U(576);function Be(rt,Ie,ve=1/0){return(0,We.m)(Ie)?Be((Je,Tt)=>(0,_.U)((ft,bt)=>Ie(Je,ft,Tt,bt))((0,L.Xf)(rt(Je,Tt))),ve):("number"==typeof Ie&&(ve=Ie),(0,ee.e)((Je,Tt)=>function je(rt,Ie,ve,Je,Tt,ft,bt,Mt){const Xe=[];let Ct=0,Ke=0,Kt=!1;const it=()=>{Kt&&!Xe.length&&!Ct&&Ie.complete()},xe=_t=>Ct<Je?Qe(_t):Xe.push(_t),Qe=_t=>{ft&&Ie.next(_t),Ct++;let It=!1;(0,L.Xf)(ve(_t,Ke++)).subscribe((0,Pe.x)(Ie,be=>{null==Tt||Tt(be),ft?xe(be):Ie.next(be)},()=>{It=!0},void 0,()=>{if(It)try{for(Ct--;Xe.length&&Ct<Je;){const be=Xe.shift();bt?(0,re.f)(Ie,bt,()=>Qe(be)):Qe(be)}it()}catch(be){Ie.error(be)}}))};return rt.subscribe((0,Pe.x)(Ie,xe,()=>{Kt=!0,it()})),()=>{null==Mt||Mt()}}(Je,Tt,rt,ve)))}},5363:(hn,ut,U)=>{U.d(ut,{Q:()=>re});var _=U(9672),L=U(4482),ee=U(5403);function re(Pe,je=0){return(0,L.e)((We,Be)=>{We.subscribe((0,ee.x)(Be,rt=>(0,_.f)(Be,Pe,()=>Be.next(rt),je),()=>(0,_.f)(Be,Pe,()=>Be.complete(),je),rt=>(0,_.f)(Be,Pe,()=>Be.error(rt),je)))})}},5026:(hn,ut,U)=>{U.d(ut,{R:()=>re});var _=U(4482),L=U(5403);function ee(Pe,je,We,Be,rt){return(Ie,ve)=>{let Je=We,Tt=je,ft=0;Ie.subscribe((0,L.x)(ve,bt=>{const Mt=ft++;Tt=Je?Pe(Tt,bt,Mt):(Je=!0,bt),Be&&ve.next(Tt)},rt&&(()=>{Je&&ve.next(Tt),ve.complete()})))}}function re(Pe,je){return(0,_.e)(ee(Pe,je,arguments.length>=2,!0))}},3099:(hn,ut,U)=>{U.d(ut,{B:()=>Pe});var _=U(8421),L=U(7579),ee=U(930),re=U(4482);function Pe(We={}){const{connector:Be=(()=>new L.x),resetOnError:rt=!0,resetOnComplete:Ie=!0,resetOnRefCountZero:ve=!0}=We;return Je=>{let Tt,ft,bt,Mt=0,Xe=!1,Ct=!1;const Ke=()=>{null==ft||ft.unsubscribe(),ft=void 0},Kt=()=>{Ke(),Tt=bt=void 0,Xe=Ct=!1},it=()=>{const xe=Tt;Kt(),null==xe||xe.unsubscribe()};return(0,re.e)((xe,Qe)=>{Mt++,!Ct&&!Xe&&Ke();const _t=bt=null!=bt?bt:Be();Qe.add(()=>{Mt--,0===Mt&&!Ct&&!Xe&&(ft=je(it,ve))}),_t.subscribe(Qe),!Tt&&Mt>0&&(Tt=new ee.Hp({next:It=>_t.next(It),error:It=>{Ct=!0,Ke(),ft=je(Kt,rt,It),_t.error(It)},complete:()=>{Xe=!0,Ke(),ft=je(Kt,Ie),_t.complete()}}),(0,_.Xf)(xe).subscribe(Tt))})(Je)}}function je(We,Be,...rt){if(!0===Be)return void We();if(!1===Be)return;const Ie=new ee.Hp({next:()=>{Ie.unsubscribe(),We()}});return Be(...rt).subscribe(Ie)}},8675:(hn,ut,U)=>{U.d(ut,{O:()=>re});var _=U(7272),L=U(7669),ee=U(4482);function re(...Pe){const je=(0,L.yG)(Pe);return(0,ee.e)((We,Be)=>{(je?(0,_.z)(Pe,We,je):(0,_.z)(Pe,We)).subscribe(Be)})}},9468:(hn,ut,U)=>{U.d(ut,{R:()=>L});var _=U(4482);function L(ee,re=0){return(0,_.e)((Pe,je)=>{je.add(ee.schedule(()=>Pe.subscribe(je),re))})}},3900:(hn,ut,U)=>{U.d(ut,{w:()=>re});var _=U(8421),L=U(4482),ee=U(5403);function re(Pe,je){return(0,L.e)((We,Be)=>{let rt=null,Ie=0,ve=!1;const Je=()=>ve&&!rt&&Be.complete();We.subscribe((0,ee.x)(Be,Tt=>{null==rt||rt.unsubscribe();let ft=0;const bt=Ie++;(0,_.Xf)(Pe(Tt,bt)).subscribe(rt=(0,ee.x)(Be,Mt=>Be.next(je?je(Tt,Mt,bt,ft++):Mt),()=>{rt=null,Je()}))},()=>{ve=!0,Je()}))})}},5698:(hn,ut,U)=>{U.d(ut,{q:()=>re});var _=U(515),L=U(4482),ee=U(5403);function re(Pe){return Pe<=0?()=>_.E:(0,L.e)((je,We)=>{let Be=0;je.subscribe((0,ee.x)(We,rt=>{++Be<=Pe&&(We.next(rt),Pe<=Be&&We.complete())}))})}},8505:(hn,ut,U)=>{U.d(ut,{b:()=>Pe});var _=U(576),L=U(4482),ee=U(5403),re=U(4671);function Pe(je,We,Be){const rt=(0,_.m)(je)||We||Be?{next:je,error:We,complete:Be}:je;return rt?(0,L.e)((Ie,ve)=>{var Je;null===(Je=rt.subscribe)||void 0===Je||Je.call(rt);let Tt=!0;Ie.subscribe((0,ee.x)(ve,ft=>{var bt;null===(bt=rt.next)||void 0===bt||bt.call(rt,ft),ve.next(ft)},()=>{var ft;Tt=!1,null===(ft=rt.complete)||void 0===ft||ft.call(rt),ve.complete()},ft=>{var bt;Tt=!1,null===(bt=rt.error)||void 0===bt||bt.call(rt,ft),ve.error(ft)},()=>{var ft,bt;Tt&&(null===(ft=rt.unsubscribe)||void 0===ft||ft.call(rt)),null===(bt=rt.finalize)||void 0===bt||bt.call(rt)}))}):re.y}},8068:(hn,ut,U)=>{U.d(ut,{T:()=>re});var _=U(6805),L=U(4482),ee=U(5403);function re(je=Pe){return(0,L.e)((We,Be)=>{let rt=!1;We.subscribe((0,ee.x)(Be,Ie=>{rt=!0,Be.next(Ie)},()=>rt?Be.complete():Be.error(je())))})}function Pe(){return new _.K}},4408:(hn,ut,U)=>{U.d(ut,{o:()=>Pe});var _=U(727);class L extends _.w0{constructor(We,Be){super()}schedule(We,Be=0){return this}}const ee={setInterval(je,We,...Be){const{delegate:rt}=ee;return(null==rt?void 0:rt.setInterval)?rt.setInterval(je,We,...Be):setInterval(je,We,...Be)},clearInterval(je){const{delegate:We}=ee;return((null==We?void 0:We.clearInterval)||clearInterval)(je)},delegate:void 0};var re=U(8737);class Pe extends L{constructor(We,Be){super(We,Be),this.scheduler=We,this.work=Be,this.pending=!1}schedule(We,Be=0){var rt;if(this.closed)return this;this.state=We;const Ie=this.id,ve=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(ve,Ie,Be)),this.pending=!0,this.delay=Be,this.id=null!==(rt=this.id)&&void 0!==rt?rt:this.requestAsyncId(ve,this.id,Be),this}requestAsyncId(We,Be,rt=0){return ee.setInterval(We.flush.bind(We,this),rt)}recycleAsyncId(We,Be,rt=0){if(null!=rt&&this.delay===rt&&!1===this.pending)return Be;null!=Be&&ee.clearInterval(Be)}execute(We,Be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const rt=this._execute(We,Be);if(rt)return rt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(We,Be){let Ie,rt=!1;try{this.work(We)}catch(ve){rt=!0,Ie=ve||new Error("Scheduled action threw falsy error")}if(rt)return this.unsubscribe(),Ie}unsubscribe(){if(!this.closed){const{id:We,scheduler:Be}=this,{actions:rt}=Be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(rt,this),null!=We&&(this.id=this.recycleAsyncId(Be,We,null)),this.delay=null,super.unsubscribe()}}}},7565:(hn,ut,U)=>{U.d(ut,{v:()=>ee});var _=U(6063);class L{constructor(Pe,je=L.now){this.schedulerActionCtor=Pe,this.now=je}schedule(Pe,je=0,We){return new this.schedulerActionCtor(this,Pe).schedule(We,je)}}L.now=_.l.now;class ee extends L{constructor(Pe,je=L.now){super(Pe,je),this.actions=[],this._active=!1}flush(Pe){const{actions:je}=this;if(this._active)return void je.push(Pe);let We;this._active=!0;do{if(We=Pe.execute(Pe.state,Pe.delay))break}while(Pe=je.shift());if(this._active=!1,We){for(;Pe=je.shift();)Pe.unsubscribe();throw We}}}},4986:(hn,ut,U)=>{U.d(ut,{z:()=>ee});var _=U(4408);const ee=new(U(7565).v)(_.o)},6063:(hn,ut,U)=>{U.d(ut,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(hn,ut,U)=>{U.d(ut,{z:()=>_});const _={setTimeout(L,ee,...re){const{delegate:Pe}=_;return(null==Pe?void 0:Pe.setTimeout)?Pe.setTimeout(L,ee,...re):setTimeout(L,ee,...re)},clearTimeout(L){const{delegate:ee}=_;return((null==ee?void 0:ee.clearTimeout)||clearTimeout)(L)},delegate:void 0}},2202:(hn,ut,U)=>{U.d(ut,{h:()=>L});const L=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(hn,ut,U)=>{U.d(ut,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(hn,ut,U)=>{U.d(ut,{K:()=>L});const L=(0,U(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(hn,ut,U)=>{U.d(ut,{_6:()=>je,jO:()=>re,yG:()=>Pe});var _=U(576);function ee(We){return We[We.length-1]}function re(We){return(0,_.m)(ee(We))?We.pop():void 0}function Pe(We){return function L(We){return We&&(0,_.m)(We.schedule)}(ee(We))?We.pop():void 0}function je(We,Be){return"number"==typeof ee(We)?We.pop():Be}},4742:(hn,ut,U)=>{U.d(ut,{D:()=>Pe});const{isArray:_}=Array,{getPrototypeOf:L,prototype:ee,keys:re}=Object;function Pe(We){if(1===We.length){const Be=We[0];if(_(Be))return{args:Be,keys:null};if(function je(We){return We&&"object"==typeof We&&L(We)===ee}(Be)){const rt=re(Be);return{args:rt.map(Ie=>Be[Ie]),keys:rt}}}return{args:We,keys:null}}},8737:(hn,ut,U)=>{function _(L,ee){if(L){const re=L.indexOf(ee);0<=re&&L.splice(re,1)}}U.d(ut,{P:()=>_})},3888:(hn,ut,U)=>{function _(L){const re=L(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}U.d(ut,{d:()=>_})},1810:(hn,ut,U)=>{function _(L,ee){return L.reduce((re,Pe,je)=>(re[Pe]=ee[je],re),{})}U.d(ut,{n:()=>_})},2806:(hn,ut,U)=>{U.d(ut,{O:()=>re,x:()=>ee});var _=U(2416);let L=null;function ee(Pe){if(_.v.useDeprecatedSynchronousErrorHandling){const je=!L;if(je&&(L={errorThrown:!1,error:null}),Pe(),je){const{errorThrown:We,error:Be}=L;if(L=null,We)throw Be}}else Pe()}function re(Pe){_.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=Pe)}},9672:(hn,ut,U)=>{function _(L,ee,re,Pe=0,je=!1){const We=ee.schedule(function(){re(),je?L.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(L.add(We),!je)return We}U.d(ut,{f:()=>_})},4671:(hn,ut,U)=>{function _(L){return L}U.d(ut,{y:()=>_})},1144:(hn,ut,U)=>{U.d(ut,{z:()=>_});const _=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(hn,ut,U)=>{U.d(ut,{D:()=>L});var _=U(576);function L(ee){return Symbol.asyncIterator&&(0,_.m)(null==ee?void 0:ee[Symbol.asyncIterator])}},576:(hn,ut,U)=>{function _(L){return"function"==typeof L}U.d(ut,{m:()=>_})},3670:(hn,ut,U)=>{U.d(ut,{c:()=>ee});var _=U(8822),L=U(576);function ee(re){return(0,L.m)(re[_.L])}},6495:(hn,ut,U)=>{U.d(ut,{T:()=>ee});var _=U(2202),L=U(576);function ee(re){return(0,L.m)(null==re?void 0:re[_.h])}},8239:(hn,ut,U)=>{U.d(ut,{t:()=>L});var _=U(576);function L(ee){return(0,_.m)(null==ee?void 0:ee.then)}},3260:(hn,ut,U)=>{U.d(ut,{L:()=>re,Q:()=>ee});var _=U(7582),L=U(576);function ee(Pe){return(0,_.FC)(this,arguments,function*(){const We=Pe.getReader();try{for(;;){const{value:Be,done:rt}=yield(0,_.qq)(We.read());if(rt)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Be)}}finally{We.releaseLock()}})}function re(Pe){return(0,L.m)(null==Pe?void 0:Pe.getReader)}},4482:(hn,ut,U)=>{U.d(ut,{A:()=>L,e:()=>ee});var _=U(576);function L(re){return(0,_.m)(null==re?void 0:re.lift)}function ee(re){return Pe=>{if(L(Pe))return Pe.lift(function(je){try{return re(je,this)}catch(We){this.error(We)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(hn,ut,U)=>{U.d(ut,{Z:()=>re});var _=U(4004);const{isArray:L}=Array;function re(Pe){return(0,_.U)(je=>function ee(Pe,je){return L(je)?Pe(...je):Pe(je)}(Pe,je))}},5032:(hn,ut,U)=>{function _(){}U.d(ut,{Z:()=>_})},7849:(hn,ut,U)=>{U.d(ut,{h:()=>ee});var _=U(2416),L=U(3410);function ee(re){L.z.setTimeout(()=>{const{onUnhandledError:Pe}=_.v;if(!Pe)throw re;Pe(re)})}},4532:(hn,ut,U)=>{function _(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(ut,{z:()=>_})},1777:(hn,ut,U)=>{U.d(ut,{LC:()=>L,SB:()=>rt,X$:()=>re,ZE:()=>Ke,ZN:()=>Ct,_j:()=>_,eR:()=>ve,jt:()=>Pe,k1:()=>Kt,l3:()=>ee,oB:()=>Be,vP:()=>We});class _{}class L{}const ee="*";function re(it,xe){return{type:7,name:it,definitions:xe,options:{}}}function Pe(it,xe=null){return{type:4,styles:xe,timings:it}}function We(it,xe=null){return{type:2,steps:it,options:xe}}function Be(it){return{type:6,styles:it,offset:null}}function rt(it,xe,Qe){return{type:0,name:it,styles:xe,options:Qe}}function ve(it,xe,Qe=null){return{type:1,expr:it,animation:xe,options:Qe}}function Xe(it){Promise.resolve(null).then(it)}class Ct{constructor(xe=0,Qe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=xe+Qe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(xe=>xe()),this._onDoneFns=[])}onStart(xe){this._onStartFns.push(xe)}onDone(xe){this._onDoneFns.push(xe)}onDestroy(xe){this._onDestroyFns.push(xe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Xe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(xe=>xe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(xe=>xe()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(xe){this._position=this.totalTime?xe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(xe){const Qe="start"==xe?this._onStartFns:this._onDoneFns;Qe.forEach(_t=>_t()),Qe.length=0}}class Ke{constructor(xe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=xe;let Qe=0,_t=0,It=0;const be=this.players.length;0==be?Xe(()=>this._onFinish()):this.players.forEach(Ht=>{Ht.onDone(()=>{++Qe==be&&this._onFinish()}),Ht.onDestroy(()=>{++_t==be&&this._onDestroy()}),Ht.onStart(()=>{++It==be&&this._onStart()})}),this.totalTime=this.players.reduce((Ht,Nt)=>Math.max(Ht,Nt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(xe=>xe()),this._onDoneFns=[])}init(){this.players.forEach(xe=>xe.init())}onStart(xe){this._onStartFns.push(xe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(xe=>xe()),this._onStartFns=[])}onDone(xe){this._onDoneFns.push(xe)}onDestroy(xe){this._onDestroyFns.push(xe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(xe=>xe.play())}pause(){this.players.forEach(xe=>xe.pause())}restart(){this.players.forEach(xe=>xe.restart())}finish(){this._onFinish(),this.players.forEach(xe=>xe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(xe=>xe.destroy()),this._onDestroyFns.forEach(xe=>xe()),this._onDestroyFns=[])}reset(){this.players.forEach(xe=>xe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(xe){const Qe=xe*this.totalTime;this.players.forEach(_t=>{const It=_t.totalTime?Math.min(1,Qe/_t.totalTime):1;_t.setPosition(It)})}getPosition(){const xe=this.players.reduce((Qe,_t)=>null===Qe||_t.totalTime>Qe.totalTime?_t:Qe,null);return null!=xe?xe.getPosition():0}beforeDestroy(){this.players.forEach(xe=>{xe.beforeDestroy&&xe.beforeDestroy()})}triggerCallback(xe){const Qe="start"==xe?this._onStartFns:this._onDoneFns;Qe.forEach(_t=>_t()),Qe.length=0}}const Kt="!"},9808:(hn,ut,U)=>{U.d(ut,{Do:()=>it,EM:()=>bs,HT:()=>Pe,JF:()=>Yr,JJ:()=>Go,K0:()=>We,Mx:()=>Si,O5:()=>hr,PC:()=>nr,PM:()=>vs,S$:()=>Xe,V_:()=>Ie,Ye:()=>xe,b0:()=>Kt,bD:()=>Js,ez:()=>Ts,lw:()=>Be,mk:()=>os,mr:()=>Ke,q:()=>ee,qS:()=>ur,sg:()=>mn,uU:()=>Ms,w_:()=>je});var _=U(5e3);let L=null;function ee(){return L}function Pe(V){L||(L=V)}class je{}const We=new _.OlP("DocumentToken");let Be=(()=>{class V{historyGo($){throw new Error("Not implemented")}}return V.\u0275fac=function($){return new($||V)},V.\u0275prov=_.Yz7({token:V,factory:function(){return function rt(){return(0,_.LFG)(ve)}()},providedIn:"platform"}),V})();const Ie=new _.OlP("Location Initialized");let ve=(()=>{class V extends Be{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState($){const he=ee().getGlobalEventTarget(this._doc,"window");return he.addEventListener("popstate",$,!1),()=>he.removeEventListener("popstate",$)}onHashChange($){const he=ee().getGlobalEventTarget(this._doc,"window");return he.addEventListener("hashchange",$,!1),()=>he.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,he,Oe){Je()?this._history.pushState($,he,Oe):this.location.hash=Oe}replaceState($,he,Oe){Je()?this._history.replaceState($,he,Oe):this.location.hash=Oe}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return V.\u0275fac=function($){return new($||V)(_.LFG(We))},V.\u0275prov=_.Yz7({token:V,factory:function(){return function Tt(){return new ve((0,_.LFG)(We))}()},providedIn:"platform"}),V})();function Je(){return!!window.history.pushState}function ft(V,ue){if(0==V.length)return ue;if(0==ue.length)return V;let $=0;return V.endsWith("/")&&$++,ue.startsWith("/")&&$++,2==$?V+ue.substring(1):1==$?V+ue:V+"/"+ue}function bt(V){const ue=V.match(/#|\?|$/),$=ue&&ue.index||V.length;return V.slice(0,$-("/"===V[$-1]?1:0))+V.slice($)}function Mt(V){return V&&"?"!==V[0]?"?"+V:V}let Xe=(()=>{class V{historyGo($){throw new Error("Not implemented")}}return V.\u0275fac=function($){return new($||V)},V.\u0275prov=_.Yz7({token:V,factory:function(){return function Ct(V){const ue=(0,_.LFG)(We).location;return new Kt((0,_.LFG)(Be),ue&&ue.origin||"")}()},providedIn:"root"}),V})();const Ke=new _.OlP("appBaseHref");let Kt=(()=>{class V extends Xe{constructor($,he){if(super(),this._platformLocation=$,this._removeListenerFns=[],null==he&&(he=this._platformLocation.getBaseHrefFromDOM()),null==he)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=he}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return ft(this._baseHref,$)}path($=!1){const he=this._platformLocation.pathname+Mt(this._platformLocation.search),Oe=this._platformLocation.hash;return Oe&&$?`${he}${Oe}`:he}pushState($,he,Oe,Pt){const zt=this.prepareExternalUrl(Oe+Mt(Pt));this._platformLocation.pushState($,he,zt)}replaceState($,he,Oe,Pt){const zt=this.prepareExternalUrl(Oe+Mt(Pt));this._platformLocation.replaceState($,he,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var he,Oe;null===(Oe=(he=this._platformLocation).historyGo)||void 0===Oe||Oe.call(he,$)}}return V.\u0275fac=function($){return new($||V)(_.LFG(Be),_.LFG(Ke,8))},V.\u0275prov=_.Yz7({token:V,factory:V.\u0275fac}),V})(),it=(()=>{class V extends Xe{constructor($,he){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=he&&(this._baseHref=he)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let he=this._platformLocation.hash;return null==he&&(he="#"),he.length>0?he.substring(1):he}prepareExternalUrl($){const he=ft(this._baseHref,$);return he.length>0?"#"+he:he}pushState($,he,Oe,Pt){let zt=this.prepareExternalUrl(Oe+Mt(Pt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.pushState($,he,zt)}replaceState($,he,Oe,Pt){let zt=this.prepareExternalUrl(Oe+Mt(Pt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.replaceState($,he,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var he,Oe;null===(Oe=(he=this._platformLocation).historyGo)||void 0===Oe||Oe.call(he,$)}}return V.\u0275fac=function($){return new($||V)(_.LFG(Be),_.LFG(Ke,8))},V.\u0275prov=_.Yz7({token:V,factory:V.\u0275fac}),V})(),xe=(()=>{class V{constructor($,he){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=$;const Oe=this._platformStrategy.getBaseHref();this._platformLocation=he,this._baseHref=bt(It(Oe)),this._platformStrategy.onPopState(Pt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Pt.state,type:Pt.type})})}path($=!1){return this.normalize(this._platformStrategy.path($))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo($,he=""){return this.path()==this.normalize($+Mt(he))}normalize($){return V.stripTrailingSlash(function _t(V,ue){return V&&ue.startsWith(V)?ue.substring(V.length):ue}(this._baseHref,It($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._platformStrategy.prepareExternalUrl($)}go($,he="",Oe=null){this._platformStrategy.pushState(Oe,"",$,he),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Mt(he)),Oe)}replaceState($,he="",Oe=null){this._platformStrategy.replaceState(Oe,"",$,he),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Mt(he)),Oe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo($=0){var he,Oe;null===(Oe=(he=this._platformStrategy).historyGo)||void 0===Oe||Oe.call(he,$)}onUrlChange($){this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(he=>{this._notifyUrlChangeListeners(he.url,he.state)}))}_notifyUrlChangeListeners($="",he){this._urlChangeListeners.forEach(Oe=>Oe($,he))}subscribe($,he,Oe){return this._subject.subscribe({next:$,error:he,complete:Oe})}}return V.normalizeQueryParams=Mt,V.joinWithSlash=ft,V.stripTrailingSlash=bt,V.\u0275fac=function($){return new($||V)(_.LFG(Xe),_.LFG(Be))},V.\u0275prov=_.Yz7({token:V,factory:function(){return function Qe(){return new xe((0,_.LFG)(Xe),(0,_.LFG)(Be))}()},providedIn:"root"}),V})();function It(V){return V.replace(/\/index.html$/,"")}var Ht=(()=>((Ht=Ht||{})[Ht.Decimal=0]="Decimal",Ht[Ht.Percent=1]="Percent",Ht[Ht.Currency=2]="Currency",Ht[Ht.Scientific=3]="Scientific",Ht))(),An=(()=>((An=An||{})[An.Format=0]="Format",An[An.Standalone=1]="Standalone",An))(),_n=(()=>((_n=_n||{})[_n.Narrow=0]="Narrow",_n[_n.Abbreviated=1]="Abbreviated",_n[_n.Wide=2]="Wide",_n[_n.Short=3]="Short",_n))(),Fn=(()=>((Fn=Fn||{})[Fn.Short=0]="Short",Fn[Fn.Medium=1]="Medium",Fn[Fn.Long=2]="Long",Fn[Fn.Full=3]="Full",Fn))(),ln=(()=>((ln=ln||{})[ln.Decimal=0]="Decimal",ln[ln.Group=1]="Group",ln[ln.List=2]="List",ln[ln.PercentSign=3]="PercentSign",ln[ln.PlusSign=4]="PlusSign",ln[ln.MinusSign=5]="MinusSign",ln[ln.Exponential=6]="Exponential",ln[ln.SuperscriptingExponent=7]="SuperscriptingExponent",ln[ln.PerMille=8]="PerMille",ln[ln.Infinity=9]="Infinity",ln[ln.NaN=10]="NaN",ln[ln.TimeSeparator=11]="TimeSeparator",ln[ln.CurrencyDecimal=12]="CurrencyDecimal",ln[ln.CurrencyGroup=13]="CurrencyGroup",ln))();function Re(V,ue){return Pn((0,_.cg1)(V)[_.wAp.DateFormat],ue)}function Ee(V,ue){return Pn((0,_.cg1)(V)[_.wAp.TimeFormat],ue)}function Ne(V,ue){return Pn((0,_.cg1)(V)[_.wAp.DateTimeFormat],ue)}function ot(V,ue){const $=(0,_.cg1)(V),he=$[_.wAp.NumberSymbols][ue];if(void 0===he){if(ue===ln.CurrencyDecimal)return $[_.wAp.NumberSymbols][ln.Decimal];if(ue===ln.CurrencyGroup)return $[_.wAp.NumberSymbols][ln.Group]}return he}function jn(V){if(!V[_.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${V[_.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Pn(V,ue){for(let $=ue;$>-1;$--)if(void 0!==V[$])return V[$];throw new Error("Locale data API: locale data undefined")}function Ln(V){const[ue,$]=V.split(":");return{hours:+ue,minutes:+$}}const He=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ge={},ht=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var At=(()=>((At=At||{})[At.Short=0]="Short",At[At.ShortGMT=1]="ShortGMT",At[At.Long=2]="Long",At[At.Extended=3]="Extended",At))(),Zt=(()=>((Zt=Zt||{})[Zt.FullYear=0]="FullYear",Zt[Zt.Month=1]="Month",Zt[Zt.Date=2]="Date",Zt[Zt.Hours=3]="Hours",Zt[Zt.Minutes=4]="Minutes",Zt[Zt.Seconds=5]="Seconds",Zt[Zt.FractionalSeconds=6]="FractionalSeconds",Zt[Zt.Day=7]="Day",Zt))(),sn=(()=>((sn=sn||{})[sn.DayPeriods=0]="DayPeriods",sn[sn.Days=1]="Days",sn[sn.Months=2]="Months",sn[sn.Eras=3]="Eras",sn))();function br(V,ue,$,he){let Oe=function ie(V){if(we(V))return V;if("number"==typeof V&&!isNaN(V))return new Date(V);if("string"==typeof V){if(V=V.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(V)){const[Oe,Pt=1,zt=1]=V.split("-").map(Dn=>+Dn);return zn(Oe,Pt-1,zt)}const $=parseFloat(V);if(!isNaN(V-$))return new Date($);let he;if(he=V.match(He))return function se(V){const ue=new Date(0);let $=0,he=0;const Oe=V[8]?ue.setUTCFullYear:ue.setFullYear,Pt=V[8]?ue.setUTCHours:ue.setHours;V[9]&&($=Number(V[9]+V[10]),he=Number(V[9]+V[11])),Oe.call(ue,Number(V[1]),Number(V[2])-1,Number(V[3]));const zt=Number(V[4]||0)-$,Dn=Number(V[5]||0)-he,Yn=Number(V[6]||0),Rr=Math.floor(1e3*parseFloat("0."+(V[7]||0)));return Pt.call(ue,zt,Dn,Yn,Rr),ue}(he)}const ue=new Date(V);if(!we(ue))throw new Error(`Unable to convert "${V}" into a date`);return ue}(V);ue=Vn($,ue)||ue;let Dn,zt=[];for(;ue;){if(Dn=ht.exec(ue),!Dn){zt.push(ue);break}{zt=zt.concat(Dn.slice(1));const fr=zt.pop();if(!fr)break;ue=fr}}let Yn=Oe.getTimezoneOffset();he&&(Yn=me(he,Yn),Oe=function z(V,ue,$){const he=$?-1:1,Oe=V.getTimezoneOffset();return function ye(V,ue){return(V=new Date(V.getTime())).setMinutes(V.getMinutes()+ue),V}(V,he*(me(ue,Oe)-Oe))}(Oe,he,!0));let Rr="";return zt.forEach(fr=>{const vr=function Me(V){if(Fe[V])return Fe[V];let ue;switch(V){case"G":case"GG":case"GGG":ue=er(sn.Eras,_n.Abbreviated);break;case"GGGG":ue=er(sn.Eras,_n.Wide);break;case"GGGGG":ue=er(sn.Eras,_n.Narrow);break;case"y":ue=nn(Zt.FullYear,1,0,!1,!0);break;case"yy":ue=nn(Zt.FullYear,2,0,!0,!0);break;case"yyy":ue=nn(Zt.FullYear,3,0,!1,!0);break;case"yyyy":ue=nn(Zt.FullYear,4,0,!1,!0);break;case"Y":ue=Br(1);break;case"YY":ue=Br(2,!0);break;case"YYY":ue=Br(3);break;case"YYYY":ue=Br(4);break;case"M":case"L":ue=nn(Zt.Month,1,1);break;case"MM":case"LL":ue=nn(Zt.Month,2,1);break;case"MMM":ue=er(sn.Months,_n.Abbreviated);break;case"MMMM":ue=er(sn.Months,_n.Wide);break;case"MMMMM":ue=er(sn.Months,_n.Narrow);break;case"LLL":ue=er(sn.Months,_n.Abbreviated,An.Standalone);break;case"LLLL":ue=er(sn.Months,_n.Wide,An.Standalone);break;case"LLLLL":ue=er(sn.Months,_n.Narrow,An.Standalone);break;case"w":ue=Ni(1);break;case"ww":ue=Ni(2);break;case"W":ue=Ni(1,!0);break;case"d":ue=nn(Zt.Date,1);break;case"dd":ue=nn(Zt.Date,2);break;case"c":case"cc":ue=nn(Zt.Day,1);break;case"ccc":ue=er(sn.Days,_n.Abbreviated,An.Standalone);break;case"cccc":ue=er(sn.Days,_n.Wide,An.Standalone);break;case"ccccc":ue=er(sn.Days,_n.Narrow,An.Standalone);break;case"cccccc":ue=er(sn.Days,_n.Short,An.Standalone);break;case"E":case"EE":case"EEE":ue=er(sn.Days,_n.Abbreviated);break;case"EEEE":ue=er(sn.Days,_n.Wide);break;case"EEEEE":ue=er(sn.Days,_n.Narrow);break;case"EEEEEE":ue=er(sn.Days,_n.Short);break;case"a":case"aa":case"aaa":ue=er(sn.DayPeriods,_n.Abbreviated);break;case"aaaa":ue=er(sn.DayPeriods,_n.Wide);break;case"aaaaa":ue=er(sn.DayPeriods,_n.Narrow);break;case"b":case"bb":case"bbb":ue=er(sn.DayPeriods,_n.Abbreviated,An.Standalone,!0);break;case"bbbb":ue=er(sn.DayPeriods,_n.Wide,An.Standalone,!0);break;case"bbbbb":ue=er(sn.DayPeriods,_n.Narrow,An.Standalone,!0);break;case"B":case"BB":case"BBB":ue=er(sn.DayPeriods,_n.Abbreviated,An.Format,!0);break;case"BBBB":ue=er(sn.DayPeriods,_n.Wide,An.Format,!0);break;case"BBBBB":ue=er(sn.DayPeriods,_n.Narrow,An.Format,!0);break;case"h":ue=nn(Zt.Hours,1,-12);break;case"hh":ue=nn(Zt.Hours,2,-12);break;case"H":ue=nn(Zt.Hours,1);break;case"HH":ue=nn(Zt.Hours,2);break;case"m":ue=nn(Zt.Minutes,1);break;case"mm":ue=nn(Zt.Minutes,2);break;case"s":ue=nn(Zt.Seconds,1);break;case"ss":ue=nn(Zt.Seconds,2);break;case"S":ue=nn(Zt.FractionalSeconds,1);break;case"SS":ue=nn(Zt.FractionalSeconds,2);break;case"SSS":ue=nn(Zt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ue=Zn(At.Short);break;case"ZZZZZ":ue=Zn(At.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ue=Zn(At.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ue=Zn(At.Long);break;default:return null}return Fe[V]=ue,ue}(fr);Rr+=vr?vr(Oe,$,Yn):"''"===fr?"'":fr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Rr}function zn(V,ue,$){const he=new Date(0);return he.setFullYear(V,ue,$),he.setHours(0,0,0),he}function Vn(V,ue){const $=function Ot(V){return(0,_.cg1)(V)[_.wAp.LocaleId]}(V);if(Ge[$]=Ge[$]||{},Ge[$][ue])return Ge[$][ue];let he="";switch(ue){case"shortDate":he=Re(V,Fn.Short);break;case"mediumDate":he=Re(V,Fn.Medium);break;case"longDate":he=Re(V,Fn.Long);break;case"fullDate":he=Re(V,Fn.Full);break;case"shortTime":he=Ee(V,Fn.Short);break;case"mediumTime":he=Ee(V,Fn.Medium);break;case"longTime":he=Ee(V,Fn.Long);break;case"fullTime":he=Ee(V,Fn.Full);break;case"short":const Oe=Vn(V,"shortTime"),Pt=Vn(V,"shortDate");he=yi(Ne(V,Fn.Short),[Oe,Pt]);break;case"medium":const zt=Vn(V,"mediumTime"),Dn=Vn(V,"mediumDate");he=yi(Ne(V,Fn.Medium),[zt,Dn]);break;case"long":const Yn=Vn(V,"longTime"),Rr=Vn(V,"longDate");he=yi(Ne(V,Fn.Long),[Yn,Rr]);break;case"full":const fr=Vn(V,"fullTime"),vr=Vn(V,"fullDate");he=yi(Ne(V,Fn.Full),[fr,vr])}return he&&(Ge[$][ue]=he),he}function yi(V,ue){return ue&&(V=V.replace(/\{([^}]+)}/g,function($,he){return null!=ue&&he in ue?ue[he]:$})),V}function lr(V,ue,$="-",he,Oe){let Pt="";(V<0||Oe&&V<=0)&&(Oe?V=1-V:(V=-V,Pt=$));let zt=String(V);for(;zt.length<ue;)zt="0"+zt;return he&&(zt=zt.substr(zt.length-ue)),Pt+zt}function nn(V,ue,$=0,he=!1,Oe=!1){return function(Pt,zt){let Dn=function Sr(V,ue){switch(V){case Zt.FullYear:return ue.getFullYear();case Zt.Month:return ue.getMonth();case Zt.Date:return ue.getDate();case Zt.Hours:return ue.getHours();case Zt.Minutes:return ue.getMinutes();case Zt.Seconds:return ue.getSeconds();case Zt.FractionalSeconds:return ue.getMilliseconds();case Zt.Day:return ue.getDay();default:throw new Error(`Unknown DateType value "${V}".`)}}(V,Pt);if(($>0||Dn>-$)&&(Dn+=$),V===Zt.Hours)0===Dn&&-12===$&&(Dn=12);else if(V===Zt.FractionalSeconds)return function mr(V,ue){return lr(V,3).substr(0,ue)}(Dn,ue);const Yn=ot(zt,ln.MinusSign);return lr(Dn,ue,Yn,he,Oe)}}function er(V,ue,$=An.Format,he=!1){return function(Oe,Pt){return function dr(V,ue,$,he,Oe,Pt){switch($){case sn.Months:return function un(V,ue,$){const he=(0,_.cg1)(V),Pt=Pn([he[_.wAp.MonthsFormat],he[_.wAp.MonthsStandalone]],ue);return Pn(Pt,$)}(ue,Oe,he)[V.getMonth()];case sn.Days:return function Rn(V,ue,$){const he=(0,_.cg1)(V),Pt=Pn([he[_.wAp.DaysFormat],he[_.wAp.DaysStandalone]],ue);return Pn(Pt,$)}(ue,Oe,he)[V.getDay()];case sn.DayPeriods:const zt=V.getHours(),Dn=V.getMinutes();if(Pt){const Rr=function Xn(V){const ue=(0,_.cg1)(V);return jn(ue),(ue[_.wAp.ExtraData][2]||[]).map(he=>"string"==typeof he?Ln(he):[Ln(he[0]),Ln(he[1])])}(ue),fr=function gn(V,ue,$){const he=(0,_.cg1)(V);jn(he);const Pt=Pn([he[_.wAp.ExtraData][0],he[_.wAp.ExtraData][1]],ue)||[];return Pn(Pt,$)||[]}(ue,Oe,he),vr=Rr.findIndex(vi=>{if(Array.isArray(vi)){const[gi,ti]=vi,co=zt>=gi.hours&&Dn>=gi.minutes,Ci=zt<ti.hours||zt===ti.hours&&Dn<ti.minutes;if(gi.hours<ti.hours){if(co&&Ci)return!0}else if(co||Ci)return!0}else if(vi.hours===zt&&vi.minutes===Dn)return!0;return!1});if(-1!==vr)return fr[vr]}return function ar(V,ue,$){const he=(0,_.cg1)(V),Pt=Pn([he[_.wAp.DayPeriodsFormat],he[_.wAp.DayPeriodsStandalone]],ue);return Pn(Pt,$)}(ue,Oe,he)[zt<12?0:1];case sn.Eras:return function st(V,ue){return Pn((0,_.cg1)(V)[_.wAp.Eras],ue)}(ue,he)[V.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${$}`)}}(Oe,Pt,V,ue,$,he)}}function Zn(V){return function(ue,$,he){const Oe=-1*he,Pt=ot($,ln.MinusSign),zt=Oe>0?Math.floor(Oe/60):Math.ceil(Oe/60);switch(V){case At.Short:return(Oe>=0?"+":"")+lr(zt,2,Pt)+lr(Math.abs(Oe%60),2,Pt);case At.ShortGMT:return"GMT"+(Oe>=0?"+":"")+lr(zt,1,Pt);case At.Long:return"GMT"+(Oe>=0?"+":"")+lr(zt,2,Pt)+":"+lr(Math.abs(Oe%60),2,Pt);case At.Extended:return 0===he?"Z":(Oe>=0?"+":"")+lr(zt,2,Pt)+":"+lr(Math.abs(Oe%60),2,Pt);default:throw new Error(`Unknown zone width "${V}"`)}}}function Gi(V){return zn(V.getFullYear(),V.getMonth(),V.getDate()+(4-V.getDay()))}function Ni(V,ue=!1){return function($,he){let Oe;if(ue){const Pt=new Date($.getFullYear(),$.getMonth(),1).getDay()-1,zt=$.getDate();Oe=1+Math.floor((zt+Pt)/7)}else{const Pt=Gi($),zt=function Jr(V){const ue=zn(V,0,1).getDay();return zn(V,0,1+(ue<=4?4:11)-ue)}(Pt.getFullYear()),Dn=Pt.getTime()-zt.getTime();Oe=1+Math.round(Dn/6048e5)}return lr(Oe,V,ot(he,ln.MinusSign))}}function Br(V,ue=!1){return function($,he){return lr(Gi($).getFullYear(),V,ot(he,ln.MinusSign),ue)}}const Fe={};function me(V,ue){V=V.replace(/:/g,"");const $=Date.parse("Jan 01, 1970 00:00:00 "+V)/6e4;return isNaN($)?ue:$}function we(V){return V instanceof Date&&!isNaN(V.valueOf())}const ct=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Xr(V){const ue=parseInt(V);if(isNaN(ue))throw new Error("Invalid integer literal when parsing "+V);return ue}function ur(V,ue,$){return(0,_.dwT)(V,ue,$)}function Si(V,ue){ue=encodeURIComponent(ue);for(const $ of V.split(";")){const he=$.indexOf("="),[Oe,Pt]=-1==he?[$,""]:[$.slice(0,he),$.slice(he+1)];if(Oe.trim()===ue)return decodeURIComponent(Pt)}return null}let os=(()=>{class V{constructor($,he,Oe,Pt){this._iterableDiffers=$,this._keyValueDiffers=he,this._ngEl=Oe,this._renderer=Pt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,_.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(he=>this._toggleClass(he.key,he.currentValue)),$.forEachChangedItem(he=>this._toggleClass(he.key,he.currentValue)),$.forEachRemovedItem(he=>{he.previousValue&&this._toggleClass(he.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(he=>{if("string"!=typeof he.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,_.AaK)(he.item)}`);this._toggleClass(he.item,!0)}),$.forEachRemovedItem(he=>this._toggleClass(he.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(he=>this._toggleClass(he,!0)):Object.keys($).forEach(he=>this._toggleClass(he,!!$[he])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(he=>this._toggleClass(he,!1)):Object.keys($).forEach(he=>this._toggleClass(he,!1)))}_toggleClass($,he){($=$.trim())&&$.split(/\s+/g).forEach(Oe=>{he?this._renderer.addClass(this._ngEl.nativeElement,Oe):this._renderer.removeClass(this._ngEl.nativeElement,Oe)})}}return V.\u0275fac=function($){return new($||V)(_.Y36(_.ZZ4),_.Y36(_.aQg),_.Y36(_.SBq),_.Y36(_.Qsj))},V.\u0275dir=_.lG2({type:V,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),V})();class Cr{constructor(ue,$,he,Oe){this.$implicit=ue,this.ngForOf=$,this.index=he,this.count=Oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mn=(()=>{class V{constructor($,he,Oe){this._viewContainer=$,this._template=he,this._differs=Oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const he=this._viewContainer;$.forEachOperation((Oe,Pt,zt)=>{if(null==Oe.previousIndex)he.createEmbeddedView(this._template,new Cr(Oe.item,this._ngForOf,-1,-1),null===zt?void 0:zt);else if(null==zt)he.remove(null===Pt?void 0:Pt);else if(null!==Pt){const Dn=he.get(Pt);he.move(Dn,zt),tr(Dn,Oe)}});for(let Oe=0,Pt=he.length;Oe<Pt;Oe++){const Dn=he.get(Oe).context;Dn.index=Oe,Dn.count=Pt,Dn.ngForOf=this._ngForOf}$.forEachIdentityChange(Oe=>{tr(he.get(Oe.currentIndex),Oe)})}static ngTemplateContextGuard($,he){return!0}}return V.\u0275fac=function($){return new($||V)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},V.\u0275dir=_.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),V})();function tr(V,ue){V.context.$implicit=ue.item}let hr=(()=>{class V{constructor($,he){this._viewContainer=$,this._context=new Zr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=he}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){at("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){at("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,he){return!0}}return V.\u0275fac=function($){return new($||V)(_.Y36(_.s_b),_.Y36(_.Rgc))},V.\u0275dir=_.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),V})();class Zr{constructor(){this.$implicit=null,this.ngIf=null}}function at(V,ue){if(ue&&!ue.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,_.AaK)(ue)}'.`)}let nr=(()=>{class V{constructor($,he,Oe){this._ngEl=$,this._differs=he,this._renderer=Oe,this._ngStyle=null,this._differ=null}set ngStyle($){this._ngStyle=$,!this._differ&&$&&(this._differ=this._differs.find($).create())}ngDoCheck(){if(this._differ){const $=this._differ.diff(this._ngStyle);$&&this._applyChanges($)}}_setStyle($,he){const[Oe,Pt]=$.split(".");null!=(he=null!=he&&Pt?`${he}${Pt}`:he)?this._renderer.setStyle(this._ngEl.nativeElement,Oe,he):this._renderer.removeStyle(this._ngEl.nativeElement,Oe)}_applyChanges($){$.forEachRemovedItem(he=>this._setStyle(he.key,null)),$.forEachAddedItem(he=>this._setStyle(he.key,he.currentValue)),$.forEachChangedItem(he=>this._setStyle(he.key,he.currentValue))}}return V.\u0275fac=function($){return new($||V)(_.Y36(_.SBq),_.Y36(_.aQg),_.Y36(_.Qsj))},V.\u0275dir=_.lG2({type:V,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),V})();function ci(V,ue){return new _.vHH(2100,"")}const Qs=new _.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Ms=(()=>{class V{constructor($,he){this.locale=$,this.defaultTimezone=he}transform($,he="mediumDate",Oe,Pt){var zt;if(null==$||""===$||$!=$)return null;try{return br($,he,Pt||this.locale,null!==(zt=null!=Oe?Oe:this.defaultTimezone)&&void 0!==zt?zt:void 0)}catch(Dn){throw ci()}}}return V.\u0275fac=function($){return new($||V)(_.Y36(_.soG,16),_.Y36(Qs,24))},V.\u0275pipe=_.Yjl({name:"date",type:V,pure:!0}),V})(),Go=(()=>{class V{constructor($){this._locale=$}transform($,he,Oe){if(!function hs(V){return!(null==V||""===V||V!=V)}($))return null;Oe=Oe||this._locale;try{return function an(V,ue,$){return function gt(V,ue,$,he,Oe,Pt,zt=!1){let Dn="",Yn=!1;if(isFinite(V)){let Rr=function Kr(V){let he,Oe,Pt,zt,Dn,ue=Math.abs(V)+"",$=0;for((Oe=ue.indexOf("."))>-1&&(ue=ue.replace(".","")),(Pt=ue.search(/e/i))>0?(Oe<0&&(Oe=Pt),Oe+=+ue.slice(Pt+1),ue=ue.substring(0,Pt)):Oe<0&&(Oe=ue.length),Pt=0;"0"===ue.charAt(Pt);Pt++);if(Pt===(Dn=ue.length))he=[0],Oe=1;else{for(Dn--;"0"===ue.charAt(Dn);)Dn--;for(Oe-=Pt,he=[],zt=0;Pt<=Dn;Pt++,zt++)he[zt]=Number(ue.charAt(Pt))}return Oe>22&&(he=he.splice(0,21),$=Oe-1,Oe=1),{digits:he,exponent:$,integerLen:Oe}}(V);zt&&(Rr=function or(V){if(0===V.digits[0])return V;const ue=V.digits.length-V.integerLen;return V.exponent?V.exponent+=2:(0===ue?V.digits.push(0,0):1===ue&&V.digits.push(0),V.integerLen+=2),V}(Rr));let fr=ue.minInt,vr=ue.minFrac,vi=ue.maxFrac;if(Pt){const Ds=Pt.match(ct);if(null===Ds)throw new Error(`${Pt} is not a valid digit info`);const Fo=Ds[1],ho=Ds[3],vo=Ds[5];null!=Fo&&(fr=Xr(Fo)),null!=ho&&(vr=Xr(ho)),null!=vo?vi=Xr(vo):null!=ho&&vr>vi&&(vi=vr)}!function yr(V,ue,$){if(ue>$)throw new Error(`The minimum number of digits after fraction (${ue}) is higher than the maximum (${$}).`);let he=V.digits,Oe=he.length-V.integerLen;const Pt=Math.min(Math.max(ue,Oe),$);let zt=Pt+V.integerLen,Dn=he[zt];if(zt>0){he.splice(Math.max(V.integerLen,zt));for(let vr=zt;vr<he.length;vr++)he[vr]=0}else{Oe=Math.max(0,Oe),V.integerLen=1,he.length=Math.max(1,zt=Pt+1),he[0]=0;for(let vr=1;vr<zt;vr++)he[vr]=0}if(Dn>=5)if(zt-1<0){for(let vr=0;vr>zt;vr--)he.unshift(0),V.integerLen++;he.unshift(1),V.integerLen++}else he[zt-1]++;for(;Oe<Math.max(0,Pt);Oe++)he.push(0);let Yn=0!==Pt;const Rr=ue+V.integerLen,fr=he.reduceRight(function(vr,vi,gi,ti){return ti[gi]=(vi+=vr)<10?vi:vi-10,Yn&&(0===ti[gi]&&gi>=Rr?ti.pop():Yn=!1),vi>=10?1:0},0);fr&&(he.unshift(fr),V.integerLen++)}(Rr,vr,vi);let gi=Rr.digits,ti=Rr.integerLen;const co=Rr.exponent;let Ci=[];for(Yn=gi.every(Ds=>!Ds);ti<fr;ti++)gi.unshift(0);for(;ti<0;ti++)gi.unshift(0);ti>0?Ci=gi.splice(ti,gi.length):(Ci=gi,gi=[0]);const Qn=[];for(gi.length>=ue.lgSize&&Qn.unshift(gi.splice(-ue.lgSize,gi.length).join(""));gi.length>ue.gSize;)Qn.unshift(gi.splice(-ue.gSize,gi.length).join(""));gi.length&&Qn.unshift(gi.join("")),Dn=Qn.join(ot($,he)),Ci.length&&(Dn+=ot($,Oe)+Ci.join("")),co&&(Dn+=ot($,ln.Exponential)+"+"+co)}else Dn=ot($,ln.Infinity);return Dn=V<0&&!Yn?ue.negPre+Dn+ue.negSuf:ue.posPre+Dn+ue.posSuf,Dn}(V,function In(V,ue="-"){const $={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},he=V.split(";"),Oe=he[0],Pt=he[1],zt=-1!==Oe.indexOf(".")?Oe.split("."):[Oe.substring(0,Oe.lastIndexOf("0")+1),Oe.substring(Oe.lastIndexOf("0")+1)],Dn=zt[0],Yn=zt[1]||"";$.posPre=Dn.substr(0,Dn.indexOf("#"));for(let fr=0;fr<Yn.length;fr++){const vr=Yn.charAt(fr);"0"===vr?$.minFrac=$.maxFrac=fr+1:"#"===vr?$.maxFrac=fr+1:$.posSuf+=vr}const Rr=Dn.split(",");if($.gSize=Rr[1]?Rr[1].length:0,$.lgSize=Rr[2]||Rr[1]?(Rr[2]||Rr[1]).length:0,Pt){const fr=Oe.length-$.posPre.length-$.posSuf.length,vr=Pt.indexOf("#");$.negPre=Pt.substr(0,vr).replace(/'/g,""),$.negSuf=Pt.substr(vr+fr).replace(/'/g,"")}else $.negPre=ue+$.posPre,$.negSuf=$.posSuf;return $}(function qt(V,ue){return(0,_.cg1)(V)[_.wAp.NumberFormats][ue]}(ue,Ht.Decimal),ot(ue,ln.MinusSign)),ue,ln.Group,ln.Decimal,$)}(function zi(V){if("string"==typeof V&&!isNaN(Number(V)-parseFloat(V)))return Number(V);if("number"!=typeof V)throw new Error(`${V} is not a number`);return V}($),Oe,he)}catch(Pt){throw ci()}}}return V.\u0275fac=function($){return new($||V)(_.Y36(_.soG,16))},V.\u0275pipe=_.Yjl({name:"number",type:V,pure:!0}),V})();let Ts=(()=>{class V{}return V.\u0275fac=function($){return new($||V)},V.\u0275mod=_.oAB({type:V}),V.\u0275inj=_.cJS({}),V})();const Js="browser";function vs(V){return"server"===V}let bs=(()=>{class V{}return V.\u0275prov=(0,_.Yz7)({token:V,providedIn:"root",factory:()=>new _i((0,_.LFG)(We),window)}),V})();class _i{constructor(ue,$){this.document=ue,this.window=$,this.offset=()=>[0,0]}setOffset(ue){this.offset=Array.isArray(ue)?()=>ue:ue}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ue){this.supportsScrolling()&&this.window.scrollTo(ue[0],ue[1])}scrollToAnchor(ue){if(!this.supportsScrolling())return;const $=function ps(V,ue){const $=V.getElementById(ue)||V.getElementsByName(ue)[0];if($)return $;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const he=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Oe=he.currentNode;for(;Oe;){const Pt=Oe.shadowRoot;if(Pt){const zt=Pt.getElementById(ue)||Pt.querySelector(`[name="${ue}"]`);if(zt)return zt}Oe=he.nextNode()}}return null}(this.document,ue);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(ue){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=ue)}}scrollToElement(ue){const $=ue.getBoundingClientRect(),he=$.left+this.window.pageXOffset,Oe=$.top+this.window.pageYOffset,Pt=this.offset();this.window.scrollTo(he-Pt[0],Oe-Pt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ue=wi(this.window.history)||wi(Object.getPrototypeOf(this.window.history));return!(!ue||!ue.writable&&!ue.set)}catch(ue){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ue){return!1}}}function wi(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class Yr{}},520:(hn,ut,U)=>{U.d(ut,{JF:()=>Ln,TP:()=>Ot,eN:()=>ln});var _=U(9808),L=U(5e3),ee=U(9646),re=U(8306),Pe=U(4351),je=U(9300),We=U(4004);class Be{}class rt{}class Ie{constructor(He){this.normalizedNames=new Map,this.lazyUpdate=null,He?this.lazyInit="string"==typeof He?()=>{this.headers=new Map,He.split("\n").forEach(Ge=>{const ht=Ge.indexOf(":");if(ht>0){const At=Ge.slice(0,ht),Zt=At.toLowerCase(),sn=Ge.slice(ht+1).trim();this.maybeSetNormalizedName(At,Zt),this.headers.has(Zt)?this.headers.get(Zt).push(sn):this.headers.set(Zt,[sn])}})}:()=>{this.headers=new Map,Object.keys(He).forEach(Ge=>{let ht=He[Ge];const At=Ge.toLowerCase();"string"==typeof ht&&(ht=[ht]),ht.length>0&&(this.headers.set(At,ht),this.maybeSetNormalizedName(Ge,At))})}:this.headers=new Map}has(He){return this.init(),this.headers.has(He.toLowerCase())}get(He){this.init();const Ge=this.headers.get(He.toLowerCase());return Ge&&Ge.length>0?Ge[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(He){return this.init(),this.headers.get(He.toLowerCase())||null}append(He,Ge){return this.clone({name:He,value:Ge,op:"a"})}set(He,Ge){return this.clone({name:He,value:Ge,op:"s"})}delete(He,Ge){return this.clone({name:He,value:Ge,op:"d"})}maybeSetNormalizedName(He,Ge){this.normalizedNames.has(Ge)||this.normalizedNames.set(Ge,He)}init(){this.lazyInit&&(this.lazyInit instanceof Ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(He=>this.applyUpdate(He)),this.lazyUpdate=null))}copyFrom(He){He.init(),Array.from(He.headers.keys()).forEach(Ge=>{this.headers.set(Ge,He.headers.get(Ge)),this.normalizedNames.set(Ge,He.normalizedNames.get(Ge))})}clone(He){const Ge=new Ie;return Ge.lazyInit=this.lazyInit&&this.lazyInit instanceof Ie?this.lazyInit:this,Ge.lazyUpdate=(this.lazyUpdate||[]).concat([He]),Ge}applyUpdate(He){const Ge=He.name.toLowerCase();switch(He.op){case"a":case"s":let ht=He.value;if("string"==typeof ht&&(ht=[ht]),0===ht.length)return;this.maybeSetNormalizedName(He.name,Ge);const At=("a"===He.op?this.headers.get(Ge):void 0)||[];At.push(...ht),this.headers.set(Ge,At);break;case"d":const Zt=He.value;if(Zt){let sn=this.headers.get(Ge);if(!sn)return;sn=sn.filter(br=>-1===Zt.indexOf(br)),0===sn.length?(this.headers.delete(Ge),this.normalizedNames.delete(Ge)):this.headers.set(Ge,sn)}else this.headers.delete(Ge),this.normalizedNames.delete(Ge)}}forEach(He){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ge=>He(this.normalizedNames.get(Ge),this.headers.get(Ge)))}}class ve{encodeKey(He){return bt(He)}encodeValue(He){return bt(He)}decodeKey(He){return decodeURIComponent(He)}decodeValue(He){return decodeURIComponent(He)}}const Tt=/%(\d[a-f0-9])/gi,ft={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function bt(xt){return encodeURIComponent(xt).replace(Tt,(He,Ge)=>{var ht;return null!==(ht=ft[Ge])&&void 0!==ht?ht:He})}function Mt(xt){return`${xt}`}class Xe{constructor(He={}){if(this.updates=null,this.cloneFrom=null,this.encoder=He.encoder||new ve,He.fromString){if(He.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Je(xt,He){const Ge=new Map;return xt.length>0&&xt.replace(/^\?/,"").split("&").forEach(At=>{const Zt=At.indexOf("="),[sn,br]=-1==Zt?[He.decodeKey(At),""]:[He.decodeKey(At.slice(0,Zt)),He.decodeValue(At.slice(Zt+1))],zn=Ge.get(sn)||[];zn.push(br),Ge.set(sn,zn)}),Ge}(He.fromString,this.encoder)}else He.fromObject?(this.map=new Map,Object.keys(He.fromObject).forEach(Ge=>{const ht=He.fromObject[Ge];this.map.set(Ge,Array.isArray(ht)?ht:[ht])})):this.map=null}has(He){return this.init(),this.map.has(He)}get(He){this.init();const Ge=this.map.get(He);return Ge?Ge[0]:null}getAll(He){return this.init(),this.map.get(He)||null}keys(){return this.init(),Array.from(this.map.keys())}append(He,Ge){return this.clone({param:He,value:Ge,op:"a"})}appendAll(He){const Ge=[];return Object.keys(He).forEach(ht=>{const At=He[ht];Array.isArray(At)?At.forEach(Zt=>{Ge.push({param:ht,value:Zt,op:"a"})}):Ge.push({param:ht,value:At,op:"a"})}),this.clone(Ge)}set(He,Ge){return this.clone({param:He,value:Ge,op:"s"})}delete(He,Ge){return this.clone({param:He,value:Ge,op:"d"})}toString(){return this.init(),this.keys().map(He=>{const Ge=this.encoder.encodeKey(He);return this.map.get(He).map(ht=>Ge+"="+this.encoder.encodeValue(ht)).join("&")}).filter(He=>""!==He).join("&")}clone(He){const Ge=new Xe({encoder:this.encoder});return Ge.cloneFrom=this.cloneFrom||this,Ge.updates=(this.updates||[]).concat(He),Ge}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(He=>this.map.set(He,this.cloneFrom.map.get(He))),this.updates.forEach(He=>{switch(He.op){case"a":case"s":const Ge=("a"===He.op?this.map.get(He.param):void 0)||[];Ge.push(Mt(He.value)),this.map.set(He.param,Ge);break;case"d":if(void 0===He.value){this.map.delete(He.param);break}{let ht=this.map.get(He.param)||[];const At=ht.indexOf(Mt(He.value));-1!==At&&ht.splice(At,1),ht.length>0?this.map.set(He.param,ht):this.map.delete(He.param)}}}),this.cloneFrom=this.updates=null)}}class Ke{constructor(){this.map=new Map}set(He,Ge){return this.map.set(He,Ge),this}get(He){return this.map.has(He)||this.map.set(He,He.defaultValue()),this.map.get(He)}delete(He){return this.map.delete(He),this}has(He){return this.map.has(He)}keys(){return this.map.keys()}}function it(xt){return"undefined"!=typeof ArrayBuffer&&xt instanceof ArrayBuffer}function xe(xt){return"undefined"!=typeof Blob&&xt instanceof Blob}function Qe(xt){return"undefined"!=typeof FormData&&xt instanceof FormData}class It{constructor(He,Ge,ht,At){let Zt;if(this.url=Ge,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=He.toUpperCase(),function Kt(xt){switch(xt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||At?(this.body=void 0!==ht?ht:null,Zt=At):Zt=ht,Zt&&(this.reportProgress=!!Zt.reportProgress,this.withCredentials=!!Zt.withCredentials,Zt.responseType&&(this.responseType=Zt.responseType),Zt.headers&&(this.headers=Zt.headers),Zt.context&&(this.context=Zt.context),Zt.params&&(this.params=Zt.params)),this.headers||(this.headers=new Ie),this.context||(this.context=new Ke),this.params){const sn=this.params.toString();if(0===sn.length)this.urlWithParams=Ge;else{const br=Ge.indexOf("?");this.urlWithParams=Ge+(-1===br?"?":br<Ge.length-1?"&":"")+sn}}else this.params=new Xe,this.urlWithParams=Ge}serializeBody(){return null===this.body?null:it(this.body)||xe(this.body)||Qe(this.body)||function _t(xt){return"undefined"!=typeof URLSearchParams&&xt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Qe(this.body)?null:xe(this.body)?this.body.type||null:it(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(He={}){var Ge;const ht=He.method||this.method,At=He.url||this.url,Zt=He.responseType||this.responseType,sn=void 0!==He.body?He.body:this.body,br=void 0!==He.withCredentials?He.withCredentials:this.withCredentials,zn=void 0!==He.reportProgress?He.reportProgress:this.reportProgress;let Vn=He.headers||this.headers,yi=He.params||this.params;const lr=null!==(Ge=He.context)&&void 0!==Ge?Ge:this.context;return void 0!==He.setHeaders&&(Vn=Object.keys(He.setHeaders).reduce((mr,nn)=>mr.set(nn,He.setHeaders[nn]),Vn)),He.setParams&&(yi=Object.keys(He.setParams).reduce((mr,nn)=>mr.set(nn,He.setParams[nn]),yi)),new It(ht,At,sn,{params:yi,headers:Vn,context:lr,reportProgress:zn,responseType:Zt,withCredentials:br})}}var be=(()=>((be=be||{})[be.Sent=0]="Sent",be[be.UploadProgress=1]="UploadProgress",be[be.ResponseHeader=2]="ResponseHeader",be[be.DownloadProgress=3]="DownloadProgress",be[be.Response=4]="Response",be[be.User=5]="User",be))();class Ht{constructor(He,Ge=200,ht="OK"){this.headers=He.headers||new Ie,this.status=void 0!==He.status?He.status:Ge,this.statusText=He.statusText||ht,this.url=He.url||null,this.ok=this.status>=200&&this.status<300}}class Nt extends Ht{constructor(He={}){super(He),this.type=be.ResponseHeader}clone(He={}){return new Nt({headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class An extends Ht{constructor(He={}){super(He),this.type=be.Response,this.body=void 0!==He.body?He.body:null}clone(He={}){return new An({body:void 0!==He.body?He.body:this.body,headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class _n extends Ht{constructor(He){super(He,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${He.url||"(unknown url)"}`:`Http failure response for ${He.url||"(unknown url)"}: ${He.status} ${He.statusText}`,this.error=He.error||null}}function Fn(xt,He){return{body:He,headers:xt.headers,context:xt.context,observe:xt.observe,params:xt.params,reportProgress:xt.reportProgress,responseType:xt.responseType,withCredentials:xt.withCredentials}}let ln=(()=>{class xt{constructor(Ge){this.handler=Ge}request(Ge,ht,At={}){let Zt;if(Ge instanceof It)Zt=Ge;else{let zn,Vn;zn=At.headers instanceof Ie?At.headers:new Ie(At.headers),At.params&&(Vn=At.params instanceof Xe?At.params:new Xe({fromObject:At.params})),Zt=new It(Ge,ht,void 0!==At.body?At.body:null,{headers:zn,context:At.context,params:Vn,reportProgress:At.reportProgress,responseType:At.responseType||"json",withCredentials:At.withCredentials})}const sn=(0,ee.of)(Zt).pipe((0,Pe.b)(zn=>this.handler.handle(zn)));if(Ge instanceof It||"events"===At.observe)return sn;const br=sn.pipe((0,je.h)(zn=>zn instanceof An));switch(At.observe||"body"){case"body":switch(Zt.responseType){case"arraybuffer":return br.pipe((0,We.U)(zn=>{if(null!==zn.body&&!(zn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return zn.body}));case"blob":return br.pipe((0,We.U)(zn=>{if(null!==zn.body&&!(zn.body instanceof Blob))throw new Error("Response is not a Blob.");return zn.body}));case"text":return br.pipe((0,We.U)(zn=>{if(null!==zn.body&&"string"!=typeof zn.body)throw new Error("Response is not a string.");return zn.body}));default:return br.pipe((0,We.U)(zn=>zn.body))}case"response":return br;default:throw new Error(`Unreachable: unhandled observe type ${At.observe}}`)}}delete(Ge,ht={}){return this.request("DELETE",Ge,ht)}get(Ge,ht={}){return this.request("GET",Ge,ht)}head(Ge,ht={}){return this.request("HEAD",Ge,ht)}jsonp(Ge,ht){return this.request("JSONP",Ge,{params:(new Xe).append(ht,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ge,ht={}){return this.request("OPTIONS",Ge,ht)}patch(Ge,ht,At={}){return this.request("PATCH",Ge,Fn(At,ht))}post(Ge,ht,At={}){return this.request("POST",Ge,Fn(At,ht))}put(Ge,ht,At={}){return this.request("PUT",Ge,Fn(At,ht))}}return xt.\u0275fac=function(Ge){return new(Ge||xt)(L.LFG(Be))},xt.\u0275prov=L.Yz7({token:xt,factory:xt.\u0275fac}),xt})();class rn{constructor(He,Ge){this.next=He,this.interceptor=Ge}handle(He){return this.interceptor.intercept(He,this.next)}}const Ot=new L.OlP("HTTP_INTERCEPTORS");let ar=(()=>{class xt{intercept(Ge,ht){return ht.handle(Ge)}}return xt.\u0275fac=function(Ge){return new(Ge||xt)},xt.\u0275prov=L.Yz7({token:xt,factory:xt.\u0275fac}),xt})();const ot=/^\)\]\}',?\n/;let pn=(()=>{class xt{constructor(Ge){this.xhrFactory=Ge}handle(Ge){if("JSONP"===Ge.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new re.y(ht=>{const At=this.xhrFactory.build();if(At.open(Ge.method,Ge.urlWithParams),Ge.withCredentials&&(At.withCredentials=!0),Ge.headers.forEach((nn,Sr)=>At.setRequestHeader(nn,Sr.join(","))),Ge.headers.has("Accept")||At.setRequestHeader("Accept","application/json, text/plain, */*"),!Ge.headers.has("Content-Type")){const nn=Ge.detectContentTypeHeader();null!==nn&&At.setRequestHeader("Content-Type",nn)}if(Ge.responseType){const nn=Ge.responseType.toLowerCase();At.responseType="json"!==nn?nn:"text"}const Zt=Ge.serializeBody();let sn=null;const br=()=>{if(null!==sn)return sn;const nn=At.statusText||"OK",Sr=new Ie(At.getAllResponseHeaders()),er=function qt(xt){return"responseURL"in xt&&xt.responseURL?xt.responseURL:/^X-Request-URL:/m.test(xt.getAllResponseHeaders())?xt.getResponseHeader("X-Request-URL"):null}(At)||Ge.url;return sn=new Nt({headers:Sr,status:At.status,statusText:nn,url:er}),sn},zn=()=>{let{headers:nn,status:Sr,statusText:er,url:dr}=br(),Zn=null;204!==Sr&&(Zn=void 0===At.response?At.responseText:At.response),0===Sr&&(Sr=Zn?200:0);let Pr=Sr>=200&&Sr<300;if("json"===Ge.responseType&&"string"==typeof Zn){const jr=Zn;Zn=Zn.replace(ot,"");try{Zn=""!==Zn?JSON.parse(Zn):null}catch(Jr){Zn=jr,Pr&&(Pr=!1,Zn={error:Jr,text:Zn})}}Pr?(ht.next(new An({body:Zn,headers:nn,status:Sr,statusText:er,url:dr||void 0})),ht.complete()):ht.error(new _n({error:Zn,headers:nn,status:Sr,statusText:er,url:dr||void 0}))},Vn=nn=>{const{url:Sr}=br(),er=new _n({error:nn,status:At.status||0,statusText:At.statusText||"Unknown Error",url:Sr||void 0});ht.error(er)};let yi=!1;const lr=nn=>{yi||(ht.next(br()),yi=!0);let Sr={type:be.DownloadProgress,loaded:nn.loaded};nn.lengthComputable&&(Sr.total=nn.total),"text"===Ge.responseType&&!!At.responseText&&(Sr.partialText=At.responseText),ht.next(Sr)},mr=nn=>{let Sr={type:be.UploadProgress,loaded:nn.loaded};nn.lengthComputable&&(Sr.total=nn.total),ht.next(Sr)};return At.addEventListener("load",zn),At.addEventListener("error",Vn),At.addEventListener("timeout",Vn),At.addEventListener("abort",Vn),Ge.reportProgress&&(At.addEventListener("progress",lr),null!==Zt&&At.upload&&At.upload.addEventListener("progress",mr)),At.send(Zt),ht.next({type:be.Sent}),()=>{At.removeEventListener("error",Vn),At.removeEventListener("abort",Vn),At.removeEventListener("load",zn),At.removeEventListener("timeout",Vn),Ge.reportProgress&&(At.removeEventListener("progress",lr),null!==Zt&&At.upload&&At.upload.removeEventListener("progress",mr)),At.readyState!==At.DONE&&At.abort()}})}}return xt.\u0275fac=function(Ge){return new(Ge||xt)(L.LFG(_.JF))},xt.\u0275prov=L.Yz7({token:xt,factory:xt.\u0275fac}),xt})();const vn=new L.OlP("XSRF_COOKIE_NAME"),Nn=new L.OlP("XSRF_HEADER_NAME");class cr{}let _r=(()=>{class xt{constructor(Ge,ht,At){this.doc=Ge,this.platform=ht,this.cookieName=At,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ge=this.doc.cookie||"";return Ge!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_.Mx)(Ge,this.cookieName),this.lastCookieString=Ge),this.lastToken}}return xt.\u0275fac=function(Ge){return new(Ge||xt)(L.LFG(_.K0),L.LFG(L.Lbi),L.LFG(vn))},xt.\u0275prov=L.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),jn=(()=>{class xt{constructor(Ge,ht){this.tokenService=Ge,this.headerName=ht}intercept(Ge,ht){const At=Ge.url.toLowerCase();if("GET"===Ge.method||"HEAD"===Ge.method||At.startsWith("http://")||At.startsWith("https://"))return ht.handle(Ge);const Zt=this.tokenService.getToken();return null!==Zt&&!Ge.headers.has(this.headerName)&&(Ge=Ge.clone({headers:Ge.headers.set(this.headerName,Zt)})),ht.handle(Ge)}}return xt.\u0275fac=function(Ge){return new(Ge||xt)(L.LFG(cr),L.LFG(Nn))},xt.\u0275prov=L.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),Xn=(()=>{class xt{constructor(Ge,ht){this.backend=Ge,this.injector=ht,this.chain=null}handle(Ge){if(null===this.chain){const ht=this.injector.get(Ot,[]);this.chain=ht.reduceRight((At,Zt)=>new rn(At,Zt),this.backend)}return this.chain.handle(Ge)}}return xt.\u0275fac=function(Ge){return new(Ge||xt)(L.LFG(rt),L.LFG(L.zs3))},xt.\u0275prov=L.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),Pn=(()=>{class xt{static disable(){return{ngModule:xt,providers:[{provide:jn,useClass:ar}]}}static withOptions(Ge={}){return{ngModule:xt,providers:[Ge.cookieName?{provide:vn,useValue:Ge.cookieName}:[],Ge.headerName?{provide:Nn,useValue:Ge.headerName}:[]]}}}return xt.\u0275fac=function(Ge){return new(Ge||xt)},xt.\u0275mod=L.oAB({type:xt}),xt.\u0275inj=L.cJS({providers:[jn,{provide:Ot,useExisting:jn,multi:!0},{provide:cr,useClass:_r},{provide:vn,useValue:"XSRF-TOKEN"},{provide:Nn,useValue:"X-XSRF-TOKEN"}]}),xt})(),Ln=(()=>{class xt{}return xt.\u0275fac=function(Ge){return new(Ge||xt)},xt.\u0275mod=L.oAB({type:xt}),xt.\u0275inj=L.cJS({providers:[ln,{provide:Be,useClass:Xn},pn,{provide:rt,useExisting:pn}],imports:[[Pn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),xt})()},5e3:(hn,ut,U)=>{U.d(ut,{$8M:()=>Qi,$Z:()=>zf,AFp:()=>dw,ALo:()=>NE,AaK:()=>Be,AsE:()=>Sg,BQk:()=>Nd,CHM:()=>qr,CRH:()=>$E,CZH:()=>L0,CqO:()=>Xf,EJc:()=>NC,EiD:()=>_e,EpF:()=>Yf,F4k:()=>Jf,FYo:()=>Hg,FiY:()=>hu,G48:()=>nI,Gf:()=>jE,GfV:()=>t,Gpc:()=>ve,JOm:()=>va,JVY:()=>_p,L6k:()=>pi,LAX:()=>jc,LFG:()=>Fs,LSH:()=>Kn,Lbi:()=>MC,MAs:()=>lg,NdJ:()=>Od,OlP:()=>Ji,Oqu:()=>Vd,PXZ:()=>qC,Q6J:()=>Kf,QGY:()=>Qf,Qsj:()=>y_,R0b:()=>_c,RDi:()=>wi,Rgc:()=>Wg,SBq:()=>Zd,Sil:()=>kC,Suo:()=>HE,TTD:()=>hs,TgZ:()=>ad,Tol:()=>Mv,Udp:()=>Vh,VKq:()=>DE,VLi:()=>WC,W1O:()=>KE,WLB:()=>SE,X6Q:()=>tI,XFs:()=>gn,Xpm:()=>Gi,Y36:()=>Oh,YKP:()=>Zi,YNc:()=>ny,Yjl:()=>se,Yz7:()=>Re,ZZ4:()=>Q0,_Bn:()=>Xh,_UZ:()=>gg,_Vd:()=>ef,_c5:()=>_I,_uU:()=>Pc,aQg:()=>J0,c2e:()=>xC,cJS:()=>Ne,cg1:()=>$d,d8E:()=>Hy,dDg:()=>yw,deG:()=>xr,dqk:()=>Vn,dwT:()=>Hv,eBb:()=>vp,eFA:()=>Ew,ekj:()=>bg,evT:()=>nm,g9A:()=>fw,h0i:()=>Wr,hGG:()=>vI,hij:()=>rp,iGM:()=>BE,ifc:()=>At,ip1:()=>cw,kL8:()=>$y,lG2:()=>ie,mCW:()=>Xl,n5z:()=>Fr,oAB:()=>me,oJD:()=>Wt,oxw:()=>yg,pB0:()=>Yd,q3G:()=>Rt,q4F:()=>s,qLn:()=>Wc,qOj:()=>Sh,qZA:()=>qf,qzn:()=>ua,sBO:()=>rI,sIi:()=>qu,s_b:()=>v_,soG:()=>U0,tBr:()=>Lu,tb:()=>pw,tp0:()=>Ll,uIk:()=>ig,vHH:()=>bt,vpe:()=>Uc,wAp:()=>Ur,xi3:()=>OE,xp6:()=>lm,yhl:()=>vc,ynx:()=>ld,z2F:()=>W0,z3N:()=>ea,zSh:()=>wh,zs3:()=>Ku});var _=U(7579),L=U(727),ee=U(8306),re=U(6451),Pe=U(3099);function je(n){for(let i in n)if(n[i]===je)return i;throw Error("Could not find renamed property on target object.")}function We(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Be(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Be).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function rt(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Ie=je({__forward_ref__:je});function ve(n){return n.__forward_ref__=ve,n.toString=function(){return Be(this())},n}function Je(n){return Tt(n)?n():n}function Tt(n){return"function"==typeof n&&n.hasOwnProperty(Ie)&&n.__forward_ref__===ve}class bt extends Error{constructor(i,o){super(function Mt(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function Xe(n){return"string"==typeof n?n:null==n?"":String(n)}function Ct(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Xe(n)}function xe(n,i){const o=i?` in ${i}`:"";throw new bt(-201,`No provider for ${Ct(n)} found${o}`)}function Rn(n,i){null==n&&function un(n,i,o,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${o} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function Re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ne(n){return{providers:n.providers||[],imports:n.imports||[]}}function ot(n){return qt(n,cr)||qt(n,jn)}function qt(n,i){return n.hasOwnProperty(i)?n[i]:null}function Nn(n){return n&&(n.hasOwnProperty(_r)||n.hasOwnProperty(Xn))?n[_r]:null}const cr=je({\u0275prov:je}),_r=je({\u0275inj:je}),jn=je({ngInjectableDef:je}),Xn=je({ngInjectorDef:je});var gn=(()=>((gn=gn||{})[gn.Default=0]="Default",gn[gn.Host=1]="Host",gn[gn.Self=2]="Self",gn[gn.SkipSelf=4]="SkipSelf",gn[gn.Optional=8]="Optional",gn))();let sr;function Ln(n){const i=sr;return sr=n,i}function Qr(n,i,o){const l=ot(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&gn.Optional?null:void 0!==i?i:void xe(Be(n),"Injector")}function xt(n){return{toString:n}.toString()}var He=(()=>((He=He||{})[He.OnPush=0]="OnPush",He[He.Default=1]="Default",He))(),At=(()=>{return(n=At||(At={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",At;var n})();const Zt="undefined"!=typeof globalThis&&globalThis,sn="undefined"!=typeof window&&window,br="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vn=Zt||"undefined"!=typeof global&&global||sn||br,mr={},nn=[],Sr=je({\u0275cmp:je}),er=je({\u0275dir:je}),dr=je({\u0275pipe:je}),Zn=je({\u0275mod:je}),Pr=je({\u0275fac:je}),jr=je({__NG_ELEMENT_ID__:je});let Jr=0;function Gi(n){return xt(()=>{const o={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===He.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||nn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||At.Emulated,id:"c",styles:n.styles||nn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,y=n.features,I=n.pipes;return l.id+=Jr++,l.inputs=z(n.inputs,o),l.outputs=z(n.outputs),y&&y.forEach(M=>M(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(Br):null,l.pipeDefs=I?()=>("function"==typeof I?I():I).map(Fe):null,l})}function Br(n){return we(n)||function ct(n){return n[er]||null}(n)}function Fe(n){return function Bt(n){return n[dr]||null}(n)}const Me={};function me(n){return xt(()=>{const i={type:n.type,bootstrap:n.bootstrap||nn,declarations:n.declarations||nn,imports:n.imports||nn,exports:n.exports||nn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Me[n.id]=n.type),i})}function z(n,i){if(null==n)return mr;const o={};for(const l in n)if(n.hasOwnProperty(l)){let h=n[l],y=h;Array.isArray(h)&&(y=h[1],h=h[0]),o[h]=l,i&&(i[h]=y)}return o}const ie=Gi;function se(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function we(n){return n[Sr]||null}function on(n,i){const o=n[Zn]||null;if(!o&&!0===i)throw new Error(`Type ${Be(n)} does not have '\u0275mod' property.`);return o}function lt(n){return Array.isArray(n)&&"object"==typeof n[1]}function mt(n){return Array.isArray(n)&&!0===n[1]}function kt(n){return 0!=(8&n.flags)}function Tn(n){return 2==(2&n.flags)}function Ar(n){return 1==(1&n.flags)}function Un(n){return null!==n.template}function nr(n){return 0!=(512&n[2])}function $r(n,i){return n.hasOwnProperty(Pr)?n[Pr]:null}class ko{constructor(i,o,l){this.previousValue=i,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function hs(){return zi}function zi(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ao),fs}function fs(){const n=Js(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===mr)n.previous=i;else for(let l in i)o[l]=i[l];n.current=null,this.ngOnChanges(i)}}function Ao(n,i,o,l){const h=Js(n)||function _s(n,i){return n[Ts]=i}(n,{previous:mr,current:null}),y=h.current||(h.current={}),I=h.previous,M=this.declaredInputs[o],k=I[M];y[M]=new ko(k&&k.currentValue,i,I===mr),n[l]=i}hs.ngInherit=!0;const Ts="__ngSimpleChanges__";function Js(n){return n[Ts]||null}let _i;function wi(n){_i=n}function ps(){return void 0!==_i?_i:"undefined"!=typeof document?document:void 0}function Yr(n){return!!n.listen}const V={createRenderer:(n,i)=>ps()};function $(n){for(;Array.isArray(n);)n=n[0];return n}function Pt(n,i){return $(i[n])}function zt(n,i){return $(i[n.index])}function Yn(n,i){return n.data[i]}function Rr(n,i){return n[i]}function fr(n,i){const o=i[n];return lt(o)?o:o[0]}function vr(n){return 4==(4&n[2])}function vi(n){return 128==(128&n[2])}function ti(n,i){return null==i?null:n[i]}function co(n){n[18]=0}function Ci(n,i){n[5]+=i;let o=n,l=n[3];for(;null!==l&&(1===i&&1===o[5]||-1===i&&0===o[5]);)l[5]+=i,o=l,l=l[3]}const Qn={lFrame:nl(null),bindingsEnabled:!0};function j(){return Qn.bindingsEnabled}function Le(){return Qn.lFrame.lView}function Jt(){return Qn.lFrame.tView}function qr(n){return Qn.lFrame.contextLView=n,n[8]}function W(){let n=q();for(;null!==n&&64===n.type;)n=n.parent;return n}function q(){return Qn.lFrame.currentTNode}function De(n,i){const o=Qn.lFrame;o.currentTNode=n,o.isParent=i}function ze(){return Qn.lFrame.isParent}function vt(){Qn.lFrame.isParent=!1}function Bn(){const n=Qn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function hi(){return Qn.lFrame.bindingIndex++}function ri(n){const i=Qn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Yi(n,i){const o=Qn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Li(i)}function Li(n){Qn.lFrame.currentDirectiveIndex=n}function Bi(n){const i=Qn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function Ns(){return Qn.lFrame.currentQueryIndex}function Eo(n){Qn.lFrame.currentQueryIndex=n}function da(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function js(n,i,o){if(o&gn.SkipSelf){let h=i,y=n;for(;!(h=h.parent,null!==h||o&gn.Host||(h=da(y),null===h||(y=y[15],10&h.type))););if(null===h)return!1;i=h,n=y}const l=Qn.lFrame=as();return l.currentTNode=i,l.lView=n,!0}function fo(n){const i=as(),o=n[1];Qn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function as(){const n=Qn.lFrame,i=null===n?null:n.child;return null===i?nl(n):i}function nl(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function wo(){const n=Qn.lFrame;return Qn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ta=wo;function Wo(){const n=wo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ls(){return Qn.lFrame.selectedIndex}function Es(n){Qn.lFrame.selectedIndex=n}function Ri(){const n=Qn.lFrame;return Yn(n.tView,n.selectedIndex)}function ta(n,i){for(let o=i.directiveStart,l=i.directiveEnd;o<l;o++){const y=n.data[o].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:M,ngAfterViewInit:k,ngAfterViewChecked:ne,ngOnDestroy:le}=y;I&&(n.contentHooks||(n.contentHooks=[])).push(-o,I),M&&((n.contentHooks||(n.contentHooks=[])).push(o,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,M)),k&&(n.viewHooks||(n.viewHooks=[])).push(-o,k),ne&&((n.viewHooks||(n.viewHooks=[])).push(o,ne),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,ne)),null!=le&&(n.destroyHooks||(n.destroyHooks=[])).push(o,le)}}function Co(n,i,o){ml(n,i,3,o)}function ss(n,i,o,l){(3&n[2])===o&&ml(n,i,o,l)}function to(n,i){let o=n[2];(3&o)===i&&(o&=2047,o+=1,n[2]=o)}function ml(n,i,o,l){const y=null!=l?l:-1,I=i.length-1;let M=0;for(let k=void 0!==l?65535&n[18]:0;k<I;k++)if("number"==typeof i[k+1]){if(M=i[k],null!=l&&M>=l)break}else i[k]<0&&(n[18]+=65536),(M<y||-1==y)&&(ai(n,o,i,k),n[18]=(4294901760&n[18])+k+2),k++}function ai(n,i,o,l){const h=o[l]<0,y=o[l+1],M=n[h?-o[l]:o[l]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{y.call(M)}finally{}}}else try{y.call(M)}finally{}}class rs{constructor(i,o,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function Mi(n,i,o){const l=Yr(n);let h=0;for(;h<o.length;){const y=o[h];if("number"==typeof y){if(0!==y)break;h++;const I=o[h++],M=o[h++],k=o[h++];l?n.setAttribute(i,M,k,I):i.setAttributeNS(I,M,k)}else{const I=y,M=o[++h];Zo(I)?l&&n.setProperty(i,I,M):l?n.setAttribute(i,I,M):i.setAttribute(I,M),h++}}return h}function ra(n){return 3===n||4===n||6===n}function Zo(n){return 64===n.charCodeAt(0)}function Os(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let l=0;l<i.length;l++){const h=i[l];"number"==typeof h?o=h:0===o||Yo(n,o,h,null,-1===o||2===o?i[++l]:null)}}return n}function Yo(n,i,o,l,h){let y=0,I=n.length;if(-1===i)I=-1;else for(;y<n.length;){const M=n[y++];if("number"==typeof M){if(M===i){I=-1;break}if(M>i){I=y-1;break}}}for(;y<n.length;){const M=n[y];if("number"==typeof M)break;if(M===o){if(null===l)return void(null!==h&&(n[y+1]=h));if(l===n[y+1])return void(n[y+2]=h)}y++,null!==l&&y++,null!==h&&y++}-1!==I&&(n.splice(I,0,i),y=I+1),n.splice(y++,0,o),null!==l&&n.splice(y++,0,l),null!==h&&n.splice(y++,0,h)}function no(n){return-1!==n}function Ss(n){return 32767&n}function za(n,i){let o=function Rl(n){return n>>16}(n),l=i;for(;o>0;)l=l[15],o--;return l}let Sa=!0;function Ml(n){const i=Sa;return Sa=n,i}let Aa=0;function vl(n,i){const o=P(n,i);if(-1!==o)return o;const l=i[1];l.firstCreatePass&&(n.injectorIndex=i.length,pa(l.data,n),pa(i,null),pa(l.blueprint,null));const h=D(n,i),y=n.injectorIndex;if(no(h)){const I=Ss(h),M=za(h,i),k=M[1].data;for(let ne=0;ne<8;ne++)i[y+ne]=M[I+ne]|k[I+ne]}return i[y+8]=h,y}function pa(n,i){n.push(0,0,0,0,0,0,0,0,i)}function P(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function D(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,l=null,h=i;for(;null!==h;){const y=h[1],I=y.type;if(l=2===I?y.declTNode:1===I?h[6]:null,null===l)return-1;if(o++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return-1}function T(n,i,o){!function _l(n,i,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(jr)&&(l=o[jr]),null==l&&(l=o[jr]=Aa++);const h=255&l;i.data[n+(h>>5)]|=1<<h}(n,i,o)}function J(n,i,o){if(o&gn.Optional)return n;xe(i,"NodeInjector")}function de(n,i,o,l){if(o&gn.Optional&&void 0===l&&(l=null),0==(o&(gn.Self|gn.Host))){const h=n[9],y=Ln(void 0);try{return h?h.get(i,l,o&gn.Optional):Qr(i,l,o&gn.Optional)}finally{Ln(y)}}return J(l,i,o)}function fe(n,i,o,l=gn.Default,h){if(null!==n){const y=function xi(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(jr)?n[jr]:void 0;return"number"==typeof i?i>=0?255&i:Ft:i}(o);if("function"==typeof y){if(!js(i,n,l))return l&gn.Host?J(h,o,l):de(i,o,l,h);try{const I=y(l);if(null!=I||l&gn.Optional)return I;xe(o)}finally{Ta()}}else if("number"==typeof y){let I=null,M=P(n,i),k=-1,ne=l&gn.Host?i[16][6]:null;for((-1===M||l&gn.SkipSelf)&&(k=-1===M?D(n,i):i[M+8],-1!==k&&Dt(l,!1)?(I=i[1],M=Ss(k),i=za(k,i)):M=-1);-1!==M;){const le=i[1];if(en(y,M,le.data)){const Se=yn(M,i,o,I,l,ne);if(Se!==Ve)return Se}k=i[M+8],-1!==k&&Dt(l,i[1].data[M+8]===ne)&&en(y,M,i)?(I=le,M=Ss(k),i=za(k,i)):M=-1}}}return de(i,o,l,h)}const Ve={};function Ft(){return new jt(W(),Le())}function yn(n,i,o,l,h,y){const I=i[1],M=I.data[n+8],le=Xt(M,I,o,null==l?Tn(M)&&Sa:l!=I&&0!=(3&M.type),h&gn.Host&&y===M);return null!==le?Gt(i,I,le,M):Ve}function Xt(n,i,o,l,h){const y=n.providerIndexes,I=i.data,M=1048575&y,k=n.directiveStart,le=y>>20,tt=h?M+le:n.directiveEnd;for(let yt=l?M:M+le;yt<tt;yt++){const Qt=I[yt];if(yt<k&&o===Qt||yt>=k&&Qt.type===o)return yt}if(h){const yt=I[k];if(yt&&Un(yt)&&yt.type===o)return k}return null}function Gt(n,i,o,l){let h=n[o];const y=i.data;if(function Lo(n){return n instanceof rs}(h)){const I=h;I.resolving&&function Ke(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new bt(-200,`Circular dependency in DI detected for ${n}${o}`)}(Ct(y[o]));const M=Ml(I.canSeeViewProviders);I.resolving=!0;const k=I.injectImpl?Ln(I.injectImpl):null;js(n,l,gn.Default);try{h=n[o]=I.factory(void 0,y,n,l),i.firstCreatePass&&o>=l.directiveStart&&function zo(n,i,o){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:y}=i.type.prototype;if(l){const I=zi(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,I),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,I)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),y&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,y))}(o,y[o],i)}finally{null!==k&&Ln(k),Ml(M),I.resolving=!1,Ta()}}return h}function en(n,i,o){return!!(o[i+(n>>5)]&1<<n)}function Dt(n,i){return!(n&gn.Self||n&gn.Host&&i)}class jt{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,l){return fe(this._tNode,this._lView,i,l,o)}}function Fr(n){return xt(()=>{const i=n.prototype.constructor,o=i[Pr]||il(i),l=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==l;){const y=h[Pr]||il(h);if(y&&y!==o)return y;h=Object.getPrototypeOf(h)}return y=>new y})}function il(n){return Tt(n)?()=>{const i=il(Je(n));return i&&i()}:$r(n)}function Qi(n){return function H(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const l=o.length;let h=0;for(;h<l;){const y=o[h];if(ra(y))break;if(0===y)h+=2;else if("number"==typeof y)for(h++;h<l&&"string"==typeof o[h];)h++;else{if(y===i)return o[h+1];h+=2}}}return null}(W(),n)}const ga="__parameters__";function qa(n,i,o){return xt(()=>{const l=function Pl(n){return function(...o){if(n){const l=n(...o);for(const h in l)this[h]=l[h]}}}(i);function h(...y){if(this instanceof h)return l.apply(this,y),this;const I=new h(...y);return M.annotation=I,M;function M(k,ne,le){const Se=k.hasOwnProperty(ga)?k[ga]:Object.defineProperty(k,ga,{value:[]})[ga];for(;Se.length<=le;)Se.push(null);return(Se[le]=Se[le]||[]).push(I),k}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Ji{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Re({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const xr=new Ji("AnalyzeForEntryComponents");function ks(n,i){void 0===i&&(i=n);for(let o=0;o<n.length;o++){let l=n[o];Array.isArray(l)?(i===n&&(i=n.slice(0,o)),ks(l,i)):i!==n&&i.push(l)}return i}function Ya(n,i){n.forEach(o=>Array.isArray(o)?Ya(o,i):i(o))}function zl(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Ol(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function pt(n,i,o){let l=ro(n,i);return l>=0?n[1|l]=o:(l=~l,function Kl(n,i,o,l){let h=n.length;if(h==i)n.push(o,l);else if(1===h)n.push(l,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=o,n[i+1]=l}}(n,l,i,o)),l}function al(n,i){const o=ro(n,i);if(o>=0)return n[1|o]}function ro(n,i){return function Na(n,i,o){let l=0,h=n.length>>o;for(;h!==l;){const y=l+(h-l>>1),I=n[y<<o];if(i===I)return y<<o;I>i?h=y:l=y+1}return~(h<<o)}(n,i,1)}const ya={},ou="__NG_DI_FLAG__",us="ngTempTokenPath",ku=/\n/gm,ll="__source",au=je({provide:String,useValue:je});let Qa;function lu(n){const i=Qa;return Qa=n,i}function El(n,i=gn.Default){if(void 0===Qa)throw new bt(203,"");return null===Qa?Qr(n,void 0,i):Qa.get(n,i&gn.Optional?null:void 0,i)}function Fs(n,i=gn.Default){return(function Pn(){return sr}()||El)(Je(n),i)}const Fl=Fs;function uu(n){const i=[];for(let o=0;o<n.length;o++){const l=Je(n[o]);if(Array.isArray(l)){if(0===l.length)throw new bt(900,"");let h,y=gn.Default;for(let I=0;I<l.length;I++){const M=l[I],k=du(M);"number"==typeof k?-1===k?h=M.token:y|=k:h=M}i.push(Fs(h,y))}else i.push(Fs(l))}return i}function cu(n,i){return n[ou]=i,n.prototype[ou]=i,n}function du(n){return n[ou]}const Lu=cu(qa("Inject",n=>({token:n})),-1),hu=cu(qa("Optional"),8),Ll=cu(qa("SkipSelf"),4);var va=(()=>((va=va||{})[va.Important=1]="Important",va[va.DashCase=2]="DashCase",va))();const wa="__ngContext__";function go(n,i){n[wa]=i}function xo(n){const i=function Jo(n){return n[wa]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function O(n,i){return undefined(n,i)}function qe(n){const i=n[3];return mt(i)?i[3]:i}function En(n){return Wn(n[13])}function Cn(n){return Wn(n[4])}function Wn(n){for(;null!==n&&!mt(n);)n=n[4];return n}function Er(n,i,o,l,h){if(null!=l){let y,I=!1;mt(l)?y=l:lt(l)&&(I=!0,l=l[0]);const M=$(l);0===n&&null!==o?null==h?Z(i,o,M):x(i,o,M,h||null,!0):1===n&&null!==o?x(i,o,M,h||null,!0):2===n?function kn(n,i,o){const l=w(n,i);l&&function Ae(n,i,o,l){Yr(n)?n.removeChild(i,o,l):i.removeChild(o)}(n,l,i,o)}(i,M,I):3===n&&i.destroyNode(M),null!=y&&function Do(n,i,o,l,h){const y=o[7];y!==$(o)&&Er(i,n,l,y,h);for(let M=10;M<o.length;M++){const k=o[M];li(k[1],k,n,i,l,y)}}(i,n,y,o,h)}}function Xo(n,i,o){if(Yr(n))return n.createElement(i,o);{const l=null!==o?function bs(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(o):null;return null===l?n.createElement(i):n.createElementNS(l,i)}}function qi(n,i){const o=n[9],l=o.indexOf(i),h=i[3];1024&i[2]&&(i[2]&=-1025,Ci(h,-1)),o.splice(l,1)}function el(n,i){if(n.length<=10)return;const o=10+i,l=n[o];if(l){const h=l[17];null!==h&&h!==n&&qi(h,l),i>0&&(n[o-1][4]=l[4]);const y=Ol(n,10+i);!function dl(n,i){li(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(l[1],l);const I=y[19];null!==I&&I.detachView(y[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Mu(n,i){if(!(256&i[2])){const o=i[11];Yr(o)&&o.destroyNode&&li(n,i,o,3,null,null),function Ru(n){let i=n[13];if(!i)return Hl(n[1],n);for(;i;){let o=null;if(lt(i))o=i[13];else{const l=i[10];l&&(o=l)}if(!o){for(;i&&!i[4]&&i!==n;)lt(i)&&Hl(i[1],i),i=i[3];null===i&&(i=n),lt(i)&&Hl(i[1],i),o=i&&i[4]}i=o}}(i)}}function Hl(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function N(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let l=0;l<o.length;l+=2){const h=i[o[l]];if(!(h instanceof rs)){const y=o[l+1];if(Array.isArray(y))for(let I=0;I<y.length;I+=2){const M=h[y[I]],k=y[I+1];try{k.call(M)}finally{}}else try{y.call(h)}finally{}}}}(n,i),function ic(n,i){const o=n.cleanup,l=i[7];let h=-1;if(null!==o)for(let y=0;y<o.length-1;y+=2)if("string"==typeof o[y]){const I=o[y+1],M="function"==typeof I?I(i):$(i[I]),k=l[h=o[y+2]],ne=o[y+3];"boolean"==typeof ne?M.removeEventListener(o[y],k,ne):ne>=0?l[h=ne]():l[h=-ne].unsubscribe(),y+=2}else{const I=l[h=o[y+1]];o[y].call(I)}if(null!==l){for(let y=h+1;y<l.length;y++)l[y]();i[7]=null}}(n,i),1===i[1].type&&Yr(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&mt(i[3])){o!==i[3]&&qi(o,i);const l=i[19];null!==l&&l.detachView(n)}}}function E(n,i,o){return function C(n,i,o){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return o[0];if(2&l.flags){const h=n.data[l.directiveStart].encapsulation;if(h===At.None||h===At.Emulated)return null}return zt(l,o)}(n,i.parent,o)}function x(n,i,o,l,h){Yr(n)?n.insertBefore(i,o,l,h):i.insertBefore(o,l,h)}function Z(n,i,o){Yr(n)?n.appendChild(i,o):i.appendChild(o)}function oe(n,i,o,l,h){null!==l?x(n,i,o,l,h):Z(n,i,o)}function w(n,i){return Yr(n)?n.parentNode(i):i.parentNode}let Ia,Tr,Y=function b(n,i,o){return 40&n.type?zt(n,o):null};function et(n,i,o,l){const h=E(n,l,i),y=i[11],M=function g(n,i,o){return Y(n,i,o)}(l.parent||i[6],l,i);if(null!=h)if(Array.isArray(o))for(let k=0;k<o.length;k++)oe(y,h,o[k],M,!1);else oe(y,h,o,M,!1)}function Vt(n,i){if(null!==i){const o=i.type;if(3&o)return zt(i,n);if(4&o)return Mn(-1,n[i.index]);if(8&o){const l=i.child;if(null!==l)return Vt(n,l);{const h=n[i.index];return mt(h)?Mn(-1,h):$(h)}}if(32&o)return O(i,n)()||$(n[i.index]);{const l=dn(n,i);return null!==l?Array.isArray(l)?l[0]:Vt(qe(n[16]),l):Vt(n,i.next)}}return null}function dn(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Mn(n,i){const o=10+n+1;if(o<i.length){const l=i[o],h=l[1].firstChild;if(null!==h)return Vt(l,h)}return i[7]}function Mr(n,i,o,l,h,y,I){for(;null!=o;){const M=l[o.index],k=o.type;if(I&&0===i&&(M&&go($(M),l),o.flags|=4),64!=(64&o.flags))if(8&k)Mr(n,i,o.child,l,h,y,!1),Er(i,n,h,M,y);else if(32&k){const ne=O(o,l);let le;for(;le=ne();)Er(i,n,h,le,y);Er(i,n,h,M,y)}else 16&k?zs(n,i,l,o,h,y):Er(i,n,h,M,y);o=I?o.projectionNext:o.next}}function li(n,i,o,l,h,y){Mr(o,l,n.firstChild,i,h,y,!1)}function zs(n,i,o,l,h,y){const I=o[16],k=I[6].projection[l.projection];if(Array.isArray(k))for(let ne=0;ne<k.length;ne++)Er(i,n,h,k[ne],y);else Mr(n,i,k,I[3],h,y,!0)}function oa(n,i,o){Yr(n)?n.setAttribute(i,"style",o):i.style.cssText=o}function ms(n,i,o){Yr(n)?""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o):i.className=o}function Po(n){var i;return(null===(i=function Ls(){if(void 0===Ia&&(Ia=null,Vn.trustedTypes))try{Ia=Vn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ia}())||void 0===i?void 0:i.createHTML(n))||n}function So(n){var i;return(null===(i=function bi(){if(void 0===Tr&&(Tr=null,Vn.trustedTypes))try{Tr=Vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Tr}())||void 0===i?void 0:i.createHTML(n))||n}class Ba{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Di extends Ba{getTypeName(){return"HTML"}}class Bc extends Ba{getTypeName(){return"Style"}}class sc extends Ba{getTypeName(){return"Script"}}class aa extends Ba{getTypeName(){return"URL"}}class la extends Ba{getTypeName(){return"ResourceURL"}}function ea(n){return n instanceof Ba?n.changingThisBreaksApplicationSecurity:n}function ua(n,i){const o=vc(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function vc(n){return n instanceof Ba&&n.getTypeName()||null}function _p(n){return new Di(n)}function pi(n){return new Bc(n)}function vp(n){return new sc(n)}function jc(n){return new aa(n)}function Yd(n){return new la(n)}class Jd{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Po(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class yd{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const l=this.inertDocument.createElement("body");o.appendChild(l)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Po(i),o;const l=this.inertDocument.createElement("body");return l.innerHTML=Po(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(i){const o=i.attributes;for(let h=o.length-1;0<h;h--){const I=o.item(h).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&i.removeAttribute(I)}let l=i.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const wp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,oc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xl(n){return(n=String(n)).match(wp)||n.match(oc)?n:"unsafe:"+n}function ja(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function ac(...n){const i={};for(const o of n)for(const l in o)o.hasOwnProperty(l)&&(i[l]=!0);return i}const lc=ja("area,br,col,hr,img,wbr"),eh=ja("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),th=ja("rp,rt"),Vs=ac(lc,ac(eh,ja("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ac(th,ja("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ac(th,eh)),Ec=ja("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wc=ja("srcset"),p=ac(Ec,wc,ja("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ja("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),u=ja("script,style,template");class c{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,l=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?l=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,l&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Vs.hasOwnProperty(o))return this.sanitizedSomething=!0,!u.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const l=i.attributes;for(let h=0;h<l.length;h++){const y=l.item(h),I=y.name,M=I.toLowerCase();if(!p.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let k=y.value;Ec[M]&&(k=Xl(k)),wc[M]&&(n=k,k=(n=String(n)).split(",").map(i=>Xl(i.trim())).join(", ")),this.buf.push(" ",I,'="',B(k),'"')}var n;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Vs.hasOwnProperty(o)&&!lc.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(B(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S=/([^\#-~ |!])/g;function B(n){return n.replace(/&/g,"&amp;").replace(v,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(S,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Q;function _e(n,i){let o=null;try{Q=Q||function Qd(n){const i=new yd(n);return function Ep(){try{return!!(new window.DOMParser).parseFromString(Po(""),"text/html")}catch(n){return!1}}()?new Jd(i):i}(n);let l=i?String(i):"";o=Q.getInertBodyElement(l);let h=5,y=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=y,y=o.innerHTML,o=Q.getInertBodyElement(l)}while(l!==y);return Po((new c).sanitizeChildren(ke(o)||o))}finally{if(o){const l=ke(o)||o;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function ke(n){return"content"in n&&function Ye(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Rt=(()=>((Rt=Rt||{})[Rt.NONE=0]="NONE",Rt[Rt.HTML=1]="HTML",Rt[Rt.STYLE=2]="STYLE",Rt[Rt.SCRIPT=3]="SCRIPT",Rt[Rt.URL=4]="URL",Rt[Rt.RESOURCE_URL=5]="RESOURCE_URL",Rt))();function Wt(n){const i=rh();return i?So(i.sanitize(Rt.HTML,n)||""):ua(n,"HTML")?So(ea(n)):_e(ps(),Xe(n))}function Kn(n){const i=rh();return i?i.sanitize(Rt.URL,n)||"":ua(n,"URL")?ea(n):Xl(Xe(n))}function rh(){const n=Le();return n&&n[12]}function Gc(n){return n.ngOriginalError}function sh(n,...i){n.error(...i)}class Wc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),l=function ih(n){return n&&n.ngErrorLogger||sh}(i);l(this._console,"ERROR",i),o&&l(this._console,"ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Gc(i);for(;o&&Gc(o);)o=Gc(o);return o||null}}const M_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vn))();function nm(n){return n.ownerDocument}function Il(n){return n instanceof Function?n():n}function Tp(n,i,o){let l=n.length;for(;;){const h=n.indexOf(i,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const y=i.length;if(h+y===l||n.charCodeAt(h+y)<=32)return h}o=h+1}}const xu="ng-template";function bp(n,i,o){let l=0;for(;l<n.length;){let h=n[l++];if(o&&"class"===h){if(h=n[l],-1!==Tp(h.toLowerCase(),i,0))return!0}else if(1===h){for(;l<n.length&&"string"==typeof(h=n[l++]);)if(h.toLowerCase()===i)return!0;return!1}}return!1}function Dp(n){return 4===n.type&&n.value!==xu}function oh(n,i,o){return i===(4!==n.type||o?n.value:xu)}function im(n,i,o){let l=4;const h=n.attrs||[],y=function ah(n){for(let i=0;i<n.length;i++)if(ra(n[i]))return i;return n.length}(h);let I=!1;for(let M=0;M<i.length;M++){const k=i[M];if("number"!=typeof k){if(!I)if(4&l){if(l=2|1&l,""!==k&&!oh(n,k,o)||""===k&&1===i.length){if(Eu(l))return!1;I=!0}}else{const ne=8&l?k:i[++M];if(8&l&&null!==n.attrs){if(!bp(n.attrs,ne,o)){if(Eu(l))return!1;I=!0}continue}const Se=sm(8&l?"class":k,h,Dp(n),o);if(-1===Se){if(Eu(l))return!1;I=!0;continue}if(""!==ne){let tt;tt=Se>y?"":h[Se+1].toLowerCase();const yt=8&l?tt:null;if(yt&&-1!==Tp(yt,ne,0)||2&l&&ne!==tt){if(Eu(l))return!1;I=!0}}}}else{if(!I&&!Eu(l)&&!Eu(k))return!1;if(I&&Eu(k))continue;I=!1,l=k|1&l}}return Eu(l)||I}function Eu(n){return 0==(1&n)}function sm(n,i,o,l){if(null===i)return-1;let h=0;if(l||!o){let y=!1;for(;h<i.length;){const I=i[h];if(I===n)return h;if(3===I||6===I)y=!0;else{if(1===I||2===I){let M=i[++h];for(;"string"==typeof M;)M=i[++h];continue}if(4===I)break;if(0===I){h+=4;continue}}h+=y?1:2}return-1}return function Sp(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const l=n[o];if("number"==typeof l)return-1;if(l===i)return o;o++}return-1}(i,n)}function om(n,i,o=!1){for(let l=0;l<i.length;l++)if(im(n,i[l],o))return!0;return!1}function Ap(n,i){return n?":not("+i.trim()+")":i}function Rp(n){let i=n[0],o=1,l=2,h="",y=!1;for(;o<n.length;){let I=n[o];if("string"==typeof I)if(2&l){const M=n[++o];h+="["+I+(M.length>0?'="'+M+'"':"")+"]"}else 8&l?h+="."+I:4&l&&(h+=" "+I);else""!==h&&!Eu(I)&&(i+=Ap(y,h),h=""),l=I,y=y||!Eu(l);o++}return""!==h&&(i+=Ap(y,h)),i}const ui={};function lm(n){um(Jt(),Le(),ls()+n,!1)}function um(n,i,o,l){if(!l)if(3==(3&i[2])){const y=n.preOrderCheckHooks;null!==y&&Co(i,y,o)}else{const y=n.preOrderHooks;null!==y&&ss(i,y,0,o)}Es(o)}function Pu(n,i){return n<<17|i<<2}function hl(n){return n>>17&32767}function lf(n){return 2|n}function tl(n){return(131068&n)>>2}function uf(n,i){return-131069&n|i<<2}function cf(n){return 1|n}function kp(n,i){const o=n.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const h=o[l],y=o[l+1];if(-1!==y){const I=n.data[y];Eo(h),I.contentQueries(2,i[y],y)}}}function bc(n,i,o,l,h,y,I,M,k,ne){const le=i.blueprint.slice();return le[0]=h,le[2]=140|l,co(le),le[3]=le[15]=n,le[8]=o,le[10]=I||n&&n[10],le[11]=M||n&&n[11],le[12]=k||n&&n[12]||null,le[9]=ne||n&&n[9]||null,le[6]=y,le[16]=2==i.type?n[16]:le,le}function dc(n,i,o,l,h){let y=n.data[i];if(null===y)y=function mf(n,i,o,l,h){const y=q(),I=ze(),k=n.data[i]=function bm(n,i,o,l,h,y){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?y:y&&y.parent,o,i,l,h);return null===n.firstChild&&(n.firstChild=k),null!==y&&(I?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k)),k}(n,i,o,l,h),function Fi(){return Qn.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=o,y.value=l,y.attrs=h;const I=function pe(){const n=Qn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();y.injectorIndex=null===I?-1:I.injectorIndex}return De(y,!0),y}function eu(n,i,o,l){if(0===o)return-1;const h=i.length;for(let y=0;y<o;y++)i.push(l),n.blueprint.push(l),n.data.push(null);return h}function $u(n,i,o){fo(i);try{const l=n.viewQuery;null!==l&&bf(1,l,o);const h=n.template;null!==h&&wm(n,i,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&kp(n,i),n.staticViewQueries&&bf(2,n.viewQuery,o);const y=n.components;null!==y&&function Em(n,i){for(let o=0;o<i.length;o++)Vp(n,i[o])}(i,y)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[2]&=-5,Wo()}}function Zc(n,i,o,l){const h=i[2];if(256!=(256&h)){fo(i);try{co(i),function Gr(n){return Qn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&wm(n,i,o,2,l);const I=3==(3&h);if(I){const ne=n.preOrderCheckHooks;null!==ne&&Co(i,ne,null)}else{const ne=n.preOrderHooks;null!==ne&&ss(i,ne,0,null),to(i,0)}if(function tv(n){for(let i=En(n);null!==i;i=Cn(i)){if(!i[2])continue;const o=i[9];for(let l=0;l<o.length;l++){const h=o[l],y=h[3];0==(1024&h[2])&&Ci(y,1),h[2]|=1024}}}(i),function Nm(n){for(let i=En(n);null!==i;i=Cn(i))for(let o=10;o<i.length;o++){const l=i[o],h=l[1];vi(l)&&Zc(h,l,h.template,l[8])}}(i),null!==n.contentQueries&&kp(n,i),I){const ne=n.contentCheckHooks;null!==ne&&Co(i,ne)}else{const ne=n.contentHooks;null!==ne&&ss(i,ne,1),to(i,1)}!function vm(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const h=o[l];if(h<0)Es(~h);else{const y=h,I=o[++l],M=o[++l];Yi(I,y),M(2,i[y])}}}finally{Es(-1)}}(n,i);const M=n.components;null!==M&&function fl(n,i){for(let o=0;o<i.length;o++)Om(n,i[o])}(i,M);const k=n.viewQuery;if(null!==k&&bf(2,k,l),I){const ne=n.viewCheckHooks;null!==ne&&Co(i,ne)}else{const ne=n.viewHooks;null!==ne&&ss(i,ne,2),to(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-73,1024&i[2]&&(i[2]&=-1025,Ci(i[3],-1))}finally{Wo()}}}function Yc(n,i,o,l){const h=i[10],I=vr(i);try{!I&&h.begin&&h.begin(),I&&$u(n,i,l),Zc(n,i,o,l)}finally{!I&&h.end&&h.end()}}function wm(n,i,o,l,h){const y=ls(),I=2&l;try{Es(-1),I&&i.length>20&&um(n,i,20,!1),o(l,h)}finally{Es(y)}}function Qc(n,i,o){if(kt(i)){const h=i.directiveEnd;for(let y=i.directiveStart;y<h;y++){const I=n.data[y];I.contentQueries&&I.contentQueries(1,o[y],y)}}}function yf(n,i,o){!j()||(function Q_(n,i,o,l){const h=o.directiveStart,y=o.directiveEnd;n.firstCreatePass||vl(o,i),go(l,i);const I=o.initialInputs;for(let M=h;M<y;M++){const k=n.data[M],ne=Un(k);ne&&xm(i,o,k);const le=Gt(i,n,M,o);go(le,i),null!==I&&yh(0,M-h,le,k,0,I),ne&&(fr(o.index,i)[8]=le)}}(n,i,o,zt(o,i)),128==(128&o.flags)&&function J_(n,i,o){const l=o.directiveStart,h=o.directiveEnd,I=o.index,M=function ns(){return Qn.lFrame.currentDirectiveIndex}();try{Es(I);for(let k=l;k<h;k++){const ne=n.data[k],le=i[k];Li(k),(null!==ne.hostBindings||0!==ne.hostVars||null!==ne.hostAttrs)&&Rm(ne,le)}}finally{Es(-1),Li(M)}}(n,i,o))}function Gu(n,i,o=zt){const l=i.localNames;if(null!==l){let h=i.index+1;for(let y=0;y<l.length;y+=2){const I=l[y+1],M=-1===I?o(i,n):n[I];n[h++]=M}}}function Fp(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=_f(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function _f(n,i,o,l,h,y,I,M,k,ne){const le=20+l,Se=le+h,tt=function Cm(n,i){const o=[];for(let l=0;l<i;l++)o.push(l<n?null:ui);return o}(le,Se),yt="function"==typeof ne?ne():ne;return tt[1]={type:n,blueprint:tt,template:o,queries:null,viewQuery:M,declTNode:i,data:tt.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:k,consts:yt,incompleteFirstPass:!1}}function fh(n,i,o,l){const h=Vm(i);null===o?h.push(l):(h.push(o),n.firstCreatePass&&Df(n).push(l,h.length-1))}function Dm(n,i,o){for(let l in n)if(n.hasOwnProperty(l)){const h=n[l];(o=null===o?{}:o).hasOwnProperty(l)?o[l].push(i,h):o[l]=[i,h]}return o}function $l(n,i,o,l,h,y,I,M){const k=zt(i,o);let le,ne=i.inputs;!M&&null!=ne&&(le=ne[l])?(Hp(n,o,le,l,h),Tn(i)&&function Jc(n,i){const o=fr(i,n);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(l=function z_(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),h=null!=I?I(h,i.value||"",l):h,Yr(y)?y.setProperty(k,l,h):Zo(l)||(k.setProperty?k.setProperty(l,h):k[l]=h))}function Lp(n,i,o,l){let h=!1;if(j()){const y=function X_(n,i,o){const l=n.directiveRegistry;let h=null;if(l)for(let y=0;y<l.length;y++){const I=l[y];om(o,I.selectors,!1)&&(h||(h=[]),T(vl(o,i),n,I.type),Un(I)?(Ef(n,o),h.unshift(I)):h.push(I))}return h}(n,i,o),I=null===l?null:{"":-1};if(null!==y){h=!0,gh(o,n.data.length,y.length);for(let le=0;le<y.length;le++){const Se=y[le];Se.providersResolver&&Se.providersResolver(Se)}let M=!1,k=!1,ne=eu(n,i,y.length,null);for(let le=0;le<y.length;le++){const Se=y[le];o.mergedAttrs=Os(o.mergedAttrs,Se.hostAttrs),Mm(n,o,i,ne,Se),wf(ne,Se,I),null!==Se.contentQueries&&(o.flags|=8),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(o.flags|=128);const tt=Se.type.prototype;!M&&(tt.ngOnChanges||tt.ngOnInit||tt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),M=!0),!k&&(tt.ngOnChanges||tt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),k=!0),ne++}!function Sm(n,i){const l=i.directiveEnd,h=n.data,y=i.attrs,I=[];let M=null,k=null;for(let ne=i.directiveStart;ne<l;ne++){const le=h[ne],Se=le.inputs,tt=null===y||Dp(i)?null:Cf(Se,y);I.push(tt),M=Dm(Se,ne,M),k=Dm(le.outputs,ne,k)}null!==M&&(M.hasOwnProperty("class")&&(i.flags|=16),M.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=I,i.inputs=M,i.outputs=k}(n,o)}I&&function ev(n,i,o){if(i){const l=n.localNames=[];for(let h=0;h<i.length;h+=2){const y=o[i[h+1]];if(null==y)throw new bt(-301,!1);l.push(i[h],y)}}}(o,l,I)}return o.mergedAttrs=Os(o.mergedAttrs,o.attrs),h}function vf(n,i,o,l,h,y){const I=y.hostBindings;if(I){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const k=~i.index;(function Ha(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(M)!=k&&M.push(k),M.push(l,h,I)}}function Rm(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Ef(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function wf(n,i,o){if(o){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)o[i.exportAs[l]]=n;Un(i)&&(o[""]=n)}}function gh(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}function Mm(n,i,o,l,h){n.data[l]=h;const y=h.factory||(h.factory=$r(h.type)),I=new rs(y,Un(h),null);n.blueprint[l]=I,o[l]=I,vf(n,i,0,l,eu(n,o,h.hostVars,ui),h)}function xm(n,i,o){const l=zt(i,n),h=Fp(o),y=n[10],I=_h(n,bc(n,h,null,o.onPush?64:16,l,i,y,y.createRenderer(l,o),null,null));n[i.index]=I}function wu(n,i,o,l,h,y){const I=zt(n,i);!function mh(n,i,o,l,h,y,I){if(null==y)Yr(n)?n.removeAttribute(i,h,o):i.removeAttribute(h);else{const M=null==I?Xe(y):I(y,l||"",h);Yr(n)?n.setAttribute(i,h,M,o):o?i.setAttributeNS(o,h,M):i.setAttribute(h,M)}}(i[11],I,y,n.value,o,l,h)}function yh(n,i,o,l,h,y){const I=y[i];if(null!==I){const M=l.setInput;for(let k=0;k<I.length;){const ne=I[k++],le=I[k++],Se=I[k++];null!==M?l.setInput(o,Se,ne,le):o[le]=Se}}}function Cf(n,i){let o=null,l=0;for(;l<i.length;){const h=i[l];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],i[l+1])),l+=2}else l+=2;else l+=4}return o}function If(n,i,o,l){return new Array(n,!0,!1,i,null,0,l,o,null,null)}function Om(n,i){const o=fr(i,n);if(vi(o)){const l=o[1];80&o[2]?Zc(l,o,l.template,o[8]):o[5]>0&&Tf(o)}}function Tf(n){for(let l=En(n);null!==l;l=Cn(l))for(let h=10;h<l.length;h++){const y=l[h];if(1024&y[2]){const I=y[1];Zc(I,y,I.template,y[8])}else y[5]>0&&Tf(y)}const o=n[1].components;if(null!==o)for(let l=0;l<o.length;l++){const h=fr(o[l],n);vi(h)&&h[5]>0&&Tf(h)}}function Vp(n,i){const o=fr(i,n),l=o[1];(function nv(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(l,o),$u(l,o,o[8])}function _h(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Up(n){for(;n;){n[2]|=64;const i=qe(n);if(nr(n)&&!i)return n;n=i}return null}function Xc(n){!function Bp(n){for(let i=0;i<n.components.length;i++){const o=n.components[i],l=xo(o),h=l[1];Yc(h,l,h.template,o)}}(n[8])}function bf(n,i,o){Eo(0),i(n,o)}const Lm=(()=>Promise.resolve(null))();function Vm(n){return n[7]||(n[7]=[])}function Df(n){return n.cleanup||(n.cleanup=[])}function Sf(n,i){const o=n[9],l=o?o.get(Wc,null):null;l&&l.handleError(i)}function Hp(n,i,o,l,h){for(let y=0;y<o.length;){const I=o[y++],M=o[y++],k=i[I],ne=n.data[I];null!==ne.setInput?ne.setInput(k,h,l,M):k[M]=h}}function Wu(n,i,o){const l=Pt(i,n);!function Ws(n,i,o){Yr(n)?n.setValue(i,o):i.textContent=o}(n[11],l,o)}function Id(n,i,o){let l=o?n.styles:null,h=o?n.classes:null,y=0;if(null!==i)for(let I=0;I<i.length;I++){const M=i[I];"number"==typeof M?y=M:1==y?h=rt(h,M):2==y&&(l=rt(l,M+": "+i[++I]+";"))}o?n.styles=l:n.stylesWithoutHost=l,o?n.classes=h:n.classesWithoutHost=h}const Eh=new Ji("INJECTOR",-1);class Rf{get(i,o=ya){if(o===ya){const l=new Error(`NullInjectorError: No provider for ${Be(i)}!`);throw l.name="NullInjectorError",l}return o}}const wh=new Ji("Set Injector scope."),Td={},iv={};let Mf;function Ch(){return void 0===Mf&&(Mf=new Rf),Mf}function xf(n,i=null,o=null,l){const h=Bm(n,i,o,l);return h._resolveInjectorDefTypes(),h}function Bm(n,i=null,o=null,l){return new sv(n,o,i||Ch(),l)}class sv{constructor(i,o,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];o&&Ya(o,M=>this.processProvider(M,i,o)),Ya([i],M=>this.processInjectorType(M,[],y)),this.records.set(Eh,zu(void 0,this));const I=this.records.get(wh);this.scope=null!=I?I.value:null,this.source=h||("object"==typeof i?null:Be(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=ya,l=gn.Default){this.assertNotDestroyed();const h=lu(this),y=Ln(void 0);try{if(!(l&gn.SkipSelf)){let M=this.records.get(i);if(void 0===M){const k=function cv(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ji}(i)&&ot(i);M=k&&this.injectableDefInScope(k)?zu($a(i),Td):null,this.records.set(i,M)}if(null!=M)return this.hydrate(i,M)}return(l&gn.Self?Ch():this.parent).get(i,o=l&gn.Optional&&o===ya?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[us]=I[us]||[]).unshift(Be(i)),h)throw I;return function Zl(n,i,o,l){const h=n[us];throw i[ll]&&h.unshift(i[ll]),n.message=function Su(n,i,o,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=Be(i);if(Array.isArray(i))h=i.map(Be).join(" -> ");else if("object"==typeof i){let y=[];for(let I in i)if(i.hasOwnProperty(I)){let M=i[I];y.push(I+":"+("string"==typeof M?JSON.stringify(M):Be(M)))}h=`{${y.join(", ")}}`}return`${o}${l?"("+l+")":""}[${h}]: ${n.replace(ku,"\n  ")}`}("\n"+n.message,h,o,l),n.ngTokenPath=h,n[us]=null,n}(I,i,"R3InjectorError",this.source)}throw I}finally{Ln(y),lu(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((l,h)=>i.push(Be(h))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new bt(205,!1)}processInjectorType(i,o,l){if(!(i=Je(i)))return!1;let h=Nn(i);const y=null==h&&i.ngModule||void 0,I=void 0===y?i:y,M=-1!==l.indexOf(I);if(void 0!==y&&(h=Nn(y)),null==h)return!1;if(null!=h.imports&&!M){let le;l.push(I);try{Ya(h.imports,Se=>{this.processInjectorType(Se,o,l)&&(void 0===le&&(le=[]),le.push(Se))})}finally{}if(void 0!==le)for(let Se=0;Se<le.length;Se++){const{ngModule:tt,providers:yt}=le[Se];Ya(yt,Qt=>this.processProvider(Qt,tt,yt||nn))}}this.injectorDefTypes.add(I);const k=$r(I)||(()=>new I);this.records.set(I,zu(k,Td));const ne=h.providers;if(null!=ne&&!M){const le=i;Ya(ne,Se=>this.processProvider(Se,le,ne))}return void 0!==y&&void 0!==i.providers}processProvider(i,o,l){let h=bd(i=Je(i))?i:Je(i&&i.provide);const y=function jm(n,i,o){return Pf(n)?zu(void 0,n.useValue):zu(Ih(n),Td)}(i);if(bd(i)||!0!==i.multi)this.records.get(h);else{let I=this.records.get(h);I||(I=zu(void 0,Td,!0),I.factory=()=>uu(I.multi),this.records.set(h,I)),h=i,I.multi.push(i)}this.records.set(h,y)}hydrate(i,o){return o.value===Td&&(o.value=iv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Gp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Je(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function $a(n){const i=ot(n),o=null!==i?i.factory:$r(n);if(null!==o)return o;if(n instanceof Ji)throw new bt(204,!1);if(n instanceof Function)return function ov(n){const i=n.length;if(i>0)throw function sl(n,i){const o=[];for(let l=0;l<n;l++)o.push(i);return o}(i,"?"),new bt(204,!1);const o=function pn(n){const i=n&&(n[cr]||n[jn]);if(i){const o=function vn(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new bt(204,!1)}function Ih(n,i,o){let l;if(bd(n)){const h=Je(n);return $r(h)||$a(h)}if(Pf(n))l=()=>Je(n.useValue);else if(function av(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...uu(n.deps||[]));else if(function Hm(n){return!(!n||!n.useExisting)}(n))l=()=>Fs(Je(n.useExisting));else{const h=Je(n&&(n.useClass||n.provide));if(!function uv(n){return!!n.deps}(n))return $r(h)||$a(h);l=()=>new h(...uu(n.deps))}return l}function zu(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Pf(n){return null!==n&&"object"==typeof n&&au in n}function bd(n){return"function"==typeof n}let Ku=(()=>{class n{static create(o,l){var h;if(Array.isArray(o))return xf({name:""},l,o,"");{const y=null!==(h=o.name)&&void 0!==h?h:"";return xf({name:y},o.parent,o.providers,y)}}}return n.THROW_IF_NOT_FOUND=ya,n.NULL=new Rf,n.\u0275prov=Re({token:n,providedIn:"any",factory:()=>Fs(Eh)}),n.__NG_ELEMENT_ID__=-1,n})();function fv(n,i){ta(xo(n)[1],W())}function Sh(n){let i=function qm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const l=[n];for(;i;){let h;if(Un(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new bt(903,"");h=i.\u0275dir}if(h){if(o){l.push(h);const I=n;I.inputs=Ah(n.inputs),I.declaredInputs=Ah(n.declaredInputs),I.outputs=Ah(n.outputs);const M=h.hostBindings;M&&Zm(n,M);const k=h.viewQuery,ne=h.contentQueries;if(k&&gv(n,k),ne&&Xp(n,ne),We(n.inputs,h.inputs),We(n.declaredInputs,h.declaredInputs),We(n.outputs,h.outputs),Un(h)&&h.data.animation){const le=n.data;le.animation=(le.animation||[]).concat(h.data.animation)}}const y=h.features;if(y)for(let I=0;I<y.length;I++){const M=y[I];M&&M.ngInherit&&M(n),M===Sh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function pv(n){let i=0,o=null;for(let l=n.length-1;l>=0;l--){const h=n[l];h.hostVars=i+=h.hostVars,h.hostAttrs=Os(h.hostAttrs,o=Os(o,h.hostAttrs))}}(l)}function Ah(n){return n===mr?{}:n===nn?[]:n}function gv(n,i){const o=n.viewQuery;n.viewQuery=o?(l,h)=>{i(l,h),o(l,h)}:i}function Xp(n,i){const o=n.contentQueries;n.contentQueries=o?(l,h,y)=>{i(l,h,y),o(l,h,y)}:i}function Zm(n,i){const o=n.hostBindings;n.hostBindings=o?(l,h)=>{i(l,h),o(l,h)}:i}let hc=null;function tu(){if(!hc){const n=Vn.Symbol;if(n&&n.iterator)hc=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const l=i[o];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(hc=l)}}}return hc}function qu(n){return!!Sc(n)&&(Array.isArray(n)||!(n instanceof Map)&&tu()in n)}function Sc(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Zu(n,i,o){return n[i]=o}function Ga(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function fc(n,i,o,l){const h=Ga(n,i,o);return Ga(n,i+1,l)||h}function ig(n,i,o,l){const h=Le();return Ga(h,hi(),i)&&(Jt(),wu(Ri(),h,n,i,o,l)),ig}function Rc(n,i,o,l,h,y){const M=fc(n,function ni(){return Qn.lFrame.bindingIndex}(),o,h);return ri(2),M?i+Xe(o)+l+Xe(h)+y:ui}function ny(n,i,o,l,h,y,I,M){const k=Le(),ne=Jt(),le=n+20,Se=ne.firstCreatePass?function og(n,i,o,l,h,y,I,M,k){const ne=i.consts,le=dc(i,n,4,I||null,ti(ne,M));Lp(i,o,le,ti(ne,k)),ta(i,le);const Se=le.tViews=_f(2,le,l,h,y,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ne);return null!==i.queries&&(i.queries.template(i,le),Se.queries=i.queries.embeddedTView(le)),le}(le,ne,k,i,o,l,h,y,I):ne.data[le];De(Se,!1);const tt=k[11].createComment("");et(ne,k,tt,Se),go(tt,k),_h(k,k[le]=If(tt,k,tt,Se)),Ar(Se)&&yf(ne,k,Se),null!=I&&Gu(k,Se,M)}function lg(n){return Rr(function On(){return Qn.lFrame.contextLView}(),20+n)}function Oh(n,i=gn.Default){const o=Le();return null===o?Fs(n,i):fe(W(),o,Je(n),i)}function zf(){throw new Error("invalid")}function Kf(n,i,o){const l=Le();return Ga(l,hi(),i)&&$l(Jt(),Ri(),l,n,i,l[11],o,!1),Kf}function xc(n,i,o,l,h){const I=h?"class":"style";Hp(n,o,i.inputs[I],I,l)}function ad(n,i,o,l){const h=Le(),y=Jt(),I=20+n,M=h[11],k=h[I]=Xo(M,i,function Hs(){return Qn.lFrame.currentNamespace}()),ne=y.firstCreatePass?function fy(n,i,o,l,h,y,I){const M=i.consts,ne=dc(i,n,2,h,ti(M,y));return Lp(i,o,ne,ti(M,I)),null!==ne.attrs&&Id(ne,ne.attrs,!1),null!==ne.mergedAttrs&&Id(ne,ne.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,ne),ne}(I,y,h,0,i,o,l):y.data[I];De(ne,!0);const le=ne.mergedAttrs;null!==le&&Mi(M,k,le);const Se=ne.classes;null!==Se&&ms(M,k,Se);const tt=ne.styles;return null!==tt&&oa(M,k,tt),64!=(64&ne.flags)&&et(y,h,k,ne),0===function ho(){return Qn.lFrame.elementDepthCount}()&&go(k,h),function vo(){Qn.lFrame.elementDepthCount++}(),Ar(ne)&&(yf(y,h,ne),Qc(y,ne,h)),null!==l&&Gu(h,ne),ad}function qf(){let n=W();ze()?vt():(n=n.parent,De(n,!1));const i=n;!function K(){Qn.lFrame.elementDepthCount--}();const o=Jt();return o.firstCreatePass&&(ta(o,n),kt(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function yl(n){return 0!=(16&n.flags)}(i)&&xc(o,i,Le(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Al(n){return 0!=(32&n.flags)}(i)&&xc(o,i,Le(),i.stylesWithoutHost,!1),qf}function gg(n,i,o,l){return ad(n,i,o,l),qf(),gg}function ld(n,i,o){const l=Le(),h=Jt(),y=n+20,I=h.firstCreatePass?function Dv(n,i,o,l,h){const y=i.consts,I=ti(y,l),M=dc(i,n,8,"ng-container",I);return null!==I&&Id(M,I,!0),Lp(i,o,M,ti(y,h)),null!==i.queries&&i.queries.elementStart(i,M),M}(y,h,l,i,o):h.data[y];De(I,!0);const M=l[y]=l[11].createComment("");return et(h,l,M,I),go(M,l),Ar(I)&&(yf(h,l,I),Qc(h,I,l)),null!=o&&Gu(l,I),ld}function Nd(){let n=W();const i=Jt();return ze()?vt():(n=n.parent,De(n,!1)),i.firstCreatePass&&(ta(i,n),kt(n)&&i.queries.elementEnd(n)),Nd}function Yf(){return Le()}function Qf(n){return!!n&&"function"==typeof n.then}function Jf(n){return!!n&&"function"==typeof n.subscribe}const Xf=Jf;function Od(n,i,o,l){const h=Le(),y=Jt(),I=W();return function kh(n,i,o,l,h,y,I,M){const k=Ar(l),le=n.firstCreatePass&&Df(n),Se=i[8],tt=Vm(i);let yt=!0;if(3&l.type||M){const $n=zt(l,i),pr=M?M($n):$n,cn=tt.length,kr=M?es=>M($(es[l.index])):l.index;if(Yr(o)){let es=null;if(!M&&k&&(es=function py(n,i,o,l){const h=n.cleanup;if(null!=h)for(let y=0;y<h.length-1;y+=2){const I=h[y];if(I===o&&h[y+1]===l){const M=i[7],k=h[y+2];return M.length>k?M[k]:null}"string"==typeof I&&(y+=2)}return null}(n,i,h,l.index)),null!==es)(es.__ngLastListenerFn__||es).__ngNextListenerFn__=y,es.__ngLastListenerFn__=y,yt=!1;else{y=Fh(l,i,Se,y,!1);const Us=o.listen(pr,h,y);tt.push(y,Us),le&&le.push(h,kr,cn,cn+1)}}else y=Fh(l,i,Se,y,!0),pr.addEventListener(h,y,I),tt.push(y),le&&le.push(h,kr,cn,I)}else y=Fh(l,i,Se,y,!1);const Qt=l.outputs;let Sn;if(yt&&null!==Qt&&(Sn=Qt[h])){const $n=Sn.length;if($n)for(let pr=0;pr<$n;pr+=2){const Nu=i[Sn[pr]][Sn[pr+1]].subscribe(y),rf=tt.length;tt.push(y,Nu),le&&le.push(h,l.index,rf,-(rf+1))}}}(y,h,h[11],I,n,i,!!o,l),Od}function mg(n,i,o,l){try{return!1!==o(l)}catch(h){return Sf(n,h),!1}}function Fh(n,i,o,l,h){return function y(I){if(I===Function)return l;const M=2&n.flags?fr(n.index,i):i;0==(32&i[2])&&Up(M);let k=mg(i,0,l,I),ne=y.__ngNextListenerFn__;for(;ne;)k=mg(i,0,ne,I)&&k,ne=ne.__ngNextListenerFn__;return h&&!1===k&&(I.preventDefault(),I.returnValue=!1),k}}function yg(n=1){return function mi(n){return(Qn.lFrame.contextLView=function eo(n,i){for(;n>0;)i=i[15],n--;return i}(n,Qn.lFrame.contextLView))[8]}(n)}function Tg(n,i,o,l,h){const y=n[o+1],I=null===i;let M=l?hl(y):tl(y),k=!1;for(;0!==M&&(!1===k||I);){const le=n[M+1];Cy(n[M],i)&&(k=!0,n[M+1]=l?cf(le):lf(le)),M=l?hl(le):tl(le)}k&&(n[o+1]=l?lf(y):cf(y))}function Cy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&ro(n,i)>=0}const Ho={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hi(n){return n.substring(Ho.key,Ho.keyEnd)}function Fd(n,i){const o=Ho.textEnd;return o===i?-1:(i=Ho.keyEnd=function Dy(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,Ho.key=i,o),Tl(n,i,o))}function Tl(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function Vh(n,i,o){return ys(n,i,o,!1),Vh}function bg(n,i){return ys(n,i,null,!0),bg}function Mv(n){!function Cu(n,i,o,l){const h=Jt(),y=ri(2);h.firstUpdatePass&&Ry(h,null,y,l);const I=Le();if(o!==ui&&Ga(I,y,o)){const M=h.data[ls()];if(kv(M,l)&&!Ay(h,y)){let k=l?M.classesWithoutHost:M.stylesWithoutHost;null!==k&&(o=rt(k,o||"")),xc(h,M,I,o,l)}else!function Py(n,i,o,l,h,y,I,M){h===ui&&(h=nn);let k=0,ne=0,le=0<h.length?h[0]:null,Se=0<y.length?y[0]:null;for(;null!==le||null!==Se;){const tt=k<h.length?h[k+1]:void 0,yt=ne<y.length?y[ne+1]:void 0;let Sn,Qt=null;le===Se?(k+=2,ne+=2,tt!==yt&&(Qt=Se,Sn=yt)):null===Se||null!==le&&le<Se?(k+=2,Qt=le):(ne+=2,Qt=Se,Sn=yt),null!==Qt&&Ld(n,i,o,l,Qt,Sn,I,M),le=k<h.length?h[k]:null,Se=ne<y.length?y[ne]:null}}(h,M,I,I[11],I[y+1],I[y+1]=function Ov(n,i,o){if(null==o||""===o)return nn;const l=[],h=ea(o);if(Array.isArray(h))for(let y=0;y<h.length;y++)n(l,h[y],!0);else if("object"==typeof h)for(const y in h)h.hasOwnProperty(y)&&n(l,y,h[y]);else"string"==typeof h&&i(l,h);return l}(n,i,o),l,y)}}(pt,pc,n,!0)}function pc(n,i){for(let o=function Ty(n){return function Wa(n){Ho.key=0,Ho.keyEnd=0,Ho.value=0,Ho.valueEnd=0,Ho.textEnd=n.length}(n),Fd(n,Tl(n,0,Ho.textEnd))}(i);o>=0;o=Fd(i,o))pt(n,Hi(i),!0)}function ys(n,i,o,l){const h=Le(),y=Jt(),I=ri(2);y.firstUpdatePass&&Ry(y,n,I,l),i!==ui&&Ga(h,I,i)&&Ld(y,y.data[ls()],h,h[11],n,h[I+1]=function gc(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Be(ea(n)))),n}(i,o),l,I)}function Ay(n,i){return i>=n.expandoStartIndex}function Ry(n,i,o,l){const h=n.data;if(null===h[o+1]){const y=h[ls()],I=Ay(n,o);kv(y,l)&&null===i&&!I&&(i=!1),i=function My(n,i,o,l){const h=Bi(n);let y=l?i.residualClasses:i.residualStyles;if(null===h)0===(l?i.classBindings:i.styleBindings)&&(o=np(o=Dg(null,n,i,o,l),i.attrs,l),y=null);else{const I=i.directiveStylingLast;if(-1===I||n[I]!==h)if(o=Dg(h,n,i,o,l),null===y){let k=function xv(n,i,o){const l=o?i.classBindings:i.styleBindings;if(0!==tl(l))return n[hl(l)]}(n,i,l);void 0!==k&&Array.isArray(k)&&(k=Dg(null,n,i,k[1],l),k=np(k,i.attrs,l),function Pv(n,i,o,l){n[hl(o?i.classBindings:i.styleBindings)]=l}(n,i,l,k))}else y=function Nv(n,i,o){let l;const h=i.directiveEnd;for(let y=1+i.directiveStylingLast;y<h;y++)l=np(l,n[y].hostAttrs,o);return np(l,i.attrs,o)}(n,i,l)}return void 0!==y&&(l?i.residualClasses=y:i.residualStyles=y),o}(h,y,i,l),function Ig(n,i,o,l,h,y){let I=y?i.classBindings:i.styleBindings,M=hl(I),k=tl(I);n[l]=o;let le,ne=!1;if(Array.isArray(o)){const Se=o;le=Se[1],(null===le||ro(Se,le)>0)&&(ne=!0)}else le=o;if(h)if(0!==k){const tt=hl(n[M+1]);n[l+1]=Pu(tt,M),0!==tt&&(n[tt+1]=uf(n[tt+1],l)),n[M+1]=function L_(n,i){return 131071&n|i<<17}(n[M+1],l)}else n[l+1]=Pu(M,0),0!==M&&(n[M+1]=uf(n[M+1],l)),M=l;else n[l+1]=Pu(k,0),0===M?M=l:n[k+1]=uf(n[k+1],l),k=l;ne&&(n[l+1]=lf(n[l+1])),Tg(n,le,l,!0),Tg(n,le,l,!1),function wy(n,i,o,l,h){const y=h?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof i&&ro(y,i)>=0&&(o[l+1]=cf(o[l+1]))}(i,le,n,l,y),I=Pu(M,k),y?i.classBindings=I:i.styleBindings=I}(h,y,i,o,I,l)}}function Dg(n,i,o,l,h){let y=null;const I=o.directiveEnd;let M=o.directiveStylingLast;for(-1===M?M=o.directiveStart:M++;M<I&&(y=i[M],l=np(l,y.hostAttrs,h),y!==n);)M++;return null!==n&&(o.directiveStylingLast=M),l}function np(n,i,o){const l=o?1:2;let h=-1;if(null!==i)for(let y=0;y<i.length;y++){const I=i[y];"number"==typeof I?h=I:h===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),pt(n,I,!!o||i[++y]))}return void 0===n?null:n}function Ld(n,i,o,l,h,y,I,M){if(!(3&i.type))return;const k=n.data,ne=k[M+1];nu(function dm(n){return 1==(1&n)}(ne)?Ny(k,i,o,h,tl(ne),I):void 0)||(nu(y)||function Mp(n){return 2==(2&n)}(ne)&&(y=Ny(k,null,o,h,M,I)),function Ua(n,i,o,l,h){const y=Yr(n);if(i)h?y?n.addClass(o,l):o.classList.add(l):y?n.removeClass(o,l):o.classList.remove(l);else{let I=-1===l.indexOf("-")?void 0:va.DashCase;if(null==h)y?n.removeStyle(o,l,I):o.style.removeProperty(l);else{const M="string"==typeof h&&h.endsWith("!important");M&&(h=h.slice(0,-10),I|=va.Important),y?n.setStyle(o,l,h,I):o.style.setProperty(l,h,M?"important":"")}}}(l,I,Pt(ls(),o),h,y))}function Ny(n,i,o,l,h,y){const I=null===i;let M;for(;h>0;){const k=n[h],ne=Array.isArray(k),le=ne?k[1]:k,Se=null===le;let tt=o[h+1];tt===ui&&(tt=Se?nn:void 0);let yt=Se?al(tt,l):le===l?tt:void 0;if(ne&&!nu(yt)&&(yt=al(k,l)),nu(yt)&&(M=yt,I))return M;const Qt=n[h+1];h=I?hl(Qt):tl(Qt)}if(null!==i){let k=y?i.residualClasses:i.residualStyles;null!=k&&(M=al(k,l))}return M}function nu(n){return void 0!==n}function kv(n,i){return 0!=(n.flags&(i?16:32))}function Pc(n,i=""){const o=Le(),l=Jt(),h=n+20,y=l.firstCreatePass?dc(l,h,1,i,null):l.data[h],I=o[h]=function Ii(n,i){return Yr(n)?n.createText(i):n.createTextNode(i)}(o[11],i);et(l,o,I,y),De(y,!1)}function Vd(n){return rp("",n,""),Vd}function rp(n,i,o){const l=Le(),h=function Ac(n,i,o,l){return Ga(n,hi(),o)?i+Xe(o)+l:ui}(l,n,i,o);return h!==ui&&Wu(l,ls(),h),rp}function Sg(n,i,o,l,h){const y=Le(),I=Rc(y,n,i,o,l,h);return I!==ui&&Wu(y,ls(),I),Sg}function Hy(n,i,o){const l=Le();if(Ga(l,hi(),i)){const y=Jt(),I=Ri();$l(y,I,l,n,i,function Um(n,i,o){return(null===n||Un(n))&&(o=function he(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[i.index])),o[11]}(Bi(y.data),I,l),o,!0)}return Hy}const yc=void 0;var ap=["en",[["a","p"],["AM","PM"],yc],[["AM","PM"],yc,yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yc,"{1} 'at' {0}",yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jv(n){const o=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let Hd={};function Hv(n,i,o){"string"!=typeof i&&(o=i,i=n[Ur.LocaleId]),i=i.toLowerCase().replace(/_/g,"-"),Hd[i]=n,o&&(Hd[i][Ur.ExtraData]=o)}function $d(n){const i=function Gy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Gh(i);if(o)return o;const l=i.split("-")[0];if(o=Gh(l),o)return o;if("en"===l)return ap;throw new Error(`Missing locale data for the locale "${n}".`)}function $y(n){return $d(n)[Ur.PluralCase]}function Gh(n){return n in Hd||(Hd[n]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[n]),Hd[n]}var Ur=(()=>((Ur=Ur||{})[Ur.LocaleId=0]="LocaleId",Ur[Ur.DayPeriodsFormat=1]="DayPeriodsFormat",Ur[Ur.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ur[Ur.DaysFormat=3]="DaysFormat",Ur[Ur.DaysStandalone=4]="DaysStandalone",Ur[Ur.MonthsFormat=5]="MonthsFormat",Ur[Ur.MonthsStandalone=6]="MonthsStandalone",Ur[Ur.Eras=7]="Eras",Ur[Ur.FirstDayOfWeek=8]="FirstDayOfWeek",Ur[Ur.WeekendRange=9]="WeekendRange",Ur[Ur.DateFormat=10]="DateFormat",Ur[Ur.TimeFormat=11]="TimeFormat",Ur[Ur.DateTimeFormat=12]="DateTimeFormat",Ur[Ur.NumberSymbols=13]="NumberSymbols",Ur[Ur.NumberFormats=14]="NumberFormats",Ur[Ur.CurrencyCode=15]="CurrencyCode",Ur[Ur.CurrencySymbol=16]="CurrencySymbol",Ur[Ur.CurrencyName=17]="CurrencyName",Ur[Ur.Currencies=18]="Currencies",Ur[Ur.Directionality=19]="Directionality",Ur[Ur.PluralCase=20]="PluralCase",Ur[Ur.ExtraData=21]="ExtraData",Ur))();const Wh="en-US";let $v=Wh;function Lg(n,i,o,l,h){if(n=Je(n),Array.isArray(n))for(let y=0;y<n.length;y++)Lg(n[y],i,o,l,h);else{const y=Jt(),I=Le();let M=bd(n)?n:Je(n.provide),k=Ih(n);const ne=W(),le=1048575&ne.providerIndexes,Se=ne.directiveStart,tt=ne.providerIndexes>>20;if(bd(n)||!n.multi){const yt=new rs(k,h,Oh),Qt=Vg(M,i,h?le:le+tt,Se);-1===Qt?(T(vl(ne,I),y,M),Xu(y,n,i.length),i.push(M),ne.directiveStart++,ne.directiveEnd++,h&&(ne.providerIndexes+=1048576),o.push(yt),I.push(yt)):(o[Qt]=yt,I[Qt]=yt)}else{const yt=Vg(M,i,le+tt,Se),Qt=Vg(M,i,le,le+tt),Sn=yt>=0&&o[yt],$n=Qt>=0&&o[Qt];if(h&&!$n||!h&&!Sn){T(vl(ne,I),y,M);const pr=function Bg(n,i,o,l,h){const y=new rs(n,o,Oh);return y.multi=[],y.index=i,y.componentProviders=0,d_(y,h,l&&!o),y}(h?h_:y0,o.length,h,l,k);!h&&$n&&(o[Qt].providerFactory=pr),Xu(y,n,i.length,0),i.push(M),ne.directiveStart++,ne.directiveEnd++,h&&(ne.providerIndexes+=1048576),o.push(pr),I.push(pr)}else Xu(y,n,yt>-1?yt:Qt,d_(o[h?Qt:yt],k,!h&&l));!h&&l&&$n&&o[Qt].componentProviders++}}}function Xu(n,i,o,l){const h=bd(i),y=function lv(n){return!!n.useClass}(i);if(h||y){const k=(y?Je(i.useClass):i).prototype.ngOnDestroy;if(k){const ne=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const le=ne.indexOf(o);-1===le?ne.push(o,[l,k]):ne[le+1].push(l,k)}else ne.push(o,k)}}}function d_(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Vg(n,i,o,l){for(let h=o;h<l;h++)if(i[h]===n)return h;return-1}function y0(n,i,o,l){return Ug(this.multi,[])}function h_(n,i,o,l){const h=this.multi;let y;if(this.providerFactory){const I=this.providerFactory.componentProviders,M=Gt(o,o[1],this.providerFactory.index,l);y=M.slice(0,I),Ug(h,y);for(let k=I;k<M.length;k++)y.push(M[k])}else y=[],Ug(h,y);return y}function Ug(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function Xh(n,i=[]){return o=>{o.providersResolver=(l,h)=>function m0(n,i,o){const l=Jt();if(l.firstCreatePass){const h=Un(n);Lg(o,l.data,l.blueprint,h,!0),Lg(i,l.data,l.blueprint,h,!1)}}(l,h?h(n):n,i)}}class p_{}class m_{resolveComponentFactory(i){throw function jg(n){const i=Error(`No component factory found for ${Be(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let ef=(()=>{class n{}return n.NULL=new m_,n})();function v0(){return gd(W(),Le())}function gd(n,i){return new Zd(zt(n,i))}let Zd=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=v0,n})();function E0(n){return n instanceof Zd?n.nativeElement:n}class Hg{}let y_=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function r(){const n=Le(),o=fr(W().index,n);return function w0(n){return n[11]}(lt(o)?o:n)}(),n})(),e=(()=>{class n{}return n.\u0275prov=Re({token:n,providedIn:"root",factory:()=>null}),n})();class t{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const s=new t("13.3.12"),a={};function d(n,i,o,l,h=!1){for(;null!==o;){const y=i[o.index];if(null!==y&&l.push($(y)),mt(y))for(let M=10;M<y.length;M++){const k=y[M],ne=k[1].firstChild;null!==ne&&d(k[1],k,ne,l)}const I=o.type;if(8&I)d(n,i,o.child,l);else if(32&I){const M=O(o,i);let k;for(;k=M();)l.push(k)}else if(16&I){const M=dn(i,o);if(Array.isArray(M))l.push(...M);else{const k=qe(i[16]);d(k[1],k,M,l,!0)}}o=h?o.projectionNext:o.next}return l}class m{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return d(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(mt(i)){const o=i[8],l=o?o.indexOf(this):-1;l>-1&&(el(i,l),Ol(o,l))}this._attachedToViewContainer=!1}Mu(this._lView[1],this._lView)}onDestroy(i){fh(this._lView[1],this._lView,null,i)}markForCheck(){Up(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Dc(n,i,o){const l=i[10];l.begin&&l.begin();try{Zc(n,i,n.template,o)}catch(h){throw Sf(i,h),h}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new bt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bo(n,i){li(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new bt(902,"");this._appRef=i}}class R extends m{constructor(i){super(i),this._view=i}detectChanges(){Xc(this._view)}checkNoChanges(){}get context(){return null}}class G extends ef{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=we(i);return new Et(o,this.ngModule)}}function X(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Et extends p_{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function am(n){return n.map(Rp).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return X(this.componentDef.inputs)}get outputs(){return X(this.componentDef.outputs)}create(i,o,l,h){const y=(h=h||this.ngModule)?function Ue(n,i){return{get:(o,l,h)=>{const y=n.get(o,a,h);return y!==a||l===a?y:i.get(o,l,h)}}}(i,h.injector):i,I=y.get(Hg,V),M=y.get(e,null),k=I.createRenderer(null,this.componentDef),ne=this.componentDef.selectors[0][0]||"div",le=l?function Tm(n,i,o){if(Yr(n))return n.selectRootElement(i,o===At.ShadowDom);let l="string"==typeof i?n.querySelector(i):i;return l.textContent="",l}(k,l,this.componentDef.encapsulation):Xo(I.createRenderer(null,this.componentDef),ne,function ge(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ne)),Se=this.componentDef.onPush?576:528,tt=function Jp(n,i){return{components:[],scheduler:n||M_,clean:Lm,playerHandler:i||null,flags:0}}(),yt=_f(0,null,null,1,0,null,null,null,null,null),Qt=bc(null,yt,tt,Se,null,null,I,k,M,y);let Sn,$n;fo(Qt);try{const pr=function zm(n,i,o,l,h,y){const I=o[1];o[20]=n;const k=dc(I,20,2,"#host",null),ne=k.mergedAttrs=i.hostAttrs;null!==ne&&(Id(k,ne,!0),null!==n&&(Mi(h,n,ne),null!==k.classes&&ms(h,n,k.classes),null!==k.styles&&oa(h,n,k.styles)));const le=l.createRenderer(n,i),Se=bc(o,Fp(i),null,i.onPush?64:16,o[20],k,l,le,y||null,null);return I.firstCreatePass&&(T(vl(k,o),I,i.type),Ef(I,k),gh(k,o.length,1)),_h(o,Se),o[20]=Se}(le,this.componentDef,Qt,I,k);if(le)if(l)Mi(k,le,["ng-version",s.full]);else{const{attrs:cn,classes:kr}=function F_(n){const i=[],o=[];let l=1,h=2;for(;l<n.length;){let y=n[l];if("string"==typeof y)2===h?""!==y&&i.push(y,n[++l]):8===h&&o.push(y);else{if(!Eu(h))break;h=y}l++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);cn&&Mi(k,le,cn),kr&&kr.length>0&&ms(k,le,kr.join(" "))}if($n=Yn(yt,20),void 0!==o){const cn=$n.projection=[];for(let kr=0;kr<this.ngContentSelectors.length;kr++){const es=o[kr];cn.push(null!=es?Array.from(es):null)}}Sn=function Qp(n,i,o,l,h){const y=o[1],I=function Y_(n,i,o){const l=W();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Mm(n,l,i,eu(n,i,1,null),o));const h=Gt(i,n,l.directiveStart,l);go(h,i);const y=zt(l,i);return y&&go(y,i),h}(y,o,i);if(l.components.push(I),n[8]=I,h&&h.forEach(k=>k(I,i)),i.contentQueries){const k=W();i.contentQueries(1,I,k.directiveStart)}const M=W();return!y.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Es(M.index),vf(o[1],M,0,M.directiveStart,M.directiveEnd,i),Rm(i,I)),I}(pr,this.componentDef,Qt,tt,[fv]),$u(yt,Qt,null)}finally{Wo()}return new Hn(this.componentType,Sn,gd($n,Qt),Qt,$n)}}class Hn extends class f_{}{constructor(i,o,l,h,y){super(),this.location=l,this._rootLView=h,this._tNode=y,this.instance=o,this.hostView=this.changeDetectorRef=new R(h),this.componentType=i}get injector(){return new jt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Wr{}class Zi{}const zr=new Map;class bE extends Wr{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new G(this);const l=on(i);this._bootstrapComponents=Il(l.bootstrap),this._r3Injector=Bm(i,o,[{provide:Wr,useValue:this},{provide:ef,useValue:this.componentFactoryResolver}],Be(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Ku.THROW_IF_NOT_FOUND,l=gn.Default){return i===Ku||i===Wr||i===Eh?this:this._r3Injector.get(i,o,l)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class I0 extends Zi{constructor(i){super(),this.moduleType=i,null!==on(i)&&function qs(n){const i=new Set;!function o(l){const h=on(l,!0),y=h.id;null!==y&&(function Ks(n,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${n} - ${Be(i)} vs ${Be(i.name)}`)}(y,zr.get(y),l),zr.set(y,l));const I=Il(h.imports);for(const M of I)i.has(M)||(i.add(M),o(M))}(n)}(i)}create(i){return new bE(this.moduleType,i)}}function DE(n,i,o,l){return function AE(n,i,o,l,h,y){const I=i+o;return Ga(n,I,h)?Zu(n,I+1,y?l.call(y,h):l(h)):$g(n,I+1)}(Le(),Bn(),n,i,o,l)}function SE(n,i,o,l,h){return RE(Le(),Bn(),n,i,o,l,h)}function $g(n,i){const o=n[i];return o===ui?void 0:o}function RE(n,i,o,l,h,y,I){const M=i+o;return fc(n,M,h,y)?Zu(n,M+2,I?l.call(I,h,y):l(h,y)):$g(n,M+2)}function NE(n,i){const o=Jt();let l;const h=n+20;o.firstCreatePass?(l=function qw(n,i){if(i)for(let o=i.length-1;o>=0;o--){const l=i[o];if(n===l.name)return l}}(i,o.pipeRegistry),o.data[h]=l,l.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,l.onDestroy)):l=o.data[h];const y=l.factory||(l.factory=$r(l.type)),I=Ln(Oh);try{const M=Ml(!1),k=y();return Ml(M),function ag(n,i,o,l){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=l}(o,Le(),h,k),k}finally{Ln(I)}}function OE(n,i,o,l){const h=n+20,y=Le(),I=Rr(y,h);return function Gg(n,i){return n[1].data[i].pure}(y,h)?RE(y,Bn(),i,I.transform,o,l,I):I.transform(o,l)}function T0(n){return i=>{setTimeout(n,void 0,i)}}const Uc=class Xw extends _.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,l){var h,y,I;let M=i,k=o||(()=>null),ne=l;if(i&&"object"==typeof i){const Se=i;M=null===(h=Se.next)||void 0===h?void 0:h.bind(Se),k=null===(y=Se.error)||void 0===y?void 0:y.bind(Se),ne=null===(I=Se.complete)||void 0===I?void 0:I.bind(Se)}this.__isAsync&&(k=T0(k),M&&(M=T0(M)),ne&&(ne=T0(ne)));const le=super.subscribe({next:M,error:k,complete:ne});return i instanceof L.w0&&i.add(le),le}};function eC(){return this._results[tu()]()}class b0{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=tu(),l=b0.prototype;l[o]||(l[o]=eC)}get changes(){return this._changes||(this._changes=new Uc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const l=this;l.dirty=!1;const h=ks(i);(this._changesDetected=!function xa(n,i,o){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let h=n[l],y=i[l];if(o&&(h=o(h),y=o(y)),y!==h)return!1}return!0}(l._results,h,o))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Wg=(()=>{class n{}return n.__NG_ELEMENT_ID__=rC,n})();const tC=Wg,nC=class extends tC{constructor(i,o,l){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(i){const o=this._declarationTContainer.tViews,l=bc(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(o)),$u(o,l,i),new m(l)}};function rC(){return __(W(),Le())}function __(n,i){return 4&n.type?new nC(i,n,gd(n,i)):null}let v_=(()=>{class n{}return n.__NG_ELEMENT_ID__=iC,n})();function iC(){return LE(W(),Le())}const sC=v_,kE=class extends sC{constructor(i,o,l){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=l}get element(){return gd(this._hostTNode,this._hostLView)}get injector(){return new jt(this._hostTNode,this._hostLView)}get parentInjector(){const i=D(this._hostTNode,this._hostLView);if(no(i)){const o=za(i,this._hostLView),l=Ss(i);return new jt(o[1].data[l+8],o)}return new jt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=FE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,l){const h=i.createEmbeddedView(o||{});return this.insert(h,l),h}createComponent(i,o,l,h,y){const I=i&&!function Ma(n){return"function"==typeof n}(i);let M;if(I)M=o;else{const Se=o||{};M=Se.index,l=Se.injector,h=Se.projectableNodes,y=Se.ngModuleRef}const k=I?i:new Et(we(i)),ne=l||this.parentInjector;if(!y&&null==k.ngModule){const tt=(I?ne:this.parentInjector).get(Wr,null);tt&&(y=tt)}const le=k.create(ne,h,void 0,y);return this.insert(le.hostView,M),le}insert(i,o){const l=i._lView,h=l[1];if(function gi(n){return mt(n[3])}(l)){const le=this.indexOf(i);if(-1!==le)this.detach(le);else{const Se=l[3],tt=new kE(Se,Se[6],Se[3]);tt.detach(tt.indexOf(i))}}const y=this._adjustIndex(o),I=this._lContainer;!function md(n,i,o,l){const h=10+l,y=o.length;l>0&&(o[h-1][4]=i),l<y-10?(i[4]=o[h],zl(o,10+l,i)):(o.push(i),i[4]=null),i[3]=o;const I=i[17];null!==I&&o!==I&&function fi(n,i){const o=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===o?n[9]=[i]:o.push(i)}(I,i);const M=i[19];null!==M&&M.insertView(n),i[2]|=128}(h,l,I,y);const M=Mn(y,I),k=l[11],ne=w(k,I[7]);return null!==ne&&function Ca(n,i,o,l,h,y){l[0]=h,l[6]=i,li(n,l,o,1,h,y)}(h,I[6],k,l,ne,M),i.attachToViewContainerRef(),zl(D0(I),y,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=FE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),l=el(this._lContainer,o);l&&(Ol(D0(this._lContainer),o),Mu(l[1],l))}detach(i){const o=this._adjustIndex(i,-1),l=el(this._lContainer,o);return l&&null!=Ol(D0(this._lContainer),o)?new m(l):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function FE(n){return n[8]}function D0(n){return n[8]||(n[8]=[])}function LE(n,i){let o;const l=i[n.index];if(mt(l))o=l;else{let h;if(8&n.type)h=$(l);else{const y=i[11];h=y.createComment("");const I=zt(n,i);x(y,w(y,I),h,function f(n,i){return Yr(n)?n.nextSibling(i):i.nextSibling}(y,I),!1)}i[n.index]=o=If(l,i,h,n),_h(i,o)}return new kE(o,n,i)}class S0{constructor(i){this.queryList=i,this.matches=null}clone(){return new S0(this.queryList)}setDirty(){this.queryList.setDirty()}}class A0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const l=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let y=0;y<l;y++){const I=o.getByIndex(y);h.push(this.queries[I.indexInDeclarationView].clone())}return new A0(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==zE(i,o).matches&&this.queries[o].setDirty()}}class VE{constructor(i,o,l=null){this.predicate=i,this.flags=o,this.read=l}}class R0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let l=0;l<this.length;l++){const h=null!==o?o.length:0,y=this.getByIndex(l).embeddedTView(i,h);y&&(y.indexInDeclarationView=l,null!==o?o.push(y):o=[y])}return null!==o?new R0(o):null}template(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class M0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new M0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const y=l[h];this.matchTNodeWithReadOption(i,o,lC(o,y)),this.matchTNodeWithReadOption(i,o,Xt(o,i,y,!1,!1))}else l===Wg?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Xt(o,i,l,!1,!1))}matchTNodeWithReadOption(i,o,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Zd||h===v_||h===Wg&&4&o.type)this.addMatch(o.index,-2);else{const y=Xt(o,i,h,!1,!1);null!==y&&this.addMatch(o.index,y)}else this.addMatch(o.index,l)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function lC(n,i){const o=n.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===i)return o[l+1];return null}function cC(n,i,o,l){return-1===o?function uC(n,i){return 11&n.type?gd(n,i):4&n.type?__(n,i):null}(i,n):-2===o?function dC(n,i,o){return o===Zd?gd(i,n):o===Wg?__(i,n):o===v_?LE(i,n):void 0}(n,i,l):Gt(n,n[1],o,i)}function UE(n,i,o,l){const h=i[19].queries[l];if(null===h.matches){const y=n.data,I=o.matches,M=[];for(let k=0;k<I.length;k+=2){const ne=I[k];M.push(ne<0?null:cC(i,y[ne],I[k+1],o.metadata.read))}h.matches=M}return h.matches}function x0(n,i,o,l){const h=n.queries.getByIndex(o),y=h.matches;if(null!==y){const I=UE(n,i,h,o);for(let M=0;M<y.length;M+=2){const k=y[M];if(k>0)l.push(I[M/2]);else{const ne=y[M+1],le=i[-k];for(let Se=10;Se<le.length;Se++){const tt=le[Se];tt[17]===tt[3]&&x0(tt[1],tt,ne,l)}if(null!==le[9]){const Se=le[9];for(let tt=0;tt<Se.length;tt++){const yt=Se[tt];x0(yt[1],yt,ne,l)}}}}}return l}function BE(n){const i=Le(),o=Jt(),l=Ns();Eo(l+1);const h=zE(o,l);if(n.dirty&&vr(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const y=h.crossesNgTemplate?x0(o,i,l,[]):UE(o,i,h,l);n.reset(y,E0),n.notifyOnChanges()}return!0}return!1}function jE(n,i,o){const l=Jt();l.firstCreatePass&&(WE(l,new VE(n,i,o),-1),2==(2&i)&&(l.staticViewQueries=!0)),GE(l,Le(),i)}function HE(n,i,o,l){const h=Jt();if(h.firstCreatePass){const y=W();WE(h,new VE(i,o,l),y.index),function fC(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}GE(h,Le(),o)}function $E(){return function hC(n,i){return n[19].queries[i].queryList}(Le(),Ns())}function GE(n,i,o){const l=new b0(4==(4&o));fh(n,i,l,l.destroy),null===i[19]&&(i[19]=new A0),i[19].queries.push(new S0(l))}function WE(n,i,o){null===n.queries&&(n.queries=new R0),n.queries.track(new M0(i,o))}function zE(n,i){return n.queries.getByIndex(i)}function KE(n,i){return __(n,i)}function C_(...n){}const cw=new Ji("Application Initializer");let L0=(()=>{class n{constructor(o){this.appInits=o,this.resolve=C_,this.reject=C_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const y=this.appInits[h]();if(Qf(y))o.push(y);else if(Xf(y)){const I=new Promise((M,k)=>{y.subscribe({complete:M,error:k})});o.push(I)}}Promise.all(o).then(()=>{l()}).catch(h=>{this.reject(h)}),0===o.length&&l(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Fs(cw,8))},n.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dw=new Ji("AppId",{providedIn:"root",factory:function hw(){return`${V0()}${V0()}${V0()}`}});function V0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fw=new Ji("Platform Initializer"),MC=new Ji("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pw=new Ji("appBootstrapListener");let xC=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const U0=new Ji("LocaleId",{providedIn:"root",factory:()=>Fl(U0,gn.Optional|gn.SkipSelf)||function PC(){return"undefined"!=typeof $localize&&$localize.locale||Wh}()}),NC=new Ji("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class OC{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let kC=(()=>{class n{compileModuleSync(o){return new I0(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),y=Il(on(o).declarations).reduce((I,M)=>{const k=we(M);return k&&I.push(new Et(k)),I},[]);return new OC(l,y)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LC=(()=>Promise.resolve(0))();function B0(n){"undefined"==typeof Zone?LC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class _c{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uc(!1),this.onMicrotaskEmpty=new Uc(!1),this.onStable=new Uc(!1),this.onError=new Uc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&o,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function VC(){let n=Vn.requestAnimationFrame,i=Vn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function jC(n){const i=()=>{!function BC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Vn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,H0(n),n.isCheckStableRunning=!0,j0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),H0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,h,y,I,M)=>{try{return gw(n),o.invokeTask(h,y,I,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&i(),mw(n)}},onInvoke:(o,l,h,y,I,M,k)=>{try{return gw(n),o.invoke(h,y,I,M,k)}finally{n.shouldCoalesceRunChangeDetection&&i(),mw(n)}},onHasTask:(o,l,h,y)=>{o.hasTask(h,y),l===h&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,H0(n),j0(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(o,l,h,y)=>(o.handleError(h,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_c.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_c.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,l){return this._inner.run(i,o,l)}runTask(i,o,l,h){const y=this._inner,I=y.scheduleEventTask("NgZoneEvent: "+h,i,UC,C_,C_);try{return y.runTask(I,o,l)}finally{y.cancelTask(I)}}runGuarded(i,o,l){return this._inner.runGuarded(i,o,l)}runOutsideAngular(i){return this._outer.run(i)}}const UC={};function j0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function H0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function gw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mw(n){n._nesting--,j0(n)}class HC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uc,this.onMicrotaskEmpty=new Uc,this.onStable=new Uc,this.onError=new Uc}run(i,o,l){return i.apply(o,l)}runGuarded(i,o,l){return i.apply(o,l)}runOutsideAngular(i){return i()}runTask(i,o,l,h){return i.apply(o,l)}}let yw=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_c.assertNotInAngularZone(),B0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())B0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,h){let y=-1;l&&l>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:y,updateCb:h})}whenStable(o,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,l,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(Fs(_c))},n.\u0275prov=Re({token:n,factory:n.\u0275fac}),n})(),$C=(()=>{class n{constructor(){this._applications=new Map,$0.addToWindow(this)}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return $0.findTestabilityInTree(this,o,l)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class GC{addToWindow(i){}findTestabilityInTree(i,o,l){return null}}function WC(n){$0=n}let $0=new GC,tf=null;const _w=new Ji("AllowMultipleToken"),vw=new Ji("PlatformOnDestroy");class qC{constructor(i,o){this.name=i,this.token=o}}function Ew(n,i,o=[]){const l=`Platform: ${i}`,h=new Ji(l);return(y=[])=>{let I=G0();if(!I||I.injector.get(_w,!1)){const M=[...o,...y,{provide:h,useValue:!0}];n?n(M):function ZC(n){if(tf&&!tf.get(_w,!1))throw new bt(400,"");tf=n;const i=n.get(ww),o=n.get(fw,null);o&&o.forEach(l=>l())}(function QC(n=[],i){return Ku.create({name:i,providers:[{provide:wh,useValue:"platform"},{provide:vw,useValue:()=>tf=null},...n]})}(M,l))}return function YC(n){const i=G0();if(!i)throw new bt(401,"");return i}()}}function G0(){var n;return null!==(n=null==tf?void 0:tf.get(ww))&&void 0!==n?n:null}let ww=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const M=function JC(n,i){let o;return o="noop"===n?new HC:("zone.js"===n?void 0:n)||new _c({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),k=[{provide:_c,useValue:M}];return M.run(()=>{const ne=Ku.create({providers:k,parent:this.injector,name:o.moduleType.name}),le=o.create(ne),Se=le.injector.get(Wc,null);if(!Se)throw new bt(402,"");return M.runOutsideAngular(()=>{const tt=M.onError.subscribe({next:yt=>{Se.handleError(yt)}});le.onDestroy(()=>{z0(this._modules,le),tt.unsubscribe()})}),function XC(n,i,o){try{const l=o();return Qf(l)?l.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(Se,M,()=>{const tt=le.injector.get(L0);return tt.runInitializers(),tt.donePromise.then(()=>(function wE(n){Rn(n,"Expected localeId to be defined"),"string"==typeof n&&($v=n.toLowerCase().replace(/_/g,"-"))}(le.injector.get(U0,Wh)||Wh),this._moduleDoBootstrap(le),le))})})}bootstrapModule(o,l=[]){const h=Cw({},l);return function zC(n,i,o){const l=new I0(o);return Promise.resolve(l)}(0,0,o).then(y=>this.bootstrapModuleFactory(y,h))}_moduleDoBootstrap(o){const l=o.injector.get(W0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new bt(403,"");o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new bt(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(vw,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Fs(Ku))},n.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Cw(n,i){return Array.isArray(i)?i.reduce(Cw,n):Object.assign(Object.assign({},n),i)}let W0=(()=>{class n{constructor(o,l,h,y){this._zone=o,this._injector=l,this._exceptionHandler=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new ee.y(k=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{k.next(this._stable),k.complete()})}),M=new ee.y(k=>{let ne;this._zone.runOutsideAngular(()=>{ne=this._zone.onStable.subscribe(()=>{_c.assertNotInAngularZone(),B0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,k.next(!0))})})});const le=this._zone.onUnstable.subscribe(()=>{_c.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{k.next(!1)}))});return()=>{ne.unsubscribe(),le.unsubscribe()}});this.isStable=(0,re.T)(I,M.pipe((0,Pe.B)()))}bootstrap(o,l){if(!this._initStatus.done)throw new bt(405,"");let h;h=o instanceof p_?o:this._injector.get(ef).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const y=function KC(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Wr),M=h.create(Ku.NULL,[],l||h.selector,y),k=M.location.nativeElement,ne=M.injector.get(yw,null),le=ne&&M.injector.get($C);return ne&&le&&le.registerApplication(k,ne),M.onDestroy(()=>{this.detachView(M.hostView),z0(this.components,M),le&&le.unregisterApplication(k)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new bt(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;z0(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(pw,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(Fs(_c),Fs(Ku),Fs(Wc),Fs(L0))},n.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z0(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let Tw=!0,bw=!1;function tI(){return bw=!0,Tw}function nI(){if(bw)throw new Error("Cannot enable prod mode after platform setup.");Tw=!1}let rI=(()=>{class n{}return n.__NG_ELEMENT_ID__=iI,n})();function iI(n){return function sI(n,i,o){if(Tn(n)&&!o){const l=fr(n.index,i);return new m(l,l)}return 47&n.type?new m(i[16],i):null}(W(),Le(),16==(16&n))}class Rw{constructor(){}supports(i){return qu(i)}create(i){return new dI(i)}}const cI=(n,i)=>i;class dI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||cI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,l=this._removalsHead,h=0,y=null;for(;o||l;){const I=!l||o&&o.currentIndex<xw(l,h,y)?o:l,M=xw(I,h,y),k=I.currentIndex;if(I===l)h--,l=l._nextRemoved;else if(o=o._next,null==I.previousIndex)h++;else{y||(y=[]);const ne=M-h,le=k-h;if(ne!=le){for(let tt=0;tt<ne;tt++){const yt=tt<y.length?y[tt]:y[tt]=0,Qt=yt+tt;le<=Qt&&Qt<ne&&(y[tt]=yt+1)}y[I.previousIndex]=le-ne}}M!==k&&i(I,M,k)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!qu(i))throw new bt(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,y,I,o=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let M=0;M<this.length;M++)y=i[M],I=this._trackByFn(M,y),null!==o&&Object.is(o.trackById,I)?(l&&(o=this._verifyReinsertion(o,y,I,M)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,I,M),l=!0),o=o._next}else h=0,function Ym(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[tu()]();let l;for(;!(l=o.next()).done;)i(l.value)}}(i,M=>{I=this._trackByFn(h,M),null!==o&&Object.is(o.trackById,I)?(l&&(o=this._verifyReinsertion(o,M,I,h)),Object.is(o.item,M)||this._addIdentityChange(o,M)):(o=this._mismatch(o,M,I,h),l=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,l,h){let y;return null===i?y=this._itTail:(y=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,y,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,y,h)):i=this._addAfter(new hI(o,l),y,h),i}_verifyReinsertion(i,o,l,h){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==y?i=this._reinsertAfter(y,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,y=i._nextRemoved;return null===h?this._removalsHead=y:h._nextRemoved=y,null===y?this._removalsTail=h:y._prevRemoved=h,this._insertAfter(i,o,l),this._addToMoves(i,l),i}_moveAfter(i,o,l){return this._unlink(i),this._insertAfter(i,o,l),this._addToMoves(i,l),i}_addAfter(i,o,l){return this._insertAfter(i,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,l){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Mw),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,l=i._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class hI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const o=i._prevDup,l=i._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class Mw{constructor(){this.map=new Map}put(i){const o=i.trackById;let l=this.map.get(o);l||(l=new fI,this.map.set(o,l)),l.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xw(n,i,o){const l=n.previousIndex;if(null===l)return l;let h=0;return o&&l<o.length&&(h=o[l]),l+i+h}class Pw{constructor(){}supports(i){return i instanceof Map||Sc(i)}create(){return new pI}}class pI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Sc(i)))throw new bt(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const y=this._getOrCreateRecordForKey(h,l);o=this._insertBeforeOrAppend(o,y)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const l=i._prev;return o._next=i,o._prev=l,i._prev=o,l&&(l._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const y=h._prev,I=h._next;return y&&(y._next=I),I&&(I._prev=y),h._next=null,h._prev=null,h}const l=new gI(i);return this._records.set(i,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(l=>o(i[l],l))}}class gI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Nw(){return new Q0([new Rw])}let Q0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(null!=l){const h=l.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||Nw()),deps:[[n,new Ll,new hu]]}}find(o){const l=this.factories.find(h=>h.supports(o));if(null!=l)return l;throw new bt(901,"")}}return n.\u0275prov=Re({token:n,providedIn:"root",factory:Nw}),n})();function Ow(){return new J0([new Pw])}let J0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(l){const h=l.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||Ow()),deps:[[n,new Ll,new hu]]}}find(o){const l=this.factories.find(y=>y.supports(o));if(l)return l;throw new bt(901,"")}}return n.\u0275prov=Re({token:n,providedIn:"root",factory:Ow}),n})();const _I=Ew(null,"core",[]);let vI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Fs(W0))},n.\u0275mod=me({type:n}),n.\u0275inj=Ne({}),n})()},2382:(hn,ut,U)=>{U.d(ut,{Fj:()=>it,qu:()=>ho,u:()=>zi,cw:()=>hr,sg:()=>Wi,u5:()=>Qn,JJ:()=>He,JL:()=>Ge,UX:()=>Ds,kI:()=>Ht,_Y:()=>Ai});var _=U(5e3),L=U(9808),ee=U(8996),re=U(8306),Pe=U(4742),je=U(8421),We=U(7669),Be=U(5403),rt=U(3268),Ie=U(1810),Je=U(4004);let Tt=(()=>{class K{constructor(F,ce){this._renderer=F,this._elementRef=ce,this.onChange=Le=>{},this.onTouched=()=>{}}setProperty(F,ce){this._renderer.setProperty(this._elementRef.nativeElement,F,ce)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return K.\u0275fac=function(F){return new(F||K)(_.Y36(_.Qsj),_.Y36(_.SBq))},K.\u0275dir=_.lG2({type:K}),K})(),ft=(()=>{class K extends Tt{}return K.\u0275fac=function(){let j;return function(ce){return(j||(j=_.n5z(K)))(ce||K)}}(),K.\u0275dir=_.lG2({type:K,features:[_.qOj]}),K})();const bt=new _.OlP("NgValueAccessor"),Ct={provide:bt,useExisting:(0,_.Gpc)(()=>it),multi:!0},Kt=new _.OlP("CompositionEventMode");let it=(()=>{class K extends Tt{constructor(F,ce,Le){super(F,ce),this._compositionMode=Le,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ke(){const K=(0,L.q)()?(0,L.q)().getUserAgent():"";return/android (\d+)/.test(K.toLowerCase())}())}writeValue(F){this.setProperty("value",null==F?"":F)}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return K.\u0275fac=function(F){return new(F||K)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Kt,8))},K.\u0275dir=_.lG2({type:K,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,ce){1&F&&_.NdJ("input",function(Jt){return ce._handleInput(Jt.target.value)})("blur",function(){return ce.onTouched()})("compositionstart",function(){return ce._compositionStart()})("compositionend",function(Jt){return ce._compositionEnd(Jt.target.value)})},features:[_._Bn([Ct]),_.qOj]}),K})();function xe(K){return null==K||0===K.length}function Qe(K){return null!=K&&"number"==typeof K.length}const _t=new _.OlP("NgValidators"),It=new _.OlP("NgAsyncValidators"),be=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ht{static min(j){return function Nt(K){return j=>{if(xe(j.value)||xe(K))return null;const F=parseFloat(j.value);return!isNaN(F)&&F<K?{min:{min:K,actual:j.value}}:null}}(j)}static max(j){return function An(K){return j=>{if(xe(j.value)||xe(K))return null;const F=parseFloat(j.value);return!isNaN(F)&&F>K?{max:{max:K,actual:j.value}}:null}}(j)}static required(j){return function _n(K){return xe(K.value)?{required:!0}:null}(j)}static requiredTrue(j){return function Fn(K){return!0===K.value?null:{required:!0}}(j)}static email(j){return function ln(K){return xe(K.value)||be.test(K.value)?null:{email:!0}}(j)}static minLength(j){return function rn(K){return j=>xe(j.value)||!Qe(j.value)?null:j.value.length<K?{minlength:{requiredLength:K,actualLength:j.value.length}}:null}(j)}static maxLength(j){return function Ot(K){return j=>Qe(j.value)&&j.value.length>K?{maxlength:{requiredLength:K,actualLength:j.value.length}}:null}(j)}static pattern(j){return function ar(K){if(!K)return Rn;let j,F;return"string"==typeof K?(F="","^"!==K.charAt(0)&&(F+="^"),F+=K,"$"!==K.charAt(K.length-1)&&(F+="$"),j=new RegExp(F)):(F=K.toString(),j=K),ce=>{if(xe(ce.value))return null;const Le=ce.value;return j.test(Le)?null:{pattern:{requiredPattern:F,actualValue:Le}}}}(j)}static nullValidator(j){return null}static compose(j){return Ne(j)}static composeAsync(j){return qt(j)}}function Rn(K){return null}function un(K){return null!=K}function st(K){const j=(0,_.QGY)(K)?(0,ee.D)(K):K;return(0,_.CqO)(j),j}function nt(K){let j={};return K.forEach(F=>{j=null!=F?Object.assign(Object.assign({},j),F):j}),0===Object.keys(j).length?null:j}function Te(K,j){return j.map(F=>F(K))}function Ee(K){return K.map(j=>function Re(K){return!K.validate}(j)?j:F=>j.validate(F))}function Ne(K){if(!K)return null;const j=K.filter(un);return 0==j.length?null:function(F){return nt(Te(F,j))}}function ot(K){return null!=K?Ne(Ee(K)):null}function qt(K){if(!K)return null;const j=K.filter(un);return 0==j.length?null:function(F){return function ve(...K){const j=(0,We.jO)(K),{args:F,keys:ce}=(0,Pe.D)(K),Le=new re.y(Jt=>{const{length:qr}=F;if(!qr)return void Jt.complete();const W=new Array(qr);let q=qr,pe=qr;for(let De=0;De<qr;De++){let ze=!1;(0,je.Xf)(F[De]).subscribe((0,Be.x)(Jt,vt=>{ze||(ze=!0,pe--),W[De]=vt},()=>q--,void 0,()=>{(!q||!ze)&&(pe||Jt.next(ce?(0,Ie.n)(ce,W):W),Jt.complete())}))}});return j?Le.pipe((0,rt.Z)(j)):Le}(Te(F,j).map(st)).pipe((0,Je.U)(nt))}}function pn(K){return null!=K?qt(Ee(K)):null}function vn(K,j){return null===K?[j]:Array.isArray(K)?[...K,j]:[K,j]}function Nn(K){return K._rawValidators}function cr(K){return K._rawAsyncValidators}function _r(K){return K?Array.isArray(K)?K:[K]:[]}function jn(K,j){return Array.isArray(K)?K.includes(j):K===j}function Xn(K,j){const F=_r(j);return _r(K).forEach(Le=>{jn(F,Le)||F.push(Le)}),F}function gn(K,j){return _r(j).filter(F=>!jn(K,F))}class sr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(j){this._rawValidators=j||[],this._composedValidatorFn=ot(this._rawValidators)}_setAsyncValidators(j){this._rawAsyncValidators=j||[],this._composedAsyncValidatorFn=pn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(j){this._onDestroyCallbacks.push(j)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(j=>j()),this._onDestroyCallbacks=[]}reset(j){this.control&&this.control.reset(j)}hasError(j,F){return!!this.control&&this.control.hasError(j,F)}getError(j,F){return this.control?this.control.getError(j,F):null}}class Pn extends sr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ln extends sr{get formDirective(){return null}get path(){return null}}class Qr{constructor(j){this._cd=j}is(j){var F,ce,Le;return"submitted"===j?!!(null===(F=this._cd)||void 0===F?void 0:F.submitted):!!(null===(Le=null===(ce=this._cd)||void 0===ce?void 0:ce.control)||void 0===Le?void 0:Le[j])}}let He=(()=>{class K extends Qr{constructor(F){super(F)}}return K.\u0275fac=function(F){return new(F||K)(_.Y36(Pn,2))},K.\u0275dir=_.lG2({type:K,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,ce){2&F&&_.ekj("ng-untouched",ce.is("untouched"))("ng-touched",ce.is("touched"))("ng-pristine",ce.is("pristine"))("ng-dirty",ce.is("dirty"))("ng-valid",ce.is("valid"))("ng-invalid",ce.is("invalid"))("ng-pending",ce.is("pending"))},features:[_.qOj]}),K})(),Ge=(()=>{class K extends Qr{constructor(F){super(F)}}return K.\u0275fac=function(F){return new(F||K)(_.Y36(Ln,10))},K.\u0275dir=_.lG2({type:K,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,ce){2&F&&_.ekj("ng-untouched",ce.is("untouched"))("ng-touched",ce.is("touched"))("ng-pristine",ce.is("pristine"))("ng-dirty",ce.is("dirty"))("ng-valid",ce.is("valid"))("ng-invalid",ce.is("invalid"))("ng-pending",ce.is("pending"))("ng-submitted",ce.is("submitted"))},features:[_.qOj]}),K})();function Jr(K,j){Fe(K,j),j.valueAccessor.writeValue(K.value),function me(K,j){j.valueAccessor.registerOnChange(F=>{K._pendingValue=F,K._pendingChange=!0,K._pendingDirty=!0,"change"===K.updateOn&&z(K,j)})}(K,j),function ie(K,j){const F=(ce,Le)=>{j.valueAccessor.writeValue(ce),Le&&j.viewToModelUpdate(ce)};K.registerOnChange(F),j._registerOnDestroy(()=>{K._unregisterOnChange(F)})}(K,j),function ye(K,j){j.valueAccessor.registerOnTouched(()=>{K._pendingTouched=!0,"blur"===K.updateOn&&K._pendingChange&&z(K,j),"submit"!==K.updateOn&&K.markAsTouched()})}(K,j),function Br(K,j){if(j.valueAccessor.setDisabledState){const F=ce=>{j.valueAccessor.setDisabledState(ce)};K.registerOnDisabledChange(F),j._registerOnDestroy(()=>{K._unregisterOnDisabledChange(F)})}}(K,j)}function Gi(K,j,F=!0){const ce=()=>{};j.valueAccessor&&(j.valueAccessor.registerOnChange(ce),j.valueAccessor.registerOnTouched(ce)),Me(K,j),K&&(j._invokeOnDestroyCallbacks(),K._registerOnCollectionChange(()=>{}))}function Ni(K,j){K.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(j)})}function Fe(K,j){const F=Nn(K);null!==j.validator?K.setValidators(vn(F,j.validator)):"function"==typeof F&&K.setValidators([F]);const ce=cr(K);null!==j.asyncValidator?K.setAsyncValidators(vn(ce,j.asyncValidator)):"function"==typeof ce&&K.setAsyncValidators([ce]);const Le=()=>K.updateValueAndValidity();Ni(j._rawValidators,Le),Ni(j._rawAsyncValidators,Le)}function Me(K,j){let F=!1;if(null!==K){if(null!==j.validator){const Le=Nn(K);if(Array.isArray(Le)&&Le.length>0){const Jt=Le.filter(qr=>qr!==j.validator);Jt.length!==Le.length&&(F=!0,K.setValidators(Jt))}}if(null!==j.asyncValidator){const Le=cr(K);if(Array.isArray(Le)&&Le.length>0){const Jt=Le.filter(qr=>qr!==j.asyncValidator);Jt.length!==Le.length&&(F=!0,K.setAsyncValidators(Jt))}}}const ce=()=>{};return Ni(j._rawValidators,ce),Ni(j._rawAsyncValidators,ce),F}function z(K,j){K._pendingDirty&&K.markAsDirty(),K.setValue(K._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(K._pendingValue),K._pendingChange=!1}function wt(K,j){const F=K.indexOf(j);F>-1&&K.splice(F,1)}const St="VALID",an="INVALID",In="PENDING",or="DISABLED";function yr(K){return(Rs(K)?K.validators:K)||null}function Xr(K){return Array.isArray(K)?ot(K):K||null}function Hr(K,j){return(Rs(j)?j.asyncValidators:K)||null}function cs(K){return Array.isArray(K)?pn(K):K||null}function Rs(K){return null!=K&&!Array.isArray(K)&&"object"==typeof K}const ur=K=>K instanceof ts,Si=K=>K instanceof hr,os=K=>K instanceof Zr;function Zs(K){return ur(K)?K.value:K.getRawValue()}function Cr(K,j){const F=Si(K),ce=K.controls;if(!(F?Object.keys(ce):ce).length)throw new _.vHH(1e3,"");if(!ce[j])throw new _.vHH(1001,"")}function mn(K,j){Si(K),K._forEachChild((ce,Le)=>{if(void 0===j[Le])throw new _.vHH(1002,"")})}class tr{constructor(j,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=j,this._rawAsyncValidators=F,this._composedValidatorFn=Xr(this._rawValidators),this._composedAsyncValidatorFn=cs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===St}get invalid(){return this.status===an}get pending(){return this.status==In}get disabled(){return this.status===or}get enabled(){return this.status!==or}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._rawValidators=j,this._composedValidatorFn=Xr(j)}setAsyncValidators(j){this._rawAsyncValidators=j,this._composedAsyncValidatorFn=cs(j)}addValidators(j){this.setValidators(Xn(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(Xn(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(gn(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(gn(j,this._rawAsyncValidators))}hasValidator(j){return jn(this._rawValidators,j)}hasAsyncValidator(j){return jn(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=In,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=or,this.errors=null,this._forEachChild(ce=>{ce.disable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:F})),this._onDisabledChange.forEach(ce=>ce(!0))}enable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=St,this._forEachChild(ce=>{ce.enable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:F})),this._onDisabledChange.forEach(ce=>ce(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===St||this.status===In)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?or:St}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=In,this._hasOwnPendingAsyncValidator=!0;const F=st(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(ce=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ce,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,F={}){this.errors=j,this._updateControlsErrors(!1!==F.emitEvent)}get(j){return function Kr(K,j,F){if(null==j||(Array.isArray(j)||(j=j.split(F)),Array.isArray(j)&&0===j.length))return null;let ce=K;return j.forEach(Le=>{ce=Si(ce)?ce.controls.hasOwnProperty(Le)?ce.controls[Le]:null:os(ce)&&ce.at(Le)||null}),ce}(this,j,".")}getError(j,F){const ce=F?this.get(F):this;return ce&&ce.errors?ce.errors[j]:null}hasError(j,F){return!!this.getError(j,F)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?or:this.errors?an:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(In)?In:this._anyControlsHaveStatus(an)?an:St}_anyControlsHaveStatus(j){return this._anyControls(F=>F.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_isBoxedValue(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){Rs(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ts extends tr{constructor(j=null,F,ce){super(yr(F),Hr(ce,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(j),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rs(F)&&F.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(j)?j.value:j)}setValue(j,F={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(ce=>ce(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(j,F={}){this.setValue(j,F)}reset(j=this.defaultValue,F={}){this._applyFormState(j),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){wt(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){wt(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){this._isBoxedValue(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}}class hr extends tr{constructor(j,F,ce){super(yr(F),Hr(ce,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,F){return this.controls[j]?this.controls[j]:(this.controls[j]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(j,F,ce={}){this.registerControl(j,F),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}removeControl(j,F={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(j,F,ce={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],F&&this.registerControl(j,F),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,F={}){mn(this,j),Object.keys(j).forEach(ce=>{Cr(this,ce),this.controls[ce].setValue(j[ce],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(Object.keys(j).forEach(ce=>{this.controls[ce]&&this.controls[ce].patchValue(j[ce],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j={},F={}){this._forEachChild((ce,Le)=>{ce.reset(j[Le],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(j,F,ce)=>(j[ce]=Zs(F),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(F,ce)=>!!ce._syncPendingControls()||F);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){Object.keys(this.controls).forEach(F=>{const ce=this.controls[F];ce&&j(ce,F)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const F of Object.keys(this.controls)){const ce=this.controls[F];if(this.contains(F)&&j(ce))return!0}return!1}_reduceValue(){return this._reduceChildren({},(j,F,ce)=>((F.enabled||this.disabled)&&(j[ce]=F.value),j))}_reduceChildren(j,F){let ce=j;return this._forEachChild((Le,Jt)=>{ce=F(ce,Le,Jt)}),ce}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Zr extends tr{constructor(j,F,ce){super(yr(F),Hr(ce,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(j){return this.controls[j]}push(j,F={}){this.controls.push(j),this._registerControl(j),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(j,F,ce={}){this.controls.splice(j,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:ce.emitEvent})}removeAt(j,F={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(j,F,ce={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),F&&(this.controls.splice(j,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(j,F={}){mn(this,j),j.forEach((ce,Le)=>{Cr(this,Le),this.at(Le).setValue(ce,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(j.forEach((ce,Le)=>{this.at(Le)&&this.at(Le).patchValue(ce,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j=[],F={}){this._forEachChild((ce,Le)=>{ce.reset(j[Le],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(j=>Zs(j))}clear(j={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:j.emitEvent}))}_syncPendingControls(){let j=this.controls.reduce((F,ce)=>!!ce._syncPendingControls()||F,!1);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){this.controls.forEach((F,ce)=>{j(F,ce)})}_updateValue(){this.value=this.controls.filter(j=>j.enabled||this.disabled).map(j=>j.value)}_anyControls(j){return this.controls.some(F=>F.enabled&&j(F))}_setUpControls(){this._forEachChild(j=>this._registerControl(j))}_allControlsDisabled(){for(const j of this.controls)if(j.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(j){j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)}}let Ai=(()=>{class K{}return K.\u0275fac=function(F){return new(F||K)},K.\u0275dir=_.lG2({type:K,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),K})(),Bs=(()=>{class K{}return K.\u0275fac=function(F){return new(F||K)},K.\u0275mod=_.oAB({type:K}),K.\u0275inj=_.cJS({}),K})();const Ir=new _.OlP("NgModelWithFormControlWarning"),Oo={provide:Ln,useExisting:(0,_.Gpc)(()=>Wi)};let Wi=(()=>{class K extends Ln{constructor(F,ce){super(),this.validators=F,this.asyncValidators=ce,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(F),this._setAsyncValidators(ce)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Me(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const ce=this.form.get(F.path);return Jr(ce,F),ce.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),ce}getControl(F){return this.form.get(F.path)}removeControl(F){Gi(F.control||null,F,!1),wt(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,ce){this.form.get(F.path).setValue(ce)}onSubmit(F){return this.submitted=!0,function si(K,j){K._syncPendingControls(),j.forEach(F=>{const ce=F.control;"submit"===ce.updateOn&&ce._pendingChange&&(F.viewToModelUpdate(ce._pendingValue),ce._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(F),!1}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const ce=F.control,Le=this.form.get(F.path);ce!==Le&&(Gi(ce||null,F),ur(Le)&&(Jr(Le,F),F.control=Le))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const ce=this.form.get(F.path);(function se(K,j){Fe(K,j)})(ce,F),ce.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const ce=this.form.get(F.path);ce&&function we(K,j){return Me(K,j)}(ce,F)&&ce.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fe(this.form,this),this._oldForm&&Me(this._oldForm,this)}_checkFormPresent(){}}return K.\u0275fac=function(F){return new(F||K)(_.Y36(_t,10),_.Y36(It,10))},K.\u0275dir=_.lG2({type:K,selectors:[["","formGroup",""]],hostBindings:function(F,ce){1&F&&_.NdJ("submit",function(Jt){return ce.onSubmit(Jt)})("reset",function(){return ce.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Oo]),_.qOj,_.TTD]}),K})();const hs={provide:Pn,useExisting:(0,_.Gpc)(()=>zi)};let zi=(()=>{class K extends Pn{constructor(F,ce,Le,Jt,qr){super(),this._ngModelWarningConfig=qr,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(ce),this._setAsyncValidators(Le),this.valueAccessor=function Ei(K,j){if(!j)return null;let F,ce,Le;return Array.isArray(j),j.forEach(Jt=>{Jt.constructor===it?F=Jt:function ir(K){return Object.getPrototypeOf(K.constructor)===ft}(Jt)?ce=Jt:Le=Jt}),Le||ce||F||null}(0,Jt)}set isDisabled(F){}ngOnChanges(F){this._added||this._setUpControl(),function gr(K,j){if(!K.hasOwnProperty("model"))return!1;const F=K.model;return!!F.isFirstChange()||!Object.is(j,F.currentValue)}(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return function jr(K,j){return[...j.path,K]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return K._ngModelWarningSentOnce=!1,K.\u0275fac=function(F){return new(F||K)(_.Y36(Ln,13),_.Y36(_t,10),_.Y36(It,10),_.Y36(bt,10),_.Y36(Ir,8))},K.\u0275dir=_.lG2({type:K,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([hs]),_.qOj,_.TTD]}),K})(),Ci=(()=>{class K{}return K.\u0275fac=function(F){return new(F||K)},K.\u0275mod=_.oAB({type:K}),K.\u0275inj=_.cJS({imports:[[Bs]]}),K})(),Qn=(()=>{class K{}return K.\u0275fac=function(F){return new(F||K)},K.\u0275mod=_.oAB({type:K}),K.\u0275inj=_.cJS({imports:[Ci]}),K})(),Ds=(()=>{class K{static withConfig(F){return{ngModule:K,providers:[{provide:Ir,useValue:F.warnOnNgModelWithFormControl}]}}}return K.\u0275fac=function(F){return new(F||K)},K.\u0275mod=_.oAB({type:K}),K.\u0275inj=_.cJS({imports:[Ci]}),K})(),ho=(()=>{class K{group(F,ce=null){const Le=this._reduceControls(F);let W,Jt=null,qr=null;return null!=ce&&(function Fo(K){return void 0!==K.asyncValidators||void 0!==K.validators||void 0!==K.updateOn}(ce)?(Jt=null!=ce.validators?ce.validators:null,qr=null!=ce.asyncValidators?ce.asyncValidators:null,W=null!=ce.updateOn?ce.updateOn:void 0):(Jt=null!=ce.validator?ce.validator:null,qr=null!=ce.asyncValidator?ce.asyncValidator:null)),new hr(Le,{asyncValidators:qr,updateOn:W,validators:Jt})}control(F,ce,Le){return new ts(F,ce,Le)}array(F,ce,Le){const Jt=F.map(qr=>this._createControl(qr));return new Zr(Jt,ce,Le)}_reduceControls(F){const ce={};return Object.keys(F).forEach(Le=>{ce[Le]=this._createControl(F[Le])}),ce}_createControl(F){return ur(F)||Si(F)||os(F)?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}}return K.\u0275fac=function(F){return new(F||K)},K.\u0275prov=_.Yz7({token:K,factory:K.\u0275fac,providedIn:Ds}),K})()},2313:(hn,ut,U)=>{U.d(ut,{Dx:()=>Ln,H7:()=>Fe,b2:()=>jn,q6:()=>cr,se:()=>Fn});var _=U(9808),L=U(5e3);class ee extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class re extends ee{static makeCurrent(){(0,_.HT)(new re)}onAndCancel(ie,se,we){return ie.addEventListener(se,we,!1),()=>{ie.removeEventListener(se,we,!1)}}dispatchEvent(ie,se){ie.dispatchEvent(se)}remove(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}createElement(ie,se){return(se=se||this.getDefaultDocument()).createElement(ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ie){return ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(ie){return ie instanceof DocumentFragment}getGlobalEventTarget(ie,se){return"window"===se?window:"document"===se?ie:"body"===se?ie.body:null}getBaseHref(ie){const se=function je(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==se?null:function Be(z){We=We||document.createElement("a"),We.setAttribute("href",z);const ie=We.pathname;return"/"===ie.charAt(0)?ie:`/${ie}`}(se)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ie){return(0,_.Mx)(document.cookie,ie)}}let We,Pe=null;const rt=new L.OlP("TRANSITION_ID"),ve=[{provide:L.ip1,useFactory:function Ie(z,ie,se){return()=>{se.get(L.CZH).donePromise.then(()=>{const we=(0,_.q)(),ct=ie.querySelectorAll(`style[ng-transition="${z}"]`);for(let Bt=0;Bt<ct.length;Bt++)we.remove(ct[Bt])})}},deps:[rt,_.K0,L.zs3],multi:!0}];class Je{static init(){(0,L.VLi)(new Je)}addToWindow(ie){L.dqk.getAngularTestability=(we,ct=!0)=>{const Bt=ie.findTestabilityInTree(we,ct);if(null==Bt)throw new Error("Could not find testability for element.");return Bt},L.dqk.getAllAngularTestabilities=()=>ie.getAllTestabilities(),L.dqk.getAllAngularRootElements=()=>ie.getAllRootElements(),L.dqk.frameworkStabilizers||(L.dqk.frameworkStabilizers=[]),L.dqk.frameworkStabilizers.push(we=>{const ct=L.dqk.getAllAngularTestabilities();let Bt=ct.length,on=!1;const bn=function(gr){on=on||gr,Bt--,0==Bt&&we(on)};ct.forEach(function(gr){gr.whenStable(bn)})})}findTestabilityInTree(ie,se,we){if(null==se)return null;const ct=ie.getTestability(se);return null!=ct?ct:we?(0,_.q)().isShadowRoot(se)?this.findTestabilityInTree(ie,se.host,!0):this.findTestabilityInTree(ie,se.parentElement,!0):null}}let Tt=(()=>{class z{build(){return new XMLHttpRequest}}return z.\u0275fac=function(se){return new(se||z)},z.\u0275prov=L.Yz7({token:z,factory:z.\u0275fac}),z})();const ft=new L.OlP("EventManagerPlugins");let bt=(()=>{class z{constructor(se,we){this._zone=we,this._eventNameToPlugin=new Map,se.forEach(ct=>ct.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,we,ct){return this._findPluginFor(we).addEventListener(se,we,ct)}addGlobalEventListener(se,we,ct){return this._findPluginFor(we).addGlobalEventListener(se,we,ct)}getZone(){return this._zone}_findPluginFor(se){const we=this._eventNameToPlugin.get(se);if(we)return we;const ct=this._plugins;for(let Bt=0;Bt<ct.length;Bt++){const on=ct[Bt];if(on.supports(se))return this._eventNameToPlugin.set(se,on),on}throw new Error(`No event manager plugin found for event ${se}`)}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(ft),L.LFG(L.R0b))},z.\u0275prov=L.Yz7({token:z,factory:z.\u0275fac}),z})();class Mt{constructor(ie){this._doc=ie}addGlobalEventListener(ie,se,we){const ct=(0,_.q)().getGlobalEventTarget(this._doc,ie);if(!ct)throw new Error(`Unsupported event target ${ct} for event ${se}`);return this.addEventListener(ct,se,we)}}let Xe=(()=>{class z{constructor(){this._stylesSet=new Set}addStyles(se){const we=new Set;se.forEach(ct=>{this._stylesSet.has(ct)||(this._stylesSet.add(ct),we.add(ct))}),this.onStylesAdded(we)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return z.\u0275fac=function(se){return new(se||z)},z.\u0275prov=L.Yz7({token:z,factory:z.\u0275fac}),z})(),Ct=(()=>{class z extends Xe{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,we,ct){se.forEach(Bt=>{const on=this._doc.createElement("style");on.textContent=Bt,ct.push(we.appendChild(on))})}addHost(se){const we=[];this._addStylesToHost(this._stylesSet,se,we),this._hostNodes.set(se,we)}removeHost(se){const we=this._hostNodes.get(se);we&&we.forEach(Ke),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((we,ct)=>{this._addStylesToHost(se,ct,we)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(Ke))}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(_.K0))},z.\u0275prov=L.Yz7({token:z,factory:z.\u0275fac}),z})();function Ke(z){(0,_.q)().remove(z)}const Kt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},it=/%COMP%/g;function Nt(z,ie,se){for(let we=0;we<ie.length;we++){let ct=ie[we];Array.isArray(ct)?Nt(z,ct,se):(ct=ct.replace(it,z),se.push(ct))}return se}function An(z){return ie=>{if("__ngUnwrap__"===ie)return z;!1===z(ie)&&(ie.preventDefault(),ie.returnValue=!1)}}let Fn=(()=>{class z{constructor(se,we,ct){this.eventManager=se,this.sharedStylesHost=we,this.appId=ct,this.rendererByCompId=new Map,this.defaultRenderer=new ln(se)}createRenderer(se,we){if(!se||!we)return this.defaultRenderer;switch(we.encapsulation){case L.ifc.Emulated:{let ct=this.rendererByCompId.get(we.id);return ct||(ct=new ar(this.eventManager,this.sharedStylesHost,we,this.appId),this.rendererByCompId.set(we.id,ct)),ct.applyToHost(se),ct}case 1:case L.ifc.ShadowDom:return new Rn(this.eventManager,this.sharedStylesHost,se,we);default:if(!this.rendererByCompId.has(we.id)){const ct=Nt(we.id,we.styles,[]);this.sharedStylesHost.addStyles(ct),this.rendererByCompId.set(we.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(bt),L.LFG(Ct),L.LFG(L.AFp))},z.\u0275prov=L.Yz7({token:z,factory:z.\u0275fac}),z})();class ln{constructor(ie){this.eventManager=ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ie,se){return se?document.createElementNS(Kt[se]||se,ie):document.createElement(ie)}createComment(ie){return document.createComment(ie)}createText(ie){return document.createTextNode(ie)}appendChild(ie,se){ie.appendChild(se)}insertBefore(ie,se,we){ie&&ie.insertBefore(se,we)}removeChild(ie,se){ie&&ie.removeChild(se)}selectRootElement(ie,se){let we="string"==typeof ie?document.querySelector(ie):ie;if(!we)throw new Error(`The selector "${ie}" did not match any elements`);return se||(we.textContent=""),we}parentNode(ie){return ie.parentNode}nextSibling(ie){return ie.nextSibling}setAttribute(ie,se,we,ct){if(ct){se=ct+":"+se;const Bt=Kt[ct];Bt?ie.setAttributeNS(Bt,se,we):ie.setAttribute(se,we)}else ie.setAttribute(se,we)}removeAttribute(ie,se,we){if(we){const ct=Kt[we];ct?ie.removeAttributeNS(ct,se):ie.removeAttribute(`${we}:${se}`)}else ie.removeAttribute(se)}addClass(ie,se){ie.classList.add(se)}removeClass(ie,se){ie.classList.remove(se)}setStyle(ie,se,we,ct){ct&(L.JOm.DashCase|L.JOm.Important)?ie.style.setProperty(se,we,ct&L.JOm.Important?"important":""):ie.style[se]=we}removeStyle(ie,se,we){we&L.JOm.DashCase?ie.style.removeProperty(se):ie.style[se]=""}setProperty(ie,se,we){ie[se]=we}setValue(ie,se){ie.nodeValue=se}listen(ie,se,we){return"string"==typeof ie?this.eventManager.addGlobalEventListener(ie,se,An(we)):this.eventManager.addEventListener(ie,se,An(we))}}class ar extends ln{constructor(ie,se,we,ct){super(ie),this.component=we;const Bt=Nt(ct+"-"+we.id,we.styles,[]);se.addStyles(Bt),this.contentAttr=function be(z){return"_ngcontent-%COMP%".replace(it,z)}(ct+"-"+we.id),this.hostAttr=function Ht(z){return"_nghost-%COMP%".replace(it,z)}(ct+"-"+we.id)}applyToHost(ie){super.setAttribute(ie,this.hostAttr,"")}createElement(ie,se){const we=super.createElement(ie,se);return super.setAttribute(we,this.contentAttr,""),we}}class Rn extends ln{constructor(ie,se,we,ct){super(ie),this.sharedStylesHost=se,this.hostEl=we,this.shadowRoot=we.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Bt=Nt(ct.id,ct.styles,[]);for(let on=0;on<Bt.length;on++){const bn=document.createElement("style");bn.textContent=Bt[on],this.shadowRoot.appendChild(bn)}}nodeOrShadowRoot(ie){return ie===this.hostEl?this.shadowRoot:ie}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ie,se){return super.appendChild(this.nodeOrShadowRoot(ie),se)}insertBefore(ie,se,we){return super.insertBefore(this.nodeOrShadowRoot(ie),se,we)}removeChild(ie,se){return super.removeChild(this.nodeOrShadowRoot(ie),se)}parentNode(ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ie)))}}let un=(()=>{class z extends Mt{constructor(se){super(se)}supports(se){return!0}addEventListener(se,we,ct){return se.addEventListener(we,ct,!1),()=>this.removeEventListener(se,we,ct)}removeEventListener(se,we,ct){return se.removeEventListener(we,ct)}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(_.K0))},z.\u0275prov=L.Yz7({token:z,factory:z.\u0275fac}),z})();const st=["alt","control","meta","shift"],Te={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Re={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ee={alt:z=>z.altKey,control:z=>z.ctrlKey,meta:z=>z.metaKey,shift:z=>z.shiftKey};let Ne=(()=>{class z extends Mt{constructor(se){super(se)}supports(se){return null!=z.parseEventName(se)}addEventListener(se,we,ct){const Bt=z.parseEventName(we),on=z.eventCallback(Bt.fullKey,ct,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(se,Bt.domEventName,on))}static parseEventName(se){const we=se.toLowerCase().split("."),ct=we.shift();if(0===we.length||"keydown"!==ct&&"keyup"!==ct)return null;const Bt=z._normalizeKey(we.pop());let on="";if(st.forEach(gr=>{const ir=we.indexOf(gr);ir>-1&&(we.splice(ir,1),on+=gr+".")}),on+=Bt,0!=we.length||0===Bt.length)return null;const bn={};return bn.domEventName=ct,bn.fullKey=on,bn}static getEventFullKey(se){let we="",ct=function ot(z){let ie=z.key;if(null==ie){if(ie=z.keyIdentifier,null==ie)return"Unidentified";ie.startsWith("U+")&&(ie=String.fromCharCode(parseInt(ie.substring(2),16)),3===z.location&&Re.hasOwnProperty(ie)&&(ie=Re[ie]))}return Te[ie]||ie}(se);return ct=ct.toLowerCase()," "===ct?ct="space":"."===ct&&(ct="dot"),st.forEach(Bt=>{Bt!=ct&&Ee[Bt](se)&&(we+=Bt+".")}),we+=ct,we}static eventCallback(se,we,ct){return Bt=>{z.getEventFullKey(Bt)===se&&ct.runGuarded(()=>we(Bt))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(_.K0))},z.\u0275prov=L.Yz7({token:z,factory:z.\u0275fac}),z})();const cr=(0,L.eFA)(L._c5,"browser",[{provide:L.Lbi,useValue:_.bD},{provide:L.g9A,useValue:function qt(){re.makeCurrent(),Je.init()},multi:!0},{provide:_.K0,useFactory:function vn(){return(0,L.RDi)(document),document},deps:[]}]),_r=[{provide:L.zSh,useValue:"root"},{provide:L.qLn,useFactory:function pn(){return new L.qLn},deps:[]},{provide:ft,useClass:un,multi:!0,deps:[_.K0,L.R0b,L.Lbi]},{provide:ft,useClass:Ne,multi:!0,deps:[_.K0]},{provide:Fn,useClass:Fn,deps:[bt,Ct,L.AFp]},{provide:L.FYo,useExisting:Fn},{provide:Xe,useExisting:Ct},{provide:Ct,useClass:Ct,deps:[_.K0]},{provide:L.dDg,useClass:L.dDg,deps:[L.R0b]},{provide:bt,useClass:bt,deps:[ft,L.R0b]},{provide:_.JF,useClass:Tt,deps:[]}];let jn=(()=>{class z{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:z,providers:[{provide:L.AFp,useValue:se.appId},{provide:rt,useExisting:L.AFp},ve]}}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(z,12))},z.\u0275mod=L.oAB({type:z}),z.\u0275inj=L.cJS({providers:_r,imports:[_.ez,L.hGG]}),z})(),Ln=(()=>{class z{constructor(se){this._doc=se}getTitle(){return this._doc.title}setTitle(se){this._doc.title=se||""}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(_.K0))},z.\u0275prov=L.Yz7({token:z,factory:function(se){let we=null;return we=se?new se:function Pn(){return new Ln((0,L.LFG)(_.K0))}(),we},providedIn:"root"}),z})();"undefined"!=typeof window&&window;let Fe=(()=>{class z{}return z.\u0275fac=function(se){return new(se||z)},z.\u0275prov=L.Yz7({token:z,factory:function(se){let we=null;return we=se?new(se||z):L.LFG(me),we},providedIn:"root"}),z})(),me=(()=>{class z extends Fe{constructor(se){super(),this._doc=se}sanitize(se,we){if(null==we)return null;switch(se){case L.q3G.NONE:return we;case L.q3G.HTML:return(0,L.qzn)(we,"HTML")?(0,L.z3N)(we):(0,L.EiD)(this._doc,String(we)).toString();case L.q3G.STYLE:return(0,L.qzn)(we,"Style")?(0,L.z3N)(we):we;case L.q3G.SCRIPT:if((0,L.qzn)(we,"Script"))return(0,L.z3N)(we);throw new Error("unsafe value used in a script context");case L.q3G.URL:return(0,L.yhl)(we),(0,L.qzn)(we,"URL")?(0,L.z3N)(we):(0,L.mCW)(String(we));case L.q3G.RESOURCE_URL:if((0,L.qzn)(we,"ResourceURL"))return(0,L.z3N)(we);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,L.JVY)(se)}bypassSecurityTrustStyle(se){return(0,L.L6k)(se)}bypassSecurityTrustScript(se){return(0,L.eBb)(se)}bypassSecurityTrustUrl(se){return(0,L.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,L.pB0)(se)}}return z.\u0275fac=function(se){return new(se||z)(L.LFG(_.K0))},z.\u0275prov=L.Yz7({token:z,factory:function(se){let we=null;return we=se?new se:function Me(z){return new me(z.get(_.K0))}(L.LFG(L.zs3)),we},providedIn:"root"}),z})()},2729:(hn,ut,U)=>{U.d(ut,{gz:()=>at,F0:()=>ss,rH:()=>ai,yS:()=>Ko,Bz:()=>Yo,lC:()=>ei});var _=U(5e3),L=U(8996),ee=U(9646),re=U(7579);class Pe extends re.x{constructor(D){super(),this._value=D}get value(){return this.getValue()}_subscribe(D){const T=super._subscribe(D);return!T.closed&&D.next(this._value),T}getValue(){const{hasError:D,thrownError:T,_value:H}=this;if(D)throw T;return this._throwIfClosed(),H}next(D){super.next(this._value=D)}}var je=U(8306),We=U(4742),Be=U(4671),rt=U(3268),Ie=U(7669),ve=U(1810),Je=U(5403),Tt=U(9672);function Mt(P,D,T){P?(0,Tt.f)(T,P,D):D()}var Xe=U(2843),Ct=U(6805),Ke=U(7272),Kt=U(8421);function it(P){return new je.y(D=>{(0,Kt.Xf)(P()).subscribe(D)})}var xe=U(515),Qe=U(727),_t=U(4482);function It(){return(0,_t.e)((P,D)=>{let T=null;P._refCount++;const H=(0,Je.x)(D,void 0,void 0,void 0,()=>{if(!P||P._refCount<=0||0<--P._refCount)return void(T=null);const J=P._connection,de=T;T=null,J&&(!de||J===de)&&J.unsubscribe(),D.unsubscribe()});P.subscribe(H),H.closed||(T=P.connect())})}class be extends je.y{constructor(D,T){super(),this.source=D,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,_t.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,null==D||D.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Qe.w0;const T=this.getSubject();D.add(this.source.subscribe((0,Je.x)(T,void 0,()=>{this._teardown(),T.complete()},H=>{this._teardown(),T.error(H)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Qe.w0.EMPTY)}return D}refCount(){return It()(this)}}var Ht=U(4004),Nt=U(3900),An=U(5698),_n=U(8675),Fn=U(5026),ln=U(9300),rn=U(262),Ot=U(4351);function ar(P){return P<=0?()=>xe.E:(0,_t.e)((D,T)=>{let H=[];D.subscribe((0,Je.x)(T,J=>{H.push(J),P<H.length&&H.shift()},()=>{for(const J of H)T.next(J);T.complete()},void 0,()=>{H=null}))})}var Rn=U(8068),un=U(6590),nt=U(590),Te=U(5577),Re=U(8505),Ne=U(8189),ot=U(9808);class qt{constructor(D,T){this.id=D,this.url=T}}class pn extends qt{constructor(D,T,H="imperative",J=null){super(D,T),this.navigationTrigger=H,this.restoredState=J}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vn extends qt{constructor(D,T,H){super(D,T),this.urlAfterRedirects=H}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nn extends qt{constructor(D,T,H){super(D,T),this.reason=H}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cr extends qt{constructor(D,T,H){super(D,T),this.error=H}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _r extends qt{constructor(D,T,H,J){super(D,T),this.urlAfterRedirects=H,this.state=J}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends qt{constructor(D,T,H,J){super(D,T),this.urlAfterRedirects=H,this.state=J}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends qt{constructor(D,T,H,J,de){super(D,T),this.urlAfterRedirects=H,this.state=J,this.shouldActivate=de}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gn extends qt{constructor(D,T,H,J){super(D,T),this.urlAfterRedirects=H,this.state=J}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sr extends qt{constructor(D,T,H,J){super(D,T),this.urlAfterRedirects=H,this.state=J}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pn{constructor(D){this.route=D}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ln{constructor(D){this.route=D}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qr{constructor(D){this.snapshot=D}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $i{constructor(D){this.snapshot=D}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xt{constructor(D){this.snapshot=D}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class He{constructor(D){this.snapshot=D}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ge{constructor(D,T,H){this.routerEvent=D,this.position=T,this.anchor=H}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ht="primary";class At{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const T=this.params[D];return Array.isArray(T)?T[0]:T}return null}getAll(D){if(this.has(D)){const T=this.params[D];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Zt(P){return new At(P)}const sn="ngNavigationCancelingError";function br(P){const D=Error("NavigationCancelingError: "+P);return D[sn]=!0,D}function Vn(P,D,T){const H=T.path.split("/");if(H.length>P.length||"full"===T.pathMatch&&(D.hasChildren()||H.length<P.length))return null;const J={};for(let de=0;de<H.length;de++){const fe=H[de],Ve=P[de];if(fe.startsWith(":"))J[fe.substring(1)]=Ve;else if(fe!==Ve.path)return null}return{consumed:P.slice(0,H.length),posParams:J}}function lr(P,D){const T=P?Object.keys(P):void 0,H=D?Object.keys(D):void 0;if(!T||!H||T.length!=H.length)return!1;let J;for(let de=0;de<T.length;de++)if(J=T[de],!mr(P[J],D[J]))return!1;return!0}function mr(P,D){if(Array.isArray(P)&&Array.isArray(D)){if(P.length!==D.length)return!1;const T=[...P].sort(),H=[...D].sort();return T.every((J,de)=>H[de]===J)}return P===D}function nn(P){return Array.prototype.concat.apply([],P)}function Sr(P){return P.length>0?P[P.length-1]:null}function dr(P,D){for(const T in P)P.hasOwnProperty(T)&&D(P[T],T)}function Zn(P){return(0,_.CqO)(P)?P:(0,_.QGY)(P)?(0,L.D)(Promise.resolve(P)):(0,ee.of)(P)}const jr={exact:function Br(P,D,T){if(!ct(P.segments,D.segments)||!ye(P.segments,D.segments,T)||P.numberOfChildren!==D.numberOfChildren)return!1;for(const H in D.children)if(!P.children[H]||!Br(P.children[H],D.children[H],T))return!1;return!0},subset:Me},Jr={exact:function Ni(P,D){return lr(P,D)},subset:function Fe(P,D){return Object.keys(D).length<=Object.keys(P).length&&Object.keys(D).every(T=>mr(P[T],D[T]))},ignored:()=>!0};function Gi(P,D,T){return jr[T.paths](P.root,D.root,T.matrixParams)&&Jr[T.queryParams](P.queryParams,D.queryParams)&&!("exact"===T.fragment&&P.fragment!==D.fragment)}function Me(P,D,T){return me(P,D,D.segments,T)}function me(P,D,T,H){if(P.segments.length>T.length){const J=P.segments.slice(0,T.length);return!(!ct(J,T)||D.hasChildren()||!ye(J,T,H))}if(P.segments.length===T.length){if(!ct(P.segments,T)||!ye(P.segments,T,H))return!1;for(const J in D.children)if(!P.children[J]||!Me(P.children[J],D.children[J],H))return!1;return!0}{const J=T.slice(0,P.segments.length),de=T.slice(P.segments.length);return!!(ct(P.segments,J)&&ye(P.segments,J,H)&&P.children[ht])&&me(P.children[ht],D,de,H)}}function ye(P,D,T){return D.every((H,J)=>Jr[T](P[J].parameters,H.parameters))}class z{constructor(D,T,H){this.root=D,this.queryParams=T,this.fragment=H}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zt(this.queryParams)),this._queryParamMap}toString(){return gr.serialize(this)}}class ie{constructor(D,T){this.segments=D,this.children=T,this.parent=null,dr(T,(H,J)=>H.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ir(this)}}class se{constructor(D,T){this.path=D,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Zt(this.parameters)),this._parameterMap}toString(){return In(this)}}function ct(P,D){return P.length===D.length&&P.every((T,H)=>T.path===D[H].path)}class on{}class bn{parse(D){const T=new Si(D);return new z(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(D){const T=`/${si(D.root,!0)}`,H=function Kr(P){const D=Object.keys(P).map(T=>{const H=P[T];return Array.isArray(H)?H.map(J=>`${wt(T)}=${wt(J)}`).join("&"):`${wt(T)}=${wt(H)}`}).filter(T=>!!T);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${T}${H}${"string"==typeof D.fragment?`#${function gt(P){return encodeURI(P)}(D.fragment)}`:""}`}}const gr=new bn;function ir(P){return P.segments.map(D=>In(D)).join("/")}function si(P,D){if(!P.hasChildren())return ir(P);if(D){const T=P.children[ht]?si(P.children[ht],!1):"",H=[];return dr(P.children,(J,de)=>{de!==ht&&H.push(`${de}:${si(J,!1)}`)}),H.length>0?`${T}(${H.join("//")})`:T}{const T=function Bt(P,D){let T=[];return dr(P.children,(H,J)=>{J===ht&&(T=T.concat(D(H,J)))}),dr(P.children,(H,J)=>{J!==ht&&(T=T.concat(D(H,J)))}),T}(P,(H,J)=>J===ht?[si(P.children[ht],!1)]:[`${J}:${si(H,!1)}`]);return 1===Object.keys(P.children).length&&null!=P.children[ht]?`${ir(P)}/${T[0]}`:`${ir(P)}/(${T.join("//")})`}}function Ei(P){return encodeURIComponent(P).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wt(P){return Ei(P).replace(/%3B/gi,";")}function Ut(P){return Ei(P).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function St(P){return decodeURIComponent(P)}function an(P){return St(P.replace(/\+/g,"%20"))}function In(P){return`${Ut(P.path)}${function or(P){return Object.keys(P).map(D=>`;${Ut(D)}=${Ut(P[D])}`).join("")}(P.parameters)}`}const yr=/^[^\/()?;=#]+/;function Xr(P){const D=P.match(yr);return D?D[0]:""}const Hr=/^[^=?&#]+/,Rs=/^[^&#]+/;class Si{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let H={};return this.peekStartsWith("(")&&(H=this.parseParens(!1)),(D.length>0||Object.keys(T).length>0)&&(H[ht]=new ie(D,T)),H}parseSegment(){const D=Xr(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(D),new se(St(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const T=Xr(this.remaining);if(!T)return;this.capture(T);let H="";if(this.consumeOptional("=")){const J=Xr(this.remaining);J&&(H=J,this.capture(H))}D[St(T)]=St(H)}parseQueryParam(D){const T=function cs(P){const D=P.match(Hr);return D?D[0]:""}(this.remaining);if(!T)return;this.capture(T);let H="";if(this.consumeOptional("=")){const fe=function ur(P){const D=P.match(Rs);return D?D[0]:""}(this.remaining);fe&&(H=fe,this.capture(H))}const J=an(T),de=an(H);if(D.hasOwnProperty(J)){let fe=D[J];Array.isArray(fe)||(fe=[fe],D[J]=fe),fe.push(de)}else D[J]=de}parseParens(D){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const H=Xr(this.remaining),J=this.remaining[H.length];if("/"!==J&&")"!==J&&";"!==J)throw new Error(`Cannot parse url '${this.url}'`);let de;H.indexOf(":")>-1?(de=H.substr(0,H.indexOf(":")),this.capture(de),this.capture(":")):D&&(de=ht);const fe=this.parseChildren();T[de]=1===Object.keys(fe).length?fe[ht]:new ie([],fe),this.consumeOptional("//")}return T}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new Error(`Expected "${D}".`)}}class os{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const T=this.pathFromRoot(D);return T.length>1?T[T.length-2]:null}children(D){const T=Zs(D,this._root);return T?T.children.map(H=>H.value):[]}firstChild(D){const T=Zs(D,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(D){const T=Cr(D,this._root);return T.length<2?[]:T[T.length-2].children.map(J=>J.value).filter(J=>J!==D)}pathFromRoot(D){return Cr(D,this._root).map(T=>T.value)}}function Zs(P,D){if(P===D.value)return D;for(const T of D.children){const H=Zs(P,T);if(H)return H}return null}function Cr(P,D){if(P===D.value)return[D];for(const T of D.children){const H=Cr(P,T);if(H.length)return H.unshift(D),H}return[]}class mn{constructor(D,T){this.value=D,this.children=T}toString(){return`TreeNode(${this.value})`}}function tr(P){const D={};return P&&P.children.forEach(T=>D[T.value.outlet]=T),D}class ts extends os{constructor(D,T){super(D),this.snapshot=T,Tn(this,D)}toString(){return this.snapshot.toString()}}function hr(P,D){const T=function Zr(P,D){const fe=new mt([],{},{},"",{},ht,D,null,P.root,-1,{});return new kt("",new mn(fe,[]))}(P,D),H=new Pe([new se("",{})]),J=new Pe({}),de=new Pe({}),fe=new Pe({}),Ve=new Pe(""),Ft=new at(H,J,fe,Ve,de,ht,D,T.root);return Ft.snapshot=T.root,new ts(new mn(Ft,[]),T)}class at{constructor(D,T,H,J,de,fe,Ve,Ft){this.url=D,this.params=T,this.queryParams=H,this.fragment=J,this.data=de,this.outlet=fe,this.component=Ve,this._futureSnapshot=Ft}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ht.U)(D=>Zt(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ht.U)(D=>Zt(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ze(P,D="emptyOnly"){const T=P.pathFromRoot;let H=0;if("always"!==D)for(H=T.length-1;H>=1;){const J=T[H],de=T[H-1];if(J.routeConfig&&""===J.routeConfig.path)H--;else{if(de.component)break;H--}}return function lt(P){return P.reduce((D,T)=>({params:Object.assign(Object.assign({},D.params),T.params),data:Object.assign(Object.assign({},D.data),T.data),resolve:Object.assign(Object.assign({},D.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(H))}class mt{constructor(D,T,H,J,de,fe,Ve,Ft,yn,Xt,Gt){this.url=D,this.params=T,this.queryParams=H,this.fragment=J,this.data=de,this.outlet=fe,this.component=Ve,this.routeConfig=Ft,this._urlSegment=yn,this._lastPathIndex=Xt,this._resolve=Gt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(H=>H.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kt extends os{constructor(D,T){super(T),this.url=D,Tn(this,T)}toString(){return Ar(this._root)}}function Tn(P,D){D.value._routerState=P,D.children.forEach(T=>Tn(P,T))}function Ar(P){const D=P.children.length>0?` { ${P.children.map(Ar).join(", ")} } `:"";return`${P.value}${D}`}function Un(P){if(P.snapshot){const D=P.snapshot,T=P._futureSnapshot;P.snapshot=T,lr(D.queryParams,T.queryParams)||P.queryParams.next(T.queryParams),D.fragment!==T.fragment&&P.fragment.next(T.fragment),lr(D.params,T.params)||P.params.next(T.params),function yi(P,D){if(P.length!==D.length)return!1;for(let T=0;T<P.length;++T)if(!lr(P[T],D[T]))return!1;return!0}(D.url,T.url)||P.url.next(T.url),lr(D.data,T.data)||P.data.next(T.data)}else P.snapshot=P._futureSnapshot,P.data.next(P._futureSnapshot.data)}function nr(P,D){const T=lr(P.params,D.params)&&function we(P,D){return ct(P,D)&&P.every((T,H)=>lr(T.parameters,D[H].parameters))}(P.url,D.url);return T&&!(!P.parent!=!D.parent)&&(!P.parent||nr(P.parent,D.parent))}function ds(P,D,T){if(T&&P.shouldReuseRoute(D.value,T.value.snapshot)){const H=T.value;H._futureSnapshot=D.value;const J=function ci(P,D,T){return D.children.map(H=>{for(const J of T.children)if(P.shouldReuseRoute(H.value,J.value.snapshot))return ds(P,H,J);return ds(P,H)})}(P,D,T);return new mn(H,J)}{if(P.shouldAttach(D.value)){const de=P.retrieve(D.value);if(null!==de){const fe=de.route;return fe.value._futureSnapshot=D.value,fe.children=D.children.map(Ve=>ds(P,Ve)),fe}}const H=function Vi(P){return new at(new Pe(P.url),new Pe(P.params),new Pe(P.queryParams),new Pe(P.fragment),new Pe(P.data),P.outlet,P.component,P)}(D.value),J=D.children.map(de=>ds(P,de));return new mn(H,J)}}function Ys(P){return"object"==typeof P&&null!=P&&!P.outlets&&!P.segmentPath}function Ui(P){return"object"==typeof P&&null!=P&&P.outlets}function _o(P,D,T,H,J){let de={};if(H&&dr(H,(Ve,Ft)=>{de[Ft]=Array.isArray(Ve)?Ve.map(yn=>`${yn}`):`${Ve}`}),P===D)return new z(T,de,J);const fe=No(P,D,T);return new z(fe,de,J)}function No(P,D,T){const H={};return dr(P.children,(J,de)=>{H[de]=J===D?T:No(J,D,T)}),new ie(P.segments,H)}class Bs{constructor(D,T,H){if(this.isAbsolute=D,this.numberOfDoubleDots=T,this.commands=H,D&&H.length>0&&Ys(H[0]))throw new Error("Root segment cannot have matrix parameters");const J=H.find(Ui);if(J&&J!==Sr(H))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ao{constructor(D,T,H){this.segmentGroup=D,this.processChildren=T,this.index=H}}function xs(P,D,T){if(P||(P=new ie([],{})),0===P.segments.length&&P.hasChildren())return lo(P,D,T);const H=function Oo(P,D,T){let H=0,J=D;const de={match:!1,pathIndex:0,commandIndex:0};for(;J<P.segments.length;){if(H>=T.length)return de;const fe=P.segments[J],Ve=T[H];if(Ui(Ve))break;const Ft=`${Ve}`,yn=H<T.length-1?T[H+1]:null;if(J>0&&void 0===Ft)break;if(Ft&&yn&&"object"==typeof yn&&void 0===yn.outlets){if(!Go(Ft,yn,fe))return de;H+=2}else{if(!Go(Ft,{},fe))return de;H++}J++}return{match:!0,pathIndex:J,commandIndex:H}}(P,D,T),J=T.slice(H.commandIndex);if(H.match&&H.pathIndex<P.segments.length){const de=new ie(P.segments.slice(0,H.pathIndex),{});return de.children[ht]=new ie(P.segments.slice(H.pathIndex),P.children),lo(de,0,J)}return H.match&&0===J.length?new ie(P.segments,{}):H.match&&!P.hasChildren()?Wi(P,D,T):H.match?lo(P,0,J):Wi(P,D,T)}function lo(P,D,T){if(0===T.length)return new ie(P.segments,{});{const H=function Ir(P){return Ui(P[0])?P[0].outlets:{[ht]:P}}(T),J={};return dr(H,(de,fe)=>{"string"==typeof de&&(de=[de]),null!==de&&(J[fe]=xs(P.children[fe],D,de))}),dr(P.children,(de,fe)=>{void 0===H[fe]&&(J[fe]=de)}),new ie(P.segments,J)}}function Wi(P,D,T){const H=P.segments.slice(0,D);let J=0;for(;J<T.length;){const de=T[J];if(Ui(de)){const Ft=Ps(de.outlets);return new ie(H,Ft)}if(0===J&&Ys(T[0])){H.push(new se(P.segments[D].path,ki(T[0]))),J++;continue}const fe=Ui(de)?de.outlets[ht]:`${de}`,Ve=J<T.length-1?T[J+1]:null;fe&&Ve&&Ys(Ve)?(H.push(new se(fe,ki(Ve))),J+=2):(H.push(new se(fe,{})),J++)}return new ie(H,{})}function Ps(P){const D={};return dr(P,(T,H)=>{"string"==typeof T&&(T=[T]),null!==T&&(D[H]=Wi(new ie([],{}),0,T))}),D}function ki(P){const D={};return dr(P,(T,H)=>D[H]=`${T}`),D}function Go(P,D,T){return P==T.path&&lr(D,T.parameters)}class ko{constructor(D,T,H,J){this.routeReuseStrategy=D,this.futureState=T,this.currState=H,this.forwardEvent=J}activate(D){const T=this.futureState._root,H=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,H,D),Un(this.futureState.root),this.activateChildRoutes(T,H,D)}deactivateChildRoutes(D,T,H){const J=tr(T);D.children.forEach(de=>{const fe=de.value.outlet;this.deactivateRoutes(de,J[fe],H),delete J[fe]}),dr(J,(de,fe)=>{this.deactivateRouteAndItsChildren(de,H)})}deactivateRoutes(D,T,H){const J=D.value,de=T?T.value:null;if(J===de)if(J.component){const fe=H.getContext(J.outlet);fe&&this.deactivateChildRoutes(D,T,fe.children)}else this.deactivateChildRoutes(D,T,H);else de&&this.deactivateRouteAndItsChildren(T,H)}deactivateRouteAndItsChildren(D,T){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,T):this.deactivateRouteAndOutlet(D,T)}detachAndStoreRouteSubtree(D,T){const H=T.getContext(D.value.outlet),J=H&&D.value.component?H.children:T,de=tr(D);for(const fe of Object.keys(de))this.deactivateRouteAndItsChildren(de[fe],J);if(H&&H.outlet){const fe=H.outlet.detach(),Ve=H.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:fe,route:D,contexts:Ve})}}deactivateRouteAndOutlet(D,T){const H=T.getContext(D.value.outlet),J=H&&D.value.component?H.children:T,de=tr(D);for(const fe of Object.keys(de))this.deactivateRouteAndItsChildren(de[fe],J);H&&H.outlet&&(H.outlet.deactivate(),H.children.onOutletDeactivated(),H.attachRef=null,H.resolver=null,H.route=null)}activateChildRoutes(D,T,H){const J=tr(T);D.children.forEach(de=>{this.activateRoutes(de,J[de.value.outlet],H),this.forwardEvent(new He(de.value.snapshot))}),D.children.length&&this.forwardEvent(new $i(D.value.snapshot))}activateRoutes(D,T,H){const J=D.value,de=T?T.value:null;if(Un(J),J===de)if(J.component){const fe=H.getOrCreateContext(J.outlet);this.activateChildRoutes(D,T,fe.children)}else this.activateChildRoutes(D,T,H);else if(J.component){const fe=H.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){const Ve=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),fe.children.onOutletReAttached(Ve.contexts),fe.attachRef=Ve.componentRef,fe.route=Ve.route.value,fe.outlet&&fe.outlet.attach(Ve.componentRef,Ve.route.value),Un(Ve.route.value),this.activateChildRoutes(D,null,fe.children)}else{const Ve=function hs(P){for(let D=P.parent;D;D=D.parent){const T=D.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(J.snapshot),Ft=Ve?Ve.module.componentFactoryResolver:null;fe.attachRef=null,fe.route=J,fe.resolver=Ft,fe.outlet&&fe.outlet.activateWith(J,Ft),this.activateChildRoutes(D,null,fe.children)}}else this.activateChildRoutes(D,null,H)}}class zi{constructor(D,T){this.routes=D,this.module=T}}function fs(P){return"function"==typeof P}function Ts(P){return P instanceof z}const di=Symbol("INITIAL_VALUE");function vs(){return(0,Nt.w)(P=>function ft(...P){const D=(0,Ie.yG)(P),T=(0,Ie.jO)(P),{args:H,keys:J}=(0,We.D)(P);if(0===H.length)return(0,L.D)([],D);const de=new je.y(function bt(P,D,T=Be.y){return H=>{Mt(D,()=>{const{length:J}=P,de=new Array(J);let fe=J,Ve=J;for(let Ft=0;Ft<J;Ft++)Mt(D,()=>{const yn=(0,L.D)(P[Ft],D);let Xt=!1;yn.subscribe((0,Je.x)(H,Gt=>{de[Ft]=Gt,Xt||(Xt=!0,Ve--),Ve||H.next(T(de.slice()))},()=>{--fe||H.complete()}))},H)},H)}}(H,D,J?fe=>(0,ve.n)(J,fe):Be.y));return T?de.pipe((0,rt.Z)(T)):de}(P.map(D=>D.pipe((0,An.q)(1),(0,_n.O)(di)))).pipe((0,Fn.R)((D,T)=>{let H=!1;return T.reduce((J,de,fe)=>J!==di?J:(de===di&&(H=!0),H||!1!==de&&fe!==T.length-1&&!Ts(de)?J:de),D)},di),(0,ln.h)(D=>D!==di),(0,Ht.U)(D=>Ts(D)?D:!0===D),(0,An.q)(1)))}class Xs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Nr,this.attachRef=null}}class Nr{constructor(){this.contexts=new Map}onChildOutletCreated(D,T){const H=this.getOrCreateContext(D);H.outlet=T,this.contexts.set(D,H)}onChildOutletDestroyed(D){const T=this.getContext(D);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let T=this.getContext(D);return T||(T=new Xs,this.contexts.set(D,T)),T}getContext(D){return this.contexts.get(D)||null}}let ei=(()=>{class P{constructor(T,H,J,de,fe){this.parentContexts=T,this.location=H,this.resolver=J,this.changeDetector=fe,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=de||ht,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,H){this.activated=T,this._activatedRoute=H,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,H){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const fe=(H=H||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),Ve=this.parentContexts.getOrCreateContext(this.name).children,Ft=new bs(T,Ve,this.location.injector);this.activated=this.location.createComponent(fe,this.location.length,Ft),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return P.\u0275fac=function(T){return new(T||P)(_.Y36(Nr),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},P.\u0275dir=_.lG2({type:P,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),P})();class bs{constructor(D,T,H){this.route=D,this.childContexts=T,this.parent=H}get(D,T){return D===at?this.route:D===Nr?this.childContexts:this.parent.get(D,T)}}let _i=(()=>{class P{}return P.\u0275fac=function(T){return new(T||P)},P.\u0275cmp=_.Xpm({type:P,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,H){1&T&&_._UZ(0,"router-outlet")},directives:[ei],encapsulation:2}),P})();function wi(P,D=""){for(let T=0;T<P.length;T++){const H=P[T];ps(H,uo(D,H))}}function ps(P,D){P.children&&wi(P.children,D)}function uo(P,D){return D?P||D.path?P&&!D.path?`${P}/`:!P&&D.path?D.path:`${P}/${D.path}`:"":P}function Yr(P){const D=P.children&&P.children.map(Yr),T=D?Object.assign(Object.assign({},P),{children:D}):Object.assign({},P);return!T.component&&(D||T.loadChildren)&&T.outlet&&T.outlet!==ht&&(T.component=_i),T}function V(P){return P.outlet||ht}function ue(P,D){const T=P.filter(H=>V(H)===D);return T.push(...P.filter(H=>V(H)!==D)),T}const $={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function he(P,D,T){var H;if(""===D.path)return"full"===D.pathMatch&&(P.hasChildren()||T.length>0)?Object.assign({},$):{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const de=(D.matcher||Vn)(T,P,D);if(!de)return Object.assign({},$);const fe={};dr(de.posParams,(Ft,yn)=>{fe[yn]=Ft.path});const Ve=de.consumed.length>0?Object.assign(Object.assign({},fe),de.consumed[de.consumed.length-1].parameters):fe;return{matched:!0,consumedSegments:de.consumed,remainingSegments:T.slice(de.consumed.length),parameters:Ve,positionalParamSegments:null!==(H=de.posParams)&&void 0!==H?H:{}}}function Oe(P,D,T,H,J="corrected"){if(T.length>0&&function Dn(P,D,T){return T.some(H=>Rr(P,D,H)&&V(H)!==ht)}(P,T,H)){const fe=new ie(D,function zt(P,D,T,H){const J={};J[ht]=H,H._sourceSegment=P,H._segmentIndexShift=D.length;for(const de of T)if(""===de.path&&V(de)!==ht){const fe=new ie([],{});fe._sourceSegment=P,fe._segmentIndexShift=D.length,J[V(de)]=fe}return J}(P,D,H,new ie(T,P.children)));return fe._sourceSegment=P,fe._segmentIndexShift=D.length,{segmentGroup:fe,slicedSegments:[]}}if(0===T.length&&function Yn(P,D,T){return T.some(H=>Rr(P,D,H))}(P,T,H)){const fe=new ie(P.segments,function Pt(P,D,T,H,J,de){const fe={};for(const Ve of H)if(Rr(P,T,Ve)&&!J[V(Ve)]){const Ft=new ie([],{});Ft._sourceSegment=P,Ft._segmentIndexShift="legacy"===de?P.segments.length:D.length,fe[V(Ve)]=Ft}return Object.assign(Object.assign({},J),fe)}(P,D,T,H,P.children,J));return fe._sourceSegment=P,fe._segmentIndexShift=D.length,{segmentGroup:fe,slicedSegments:T}}const de=new ie(P.segments,P.children);return de._sourceSegment=P,de._segmentIndexShift=D.length,{segmentGroup:de,slicedSegments:T}}function Rr(P,D,T){return(!(P.hasChildren()||D.length>0)||"full"!==T.pathMatch)&&""===T.path}function fr(P,D,T,H){return!!(V(P)===H||H!==ht&&Rr(D,T,P))&&("**"===P.path||he(D,P,T).matched)}function vr(P,D,T){return 0===D.length&&!P.children[T]}class vi{constructor(D){this.segmentGroup=D||null}}class gi{constructor(D){this.urlTree=D}}function ti(P){return(0,Xe._)(new vi(P))}function co(P){return(0,Xe._)(new gi(P))}class Fo{constructor(D,T,H,J,de){this.configLoader=T,this.urlSerializer=H,this.urlTree=J,this.config=de,this.allowRedirects=!0,this.ngModule=D.get(_.h0i)}apply(){const D=Oe(this.urlTree.root,[],[],this.config).segmentGroup,T=new ie(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,T,ht).pipe((0,Ht.U)(de=>this.createUrlTree(vo(de),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,rn.K)(de=>{if(de instanceof gi)return this.allowRedirects=!1,this.match(de.urlTree);throw de instanceof vi?this.noMatchError(de):de}))}match(D){return this.expandSegmentGroup(this.ngModule,this.config,D.root,ht).pipe((0,Ht.U)(J=>this.createUrlTree(vo(J),D.queryParams,D.fragment))).pipe((0,rn.K)(J=>{throw J instanceof vi?this.noMatchError(J):J}))}noMatchError(D){return new Error(`Cannot match any routes. URL Segment: '${D.segmentGroup}'`)}createUrlTree(D,T,H){const J=D.segments.length>0?new ie([],{[ht]:D}):D;return new z(J,T,H)}expandSegmentGroup(D,T,H,J){return 0===H.segments.length&&H.hasChildren()?this.expandChildren(D,T,H).pipe((0,Ht.U)(de=>new ie([],de))):this.expandSegment(D,H,T,H.segments,J,!0)}expandChildren(D,T,H){const J=[];for(const de of Object.keys(H.children))"primary"===de?J.unshift(de):J.push(de);return(0,L.D)(J).pipe((0,Ot.b)(de=>{const fe=H.children[de],Ve=ue(T,de);return this.expandSegmentGroup(D,Ve,fe,de).pipe((0,Ht.U)(Ft=>({segment:Ft,outlet:de})))}),(0,Fn.R)((de,fe)=>(de[fe.outlet]=fe.segment,de),{}),function st(P,D){const T=arguments.length>=2;return H=>H.pipe(P?(0,ln.h)((J,de)=>P(J,de,H)):Be.y,ar(1),T?(0,un.d)(D):(0,Rn.T)(()=>new Ct.K))}())}expandSegment(D,T,H,J,de,fe){return(0,L.D)(H).pipe((0,Ot.b)(Ve=>this.expandSegmentAgainstRoute(D,T,H,Ve,J,de,fe).pipe((0,rn.K)(yn=>{if(yn instanceof vi)return(0,ee.of)(null);throw yn}))),(0,nt.P)(Ve=>!!Ve),(0,rn.K)((Ve,Ft)=>{if(Ve instanceof Ct.K||"EmptyError"===Ve.name)return vr(T,J,de)?(0,ee.of)(new ie([],{})):ti(T);throw Ve}))}expandSegmentAgainstRoute(D,T,H,J,de,fe,Ve){return fr(J,T,de,fe)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(D,T,J,de,fe):Ve&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,T,H,J,de,fe):ti(T):ti(T)}expandSegmentAgainstRouteUsingRedirect(D,T,H,J,de,fe){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,H,J,fe):this.expandRegularSegmentAgainstRouteUsingRedirect(D,T,H,J,de,fe)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,T,H,J){const de=this.applyRedirectCommands([],H.redirectTo,{});return H.redirectTo.startsWith("/")?co(de):this.lineralizeSegments(H,de).pipe((0,Te.z)(fe=>{const Ve=new ie(fe,{});return this.expandSegment(D,Ve,T,fe,J,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,T,H,J,de,fe){const{matched:Ve,consumedSegments:Ft,remainingSegments:yn,positionalParamSegments:Xt}=he(T,J,de);if(!Ve)return ti(T);const Gt=this.applyRedirectCommands(Ft,J.redirectTo,Xt);return J.redirectTo.startsWith("/")?co(Gt):this.lineralizeSegments(J,Gt).pipe((0,Te.z)(xi=>this.expandSegment(D,T,H,xi.concat(yn),fe,!1)))}matchSegmentAgainstRoute(D,T,H,J,de){if("**"===H.path)return H.loadChildren?(H._loadedConfig?(0,ee.of)(H._loadedConfig):this.configLoader.load(D.injector,H)).pipe((0,Ht.U)(Gt=>(H._loadedConfig=Gt,new ie(J,{})))):(0,ee.of)(new ie(J,{}));const{matched:fe,consumedSegments:Ve,remainingSegments:Ft}=he(T,H,J);return fe?this.getChildConfig(D,H,J).pipe((0,Te.z)(Xt=>{const Gt=Xt.module,xi=Xt.routes,{segmentGroup:en,slicedSegments:Dt}=Oe(T,Ve,Ft,xi),jt=new ie(en.segments,en.children);if(0===Dt.length&&jt.hasChildren())return this.expandChildren(Gt,xi,jt).pipe((0,Ht.U)(ia=>new ie(Ve,ia)));if(0===xi.length&&0===Dt.length)return(0,ee.of)(new ie(Ve,{}));const Fr=V(H)===de;return this.expandSegment(Gt,jt,xi,Dt,Fr?ht:de,!0).pipe((0,Ht.U)(Qi=>new ie(Ve.concat(Qi.segments),Qi.children)))})):ti(T)}getChildConfig(D,T,H){return T.children?(0,ee.of)(new zi(T.children,D)):T.loadChildren?void 0!==T._loadedConfig?(0,ee.of)(T._loadedConfig):this.runCanLoadGuards(D.injector,T,H).pipe((0,Te.z)(J=>J?this.configLoader.load(D.injector,T).pipe((0,Ht.U)(de=>(T._loadedConfig=de,de))):function Qn(P){return(0,Xe._)(br(`Cannot load children because the guard of the route "path: '${P.path}'" returned false`))}(T))):(0,ee.of)(new zi([],D))}runCanLoadGuards(D,T,H){const J=T.canLoad;if(!J||0===J.length)return(0,ee.of)(!0);const de=J.map(fe=>{const Ve=D.get(fe);let Ft;if(function Js(P){return P&&fs(P.canLoad)}(Ve))Ft=Ve.canLoad(T,H);else{if(!fs(Ve))throw new Error("Invalid CanLoad guard");Ft=Ve(T,H)}return Zn(Ft)});return(0,ee.of)(de).pipe(vs(),(0,Re.b)(fe=>{if(!Ts(fe))return;const Ve=br(`Redirecting to "${this.urlSerializer.serialize(fe)}"`);throw Ve.url=fe,Ve}),(0,Ht.U)(fe=>!0===fe))}lineralizeSegments(D,T){let H=[],J=T.root;for(;;){if(H=H.concat(J.segments),0===J.numberOfChildren)return(0,ee.of)(H);if(J.numberOfChildren>1||!J.children[ht])return(0,Xe._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D.redirectTo}'`));J=J.children[ht]}}applyRedirectCommands(D,T,H){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),D,H)}applyRedirectCreatreUrlTree(D,T,H,J){const de=this.createSegmentGroup(D,T.root,H,J);return new z(de,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(D,T){const H={};return dr(D,(J,de)=>{if("string"==typeof J&&J.startsWith(":")){const Ve=J.substring(1);H[de]=T[Ve]}else H[de]=J}),H}createSegmentGroup(D,T,H,J){const de=this.createSegments(D,T.segments,H,J);let fe={};return dr(T.children,(Ve,Ft)=>{fe[Ft]=this.createSegmentGroup(D,Ve,H,J)}),new ie(de,fe)}createSegments(D,T,H,J){return T.map(de=>de.path.startsWith(":")?this.findPosParam(D,de,J):this.findOrReturn(de,H))}findPosParam(D,T,H){const J=H[T.path.substring(1)];if(!J)throw new Error(`Cannot redirect to '${D}'. Cannot find '${T.path}'.`);return J}findOrReturn(D,T){let H=0;for(const J of T){if(J.path===D.path)return T.splice(H),J;H++}return D}}function vo(P){const D={};for(const H of Object.keys(P.children)){const de=vo(P.children[H]);(de.segments.length>0||de.hasChildren())&&(D[H]=de)}return function ho(P){if(1===P.numberOfChildren&&P.children[ht]){const D=P.children[ht];return new ie(P.segments.concat(D.segments),D.children)}return P}(new ie(P.segments,D))}class j{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class F{constructor(D,T){this.component=D,this.route=T}}function ce(P,D,T){const H=P._root;return W(H,D?D._root:null,T,[H.value])}function Jt(P,D,T){const H=function qr(P){if(!P)return null;for(let D=P.parent;D;D=D.parent){const T=D.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(D);return(H?H.module.injector:T).get(P)}function W(P,D,T,H,J={canDeactivateChecks:[],canActivateChecks:[]}){const de=tr(D);return P.children.forEach(fe=>{(function q(P,D,T,H,J={canDeactivateChecks:[],canActivateChecks:[]}){const de=P.value,fe=D?D.value:null,Ve=T?T.getContext(P.value.outlet):null;if(fe&&de.routeConfig===fe.routeConfig){const Ft=function pe(P,D,T){if("function"==typeof T)return T(P,D);switch(T){case"pathParamsChange":return!ct(P.url,D.url);case"pathParamsOrQueryParamsChange":return!ct(P.url,D.url)||!lr(P.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nr(P,D)||!lr(P.queryParams,D.queryParams);default:return!nr(P,D)}}(fe,de,de.routeConfig.runGuardsAndResolvers);Ft?J.canActivateChecks.push(new j(H)):(de.data=fe.data,de._resolvedData=fe._resolvedData),W(P,D,de.component?Ve?Ve.children:null:T,H,J),Ft&&Ve&&Ve.outlet&&Ve.outlet.isActivated&&J.canDeactivateChecks.push(new F(Ve.outlet.component,fe))}else fe&&De(D,Ve,J),J.canActivateChecks.push(new j(H)),W(P,null,de.component?Ve?Ve.children:null:T,H,J)})(fe,de[fe.value.outlet],T,H.concat([fe.value]),J),delete de[fe.value.outlet]}),dr(de,(fe,Ve)=>De(fe,T.getContext(Ve),J)),J}function De(P,D,T){const H=tr(P),J=P.value;dr(H,(de,fe)=>{De(de,J.component?D?D.children.getContext(fe):null:D,T)}),T.canDeactivateChecks.push(new F(J.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,J))}class Gr{}function hi(P){return new je.y(D=>D.error(P))}class Fi{constructor(D,T,H,J,de,fe){this.rootComponentType=D,this.config=T,this.urlTree=H,this.url=J,this.paramsInheritanceStrategy=de,this.relativeLinkResolution=fe}recognize(){const D=Oe(this.urlTree.root,[],[],this.config.filter(fe=>void 0===fe.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,D,ht);if(null===T)return null;const H=new mt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ht,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new mn(H,T),de=new kt(this.url,J);return this.inheritParamsAndData(de._root),de}inheritParamsAndData(D){const T=D.value,H=Ze(T,this.paramsInheritanceStrategy);T.params=Object.freeze(H.params),T.data=Object.freeze(H.data),D.children.forEach(J=>this.inheritParamsAndData(J))}processSegmentGroup(D,T,H){return 0===T.segments.length&&T.hasChildren()?this.processChildren(D,T):this.processSegment(D,T,T.segments,H)}processChildren(D,T){const H=[];for(const de of Object.keys(T.children)){const fe=T.children[de],Ve=ue(D,de),Ft=this.processSegmentGroup(Ve,fe,de);if(null===Ft)return null;H.push(...Ft)}const J=Li(H);return function oi(P){P.sort((D,T)=>D.value.outlet===ht?-1:T.value.outlet===ht?1:D.value.outlet.localeCompare(T.value.outlet))}(J),J}processSegment(D,T,H,J){for(const de of D){const fe=this.processSegmentAgainstRoute(de,T,H,J);if(null!==fe)return fe}return vr(T,H,J)?[]:null}processSegmentAgainstRoute(D,T,H,J){if(D.redirectTo||!fr(D,T,H,J))return null;let de,fe=[],Ve=[];if("**"===D.path){const en=H.length>0?Sr(H).parameters:{};de=new mt(H,en,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,da(D),V(D),D.component,D,Ns(T),Eo(T)+H.length,js(D))}else{const en=he(T,D,H);if(!en.matched)return null;fe=en.consumedSegments,Ve=en.remainingSegments,de=new mt(fe,en.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,da(D),V(D),D.component,D,Ns(T),Eo(T)+fe.length,js(D))}const Ft=function Yi(P){return P.children?P.children:P.loadChildren?P._loadedConfig.routes:[]}(D),{segmentGroup:yn,slicedSegments:Xt}=Oe(T,fe,Ve,Ft.filter(en=>void 0===en.redirectTo),this.relativeLinkResolution);if(0===Xt.length&&yn.hasChildren()){const en=this.processChildren(Ft,yn);return null===en?null:[new mn(de,en)]}if(0===Ft.length&&0===Xt.length)return[new mn(de,[])];const Gt=V(D)===J,xi=this.processSegment(Ft,yn,Xt,Gt?ht:J);return null===xi?null:[new mn(de,xi)]}}function ns(P){const D=P.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function Li(P){const D=[],T=new Set;for(const H of P){if(!ns(H)){D.push(H);continue}const J=D.find(de=>H.value.routeConfig===de.value.routeConfig);void 0!==J?(J.children.push(...H.children),T.add(J)):D.push(H)}for(const H of T){const J=Li(H.children);D.push(new mn(H.value,J))}return D.filter(H=>!T.has(H))}function Ns(P){let D=P;for(;D._sourceSegment;)D=D._sourceSegment;return D}function Eo(P){let D=P,T=D._segmentIndexShift?D._segmentIndexShift:0;for(;D._sourceSegment;)D=D._sourceSegment,T+=D._segmentIndexShift?D._segmentIndexShift:0;return T-1}function da(P){return P.data||{}}function js(P){return P.resolve||{}}function Ta(P){return[...Object.keys(P),...Object.getOwnPropertySymbols(P)]}function mi(P){return(0,Nt.w)(D=>{const T=P(D);return T?(0,L.D)(T).pipe((0,Ht.U)(()=>D)):(0,ee.of)(D)})}class Es extends class ls{shouldDetach(D){return!1}store(D,T){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,T){return D.routeConfig===T.routeConfig}}{}const Ri=new _.OlP("ROUTES");class ba{constructor(D,T,H,J){this.injector=D,this.compiler=T,this.onLoadStartListener=H,this.onLoadEndListener=J}load(D,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const J=this.loadModuleFactory(T.loadChildren).pipe((0,Ht.U)(de=>{this.onLoadEndListener&&this.onLoadEndListener(T);const fe=de.create(D);return new zi(nn(fe.injector.get(Ri,void 0,_.XFs.Self|_.XFs.Optional)).map(Yr),fe)}),(0,rn.K)(de=>{throw T._loader$=void 0,de}));return T._loader$=new be(J,()=>new re.x).pipe(It()),T._loader$}loadModuleFactory(D){return Zn(D()).pipe((0,Te.z)(T=>T instanceof _.YKP?(0,ee.of)(T):(0,L.D)(this.compiler.compileModuleAsync(T))))}}class gl{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,T){return D}}function Mo(P){throw P}function Hs(P,D,T){return D.parse("/")}function zo(P,D){return(0,ee.of)(null)}const ta={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Co={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ss=(()=>{class P{constructor(T,H,J,de,fe,Ve,Ft){this.rootComponentType=T,this.urlSerializer=H,this.rootContexts=J,this.location=de,this.config=Ft,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new re.x,this.errorHandler=Mo,this.malformedUriErrorHandler=Hs,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zo,afterPreactivation:zo},this.urlHandlingStrategy=new gl,this.routeReuseStrategy=new Es,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=fe.get(_.h0i),this.console=fe.get(_.c2e);const Gt=fe.get(_.R0b);this.isNgZoneEnabled=Gt instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(Ft),this.currentUrlTree=function Pr(){return new z(new ie([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ba(fe,Ve,xi=>this.triggerEvent(new Pn(xi)),xi=>this.triggerEvent(new Ln(xi))),this.routerState=hr(this.currentUrlTree,this.rootComponentType),this.transitions=new Pe({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const H=this.events;return T.pipe((0,ln.h)(J=>0!==J.id),(0,Ht.U)(J=>Object.assign(Object.assign({},J),{extractedUrl:this.urlHandlingStrategy.extract(J.rawUrl)})),(0,Nt.w)(J=>{let de=!1,fe=!1;return(0,ee.of)(J).pipe((0,Re.b)(Ve=>{this.currentNavigation={id:Ve.id,initialUrl:Ve.currentRawUrl,extractedUrl:Ve.extractedUrl,trigger:Ve.source,extras:Ve.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Nt.w)(Ve=>{const Ft=this.browserUrlTree.toString(),yn=!this.navigated||Ve.extractedUrl.toString()!==Ft||Ft!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||yn)&&this.urlHandlingStrategy.shouldProcessUrl(Ve.rawUrl))return ml(Ve.source)&&(this.browserUrlTree=Ve.extractedUrl),(0,ee.of)(Ve).pipe((0,Nt.w)(Gt=>{const xi=this.transitions.getValue();return H.next(new pn(Gt.id,this.serializeUrl(Gt.extractedUrl),Gt.source,Gt.restoredState)),xi!==this.transitions.getValue()?xe.E:Promise.resolve(Gt)}),function K(P,D,T,H){return(0,Nt.w)(J=>function Ds(P,D,T,H,J){return new Fo(P,D,T,H,J).apply()}(P,D,T,J.extractedUrl,H).pipe((0,Ht.U)(de=>Object.assign(Object.assign({},J),{urlAfterRedirects:de}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Re.b)(Gt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Gt.urlAfterRedirects})}),function fo(P,D,T,H,J){return(0,Te.z)(de=>function ri(P,D,T,H,J="emptyOnly",de="legacy"){try{const fe=new Fi(P,D,T,H,J,de).recognize();return null===fe?hi(new Gr):(0,ee.of)(fe)}catch(fe){return hi(fe)}}(P,D,de.urlAfterRedirects,T(de.urlAfterRedirects),H,J).pipe((0,Ht.U)(fe=>Object.assign(Object.assign({},de),{targetSnapshot:fe}))))}(this.rootComponentType,this.config,Gt=>this.serializeUrl(Gt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Re.b)(Gt=>{if("eager"===this.urlUpdateStrategy){if(!Gt.extras.skipLocationChange){const en=this.urlHandlingStrategy.merge(Gt.urlAfterRedirects,Gt.rawUrl);this.setBrowserUrl(en,Gt)}this.browserUrlTree=Gt.urlAfterRedirects}const xi=new _r(Gt.id,this.serializeUrl(Gt.extractedUrl),this.serializeUrl(Gt.urlAfterRedirects),Gt.targetSnapshot);H.next(xi)}));if(yn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:xi,extractedUrl:en,source:Dt,restoredState:jt,extras:Fr}=Ve,il=new pn(xi,this.serializeUrl(en),Dt,jt);H.next(il);const Qi=hr(en,this.rootComponentType).snapshot;return(0,ee.of)(Object.assign(Object.assign({},Ve),{targetSnapshot:Qi,urlAfterRedirects:en,extras:Object.assign(Object.assign({},Fr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ve.rawUrl,Ve.resolve(null),xe.E}),mi(Ve=>{const{targetSnapshot:Ft,id:yn,extractedUrl:Xt,rawUrl:Gt,extras:{skipLocationChange:xi,replaceUrl:en}}=Ve;return this.hooks.beforePreactivation(Ft,{navigationId:yn,appliedUrlTree:Xt,rawUrlTree:Gt,skipLocationChange:!!xi,replaceUrl:!!en})}),(0,Re.b)(Ve=>{const Ft=new jn(Ve.id,this.serializeUrl(Ve.extractedUrl),this.serializeUrl(Ve.urlAfterRedirects),Ve.targetSnapshot);this.triggerEvent(Ft)}),(0,Ht.U)(Ve=>Object.assign(Object.assign({},Ve),{guards:ce(Ve.targetSnapshot,Ve.currentSnapshot,this.rootContexts)})),function ze(P,D){return(0,Te.z)(T=>{const{targetSnapshot:H,currentSnapshot:J,guards:{canActivateChecks:de,canDeactivateChecks:fe}}=T;return 0===fe.length&&0===de.length?(0,ee.of)(Object.assign(Object.assign({},T),{guardsResult:!0})):function vt(P,D,T,H){return(0,L.D)(P).pipe((0,Te.z)(J=>function ni(P,D,T,H,J){const de=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!de||0===de.length)return(0,ee.of)(!0);const fe=de.map(Ve=>{const Ft=Jt(Ve,D,J);let yn;if(function Ki(P){return P&&fs(P.canDeactivate)}(Ft))yn=Zn(Ft.canDeactivate(P,D,T,H));else{if(!fs(Ft))throw new Error("Invalid CanDeactivate guard");yn=Zn(Ft(P,D,T,H))}return yn.pipe((0,nt.P)())});return(0,ee.of)(fe).pipe(vs())}(J.component,J.route,T,D,H)),(0,nt.P)(J=>!0!==J,!0))}(fe,H,J,P).pipe((0,Te.z)(Ve=>Ve&&function Ao(P){return"boolean"==typeof P}(Ve)?function Yt(P,D,T,H){return(0,L.D)(D).pipe((0,Ot.b)(J=>(0,Ke.z)(function xn(P,D){return null!==P&&D&&D(new Qr(P)),(0,ee.of)(!0)}(J.route.parent,H),function On(P,D){return null!==P&&D&&D(new xt(P)),(0,ee.of)(!0)}(J.route,H),function Bn(P,D,T){const H=D[D.length-1],de=D.slice(0,D.length-1).reverse().map(fe=>function Le(P){const D=P.routeConfig?P.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:P,guards:D}:null}(fe)).filter(fe=>null!==fe).map(fe=>it(()=>{const Ve=fe.guards.map(Ft=>{const yn=Jt(Ft,fe.node,T);let Xt;if(function Ro(P){return P&&fs(P.canActivateChild)}(yn))Xt=Zn(yn.canActivateChild(H,P));else{if(!fs(yn))throw new Error("Invalid CanActivateChild guard");Xt=Zn(yn(H,P))}return Xt.pipe((0,nt.P)())});return(0,ee.of)(Ve).pipe(vs())}));return(0,ee.of)(de).pipe(vs())}(P,J.path,T),function Jn(P,D,T){const H=D.routeConfig?D.routeConfig.canActivate:null;if(!H||0===H.length)return(0,ee.of)(!0);const J=H.map(de=>it(()=>{const fe=Jt(de,D,T);let Ve;if(function _s(P){return P&&fs(P.canActivate)}(fe))Ve=Zn(fe.canActivate(D,P));else{if(!fs(fe))throw new Error("Invalid CanActivate guard");Ve=Zn(fe(D,P))}return Ve.pipe((0,nt.P)())}));return(0,ee.of)(J).pipe(vs())}(P,J.route,T))),(0,nt.P)(J=>!0!==J,!0))}(H,de,P,D):(0,ee.of)(Ve)),(0,Ht.U)(Ve=>Object.assign(Object.assign({},T),{guardsResult:Ve})))})}(this.ngModule.injector,Ve=>this.triggerEvent(Ve)),(0,Re.b)(Ve=>{if(Ts(Ve.guardsResult)){const yn=br(`Redirecting to "${this.serializeUrl(Ve.guardsResult)}"`);throw yn.url=Ve.guardsResult,yn}const Ft=new Xn(Ve.id,this.serializeUrl(Ve.extractedUrl),this.serializeUrl(Ve.urlAfterRedirects),Ve.targetSnapshot,!!Ve.guardsResult);this.triggerEvent(Ft)}),(0,ln.h)(Ve=>!!Ve.guardsResult||(this.restoreHistory(Ve),this.cancelNavigationTransition(Ve,""),!1)),mi(Ve=>{if(Ve.guards.canActivateChecks.length)return(0,ee.of)(Ve).pipe((0,Re.b)(Ft=>{const yn=new gn(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);this.triggerEvent(yn)}),(0,Nt.w)(Ft=>{let yn=!1;return(0,ee.of)(Ft).pipe(function as(P,D){return(0,Te.z)(T=>{const{targetSnapshot:H,guards:{canActivateChecks:J}}=T;if(!J.length)return(0,ee.of)(T);let de=0;return(0,L.D)(J).pipe((0,Ot.b)(fe=>function nl(P,D,T,H){return function wo(P,D,T,H){const J=Ta(P);if(0===J.length)return(0,ee.of)({});const de={};return(0,L.D)(J).pipe((0,Te.z)(fe=>function Wo(P,D,T,H){const J=Jt(P,D,H);return Zn(J.resolve?J.resolve(D,T):J(D,T))}(P[fe],D,T,H).pipe((0,Re.b)(Ve=>{de[fe]=Ve}))),ar(1),(0,Te.z)(()=>Ta(de).length===J.length?(0,ee.of)(de):xe.E))}(P._resolve,P,D,H).pipe((0,Ht.U)(de=>(P._resolvedData=de,P.data=Object.assign(Object.assign({},P.data),Ze(P,T).resolve),null)))}(fe.route,H,P,D)),(0,Re.b)(()=>de++),ar(1),(0,Te.z)(fe=>de===J.length?(0,ee.of)(T):xe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Re.b)({next:()=>yn=!0,complete:()=>{yn||(this.restoreHistory(Ft),this.cancelNavigationTransition(Ft,"At least one route resolver didn't emit any value."))}}))}),(0,Re.b)(Ft=>{const yn=new sr(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);this.triggerEvent(yn)}))}),mi(Ve=>{const{targetSnapshot:Ft,id:yn,extractedUrl:Xt,rawUrl:Gt,extras:{skipLocationChange:xi,replaceUrl:en}}=Ve;return this.hooks.afterPreactivation(Ft,{navigationId:yn,appliedUrlTree:Xt,rawUrlTree:Gt,skipLocationChange:!!xi,replaceUrl:!!en})}),(0,Ht.U)(Ve=>{const Ft=function Oi(P,D,T){const H=ds(P,D._root,T?T._root:void 0);return new ts(H,D)}(this.routeReuseStrategy,Ve.targetSnapshot,Ve.currentRouterState);return Object.assign(Object.assign({},Ve),{targetRouterState:Ft})}),(0,Re.b)(Ve=>{this.currentUrlTree=Ve.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ve.urlAfterRedirects,Ve.rawUrl),this.routerState=Ve.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ve.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ve),this.browserUrlTree=Ve.urlAfterRedirects)}),((P,D,T)=>(0,Ht.U)(H=>(new ko(D,H.targetRouterState,H.currentRouterState,T).activate(P),H)))(this.rootContexts,this.routeReuseStrategy,Ve=>this.triggerEvent(Ve)),(0,Re.b)({next(){de=!0},complete(){de=!0}}),function Ee(P){return(0,_t.e)((D,T)=>{try{D.subscribe(T)}finally{T.add(P)}})}(()=>{var Ve;de||fe||this.cancelNavigationTransition(J,`Navigation ID ${J.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ve=this.currentNavigation)||void 0===Ve?void 0:Ve.id)===J.id&&(this.currentNavigation=null)}),(0,rn.K)(Ve=>{if(fe=!0,function zn(P){return P&&P[sn]}(Ve)){const Ft=Ts(Ve.url);Ft||(this.navigated=!0,this.restoreHistory(J,!0));const yn=new Nn(J.id,this.serializeUrl(J.extractedUrl),Ve.message);H.next(yn),Ft?setTimeout(()=>{const Xt=this.urlHandlingStrategy.merge(Ve.url,this.rawUrlTree),Gt={skipLocationChange:J.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ml(J.source)};this.scheduleNavigation(Xt,"imperative",null,Gt,{resolve:J.resolve,reject:J.reject,promise:J.promise})},0):J.resolve(!1)}else{this.restoreHistory(J,!0);const Ft=new cr(J.id,this.serializeUrl(J.extractedUrl),Ve);H.next(Ft);try{J.resolve(this.errorHandler(Ve))}catch(yn){J.reject(yn)}}return xe.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const H="popstate"===T.type?"popstate":"hashchange";"popstate"===H&&setTimeout(()=>{var J;const de={replaceUrl:!0},fe=(null===(J=T.state)||void 0===J?void 0:J.navigationId)?T.state:null;if(fe){const Ft=Object.assign({},fe);delete Ft.navigationId,delete Ft.\u0275routerPageId,0!==Object.keys(Ft).length&&(de.state=Ft)}const Ve=this.parseUrl(T.url);this.scheduleNavigation(Ve,H,fe,de)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){wi(T),this.config=T.map(Yr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,H={}){const{relativeTo:J,queryParams:de,fragment:fe,queryParamsHandling:Ve,preserveFragment:Ft}=H,yn=J||this.routerState.root,Xt=Ft?this.currentUrlTree.fragment:fe;let Gt=null;switch(Ve){case"merge":Gt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),de);break;case"preserve":Gt=this.currentUrlTree.queryParams;break;default:Gt=de||null}return null!==Gt&&(Gt=this.removeEmptyProps(Gt)),function Ai(P,D,T,H,J){if(0===T.length)return _o(D.root,D.root,D.root,H,J);const de=function ca(P){if("string"==typeof P[0]&&1===P.length&&"/"===P[0])return new Bs(!0,0,P);let D=0,T=!1;const H=P.reduce((J,de,fe)=>{if("object"==typeof de&&null!=de){if(de.outlets){const Ve={};return dr(de.outlets,(Ft,yn)=>{Ve[yn]="string"==typeof Ft?Ft.split("/"):Ft}),[...J,{outlets:Ve}]}if(de.segmentPath)return[...J,de.segmentPath]}return"string"!=typeof de?[...J,de]:0===fe?(de.split("/").forEach((Ve,Ft)=>{0==Ft&&"."===Ve||(0==Ft&&""===Ve?T=!0:".."===Ve?D++:""!=Ve&&J.push(Ve))}),J):[...J,de]},[]);return new Bs(T,D,H)}(T);if(de.toRoot())return _o(D.root,D.root,new ie([],{}),H,J);const fe=function Qs(P,D,T){if(P.isAbsolute)return new ao(D.root,!0,0);if(-1===T.snapshot._lastPathIndex){const de=T.snapshot._urlSegment;return new ao(de,de===D.root,0)}const H=Ys(P.commands[0])?0:1;return function Ms(P,D,T){let H=P,J=D,de=T;for(;de>J;){if(de-=J,H=H.parent,!H)throw new Error("Invalid number of '../'");J=H.segments.length}return new ao(H,!1,J-de)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+H,P.numberOfDoubleDots)}(de,D,P),Ve=fe.processChildren?lo(fe.segmentGroup,fe.index,de.commands):xs(fe.segmentGroup,fe.index,de.commands);return _o(D.root,fe.segmentGroup,Ve,H,J)}(yn,this.currentUrlTree,T,Gt,null!=Xt?Xt:null)}navigateByUrl(T,H={skipLocationChange:!1}){const J=Ts(T)?T:this.parseUrl(T),de=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(de,"imperative",null,H)}navigate(T,H={skipLocationChange:!1}){return function to(P){for(let D=0;D<P.length;D++){const T=P[D];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${D}`)}}(T),this.navigateByUrl(this.createUrlTree(T,H),H)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let H;try{H=this.urlSerializer.parse(T)}catch(J){H=this.malformedUriErrorHandler(J,this.urlSerializer,T)}return H}isActive(T,H){let J;if(J=!0===H?Object.assign({},ta):!1===H?Object.assign({},Co):H,Ts(T))return Gi(this.currentUrlTree,T,J);const de=this.parseUrl(T);return Gi(this.currentUrlTree,de,J)}removeEmptyProps(T){return Object.keys(T).reduce((H,J)=>{const de=T[J];return null!=de&&(H[J]=de),H},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new vn(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,H,J,de,fe){var Ve,Ft;if(this.disposed)return Promise.resolve(!1);let yn,Xt,Gt;fe?(yn=fe.resolve,Xt=fe.reject,Gt=fe.promise):Gt=new Promise((Dt,jt)=>{yn=Dt,Xt=jt});const xi=++this.navigationId;let en;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),en=J&&J.\u0275routerPageId?J.\u0275routerPageId:de.replaceUrl||de.skipLocationChange?null!==(Ve=this.browserPageId)&&void 0!==Ve?Ve:0:(null!==(Ft=this.browserPageId)&&void 0!==Ft?Ft:0)+1):en=0,this.setTransition({id:xi,targetPageId:en,source:H,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:de,resolve:yn,reject:Xt,promise:Gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gt.catch(Dt=>Promise.reject(Dt))}setBrowserUrl(T,H){const J=this.urlSerializer.serialize(T),de=Object.assign(Object.assign({},H.extras.state),this.generateNgRouterState(H.id,H.targetPageId));this.location.isCurrentPathEqualTo(J)||H.extras.replaceUrl?this.location.replaceState(J,"",de):this.location.go(J,"",de)}restoreHistory(T,H=!1){var J,de;if("computed"===this.canceledNavigationResolution){const fe=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl)||0===fe?this.currentUrlTree===(null===(de=this.currentNavigation)||void 0===de?void 0:de.finalUrl)&&0===fe&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(fe)}else"replace"===this.canceledNavigationResolution&&(H&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,H){const J=new Nn(T.id,this.serializeUrl(T.extractedUrl),H);this.triggerEvent(J),T.resolve(!1)}generateNgRouterState(T,H){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:H}:{navigationId:T}}}return P.\u0275fac=function(T){_.$Z()},P.\u0275prov=_.Yz7({token:P,factory:P.\u0275fac}),P})();function ml(P){return"imperative"!==P}let ai=(()=>{class P{constructor(T,H,J,de,fe){this.router=T,this.route=H,this.tabIndexAttribute=J,this.renderer=de,this.el=fe,this.commands=null,this.onChanges=new re.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){if(null!=this.tabIndexAttribute)return;const H=this.renderer,J=this.el.nativeElement;null!==T?H.setAttribute(J,"tabindex",T):H.removeAttribute(J,"tabindex")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const T={skipLocationChange:rs(this.skipLocationChange),replaceUrl:rs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,T),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:rs(this.preserveFragment)})}}return P.\u0275fac=function(T){return new(T||P)(_.Y36(ss),_.Y36(at),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},P.\u0275dir=_.lG2({type:P,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,H){1&T&&_.NdJ("click",function(){return H.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),P})(),Ko=(()=>{class P{constructor(T,H,J){this.router=T,this.route=H,this.locationStrategy=J,this.commands=null,this.href=null,this.onChanges=new re.x,this.subscription=T.events.subscribe(de=>{de instanceof vn&&this.updateTargetUrlAndHref()})}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:null}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,H,J,de,fe){if(0!==T||H||J||de||fe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ve={skipLocationChange:rs(this.skipLocationChange),replaceUrl:rs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ve),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:rs(this.preserveFragment)})}}return P.\u0275fac=function(T){return new(T||P)(_.Y36(ss),_.Y36(at),_.Y36(ot.S$))},P.\u0275dir=_.lG2({type:P,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,H){1&T&&_.NdJ("click",function(de){return H.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&T&&_.uIk("target",H.target)("href",H.href,_.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),P})();function rs(P){return""===P||!!P}class na{}class yl{preload(D,T){return(0,ee.of)(null)}}let Al=(()=>{class P{constructor(T,H,J,de){this.router=T,this.injector=J,this.preloadingStrategy=de,this.loader=new ba(J,H,Ft=>T.triggerEvent(new Pn(Ft)),Ft=>T.triggerEvent(new Ln(Ft)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ln.h)(T=>T instanceof vn),(0,Ot.b)(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(_.h0i);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,H){const J=[];for(const de of H)if(de.loadChildren&&!de.canLoad&&de._loadedConfig){const fe=de._loadedConfig;J.push(this.processRoutes(fe.module,fe.routes))}else de.loadChildren&&!de.canLoad?J.push(this.preloadConfig(T,de)):de.children&&J.push(this.processRoutes(T,de.children));return(0,L.D)(J).pipe((0,Ne.J)(),(0,Ht.U)(de=>{}))}preloadConfig(T,H){return this.preloadingStrategy.preload(H,()=>(H._loadedConfig?(0,ee.of)(H._loadedConfig):this.loader.load(T.injector,H)).pipe((0,Te.z)(de=>(H._loadedConfig=de,this.processRoutes(de.module,de.routes)))))}}return P.\u0275fac=function(T){return new(T||P)(_.LFG(ss),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(na))},P.\u0275prov=_.Yz7({token:P,factory:P.\u0275fac}),P})(),qo=(()=>{class P{constructor(T,H,J={}){this.router=T,this.viewportScroller=H,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof pn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof vn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof Ge&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,H){this.router.triggerEvent(new Ge(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,H))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return P.\u0275fac=function(T){_.$Z()},P.\u0275prov=_.Yz7({token:P,factory:P.\u0275fac}),P})();const Mi=new _.OlP("ROUTER_CONFIGURATION"),ra=new _.OlP("ROUTER_FORROOT_GUARD"),Zo=[ot.Ye,{provide:on,useClass:bn},{provide:ss,useFactory:function Sa(P,D,T,H,J,de,fe={},Ve,Ft){const yn=new ss(null,P,D,T,H,J,nn(de));return Ve&&(yn.urlHandlingStrategy=Ve),Ft&&(yn.routeReuseStrategy=Ft),function Ml(P,D){P.errorHandler&&(D.errorHandler=P.errorHandler),P.malformedUriErrorHandler&&(D.malformedUriErrorHandler=P.malformedUriErrorHandler),P.onSameUrlNavigation&&(D.onSameUrlNavigation=P.onSameUrlNavigation),P.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=P.paramsInheritanceStrategy),P.relativeLinkResolution&&(D.relativeLinkResolution=P.relativeLinkResolution),P.urlUpdateStrategy&&(D.urlUpdateStrategy=P.urlUpdateStrategy),P.canceledNavigationResolution&&(D.canceledNavigationResolution=P.canceledNavigationResolution)}(fe,yn),fe.enableTracing&&yn.events.subscribe(Xt=>{var Gt,xi;null===(Gt=console.group)||void 0===Gt||Gt.call(console,`Router Event: ${Xt.constructor.name}`),console.log(Xt.toString()),console.log(Xt),null===(xi=console.groupEnd)||void 0===xi||xi.call(console)}),yn},deps:[on,Nr,ot.Ye,_.zs3,_.Sil,Ri,Mi,[class ha{},new _.FiY],[class eo{},new _.FiY]]},Nr,{provide:at,useFactory:function xl(P){return P.routerState.root},deps:[ss]},Al,yl,class Da{preload(D,T){return T().pipe((0,rn.K)(()=>(0,ee.of)(null)))}},{provide:Mi,useValue:{enableTracing:!1}}];function Os(){return new _.PXZ("Router",ss)}let Yo=(()=>{class P{constructor(T,H){}static forRoot(T,H){return{ngModule:P,providers:[Zo,za(T),{provide:ra,useFactory:Rl,deps:[[ss,new _.FiY,new _.tp0]]},{provide:Mi,useValue:H||{}},{provide:ot.S$,useFactory:Ss,deps:[ot.lw,[new _.tBr(ot.mr),new _.FiY],Mi]},{provide:qo,useFactory:no,deps:[ss,ot.EM,Mi]},{provide:na,useExisting:H&&H.preloadingStrategy?H.preloadingStrategy:yl},{provide:_.PXZ,multi:!0,useFactory:Os},[Io,{provide:_.ip1,multi:!0,useFactory:Wl,deps:[Io]},{provide:_l,useFactory:Aa,deps:[Io]},{provide:_.tb,multi:!0,useExisting:_l}]]}}static forChild(T){return{ngModule:P,providers:[za(T)]}}}return P.\u0275fac=function(T){return new(T||P)(_.LFG(ra,8),_.LFG(ss,8))},P.\u0275mod=_.oAB({type:P}),P.\u0275inj=_.cJS({}),P})();function no(P,D,T){return T.scrollOffset&&D.setOffset(T.scrollOffset),new qo(P,D,T)}function Ss(P,D,T={}){return T.useHash?new ot.Do(P,D):new ot.b0(P,D)}function Rl(P){return"guarded"}function za(P){return[{provide:_.deG,multi:!0,useValue:P},{provide:Ri,multi:!0,useValue:P}]}let Io=(()=>{class P{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new re.x}appInitializer(){return this.injector.get(ot.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let H=null;const J=new Promise(Ve=>H=Ve),de=this.injector.get(ss),fe=this.injector.get(Mi);return"disabled"===fe.initialNavigation?(de.setUpLocationChangeListener(),H(!0)):"enabled"===fe.initialNavigation||"enabledBlocking"===fe.initialNavigation?(de.hooks.afterPreactivation=()=>this.initNavigation?(0,ee.of)(null):(this.initNavigation=!0,H(!0),this.resultOfPreactivationDone),de.initialNavigation()):H(!0),J})}bootstrapListener(T){const H=this.injector.get(Mi),J=this.injector.get(Al),de=this.injector.get(qo),fe=this.injector.get(ss),Ve=this.injector.get(_.z2F);T===Ve.components[0]&&(("enabledNonBlocking"===H.initialNavigation||void 0===H.initialNavigation)&&fe.initialNavigation(),J.setUpPreloading(),de.init(),fe.resetRootComponentType(Ve.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return P.\u0275fac=function(T){return new(T||P)(_.LFG(_.zs3))},P.\u0275prov=_.Yz7({token:P,factory:P.\u0275fac}),P})();function Wl(P){return P.appInitializer.bind(P)}function Aa(P){return P.bootstrapListener.bind(P)}const _l=new _.OlP("Router Initializer")},3942:(hn,ut,U)=>{U.d(ut,{Z:()=>bt});var _=U(2090),L=U(4859),ee=U(6881),re=U(1877);class Pe{constructor(Xe,Ct){this._delegate=Xe,this.firebase=Ct,(0,ee._addComponent)(Xe,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=Xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this._delegate.automaticDataCollectionEnabled=Xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Xe=>{this._delegate.checkDestroyed(),Xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(Xe,Ct=ee._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const Kt=this._delegate.container.getProvider(Xe);return!Kt.isInitialized()&&"EXPLICIT"===(null===(Ke=Kt.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&Kt.initialize(),Kt.getImmediate({identifier:Ct})}_removeServiceInstance(Xe,Ct=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Xe).clearInstance(Ct)}_addComponent(Xe){(0,ee._addComponent)(this._delegate,Xe)}_addOrOverwriteComponent(Xe){(0,ee._addOrOverwriteComponent)(this._delegate,Xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const We=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ie=function rt(){const Mt=function Be(Mt){const Xe={},Ct={__esModule:!0,initializeApp:function it(It,be={}){const Ht=ee.initializeApp(It,be);if((0,_.r3)(Xe,Ht.name))return Xe[Ht.name];const Nt=new Mt(Ht,Ct);return Xe[Ht.name]=Nt,Nt},app:Kt,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function Qe(It){const be=It.name,Ht=be.replace("-compat","");if(ee._registerComponent(It)&&"PUBLIC"===It.type){const Nt=(An=Kt())=>{if("function"!=typeof An[Ht])throw We.create("invalid-app-argument",{appName:be});return An[Ht]()};void 0!==It.serviceProps&&(0,_.ZB)(Nt,It.serviceProps),Ct[Ht]=Nt,Mt.prototype[Ht]=function(...An){return this._getService.bind(this,be).apply(this,It.multipleInstances?An:[])}}return"PUBLIC"===It.type?Ct[Ht]:null},removeApp:function Ke(It){delete Xe[It]},useAsService:function _t(It,be){return"serverAuth"===be?null:be},modularAPIs:ee}};function Kt(It){if(!(0,_.r3)(Xe,It=It||ee._DEFAULT_ENTRY_NAME))throw We.create("no-app",{appName:It});return Xe[It]}return Ct.default=Ct,Object.defineProperty(Ct,"apps",{get:function xe(){return Object.keys(Xe).map(It=>Xe[It])}}),Kt.App=Mt,Ct}(Pe);return Mt.INTERNAL=Object.assign(Object.assign({},Mt.INTERNAL),{createFirebaseNamespace:rt,extendNamespace:function Xe(Ct){(0,_.ZB)(Mt,Ct)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Mt}(),ve=new re.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Mt=self.firebase.SDK_VERSION;Mt&&Mt.indexOf("LITE")>=0&&ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const bt=Ie;!function ft(Mt){(0,ee.registerVersion)("@firebase/app-compat","0.2.13",Mt)}()},6881:(hn,ut,U)=>{U.r(ut),U.d(ut,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>nn,_DEFAULT_ENTRY_NAME:()=>xt,_addComponent:()=>At,_addOrOverwriteComponent:()=>Zt,_apps:()=>Ge,_clearComponents:()=>Vn,_components:()=>ht,_getProvider:()=>br,_registerComponent:()=>sn,_removeServiceInstance:()=>zn,deleteApp:()=>Zn,getApp:()=>er,getApps:()=>dr,initializeApp:()=>Sr,onLog:()=>Jr,registerVersion:()=>jr,setLogLevel:()=>Gi});var _=U(5861),L=U(4859),ee=U(1877),re=U(2090);let je,We;const Ie=new WeakMap,ve=new WeakMap,Je=new WeakMap,Tt=new WeakMap,ft=new WeakMap;let Xe={get(wt,gt,Ut){if(wt instanceof IDBTransaction){if("done"===gt)return ve.get(wt);if("objectStoreNames"===gt)return wt.objectStoreNames||Je.get(wt);if("store"===gt)return Ut.objectStoreNames[1]?void 0:Ut.objectStore(Ut.objectStoreNames[0])}return it(wt[gt])},set:(wt,gt,Ut)=>(wt[gt]=Ut,!0),has:(wt,gt)=>wt instanceof IDBTransaction&&("done"===gt||"store"===gt)||gt in wt};function Kt(wt){return"function"==typeof wt?function Ke(wt){return wt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function rt(){return We||(We=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(wt)?function(...gt){return wt.apply(xe(this),gt),it(Ie.get(this))}:function(...gt){return it(wt.apply(xe(this),gt))}:function(gt,...Ut){const St=wt.call(xe(this),gt,...Ut);return Je.set(St,gt.sort?gt.sort():[gt]),it(St)}}(wt):(wt instanceof IDBTransaction&&function Mt(wt){if(ve.has(wt))return;const gt=new Promise((Ut,St)=>{const an=()=>{wt.removeEventListener("complete",In),wt.removeEventListener("error",or),wt.removeEventListener("abort",or)},In=()=>{Ut(),an()},or=()=>{St(wt.error||new DOMException("AbortError","AbortError")),an()};wt.addEventListener("complete",In),wt.addEventListener("error",or),wt.addEventListener("abort",or)});ve.set(wt,gt)}(wt),((wt,gt)=>gt.some(Ut=>wt instanceof Ut))(wt,function Be(){return je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(wt,Xe):wt)}function it(wt){if(wt instanceof IDBRequest)return function bt(wt){const gt=new Promise((Ut,St)=>{const an=()=>{wt.removeEventListener("success",In),wt.removeEventListener("error",or)},In=()=>{Ut(it(wt.result)),an()},or=()=>{St(wt.error),an()};wt.addEventListener("success",In),wt.addEventListener("error",or)});return gt.then(Ut=>{Ut instanceof IDBCursor&&Ie.set(Ut,wt)}).catch(()=>{}),ft.set(gt,wt),gt}(wt);if(Tt.has(wt))return Tt.get(wt);const gt=Kt(wt);return gt!==wt&&(Tt.set(wt,gt),ft.set(gt,wt)),gt}const xe=wt=>ft.get(wt),It=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Ht=new Map;function Nt(wt,gt){if(!(wt instanceof IDBDatabase)||gt in wt||"string"!=typeof gt)return;if(Ht.get(gt))return Ht.get(gt);const Ut=gt.replace(/FromIndex$/,""),St=gt!==Ut,an=be.includes(Ut);if(!(Ut in(St?IDBIndex:IDBObjectStore).prototype)||!an&&!It.includes(Ut))return;const In=function(){var or=(0,_.Z)(function*(Kr,...yr){const Xr=this.transaction(Kr,an?"readwrite":"readonly");let Hr=Xr.store;return St&&(Hr=Hr.index(yr.shift())),(yield Promise.all([Hr[Ut](...yr),an&&Xr.done]))[0]});return function(yr){return or.apply(this,arguments)}}();return Ht.set(gt,In),In}!function Ct(wt){Xe=wt(Xe)}(wt=>D_(b_({},wt),{get:(gt,Ut,St)=>Nt(gt,Ut)||wt.get(gt,Ut,St),has:(gt,Ut)=>!!Nt(gt,Ut)||wt.has(gt,Ut)}));class An{constructor(gt){this.container=gt}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function _n(wt){const gt=wt.getComponent();return"VERSION"===(null==gt?void 0:gt.type)}(Ut)){const St=Ut.getImmediate();return`${St.library}/${St.version}`}return null}).filter(Ut=>Ut).join(" ")}}const Fn="@firebase/app",rn=new ee.Yd("@firebase/app"),xt="[DEFAULT]",He={[Fn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ge=new Map,ht=new Map;function At(wt,gt){try{wt.container.addComponent(gt)}catch(Ut){rn.debug(`Component ${gt.name} failed to register with FirebaseApp ${wt.name}`,Ut)}}function Zt(wt,gt){wt.container.addOrOverwriteComponent(gt)}function sn(wt){const gt=wt.name;if(ht.has(gt))return rn.debug(`There were multiple attempts to register component ${gt}.`),!1;ht.set(gt,wt);for(const Ut of Ge.values())At(Ut,wt);return!0}function br(wt,gt){const Ut=wt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ut&&Ut.triggerHeartbeat(),wt.container.getProvider(gt)}function zn(wt,gt,Ut=xt){br(wt,gt).clearInstance(Ut)}function Vn(){ht.clear()}const lr=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mr{constructor(gt,Ut,St){this._isDeleted=!1,this._options=Object.assign({},gt),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this.checkDestroyed(),this._automaticDataCollectionEnabled=gt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(gt){this._isDeleted=gt}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const nn="9.23.0";function Sr(wt,gt={}){let Ut=wt;"object"!=typeof gt&&(gt={name:gt});const St=Object.assign({name:xt,automaticDataCollectionEnabled:!1},gt),an=St.name;if("string"!=typeof an||!an)throw lr.create("bad-app-name",{appName:String(an)});if(Ut||(Ut=(0,re.aH)()),!Ut)throw lr.create("no-options");const In=Ge.get(an);if(In){if((0,re.vZ)(Ut,In.options)&&(0,re.vZ)(St,In.config))return In;throw lr.create("duplicate-app",{appName:an})}const or=new L.H0(an);for(const yr of ht.values())or.addComponent(yr);const Kr=new mr(Ut,St,or);return Ge.set(an,Kr),Kr}function er(wt=xt){const gt=Ge.get(wt);if(!gt&&wt===xt&&(0,re.aH)())return Sr();if(!gt)throw lr.create("no-app",{appName:wt});return gt}function dr(){return Array.from(Ge.values())}function Zn(wt){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,_.Z)(function*(wt){const gt=wt.name;Ge.has(gt)&&(Ge.delete(gt),yield Promise.all(wt.container.getProviders().map(Ut=>Ut.delete())),wt.isDeleted=!0)})).apply(this,arguments)}function jr(wt,gt,Ut){var St;let an=null!==(St=He[wt])&&void 0!==St?St:wt;Ut&&(an+=`-${Ut}`);const In=an.match(/\s|\//),or=gt.match(/\s|\//);if(In||or){const Kr=[`Unable to register library "${an}" with version "${gt}":`];return In&&Kr.push(`library name "${an}" contains illegal characters (whitespace or "/")`),In&&or&&Kr.push("and"),or&&Kr.push(`version name "${gt}" contains illegal characters (whitespace or "/")`),void rn.warn(Kr.join(" "))}sn(new L.wA(`${an}-version`,()=>({library:an,version:gt}),"VERSION"))}function Jr(wt,gt){if(null!==wt&&"function"!=typeof wt)throw lr.create("invalid-log-argument");(0,ee.Am)(wt,gt)}function Gi(wt){(0,ee.Ub)(wt)}const Fe="firebase-heartbeat-store";let Me=null;function me(){return Me||(Me=function Qe(wt,gt,{blocked:Ut,upgrade:St,blocking:an,terminated:In}={}){const or=indexedDB.open(wt,gt),Kr=it(or);return St&&or.addEventListener("upgradeneeded",yr=>{St(it(or.result),yr.oldVersion,yr.newVersion,it(or.transaction),yr)}),Ut&&or.addEventListener("blocked",yr=>Ut(yr.oldVersion,yr.newVersion,yr)),Kr.then(yr=>{In&&yr.addEventListener("close",()=>In()),an&&yr.addEventListener("versionchange",Xr=>an(Xr.oldVersion,Xr.newVersion,Xr))}).catch(()=>{}),Kr}("firebase-heartbeat-database",1,{upgrade:(wt,gt)=>{0===gt&&wt.createObjectStore(Fe)}}).catch(wt=>{throw lr.create("idb-open",{originalErrorMessage:wt.message})})),Me}function z(){return(z=(0,_.Z)(function*(wt){try{return yield(yield me()).transaction(Fe).objectStore(Fe).get(we(wt))}catch(gt){if(gt instanceof re.ZR)rn.warn(gt.message);else{const Ut=lr.create("idb-get",{originalErrorMessage:null==gt?void 0:gt.message});rn.warn(Ut.message)}}})).apply(this,arguments)}function ie(wt,gt){return se.apply(this,arguments)}function se(){return(se=(0,_.Z)(function*(wt,gt){try{const St=(yield me()).transaction(Fe,"readwrite");yield St.objectStore(Fe).put(gt,we(wt)),yield St.done}catch(Ut){if(Ut instanceof re.ZR)rn.warn(Ut.message);else{const St=lr.create("idb-set",{originalErrorMessage:null==Ut?void 0:Ut.message});rn.warn(St.message)}}})).apply(this,arguments)}function we(wt){return`${wt.name}!${wt.options.appId}`}class on{constructor(gt){this.container=gt,this._heartbeatsCache=null;const Ut=this.container.getProvider("app").getImmediate();this._storage=new ir(Ut),this._heartbeatsCachePromise=this._storage.read().then(St=>(this._heartbeatsCache=St,St))}triggerHeartbeat(){var gt=this;return(0,_.Z)(function*(){const St=gt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),an=bn();if(null===gt._heartbeatsCache&&(gt._heartbeatsCache=yield gt._heartbeatsCachePromise),gt._heartbeatsCache.lastSentHeartbeatDate!==an&&!gt._heartbeatsCache.heartbeats.some(In=>In.date===an))return gt._heartbeatsCache.heartbeats.push({date:an,agent:St}),gt._heartbeatsCache.heartbeats=gt._heartbeatsCache.heartbeats.filter(In=>{const or=new Date(In.date).valueOf();return Date.now()-or<=2592e6}),gt._storage.overwrite(gt._heartbeatsCache)})()}getHeartbeatsHeader(){var gt=this;return(0,_.Z)(function*(){if(null===gt._heartbeatsCache&&(yield gt._heartbeatsCachePromise),null===gt._heartbeatsCache||0===gt._heartbeatsCache.heartbeats.length)return"";const Ut=bn(),{heartbeatsToSend:St,unsentEntries:an}=function gr(wt,gt=1024){const Ut=[];let St=wt.slice();for(const an of wt){const In=Ut.find(or=>or.agent===an.agent);if(In){if(In.dates.push(an.date),si(Ut)>gt){In.dates.pop();break}}else if(Ut.push({agent:an.agent,dates:[an.date]}),si(Ut)>gt){Ut.pop();break}St=St.slice(1)}return{heartbeatsToSend:Ut,unsentEntries:St}}(gt._heartbeatsCache.heartbeats),In=(0,re.L)(JSON.stringify({version:2,heartbeats:St}));return gt._heartbeatsCache.lastSentHeartbeatDate=Ut,an.length>0?(gt._heartbeatsCache.heartbeats=an,yield gt._storage.overwrite(gt._heartbeatsCache)):(gt._heartbeatsCache.heartbeats=[],gt._storage.overwrite(gt._heartbeatsCache)),In})()}}function bn(){return(new Date).toISOString().substring(0,10)}class ir{constructor(gt){this.app=gt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var gt=this;return(0,_.Z)(function*(){return(yield gt._canUseIndexedDBPromise)&&(yield function ye(wt){return z.apply(this,arguments)}(gt.app))||{heartbeats:[]}})()}overwrite(gt){var Ut=this;return(0,_.Z)(function*(){var St;if(yield Ut._canUseIndexedDBPromise){const In=yield Ut.read();return ie(Ut.app,{lastSentHeartbeatDate:null!==(St=gt.lastSentHeartbeatDate)&&void 0!==St?St:In.lastSentHeartbeatDate,heartbeats:gt.heartbeats})}})()}add(gt){var Ut=this;return(0,_.Z)(function*(){var St;if(yield Ut._canUseIndexedDBPromise){const In=yield Ut.read();return ie(Ut.app,{lastSentHeartbeatDate:null!==(St=gt.lastSentHeartbeatDate)&&void 0!==St?St:In.lastSentHeartbeatDate,heartbeats:[...In.heartbeats,...gt.heartbeats]})}})()}}function si(wt){return(0,re.L)(JSON.stringify({version:2,heartbeats:wt})).length}!function Ei(wt){sn(new L.wA("platform-logger",gt=>new An(gt),"PRIVATE")),sn(new L.wA("heartbeat",gt=>new on(gt),"PRIVATE")),jr(Fn,"0.9.13",wt),jr(Fn,"0.9.13","esm2017"),jr("fire-js","")}("")},4859:(hn,ut,U)=>{U.d(ut,{H0:()=>Be,wA:()=>ee,zt:()=>Pe});var _=U(5861),L=U(2090);class ee{constructor(Ie,ve,Je){this.name=Ie,this.instanceFactory=ve,this.type=Je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ie){return this.instantiationMode=Ie,this}setMultipleInstances(Ie){return this.multipleInstances=Ie,this}setServiceProps(Ie){return this.serviceProps=Ie,this}setInstanceCreatedCallback(Ie){return this.onInstanceCreated=Ie,this}}const re="[DEFAULT]";class Pe{constructor(Ie,ve){this.name=Ie,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ie){const ve=this.normalizeInstanceIdentifier(Ie);if(!this.instancesDeferred.has(ve)){const Je=new L.BH;if(this.instancesDeferred.set(ve,Je),this.isInitialized(ve)||this.shouldAutoInitialize())try{const Tt=this.getOrInitializeService({instanceIdentifier:ve});Tt&&Je.resolve(Tt)}catch(Tt){}}return this.instancesDeferred.get(ve).promise}getImmediate(Ie){var ve;const Je=this.normalizeInstanceIdentifier(null==Ie?void 0:Ie.identifier),Tt=null!==(ve=null==Ie?void 0:Ie.optional)&&void 0!==ve&&ve;if(!this.isInitialized(Je)&&!this.shouldAutoInitialize()){if(Tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Je})}catch(ft){if(Tt)return null;throw ft}}getComponent(){return this.component}setComponent(Ie){if(Ie.name!==this.name)throw Error(`Mismatching Component ${Ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ie,this.shouldAutoInitialize()){if(function We(rt){return"EAGER"===rt.instantiationMode}(Ie))try{this.getOrInitializeService({instanceIdentifier:re})}catch(ve){}for(const[ve,Je]of this.instancesDeferred.entries()){const Tt=this.normalizeInstanceIdentifier(ve);try{const ft=this.getOrInitializeService({instanceIdentifier:Tt});Je.resolve(ft)}catch(ft){}}}}clearInstance(Ie=re){this.instancesDeferred.delete(Ie),this.instancesOptions.delete(Ie),this.instances.delete(Ie)}delete(){var Ie=this;return(0,_.Z)(function*(){const ve=Array.from(Ie.instances.values());yield Promise.all([...ve.filter(Je=>"INTERNAL"in Je).map(Je=>Je.INTERNAL.delete()),...ve.filter(Je=>"_delete"in Je).map(Je=>Je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ie=re){return this.instances.has(Ie)}getOptions(Ie=re){return this.instancesOptions.get(Ie)||{}}initialize(Ie={}){const{options:ve={}}=Ie,Je=this.normalizeInstanceIdentifier(Ie.instanceIdentifier);if(this.isInitialized(Je))throw Error(`${this.name}(${Je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tt=this.getOrInitializeService({instanceIdentifier:Je,options:ve});for(const[ft,bt]of this.instancesDeferred.entries())Je===this.normalizeInstanceIdentifier(ft)&&bt.resolve(Tt);return Tt}onInit(Ie,ve){var Je;const Tt=this.normalizeInstanceIdentifier(ve),ft=null!==(Je=this.onInitCallbacks.get(Tt))&&void 0!==Je?Je:new Set;ft.add(Ie),this.onInitCallbacks.set(Tt,ft);const bt=this.instances.get(Tt);return bt&&Ie(bt,Tt),()=>{ft.delete(Ie)}}invokeOnInitCallbacks(Ie,ve){const Je=this.onInitCallbacks.get(ve);if(Je)for(const Tt of Je)try{Tt(Ie,ve)}catch(ft){}}getOrInitializeService({instanceIdentifier:Ie,options:ve={}}){let Je=this.instances.get(Ie);if(!Je&&this.component&&(Je=this.component.instanceFactory(this.container,{instanceIdentifier:(rt=Ie,rt===re?void 0:rt),options:ve}),this.instances.set(Ie,Je),this.instancesOptions.set(Ie,ve),this.invokeOnInitCallbacks(Je,Ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ie,Je)}catch(Tt){}var rt;return Je||null}normalizeInstanceIdentifier(Ie=re){return this.component?this.component.multipleInstances?Ie:re:Ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Be{constructor(Ie){this.name=Ie,this.providers=new Map}addComponent(Ie){const ve=this.getProvider(Ie.name);if(ve.isComponentSet())throw new Error(`Component ${Ie.name} has already been registered with ${this.name}`);ve.setComponent(Ie)}addOrOverwriteComponent(Ie){this.getProvider(Ie.name).isComponentSet()&&this.providers.delete(Ie.name),this.addComponent(Ie)}getProvider(Ie){if(this.providers.has(Ie))return this.providers.get(Ie);const ve=new Pe(Ie,this);return this.providers.set(Ie,ve),ve}getProviders(){return Array.from(this.providers.values())}}},1877:(hn,ut,U)=>{U.d(ut,{Am:()=>rt,Ub:()=>Be,Yd:()=>We,in:()=>L});const _=[];var L=(()=>{return(Ie=L||(L={}))[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",L;var Ie})();const ee={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},re=L.INFO,Pe={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},je=(Ie,ve,...Je)=>{if(ve<Ie.logLevel)return;const Tt=(new Date).toISOString(),ft=Pe[ve];if(!ft)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[ft](`[${Tt}]  ${Ie.name}:`,...Je)};class We{constructor(ve){this.name=ve,this._logLevel=re,this._logHandler=je,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in L))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?ee[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...ve),this._logHandler(this,L.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...ve),this._logHandler(this,L.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,L.INFO,...ve),this._logHandler(this,L.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,L.WARN,...ve),this._logHandler(this,L.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...ve),this._logHandler(this,L.ERROR,...ve)}}function Be(Ie){_.forEach(ve=>{ve.setLogLevel(Ie)})}function rt(Ie,ve){for(const Je of _){let Tt=null;ve&&ve.level&&(Tt=ee[ve.level]),Je.userLogHandler=null===Ie?null:(ft,bt,...Mt)=>{const Xe=Mt.map(Ct=>{if(null==Ct)return null;if("string"==typeof Ct)return Ct;if("number"==typeof Ct||"boolean"==typeof Ct)return Ct.toString();if(Ct instanceof Error)return Ct.message;try{return JSON.stringify(Ct)}catch(Ke){return null}}).filter(Ct=>Ct).join(" ");bt>=(null!=Tt?Tt:ft.logLevel)&&Ie({level:L[bt].toLowerCase(),message:Xe,args:Mt,type:ft.name})}}}},259:(hn,ut,U)=>{U.d(ut,{C6:()=>_.getApps,KN:()=>_.registerVersion,Mq:()=>_.getApp,ZF:()=>_.initializeApp});var _=U(6881);(0,_.registerVersion)("firebase","9.23.0","app")},9260:(hn,ut,U)=>{U.d(ut,{Z:()=>_.Z});var _=U(3942);_.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(hn,ut,U)=>{U.r(ut);var _=U(5861),L=U(3942),ee=U(1389),re=U(2090),We=(U(6881),U(1877),U(4859));function Be(){return window}function ve(){return(ve=(0,_.Z)(function*(me,ye,z){var ie;const{BuildInfo:se}=Be();(0,ee.as)(ye.sessionId,"AuthEvent did not contain a session ID");const we=yield Ct(ye.sessionId),ct={};return(0,ee.at)()?ct.ibi=se.packageName:(0,ee.au)()?ct.apn=se.packageName:(0,ee.av)(me,"operation-not-supported-in-this-environment"),se.displayName&&(ct.appDisplayName=se.displayName),ct.sessionId=we,(0,ee.aw)(me,z,ye.type,void 0,null!==(ie=ye.eventId)&&void 0!==ie?ie:void 0,ct)})).apply(this,arguments)}function Tt(){return(Tt=(0,_.Z)(function*(me){const{BuildInfo:ye}=Be(),z={};(0,ee.at)()?z.iosBundleId=ye.packageName:(0,ee.au)()?z.androidPackageName=ye.packageName:(0,ee.av)(me,"operation-not-supported-in-this-environment"),yield(0,ee.ax)(me,z)})).apply(this,arguments)}function Mt(){return(Mt=(0,_.Z)(function*(me,ye,z){const{cordova:ie}=Be();let se=()=>{};try{yield new Promise((we,ct)=>{let Bt=null;function on(){var ir;we();const si=null===(ir=ie.plugins.browsertab)||void 0===ir?void 0:ir.close;"function"==typeof si&&si(),"function"==typeof(null==z?void 0:z.close)&&z.close()}function bn(){Bt||(Bt=window.setTimeout(()=>{ct((0,ee.az)(me,"redirect-cancelled-by-user"))},2e3))}function gr(){"visible"===(null==document?void 0:document.visibilityState)&&bn()}ye.addPassiveListener(on),document.addEventListener("resume",bn,!1),(0,ee.au)()&&document.addEventListener("visibilitychange",gr,!1),se=()=>{ye.removePassiveListener(on),document.removeEventListener("resume",bn,!1),document.removeEventListener("visibilitychange",gr,!1),Bt&&window.clearTimeout(Bt)}})}finally{se()}})).apply(this,arguments)}function Ct(me){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,_.Z)(function*(me){const ye=Kt(me),z=yield crypto.subtle.digest("SHA-256",ye);return Array.from(new Uint8Array(z)).map(se=>se.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Kt(me){if((0,ee.as)(/[0-9a-zA-Z]+/.test(me),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(me);const ye=new ArrayBuffer(me.length),z=new Uint8Array(ye);for(let ie=0;ie<me.length;ie++)z[ie]=me.charCodeAt(ie);return z}class xe extends ee.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ye=>{this.resolveInialized=ye})}addPassiveListener(ye){this.passiveListeners.add(ye)}removePassiveListener(ye){this.passiveListeners.delete(ye)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ye){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(ye)),super.onEvent(ye)}initialized(){var ye=this;return(0,_.Z)(function*(){yield ye.initPromise})()}}function It(me){return be.apply(this,arguments)}function be(){return(be=(0,_.Z)(function*(me){const ye=yield An()._get(_n(me));return ye&&(yield An()._remove(_n(me))),ye})).apply(this,arguments)}function Nt(){const me=[],ye="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const ie=Math.floor(Math.random()*ye.length);me.push(ye.charAt(ie))}return me.join("")}function An(){return(0,ee.aC)(ee.b)}function _n(me){return(0,ee.aD)("authEvent",me.config.apiKey,me.name)}function rn(me){if(!(null==me?void 0:me.includes("?")))return{};const[ye,...z]=me.split("?");return(0,re.zd)(z.join("?"))}function un(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ee.az)("no-auth-event")}}function Ee(){var me;return(null===(me=null==self?void 0:self.location)||void 0===me?void 0:me.protocol)||null}function ot(me=(0,re.z$)()){return!("file:"!==Ee()&&"ionic:"!==Ee()&&"capacitor:"!==Ee()||!me.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){try{const me=self.localStorage,ye=ee.aL();if(me)return me.setItem(ye,"1"),me.removeItem(ye),!function Nn(me=(0,re.z$)()){return function pn(){return(0,re.w1)()&&11===(null==document?void 0:document.documentMode)}()||function vn(me=(0,re.z$)()){return/Edge\/\d+/.test(me)}(me)}()||(0,re.hl)()}catch(me){return _r()&&(0,re.hl)()}return!1}function _r(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function Ne(){return"http:"===Ee()||"https:"===Ee()}()||(0,re.ru)()||ot())&&!function qt(){return(0,re.b$)()||(0,re.UG)()}()&&cr()&&!_r()}function Xn(){return ot()&&"undefined"!=typeof document}function sr(){return(sr=(0,_.Z)(function*(){return!!Xn()&&new Promise(me=>{const ye=setTimeout(()=>{me(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ye),me(!0)})})})).apply(this,arguments)}const Ln={LOCAL:"local",NONE:"none",SESSION:"session"},Qr=ee.aA,$i="persistence";function He(me){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,_.Z)(function*(me){yield me._initializationPromise;const ye=At(),z=ee.aD($i,me.config.apiKey,me.name);ye&&ye.setItem(z,me._getPersistence())})).apply(this,arguments)}function At(){var me;try{return(null===(me=function Pn(){return"undefined"!=typeof window?window:null}())||void 0===me?void 0:me.sessionStorage)||null}catch(ye){return null}}const Zt=ee.aA;class sn{constructor(){this.browserResolver=ee.aC(ee.k),this.cordovaResolver=ee.aC(class ar{constructor(){this._redirectPersistence=ee.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ee.aE,this._overrideRedirectResult=ee.aF}_initialize(ye){var z=this;return(0,_.Z)(function*(){const ie=ye._key();let se=z.eventManagers.get(ie);return se||(se=new xe(ye),z.eventManagers.set(ie,se),z.attachCallbackListeners(ye,se)),se})()}_openPopup(ye){(0,ee.av)(ye,"operation-not-supported-in-this-environment")}_openRedirect(ye,z,ie,se){var we=this;return(0,_.Z)(function*(){!function Xe(me){var ye,z,ie,se,we,ct,Bt,on,bn,gr;const ir=Be();(0,ee.aA)("function"==typeof(null===(ye=null==ir?void 0:ir.universalLinks)||void 0===ye?void 0:ye.subscribe),me,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ee.aA)(void 0!==(null===(z=null==ir?void 0:ir.BuildInfo)||void 0===z?void 0:z.packageName),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ee.aA)("function"==typeof(null===(we=null===(se=null===(ie=null==ir?void 0:ir.cordova)||void 0===ie?void 0:ie.plugins)||void 0===se?void 0:se.browsertab)||void 0===we?void 0:we.openUrl),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.aA)("function"==typeof(null===(on=null===(Bt=null===(ct=null==ir?void 0:ir.cordova)||void 0===ct?void 0:ct.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===on?void 0:on.isAvailable),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.aA)("function"==typeof(null===(gr=null===(bn=null==ir?void 0:ir.cordova)||void 0===bn?void 0:bn.InAppBrowser)||void 0===gr?void 0:gr.open),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ye);const ct=yield we._initialize(ye);yield ct.initialized(),ct.resetRedirect(),(0,ee.aG)(),yield we._originValidation(ye);const Bt=function Qe(me,ye,z=null){return{type:ye,eventId:z,urlResponse:null,sessionId:Nt(),postBody:null,tenantId:me.tenantId,error:(0,ee.az)(me,"no-auth-event")}}(ye,ie,se);yield function _t(me,ye){return An()._set(_n(me),ye)}(ye,Bt);const on=yield function Ie(me,ye,z){return ve.apply(this,arguments)}(ye,Bt,z),bn=yield function ft(me){const{cordova:ye}=Be();return new Promise(z=>{ye.plugins.browsertab.isAvailable(ie=>{let se=null;ie?ye.plugins.browsertab.openUrl(me):se=ye.InAppBrowser.open(me,(0,ee.ay)()?"_blank":"_system","location=yes"),z(se)})})}(on);return function bt(me,ye,z){return Mt.apply(this,arguments)}(ye,ct,bn)})()}_isIframeWebStorageSupported(ye,z){throw new Error("Method not implemented.")}_originValidation(ye){const z=ye._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function Je(me){return Tt.apply(this,arguments)}(ye)),this.originValidationPromises[z]}attachCallbackListeners(ye,z){const{universalLinks:ie,handleOpenURL:se,BuildInfo:we}=Be(),ct=setTimeout((0,_.Z)(function*(){yield It(ye),z.onEvent(un())}),500),Bt=function(){var gr=(0,_.Z)(function*(ir){clearTimeout(ct);const si=yield It(ye);let Ei=null;si&&(null==ir?void 0:ir.url)&&(Ei=function Ht(me,ye){var z,ie;const se=function ln(me){const ye=rn(me),z=ye.link?decodeURIComponent(ye.link):void 0,ie=rn(z).link,se=ye.deep_link_id?decodeURIComponent(ye.deep_link_id):void 0;return rn(se).link||se||ie||z||me}(ye);if(se.includes("/__/auth/callback")){const we=rn(se),ct=we.firebaseError?function Fn(me){try{return JSON.parse(me)}catch(ye){return null}}(decodeURIComponent(we.firebaseError)):null,Bt=null===(ie=null===(z=null==ct?void 0:ct.code)||void 0===z?void 0:z.split("auth/"))||void 0===ie?void 0:ie[1],on=Bt?(0,ee.az)(Bt):null;return on?{type:me.type,eventId:me.eventId,tenantId:me.tenantId,error:on,urlResponse:null,sessionId:null,postBody:null}:{type:me.type,eventId:me.eventId,tenantId:me.tenantId,sessionId:me.sessionId,urlResponse:se,postBody:null}}return null}(si,ir.url)),z.onEvent(Ei||un())});return function(si){return gr.apply(this,arguments)}}();void 0!==ie&&"function"==typeof ie.subscribe&&ie.subscribe(null,Bt);const on=se,bn=`${we.packageName.toLowerCase()}://`;Be().handleOpenURL=function(){var gr=(0,_.Z)(function*(ir){if(ir.toLowerCase().startsWith(bn)&&Bt({url:ir}),"function"==typeof on)try{on(ir)}catch(si){console.error(si)}});return function(ir){return gr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ee.a,this._completeRedirectFn=ee.aE,this._overrideRedirectResult=ee.aF}_initialize(ye){var z=this;return(0,_.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(ye)})()}_openPopup(ye,z,ie,se){var we=this;return(0,_.Z)(function*(){return yield we.selectUnderlyingResolver(),we.assertedUnderlyingResolver._openPopup(ye,z,ie,se)})()}_openRedirect(ye,z,ie,se){var we=this;return(0,_.Z)(function*(){return yield we.selectUnderlyingResolver(),we.assertedUnderlyingResolver._openRedirect(ye,z,ie,se)})()}_isIframeWebStorageSupported(ye,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ye,z)}_originValidation(ye){return this.assertedUnderlyingResolver._originValidation(ye)}get _shouldInitProactively(){return Xn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ye=this;return(0,_.Z)(function*(){if(ye.underlyingResolver)return;const z=yield function gn(){return sr.apply(this,arguments)}();ye.underlyingResolver=z?ye.cordovaResolver:ye.browserResolver})()}}function br(me){return me.unwrap()}function Vn(me){return lr(me)}function lr(me){const{_tokenResponse:ye}=me instanceof re.ZR?me.customData:me;if(!ye)return null;if(!(me instanceof re.ZR)&&"temporaryProof"in ye&&"phoneNumber"in ye)return ee.P.credentialFromResult(me);const z=ye.providerId;if(!z||z===ee.p.PASSWORD)return null;let ie;switch(z){case ee.p.GOOGLE:ie=ee.V;break;case ee.p.FACEBOOK:ie=ee.U;break;case ee.p.GITHUB:ie=ee.W;break;case ee.p.TWITTER:ie=ee.Z;break;default:const{oauthIdToken:se,oauthAccessToken:we,oauthTokenSecret:ct,pendingToken:Bt,nonce:on}=ye;return we||ct||se||Bt?Bt?z.startsWith("saml.")?ee.aO._create(z,Bt):ee.L._fromParams({providerId:z,signInMethod:z,pendingToken:Bt,idToken:se,accessToken:we}):new ee.X(z).credential({idToken:se,accessToken:we,rawNonce:on}):null}return me instanceof re.ZR?ie.credentialFromError(me):ie.credentialFromResult(me)}function mr(me,ye){return ye.catch(z=>{throw z instanceof re.ZR&&function yi(me,ye){var z;const ie=null===(z=ye.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===(null==ye?void 0:ye.code))ye.resolver=new er(me,ee.aq(me,ye));else if(ie){const se=lr(ye),we=ye;se&&(we.credential=se,we.tenantId=ie.tenantId||void 0,we.email=ie.email||void 0,we.phoneNumber=ie.phoneNumber||void 0)}}(me,z),z}).then(z=>{const se=z.user;return{operationType:z.operationType,credential:Vn(z),additionalUserInfo:ee.ao(z),user:dr.getOrCreate(se)}})}function nn(me,ye){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,_.Z)(function*(me,ye){const z=yield ye;return{verificationId:z.verificationId,confirm:ie=>mr(me,z.confirm(ie))}})).apply(this,arguments)}class er{constructor(ye,z){this.resolver=z,this.auth=function zn(me){return me.wrapped()}(ye)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ye){return mr(br(this.auth),this.resolver.resolveSignIn(ye))}}class dr{constructor(ye){this._delegate=ye,this.multiFactor=ee.ar(ye)}static getOrCreate(ye){return dr.USER_MAP.has(ye)||dr.USER_MAP.set(ye,new dr(ye)),dr.USER_MAP.get(ye)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ye){return this._delegate.getIdTokenResult(ye)}getIdToken(ye){return this._delegate.getIdToken(ye)}linkAndRetrieveDataWithCredential(ye){return this.linkWithCredential(ye)}linkWithCredential(ye){var z=this;return(0,_.Z)(function*(){return mr(z.auth,ee.a0(z._delegate,ye))})()}linkWithPhoneNumber(ye,z){var ie=this;return(0,_.Z)(function*(){return nn(ie.auth,ee.l(ie._delegate,ye,z))})()}linkWithPopup(ye){var z=this;return(0,_.Z)(function*(){return mr(z.auth,ee.d(z._delegate,ye,sn))})()}linkWithRedirect(ye){var z=this;return(0,_.Z)(function*(){return yield He(ee.aH(z.auth)),ee.g(z._delegate,ye,sn)})()}reauthenticateAndRetrieveDataWithCredential(ye){return this.reauthenticateWithCredential(ye)}reauthenticateWithCredential(ye){var z=this;return(0,_.Z)(function*(){return mr(z.auth,ee.a1(z._delegate,ye))})()}reauthenticateWithPhoneNumber(ye,z){return nn(this.auth,ee.r(this._delegate,ye,z))}reauthenticateWithPopup(ye){return mr(this.auth,ee.e(this._delegate,ye,sn))}reauthenticateWithRedirect(ye){var z=this;return(0,_.Z)(function*(){return yield He(ee.aH(z.auth)),ee.h(z._delegate,ye,sn)})()}sendEmailVerification(ye){return ee.ae(this._delegate,ye)}unlink(ye){var z=this;return(0,_.Z)(function*(){return yield ee.an(z._delegate,ye),z})()}updateEmail(ye){return ee.aj(this._delegate,ye)}updatePassword(ye){return ee.ak(this._delegate,ye)}updatePhoneNumber(ye){return ee.u(this._delegate,ye)}updateProfile(ye){return ee.ai(this._delegate,ye)}verifyBeforeUpdateEmail(ye,z){return ee.af(this._delegate,ye,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}dr.USER_MAP=new WeakMap;const Zn=ee.aA;let Pr=(()=>{class me{constructor(z,ie){if(this.app=z,ie.isInitialized())return this._delegate=ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:se}=z.options;Zn(se,"invalid-api-key",{appName:z.name}),Zn(se,"invalid-api-key",{appName:z.name});const we="undefined"!=typeof window?sn:void 0;this._delegate=ie.initialize({options:{persistence:Jr(se,z.name),popupRedirectResolver:we}}),this._delegate._updateErrorMap(ee.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?dr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,ie){ee.I(this._delegate,z,ie)}applyActionCode(z){return ee.a5(this._delegate,z)}checkActionCode(z){return ee.a6(this._delegate,z)}confirmPasswordReset(z,ie){return ee.a4(this._delegate,z,ie)}createUserWithEmailAndPassword(z,ie){var se=this;return(0,_.Z)(function*(){return mr(se._delegate,ee.a8(se._delegate,z,ie))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return ee.ad(this._delegate,z)}isSignInWithEmailLink(z){return ee.ab(this._delegate,z)}getRedirectResult(){var z=this;return(0,_.Z)(function*(){Zn(jn(),z._delegate,"operation-not-supported-in-this-environment");const ie=yield ee.j(z._delegate,sn);return ie?mr(z._delegate,Promise.resolve(ie)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function st(me,ye){(0,ee.aH)(me)._logFramework(ye)}(this._delegate,z)}onAuthStateChanged(z,ie,se){const{next:we,error:ct,complete:Bt}=jr(z,ie,se);return this._delegate.onAuthStateChanged(we,ct,Bt)}onIdTokenChanged(z,ie,se){const{next:we,error:ct,complete:Bt}=jr(z,ie,se);return this._delegate.onIdTokenChanged(we,ct,Bt)}sendSignInLinkToEmail(z,ie){return ee.aa(this._delegate,z,ie)}sendPasswordResetEmail(z,ie){return ee.a3(this._delegate,z,ie||void 0)}setPersistence(z){var ie=this;return(0,_.Z)(function*(){let se;switch(function xt(me,ye){Qr(Object.values(Ln).includes(ye),me,"invalid-persistence-type"),(0,re.b$)()?Qr(ye!==Ln.SESSION,me,"unsupported-persistence-type"):(0,re.UG)()?Qr(ye===Ln.NONE,me,"unsupported-persistence-type"):_r()?Qr(ye===Ln.NONE||ye===Ln.LOCAL&&(0,re.hl)(),me,"unsupported-persistence-type"):Qr(ye===Ln.NONE||cr(),me,"unsupported-persistence-type")}(ie._delegate,z),z){case Ln.SESSION:se=ee.a;break;case Ln.LOCAL:se=(yield ee.aC(ee.i)._isAvailable())?ee.i:ee.b;break;case Ln.NONE:se=ee.N;break;default:return ee.av("argument-error",{appName:ie._delegate.name})}return ie._delegate.setPersistence(se)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return mr(this._delegate,ee._(this._delegate))}signInWithCredential(z){return mr(this._delegate,ee.$(this._delegate,z))}signInWithCustomToken(z){return mr(this._delegate,ee.a2(this._delegate,z))}signInWithEmailAndPassword(z,ie){return mr(this._delegate,ee.a9(this._delegate,z,ie))}signInWithEmailLink(z,ie){return mr(this._delegate,ee.ac(this._delegate,z,ie))}signInWithPhoneNumber(z,ie){return nn(this._delegate,ee.s(this._delegate,z,ie))}signInWithPopup(z){var ie=this;return(0,_.Z)(function*(){return Zn(jn(),ie._delegate,"operation-not-supported-in-this-environment"),mr(ie._delegate,ee.c(ie._delegate,z,sn))})()}signInWithRedirect(z){var ie=this;return(0,_.Z)(function*(){return Zn(jn(),ie._delegate,"operation-not-supported-in-this-environment"),yield He(ie._delegate),ee.f(ie._delegate,z,sn)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return ee.a7(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return me.Persistence=Ln,me})();function jr(me,ye,z){let ie=me;"function"!=typeof me&&({next:ie,error:ye,complete:z}=me);const se=ie;return{next:ct=>se(ct&&dr.getOrCreate(ct)),error:ye,complete:z}}function Jr(me,ye){const z=function ht(me,ye){const z=At();if(!z)return[];const ie=ee.aD($i,me,ye);switch(z.getItem(ie)){case Ln.NONE:return[ee.N];case Ln.LOCAL:return[ee.i,ee.a];case Ln.SESSION:return[ee.a];default:return[]}}(me,ye);if("undefined"!=typeof self&&!z.includes(ee.i)&&z.push(ee.i),"undefined"!=typeof window)for(const ie of[ee.b,ee.a])z.includes(ie)||z.push(ie);return z.includes(ee.N)||z.push(ee.N),z}class Gi{constructor(){this.providerId="phone",this._delegate=new ee.P(br(L.Z.auth()))}static credential(ye,z){return ee.P.credential(ye,z)}verifyPhoneNumber(ye,z){return this._delegate.verifyPhoneNumber(ye,z)}unwrap(){return this._delegate}}Gi.PHONE_SIGN_IN_METHOD=ee.P.PHONE_SIGN_IN_METHOD,Gi.PROVIDER_ID=ee.P.PROVIDER_ID;const Ni=ee.aA;class Br{constructor(ye,z,ie=L.Z.app()){var se;Ni(null===(se=ie.options)||void 0===se?void 0:se.apiKey,"invalid-api-key",{appName:ie.name}),this._delegate=new ee.R(ye,z,ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Me(me){me.INTERNAL.registerComponent(new We.wA("auth-compat",ye=>{const z=ye.getProvider("app-compat").getImmediate(),ie=ye.getProvider("auth");return new Pr(z,ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee.A.EMAIL_SIGNIN,PASSWORD_RESET:ee.A.PASSWORD_RESET,RECOVER_EMAIL:ee.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee.A.VERIFY_EMAIL}},EmailAuthProvider:ee.Q,FacebookAuthProvider:ee.U,GithubAuthProvider:ee.W,GoogleAuthProvider:ee.V,OAuthProvider:ee.X,SAMLAuthProvider:ee.Y,PhoneAuthProvider:Gi,PhoneMultiFactorGenerator:ee.m,RecaptchaVerifier:Br,TwitterAuthProvider:ee.Z,Auth:Pr,AuthCredential:ee.J,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),me.registerVersion("@firebase/auth-compat","0.4.2")}(L.Z)},1591:(hn,ut,U)=>{U.d(ut,{Jr:()=>_.Jr,N8:()=>_.N8,S1:()=>_.S1,U2:()=>_.U2,Vx:()=>_.Vx,iH:()=>_.iH,jM:()=>_.jM,t8:()=>_.t8,yv:()=>_.yv});var _=U(1627)},2290:(hn,ut,U)=>{U.d(ut,{Rh:()=>ar,_W:()=>ln});var _=U(5e3),L=U(1777),ee=U(7579),re=U(9808),Pe=U(2313);const je=["toast-component",""];function We(Te,Re){if(1&Te){const Ee=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(Ee),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA()()}}function Be(Te,Re){if(1&Te&&(_.ynx(0),_._uU(1),_.BQk()),2&Te){const Ee=_.oxw(2);_.xp6(1),_.hij("[",Ee.duplicatesCount+1,"]")}}function rt(Te,Re){if(1&Te&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,Be,2,1,"ng-container",4),_.qZA()),2&Te){const Ee=_.oxw();_.Tol(Ee.options.titleClass),_.uIk("aria-label",Ee.title),_.xp6(1),_.hij(" ",Ee.title," "),_.xp6(1),_.Q6J("ngIf",Ee.duplicatesCount)}}function Ie(Te,Re){if(1&Te&&_._UZ(0,"div",7),2&Te){const Ee=_.oxw();_.Tol(Ee.options.messageClass),_.Q6J("innerHTML",Ee.message,_.oJD)}}function ve(Te,Re){if(1&Te&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&Te){const Ee=_.oxw();_.Tol(Ee.options.messageClass),_.uIk("aria-label",Ee.message),_.xp6(1),_.hij(" ",Ee.message," ")}}function Je(Te,Re){if(1&Te&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&Te){const Ee=_.oxw();_.xp6(1),_.Udp("width",Ee.width+"%")}}function Tt(Te,Re){if(1&Te){const Ee=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(Ee),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA()()}}function ft(Te,Re){if(1&Te&&(_.ynx(0),_._uU(1),_.BQk()),2&Te){const Ee=_.oxw(2);_.xp6(1),_.hij("[",Ee.duplicatesCount+1,"]")}}function bt(Te,Re){if(1&Te&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,ft,2,1,"ng-container",4),_.qZA()),2&Te){const Ee=_.oxw();_.Tol(Ee.options.titleClass),_.uIk("aria-label",Ee.title),_.xp6(1),_.hij(" ",Ee.title," "),_.xp6(1),_.Q6J("ngIf",Ee.duplicatesCount)}}function Mt(Te,Re){if(1&Te&&_._UZ(0,"div",7),2&Te){const Ee=_.oxw();_.Tol(Ee.options.messageClass),_.Q6J("innerHTML",Ee.message,_.oJD)}}function Xe(Te,Re){if(1&Te&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&Te){const Ee=_.oxw();_.Tol(Ee.options.messageClass),_.uIk("aria-label",Ee.message),_.xp6(1),_.hij(" ",Ee.message," ")}}function Ct(Te,Re){if(1&Te&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&Te){const Ee=_.oxw();_.xp6(1),_.Udp("width",Ee.width+"%")}}class it{constructor(Re,Ee){this.component=Re,this.injector=Ee}attach(Re,Ee){return this._attachedHost=Re,Re.attach(this,Ee)}detach(){const Re=this._attachedHost;if(Re)return this._attachedHost=void 0,Re.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Re){this._attachedHost=Re}}class Qe{constructor(Re,Ee,Ne,ot,qt,pn){this.toastId=Re,this.config=Ee,this.message=Ne,this.title=ot,this.toastType=qt,this.toastRef=pn,this._onTap=new ee.x,this._onAction=new ee.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Re){this._onAction.next(Re)}onAction(){return this._onAction.asObservable()}}const _t={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},It=new _.OlP("ToastConfig");class be{constructor(Re){this._overlayRef=Re,this.duplicatesCount=0,this._afterClosed=new ee.x,this._activate=new ee.x,this._manualClose=new ee.x,this._resetTimeout=new ee.x,this._countDuplicate=new ee.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Re,Ee){Re&&this._resetTimeout.next(),Ee&&this._countDuplicate.next(++this.duplicatesCount)}}class Ht{constructor(Re,Ee){this._toastPackage=Re,this._parentInjector=Ee}get(Re,Ee,Ne){return Re===Qe?this._toastPackage:this._parentInjector.get(Re,Ee,Ne)}}class Nt extends class xe{attach(Re,Ee){return this._attachedPortal=Re,this.attachComponentPortal(Re,Ee)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Re){this._disposeFn=Re}}{constructor(Re,Ee,Ne){super(),this._hostDomElement=Re,this._componentFactoryResolver=Ee,this._appRef=Ne}attachComponentPortal(Re,Ee){const Ne=this._componentFactoryResolver.resolveComponentFactory(Re.component);let ot;return ot=Ne.create(Re.injector),this._appRef.attachView(ot.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ot.hostView),ot.destroy()}),Ee?this._hostDomElement.insertBefore(this._getComponentRootNode(ot),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(ot)),ot}_getComponentRootNode(Re){return Re.hostView.rootNodes[0]}}class An{constructor(Re){this._portalHost=Re}attach(Re,Ee=!0){return this._portalHost.attach(Re,Ee)}detach(){return this._portalHost.detach()}}let _n=(()=>{class Te{constructor(Ee){this._document=Ee}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Ee=this._document.createElement("div");Ee.classList.add("overlay-container"),Ee.setAttribute("aria-live","polite"),this._document.body.appendChild(Ee),this._containerElement=Ee}}return Te.\u0275fac=function(Ee){return new(Ee||Te)(_.LFG(re.K0))},Te.\u0275prov=_.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Fn=(()=>{class Te{constructor(Ee,Ne,ot,qt){this._overlayContainer=Ee,this._componentFactoryResolver=Ne,this._appRef=ot,this._document=qt,this._paneElements=new Map}create(Ee,Ne){return this._createOverlayRef(this.getPaneElement(Ee,Ne))}getPaneElement(Ee="",Ne){return this._paneElements.get(Ne)||this._paneElements.set(Ne,{}),this._paneElements.get(Ne)[Ee]||(this._paneElements.get(Ne)[Ee]=this._createPaneElement(Ee,Ne)),this._paneElements.get(Ne)[Ee]}_createPaneElement(Ee,Ne){const ot=this._document.createElement("div");return ot.id="toast-container",ot.classList.add(Ee),ot.classList.add("toast-container"),Ne?Ne.getContainerElement().appendChild(ot):this._overlayContainer.getContainerElement().appendChild(ot),ot}_createPortalHost(Ee){return new Nt(Ee,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Ee){return new An(this._createPortalHost(Ee))}}return Te.\u0275fac=function(Ee){return new(Ee||Te)(_.LFG(_n),_.LFG(_._Vd),_.LFG(_.z2F),_.LFG(re.K0))},Te.\u0275prov=_.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),ln=(()=>{class Te{constructor(Ee,Ne,ot,qt,pn){this.overlay=Ne,this._injector=ot,this.sanitizer=qt,this.ngZone=pn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Ee.default),Ee.config),Ee.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Ee.default.iconClasses),Ee.config.iconClasses))}show(Ee,Ne,ot={},qt=""){return this._preBuildNotification(qt,Ee,Ne,this.applyConfig(ot))}success(Ee,Ne,ot={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Ee,Ne,this.applyConfig(ot))}error(Ee,Ne,ot={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Ee,Ne,this.applyConfig(ot))}info(Ee,Ne,ot={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Ee,Ne,this.applyConfig(ot))}warning(Ee,Ne,ot={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Ee,Ne,this.applyConfig(ot))}clear(Ee){for(const Ne of this.toasts)if(void 0!==Ee){if(Ne.toastId===Ee)return void Ne.toastRef.manualClose()}else Ne.toastRef.manualClose()}remove(Ee){const Ne=this._findToast(Ee);if(!Ne||(Ne.activeToast.toastRef.close(),this.toasts.splice(Ne.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const ot=this.toasts[this.currentlyActive].toastRef;ot.isInactive()||(this.currentlyActive=this.currentlyActive+1,ot.activate())}return!0}findDuplicate(Ee="",Ne="",ot,qt){const{includeTitleDuplicates:pn}=this.toastrConfig;for(const vn of this.toasts){const Nn=pn&&vn.title===Ee;if((!pn||Nn)&&vn.message===Ne)return vn.toastRef.onDuplicate(ot,qt),vn}return null}applyConfig(Ee={}){return Object.assign(Object.assign({},this.toastrConfig),Ee)}_findToast(Ee){for(let Ne=0;Ne<this.toasts.length;Ne++)if(this.toasts[Ne].toastId===Ee)return{index:Ne,activeToast:this.toasts[Ne]};return null}_preBuildNotification(Ee,Ne,ot,qt){return qt.onActivateTick?this.ngZone.run(()=>this._buildNotification(Ee,Ne,ot,qt)):this._buildNotification(Ee,Ne,ot,qt)}_buildNotification(Ee,Ne,ot,qt){if(!qt.toastComponent)throw new Error("toastComponent required");const pn=this.findDuplicate(ot,Ne,this.toastrConfig.resetTimeoutOnDuplicate&&qt.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&ot||Ne)&&this.toastrConfig.preventDuplicates&&null!==pn)return pn;this.previousToastMessage=Ne;let vn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(vn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Nn=this.overlay.create(qt.positionClass,this.overlayContainer);this.index=this.index+1;let cr=Ne;Ne&&qt.enableHtml&&(cr=this.sanitizer.sanitize(_.q3G.HTML,Ne));const _r=new be(Nn),jn=new Qe(this.index,qt,cr,ot,Ee,_r),Xn=new Ht(jn,this._injector),gn=new it(qt.toastComponent,Xn),sr=Nn.attach(gn,this.toastrConfig.newestOnTop);_r.componentInstance=sr.instance;const Pn={toastId:this.index,title:ot||"",message:Ne||"",toastRef:_r,onShown:_r.afterActivate(),onHidden:_r.afterClosed(),onTap:jn.onTap(),onAction:jn.onAction(),portal:sr};return vn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Pn.toastRef.activate()})),this.toasts.push(Pn),Pn}}return Te.\u0275fac=function(Ee){return new(Ee||Te)(_.LFG(It),_.LFG(Fn),_.LFG(_.zs3),_.LFG(Pe.H7),_.LFG(_.R0b))},Te.\u0275prov=_.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),rn=(()=>{class Te{constructor(Ee,Ne,ot){this.toastrService=Ee,this.toastPackage=Ne,this.ngZone=ot,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=Ne.message,this.title=Ne.title,this.options=Ne.config,this.originalTimeout=Ne.config.timeOut,this.toastClasses=`${Ne.toastType} ${Ne.config.toastClass}`,this.sub=Ne.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ne.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ne.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ne.toastRef.countDuplicate().subscribe(qt=>{this.duplicatesCount=qt})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ee=(new Date).getTime();this.width=(this.hideTime-Ee)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Ee,Ne){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Ee),Ne)):this.timeout=setTimeout(()=>Ee(),Ne)}outsideInterval(Ee,Ne){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Ee),Ne)):this.intervalId=setInterval(()=>Ee(),Ne)}runInsideAngular(Ee){this.ngZone?this.ngZone.run(()=>Ee()):Ee()}}return Te.\u0275fac=function(Ee){return new(Ee||Te)(_.Y36(ln),_.Y36(Qe),_.Y36(_.R0b))},Te.\u0275cmp=_.Xpm({type:Te,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Ee,Ne){1&Ee&&_.NdJ("click",function(){return Ne.tapToast()})("mouseenter",function(){return Ne.stickAround()})("mouseleave",function(){return Ne.delayedHideToast()}),2&Ee&&(_.d8E("@flyInOut",Ne.state),_.Tol(Ne.toastClasses),_.Udp("display",Ne.displayStyle))},attrs:je,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ee,Ne){1&Ee&&(_.YNc(0,We,3,0,"button",0),_.YNc(1,rt,3,5,"div",1),_.YNc(2,Ie,1,3,"div",2),_.YNc(3,ve,2,4,"div",3),_.YNc(4,Je,2,2,"div",4)),2&Ee&&(_.Q6J("ngIf",Ne.options.closeButton),_.xp6(1),_.Q6J("ngIf",Ne.title),_.xp6(1),_.Q6J("ngIf",Ne.message&&Ne.options.enableHtml),_.xp6(1),_.Q6J("ngIf",Ne.message&&!Ne.options.enableHtml),_.xp6(1),_.Q6J("ngIf",Ne.options.progressBar))},directives:[re.O5],encapsulation:2,data:{animation:[(0,L.X$)("flyInOut",[(0,L.SB)("inactive",(0,L.oB)({opacity:0})),(0,L.SB)("active",(0,L.oB)({opacity:1})),(0,L.SB)("removed",(0,L.oB)({opacity:0})),(0,L.eR)("inactive => active",(0,L.jt)("{{ easeTime }}ms {{ easing }}")),(0,L.eR)("active => removed",(0,L.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Te})();const Ot=Object.assign(Object.assign({},_t),{toastComponent:rn});let ar=(()=>{class Te{static forRoot(Ee={}){return{ngModule:Te,providers:[{provide:It,useValue:{default:Ot,config:Ee}}]}}}return Te.\u0275fac=function(Ee){return new(Ee||Te)},Te.\u0275mod=_.oAB({type:Te}),Te.\u0275inj=_.cJS({imports:[[re.ez]]}),Te})(),un=(()=>{class Te{constructor(Ee,Ne,ot){this.toastrService=Ee,this.toastPackage=Ne,this.appRef=ot,this.width=-1,this.toastClasses="",this.state="inactive",this.message=Ne.message,this.title=Ne.title,this.options=Ne.config,this.originalTimeout=Ne.config.timeOut,this.toastClasses=`${Ne.toastType} ${Ne.config.toastClass}`,this.sub=Ne.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ne.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ne.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ne.toastRef.countDuplicate().subscribe(qt=>{this.duplicatesCount=qt})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ee=(new Date).getTime();this.width=(this.hideTime-Ee)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Te.\u0275fac=function(Ee){return new(Ee||Te)(_.Y36(ln),_.Y36(Qe),_.Y36(_.z2F))},Te.\u0275cmp=_.Xpm({type:Te,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Ee,Ne){1&Ee&&_.NdJ("click",function(){return Ne.tapToast()})("mouseenter",function(){return Ne.stickAround()})("mouseleave",function(){return Ne.delayedHideToast()}),2&Ee&&(_.Tol(Ne.toastClasses),_.Udp("display",Ne.displayStyle))},attrs:je,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ee,Ne){1&Ee&&(_.YNc(0,Tt,3,0,"button",0),_.YNc(1,bt,3,5,"div",1),_.YNc(2,Mt,1,3,"div",2),_.YNc(3,Xe,2,4,"div",3),_.YNc(4,Ct,2,2,"div",4)),2&Ee&&(_.Q6J("ngIf",Ne.options.closeButton),_.xp6(1),_.Q6J("ngIf",Ne.title),_.xp6(1),_.Q6J("ngIf",Ne.message&&Ne.options.enableHtml),_.xp6(1),_.Q6J("ngIf",Ne.message&&!Ne.options.enableHtml),_.xp6(1),_.Q6J("ngIf",Ne.options.progressBar))},directives:[re.O5],encapsulation:2}),Te})();Object.assign(Object.assign({},_t),{toastComponent:un})},5861:(hn,ut,U)=>{function _(ee,re,Pe,je,We,Be,rt){try{var Ie=ee[Be](rt),ve=Ie.value}catch(Je){return void Pe(Je)}Ie.done?re(ve):Promise.resolve(ve).then(je,We)}function L(ee){return function(){var re=this,Pe=arguments;return new Promise(function(je,We){var Be=ee.apply(re,Pe);function rt(ve){_(Be,je,We,rt,Ie,"next",ve)}function Ie(ve){_(Be,je,We,rt,Ie,"throw",ve)}rt(void 0)})}}U.d(ut,{Z:()=>L})},7582:(hn,ut,U)=>{function re(st,nt){var Te={};for(var Re in st)Object.prototype.hasOwnProperty.call(st,Re)&&nt.indexOf(Re)<0&&(Te[Re]=st[Re]);if(null!=st&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(Re=Object.getOwnPropertySymbols(st);Ee<Re.length;Ee++)nt.indexOf(Re[Ee])<0&&Object.prototype.propertyIsEnumerable.call(st,Re[Ee])&&(Te[Re[Ee]]=st[Re[Ee]])}return Te}function Je(st,nt,Te,Re){return new(Te||(Te=Promise))(function(Ne,ot){function qt(Nn){try{vn(Re.next(Nn))}catch(cr){ot(cr)}}function pn(Nn){try{vn(Re.throw(Nn))}catch(cr){ot(cr)}}function vn(Nn){Nn.done?Ne(Nn.value):function Ee(Ne){return Ne instanceof Te?Ne:new Te(function(ot){ot(Ne)})}(Nn.value).then(qt,pn)}vn((Re=Re.apply(st,nt||[])).next())})}function it(st){return this instanceof it?(this.v=st,this):new it(st)}function xe(st,nt,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,Re=Te.apply(st,nt||[]),Ne=[];return Ee=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),qt("next"),qt("throw"),qt("return",function ot(jn){return function(Xn){return Promise.resolve(Xn).then(jn,cr)}}),Ee[Symbol.asyncIterator]=function(){return this},Ee;function qt(jn,Xn){Re[jn]&&(Ee[jn]=function(gn){return new Promise(function(sr,Pn){Ne.push([jn,gn,sr,Pn])>1||pn(jn,gn)})},Xn&&(Ee[jn]=Xn(Ee[jn])))}function pn(jn,Xn){try{!function vn(jn){jn.value instanceof it?Promise.resolve(jn.value.v).then(Nn,cr):_r(Ne[0][2],jn)}(Re[jn](Xn))}catch(gn){_r(Ne[0][3],gn)}}function Nn(jn){pn("next",jn)}function cr(jn){pn("throw",jn)}function _r(jn,Xn){jn(Xn),Ne.shift(),Ne.length&&pn(Ne[0][0],Ne[0][1])}}function _t(st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,nt=st[Symbol.asyncIterator];return nt?nt.call(st):(st=function Mt(st){var nt="function"==typeof Symbol&&Symbol.iterator,Te=nt&&st[nt],Re=0;if(Te)return Te.call(st);if(st&&"number"==typeof st.length)return{next:function(){return st&&Re>=st.length&&(st=void 0),{value:st&&st[Re++],done:!st}}};throw new TypeError(nt?"Object is not iterable.":"Symbol.iterator is not defined.")}(st),Te={},Re("next"),Re("throw"),Re("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function Re(Ne){Te[Ne]=st[Ne]&&function(ot){return new Promise(function(qt,pn){!function Ee(Ne,ot,qt,pn){Promise.resolve(pn).then(function(vn){Ne({value:vn,done:qt})},ot)}(qt,pn,(ot=st[Ne](ot)).done,ot.value)})}}}U.d(ut,{FC:()=>xe,KL:()=>_t,_T:()=>re,mG:()=>Je,qq:()=>it}),"function"==typeof SuppressedError&&SuppressedError}},hn=>{hn(hn.s=6867)}]);