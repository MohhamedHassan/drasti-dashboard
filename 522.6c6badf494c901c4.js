"use strict";(self.webpackChunkdrasti_teacher_dashboard=self.webpackChunkdrasti_teacher_dashboard||[]).push([[522],{522:(I,u,o)=>{o.r(u),o.d(u,{AllMsgsModule:()=>b});var l=o(9808),i=o(2729),t=o(5e3),c=o(9547),g=o(2340),p=o(520);let m=(()=>{class e{constructor(s){this.http=s}getTeacherMaterials(){return this.http.get(`${g.N.apiUrl}teacher/materials`)}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(p.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=o(507),f=o(8424);function M(e,n){1&e&&t._UZ(0,"app-loading")}function v(e,n){1&e&&t._UZ(0,"span",14)}const A=function(e,n){return{studentId:e,studentName:n}};function x(e,n){if(1&e&&(t.TgZ(0,"div",6)(1,"div",7),t._UZ(2,"img",8),t.TgZ(3,"div")(4,"h4",9),t._uU(5),t.qZA(),t.TgZ(6,"span",10),t._uU(7),t.qZA(),t.TgZ(8,"h6",11),t._uU(9),t.qZA(),t.TgZ(10,"p",12)(11,"small"),t._uU(12),t.ALo(13,"date"),t.qZA()()()(),t.YNc(14,v,1,0,"span",13),t.qZA()),2&e){const s=n.$implicit;t.Q6J("queryParams",t.WLB(10,A,s.userId,s.userName))("routerLink","/material-chat/"+(null==s?null:s.materialId)+"/"+(null==s?null:s.materialName)),t.xp6(5),t.Oqu(s.materialName),t.xp6(2),t.Oqu(s.lastMessage),t.xp6(2),t.Oqu(s.userName),t.xp6(3),t.Oqu(t.xi3(13,7,s.lastMessageDate,"d MMMM, h:mm a")),t.xp6(2),t.Q6J("ngIf",s.hasUnread)}}function y(e,n){1&e&&(t.TgZ(0,"p",15),t._uU(1," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a "),t.qZA())}(0,l.qS)(c.Z);const Z=[{path:"",component:(()=>{class e{constructor(s,a){this.http=s,this.chatService=a,this.studentsList=[],this.loading=!0,this.teacherId=localStorage.getItem("userid")||"",this.materials=[],this.studentsPerMaterial={},this.noMsgs=!0}ngOnInit(){this.http.getTeacherMaterials().subscribe(s=>{this.materials=null==s?void 0:s.data,console.log(s);let a=this.materials.map(r=>{var d;return null===(d=null==r?void 0:r.material)||void 0===d?void 0:d.id});console.log(a),this.chatService.getTeacherChatList(a,localStorage.getItem("userid")||"",r=>{this.studentsList=r,this.loading=!1})})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(m),t.Y36(h.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-all-msgs"]],features:[t._Bn([{provide:t.soG,useValue:"ar"}])],decls:6,vars:3,consts:[[4,"ngIf"],[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-lg-8"],["style","\n          border-radius: 10px;\n          padding: 10px;\n          margin-bottom: 10px;\n          cursor: pointer;\n          border: 1px solid rgb(245 236 236);\n        ","class","student-item",3,"queryParams","routerLink",4,"ngFor","ngForOf"],["style","font-size: 20px","class","text-center fw-bold text-secondary m-2",4,"ngIf"],[1,"student-item",2,"border-radius","10px","padding","10px","margin-bottom","10px","cursor","pointer","border","1px solid rgb(245 236 236)",3,"queryParams","routerLink"],[2,"display","flex","flex-wrap","wrap"],["src","assets/logo.png","alt","",2,"width","50px","height","50px","object-fit","cover"],[2,"margin","0"],[2,"display","block"],[2,"margin","5px 0"],[2,"margin","0","color","gray"],["class","unread-dot",4,"ngIf"],[1,"unread-dot"],[1,"text-center","fw-bold","text-secondary","m-2",2,"font-size","20px"]],template:function(s,a){1&s&&(t.YNc(0,M,1,0,"app-loading",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,x,15,13,"div",4),t.qZA()(),t.YNc(5,y,2,0,"p",5),t.qZA()),2&s&&(t.Q6J("ngIf",a.loading),t.xp6(4),t.Q6J("ngForOf",a.studentsList),t.xp6(1),t.Q6J("ngIf",!(a.loading||null!=a.studentsList&&a.studentsList.length)))},directives:[l.O5,f.N,l.sg,i.rH],pipes:[l.uU],styles:[".material-block[_ngcontent-%COMP%]{margin-bottom:20px}.student-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 0;width:100%;gap:16px}.unread-dot[_ngcontent-%COMP%]{background-color:#920f11;display:block;width:10px;height:10px;border-radius:50%}"]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.Bz.forChild(Z)],i.Bz]}),e})();var T=o(4466);let b=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,C,T.m]]}),e})()}}]);