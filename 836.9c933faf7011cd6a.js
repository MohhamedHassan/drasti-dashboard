"use strict";(self.webpackChunkdrasti_teacher_dashboard=self.webpackChunkdrasti_teacher_dashboard||[]).push([[836],{7836:(N,f,l)=>{l.r(f),l.d(f,{AuthModule:()=>M});var g=l(9808),p=l(2729),a=l(2382),Z=l(259),v=l(1591),b=l(4004),o=l(5e3),A=l(2313),F=l(2290),T=l(5089),C=l(2169),I=l(507);function y(n,s){1&n&&(o.TgZ(0,"p",22),o._uU(1," \u064a\u0631\u062c\u0649 \u0627\u062f\u062e\u0627\u0644 \u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0635\u062d\u064a\u062d "),o.qZA())}function S(n,s){1&n&&(o.TgZ(0,"p",23),o._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),o.qZA())}function J(n,s){1&n&&o._UZ(0,"i",24)}const U=function(n,s){return{"fa-eye":n,"fa-eye-slash":s}},w=[{path:"login",component:(()=>{class n{constructor(i,t,u,e,d,r,m){this.fb=i,this.title=t,this.router=u,this.toastr=e,this.authservice=d,this.homeService=r,this.chatService=m,this.password=!0,this.returnPassword=!1,this.loginForm=new a.cw({}),this.submited=!1,this.loginloading=!1}ngOnInit(){this.app=(0,Z.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,v.N8)(this.app),this.loginForm=this.fb.group({email_phone:["",[a.kI.required,a.kI.pattern(/^[569\u0665\u0666\u0669][\u0660-\u0669]{7}$|^[569\u0665\u0666\u0669]\d{7}$/)]],password:["",a.kI.required]})}login(i){this.submited=!0,this.loginForm.valid&&(this.loginloading=!0,this.authservice.login(i).subscribe(t=>{var u,e,d,r,m,h,c;localStorage.setItem("namnamToken",null===(u=null==t?void 0:t.meta)||void 0===u?void 0:u.token),localStorage.setItem("userid",null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.id),localStorage.setItem("username",`${null===(d=null==t?void 0:t.data)||void 0===d?void 0:d.fname} ${null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.lname}`),localStorage.setItem("name_in_web",`${null===(m=null==t?void 0:t.data)||void 0===m?void 0:m.name_in_web} `),(0,v.t8)((0,v.iH)(this.db,`Auth/${null===(h=null==t?void 0:t.data)||void 0===h?void 0:h.id}`),{user_token:null===(c=null==t?void 0:t.meta)||void 0===c?void 0:c.token}),this.listenForTeacherMessages(),this.loginloading=!1,this.router.navigate(["/"]),this.toastr.success("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0628\u0646\u062c\u0627\u062d")},t=>{this.loginloading=!1}))}listenForTeacherMessages(){this.homeService.getHomeStages().pipe((0,b.U)(i=>{var t;let u=[];return(null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.length)&&(null==i||i.data.forEach(e=>{var d;u.push(String(null===(d=null==e?void 0:e.material)||void 0===d?void 0:d.id))})),u})).subscribe(i=>{this.chatService.listenForNewMessages(i,localStorage.getItem("userid")||"")})}}return n.\u0275fac=function(i){return new(i||n)(o.Y36(a.qu),o.Y36(A.Dx),o.Y36(p.F0),o.Y36(F._W),o.Y36(T.e),o.Y36(C.Y),o.Y36(I.a))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:32,vars:10,consts:[[1,"login",2,"min-height","100vh"],[1,"container"],[1,"row"],[1,"col-md-2","col-lg-3"],[1,"col-md-8","col-lg-6"],[1,"py-5"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","email_phone"],[1,"redstar"],[1,"d-flex","align-items-center","mb-3"],["min","1","formControlName","email_phone",1,"form-control","phonenumberRight"],["value","+965","readonly","",1,"form-control","phonenumberLeft"],["class","text-danger my-2",4,"ngIf"],["for","password"],[1,"position-relative"],["formControlName","password",1,"form-control",3,"type"],[1,"fa-solid",2,"position","absolute","top","11px","left","11px","cursor","pointer",3,"ngClass","click"],["class","text-danger my-1",4,"ngIf"],[1,"bluButton","submitinput","w-100","text-center",3,"disabled"],["class","fas fa-circle-notch fa-spin",4,"ngIf"],[1,"col-md-2","col-md-3"],[1,"text-danger","my-2"],[1,"text-danger","my-1"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(i,t){if(1&i&&(o.TgZ(0,"section",0)(1,"div",1)(2,"div",2),o._UZ(3,"div",3),o.TgZ(4,"div",4)(5,"div",5)(6,"h2"),o._uU(7,"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"),o.qZA(),o.TgZ(8,"form",6),o.NdJ("ngSubmit",function(){return t.login(t.loginForm.value)}),o.TgZ(9,"div",7)(10,"label",8),o._uU(11," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 "),o.TgZ(12,"span",9),o._uU(13,"*"),o.qZA()(),o.TgZ(14,"div",10),o._UZ(15,"input",11)(16,"input",12),o.qZA(),o.YNc(17,y,2,0,"p",13),o.qZA(),o.TgZ(18,"div",7)(19,"label",14),o._uU(20," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),o.TgZ(21,"span",9),o._uU(22,"*"),o.qZA()(),o.TgZ(23,"div",15),o._UZ(24,"input",16),o.TgZ(25,"i",17),o.NdJ("click",function(){return t.password=!t.password}),o.qZA()(),o.YNc(26,S,2,0,"p",18),o.qZA(),o.TgZ(27,"div",7)(28,"button",19),o._uU(29," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 "),o.YNc(30,J,1,0,"i",20),o.qZA()()()()(),o._UZ(31,"div",21),o.qZA()()()),2&i){let u,e;o.xp6(8),o.Q6J("formGroup",t.loginForm),o.xp6(9),o.Q6J("ngIf",null!=(null==(u=t.loginForm.get("email_phone"))?null:u.errors)&&(null==(u=t.loginForm.get("email_phone"))?null:u.touched)||null!=(null==(u=t.loginForm.get("email_phone"))?null:u.errors)&&t.submited),o.xp6(7),o.Q6J("type",t.password?"password":"text"),o.xp6(1),o.Q6J("ngClass",o.WLB(7,U,t.password,!t.password)),o.xp6(1),o.Q6J("ngIf",null!=(null==(e=t.loginForm.get("password"))?null:e.errors)&&(null==(e=t.loginForm.get("password"))?null:e.touched)||null!=(null==(e=t.loginForm.get("password"))?null:e.errors)&&t.submited),o.xp6(2),o.Q6J("disabled",t.loginloading),o.xp6(2),o.Q6J("ngIf",t.loginloading)}},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,g.O5,g.mk],styles:[""]}),n})()}];let L=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[p.Bz.forChild(w)],p.Bz]}),n})();var Y=l(4466);let M=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[g.ez,L,Y.m]]}),n})()}}]);