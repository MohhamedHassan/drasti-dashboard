"use strict";var wI=Object.defineProperty,CI=Object.defineProperties,II=Object.getOwnPropertyDescriptors,Lw=Object.getOwnPropertySymbols,TI=Object.prototype.hasOwnProperty,bI=Object.prototype.propertyIsEnumerable,Vw=(pn,dt,$)=>dt in pn?wI(pn,dt,{enumerable:!0,configurable:!0,writable:!0,value:$}):pn[dt]=$,G_=(pn,dt)=>{for(var $ in dt||(dt={}))TI.call(dt,$)&&Vw(pn,$,dt[$]);if(Lw)for(var $ of Lw(dt))bI.call(dt,$)&&Vw(pn,$,dt[$]);return pn},z_=(pn,dt)=>CI(pn,II(dt));(self.webpackChunkdrasti_teacher_dashboard=self.webpackChunkdrasti_teacher_dashboard||[]).push([[179],{6215:(pn,dt,$)=>{$.d(dt,{nm:()=>zr});var y=$(4976),Ue=($(5e3),$(3692),$(259),$(5861)),Ke=$(6881),Xe=$(4859),ze=$(2090),lt=$(1877);const be=new Map,Ce={activated:!1,tokenObservers:[]},nt={initialized:!1,enabled:!1};function Lt(rt){return be.get(rt)||Object.assign({},Ce)}function Ft(){return nt}class Me{constructor(Ze,st,mt,kt,bn){if(this.operation=Ze,this.retryPolicy=st,this.getWaitDuration=mt,this.lowerBound=kt,this.upperBound=bn,this.pending=null,this.nextErrorWaitInterval=kt,kt>bn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ze){var st=this;return(0,Ue.Z)(function*(){st.stop();try{st.pending=new ze.BH,yield function ot(rt){return new Promise(Ze=>{setTimeout(Ze,rt)})}(st.getNextRun(Ze)),st.pending.resolve(),yield st.pending.promise,st.pending=new ze.BH,yield st.operation(),st.pending.resolve(),yield st.pending.promise,st.process(!0).catch(()=>{})}catch(mt){st.retryPolicy(mt)?st.process(!1).catch(()=>{}):st.stop()}})()}getNextRun(Ze){if(Ze)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const st=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),st}}}const ft=new ze.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vt(rt){if(!Lt(rt).activated)throw ft.create("use-before-activation",{appName:rt.name})}function Ht(rt,Ze){return xn.apply(this,arguments)}function xn(){return(xn=(0,Ue.Z)(function*({url:rt,body:Ze},st){const mt={"Content-Type":"application/json"},kt=st.getImmediate({optional:!0});if(kt){const vi=yield kt.getHeartbeatsHeader();vi&&(mt["X-Firebase-Client"]=vi)}const bn={method:"POST",body:JSON.stringify(Ze),headers:mt};let Rr,fr;try{Rr=yield fetch(rt,bn)}catch(vi){throw ft.create("fetch-network-error",{originalErrorMessage:null==vi?void 0:vi.message})}if(200!==Rr.status)throw ft.create("fetch-status-error",{httpStatus:Rr.status});try{fr=yield Rr.json()}catch(vi){throw ft.create("fetch-parse-error",{originalErrorMessage:null==vi?void 0:vi.message})}const Tr=fr.ttl.match(/^([\d.]+)(s)$/);if(!Tr||!Tr[2]||isNaN(Number(Tr[1])))throw ft.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${fr.ttl}`});const ui=1e3*Number(Tr[1]),Ys=Date.now();return{token:fr.token,expireTimeMillis:Ys+ui,issuedAtTimeMillis:Ys}})).apply(this,arguments)}function kn(rt,Ze){const{projectId:st,appId:mt,apiKey:kt}=rt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${st}/apps/${mt}:exchangeDebugToken?key=${kt}`,body:{debug_token:Ze}}}const un="firebase-app-check-store";let Je=null;function _e(){return Je||(Je=new Promise((rt,Ze)=>{try{const st=indexedDB.open("firebase-app-check-database",1);st.onsuccess=mt=>{rt(mt.target.result)},st.onerror=mt=>{var kt;Ze(ft.create("storage-open",{originalErrorMessage:null===(kt=mt.target.error)||void 0===kt?void 0:kt.message}))},st.onupgradeneeded=mt=>{0===mt.oldVersion&&mt.target.result.createObjectStore(un,{keyPath:"compositeKey"})}}catch(st){Ze(ft.create("storage-open",{originalErrorMessage:null==st?void 0:st.message}))}}),Je)}function hn(){return(hn=(0,Ue.Z)(function*(rt,Ze){const mt=(yield _e()).transaction(un,"readwrite"),bn=mt.objectStore(un).put({compositeKey:rt,value:Ze});return new Promise((Rr,fr)=>{bn.onsuccess=Tr=>{Rr()},mt.onerror=Tr=>{var ui;fr(ft.create("storage-set",{originalErrorMessage:null===(ui=Tr.target.error)||void 0===ui?void 0:ui.message}))}})})).apply(this,arguments)}const ir=new lt.Yd("@firebase/app-check");function En(rt,Ze){return(0,ze.hl)()?function ve(rt,Ze){return function tn(rt,Ze){return hn.apply(this,arguments)}(function mr(rt){return`${rt.options.appId}-${rt.name}`}(rt),Ze)}(rt,Ze).catch(st=>{ir.warn(`Failed to write token to IndexedDB. Error: ${st}`)}):Promise.resolve()}function Mn(){return Ft().enabled}function Zr(){return ts.apply(this,arguments)}function ts(){return(ts=(0,Ue.Z)(function*(){const rt=Ft();if(rt.enabled&&rt.token)return rt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const He={error:"UNKNOWN_ERROR"};function Ge(rt){return ze.US.encodeString(JSON.stringify(rt),!1)}function at(rt){return St.apply(this,arguments)}function St(){return(St=(0,Ue.Z)(function*(rt,Ze=!1){const st=rt.app;Vt(st);const mt=Lt(st);let bn,kt=mt.token;if(kt&&!br(kt)&&(mt.token=void 0,kt=void 0),!kt){const Tr=yield mt.cachedTokenPromise;Tr&&(br(Tr)?kt=Tr:yield En(st,void 0))}if(!Ze&&kt&&br(kt))return{token:kt.token};let fr,Rr=!1;if(Mn()){mt.exchangeTokenPromise||(mt.exchangeTokenPromise=Ht(kn(st,yield Zr()),rt.heartbeatServiceProvider).finally(()=>{mt.exchangeTokenPromise=void 0}),Rr=!0);const Tr=yield mt.exchangeTokenPromise;return yield En(st,Tr),mt.token=Tr,{token:Tr.token}}try{mt.exchangeTokenPromise||(mt.exchangeTokenPromise=mt.provider.getToken().finally(()=>{mt.exchangeTokenPromise=void 0}),Rr=!0),kt=yield Lt(st).exchangeTokenPromise}catch(Tr){"appCheck/throttled"===Tr.code?ir.warn(Tr.message):ir.error(Tr),bn=Tr}return kt?bn?fr=br(kt)?{token:kt.token,internalError:bn}:Yt(bn):(fr={token:kt.token},mt.token=kt,yield En(st,kt)):fr=Yt(bn),Rr&&hr(st,fr),fr})).apply(this,arguments)}function nn(){return(nn=(0,Ue.Z)(function*(rt){const Ze=rt.app;Vt(Ze);const{provider:st}=Lt(Ze);if(Mn()){const mt=yield Zr(),{token:kt}=yield Ht(kn(Ze,mt),rt.heartbeatServiceProvider);return{token:kt}}{const{token:mt}=yield st.getToken();return{token:mt}}})).apply(this,arguments)}function Xn(rt,Ze){const st=Lt(rt),mt=st.tokenObservers.filter(kt=>kt.next!==Ze);0===mt.length&&st.tokenRefresher&&st.tokenRefresher.isRunning()&&st.tokenRefresher.stop(),st.tokenObservers=mt}function Wn(rt){const{app:Ze}=rt,st=Lt(Ze);let mt=st.tokenRefresher;mt||(mt=function hi(rt){const{app:Ze}=rt;return new Me((0,Ue.Z)(function*(){let mt;if(mt=Lt(Ze).token?yield at(rt,!0):yield at(rt),mt.error)throw mt.error;if(mt.internalError)throw mt.internalError}),()=>!0,()=>{const st=Lt(Ze);if(st.token){let mt=st.token.issuedAtTimeMillis+.5*(st.token.expireTimeMillis-st.token.issuedAtTimeMillis)+3e5;return mt=Math.min(mt,st.token.expireTimeMillis-3e5),Math.max(0,mt-Date.now())}return 0},3e4,96e4)}(rt),st.tokenRefresher=mt),!mt.isRunning()&&st.isTokenAutoRefreshEnabled&&mt.start()}function hr(rt,Ze){const st=Lt(rt).tokenObservers;for(const mt of st)try{"EXTERNAL"===mt.type&&null!=Ze.error?mt.error(Ze.error):mt.next(Ze)}catch(kt){}}function br(rt){return rt.expireTimeMillis-Date.now()>0}function Yt(rt){return{token:Ge(He),error:rt}}class Or{constructor(Ze,st){this.app=Ze,this.heartbeatServiceProvider=st}_delete(){const{tokenObservers:Ze}=Lt(this.app);for(const st of Ze)Xn(this.app,st.next);return Promise.resolve()}}const Dt="app-check-internal";!function sn(){(0,Ke._registerComponent)(new Xe.wA("app-check",rt=>function sr(rt,Ze){return new Or(rt,Ze)}(rt.getProvider("app").getImmediate(),rt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((rt,Ze,st)=>{rt.getProvider(Dt).initialize()})),(0,Ke._registerComponent)(new Xe.wA(Dt,rt=>function Er(rt){return{getToken:Ze=>at(rt,Ze),getLimitedUseToken:()=>function zt(rt){return nn.apply(this,arguments)}(rt),addTokenListener:Ze=>function Nr(rt,Ze,st,mt){const{app:kt}=rt,bn=Lt(kt);if(bn.tokenObservers=[...bn.tokenObservers,{next:st,error:mt,type:Ze}],bn.token&&br(bn.token)){const fr=bn.token;Promise.resolve().then(()=>{st({token:fr.token}),Wn(rt)}).catch(()=>{})}bn.cachedTokenPromise.then(()=>Wn(rt))}(rt,"INTERNAL",Ze),removeTokenListener:Ze=>Xn(rt.app,Ze)}}(rt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ke.registerVersion)("@firebase/app-check","0.8.0")}();class zr{constructor(){return(0,y.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(pn,dt,$)=>{$.d(dt,{Ot:()=>X,z6:()=>ie});var y=$(259);$(5e3);class X{constructor(Ee){return Ee}}class ie{constructor(){return(0,y.C6)()}}},1205:(pn,dt,$)=>{$.d(dt,{zQ:()=>on,ww:()=>qr,rT:()=>It,f7:()=>Ht,L6:()=>tt,_Q:()=>Vt,lh:()=>On,Qv:()=>ft,nw:()=>xn});var y=$(5e3),B=$(7579),X=$(9646),ie=$(8306),Ue=$(8996),Ke=$(6451),Xe=$(5363),ze=$(3900),lt=$(4004),be=$(6063);class Ce extends B.x{constructor(gr=1/0,tr=1/0,un=be.l){super(),this._bufferSize=gr,this._windowTime=tr,this._timestampProvider=un,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=tr===1/0,this._bufferSize=Math.max(1,gr),this._windowTime=Math.max(1,tr)}next(gr){const{isStopped:tr,_buffer:un,_infiniteTimeWindow:it,_timestampProvider:Je,_windowTime:_e}=this;tr||(un.push(gr),!it&&un.push(Je.now()+_e)),this._trimBuffer(),super.next(gr)}_subscribe(gr){this._throwIfClosed(),this._trimBuffer();const tr=this._innerSubscribe(gr),{_infiniteTimeWindow:un,_buffer:it}=this,Je=it.slice();for(let _e=0;_e<Je.length&&!gr.closed;_e+=un?1:2)gr.next(Je[_e]);return this._checkFinalizedStatuses(gr),tr}_trimBuffer(){const{_bufferSize:gr,_timestampProvider:tr,_buffer:un,_infiniteTimeWindow:it}=this,Je=(it?1:2)*gr;if(gr<1/0&&Je<un.length&&un.splice(0,un.length-Je),!it){const _e=tr.now();let De=0;for(let ve=1;ve<un.length&&un[ve]<=_e;ve+=2)De=ve;De&&un.splice(0,De+1)}}}var nt=$(3099);function Lt(kn,gr,tr){let un,it=!1;return kn&&"object"==typeof kn?({bufferSize:un=1/0,windowTime:gr=1/0,refCount:it=!1,scheduler:tr}=kn):un=null!=kn?kn:1/0,(0,nt.B)({connector:()=>new Ce(un,gr,tr),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:it})}var Mt=$(590),Ft=$(576);function At(kn,gr){return(0,Ft.m)(gr)?(0,ze.w)(()=>kn,gr):(0,ze.w)(()=>kn)}var Qe=$(9468),Nt=$(9300),dn=$(4976),Xt=$(2011),Ee=$(9808),Me=$(6215),ot=$(9260);const ft=new y.OlP("angularfire2.auth.use-emulator"),tt=new y.OlP("angularfire2.auth.settings"),Vt=new y.OlP("angularfire2.auth.tenant-id"),It=new y.OlP("angularfire2.auth.langugage-code"),On=new y.OlP("angularfire2.auth.use-device-language"),Ht=new y.OlP("angularfire.auth.persistence"),xn=(kn,gr,tr,un,it,Je,_e,De)=>(0,Xt.cc)(`${kn.name}.auth`,"AngularFireAuth",kn.name,()=>{const ve=gr.runOutsideAngular(()=>kn.auth());if(tr&&ve.useEmulator(...tr),un&&(ve.tenantId=un),ve.languageCode=it,Je&&ve.useDeviceLanguage(),_e)for(const[xe,pt]of Object.entries(_e))ve.settings[xe]=pt;return De&&ve.setPersistence(De),ve},[tr,un,it,Je,_e,De]);let on=(()=>{class kn{constructor(tr,un,it,Je,_e,De,ve,xe,pt,tn,hn,Dn){const zn=new B.x,mr=(0,X.of)(void 0).pipe((0,Xe.Q)(_e.outsideAngular),(0,ze.w)(()=>Je.runOutsideAngular(()=>Promise.resolve().then($.bind($,9568)))),(0,lt.U)(()=>(0,Xt.on)(tr,Je,un)),(0,lt.U)(ir=>xn(ir,Je,De,xe,pt,tn,ve,hn)),Lt({bufferSize:1,refCount:!1}));if((0,Ee.PM)(it))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,X.of)(null);else{mr.pipe((0,Mt.P)()).subscribe();const Ln=mr.pipe((0,ze.w)(nr=>nr.getRedirectResult().then(Pn=>Pn,()=>null)),dn.iC,Lt({bufferSize:1,refCount:!1})),Lr=mr.pipe((0,ze.w)(nr=>new ie.y(Pn=>({unsubscribe:Je.runOutsideAngular(()=>nr.onAuthStateChanged(Mn=>Pn.next(Mn),Mn=>Pn.error(Mn),()=>Pn.complete()))})))),En=mr.pipe((0,ze.w)(nr=>new ie.y(Pn=>({unsubscribe:Je.runOutsideAngular(()=>nr.onIdTokenChanged(Mn=>Pn.next(Mn),Mn=>Pn.error(Mn),()=>Pn.complete()))}))));this.authState=Ln.pipe(At(Lr),(0,Qe.R)(_e.outsideAngular),(0,Xe.Q)(_e.insideAngular)),this.user=Ln.pipe(At(En),(0,Qe.R)(_e.outsideAngular),(0,Xe.Q)(_e.insideAngular)),this.idToken=this.user.pipe((0,ze.w)(nr=>nr?(0,Ue.D)(nr.getIdToken()):(0,X.of)(null))),this.idTokenResult=this.user.pipe((0,ze.w)(nr=>nr?(0,Ue.D)(nr.getIdTokenResult()):(0,X.of)(null))),this.credential=(0,Ke.T)(Ln,zn,this.authState.pipe((0,Nt.h)(nr=>!nr))).pipe((0,lt.U)(nr=>(null==nr?void 0:nr.user)?nr:null),(0,Qe.R)(_e.outsideAngular),(0,Xe.Q)(_e.insideAngular))}return(0,Xt.pX)(this,mr,Je,{spy:{apply:(ir,Ln,Lr)=>{(ir.startsWith("signIn")||ir.startsWith("createUser"))&&Lr.then(En=>zn.next(En))}}})}}return kn.\u0275fac=function(tr){return new(tr||kn)(y.LFG(Xt.Dh),y.LFG(Xt.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(dn.HU),y.LFG(ft,8),y.LFG(tt,8),y.LFG(Vt,8),y.LFG(It,8),y.LFG(On,8),y.LFG(Ht,8),y.LFG(Me.nm,8))},kn.\u0275prov=y.Yz7({token:kn,factory:kn.\u0275fac,providedIn:"any"}),kn})(),qr=(()=>{class kn{constructor(){ot.Z.registerVersion("angularfire",dn.q4.full,"auth-compat")}}return kn.\u0275fac=function(tr){return new(tr||kn)},kn.\u0275mod=y.oAB({type:kn}),kn.\u0275inj=y.cJS({providers:[on]}),kn})()},2255:(pn,dt,$)=>{$.d(dt,{ST:()=>F_,yb:()=>C0});var y=$(5e3),B=$(4986),X=$(8306),ie=$(8996),Ue=$(9646),Ke=$(4976),Xe=$(8675),ze=$(4482),lt=$(5403);function be(){return(0,ze.e)((r,e)=>{let t,s=!1;r.subscribe((0,lt.x)(e,a=>{const d=t;t=a,s&&e.next([d,a]),s=!0}))})}var Ce=$(4004),nt=$(5026),Lt=$(4671);function Ft(r,e){return r===e}var It,At=$(9300),Qe=$(2011),Nt=$(9808),Xt=($(9568),$(3942)),Ee=$(5861),Me=$(6881),ot=$(4859),_t=$(1877),ft=$(2090),tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vt={},On=On||{},Ht=tt||self;function xn(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function on(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var kn="closure_uid_"+(1e9*Math.random()>>>0),gr=0;function tr(r,e,t){return r.call.apply(r.bind,arguments)}function un(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function it(r,e,t){return(it=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tr:un).apply(null,arguments)}function Je(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function _e(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,d){for(var g=Array(arguments.length-2),A=2;A<arguments.length;A++)g[A-2]=arguments[A];return e.prototype[a].apply(s,g)}}function De(){this.s=this.s,this.o=this.o}De.prototype.s=!1,De.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function qr(r){Object.prototype.hasOwnProperty.call(r,kn)&&r[kn]||(r[kn]=++gr)}(this)},De.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xe=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function pt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function tn(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(xn(s)){const a=r.length||0,d=s.length||0;r.length=a+d;for(let g=0;g<d;g++)r[a+g]=s[g]}else r.push(s)}}function hn(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Ht.addEventListener("test",()=>{},e),Ht.removeEventListener("test",()=>{},e)}catch(t){}return r}();function zn(r){return/^[\s\xa0]*$/.test(r)}function mr(){var r=Ht.navigator;return r&&(r=r.userAgent)?r:""}function ir(r){return-1!=mr().indexOf(r)}function Ln(r){return Ln[" "](r),r}Ln[" "]=function(){};var He,r,En=ir("Opera"),nr=ir("Trident")||ir("MSIE"),Pn=ir("Edge"),Mn=Pn||nr,Zr=ir("Gecko")&&!(-1!=mr().toLowerCase().indexOf("webkit")&&!ir("Edge"))&&!(ir("Trident")||ir("MSIE"))&&!ir("Edge"),ts=-1!=mr().toLowerCase().indexOf("webkit")&&!ir("Edge");function Pt(){var r=Ht.document;return r?r.documentMode:void 0}e:{var Ge="",at=(r=mr(),Zr?/rv:([^\);]+)(\)|;)/.exec(r):Pn?/Edge\/([\d\.]+)/.exec(r):nr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):ts?/WebKit\/(\S+)/.exec(r):En?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(at&&(Ge=at?at[1]:""),nr){var St=Pt();if(null!=St&&St>parseFloat(Ge)){He=String(St);break e}}He=Ge}var Nr=Ht.document&&nr&&(Pt()||parseInt(He,10))||void 0;function Xn(r,e){if(hn.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Zr){e:{try{Ln(e.nodeName);var a=!0;break e}catch(d){}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Wn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Xn.$.h.call(this)}}_e(Xn,hn);var Wn={2:"touch",3:"pen",4:"mouse"};Xn.prototype.h=function(){Xn.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var hi="closure_listenable_"+(1e6*Math.random()|0),hr=0;function br(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++hr,this.fa=this.ia=!1}function Yt(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Or(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Er(r){const e={};for(const t in r)e[t]=r[t];return e}const lr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hr(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let d=0;d<lr.length;d++)t=lr[d],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Yr(r){this.src=r,this.g={},this.h=0}function fi(r,e){var t=e.type;if(t in r.g){var d,s=r.g[t],a=xe(s,e);(d=0<=a)&&Array.prototype.splice.call(s,a,1),d&&(Yt(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function ji(r,e,t,s){for(var a=0;a<r.length;++a){var d=r[a];if(!d.fa&&d.listener==e&&d.capture==!!t&&d.la==s)return a}return-1}Yr.prototype.add=function(r,e,t,s,a){var d=r.toString();(r=this.g[d])||(r=this.g[d]=[],this.h++);var g=ji(r,e,s,a);return-1<g?(e=r[g],t||(e.ia=!1)):((e=new br(e,this.src,d,!!s,a)).ia=t,r.push(e)),e};var Vi="closure_lm_"+(1e6*Math.random()|0),Gr={};function Pe(r,e,t,s,a){if(s&&s.once)return ge(r,e,t,s,a);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Pe(r,e[d],t,s,a);return null}return t=yn(t),r&&r[hi]?r.O(e,t,on(s)?!!s.capture:!!s,a):Ae(r,e,t,!1,s,a)}function Ae(r,e,t,s,a,d){if(!e)throw Error("Invalid event type");var g=on(a)?!!a.capture:!!a,A=ht(r);if(A||(r[Vi]=A=new Yr(r)),(t=A.add(e,t,s,g,d)).proxy)return t;if(s=function he(){const e=Se;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Dn||(a=g),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(se(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function ge(r,e,t,s,a){if(Array.isArray(e)){for(var d=0;d<e.length;d++)ge(r,e[d],t,s,a);return null}return t=yn(t),r&&r[hi]?r.P(e,t,on(s)?!!s.capture:!!s,a):Ae(r,e,t,!0,s,a)}function G(r,e,t,s,a){if(Array.isArray(e))for(var d=0;d<e.length;d++)G(r,e[d],t,s,a);else s=on(s)?!!s.capture:!!s,t=yn(t),r&&r[hi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=ji(d=r.g[e],t,s,a))&&(Yt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete r.g[e],r.h--))):r&&(r=ht(r))&&(e=r.g[e.toString()],r=-1,e&&(r=ji(e,t,s,a)),(t=-1<r?e[r]:null)&&ne(t))}function ne(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[hi])fi(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(se(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=ht(e))?(fi(t,r),0==t.h&&(t.src=null,e[Vi]=null)):Yt(r)}}}function se(r){return r in Gr?Gr[r]:Gr[r]="on"+r}function Se(r,e){if(r.fa)r=!0;else{e=new Xn(e,this);var t=r.listener,s=r.la||r.src;r.ia&&ne(r),r=t.call(s,e)}return r}function ht(r){return(r=r[Vi])instanceof Yr?r:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(r){return"function"==typeof r?r:(r[Wt]||(r[Wt]=function(e){return r.handleEvent(e)}),r[Wt])}function rn(){De.call(this),this.i=new Yr(this),this.S=this,this.J=null}function $n(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new hn(e,r);else if(e instanceof hn)e.target=e.target||r;else{var a=e;Hr(e=new hn(s,r),a)}if(a=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];a=er(g,s,!0,e)&&a}if(a=er(g=e.g=r,s,!0,e)&&a,a=er(g,s,!1,e)&&a,t)for(d=0;d<t.length;d++)a=er(g=e.g=t[d],s,!1,e)&&a}function er(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.fa&&g.capture==t){var A=g.listener,H=g.la||g.src;g.ia&&fi(r.i,g),a=!1!==A.call(H,s)&&a}}return a&&!s.defaultPrevented}_e(rn,De),rn.prototype[hi]=!0,rn.prototype.removeEventListener=function(r,e,t,s){G(this,r,e,t,s)},rn.prototype.N=function(){if(rn.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Yt(t[s]);delete r.g[e],r.h--}}this.J=null},rn.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},rn.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Ur=Ht.JSON.stringify;function Et(){var r=wr;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Ut=new class pi{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Dt,r=>r.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function sn(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function Tn(r){Ht.setTimeout(()=>{throw r},0)}let or,zr=!1,wr=new class gt{constructor(){this.h=this.g=null}add(e,t){const s=Ut.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Ii=()=>{const r=Ht.Promise.resolve(void 0);or=()=>{r.then(oi)}};var oi=()=>{for(var r;r=Et();){try{r.h.call(r.g)}catch(t){Tn(t)}var e=Ut;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}zr=!1};function Ti(r,e){rn.call(this),this.h=r||1,this.g=e||Ht,this.j=it(this.qb,this),this.l=Date.now()}function bs(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function rr(r,e,t){if("function"==typeof r)t&&(r=it(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=it(r.handleEvent,r)}return 2147483647<Number(e)?-1:Ht.setTimeout(r,e||0)}function Ui(r){r.g=rr(()=>{r.g=null,r.i&&(r.i=!1,Ui(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}_e(Ti,rn),(It=Ti.prototype).ga=!1,It.T=null,It.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$n(this,"tick"),this.ga&&(bs(this),this.start()))}},It.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.N=function(){Ti.$.N.call(this),bs(this),delete this.g};class gs extends De{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ui(this)}N(){super.N(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(r){De.call(this),this.h=r,this.g={}}_e(ks,De);var Dr=[];function wn(r,e,t,s){Array.isArray(t)||(t&&(Dr[0]=t.toString()),t=Dr);for(var a=0;a<t.length;a++){var d=Pe(e,t[a],s||r.handleEvent,!1,r.h||r);if(!d)break;r.g[d.key]=d}}function ar(r){Or(r.g,function(e,t){this.g.hasOwnProperty(t)&&ne(e)},r),r.g={}}function Oi(){this.g=!0}function rt(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function st(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var d=a[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<a.length;g++)a[g]=""}}}return Ur(t)}catch(A){return e}}(r,t)+(s?" "+s:"")})}ks.prototype.N=function(){ks.$.N.call(this),ar(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oi.prototype.Ea=function(){this.g=!1},Oi.prototype.info=function(){};var mt={},kt=null;function bn(){return kt=kt||new rn}function Rr(r){hn.call(this,mt.Ta,r)}function fr(r){const e=bn();$n(e,new Rr(e))}function Tr(r,e){hn.call(this,mt.STAT_EVENT,r),this.stat=e}function ui(r){const e=bn();$n(e,new Tr(e,r))}function Ys(r,e){hn.call(this,mt.Ua,r),this.size=e}function vi(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){r()},e)}mt.Ta="serverreachability",_e(Rr,hn),mt.STAT_EVENT="statevent",_e(Tr,hn),mt.Ua="timingevent",_e(Ys,hn);var Wi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ds={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oo(){}function Eo(){}oo.prototype.h=null;var xo,po={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bs(){hn.call(this,"d")}function ca(){hn.call(this,"c")}function jo(){}function ms(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new ks(this),this.P=Qs,this.V=new Ti(r=Mn?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kr}function kr(){this.i=null,this.g="",this.h=!1}_e(Bs,hn),_e(ca,hn),_e(jo,oo),jo.prototype.g=function(){return new XMLHttpRequest},jo.prototype.i=function(){return{}},xo=new jo;var Qs=45e3,wo={},ao={};function ki(r,e,t){r.L=1,r.v=ns(Ms(e)),r.s=t,r.S=!0,Ss(r,null)}function Ss(r,e){r.G=Date.now(),Ho(r),r.A=Ms(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Vr(t.i,"t",s),r.C=0,t=r.l.J,r.h=new kr,r.g=ta(r.l,t?e:null,!r.s),0<r.O&&(r.M=new gs(it(r.Pa,r,r.g),r.O)),wn(r.U,r.g,"readystatechange",r.nb),e=r.I?Er(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),fr(),function Ar(r,e,t,s,a,d){r.info(function(){if(r.g)if(d)for(var g="",A=d.split("&"),H=0;H<A.length;H++){var Q=A[H].split("=");if(1<Q.length){var ce=Q[0];Q=Q[1];var Ve=ce.split("_");g=2<=Ve.length&&"type"==Ve[1]?g+(ce+"=")+Q+"&":g+(ce+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+g})}(r.j,r.u,r.A,r.m,r.W,r.s)}function zi(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function da(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=li(r,t),a==ao){4==e&&(r.o=4,ui(14),s=!1),rt(r.j,r.m,null,"[Incomplete Response]");break}if(a==wo){r.o=4,ui(15),rt(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}rt(r.j,r.m,a,null),Rs(r,a)}zi(r)&&a!=ao&&a!=wo&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,ui(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),xi(e),e.M=!0,ui(11))):(rt(r.j,r.m,t,"[Invalid Chunked Response]"),uo(r),As(r))}function li(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?ao:(t=Number(e.substring(t,s)),isNaN(t)?wo:(s+=1)+t>e.length?ao:(e=e.slice(s,s+t),r.C=s+t,e))}function Ho(r){r.Y=Date.now()+r.P,js(r,r.P)}function js(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=vi(it(r.lb,r),e)}function Fs(r){r.B&&(Ht.clearTimeout(r.B),r.B=null)}function As(r){0==r.l.H||r.J||Es(r.l,r)}function uo(r){Fs(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,bs(r.V),ar(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function Rs(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||ur(t.i,r)))if(!r.K&&ur(t.i,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch(Q){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=vi(it(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<r.G))break e;ss(t),Io(t)}ea(t),ui(18)}if(1>=Fi(t.i)&&t.oa){try{t.oa()}catch(Q){}t.oa=void 0}}else $o(t,11)}else if((r.K||t.g==r)&&ss(t),!zn(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let Q=a[e];if(t.V=Q[0],Q=Q[1],2==t.H)if("c"==Q[0]){t.K=Q[1],t.pa=Q[2];const ce=Q[3];null!=ce&&(t.ra=ce,t.l.info("VER="+t.ra));const Ve=Q[4];null!=Ve&&(t.Ga=Ve,t.l.info("SVER="+t.Ga));const bt=Q[5];null!=bt&&"number"==typeof bt&&0<bt&&(t.L=s=1.5*bt,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const $t=r.g;if($t){const vn=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vn){var d=s.i;d.g||-1==vn.indexOf("spdy")&&-1==vn.indexOf("quic")&&-1==vn.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(_s(d,d.h),d.h=null))}if(s.F){const Nn=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;Nn&&(s.Da=Nn,Wr(s.I,s.F,Nn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var g=r;if((s=t).wa=fu(s,s.J?s.pa:null,s.Y),g.K){rs(s.i,g);var A=g,H=s.L;H&&A.setTimeout(H),A.B&&(Fs(A),Ho(A)),s.g=g}else Ha(s);0<t.j.length&&Js(t)}else"stop"!=Q[0]&&"close"!=Q[0]||$o(t,7);else 3==t.H&&("stop"==Q[0]||"close"==Q[0]?"stop"==Q[0]?$o(t,7):Gs(t):"noop"!=Q[0]&&t.h&&t.h.Aa(Q),t.A=0)}fr()}catch(Q){}}function Po(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(xn(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function go(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if("undefined"!=typeof Map&&r instanceof Map)return Array.from(r.keys());if(!("undefined"!=typeof Set&&r instanceof Set)){if(xn(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Co(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if("undefined"!=typeof Map&&r instanceof Map||"undefined"!=typeof Set&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(xn(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,d=0;d<a;d++)e.call(void 0,s[d],t&&t[d],r)}(It=ms.prototype).setTimeout=function(r){this.P=r},It.nb=function(r){r=r.target;const e=this.M;e&&3==Br(r)?e.l():this.Pa(r)},It.Pa=function(r){try{if(r==this.g)e:{const ce=Br(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ce)&&(3!=ce||Mn||this.g&&(this.h.h||this.g.ja()||qi(this.g)))){this.J||4!=ce||7==e||fr(),Fs(this);var t=this.g.da();this.ca=t;t:if(zi(this)){var s=qi(this.g);r="";var a=s.length,d=4==Br(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){uo(this),As(this);var g="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:d&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==t,function ai(r,e,t,s,a,d,g){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.W,ce,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(A)){var Q=A;break t}}Q=null}if(!(t=Q)){this.i=!1,this.o=3,ui(12),uo(this),As(this);break e}rt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rs(this,t)}this.S?(da(this,ce,g),Mn&&this.i&&3==ce&&(wn(this.U,this.V,"tick",this.mb),this.V.start())):(rt(this.j,this.m,g,null),Rs(this,g)),4==ce&&uo(this),this.i&&!this.J&&(4==ce?Es(this.l,this):(this.i=!1,Ho(this)))}else(function Ri(r){const e={};r=(r.g&&2<=Br(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<r.length;s++){if(zn(r[s]))continue;var t=sn(r[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const d=e[a]||[];e[a]=d,d.push(t)}!function sr(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<g.indexOf("Unknown SID")?(this.o=3,ui(12)):(this.o=0,ui(13)),uo(this),As(this)}}}catch(ce){}},It.mb=function(){if(this.g){var r=Br(this.g),e=this.g.ja();this.C<e.length&&(Fs(this),da(this,r,e),this.i&&4!=r&&Ho(this))}},It.cancel=function(){this.J=!0,uo(this)},It.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Ze(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(fr(),ui(17)),uo(this),this.o=2,As(this)):js(this,this.Y-r)};var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $s(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof $s){this.h=r.h,ni(this,r.j),this.s=r.s,this.g=r.g,mo(this,r.m),this.l=r.l;var e=r.i,t=new Tt;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),lo(this,t),this.o=r.o}else r&&(e=String(r).match(Hs))?(this.h=!1,ni(this,e[1]||"",!0),this.s=ys(e[2]||""),this.g=ys(e[3]||"",!0),mo(this,e[4]),this.l=ys(e[5]||"",!0),lo(this,e[6]||"",!0),this.o=ys(e[7]||"")):(this.h=!1,this.i=new Tt(null,this.h))}function Ms(r){return new $s(r)}function ni(r,e,t){r.j=t?ys(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function mo(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function lo(r,e,t){e instanceof Tt?(r.i=e,function Mr(r,e){e&&!r.j&&(Bt(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Cn(this,s),Vr(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=xs(e,de)),r.i=new Tt(e,r.h))}function Wr(r,e,t){r.i.set(e,t)}function ns(r){return Wr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function ys(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function xs(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Ei),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Ei(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}$s.prototype.toString=function(){var r=[],e=this.j;e&&r.push(xs(e,F,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(xs(e,F,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(xs(t,"/"==t.charAt(0)?j:ae,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",xs(t,ke)),r.join("")};var F=/[#\/\?@]/g,ae=/[#\?:]/g,j=/[#\?]/g,de=/[#\?@]/g,ke=/#/g;function Tt(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Bt(r){r.g||(r.g=new Map,r.h=0,r.i&&function Ki(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var d=r[t].substring(0,s);a=r[t].substring(s+1)}else d=r[t];e(d,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Cn(r,e){Bt(r),e=yr(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function Fr(r,e){return Bt(r),e=yr(r,e),r.g.has(e)}function Vr(r,e,t){Cn(r,e),0<t.length&&(r.i=null,r.g.set(yr(r,e),pt(t)),r.h+=t.length)}function yr(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Si(r){this.l=r||ii,r=Ht.PerformanceNavigationTiming?0<(r=Ht.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ka&&Ht.g.Ka()&&Ht.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=Tt.prototype).add=function(r,e){Bt(this),this.i=null,r=yr(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},It.forEach=function(r,e){Bt(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},It.ta=function(){Bt(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let d=0;d<a.length;d++)t.push(e[s])}return t},It.Z=function(r){Bt(this);let e=[];if("string"==typeof r)Fr(this,r)&&(e=e.concat(this.g.get(yr(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},It.set=function(r,e){return Bt(this),this.i=null,Fr(this,r=yr(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},It.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const d=encodeURIComponent(String(s)),g=this.Z(s);for(s=0;s<g.length;s++){var a=d;""!==g[s]&&(a+="="+encodeURIComponent(String(g[s]))),r.push(a)}}return this.i=r.join("&")};var ii=10;function yo(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Fi(r){return r.h?1:r.g?r.g.size:0}function ur(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function _s(r,e){r.g?r.g.add(e):r.h=e}function rs(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function vs(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return pt(r.i)}function K(){this.g=new class{stringify(r){return Ht.JSON.stringify(r,void 0)}parse(r){return Ht.JSON.parse(r,void 0)}}}function V(r,e,t){const s=t||"";try{Po(r,function(a,d){let g=a;on(a)&&(g=Ur(a)),e.push(s+d+"="+encodeURIComponent(g))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function ue(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(d){}}function Ne(r){this.l=r.fc||null,this.j=r.ob||!1}function qt(r,e){rn.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=gi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Si.prototype.cancel=function(){if(this.i=vs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},_e(Ne,oo),Ne.prototype.g=function(){return new qt(this.l,this.j)},Ne.prototype.i=function(r){return function(){return r}}({}),_e(qt,rn);var gi=0;function z(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function W(r){r.readyState=4,r.l=null,r.j=null,r.A=null,fe(r)}function fe(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(It=qt.prototype).open=function(r,e){if(this.readyState!=gi)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,fe(this)},It.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Ht).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,W(this)),this.readyState=gi},It.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,fe(this)),this.g&&(this.readyState=3,fe(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},It.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?W(this):fe(this),3==this.readyState&&z(this)}},It.Za=function(r){this.g&&(this.response=this.responseText=r,W(this))},It.Ya=function(r){this.g&&(this.response=r,W(this))},It.ka=function(){this.g&&W(this)},It.setRequestHeader=function(r,e){this.v.append(r,e)},It.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(qt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Ie=Ht.JSON.parse;function Fe(r){rn.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ct,this.L=this.M=!1}_e(Fe,rn);var Ct="",Jt=/^https?$/i,Vn=["POST","PUT"];function cr(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Kn(r),Ai(r)}function Kn(r){r.F||(r.F=!0,$n(r,"complete"),$n(r,"error"))}function ci(r){if(r.h&&void 0!==On&&(!r.C[1]||4!=Br(r)||2!=r.da()))if(r.v&&4==Br(r))rr(r.La,0,r);else if($n(r,"readystatechange"),4==Br(r)){r.h=!1;try{const g=r.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===g){var a=String(r.I).match(Hs)[1]||null;!a&&Ht.self&&Ht.self.location&&(a=Ht.self.location.protocol.slice(0,-1)),s=!Jt.test(a?a.toLowerCase():"")}t=s}if(t)$n(r,"complete"),$n(r,"success");else{r.m=6;try{var d=2<Br(r)?r.g.statusText:""}catch(A){d=""}r.j=d+" ["+r.da()+"]",Kn(r)}}finally{Ai(r)}}}function Ai(r,e){if(r.g){bi(r);const t=r.g,s=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||$n(r,"ready");try{t.onreadystatechange=s}catch(a){}}}function bi(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Ht.clearTimeout(r.A),r.A=null)}function Br(r){return r.g?r.g.readyState:0}function qi(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case Ct:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ls(r){let e="";return Or(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function is(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Ls(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Wr(r,e,t))}function $i(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Zi(r){this.Ga=0,this.j=[],this.l=new Oi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$i("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$i("baseRetryDelayMs",5e3,r),this.hb=$i("retryDelaySeedMs",1e4,r),this.eb=$i("forwardChannelMaxRetries",2,r),this.xa=$i("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new Si(r&&r.concurrentRequestLimit),this.Ja=new K,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Gs(r){if(Xo(r),3==r.H){var e=r.W++,t=Ms(r.I);if(Wr(t,"SID",r.K),Wr(t,"RID",e),Wr(t,"TYPE","terminate"),ha(r,t),(e=new ms(r,r.l,e)).L=2,e.v=ns(Ms(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon)try{t=Ht.navigator.sendBeacon(e.v.toString(),"")}catch(s){}!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=ta(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ho(e)}Oa(r)}function Io(r){r.g&&(xi(r),r.g.cancel(),r.g=null)}function Xo(r){Io(r),r.u&&(Ht.clearTimeout(r.u),r.u=null),ss(r),r.i.cancel(),r.m&&("number"==typeof r.m&&Ht.clearTimeout(r.m),r.m=null)}function Js(r){if(!yo(r.i)&&!r.m){r.m=!0;var e=r.Na;or||Ii(),zr||(or(),zr=!0),wr.add(e,r),r.C=0}}function hs(r,e){var t;t=e?e.m:r.W++;const s=Ms(r.I);Wr(s,"SID",r.K),Wr(s,"RID",t),Wr(s,"AID",r.V),ha(r,s),r.o&&r.s&&is(s,r.o,r.s),t=new ms(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=Oo(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),_s(r.i,t),ki(t,s,e)}function ha(r,e){r.na&&Or(r.na,function(t,s){Wr(e,s,t)}),r.h&&Po({},function(t,s){Wr(e,s,t)})}function Oo(r,e,t){t=Math.min(r.j.length,t);var s=r.h?it(r.h.Va,r.h,r):null;e:{var a=r.j;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=a[0].g,g.push("ofs="+d)):d=0:g.push("ofs="+d);let A=!0;for(let H=0;H<t;H++){let Q=a[H].g;const ce=a[H].map;if(Q-=d,0>Q)d=Math.max(0,a[H].g-100),A=!1;else try{V(ce,g,"req"+Q+"_")}catch(Ve){s&&s(ce)}}if(A){s=g.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,s}function Ha(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;or||Ii(),zr||(or(),zr=!0),wr.add(e,r),r.A=0}}function ea(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=vi(it(r.Ma,r),Pi(r,r.A)),r.A++,0))}function xi(r){null!=r.B&&(Ht.clearTimeout(r.B),r.B=null)}function co(r){r.g=new ms(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Ms(r.wa);Wr(e,"RID","rpc"),Wr(e,"SID",r.K),Wr(e,"AID",r.V),Wr(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&Wr(e,"TO",r.qa),Wr(e,"TYPE","xmlhttp"),ha(r,e),r.o&&r.s&&is(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.v=ns(Ms(e)),t.s=null,t.S=!0,Ss(t,r)}function ss(r){null!=r.v&&(Ht.clearTimeout(r.v),r.v=null)}function Es(r,e){var t=null;if(r.g==e){ss(r),xi(r),r.g=null;var s=2}else{if(!ur(r.i,e))return;t=e.F,rs(r.i,e),s=1}if(0!=r.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;$n(s=bn(),new Ys(s,t)),Js(r)}else Ha(r);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function No(r,e){return!(Fi(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=vi(it(r.Na,r,e),Pi(r,r.C)),r.C++,0)))}(r,e)||2==s&&ea(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),a){case 1:$o(r,5);break;case 4:$o(r,10);break;case 3:$o(r,6);break;default:$o(r,2)}}function Pi(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function $o(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var s=it(r.pb,r);t||(t=new $s("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||ni(t,"https"),ns(t)),function O(r,e){const t=new Oi;if(Ht.Image){const s=new Image;s.onload=Je(ue,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Je(ue,t,s,"TestLoadImage: error",!1,e),s.onabort=Je(ue,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Je(ue,t,s,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else ui(2);r.H=0,r.h&&r.h.za(e),Oa(r),Xo(r)}function Oa(r){if(r.H=0,r.ma=[],r.h){const e=vs(r.i);(0!=e.length||0!=r.j.length)&&(tn(r.ma,e),tn(r.ma,r.j),r.i.i.length=0,pt(r.j),r.j.length=0),r.h.ya()}}function fu(r,e,t){var s=t instanceof $s?Ms(t):new $s(t);if(""!=s.g)e&&(s.g=e+"."+s.g),mo(s,s.m);else{var a=Ht.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var d=new $s(null);s&&ni(d,s),e&&(d.g=e),a&&mo(d,a),t&&(d.l=t),s=d}return e=r.Da,(t=r.F)&&e&&Wr(s,t,e),Wr(s,"VER",r.ra),ha(r,s),s}function ta(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fe(t&&r.Ha&&!r.va?new Ne({ob:!0}):r.va)).Oa(r.J),e}function pu(){}function To(){if(nr&&!(10<=Number(Nr)))throw Error("Environmental error: no available transport.")}function ws(r,e){rn.call(this),this.g=new Zi(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!zn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new ko(this)}function Zo(r){Bs.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function cs(){ca.call(this),this.status=1}function ko(r){this.g=r}function ho(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Go(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var d=r.g[3],g=(e=r.g[0])+(d^(t=r.g[1])&((a=r.g[2])^d))+s[0]+3614090360&4294967295;g=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=(t=(a=(d=(e=t+(g<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(d^t&(a^d))+s[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=d+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=a+(t^d&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=t+(e^a&(d^e))+s[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(a^d&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(a^d&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=d+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=a+(e^t&(d^e))+s[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=t+(d^e&(a^d))+s[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(t^a^d)+s[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(t^a^d)+s[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=d+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=a+(d^e^t)+s[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=t+(a^d^e)+s[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(a^(t|~d))+s[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(a^(t|~d))+s[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(a^(t|~d))+s[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=a+(e^(d|~t))+s[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=t+(d^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((d=(e=t+((g=e+(a^(t|~d))+s[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=d+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((a=d+((g=a+(e^(d|~t))+s[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(g<<21&4294967295|g>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+d&4294967295}function si(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var d=0|r[a];s&&d==e||(t[a]=d,s=!1)}this.g=t}(It=Fe.prototype).Oa=function(r){this.M=r},It.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xo.g(),this.C=function Hi(r){return r.h||(r.h=r.i())}(this.u?this.u:xo),this.g.onreadystatechange=it(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(d){return void cr(this,d)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const d of s.keys())t.set(d,s.get(d))}s=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),a=Ht.FormData&&r instanceof Ht.FormData,!(0<=xe(Vn,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,g]of t)this.g.setRequestHeader(d,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bi(this),0<this.B&&((this.L=function Rn(r){return nr&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.ua,this)):this.A=rr(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(d){cr(this,d)}},It.ua=function(){void 0!==On&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$n(this,"timeout"),this.abort(8))},It.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,$n(this,"complete"),$n(this,"abort"),Ai(this))},It.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ai(this,!0)),Fe.$.N.call(this)},It.La=function(){this.s||(this.G||this.v||this.l?ci(this):this.kb())},It.kb=function(){ci(this)},It.isActive=function(){return!!this.g},It.da=function(){try{return 2<Br(this)?this.g.status:-1}catch(r){return-1}},It.ja=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},It.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Ie(e)}},It.Ia=function(){return this.m},It.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=Zi.prototype).ra=8,It.H=1,It.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new ms(this,this.l,r);let d=this.s;if(this.U&&(d?(d=Er(d),Hr(d,this.U)):d=this.U),null!==this.o||this.O||(a.I=d,d=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Oo(this,a,e),Wr(t=Ms(this.I),"RID",r),Wr(t,"CVER",22),this.F&&Wr(t,"X-HTTP-Session-Id",this.F),ha(this,t),d&&(this.O?e="headers="+encodeURIComponent(String(Ls(d)))+"&"+e:this.o&&is(t,this.o,d)),_s(this.i,a),this.bb&&Wr(t,"TYPE","init"),this.P?(Wr(t,"$req",e),Wr(t,"SID","null"),a.aa=!0,ki(a,t,null)):ki(a,t,e),this.H=2}}else 3==this.H&&(r?hs(this,r):0==this.j.length||yo(this.i)||hs(this))},It.Ma=function(){if(this.u=null,co(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=vi(it(this.jb,this),r)}},It.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ui(10),Io(this),co(this))},It.ib=function(){null!=this.v&&(this.v=null,Io(this),ea(this),ui(19))},It.pb=function(r){r?(this.l.info("Successfully pinged google.com"),ui(2)):(this.l.info("Failed to ping google.com"),ui(1))},It.isActive=function(){return!!this.h&&this.h.isActive(this)},(It=pu.prototype).Ba=function(){},It.Aa=function(){},It.za=function(){},It.ya=function(){},It.isActive=function(){return!0},It.Va=function(){},To.prototype.g=function(r,e){return new ws(r,e)},_e(ws,rn),ws.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;ui(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=fu(r,null,r.Y),Js(r)},ws.prototype.close=function(){Gs(this.g)},ws.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Ur(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&Js(e)},ws.prototype.N=function(){this.g.h=null,delete this.j,Gs(this.g),delete this.g,ws.$.N.call(this)},_e(Zo,Bs),_e(cs,ca),_e(ko,pu),ko.prototype.Ba=function(){$n(this.g,"a")},ko.prototype.Aa=function(r){$n(this.g,new Zo(r))},ko.prototype.za=function(r){$n(this.g,new cs)},ko.prototype.ya=function(){$n(this.g,"b")},_e(ho,function bu(){this.blockSize=-1}),ho.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ho.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,d=0;d<e;){if(0==a)for(;d<=t;)Go(this,r,d),d+=this.blockSize;if("string"==typeof r){for(;d<e;)if(s[a++]=r.charCodeAt(d++),a==this.blockSize){Go(this,s),a=0;break}}else for(;d<e;)if(s[a++]=r[d++],a==this.blockSize){Go(this,s),a=0;break}}this.h=a,this.i+=e},ho.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var rl={};function Uu(r){return-128<=r&&128>r?function Lr(r,e){var t=rl;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new si([0|e],0>e?-1:0)}):new si([0|r],0>r?-1:0)}function bo(r){if(isNaN(r)||!isFinite(r))return Ja;if(0>r)return fs(bo(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=gu;return new si(e,0)}var gu=4294967296,Ja=Uu(0),mu=Uu(1),nc=Uu(16777216);function Xs(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function eo(r){return-1==r.h}function fs(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new si(t,~r.h).add(mu)}function _o(r,e){return r.add(fs(e))}function fa(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function ka(r,e){this.g=r,this.h=e}function Yo(r,e){if(Xs(e))throw Error("division by zero");if(Xs(r))return new ka(Ja,Ja);if(eo(r))return e=Yo(fs(r),e),new ka(fs(e.g),fs(e.h));if(eo(e))return e=Yo(r,fs(e)),new ka(fs(e.g),e.h);if(30<r.g.length){if(eo(r)||eo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=mu,s=e;0>=s.X(r);)t=yu(t),s=yu(s);var a=Qo(t,1),d=Qo(s,1);for(s=Qo(s,2),t=Qo(t,2);!Xs(s);){var g=d.add(s);0>=g.X(r)&&(a=a.add(t),d=g),s=Qo(s,1),t=Qo(t,1)}return e=_o(r,a.R(e)),new ka(a,e)}for(a=Ja;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),g=(d=bo(t)).R(e);eo(g)||0<g.X(r);)g=(d=bo(t-=s)).R(e);Xs(d)&&(d=mu),a=a.add(d),r=_o(r,g)}return new ka(a,r)}function yu(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new si(t,r.h)}function Qo(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],d=0;d<s;d++)a[d]=0<e?r.D(d+t)>>>e|r.D(d+t+1)<<32-e:r.D(d+t);return new si(a,r.h)}(It=si.prototype).ea=function(){if(eo(this))return-fs(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:gu+s)*e,e*=gu}return r},It.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Xs(this))return"0";if(eo(this))return"-"+fs(this).toString(r);for(var e=bo(Math.pow(r,6)),t=this,s="";;){var a=Yo(t,e).g,d=((0<(t=_o(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Xs(t=a))return d+s;for(;6>d.length;)d="0"+d;s=d+s}},It.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},It.X=function(r){return eo(r=_o(this,r))?-1:Xs(r)?0:1},It.abs=function(){return eo(this)?fs(this):this},It.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var d=s+(65535&this.D(a))+(65535&r.D(a)),g=(d>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=g>>>16,t[a]=(g&=65535)<<16|(d&=65535)}return new si(t,-2147483648&t[t.length-1]?-1:0)},It.R=function(r){if(Xs(this)||Xs(r))return Ja;if(eo(this))return eo(r)?fs(this).R(fs(r)):fs(fs(this).R(r));if(eo(r))return fs(this.R(fs(r)));if(0>this.X(nc)&&0>r.X(nc))return bo(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var d=this.D(s)>>>16,g=65535&this.D(s),A=r.D(a)>>>16,H=65535&r.D(a);t[2*s+2*a]+=g*H,fa(t,2*s+2*a),t[2*s+2*a+1]+=d*H,fa(t,2*s+2*a+1),t[2*s+2*a+1]+=g*A,fa(t,2*s+2*a+1),t[2*s+2*a+2]+=d*A,fa(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new si(t,0)},It.gb=function(r){return Yo(this,r).h},It.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new si(t,this.h&r.h)},It.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new si(t,this.h|r.h)},It.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new si(t,this.h^r.h)},To.prototype.createWebChannel=To.prototype.g,ws.prototype.send=ws.prototype.u,ws.prototype.open=ws.prototype.m,ws.prototype.close=ws.prototype.close,Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,Ds.COMPLETE="complete",Eo.EventType=po,po.OPEN="a",po.CLOSE="b",po.ERROR="c",po.MESSAGE="d",rn.prototype.listen=rn.prototype.O,Fe.prototype.listenOnce=Fe.prototype.P,Fe.prototype.getLastError=Fe.prototype.Sa,Fe.prototype.getLastErrorCode=Fe.prototype.Ia,Fe.prototype.getStatus=Fe.prototype.da,Fe.prototype.getResponseJson=Fe.prototype.Wa,Fe.prototype.getResponseText=Fe.prototype.ja,Fe.prototype.send=Fe.prototype.ha,Fe.prototype.setWithCredentials=Fe.prototype.Oa,ho.prototype.digest=ho.prototype.l,ho.prototype.reset=ho.prototype.reset,ho.prototype.update=ho.prototype.j,si.prototype.add=si.prototype.add,si.prototype.multiply=si.prototype.R,si.prototype.modulo=si.prototype.gb,si.prototype.compare=si.prototype.X,si.prototype.toNumber=si.prototype.ea,si.prototype.toString=si.prototype.toString,si.prototype.getBits=si.prototype.D,si.fromNumber=bo,si.fromString=function Du(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return fs(Du(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=bo(Math.pow(e,8)),s=Ja,a=0;a<r.length;a+=8){var d=Math.min(8,r.length-a),g=parseInt(r.substring(a,a+d),e);8>d?(d=bo(Math.pow(e,d)),s=s.R(d).add(bo(g))):s=(s=s.R(t)).add(bo(g))}return s};var _u=Vt.createWebChannelTransport=function(){return new To},Su=Vt.getStatEventTarget=function(){return bn()},vu=Vt.ErrorCode=Wi,pa=Vt.EventType=Ds,Bu=Vt.Event=mt,Xa=Vt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ju=Vt.FetchXmlHttpFactory=Ne,Fa=Vt.WebChannel=Eo,Hu=Vt.XhrIo=Fe,x=Vt.Md5=ho,b=Vt.Integer=si;const I="@firebase/firestore";class U{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}U.UNAUTHENTICATED=new U(null),U.GOOGLE_CREDENTIALS=new U("google-credentials-uid"),U.FIRST_PARTY=new U("first-party-uid"),U.MOCK_USER=new U("mock-user");let Y="9.23.0";const le=new _t.Yd("@firebase/firestore");function Re(){return le.logLevel}function $e(r,...e){if(le.logLevel<=_t.in.DEBUG){const t=e.map(Zn);le.debug(`Firestore (${Y}): ${r}`,...t)}}function en(r,...e){if(le.logLevel<=_t.in.ERROR){const t=e.map(Zn);le.error(`Firestore (${Y}): ${r}`,...t)}}function _r(r,...e){if(le.logLevel<=_t.in.WARN){const t=e.map(Zn);le.warn(`Firestore (${Y}): ${r}`,...t)}}function Zn(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function ln(r="Unexpected state"){const e=`FIRESTORE (${Y}) INTERNAL ASSERTION FAILED: `+r;throw en(e),new Error(e)}function gn(r,e){r||ln()}function _n(r,e){return r}const yt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends ft.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ra{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ga{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(U.UNAUTHENTICATED))}shutdown(){}}class $a{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jl{constructor(e){this.t=e,this.currentUser=U.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const d=Q=>this.i!==a?(a=this.i,t(Q)):Promise.resolve();let g=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Qr,e.enqueueRetryable(()=>d(this.currentUser))};const A=()=>{const Q=g;e.enqueueRetryable((0,Ee.Z)(function*(){yield Q.promise,yield d(s.currentUser)}))},H=Q=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(Q=>H(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?H(Q):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Qr)}},0),A()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gn("string"==typeof s.accessToken),new ra(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gn(null===e||"string"==typeof e),new U(e)}}class $u{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=U.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ga{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new $u(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(U.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Au{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=d=>{null!=d.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.T;return this.T=d.token,$e("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const a=d=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.I.onInit(d=>a(d)),setTimeout(()=>{if(!this.appCheck){const d=this.I.getImmediate({optional:!0});d?a(d):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gn("string"==typeof t.token),this.T=t.token,new Au(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yl(r){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class eu{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=yl(40);for(let d=0;d<a.length;++d)s.length<20&&a[d]<t&&(s+=e.charAt(a[d]%e.length))}return s}}function $r(r,e){return r<e?-1:r>e?1:0}function tu(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function ba(r){return r+"\0"}class os{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return os.fromMillis(Date.now())}static fromDate(e){return os.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new os(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$r(this.nanoseconds,e.nanoseconds):$r(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dr(e)}static min(){return new dr(new os(0,0))}static max(){return new dr(new os(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ma{constructor(e,t,s){void 0===t?t=0:t>e.length&&ln(),void 0===s?s=e.length-t:s>e.length-t&&ln(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===ma.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ma?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const d=e.get(a),g=t.get(a);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ni extends ma{construct(e,t,s){return new Ni(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Zt(yt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Ni(t)}static emptyPath(){return new Ni([])}}const Vs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yi extends ma{construct(e,t,s){return new Yi(e,t,s)}static isValidIdentifier(e){return Vs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yi(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const d=()=>{if(0===s.length)throw new Zt(yt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let g=!1;for(;a<e.length;){const A=e[a];if("\\"===A){if(a+1===e.length)throw new Zt(yt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[a+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Zt(yt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=H,a+=2}else"`"===A?(g=!g,a++):"."!==A||g?(s+=A,a++):(d(),a++)}if(d(),g)throw new Zt(yt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yi(t)}static emptyPath(){return new Yi([])}}class In{constructor(e){this.path=e}static fromPath(e){return new In(Ni.fromString(e))}static fromName(e){return new In(Ni.fromString(e).popFirst(5))}static empty(){return new In(Ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new In(new Ni(e.slice()))}}class Gu{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function ia(r){return r.fields.find(e=>2===e.kind)}function Cs(r){return r.fields.filter(e=>2!==e.kind)}Gu.UNKNOWN_ID=-1;class zu{constructor(e,t){this.fieldPath=e,this.kind=t}}class ya{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ya(0,Do.min())}}function Mu(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=dr.fromTimestamp(1e9===s?new os(t+1,0):new os(t,s));return new Do(a,In.empty(),e)}function _l(r){return new Do(r.readTime,r.key,-1)}class Do{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Do(dr.min(),In.empty(),-1)}static max(){return new Do(dr.max(),In.empty(),-1)}}function Wu(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=In.comparator(r.documentKey,e.documentKey),0!==t?t:$r(r.largestBatchId,e.largestBatchId))}const vl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Va{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ps(r){return nu.apply(this,arguments)}function nu(){return nu=(0,Ee.Z)(function*(r){if(r.code!==yt.FAILED_PRECONDITION||r.message!==vl)throw r;$e("LocalStore","Unexpectedly lost primary lease")}),nu.apply(this,arguments)}class vt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vt((s,a)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,a)},this.catchCallback=d=>{this.wrapFailure(t,d).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof vt?t:vt.resolve(t)}catch(t){return vt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):vt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):vt.reject(t)}static resolve(e){return new vt((t,s)=>{t(e)})}static reject(e){return new vt((t,s)=>{s(e)})}static waitFor(e){return new vt((t,s)=>{let a=0,d=0,g=!1;e.forEach(A=>{++a,A.next(()=>{++d,g&&d===a&&t()},H=>s(H))}),g=!0,d===a&&t()})}static or(e){let t=vt.resolve(!1);for(const s of e)t=t.next(a=>a?vt.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,d)=>{s.push(t.call(this,a,d))}),this.waitFor(s)}static mapArray(e,t){return new vt((s,a)=>{const d=e.length,g=new Array(d);let A=0;for(let H=0;H<d;H++){const Q=H;t(e[Q]).next(ce=>{g[Q]=ce,++A,A===d&&s(g)},ce=>a(ce))}})}static doWhile(e,t){return new vt((s,a)=>{const d=()=>{!0===e()?t().next(()=>{d()},a):s()};d()})}}class za{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Qr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new _a(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=oa(s.target.error);this.v.reject(new _a(e,a))}}static open(e,t,s,a){try{return new za(t,e.transaction(a,s))}catch(d){throw new _a(t,d)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ic(t)}}class So{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===So.S((0,ft.z$)())&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),zo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ft.hl)())return!1;if(So.C())return!0;const e=(0,ft.z$)(),t=So.S(e),s=0<t&&t<10,a=So.N(e),d=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,Ee.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{a(new _a(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const A=g.target.error;a("VersionError"===A.name?new Zt(yt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new Zt(yt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new _a(e,A))},d.onupgradeneeded=g=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.V.O(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var d=this;return(0,Ee.Z)(function*(){const g="readonly"===t;let A=0;for(;;){++A;try{d.db=yield d.$(e);const H=za.open(d.db,e,g?"readonly":"readwrite",s),Q=a(H).next(ce=>(H.P(),ce)).catch(ce=>(H.abort(ce),vt.reject(ce))).toPromise();return Q.catch(()=>{}),yield H.R,Q}catch(H){const Q=H,ce="FirebaseError"!==Q.name&&A<3;if($e("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",ce),d.close(),!ce)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Eu{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return zo(this.L.delete())}}class _a extends Zt{constructor(e,t){super(yt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sa(r){return"IndexedDbTransactionError"===r.name}class ic{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),zo(s)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),zo(this.store.add(e))}get(e){return zo(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),zo(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),zo(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),d=[];return this.W(a,(g,A)=>{d.push(A)}).next(()=>d)}{const a=this.store.getAll(s.range);return new vt((d,g)=>{a.onerror=A=>{g(A.target.error)},a.onsuccess=A=>{d(A.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new vt((a,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{a(g.target.result)}})}J(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(d,g,A)=>A.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new vt((s,a)=>{t.onerror=d=>{const g=oa(d.target.error);a(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(A=>{A?g.continue():s()}):s()}})}W(e,t){const s=[];return new vt((a,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const A=g.target.result;if(!A)return void a();const H=new Eu(A),Q=t(A.primaryKey,A.value,H);if(Q instanceof vt){const ce=Q.catch(Ve=>(H.done(),vt.reject(Ve)));s.push(ce)}H.isDone?a():null===H.K?A.continue():A.continue(H.K)}}).next(()=>vt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zo(r){return new vt((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=oa(s.target.error);t(a)}})}let El=!1;function oa(r){const e=So.S((0,ft.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new Zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return El||(El=!0,setTimeout(()=>{throw s},0)),s}}return r}class xu{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){sa(s)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Ps(s)}yield t.et(6e4)}))}}class Da{constructor(e,t){this.localStore=e,this.persistence=t}nt(){var e=this;return(0,Ee.Z)(function*(t=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>e.st(s,t))}).apply(this,arguments)}st(e,t){const s=new Set;let a=t,d=!0;return vt.doWhile(()=>!0===d&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return $e("IndexBackiller",`Processing collection: ${g}`),this.it(e,g,a).next(A=>{a-=A,s.add(g)});d=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.rt(a,d)).next(A=>($e("IndexBackiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(e,t,A))).next(()=>g.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,d)=>{const g=_l(d);Wu(g,s)>0&&(s=g)}),new Do(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let to=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function ru(r){return null==r}function Jo(r){return 0===r&&1/r==-1/0}function il(r){return"number"==typeof r&&Number.isInteger(r)&&!Jo(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Ao(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Wa(e)),e=Sa(r.get(t),e);return Wa(e)}function Sa(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const d=r.charAt(a);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function Wa(r){return r+"\x01\x01"}function Aa(r){const e=r.length;if(gn(e>=2),2===e)return gn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Ni.emptyPath();const t=e-2,s=[];let a="";for(let d=0;d<e;){const g=r.indexOf("\x01",d);switch((g<0||g>t)&&ln(),r.charAt(g+1)){case"\x01":const A=r.substring(d,g);let H;0===a.length?H=A:(a+=A,H=a,a=""),s.push(H);break;case"\x10":a+=r.substring(d,g),a+="\0";break;case"\x11":a+=r.substring(d,g+1);break;default:ln()}d=g+2}return new Ni(s)}const Ua=["userId","batchId"];function iu(r,e){return[r,Ao(e)]}function Ka(r,e,t){return[r,Ao(e),t]}const zs={},wl=["prefixPath","collectionGroup","readTime","documentId"],wu=["prefixPath","collectionGroup","documentId"],Ku=["collectionGroup","readTime","prefixPath","documentId"],qu=["canonicalId","targetId"],Zu=["targetId","path"],Pu=["path","targetId"],sl=["collectionId","parent"],Cl=["indexId","uid"],Yu=["uid","sequenceNumber"],Il=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],su=["indexId","uid","orderedDocumentKey"],Nu=["userId","collectionPath","documentId"],q=["userId","collectionPath","largestBatchId"],E=["userId","collectionGroup","largestBatchId"],C=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],k=[...C,"documentOverlays"],re=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ye=re,Le=[...ye,"indexConfiguration","indexState","indexEntries"];class je extends Va{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function et(r,e){const t=_n(r);return So.M(t.ht,e)}function jt(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Sn(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Un(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Hn{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ei(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ei(this.root,e,this.comparator,!1)}getReverseIterator(){return new ei(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ei(this.root,e,this.comparator,!0)}}class ei{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?s(e.key,t):1,t&&a&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,s,a,d){this.key=e,this.value=t,this.color=null!=s?s:Bn.RED,this.left=null!=a?a:Bn.EMPTY,this.right=null!=d?d:Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,d){return new Bn(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const d=s(e,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===d?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Bn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ln();const e=this.left.check();if(e!==this.right.check())throw ln();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1,Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw ln()}get value(){throw ln()}get color(){throw ln()}get left(){throw ln()}get right(){throw ln()}copy(r,e,t,s,a){return this}insert(r,e,t){return new Bn(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jr(this.data.getIterator())}getIteratorFrom(e){return new Jr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(0!==this.comparator(a,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class Jr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xi(r){return r.hasNext()?r.getNext():void 0}class ti{constructor(e){this.fields=e,e.sort(Yi.comparator)}static empty(){return new ti([])}unionWith(e){let t=new qn(Yi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ws extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Is{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw"undefined"!=typeof DOMException&&a instanceof DOMException?new Ws("Invalid base64 string: "+a):a}}(e);return new Is(t)}static fromUint8Array(e){const t=function(s){let a="";for(let d=0;d<s.length;++d)a+=String.fromCharCode(s[d]);return a}(e);return new Is(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $r(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Is.EMPTY_BYTE_STRING=new Is("");const Ra=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(r){if(gn(!!r),"string"==typeof r){let e=0;const t=Ra.exec(r);if(gn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mi(r.seconds),nanos:mi(r.nanos)}}function mi(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function no(r){return"string"==typeof r?Is.fromBase64String(r):Is.fromUint8Array(r)}function ro(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ns(r){const e=r.mapValue.fields.__previous_value__;return ro(e)?Ns(e):e}function Fo(r){const e=Di(r.mapValue.fields.__local_write_time__.timestampValue);return new os(e.seconds,e.nanos)}class Lo{constructor(e,t,s,a,d,g,A,H,Q){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=A,this.longPollingOptions=H,this.useFetchStreams=Q}}class Vo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}const va={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jn={nullValue:"NULL_VALUE"};function pr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ro(r)?4:Qn(r)?9007199254740991:10:ln()}function vr(r,e){if(r===e)return!0;const t=pr(r);if(t!==pr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Fo(r).isEqual(Fo(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const d=Di(s.timestampValue),g=Di(a.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,no(r.bytesValue).isEqual(no(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return mi(s.geoPointValue.latitude)===mi(a.geoPointValue.latitude)&&mi(s.geoPointValue.longitude)===mi(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return mi(s.integerValue)===mi(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const d=mi(s.doubleValue),g=mi(a.doubleValue);return d===g?Jo(d)===Jo(g):isNaN(d)&&isNaN(g)}return!1}(r,e);case 9:return tu(r.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:return function(s,a){const d=s.mapValue.fields||{},g=a.mapValue.fields||{};if(jt(d)!==jt(g))return!1;for(const A in d)if(d.hasOwnProperty(A)&&(void 0===g[A]||!vr(d[A],g[A])))return!1;return!0}(r,e);default:return ln()}var a}function di(r,e){return void 0!==(r.values||[]).find(t=>vr(t,e))}function as(r,e){if(r===e)return 0;const t=pr(r),s=pr(e);if(t!==s)return $r(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $r(r.booleanValue,e.booleanValue);case 2:return function(a,d){const g=mi(a.integerValue||a.doubleValue),A=mi(d.integerValue||d.doubleValue);return g<A?-1:g>A?1:g===A?0:isNaN(g)?isNaN(A)?0:-1:1}(r,e);case 3:return Ea(r.timestampValue,e.timestampValue);case 4:return Ea(Fo(r),Fo(e));case 5:return $r(r.stringValue,e.stringValue);case 6:return function(a,d){const g=no(a),A=no(d);return g.compareTo(A)}(r.bytesValue,e.bytesValue);case 7:return function(a,d){const g=a.split("/"),A=d.split("/");for(let H=0;H<g.length&&H<A.length;H++){const Q=$r(g[H],A[H]);if(0!==Q)return Q}return $r(g.length,A.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,d){const g=$r(mi(a.latitude),mi(d.latitude));return 0!==g?g:$r(mi(a.longitude),mi(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,d){const g=a.values||[],A=d.values||[];for(let H=0;H<g.length&&H<A.length;++H){const Q=as(g[H],A[H]);if(Q)return Q}return $r(g.length,A.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,d){if(a===va.mapValue&&d===va.mapValue)return 0;if(a===va.mapValue)return 1;if(d===va.mapValue)return-1;const g=a.fields||{},A=Object.keys(g),H=d.fields||{},Q=Object.keys(H);A.sort(),Q.sort();for(let ce=0;ce<A.length&&ce<Q.length;++ce){const Ve=$r(A[ce],Q[ce]);if(0!==Ve)return Ve;const bt=as(g[A[ce]],H[Q[ce]]);if(0!==bt)return bt}return $r(A.length,Q.length)}(r.mapValue,e.mapValue);default:throw ln()}}function Ea(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return $r(r,e);const t=Di(r),s=Di(e),a=$r(t.seconds,s.seconds);return 0!==a?a:$r(t.nanos,s.nanos)}function Ks(r){return D(r)}function D(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Di(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?no(r.bytesValue).toBase64():"referenceValue"in r?In.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",d=!0;for(const g of s.values||[])d?d=!1:a+=",",a+=D(g);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let d="{",g=!0;for(const A of a)g?g=!1:d+=",",d+=`${A}:${D(s.fields[A])}`;return d+"}"}(r.mapValue):ln();var e}function J(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function we(r){return!!r&&"integerValue"in r}function Be(r){return!!r&&"arrayValue"in r}function ct(r){return!!r&&"nullValue"in r}function Ot(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function cn(r){return!!r&&"mapValue"in r}function mn(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Sn(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=mn(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mn(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Qn(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xr(r){return"nullValue"in r?jn:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?J(Vo.empty(),In.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:ln()}function xr(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?J(Vo.empty(),In.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?va:ln()}function Ro(r,e){const t=as(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function fo(r,e){const t=as(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ts{constructor(e){this.value=e}static empty(){return new Ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!cn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mn(t)}setAll(e){let t=Yi.emptyPath(),s={},a=[];e.forEach((g,A)=>{if(!t.isImmediateParentOf(A)){const H=this.getFieldsMap(t);this.applyChanges(H,s,a),s={},a=[],t=A.popLast()}g?s[A.lastSegment()]=mn(g):a.push(A.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,s,a)}delete(e){const t=this.field(e.popLast());cn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];cn(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Sn(t,(a,d)=>e[a]=d);for(const a of s)delete e[a]}clone(){return new Ts(mn(this.value))}}function Cu(r){const e=[];return Sn(r.fields,(t,s)=>{const a=new Yi([t]);if(cn(s)){const d=Cu(s.mapValue).fields;if(0===d.length)e.push(a);else for(const g of d)e.push(a.child(g))}else e.push(a)}),new ti(e)}class Gi{constructor(e,t,s,a,d,g,A){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=d,this.data=g,this.documentState=A}static newInvalidDocument(e){return new Gi(e,0,dr.min(),dr.min(),dr.min(),Ts.empty(),0)}static newFoundDocument(e,t,s,a){return new Gi(e,1,t,dr.min(),s,a,0)}static newNoDocument(e,t){return new Gi(e,2,t,dr.min(),dr.min(),Ts.empty(),0)}static newUnknownDocument(e,t){return new Gi(e,3,t,dr.min(),dr.min(),Ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mo{constructor(e,t){this.position=e,this.inclusive=t}}function Ba(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const d=e[a],g=r.position[a];if(s=d.field.isKeyField()?In.comparator(In.fromName(g.referenceValue),t.key):as(g,t.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function ol(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!vr(r.position[t],e.position[t]))return!1;return!0}class Hl{constructor(e,t="asc"){this.field=e,this.dir=t}}function sc(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class oc{}class yi extends oc{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Hd(e,t,s):"array-contains"===t?new R(e,s):"in"===t?new te(e,s):"not-in"===t?new pe(e,s):"array-contains-any"===t?new ut(e,s):new yi(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new T(e,s):new p(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(as(t,this.value)):null!==t&&pr(this.value)===pr(t)&&this.matchesComparison(as(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ln()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Qi extends oc{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Qi(e,t)}matches(e){return ou(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ou(r){return"and"===r.op}function xc(r){return"or"===r.op}function wa(r){return Tl(r)&&ou(r)}function Tl(r){for(const e of r.filters)if(e instanceof Qi)return!1;return!0}function au(r){if(r instanceof yi)return r.field.canonicalString()+r.op.toString()+Ks(r.value);if(wa(r))return r.filters.map(e=>au(e)).join(",");{const e=r.filters.map(t=>au(t)).join(",");return`${r.op}(${e})`}}function uu(r,e){return r instanceof yi?(t=r,(s=e)instanceof yi&&t.op===s.op&&t.field.isEqual(s.field)&&vr(t.value,s.value)):r instanceof Qi?function(t,s){return s instanceof Qi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,d,g)=>a&&uu(d,s.filters[g]),!0)}(r,e):void ln();var t,s}function Ma(r,e){const t=r.filters.concat(e);return Qi.create(t,r.op)}function Ou(r){return r instanceof yi?`${(e=r).field.canonicalString()} ${e.op} ${Ks(e.value)}`:r instanceof Qi?function(e){return e.op.toString()+" {"+e.getFilters().map(Ou).join(" ,")+"}"}(r):"Filter";var e}class Hd extends yi{constructor(e,t,s){super(e,t,s),this.key=In.fromName(s.referenceValue)}matches(e){const t=In.comparator(e.key,this.key);return this.matchesComparison(t)}}class T extends yi{constructor(e,t){super(e,"in",t),this.keys=v(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class p extends yi{constructor(e,t){super(e,"not-in",t),this.keys=v(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function v(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>In.fromName(s.referenceValue))}class R extends yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Be(t)&&di(t.arrayValue,this.value)}}class te extends yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&di(this.value.arrayValue,t)}}class pe extends yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!di(this.value.arrayValue,t)}}class ut extends yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Be(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>di(this.value.arrayValue,s))}}class xt{constructor(e,t=null,s=[],a=[],d=null,g=null,A=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=d,this.startAt=g,this.endAt=A,this.dt=null}}function fn(r,e=null,t=[],s=[],a=null,d=null,g=null){return new xt(r,e,t,s,a,d,g)}function Fn(r){const e=_n(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>au(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),ru(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ks(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ks(s)).join(",")),e.dt=t}return e.dt}function Cr(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!sc(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!uu(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ol(r.startAt,e.startAt)&&ol(r.endAt,e.endAt)}function Pr(r){return In.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Li(r,e){return r.filters.filter(t=>t instanceof yi&&t.field.isEqual(e))}function aa(r,e,t){let s=jn,a=!0;for(const d of Li(r,e)){let g=jn,A=!0;switch(d.op){case"<":case"<=":g=Xr(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,A=!1;break;case"!=":case"not-in":g=jn}Ro({value:s,inclusive:a},{value:g,inclusive:A})<0&&(s=g,a=A)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const g=t.position[d];Ro({value:s,inclusive:a},{value:g,inclusive:t.inclusive})<0&&(s=g,a=t.inclusive);break}return{value:s,inclusive:a}}function al(r,e,t){let s=va,a=!0;for(const d of Li(r,e)){let g=va,A=!0;switch(d.op){case">=":case">":g=xr(d.value),A=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,A=!1;break;case"!=":case"not-in":g=va}fo({value:s,inclusive:a},{value:g,inclusive:A})>0&&(s=g,a=A)}if(null!==t)for(let d=0;d<r.orderBy.length;++d)if(r.orderBy[d].field.isEqual(e)){const g=t.position[d];fo({value:s,inclusive:a},{value:g,inclusive:t.inclusive})>0&&(s=g,a=t.inclusive);break}return{value:s,inclusive:a}}class xa{constructor(e,t=null,s=[],a=[],d=null,g="F",A=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=d,this.limitType=g,this.startAt=A,this.endAt=H,this.wt=null,this._t=null}}function Pc(r,e,t,s,a,d,g,A){return new xa(r,e,t,s,a,d,g,A)}function bl(r){return new xa(r)}function ac(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Dl(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function ku(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function $l(r){return null!==r.collectionGroup}function Ca(r){const e=_n(r);if(null===e.wt){e.wt=[];const t=ku(e),s=Dl(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Hl(t)),e.wt.push(new Hl(Yi.keyField(),"asc"));else{let a=!1;for(const d of e.explicitOrderBy)e.wt.push(d),d.field.isKeyField()&&(a=!0);if(!a){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Hl(Yi.keyField(),d))}}}return e.wt}function Ia(r){const e=_n(r);if(!e._t)if("F"===e.limitType)e._t=fn(e.path,e.collectionGroup,Ca(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Ca(e))t.push(new Hl(d.field,"desc"===d.dir?"asc":"desc"));const s=e.endAt?new Mo(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Mo(e.startAt.position,e.startAt.inclusive):null;e._t=fn(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function uc(r,e){e.getFirstInequalityField(),ku(r);const t=r.filters.concat([e]);return new xa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function lc(r,e,t){return new xa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Gl(r,e){return Cr(Ia(r),Ia(e))&&r.limitType===e.limitType}function nd(r){return`${Fn(Ia(r))}|lt:${r.limitType}`}function Nc(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Ou(s)).join(", ")}]`),ru(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ks(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ks(s)).join(",")),`Target(${t})`}(Ia(r))}; limitType=${r.limitType})`}function Oc(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):In.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of Ca(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,d,g){const A=Ba(a,d,g);return a.inclusive?A<=0:A<0}(t.startAt,Ca(t),s)||t.endAt&&!function(a,d,g){const A=Ba(a,d,g);return a.inclusive?A>=0:A>0}(t.endAt,Ca(t),s)));var t,s}function $d(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Zh(r){return(e,t)=>{let s=!1;for(const a of Ca(r)){const d=zl(a,e,t);if(0!==d)return d;s=s||a.field.isKeyField()}return 0}}function zl(r,e,t){const s=r.field.isKeyField()?In.comparator(e.key,t.key):function(a,d,g){const A=d.data.field(a),H=g.data.field(a);return null!==A&&null!==H?as(A,H):ln()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ln()}}class Sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,d]of s)if(this.equalsFn(a,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return void(a[d]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Sn(this.inner,(t,s)=>{for(const[a,d]of s)e(a,d)})}isEmpty(){return Un(this.inner)}size(){return this.innerSize}}const lp=new Hn(In.comparator);function lu(){return lp}const Yh=new Hn(In.comparator);function rd(...r){let e=Yh;for(const t of r)e=e.insert(t.key,t);return e}function Qu(r){let e=Yh;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function qa(){return id()}function Gd(){return id()}function id(){return new Sl(r=>r.toString(),(r,e)=>r.isEqual(e))}const hm=new Hn(In.comparator),cp=new qn(In.comparator);function _i(...r){let e=cp;for(const t of r)e=e.add(t);return e}const Qh=new qn($r);function sd(){return Qh}function Jh(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jo(e)?"-0":e}}function Xh(r){return{integerValue:""+r}}function ef(r,e){return il(e)?Xh(e):Jh(r,e)}class od{constructor(){this._=void 0}}function fm(r,e,t){return r instanceof cc?function(s,a){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&ro(a)&&(a=Ns(a)),a&&(d.fields.__previous_value__=a),{mapValue:d}}(t,e):r instanceof Pa?dc(r,e):r instanceof Wl?nf(r,e):function(s,a){const d=kc(s,a),g=dp(d)+dp(s.gt);return we(d)&&we(s.gt)?Xh(g):Jh(s.serializer,g)}(r,e)}function tf(r,e,t){return r instanceof Pa?dc(r,e):r instanceof Wl?nf(r,e):t}function kc(r,e){return r instanceof hc?we(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class cc extends od{}class Pa extends od{constructor(e){super(),this.elements=e}}function dc(r,e){const t=hp(e);for(const s of r.elements)t.some(a=>vr(a,s))||t.push(s);return{arrayValue:{values:t}}}class Wl extends od{constructor(e){super(),this.elements=e}}function nf(r,e){let t=hp(e);for(const s of r.elements)t=t.filter(a=>!vr(a,s));return{arrayValue:{values:t}}}class hc extends od{constructor(e,t){super(),this.serializer=e,this.gt=t}}function dp(r){return mi(r.integerValue||r.doubleValue)}function hp(r){return Be(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class zd{constructor(e,t){this.field=e,this.transform=t}}class Wd{constructor(e,t){this.version=e,this.transformResults=t}}class io{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new io}static exists(e){return new io(void 0,e)}static updateTime(e){return new io(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class af{}function f(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Rt(r.key,io.none()):new L(r.key,r.data,io.none());{const t=r.data,s=Ts.empty();let a=new qn(Yi.comparator);for(let d of e.fields)if(!a.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?s.delete(d):s.set(d,g),a=a.add(d)}return new Z(r.key,s,new ti(a.toArray()),io.none())}}function l(r,e,t){r instanceof L?function(s,a,d){const g=s.value.clone(),A=Oe(s.fieldTransforms,a,d.transformResults);g.setAll(A),a.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,t):r instanceof Z?function(s,a,d){if(!sf(s.precondition,a))return void a.convertToUnknownDocument(d.version);const g=Oe(s.fieldTransforms,a,d.transformResults),A=a.data;A.setAll(me(s)),A.setAll(g),a.convertToFoundDocument(d.version,A).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function c(r,e,t,s){return r instanceof L?function(a,d,g,A){if(!sf(a.precondition,d))return g;const H=a.value.clone(),Q=qe(a.fieldTransforms,A,d);return H.setAll(Q),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null}(r,e,t,s):r instanceof Z?function(a,d,g,A){if(!sf(a.precondition,d))return g;const H=qe(a.fieldTransforms,A,d),Q=d.data;return Q.setAll(me(a)),Q.setAll(H),d.convertToFoundDocument(d.version,Q).setHasLocalMutations(),null===g?null:g.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(ce=>ce.field))}(r,e,t,s):(g=t,sf(r.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function _(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),d=kc(s.transform,a||null);null!=d&&(null===t&&(t=Ts.empty()),t.set(s.field,d))}return t||null}function S(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&tu(t,s,(a,d)=>function rf(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof Pa&&s instanceof Pa||t instanceof Wl&&s instanceof Wl?tu(t.elements,s.elements,vr):t instanceof hc&&s instanceof hc?vr(t.gt,s.gt):t instanceof cc&&s instanceof cc);var t,s}(a,d))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class L extends af{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Z extends af{constructor(e,t,s,a,d=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function me(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Oe(r,e,t){const s=new Map;gn(r.length===t.length);for(let a=0;a<t.length;a++){const d=r[a],g=d.transform,A=e.data.field(d.field);s.set(d.field,tf(g,A,t[a]))}return s}function qe(r,e,t){const s=new Map;for(const a of r){const d=a.transform,g=t.data.field(a.field);s.set(a.field,fm(d,g,e))}return s}class Rt extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gt extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qt{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const d=this.mutations[a];d.key.isEqual(e.key)&&l(d,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=c(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=c(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Gd();return this.mutations.forEach(a=>{const d=e.get(a.key),g=d.overlayedDocument;let A=this.applyToLocalView(g,d.mutatedFields);A=t.has(a.key)?null:A;const H=f(g,A);null!==H&&s.set(a.key,H),g.isValidDocument()||g.convertToNoDocument(dr.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_i())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,(t,s)=>S(t,s))&&tu(this.baseMutations,e.baseMutations,(t,s)=>S(t,s))}}class Yn{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){gn(e.mutations.length===s.length);let a=hm;const d=e.mutations;for(let g=0;g<d.length;g++)a=a.insert(d[g].key,s[g].version);return new Yn(e,t,s,a)}}class Sr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ta{constructor(e,t){this.count=e,this.unchangedNames=t}}var so,Bi;function ad(r){switch(r){default:return ln();case yt.CANCELLED:case yt.UNKNOWN:case yt.DEADLINE_EXCEEDED:case yt.RESOURCE_EXHAUSTED:case yt.INTERNAL:case yt.UNAVAILABLE:case yt.UNAUTHENTICATED:return!1;case yt.INVALID_ARGUMENT:case yt.NOT_FOUND:case yt.ALREADY_EXISTS:case yt.PERMISSION_DENIED:case yt.FAILED_PRECONDITION:case yt.ABORTED:case yt.OUT_OF_RANGE:case yt.UNIMPLEMENTED:case yt.DATA_LOSS:return!0}}function fp(r){if(void 0===r)return en("GRPC error has no .code"),yt.UNKNOWN;switch(r){case so.OK:return yt.OK;case so.CANCELLED:return yt.CANCELLED;case so.UNKNOWN:return yt.UNKNOWN;case so.DEADLINE_EXCEEDED:return yt.DEADLINE_EXCEEDED;case so.RESOURCE_EXHAUSTED:return yt.RESOURCE_EXHAUSTED;case so.INTERNAL:return yt.INTERNAL;case so.UNAVAILABLE:return yt.UNAVAILABLE;case so.UNAUTHENTICATED:return yt.UNAUTHENTICATED;case so.INVALID_ARGUMENT:return yt.INVALID_ARGUMENT;case so.NOT_FOUND:return yt.NOT_FOUND;case so.ALREADY_EXISTS:return yt.ALREADY_EXISTS;case so.PERMISSION_DENIED:return yt.PERMISSION_DENIED;case so.FAILED_PRECONDITION:return yt.FAILED_PRECONDITION;case so.ABORTED:return yt.ABORTED;case so.OUT_OF_RANGE:return yt.OUT_OF_RANGE;case so.UNIMPLEMENTED:return yt.UNIMPLEMENTED;case so.DATA_LOSS:return yt.DATA_LOSS;default:return ln()}}(Bi=so||(so={}))[Bi.OK=0]="OK",Bi[Bi.CANCELLED=1]="CANCELLED",Bi[Bi.UNKNOWN=2]="UNKNOWN",Bi[Bi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bi[Bi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bi[Bi.NOT_FOUND=5]="NOT_FOUND",Bi[Bi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bi[Bi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bi[Bi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bi[Bi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bi[Bi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bi[Bi.ABORTED=10]="ABORTED",Bi[Bi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bi[Bi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bi[Bi.INTERNAL=13]="INTERNAL",Bi[Bi.UNAVAILABLE=14]="UNAVAILABLE",Bi[Bi.DATA_LOSS=15]="DATA_LOSS";class pm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return fc}static getOrCreateInstance(){return null===fc&&(fc=new pm),fc}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let fc=null;function uf(){return new TextEncoder}const W_=new b([4294967295,4294967295],0);function gm(r){const e=uf().encode(r),t=new x;return t.update(e),new Uint8Array(t.digest())}function lf(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new b([t,s],0),new b([a,d],0)]}class pp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Kd(`Invalid padding: ${t}`);if(s<0)throw new Kd(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Kd(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Kd(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=b.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(b.fromNumber(s)));return 1===a.compare(W_)&&(a=new b([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=gm(e),[s,a]=lf(t);for(let d=0;d<this.hashCount;d++){const g=this.Et(s,a,d);if(!this.At(g))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),g=new pp(d,a,t);return s.forEach(A=>g.insert(A)),g}insert(e){if(0===this.It)return;const t=gm(e),[s,a]=lf(t);for(let d=0;d<this.hashCount;d++){const g=this.Et(s,a,d);this.Rt(g)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Kd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pc{constructor(e,t,s,a,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,qd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new pc(dr.min(),a,new Hn($r),lu(),_i())}}class qd{constructor(e,t,s,a,d){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new qd(s,t,_i(),_i(),_i())}}class cf{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class mm{constructor(e,t){this.targetId=e,this.Vt=t}}class ym{constructor(e,t,s=Is.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class _m{constructor(){this.St=0,this.Dt=Em(),this.Ct=Is.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=_i(),t=_i(),s=_i();return this.Dt.forEach((a,d)=>{switch(d){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:ln()}}),new qd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Em()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class K_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=lu(),this.zt=vm(),this.Wt=new Hn($r)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:ln()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,d=this.se(s);if(d){const g=d.target;if(Pr(g))if(0===a){const A=new In(g.path);this.Yt(s,A,Gi.newNoDocument(A,dr.min()))}else gn(1===a);else{const A=this.ie(s);if(A!==a){const H=this.re(e,A);0!==H&&(this.ee(s),this.Wt=this.Wt.insert(s,2===H?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=pm.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(Q,ce,Ve){var bt,$t,vn,Nn,Jn,ri;const ls={localCacheCount:ce,existenceFilterCount:Ve.count},Ci=Ve.unchangedNames;return Ci&&(ls.bloomFilter={applied:0===Q,hashCount:null!==(bt=null==Ci?void 0:Ci.hashCount)&&void 0!==bt?bt:0,bitmapLength:null!==(Nn=null===(vn=null===($t=null==Ci?void 0:Ci.bits)||void 0===$t?void 0:$t.bitmap)||void 0===vn?void 0:vn.length)&&void 0!==Nn?Nn:0,padding:null!==(ri=null===(Jn=null==Ci?void 0:Ci.bits)||void 0===Jn?void 0:Jn.padding)&&void 0!==ri?ri:0}),ls}(H,A,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:d="",padding:g=0},hashCount:A=0}=s;let H,Q;try{H=no(d).toUint8Array()}catch(ce){if(ce instanceof Ws)return _r("Decoding the base64 bloom filter in existence filter failed ("+ce.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ce}try{Q=new pp(H,g,A)}catch(ce){return _r(ce instanceof Kd?"BloomFilter error: ":"Applying bloom filter failed: ",ce),1}return 0===Q.It?1:a!==t-this.oe(e.targetId,Q)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(d=>{const g=this.Gt.ue(),A=`projects/${g.projectId}/databases/${g.database}/documents/${d.path.canonicalString()}`;t.vt(A)||(this.Yt(e,d,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((d,g)=>{const A=this.se(g);if(A){if(d.current&&Pr(A.target)){const H=new In(A.target.path);null!==this.jt.get(H)||this.ae(g,H)||this.Yt(g,H,Gi.newNoDocument(H,e))}d.Mt&&(t.set(g,d.Ot()),d.Ft())}});let s=_i();this.zt.forEach((d,g)=>{let A=!0;g.forEachWhile(H=>{const Q=this.se(H);return!Q||"TargetPurposeLimboResolution"===Q.purpose||(A=!1,!1)}),A&&(s=s.add(d))}),this.jt.forEach((d,g)=>g.setReadTime(e));const a=new pc(e,t,this.Wt,this.jt,s);return this.jt=lu(),this.zt=vm(),this.Wt=new Hn($r),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new _m,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new qn($r),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new _m),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function vm(){return new Hn(In.comparator)}function Em(){return new Hn(In.comparator)}const wm={asc:"ASCENDING",desc:"DESCENDING"},q_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ud={and:"AND",or:"OR"};class Al{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cm(r,e){return r.useProto3Json||ru(e)?e:{value:e}}function Zd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gp(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function aE(r,e){return Zd(r,e.toTimestamp())}function Wo(r){return gn(!!r),dr.fromTimestamp(function(e){const t=Di(e);return new os(t.seconds,t.nanos)}(r))}function Im(r,e){return(t=r,new Ni(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mp(r){const e=Ni.fromString(r);return gn(pf(e)),e}function Yd(r,e){return Im(r.databaseId,e.path)}function ul(r,e){const t=mp(e);if(t.get(1)!==r.databaseId.projectId)throw new Zt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Zt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new In(bm(t))}function yp(r,e){return Im(r.databaseId,e)}function Tm(r){const e=mp(r);return 4===e.length?Ni.emptyPath():bm(e)}function cu(r){return new Ni(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bm(r){return gn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function _p(r,e,t){return{name:Yd(r,e),fields:t.value.mapValue.fields}}function Dm(r,e,t){const s=ul(r,e.name),a=Wo(e.updateTime),d=e.createTime?Wo(e.createTime):dr.min(),g=new Ts({mapValue:{fields:e.fields}}),A=Gi.newFoundDocument(s,a,d,g);return t&&A.setHasCommittedMutations(),t?A.setHasCommittedMutations():A}function Qd(r,e){let t;if(e instanceof L)t={update:_p(r,e.key,e.value)};else if(e instanceof Rt)t={delete:Yd(r,e.key)};else if(e instanceof Z)t={update:_p(r,e.key,e.data),updateMask:ql(e.fieldMask)};else{if(!(e instanceof Gt))return ln();t={verify:Yd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,d){const g=d.transform;if(g instanceof cc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Pa)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Wl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof hc)return{fieldPath:d.field.canonicalString(),increment:g.gt};throw ln()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:aE(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:ln()),t;var a}function df(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?io.updateTime(Wo(a.updateTime)):void 0!==a.exists?io.exists(a.exists):io.none():io.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(d,g){let A=null;"setToServerValue"in g?(gn("REQUEST_TIME"===g.setToServerValue),A=new cc):"appendMissingElements"in g?A=new Pa(g.appendMissingElements.values||[]):"removeAllFromArray"in g?A=new Wl(g.removeAllFromArray.values||[]):"increment"in g?A=new hc(d,g.increment):ln();const H=Yi.fromServerFormat(g.fieldPath);return new zd(H,A)}(r,a)):[];var a;if(e.update){const a=ul(r,e.update.name),d=new Ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new ti((e.updateMask.fieldPaths||[]).map(Q=>Yi.fromServerFormat(Q)));return new Z(a,d,g,t,s)}return new L(a,d,t,s)}if(e.delete){const a=ul(r,e.delete);return new Rt(a,t)}if(e.verify){const a=ul(r,e.verify);return new Gt(a,t)}return ln()}function Sm(r,e){return{documents:[yp(r,e.path)]}}function vp(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=yp(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yp(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(H){if(0!==H.length)return ff(Qi.create(H,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const d=function(H){if(0!==H.length)return H.map(Q=>{return{field:Kl((ce=Q).field),direction:Rm(ce.dir)};var ce})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=Cm(r,e.limit);var A,H;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(A=e.startAt).inclusive,values:A.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function wi(r){let e=Tm(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){gn(1===s);const ce=t.from[0];ce.allDescendants?a=ce.collectionId:e=e.child(ce.collectionId)}let d=[];t.where&&(d=function(ce){const Ve=Ep(ce);return Ve instanceof Qi&&wa(Ve)?Ve.getFilters():[Ve]}(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(ce=>{return new Hl(ld((Ve=ce).field),function(bt){switch(bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ve.direction));var Ve}));let A=null;t.limit&&(A=function(ce){let Ve;return Ve="object"==typeof ce?ce.value:ce,ru(Ve)?null:Ve}(t.limit));let H=null;var ce;t.startAt&&(H=new Mo((ce=t.startAt).values||[],!!ce.before));let Q=null;return t.endAt&&(Q=function(ce){return new Mo(ce.values||[],!ce.before)}(t.endAt)),Pc(e,a,g,d,A,"F",H,Q)}function Ep(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ld(e.unaryFilter.field);return yi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=ld(e.unaryFilter.field);return yi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ld(e.unaryFilter.field);return yi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ld(e.unaryFilter.field);return yi.create(d,"!=",{nullValue:"NULL_VALUE"});default:return ln()}}(r):void 0!==r.fieldFilter?yi.create(ld((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ln()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Qi.create(e.compositeFilter.filters.map(t=>Ep(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ln()}}(e.compositeFilter.op))}(r):ln();var e}function Rm(r){return wm[r]}function hf(r){return q_[r]}function ll(r){return ud[r]}function Kl(r){return{fieldPath:r.canonicalString()}}function ld(r){return Yi.fromServerFormat(r.fieldPath)}function ff(r){return r instanceof yi?function(e){if("=="===e.op){if(Ot(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NAN"}};if(ct(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ot(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NOT_NAN"}};if(ct(e.value))return{unaryFilter:{field:Kl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(e.field),op:hf(e.op),value:e.value}}}(r):r instanceof Qi?function(e){const t=e.getFilters().map(s=>ff(s));return 1===t.length?t[0]:{compositeFilter:{op:ll(e.op),filters:t}}}(r):ln()}function ql(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pf(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Rl{constructor(e,t,s,a,d=dr.min(),g=dr.min(),A=Is.EMPTY_BYTE_STRING,H=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=A,this.expectedCount=H}withSequenceNumber(e){return new Rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gf{constructor(e){this.fe=e}}function wp(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Yd(a=r.fe,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Zd(a,d.version.toTimestamp()),createTime:Zd(a,d.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Ml(e.version)};else{if(!e.isUnknownDocument())return ln();s.unknownDocument={path:t.path.toArray(),version:Ml(e.version)}}var a,d;return s}function Cp(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ml(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xl(r){const e=new os(r.seconds,r.nanoseconds);return dr.fromTimestamp(e)}function Zl(r,e){const t=(e.baseMutations||[]).map(d=>df(r.fe,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const s=e.mutations.map(d=>df(r.fe,d)),a=os.fromMillis(e.localWriteTimeMs);return new Qt(e.batchId,a,t,s)}function Fc(r){const e=xl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?xl(r.lastLimboFreeSnapshotVersion):dr.min();let s;var a;return void 0!==r.query.documents?(gn(1===(a=r.query).documents.length),s=Ia(bl(Tm(a.documents[0])))):s=Ia(wi(r.query)),new Rl(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Is.fromBase64String(r.resumeToken))}function mf(r,e){const t=Ml(e.snapshotVersion),s=Ml(e.lastLimboFreeSnapshotVersion);let a;a=Pr(e.target)?Sm(r.fe,e.target):vp(r.fe,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fn(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Mm(r){const e=wi({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?lc(e,e.limit,"L"):e}function Ip(r,e){return new Sr(e.largestBatchId,df(r.fe,e.overlayMutation))}function xm(r,e){const t=e.path.lastSegment();return[r,Ao(e.path.popLast()),t]}function Pm(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Ml(s.readTime),documentKey:Ao(s.documentKey.path),largestBatchId:s.largestBatchId}}class J_{getBundleMetadata(e,t){return Tp(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:xl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Tp(e).put({bundleId:(s=t).id,createTime:Ml(Wo(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return X_(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Mm(a.bundledQuery),readTime:xl(a.readTime)};var a})}saveNamedQuery(e,t){return X_(e).put({name:(s=t).name,readTime:Ml(Wo(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Tp(r){return et(r,"bundles")}function X_(r){return et(r,"namedQueries")}class yf{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new yf(e,t.uid||"")}getOverlay(e,t){return _f(e).get(xm(this.userId,t)).next(s=>s?Ip(this.serializer,s):null)}getOverlays(e,t){const s=qa();return vt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((d,g)=>{const A=new Sr(t,g);a.push(this.we(e,A))}),vt.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(g=>a.add(Ao(g.getCollectionPath())));const d=[];return a.forEach(g=>{const A=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(_f(e).J("collectionPathOverlayIndex",A))}),vt.waitFor(d)}getOverlaysForCollection(e,t,s){const a=qa(),d=Ao(t),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return _f(e).j("collectionPathOverlayIndex",g).next(A=>{for(const H of A){const Q=Ip(this.serializer,H);a.set(Q.getKey(),Q)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const d=qa();let g;const A=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _f(e).X({index:"collectionGroupOverlayIndex",range:A},(H,Q,ce)=>{const Ve=Ip(this.serializer,Q);d.size()<a||Ve.largestBatchId===g?(d.set(Ve.getKey(),Ve),g=Ve.largestBatchId):ce.done()}).next(()=>d)}we(e,t){return _f(e).put(function(s,a,d){const[g,A,H]=xm(a,d.mutation.key);return{userId:a,collectionPath:A,documentId:H,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Qd(s.fe,d.mutation)}}(this.serializer,this.userId,t))}}function _f(r){return et(r,"documentOverlays")}class gc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mi(e.integerValue));else if("doubleValue"in e){const s=mi(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),Jo(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(no(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Qn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ln()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),In.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Nm(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function Om(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const d=Nm(255&t[a]);if(s+=d,8!==d)break}return s}(r);return Math.ceil(e/8)}gc.Ve=new gc;class bp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Om(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Om(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,a,!1),new Uint8Array(d.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class lE{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class cE{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class vf{constructor(){this.je=new bp,this.ze=new lE(this.je),this.We=new cE(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class cd{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new cd(this.indexId,this.documentKey,this.arrayValue,s)}}function Lc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=ev(r.arrayValue,e.arrayValue),0!==t?t:(t=ev(r.directionalValue,e.directionalValue),0!==t?t:In.comparator(r.documentKey,e.documentKey)))}function ev(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class dE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){gn(e.collectionGroup===this.collectionId);const t=ia(e);if(void 0!==t&&!this.en(t))return!1;const s=Cs(e);let a=new Set,d=0,g=0;for(;d<s.length&&this.en(s[d]);++d)a=a.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const A=s[d];if(!this.nn(this.Ze,A)||!this.sn(this.Ye[g++],A))return!1}++d}for(;d<s.length;++d){const A=s[d];if(g>=this.Ye.length||!this.sn(this.Ye[g++],A))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function tv(r){var e,t;if(gn(r instanceof yi||r instanceof Qi),r instanceof yi){if(r instanceof te){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(d=>yi.create(r.field,"==",d)))||[];return Qi.create(a,"or")}return r}const s=r.filters.map(a=>tv(a));return Qi.create(s,r.op)}function hE(r){if(0===r.getFilters().length)return[];const e=Dp(tv(r));return gn(Ef(e)),km(e)||Pl(e)?[e]:e.getFilters()}function km(r){return r instanceof yi}function Pl(r){return r instanceof Qi&&wa(r)}function Ef(r){return km(r)||Pl(r)||function(e){if(e instanceof Qi&&xc(e)){for(const t of e.getFilters())if(!km(t)&&!Pl(t))return!1;return!0}return!1}(r)}function Dp(r){if(gn(r instanceof yi||r instanceof Qi),r instanceof yi)return r;if(1===r.filters.length)return Dp(r.filters[0]);const e=r.filters.map(s=>Dp(s));let t=Qi.create(e,r.op);return t=Jd(t),Ef(t)?t:(gn(t instanceof Qi),gn(ou(t)),gn(t.filters.length>1),t.filters.reduce((s,a)=>wf(s,a)))}function wf(r,e){let t;return gn(r instanceof yi||r instanceof Qi),gn(e instanceof yi||e instanceof Qi),t=r instanceof yi?e instanceof yi?Qi.create([r,e],"and"):Cf(r,e):e instanceof yi?Cf(e,r):function(s,a){if(gn(s.filters.length>0&&a.filters.length>0),ou(s)&&ou(a))return Ma(s,a.getFilters());const d=xc(s)?s:a,g=xc(s)?a:s,A=d.filters.map(H=>wf(H,g));return Qi.create(A,"or")}(r,e),Jd(t)}function Cf(r,e){if(ou(e))return Ma(e,r.getFilters());{const t=e.filters.map(s=>wf(r,s));return Qi.create(t,"or")}}function Jd(r){if(gn(r instanceof yi||r instanceof Qi),r instanceof yi)return r;const e=r.getFilters();if(1===e.length)return Jd(e[0]);if(Tl(r))return r;const t=e.map(a=>Jd(a)),s=[];return t.forEach(a=>{a instanceof yi?s.push(a):a instanceof Qi&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Qi.create(s,r.op)}class Sp{constructor(){this.rn=new Ap}addToCollectionParentIndex(e,t){return this.rn.add(t),vt.resolve()}getCollectionParents(e,t){return vt.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return vt.resolve()}deleteFieldIndex(e,t){return vt.resolve()}getDocumentsMatchingTarget(e,t){return vt.resolve(null)}getIndexType(e,t){return vt.resolve(0)}getFieldIndexes(e,t){return vt.resolve([])}getNextCollectionGroupToUpdate(e){return vt.resolve(null)}getMinOffset(e,t){return vt.resolve(Do.min())}getMinOffsetFromCollectionGroup(e,t){return vt.resolve(Do.min())}updateCollectionGroup(e,t,s){return vt.resolve()}updateIndexEntries(e,t){return vt.resolve()}}class Ap{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new qn(Ni.comparator),d=!a.has(s);return this.index[t]=a.add(s),d}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new qn(Ni.comparator)).toArray()}}const cl=new Uint8Array(0);class Fm{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Ap,this.un=new Sl(s=>Fn(s),(s,a)=>Cr(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const d={collectionId:s,parent:Ao(a)};return Lm(e).put(d)}return vt.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[ba(t),""],!1,!0);return Lm(e).j(a).next(d=>{for(const g of d){if(g.collectionId!==t)break;s.push(Aa(g.parent))}return s})}addFieldIndex(e,t){const s=If(e),a={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])};var g;delete a.indexId;const d=s.add(a);if(t.indexState){const g=dd(e);return d.next(A=>{g.put(Pm(A,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const s=If(e),a=dd(e),d=Vc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Vc(e);let a=!0;const d=new Map;return vt.forEach(this.cn(t),g=>this.an(e,g).next(A=>{a&&(a=!!A),d.set(g,A)})).next(()=>{if(a){let g=_i();const A=[];return vt.forEach(d,(H,Q)=>{var ce;$e("IndexedDbIndexManager",`Using index ${ce=H,`id=${ce.indexId}|cg=${ce.collectionGroup}|f=${ce.fields.map(Ci=>`${Ci.fieldPath}:${Ci.kind}`).join(",")}`} to execute ${Fn(t)}`);const Ve=function(Ci,Bo){const vo=ia(Bo);if(void 0===vo)return null;for(const qs of Li(Ci,vo.fieldPath))switch(qs.op){case"array-contains-any":return qs.value.arrayValue.values||[];case"array-contains":return[qs.value]}return null}(Q,H),bt=function(Ci,Bo){const vo=new Map;for(const qs of Cs(Bo))for(const hu of Li(Ci,qs.fieldPath))switch(hu.op){case"==":case"in":vo.set(qs.fieldPath.canonicalString(),hu.value);break;case"not-in":case"!=":return vo.set(qs.fieldPath.canonicalString(),hu.value),Array.from(vo.values())}return null}(Q,H),$t=function(Ci,Bo){const vo=[];let qs=!0;for(const hu of Cs(Bo)){const Rc=0===hu.kind?aa(Ci,hu.fieldPath,Ci.startAt):al(Ci,hu.fieldPath,Ci.startAt);vo.push(Rc.value),qs&&(qs=Rc.inclusive)}return new Mo(vo,qs)}(Q,H),vn=function(Ci,Bo){const vo=[];let qs=!0;for(const hu of Cs(Bo)){const Rc=0===hu.kind?al(Ci,hu.fieldPath,Ci.endAt):aa(Ci,hu.fieldPath,Ci.endAt);vo.push(Rc.value),qs&&(qs=Rc.inclusive)}return new Mo(vo,qs)}(Q,H),Nn=this.hn(H,Q,$t),Jn=this.hn(H,Q,vn),ri=this.ln(H,Q,bt),ls=this.fn(H.indexId,Ve,Nn,$t.inclusive,Jn,vn.inclusive,ri);return vt.forEach(ls,Ci=>s.H(Ci,t.limit).next(Bo=>{Bo.forEach(vo=>{const qs=In.fromSegments(vo.documentKey);g.has(qs)||(g=g.add(qs),A.push(qs))})}))}).next(()=>A)}return vt.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:hE(Qi.create(e.filters,"and")).map(s=>fn(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,d,g,A){const H=(null!=t?t.length:1)*Math.max(s.length,d.length),Q=H/(null!=t?t.length:1),ce=[];for(let Ve=0;Ve<H;++Ve){const bt=t?this.dn(t[Ve/Q]):cl,$t=this.wn(e,bt,s[Ve%Q],a),vn=this._n(e,bt,d[Ve%Q],g),Nn=A.map(Jn=>this.wn(e,bt,Jn,!0));ce.push(...this.createRange($t,vn,Nn))}return ce}wn(e,t,s,a){const d=new cd(e,In.empty(),t,s);return a?d:d.Je()}_n(e,t,s,a){const d=new cd(e,In.empty(),t,s);return a?d.Je():d}an(e,t){const s=new dE(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(d=>{let g=null;for(const A of d)s.tn(A)&&(!g||A.fields.length>g.fields.length)&&(g=A);return g})}getIndexType(e,t){let s=2;const a=this.cn(t);return vt.forEach(a,d=>this.an(e,d).next(g=>{g?0!==s&&g.fields.length<function(A){let H=new qn(Yi.comparator),Q=!1;for(const ce of A.filters)for(const Ve of ce.getFlattenedFilters())Ve.field.isKeyField()||("array-contains"===Ve.op||"array-contains-any"===Ve.op?Q=!0:H=H.add(Ve.field));for(const ce of A.orderBy)ce.field.isKeyField()||(H=H.add(ce.field));return H.size+(Q?1:0)}(d)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new vf;for(const a of Cs(e)){const d=t.data.field(a.fieldPath);if(null==d)return null;const g=s.He(a.kind);gc.Ve._e(d,g)}return s.Qe()}dn(e){const t=new vf;return gc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new vf;return gc.Ve._e(J(this.databaseId,t),s.He(function(a){const d=Cs(a);return 0===d.length?0:d[d.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new vf);let d=0;for(const g of Cs(e)){const A=s[d++];for(const H of a)if(this.yn(t,g.fieldPath)&&Be(A))a=this.pn(a,g,A);else{const Q=H.He(g.kind);gc.Ve._e(A,Q)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],d=[];for(const g of s.arrayValue.values||[])for(const A of a){const H=new vf;H.seed(A.Qe()),gc.Ve._e(g,H.He(t.kind)),d.push(H)}return d}yn(e,t){return!!e.filters.find(s=>s instanceof yi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=If(e),a=dd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(d=>{const g=[];return vt.forEach(d,A=>a.get([A.indexId,this.uid]).next(H=>{g.push(function(Q,ce){const Ve=ce?new ya(ce.sequenceNumber,new Do(xl(ce.readTime),new In(Aa(ce.documentKey)),ce.largestBatchId)):ya.empty(),bt=Q.fields.map(([$t,vn])=>new zu(Yi.fromServerFormat($t),vn));return new Gu(Q.indexId,Q.collectionGroup,bt,Ve)}(A,H))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const d=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==d?d:$r(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=If(e),d=dd(e);return this.Tn(e).next(g=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(A=>vt.forEach(A,H=>d.put(Pm(H.indexId,this.user,g,s)))))}updateIndexEntries(e,t){const s=new Map;return vt.forEach(t,(a,d)=>{const g=s.get(a.collectionGroup);return(g?vt.resolve(g):this.getFieldIndexes(e,a.collectionGroup)).next(A=>(s.set(a.collectionGroup,A),vt.forEach(A,H=>this.En(e,a,H).next(Q=>{const ce=this.An(d,H);return Q.isEqual(ce)?vt.resolve():this.vn(e,d,H,Q,ce)}))))})}Rn(e,t,s,a){return Vc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Vc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Vc(e);let d=new qn(Lc);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(g,A)=>{d=d.add(new cd(s.indexId,t,A.arrayValue,A.directionalValue))}).next(()=>d)}An(e,t){let s=new qn(Lc);const a=this.mn(t,e);if(null==a)return s;const d=ia(t);if(null!=d){const g=e.data.field(d.fieldPath);if(Be(g))for(const A of g.arrayValue.values||[])s=s.add(new cd(t.indexId,e.key,this.dn(A),a))}else s=s.add(new cd(t.indexId,e.key,cl,a));return s}vn(e,t,s,a,d){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(A,H,Q,ce,Ve){const bt=A.getIterator(),$t=H.getIterator();let vn=Xi(bt),Nn=Xi($t);for(;vn||Nn;){let Jn=!1,ri=!1;if(vn&&Nn){const ls=Q(vn,Nn);ls<0?ri=!0:ls>0&&(Jn=!0)}else null!=vn?ri=!0:Jn=!0;Jn?(ce(Nn),Nn=Xi($t)):ri?(Ve(vn),vn=Xi(bt)):(vn=Xi(bt),Nn=Xi($t))}}(a,d,Lc,A=>{g.push(this.Rn(e,t,s,A))},A=>{g.push(this.Pn(e,t,s,A))}),vt.waitFor(g)}Tn(e){let t=1;return dd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,d)=>{d.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((g,A)=>Lc(g,A)).filter((g,A,H)=>!A||0!==Lc(g,H[A-1]));const a=[];a.push(e);for(const g of s){const A=Lc(g,e),H=Lc(g,t);if(0===A)a[0]=e.Je();else if(A>0&&H<0)a.push(g),a.push(g.Je());else if(H>0)break}a.push(t);const d=[];for(let g=0;g<a.length;g+=2){if(this.bn(a[g],a[g+1]))return[];d.push(IDBKeyRange.bound([a[g].indexId,this.uid,a[g].arrayValue,a[g].directionalValue,cl,[]],[a[g+1].indexId,this.uid,a[g+1].arrayValue,a[g+1].directionalValue,cl,[]]))}return d}bn(e,t){return Lc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vm)}getMinOffset(e,t){return vt.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||ln())).next(Vm)}}function Lm(r){return et(r,"collectionParents")}function Vc(r){return et(r,"indexEntries")}function If(r){return et(r,"indexConfiguration")}function dd(r){return et(r,"indexState")}function Vm(r){gn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;Wu(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Do(e.readTime,e.documentKey,t)}const Um={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ua{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uc(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let A=0;const H=s.X({range:g},(ce,Ve,bt)=>(A++,bt.delete()));d.push(H.next(()=>{gn(1===A)}));const Q=[];for(const ce of t.mutations){const Ve=Ka(e,ce.key.path,t.batchId);d.push(a.delete(Ve)),Q.push(ce.key)}return vt.waitFor(d).next(()=>Q)}function hd(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ln();e=r.noDocument}return JSON.stringify(e).length}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class Yl{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){gn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Yl(d,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).X({index:"userMutationsIndex",range:s},(a,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const d=pd(e),g=Fu(e);return g.add({}).next(A=>{gn("number"==typeof A);const H=new Qt(A,t,s,a),Q=function(bt,$t,vn){const Nn=vn.baseMutations.map(ri=>Qd(bt.fe,ri)),Jn=vn.mutations.map(ri=>Qd(bt.fe,ri));return{userId:$t,batchId:vn.batchId,localWriteTimeMs:vn.localWriteTime.toMillis(),baseMutations:Nn,mutations:Jn}}(this.serializer,this.userId,H),ce=[];let Ve=new qn((bt,$t)=>$r(bt.canonicalString(),$t.canonicalString()));for(const bt of a){const $t=Ka(this.userId,bt.key.path,A);Ve=Ve.add(bt.key.path.popLast()),ce.push(g.put(Q)),ce.push(d.put($t,zs))}return Ve.forEach(bt=>{ce.push(this.indexManager.addToCollectionParentIndex(e,bt))}),e.addOnCommittedListener(()=>{this.Vn[A]=H.keys()}),vt.waitFor(ce).next(()=>H)})}lookupMutationBatch(e,t){return Fu(e).get(t).next(s=>s?(gn(s.userId===this.userId),Zl(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?vt.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return Fu(e).X({index:"userMutationsIndex",range:a},(g,A,H)=>{A.userId===this.userId&&(gn(A.batchId>=s),d=Zl(this.serializer,A)),H.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Fu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).j("userMutationsIndex",t).next(s=>s.map(a=>Zl(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=iu(this.userId,t.path),a=IDBKeyRange.lowerBound(s),d=[];return pd(e).X({range:a},(g,A,H)=>{const[Q,ce,Ve]=g,bt=Aa(ce);if(Q===this.userId&&t.path.isEqual(bt))return Fu(e).get(Ve).next($t=>{if(!$t)throw ln();gn($t.userId===this.userId),d.push(Zl(this.serializer,$t))});H.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new qn($r);const a=[];return t.forEach(d=>{const g=iu(this.userId,d.path),A=IDBKeyRange.lowerBound(g),H=pd(e).X({range:A},(Q,ce,Ve)=>{const[bt,$t,vn]=Q,Nn=Aa($t);bt===this.userId&&d.path.isEqual(Nn)?s=s.add(vn):Ve.done()});a.push(H)}),vt.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,d=iu(this.userId,s),g=IDBKeyRange.lowerBound(d);let A=new qn($r);return pd(e).X({range:g},(H,Q,ce)=>{const[Ve,bt,$t]=H,vn=Aa(bt);Ve===this.userId&&s.isPrefixOf(vn)?vn.length===a&&(A=A.add($t)):ce.done()}).next(()=>this.Dn(e,A))}Dn(e,t){const s=[],a=[];return t.forEach(d=>{a.push(Fu(e).get(d).next(g=>{if(null===g)throw ln();gn(g.userId===this.userId),s.push(Zl(this.serializer,g))}))}),vt.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Uc(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),vt.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return vt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return pd(e).X({range:s},(d,g,A)=>{if(d[0]===this.userId){const H=Aa(d[1]);a.push(H)}else A.done()}).next(()=>{gn(0===a.length)})})}containsKey(e,t){return fd(e,this.userId,t)}xn(e){return Rp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fd(r,e,t){const s=iu(e,t.path),a=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return pd(r).X({range:d,Y:!0},(A,H,Q)=>{const[ce,Ve,bt]=A;ce===e&&Ve===a&&(g=!0),Q.done()}).next(()=>g)}function Fu(r){return et(r,"mutations")}function pd(r){return et(r,"documentMutations")}function Rp(r){return et(r,"mutationQueues")}class mc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new mc(0)}static Mn(){return new mc(-1)}}class Mp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new mc(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>dr.fromTimestamp(new os(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(gn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const d=[];return yc(e).X((g,A)=>{const H=Fc(A);H.sequenceNumber<=t&&null===s.get(H.targetId)&&(a++,d.push(this.removeTargetData(e,H)))}).next(()=>vt.waitFor(d)).next(()=>a)}forEachTarget(e,t){return yc(e).X((s,a)=>{const d=Fc(a);t(d)})}$n(e){return xp(e).get("targetGlobalKey").next(t=>(gn(null!==t),t))}On(e,t){return xp(e).put("targetGlobalKey",t)}Fn(e,t){return yc(e).put(mf(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Fn(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return yc(e).X({range:a,index:"queryTargetsIndex"},(g,A,H)=>{const Q=Fc(A);Cr(t,Q.target)&&(d=Q,H.done())}).next(()=>d)}addMatchingKeys(e,t,s){const a=[],d=dl(e);return t.forEach(g=>{const A=Ao(g.path);a.push(d.put({targetId:s,path:A})),a.push(this.referenceDelegate.addReference(e,s,g))}),vt.waitFor(a)}removeMatchingKeys(e,t,s){const a=dl(e);return vt.forEach(t,d=>{const g=Ao(d.path);return vt.waitFor([a.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,t){const s=dl(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=dl(e);let d=_i();return a.X({range:s,Y:!0},(g,A,H)=>{const Q=Aa(g[1]),ce=new In(Q);d=d.add(ce)}).next(()=>d)}containsKey(e,t){const s=Ao(t.path),a=IDBKeyRange.bound([s],[ba(s)],!1,!0);let d=0;return dl(e).X({index:"documentTargetsIndex",Y:!0,range:a},([g,A],H,Q)=>{0!==g&&(d++,Q.done())}).next(()=>d>0)}le(e,t){return yc(e).get(t).next(s=>s?Fc(s):null)}}function yc(r){return et(r,"targets")}function xp(r){return et(r,"targetGlobal")}function dl(r){return et(r,"targetDocuments")}function Bm([r,e],[t,s]){const a=$r(r,t);return 0===a?$r(e,s):a}class jm{constructor(e){this.Ln=e,this.buffer=new qn(Bm),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Bm(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nv{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){sa(s)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Ps(s)}yield t.Qn(3e5)}))}}class Hm{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return vt.resolve(to.ct);const s=new jm(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),vt.resolve(Um)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Um):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,d,g,A,H,Q;const ce=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ve=>(Ve>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ve}`),a=this.params.maximumSequenceNumbersToCollect):a=Ve,g=Date.now(),this.nthSequenceNumber(e,a))).next(Ve=>(s=Ve,A=Date.now(),this.removeTargets(e,s,t))).next(Ve=>(d=Ve,H=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ve=>(Q=Date.now(),Re()<=_t.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-ce}ms\n\tDetermined least recently used ${a} in `+(A-g)+`ms\n\tRemoved ${d} targets in `+(H-A)+`ms\n\tRemoved ${Ve} documents in `+(Q-H)+`ms\nTotal Duration: ${Q-ce}ms`),vt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:d,documentsRemoved:Ve})))}}class rv{constructor(e,t){this.db=e,this.garbageCollector=function Pp(r,e){return new Hm(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Xd(e,s)}removeReference(e,t,s){return Xd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Xd(e,t)}Xn(e,t){return function(s,a){let d=!1;return Rp(s).Z(g=>fd(s,g,a).next(A=>(A&&(d=!0),vt.resolve(!A)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let d=0;return this.Yn(e,(g,A)=>{if(A<=t){const H=this.Xn(e,g).next(Q=>{if(!Q)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,dr.min()),dl(e).delete([0,Ao(g.path)])))});a.push(H)}}).next(()=>vt.waitFor(a)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Xd(e,t)}Yn(e,t){const s=dl(e);let a,d=to.ct;return s.X({index:"documentTargetsIndex"},([g,A],{path:H,sequenceNumber:Q})=>{0===g?(d!==to.ct&&t(new In(Aa(a)),d),d=Q,a=H):d=to.ct}).next(()=>{d!==to.ct&&t(new In(Aa(a)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xd(r,e){return dl(r).put((s=r.currentSequenceNumber,{targetId:0,path:Ao(e.path),sequenceNumber:s}));var s}class $m{constructor(){this.changes=new Sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?vt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return gd(e).put(s)}removeEntry(e,t,s){return gd(e).delete(function(a,d){const g=a.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],Cp(d),g[g.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Gi.newInvalidDocument(t);return gd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Tf(t))},(a,d)=>{s=this.ts(t,d)}).next(()=>s)}es(e,t){let s={size:0,document:Gi.newInvalidDocument(t)};return gd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Tf(t))},(a,d)=>{s={document:this.ts(t,d),size:hd(d)}}).next(()=>s)}getEntries(e,t){let s=lu();return this.ns(e,t,(a,d)=>{const g=this.ts(a,d);s=s.insert(a,g)}).next(()=>s)}ss(e,t){let s=lu(),a=new Hn(In.comparator);return this.ns(e,t,(d,g)=>{const A=this.ts(d,g);s=s.insert(d,A),a=a.insert(d,hd(g))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return vt.resolve();let a=new qn(ov);t.forEach(H=>a=a.add(H));const d=IDBKeyRange.bound(Tf(a.first()),Tf(a.last())),g=a.getIterator();let A=g.getNext();return gd(e).X({index:"documentKeyIndex",range:d},(H,Q,ce)=>{const Ve=In.fromSegments([...Q.prefixPath,Q.collectionGroup,Q.documentId]);for(;A&&ov(A,Ve)<0;)s(A,null),A=g.getNext();A&&A.isEqual(Ve)&&(s(A,Q),A=g.hasNext()?g.getNext():null),A?ce.G(Tf(A)):ce.done()}).next(()=>{for(;A;)s(A,null),A=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const d=t.path,g=[d.popLast().toArray(),d.lastSegment(),Cp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],A=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gd(e).j(IDBKeyRange.bound(g,A,!0)).next(H=>{let Q=lu();for(const ce of H){const Ve=this.ts(In.fromSegments(ce.prefixPath.concat(ce.collectionGroup,ce.documentId)),ce);Ve.isFoundDocument()&&(Oc(t,Ve)||a.has(Ve.key))&&(Q=Q.insert(Ve.key,Ve))}return Q})}getAllFromCollectionGroup(e,t,s,a){let d=lu();const g=Np(t,s),A=Np(t,Do.max());return gd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,A,!0)},(H,Q,ce)=>{const Ve=this.ts(In.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);d=d.insert(Ve.key,Ve),d.size===a&&ce.done()}).next(()=>d)}newChangeBuffer(e){return new sv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gm(e).get("remoteDocumentGlobalKey").next(t=>(gn(!!t),t))}Zn(e,t){return Gm(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function uE(r,e){let t;if(e.document)t=Dm(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=In.fromSegments(e.noDocument.path),a=xl(e.noDocument.readTime);t=Gi.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ln();{const s=In.fromSegments(e.unknownDocument.path),a=xl(e.unknownDocument.version);t=Gi.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new os(s[0],s[1]);return dr.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(dr.min()))return s}return Gi.newInvalidDocument(e)}}function Iu(r){return new iv(r)}class sv extends $m{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Sl(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new qn((d,g)=>$r(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const A=this.us.get(d);if(t.push(this.os.removeEntry(e,d,A.readTime)),g.isValidDocument()){const H=wp(this.os.serializer,g);a=a.add(d.path.popLast()),s+=hd(H)-A.size,t.push(this.os.addEntry(e,d,H))}else if(s-=A.size,this.trackRemovals){const H=wp(this.os.serializer,g.convertToNoDocument(dr.min()));t.push(this.os.addEntry(e,d,H))}}),a.forEach(d=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.os.updateMetadata(e,s)),vt.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((d,g)=>{this.us.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function Gm(r){return et(r,"remoteDocumentGlobal")}function gd(r){return et(r,"remoteDocumentsV14")}function Tf(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Np(r,e){const t=e.documentKey.path.toArray();return[r,Cp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ov(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let d=0;d<t.length-2&&d<s.length-2;++d)if(a=$r(t[d],s[d]),a)return a;return a=$r(t.length,s.length),a||(a=$r(t[t.length-2],s[s.length-2]),a||$r(t[t.length-1],s[s.length-1]))}class av{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bf{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&c(s.mutation,a,ti.empty(),os.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,_i()).next(()=>s))}getLocalViewOfDocuments(e,t,s=_i()){const a=qa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(d=>{let g=rd();return d.forEach((A,H)=>{g=g.insert(A,H.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const s=qa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,_i()))}populateOverlays(e,t,s){const a=[];return s.forEach(d=>{t.has(d)||a.push(d)}),this.documentOverlayCache.getOverlays(e,a).next(d=>{d.forEach((g,A)=>{t.set(g,A)})})}computeViews(e,t,s,a){let d=lu();const g=id(),A=id();return t.forEach((H,Q)=>{const ce=s.get(Q.key);a.has(Q.key)&&(void 0===ce||ce.mutation instanceof Z)?d=d.insert(Q.key,Q):void 0!==ce?(g.set(Q.key,ce.mutation.getFieldMask()),c(ce.mutation,Q,ce.mutation.getFieldMask(),os.now())):g.set(Q.key,ti.empty())}),this.recalculateAndSaveOverlays(e,d).next(H=>(H.forEach((Q,ce)=>g.set(Q,ce)),t.forEach((Q,ce)=>{var Ve;return A.set(Q,new av(ce,null!==(Ve=g.get(Q))&&void 0!==Ve?Ve:null))}),A))}recalculateAndSaveOverlays(e,t){const s=id();let a=new Hn((g,A)=>g-A),d=_i();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const A of g)A.keys().forEach(H=>{const Q=t.get(H);if(null===Q)return;let ce=s.get(H)||ti.empty();ce=A.applyToLocalView(Q,ce),s.set(H,ce);const Ve=(a.get(A.batchId)||_i()).add(H);a=a.insert(A.batchId,Ve)})}).next(()=>{const g=[],A=a.getReverseIterator();for(;A.hasNext();){const H=A.getNext(),Q=H.key,ce=H.value,Ve=Gd();ce.forEach(bt=>{if(!d.has(bt)){const $t=f(t.get(bt),s.get(bt));null!==$t&&Ve.set(bt,$t),d=d.add(bt)}}),g.push(this.documentOverlayCache.saveOverlays(e,Q,Ve))}return vt.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return In.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):$l(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(d=>{const g=a-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-d.size):vt.resolve(qa());let A=-1,H=d;return g.next(Q=>vt.forEach(Q,(ce,Ve)=>(A<Ve.largestBatchId&&(A=Ve.largestBatchId),d.get(ce)?vt.resolve():this.remoteDocumentCache.getEntry(e,ce).next(bt=>{H=H.insert(ce,bt)}))).next(()=>this.populateOverlays(e,Q,d)).next(()=>this.computeViews(e,H,Q,_i())).next(ce=>({batchId:A,changes:Qu(ce)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new In(t)).next(s=>{let a=rd();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let d=rd();return this.indexManager.getCollectionParents(e,a).next(g=>vt.forEach(g,A=>{const H=(Q=t,ce=A.child(a),new xa(ce,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,ce;return this.getDocumentsMatchingCollectionQuery(e,H,s).next(Q=>{Q.forEach((ce,Ve)=>{d=d.insert(ce,Ve)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(a=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(d=>{a.forEach((A,H)=>{const Q=H.getKey();null===d.get(Q)&&(d=d.insert(Q,Gi.newInvalidDocument(Q)))});let g=rd();return d.forEach((A,H)=>{const Q=a.get(A);void 0!==Q&&c(Q.mutation,H,ti.empty(),os.now()),Oc(t,H)&&(g=g.insert(A,H))}),g})}}class zm{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return vt.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Wo(s.createTime)}),vt.resolve()}getNamedQuery(e,t){return vt.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:Mm(s.bundledQuery),readTime:Wo(s.readTime)}),vt.resolve();var s}}class uv{constructor(){this.overlays=new Hn(In.comparator),this.ls=new Map}getOverlay(e,t){return vt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=qa();return vt.forEach(t,a=>this.getOverlay(e,a).next(d=>{null!==d&&s.set(a,d)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,d)=>{this.we(e,t,d)}),vt.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(d=>this.overlays=this.overlays.remove(d)),this.ls.delete(s)),vt.resolve()}getOverlaysForCollection(e,t,s){const a=qa(),d=t.length+1,g=new In(t.child("")),A=this.overlays.getIteratorFrom(g);for(;A.hasNext();){const H=A.getNext().value,Q=H.getKey();if(!t.isPrefixOf(Q.path))break;Q.path.length===d&&H.largestBatchId>s&&a.set(H.getKey(),H)}return vt.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let d=new Hn((Q,ce)=>Q-ce);const g=this.overlays.getIterator();for(;g.hasNext();){const Q=g.getNext().value;if(Q.getKey().getCollectionGroup()===t&&Q.largestBatchId>s){let ce=d.get(Q.largestBatchId);null===ce&&(ce=qa(),d=d.insert(Q.largestBatchId,ce)),ce.set(Q.getKey(),Q)}}const A=qa(),H=d.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((Q,ce)=>A.set(Q,ce)),!(A.size()>=a)););return vt.resolve(A)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const g=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new Sr(t,s));let d=this.ls.get(t);void 0===d&&(d=_i(),this.ls.set(t,d)),this.ls.set(t,d.add(s.key))}}class Op{constructor(){this.fs=new qn(Na.ds),this.ws=new qn(Na._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Na(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Na(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new In(new Ni([])),s=new Na(t,e),a=new Na(t,e+1),d=[];return this.ws.forEachInRange([s,a],g=>{this.ys(g),d.push(g.key)}),d}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new In(new Ni([])),s=new Na(t,e),a=new Na(t,e+1);let d=_i();return this.ws.forEachInRange([s,a],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new Na(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Na{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return In.comparator(e.key,t.key)||$r(e.As,t.As)}static _s(e,t){return $r(e.As,t.As)||In.comparator(e.key,t.key)}}class Wm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new qn(Na.ds)}checkEmpty(e){return vt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const d=this.vs;this.vs++;const g=new Qt(d,t,s,a);this.mutationQueue.push(g);for(const A of a)this.Rs=this.Rs.add(new Na(A.key,d)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return vt.resolve(g)}lookupMutationBatch(e,t){return vt.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),d=a<0?0:a;return vt.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return vt.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Na(t,0),a=new Na(t,Number.POSITIVE_INFINITY),d=[];return this.Rs.forEachInRange([s,a],g=>{const A=this.Ps(g.As);d.push(A)}),vt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new qn($r);return t.forEach(a=>{const d=new Na(a,0),g=new Na(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([d,g],A=>{s=s.add(A.As)})}),vt.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let d=s;In.isDocumentKey(d)||(d=d.child(""));const g=new Na(new In(d),0);let A=new qn($r);return this.Rs.forEachWhile(H=>{const Q=H.key.path;return!!s.isPrefixOf(Q)&&(Q.length===a&&(A=A.add(H.As)),!0)},g),vt.resolve(this.Vs(A))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){gn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return vt.forEach(t.mutations,a=>{const d=new Na(a.key,t.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Na(t,0),a=this.Rs.firstAfterOrEqual(s);return vt.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return vt.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lv{constructor(e){this.Ds=e,this.docs=new Hn(In.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),d=a?a.size:0,g=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return vt.resolve(s?s.document.mutableCopy():Gi.newInvalidDocument(t))}getEntries(e,t){let s=lu();return t.forEach(a=>{const d=this.docs.get(a);s=s.insert(a,d?d.document.mutableCopy():Gi.newInvalidDocument(a))}),vt.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let d=lu();const g=t.path,A=new In(g.child("")),H=this.docs.getIteratorFrom(A);for(;H.hasNext();){const{key:Q,value:{document:ce}}=H.getNext();if(!g.isPrefixOf(Q.path))break;Q.path.length>g.length+1||Wu(_l(ce),s)<=0||(a.has(ce.key)||Oc(t,ce))&&(d=d.insert(ce.key,ce.mutableCopy()))}return vt.resolve(d)}getAllFromCollectionGroup(e,t,s,a){ln()}Cs(e,t){return vt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Km(this)}getSize(e){return vt.resolve(this.size)}}class Km extends $m{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),vt.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class cv{constructor(e){this.persistence=e,this.xs=new Sl(t=>Fn(t),Cr),this.lastRemoteSnapshotVersion=dr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Op,this.targetCount=0,this.Ms=mc.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),vt.resolve()}getLastRemoteSnapshotVersion(e){return vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vt.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),vt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),vt.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new mc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,vt.resolve()}updateTargetData(e,t){return this.Fn(t),vt.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,vt.resolve()}removeTargets(e,t,s){let a=0;const d=[];return this.xs.forEach((g,A)=>{A.sequenceNumber<=t&&null===s.get(A.targetId)&&(this.xs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,A.targetId)),a++)}),vt.waitFor(d).next(()=>a)}getTargetCount(e){return vt.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return vt.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),vt.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,d=[];return a&&t.forEach(g=>{d.push(a.markPotentiallyOrphaned(e,g))}),vt.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),vt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return vt.resolve(s)}containsKey(e,t){return vt.resolve(this.ks.containsKey(t))}}class kp{constructor(e,t){this.$s={},this.overlays={},this.Os=new to(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new cv(this),this.indexManager=new Sp,this.remoteDocumentCache=new lv(s=>this.referenceDelegate.Ls(s)),this.serializer=new gf(t),this.qs=new zm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Wm(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){$e("MemoryPersistence","Starting transaction:",e);const a=new qm(this.Os.next());return this.referenceDelegate.Us(),s(a).next(d=>this.referenceDelegate.Ks(a).next(()=>d)).toPromise().then(d=>(a.raiseOnCommittedEvent(),d))}Gs(e,t){return vt.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class qm extends Va{constructor(e){super(),this.currentSequenceNumber=e}}class eh{constructor(e){this.persistence=e,this.Qs=new Op,this.js=null}static zs(e){return new eh(e)}get Ws(){if(this.js)return this.js;throw ln()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),vt.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),vt.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),vt.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(d=>this.Ws.add(d.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vt.forEach(this.Ws,s=>{const a=In.fromPath(s);return this.Hs(e,a).next(d=>{d||t.removeEntry(a,dr.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return vt.or([()=>vt.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Nl{constructor(e){this.serializer=e}O(e,t,s,a){const d=new za("createOrUpgrade",t);var A;s<1&&a>=1&&(e.createObjectStore("owner"),(A=e).createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ua,{unique:!0}),A.createObjectStore("documentMutations"),Sf(e),function(A){A.createObjectStore("remoteDocuments")}(e));let g=vt.resolve();return s<3&&a>=3&&(0!==s&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),Sf(e)),g=g.next(()=>function(A){const H=A.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dr.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",Q)}(d))),s<4&&a>=4&&(0!==s&&(g=g.next(()=>function(A,H){return H.store("mutations").j().next(Q=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ua,{unique:!0});const ce=H.store("mutations"),Ve=Q.map(bt=>ce.put(bt));return vt.waitFor(Ve)})}(e,d))),g=g.next(()=>{!function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(g=g.next(()=>this.Ys(d))),s<6&&a>=6&&(g=g.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(d)))),s<7&&a>=7&&(g=g.next(()=>this.Zs(d))),s<8&&a>=8&&(g=g.next(()=>this.ti(e,d))),s<9&&a>=9&&(g=g.next(()=>{!function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(g=g.next(()=>this.ei(d))),s<11&&a>=11&&(g=g.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(g=g.next(()=>{!function(A){const H=A.createObjectStore("documentOverlays",{keyPath:Nu});H.createIndex("collectionPathOverlayIndex",q,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",E,{unique:!1})}(e)})),s<13&&a>=13&&(g=g.next(()=>function(A){const H=A.createObjectStore("remoteDocumentsV14",{keyPath:wl});H.createIndex("documentKeyIndex",wu),H.createIndex("collectionGroupIndex",Ku)}(e)).next(()=>this.ni(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(g=g.next(()=>this.si(e,d))),s<15&&a>=15&&(g=g.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:Cl}).createIndex("sequenceNumberIndex",Yu,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:Il}).createIndex("documentKeyIndex",su,{unique:!1})}(e))),g}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=hd(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>vt.forEach(a,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",g).next(A=>vt.forEach(A,H=>{gn(H.userId===d.userId);const Q=Zl(this.serializer,H);return Uc(e,d.userId,Q).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const d=[];return s.X((g,A)=>{const H=new Ni(g),Q=[0,Ao(H)];d.push(t.get(Q).next(ce=>ce?vt.resolve():t.put({targetId:0,path:Ao(H),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>vt.waitFor(d))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:sl});const s=t.store("collectionParents"),a=new Ap,d=g=>{if(a.add(g)){const A=g.lastSegment(),H=g.popLast();return s.put({collectionId:A,parent:Ao(H)})}};return t.store("remoteDocuments").X({Y:!0},(g,A)=>{const H=new Ni(g);return d(H.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([g,A,H],Q)=>{const ce=Aa(A);return d(ce.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const d=Fc(a),g=mf(this.serializer,d);return t.put(g)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((d,g)=>{const A=t.store("remoteDocumentsV14"),H=(Q=g,Q.document?new In(Ni.fromString(Q.document.name).popFirst(5)):Q.noDocument?In.fromSegments(Q.noDocument.path):Q.unknownDocument?In.fromSegments(Q.unknownDocument.path):ln()).path.toArray();var Q;const ce={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};a.push(A.put(ce))}).next(()=>vt.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Iu(this.serializer),d=new kp(eh.zs,this.serializer.fe);return s.j().next(g=>{const A=new Map;return g.forEach(H=>{var Q;let ce=null!==(Q=A.get(H.userId))&&void 0!==Q?Q:_i();Zl(this.serializer,H).keys().forEach(Ve=>ce=ce.add(Ve)),A.set(H.userId,ce)}),vt.forEach(A,(H,Q)=>{const ce=new U(Q),Ve=yf.de(this.serializer,ce),bt=d.getIndexManager(ce),$t=Yl.de(ce,this.serializer,bt,d.referenceDelegate);return new bf(a,$t,Ve,bt).recalculateAndSaveOverlaysForDocumentKeys(new je(t,to.ct),H).next()})})}}function Sf(r){r.createObjectStore("targetDocuments",{keyPath:Zu}).createIndex("documentTargetsIndex",Pu,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qu,{unique:!0}),r.createObjectStore("targetGlobal")}const Fp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lp{constructor(e,t,s,a,d,g,A,H,Q,ce,Ve=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=d,this.window=g,this.document=A,this.ri=Q,this.oi=ce,this.ui=Ve,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=bt=>Promise.resolve(),!Lp.D())throw new Zt(yt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rv(this,a),this.di=t+"main",this.serializer=new gf(H),this.wi=new So(this.di,this.ui,new Nl(this.serializer)),this.Bs=new Mp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Iu(this.serializer),this.qs=new J_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ce&&en("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zt(yt.FAILED_PRECONDITION,Fp);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new to(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,Ee.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>th(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(sa(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Af(e).get("owner").next(t=>vt.resolve(this.Ri(t)))}Pi(e){return th(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=et(s,"clientMetadata");return a.j().next(d=>{const g=e.Si(d,18e5),A=d.filter(H=>-1===g.indexOf(H));return vt.forEach(A,H=>a.delete(H.clientId)).next(()=>A)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?vt.resolve(!0):Af(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Zt(yt.FAILED_PRECONDITION,Fp);return!1}}return!(!this.networkEnabled||!this.inForeground)||th(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const g=!this.inForeground&&a.inForeground,A=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||g&&A)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new je(t,to.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>th(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Yl.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fm(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return yf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){$e("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",d=15===(g=this.ui)?Le:14===g?ye:13===g?re:12===g?k:11===g?C:void ln();var g;let A;return this.wi.runTransaction(e,a,d,H=>(A=new je(H,this.Os?this.Os.next():to.ct),"readwrite-primary"===t?this.Ti(A).next(Q=>!!Q||this.Ei(A)).next(Q=>{if(!Q)throw en(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Zt(yt.FAILED_PRECONDITION,vl);return s(A)}).next(Q=>this.vi(A).next(()=>Q)):this.Oi(A).next(()=>s(A)))).then(H=>(A.raiseOnCommittedEvent(),H))}Oi(e){return Af(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Zt(yt.FAILED_PRECONDITION,Fp)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Af(e).put("owner",t)}static D(){return So.D()}Ai(e){const t=Af(e);return t.get("owner").next(s=>this.Ri(s)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):vt.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(en(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ft.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return $e("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return en("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){en("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Af(r){return et(r,"owner")}function th(r){return et(r,"clientMetadata")}function Vp(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Up{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=_i(),a=_i();for(const d of t.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:a=a.add(d.doc.key)}return new Up(e,t.fromCache,s,a)}}class Zm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(d=>d||this.Gi(e,t,a,s)).next(d=>d||this.Qi(e,t))}Ki(e,t){if(ac(t))return vt.resolve(null);let s=Ia(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=lc(t,null,"F"),s=Ia(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=_i(...d);return this.Ui.getDocuments(e,g).next(A=>this.indexManager.getMinOffset(e,s).next(H=>{const Q=this.ji(t,A);return this.zi(t,Q,g,H.readTime)?this.Ki(e,lc(t,null,"F")):this.Wi(e,Q,t,H)}))})))}Gi(e,t,s,a){return ac(t)||a.isEqual(dr.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(d=>{const g=this.ji(t,d);return this.zi(t,g,s,a)?this.Qi(e,t):(Re()<=_t.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Nc(t)),this.Wi(e,g,t,Mu(a,-1)))})}ji(e,t){let s=new qn(Zh(e));return t.forEach((a,d)=>{Oc(e,d)&&(s=s.add(d))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(a)>0)}Qi(e,t){return Re()<=_t.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Nc(t)),this.Ui.getDocumentsMatchingQuery(e,t,Do.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class Bp{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Hn($r),this.Yi=new Sl(d=>Fn(d),Cr),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bf(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Ym(r,e,t,s){return new Bp(r,e,t,s)}function Qm(r,e){return md.apply(this,arguments)}function md(){return md=(0,Ee.Z)(function*(r,e){const t=_n(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(d=>(a=d,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],A=[];let H=_i();for(const Q of a){g.push(Q.batchId);for(const ce of Q.mutations)H=H.add(ce.key)}for(const Q of d){A.push(Q.batchId);for(const ce of Q.mutations)H=H.add(ce.key)}return t.localDocuments.getDocuments(s,H).next(Q=>({er:Q,removedBatchIds:g,addedBatchIds:A}))})})}),md.apply(this,arguments)}function jp(r,e){const t=_n(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),d=t.Zi.newChangeBuffer({trackRemovals:!0});return function(g,A,H,Q){const ce=H.batch,Ve=ce.keys();let bt=vt.resolve();return Ve.forEach($t=>{bt=bt.next(()=>Q.getEntry(A,$t)).next(vn=>{const Nn=H.docVersions.get($t);gn(null!==Nn),vn.version.compareTo(Nn)<0&&(ce.applyToRemoteDocument(vn,H),vn.isValidDocument()&&(vn.setReadTime(H.commitVersion),Q.addEntry(vn)))})}),bt.next(()=>g.mutationQueue.removeMutationBatch(A,ce))}(t,s,e,d).next(()=>d.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let A=_i();for(let H=0;H<g.mutationResults.length;++H)g.mutationResults[H].transformResults.length>0&&(A=A.add(g.batch.mutations[H].key));return A}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function Jm(r){const e=_n(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Hp(r,e){const t=_n(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const A=[];e.targetChanges.forEach((ce,Ve)=>{const bt=a.get(Ve);if(!bt)return;A.push(t.Bs.removeMatchingKeys(d,ce.removedDocuments,Ve).next(()=>t.Bs.addMatchingKeys(d,ce.addedDocuments,Ve)));let $t=bt.withSequenceNumber(d.currentSequenceNumber);var vn,Nn,Jn;null!==e.targetMismatches.get(Ve)?$t=$t.withResumeToken(Is.EMPTY_BYTE_STRING,dr.min()).withLastLimboFreeSnapshotVersion(dr.min()):ce.resumeToken.approximateByteSize()>0&&($t=$t.withResumeToken(ce.resumeToken,s)),a=a.insert(Ve,$t),Nn=$t,Jn=ce,(0===(vn=bt).resumeToken.approximateByteSize()||Nn.snapshotVersion.toMicroseconds()-vn.snapshotVersion.toMicroseconds()>=3e8||Jn.addedDocuments.size+Jn.modifiedDocuments.size+Jn.removedDocuments.size>0)&&A.push(t.Bs.updateTargetData(d,$t))});let H=lu(),Q=_i();if(e.documentUpdates.forEach(ce=>{e.resolvedLimboDocuments.has(ce)&&A.push(t.persistence.referenceDelegate.updateLimboDocument(d,ce))}),A.push(Rf(d,g,e.documentUpdates).next(ce=>{H=ce.nr,Q=ce.sr})),!s.isEqual(dr.min())){const ce=t.Bs.getLastRemoteSnapshotVersion(d).next(Ve=>t.Bs.setTargetsMetadata(d,d.currentSequenceNumber,s));A.push(ce)}return vt.waitFor(A).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,H,Q)).next(()=>H)}).then(d=>(t.Ji=a,d))}function Rf(r,e,t){let s=_i(),a=_i();return t.forEach(d=>s=s.add(d)),e.getEntries(r,s).next(d=>{let g=lu();return t.forEach((A,H)=>{const Q=d.get(A);H.isFoundDocument()!==Q.isFoundDocument()&&(a=a.add(A)),H.isNoDocument()&&H.version.isEqual(dr.min())?(e.removeEntry(A,H.readTime),g=g.insert(A,H)):!Q.isValidDocument()||H.version.compareTo(Q.version)>0||0===H.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(H),g=g.insert(A,H)):$e("LocalStore","Ignoring outdated watch update for ",A,". Current version:",Q.version," Watch version:",H.version)}),{nr:g,sr:a}})}function Xm(r,e){const t=_n(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function nh(r,e){const t=_n(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(d=>d?(a=d,vt.resolve(a)):t.Bs.allocateTargetId(s).next(g=>(a=new Rl(e,g,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function rh(r,e,t){return ih.apply(this,arguments)}function ih(){return ih=(0,Ee.Z)(function*(r,e,t){const s=_n(r),a=s.Ji.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,a)))}catch(g){if(!sa(g))throw g;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),ih.apply(this,arguments)}function $p(r,e,t){const s=_n(r);let a=dr.min(),d=_i();return s.persistence.runTransaction("Execute query","readonly",g=>function(A,H,Q){const ce=_n(A),Ve=ce.Yi.get(Q);return void 0!==Ve?vt.resolve(ce.Ji.get(Ve)):ce.Bs.getTargetData(H,Q)}(s,g,Ia(e)).next(A=>{if(A)return a=A.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(g,A.targetId).next(H=>{d=H})}).next(()=>s.Hi.getDocumentsMatchingQuery(g,e,t?a:dr.min(),t?d:_i())).next(A=>(zp(s,$d(e),A),{documents:A,ir:d})))}function ey(r,e){const t=_n(r),s=_n(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",d=>s.le(d,e).next(g=>g?g.target:null))}function Gp(r,e){const t=_n(r),s=t.Xi.get(e)||dr.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,Mu(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(zp(t,e,a),a))}function zp(r,e,t){let s=r.Xi.get(e)||dr.min();t.forEach((a,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),r.Xi.set(e,s)}function Mf(){return Mf=(0,Ee.Z)(function*(r,e,t,s){const a=_n(r);let d=_i(),g=lu();for(const Q of t){const ce=e.rr(Q.metadata.name);Q.document&&(d=d.add(ce));const Ve=e.ur(Q);Ve.setReadTime(e.cr(Q.metadata.readTime)),g=g.insert(ce,Ve)}const A=a.Zi.newChangeBuffer({trackRemovals:!0}),H=yield nh(a,(Q=s,Ia(bl(Ni.fromString(`__bundle__/docs/${Q}`)))));var Q;return a.persistence.runTransaction("Apply bundle documents","readwrite",Q=>Rf(Q,A,g).next(ce=>(A.apply(Q),ce)).next(ce=>a.Bs.removeMatchingKeysForTargetId(Q,H.targetId).next(()=>a.Bs.addMatchingKeys(Q,d,H.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(Q,ce.nr,ce.sr)).next(()=>ce.nr)))}),Mf.apply(this,arguments)}function ny(r,e){return hl.apply(this,arguments)}function hl(){return hl=(0,Ee.Z)(function*(r,e,t=_i()){const s=yield nh(r,Ia(Mm(e.bundledQuery))),a=_n(r);return a.persistence.runTransaction("Save named query","readwrite",d=>{const g=Wo(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return a.qs.saveNamedQuery(d,e);const A=s.withResumeToken(Is.EMPTY_BYTE_STRING,g);return a.Ji=a.Ji.insert(A.targetId,A),a.Bs.updateTargetData(d,A).next(()=>a.Bs.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>a.Bs.addMatchingKeys(d,t,s.targetId)).next(()=>a.qs.saveNamedQuery(d,e))})}),hl.apply(this,arguments)}function sh(r,e){return`firestore_clients_${r}_${e}`}function ry(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Wp(r,e){return`firestore_targets_${r}_${e}`}class Kp{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let d,g="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return g&&a.error&&(g="string"==typeof a.error.message&&"string"==typeof a.error.code,g&&(d=new Zt(a.error.code,a.error.message))),g?new Kp(e,t,a.state,d):(en("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(a=new Zt(s.error.code,s.error.message))),d?new Bc(e,s.state,a):(en("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,d=sd();for(let g=0;a&&g<s.activeTargetIds.length;++g)a=il(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return a?new oh(e,d):(en("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ah{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ah(t.clientId,t.onlineState):(en("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jc{constructor(){this.activeTargetIds=sd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qp{constructor(e,t,s,a,d){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Hn($r),this.started=!1,this.yr=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.pr=sh(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new jc),this.Tr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(A){return`firestore_bundle_loaded_v2_${A}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const d=e.getItem(sh(e.persistenceKey,a));if(d){const g=oh.ar(a,d);g&&(e.gr=e.gr.insert(g.clientId,g))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Wp(this.persistenceKey,e));if(s){const a=Bc.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wp(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if($e("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void en("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(d){let g=to.ct;if(null!=d)try{const A=JSON.parse(d);gn("number"==typeof A),g=A}catch(A){en("SharedClientState","Failed to read sequence number from WebStorage",A)}return g}(s.newValue);a!==to.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(d=>t.syncEngine.Qr(d)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new Kp(this.currentUser,e,t,s),d=ry(this.persistenceKey,this.currentUser,e);this.setItem(d,a.hr())}Cr(e){const t=ry(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Wp(this.persistenceKey,e),d=new Bc(e,t,s);this.setItem(a,d.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return oh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Kp.ar(new U(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return Bc.ar(a,t)}br(e){return ah.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),d=this.Sr(s),g=[],A=[];return d.forEach(H=>{a.has(H)||g.push(H)}),a.forEach(H=>{d.has(H)||A.push(H)}),this.syncEngine.Wr(g,A).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=sd();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class xf{constructor(){this.Hr=new jc,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new jc,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iy{Yr(e){}shutdown(){}}class Zp{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uh=null;function Yp(){return null===uh?uh=268435456+Math.round(2147483648*Math.random()):uh++,"0x"+uh.toString(16)}const Qp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Za="WebChannelConnection";class sy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,d){const g=Yp(),A=this.To(e,t);$e("RestConnection",`Sending RPC '${e}' ${g}:`,A,s);const H={};return this.Eo(H,a,d),this.Ao(e,A,H,s).then(Q=>($e("RestConnection",`Received RPC '${e}' ${g}: `,Q),Q),Q=>{throw _r("RestConnection",`RPC '${e}' ${g} failed with error: `,Q,"url: ",A,"request:",s),Q})}vo(e,t,s,a,d,g){return this.Io(e,t,s,a,d)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Y,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,d)=>e[d]=a),s&&s.headers.forEach((a,d)=>e[d]=a)}To(e,t){return`${this.mo}/v1/${t}:${Qp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const d=Yp();return new Promise((g,A)=>{const H=new Hu;H.setWithCredentials(!0),H.listenOnce(pa.COMPLETE,()=>{try{switch(H.getLastErrorCode()){case vu.NO_ERROR:const ce=H.getResponseJson();$e(Za,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(ce)),g(ce);break;case vu.TIMEOUT:$e(Za,`RPC '${e}' ${d} timed out`),A(new Zt(yt.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const Ve=H.getStatus();if($e(Za,`RPC '${e}' ${d} failed with status:`,Ve,"response text:",H.getResponseText()),Ve>0){let bt=H.getResponseJson();Array.isArray(bt)&&(bt=bt[0]);const $t=null==bt?void 0:bt.error;if($t&&$t.status&&$t.message){const vn=function(Nn){const Jn=Nn.toLowerCase().replace(/_/g,"-");return Object.values(yt).indexOf(Jn)>=0?Jn:yt.UNKNOWN}($t.status);A(new Zt(vn,$t.message))}else A(new Zt(yt.UNKNOWN,"Server responded with status "+H.getStatus()))}else A(new Zt(yt.UNAVAILABLE,"Connection failed."));break;default:ln()}}finally{$e(Za,`RPC '${e}' ${d} completed.`)}});const Q=JSON.stringify(a);$e(Za,`RPC '${e}' ${d} sending request:`,a),H.send(t,"POST",Q,s,15)})}Ro(e,t,s){const a=Yp(),d=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=_u(),A=Su(),H={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Q=this.longPollingOptions.timeoutSeconds;void 0!==Q&&(H.longPollingTimeout=Math.round(1e3*Q)),this.useFetchStreams&&(H.xmlHttpFactory=new ju({})),this.Eo(H.initMessageHeaders,t,s),H.encodeInitMessageHeaders=!0;const ce=d.join("");$e(Za,`Creating RPC '${e}' stream ${a}: ${ce}`,H);const Ve=g.createWebChannel(ce,H);let bt=!1,$t=!1;const vn=new dv({ro:Jn=>{$t?$e(Za,`Not sending because RPC '${e}' stream ${a} is closed:`,Jn):(bt||($e(Za,`Opening RPC '${e}' stream ${a} transport.`),Ve.open(),bt=!0),$e(Za,`RPC '${e}' stream ${a} sending:`,Jn),Ve.send(Jn))},oo:()=>Ve.close()}),Nn=(Jn,ri,ls)=>{Jn.listen(ri,Ci=>{try{ls(Ci)}catch(Bo){setTimeout(()=>{throw Bo},0)}})};return Nn(Ve,Fa.EventType.OPEN,()=>{$t||$e(Za,`RPC '${e}' stream ${a} transport opened.`)}),Nn(Ve,Fa.EventType.CLOSE,()=>{$t||($t=!0,$e(Za,`RPC '${e}' stream ${a} transport closed`),vn.wo())}),Nn(Ve,Fa.EventType.ERROR,Jn=>{$t||($t=!0,_r(Za,`RPC '${e}' stream ${a} transport errored:`,Jn),vn.wo(new Zt(yt.UNAVAILABLE,"The operation could not be completed")))}),Nn(Ve,Fa.EventType.MESSAGE,Jn=>{var ri;if(!$t){const ls=Jn.data[0];gn(!!ls);const Ci=ls,Bo=Ci.error||(null===(ri=Ci[0])||void 0===ri?void 0:ri.error);if(Bo){$e(Za,`RPC '${e}' stream ${a} received error:`,Bo);const vo=Bo.status;let qs=function(Rc){const ap=so[Rc];if(void 0!==ap)return fp(ap)}(vo),hu=Bo.message;void 0===qs&&(qs=yt.INTERNAL,hu="Unknown error status: "+vo+" with message "+Bo.message),$t=!0,vn.wo(new Zt(qs,hu)),Ve.close()}else $e(Za,`RPC '${e}' stream ${a} received:`,ls),vn._o(ls)}}),Nn(A,Bu.STAT_EVENT,Jn=>{Jn.stat===Xa.PROXY?$e(Za,`RPC '${e}' stream ${a} detected buffering proxy`):Jn.stat===Xa.NOPROXY&&$e(Za,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{vn.fo()},0),vn}}function Hc(){return"undefined"!=typeof window?window:null}function lh(){return"undefined"!=typeof document?document:null}function ch(r){return new Al(r,!0)}class Jp{constructor(e,t,s=1e3,a=1.5,d=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=d,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&$e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class $c{constructor(e,t,s,a,d,g,A,H){this.ii=e,this.$o=s,this.Oo=a,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=A,this.listener=H,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Jp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,Ee.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===yt.RESOURCE_EXHAUSTED?(en(t.toString()),en("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===yt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Zt(yt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hv extends $c{constructor(e,t,s,a,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,g),this.serializer=d}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Y_(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:ln(),a=e.targetChange.targetIds||[],d=function(H,Q){return H.useProto3Json?(gn(void 0===Q||"string"==typeof Q),Is.fromBase64String(Q||"")):(gn(void 0===Q||Q instanceof Uint8Array),Is.fromUint8Array(Q||new Uint8Array))}(r,e.targetChange.resumeToken),g=e.targetChange.cause,A=g&&function(H){const Q=void 0===H.code?yt.UNKNOWN:fp(H.code);return new Zt(Q,H.message||"")}(g);t=new ym(s,a,d,A||null)}else if("documentChange"in e){const s=e.documentChange,a=ul(r,s.document.name),d=Wo(s.document.updateTime),g=s.document.createTime?Wo(s.document.createTime):dr.min(),A=new Ts({mapValue:{fields:s.document.fields}}),H=Gi.newFoundDocument(a,d,g,A);t=new cf(s.targetIds||[],s.removedTargetIds||[],H.key,H)}else if("documentDelete"in e){const s=e.documentDelete,a=ul(r,s.document),d=s.readTime?Wo(s.readTime):dr.min(),g=Gi.newNoDocument(a,d);t=new cf([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,a=ul(r,s.document);t=new cf([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return ln();{const s=e.filter,{count:a=0,unchangedNames:d}=s,g=new Ta(a,d);t=new mm(s.targetId,g)}}var H;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return dr.min();const d=a.targetChange;return d.targetIds&&d.targetIds.length?dr.min():d.readTime?Wo(d.readTime):dr.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=cu(this.serializer),t.addTarget=function(a,d){let g;const A=d.target;if(g=Pr(A)?{documents:Sm(a,A)}:{query:vp(a,A)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=gp(a,d.resumeToken);const H=Cm(a,d.expectedCount);null!==H&&(g.expectedCount=H)}else if(d.snapshotVersion.compareTo(dr.min())>0){g.readTime=Zd(a,d.snapshotVersion.toTimestamp());const H=Cm(a,d.expectedCount);null!==H&&(g.expectedCount=H)}return g}(this.serializer,e);const s=function Am(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ln()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=cu(this.serializer),t.removeTarget=e,this.Wo(t)}}class fv extends $c{constructor(e,t,s,a,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,g),this.serializer=d,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(gn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Q_(r,e){return r&&r.length>0?(gn(void 0!==e),r.map(t=>function(s,a){let d=Wo(s.updateTime?s.updateTime:a);return d.isEqual(dr.min())&&(d=Wo(a)),new Wd(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Wo(e.commitTime);return this.listener.cu(s,t)}return gn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=cu(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Qd(this.serializer,s))};this.Wo(t)}}class pv extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Zt(yt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,d])=>this.connection.Io(e,t,s,a,d)).catch(a=>{throw"FirebaseError"===a.name?(a.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Zt(yt.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.vo(e,t,s,d,g,a)).catch(d=>{throw"FirebaseError"===d.name?(d.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Zt(yt.UNKNOWN,d.toString())})}terminate(){this.lu=!0}}class Xp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(en(t),this.mu=!1):$e("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class oy{constructor(e,t,s,a,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=d,this.Pu.Yr(A=>{s.enqueueAndForget((0,Ee.Z)(function*(){var H;_c(g)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,Ee.Z)(function*(Q){const ce=_n(Q);ce.vu.add(4),yield Gc(ce),ce.bu.set("Unknown"),ce.vu.delete(4),yield yd(ce)}),function(Q){return H.apply(this,arguments)})(g))}))}),this.bu=new Xp(s,a)}}function yd(r){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,Ee.Z)(function*(r){if(_c(r))for(const e of r.Ru)yield e(!0)}),Pf.apply(this,arguments)}function Gc(r){return eg.apply(this,arguments)}function eg(){return eg=(0,Ee.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),eg.apply(this,arguments)}function Nf(r,e){const t=_n(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Of(t)?ay(t):vd(t).Ko()&&tg(t,e))}function dh(r,e){const t=_n(r),s=vd(t);t.Au.delete(e),s.Ko()&&ng(t,e),0===t.Au.size&&(s.Ko()?s.jo():_c(t)&&t.bu.set("Unknown"))}function tg(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vd(r).su(e)}function ng(r,e){r.Vu.qt(e),vd(r).iu(e)}function ay(r){r.Vu=new K_({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),vd(r).start(),r.bu.gu()}function Of(r){return _c(r)&&!vd(r).Uo()&&r.Au.size>0}function _c(r){return 0===_n(r).vu.size}function uy(r){r.Vu=void 0}function fE(r){return ly.apply(this,arguments)}function ly(){return ly=(0,Ee.Z)(function*(r){r.Au.forEach((e,t)=>{tg(r,e)})}),ly.apply(this,arguments)}function rg(r,e){return ig.apply(this,arguments)}function ig(){return ig=(0,Ee.Z)(function*(r,e){uy(r),Of(r)?(r.bu.Iu(e),ay(r)):r.bu.set("Unknown")}),ig.apply(this,arguments)}function cy(r,e,t){return kf.apply(this,arguments)}function kf(){return kf=(0,Ee.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof ym&&2===e.state&&e.cause)try{yield(s=(0,Ee.Z)(function*(a,d){const g=d.cause;for(const A of d.targetIds)a.Au.has(A)&&(yield a.remoteSyncer.rejectListen(A,g),a.Au.delete(A),a.Vu.removeTarget(A))}),function(a,d){return s.apply(this,arguments)})(r,e)}catch(s){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield sg(r,s)}else if(e instanceof cf?r.Vu.Ht(e):e instanceof mm?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(dr.min()))try{const s=yield Jm(r.localStore);t.compareTo(s)>=0&&(yield function(a,d){const g=a.Vu.ce(d);return g.targetChanges.forEach((A,H)=>{if(A.resumeToken.approximateByteSize()>0){const Q=a.Au.get(H);Q&&a.Au.set(H,Q.withResumeToken(A.resumeToken,d))}}),g.targetMismatches.forEach((A,H)=>{const Q=a.Au.get(A);if(!Q)return;a.Au.set(A,Q.withResumeToken(Is.EMPTY_BYTE_STRING,Q.snapshotVersion)),ng(a,A);const ce=new Rl(Q.target,A,H,Q.sequenceNumber);tg(a,ce)}),a.remoteSyncer.applyRemoteEvent(g)}(r,t))}catch(s){$e("RemoteStore","Failed to raise snapshot:",s),yield sg(r,s)}var s}),kf.apply(this,arguments)}function sg(r,e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,Ee.Z)(function*(r,e,t){if(!sa(e))throw e;r.vu.add(1),yield Gc(r),r.bu.set("Offline"),t||(t=()=>Jm(r.localStore)),r.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield yd(r)}))}),Lu.apply(this,arguments)}function mv(r,e){return e().catch(t=>sg(r,t,e))}function hh(r){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Ee.Z)(function*(r){const e=_n(r),t=Xu(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;dy(e);)try{const a=yield Xm(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,hy(e,a)}catch(a){yield sg(e,a)}fy(e)&&yv(e)}),Ff.apply(this,arguments)}function dy(r){return _c(r)&&r.Eu.length<10}function hy(r,e){r.Eu.push(e);const t=Xu(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function fy(r){return _c(r)&&!Xu(r).Uo()&&r.Eu.length>0}function yv(r){Xu(r).start()}function py(r){return fh.apply(this,arguments)}function fh(){return fh=(0,Ee.Z)(function*(r){Xu(r).hu()}),fh.apply(this,arguments)}function _v(r){return ph.apply(this,arguments)}function ph(){return ph=(0,Ee.Z)(function*(r){const e=Xu(r);for(const t of r.Eu)e.uu(t.mutations)}),ph.apply(this,arguments)}function vv(r,e,t){return og.apply(this,arguments)}function og(){return og=(0,Ee.Z)(function*(r,e,t){const s=r.Eu.shift(),a=Yn.from(s,e,t);yield mv(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield hh(r)}),og.apply(this,arguments)}function Ev(r,e){return ag.apply(this,arguments)}function ag(){return ag=(0,Ee.Z)(function*(r,e){var t;e&&Xu(r).ou&&(yield(t=(0,Ee.Z)(function*(s,a){if(ad(d=a.code)&&d!==yt.ABORTED){const g=s.Eu.shift();Xu(s).Qo(),yield mv(s,()=>s.remoteSyncer.rejectFailedWrite(g.batchId,a)),yield hh(s)}var d}),function(s,a){return t.apply(this,arguments)})(r,e)),fy(r)&&yv(r)}),ag.apply(this,arguments)}function gy(r,e){return ug.apply(this,arguments)}function ug(){return ug=(0,Ee.Z)(function*(r,e){const t=_n(r);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const s=_c(t);t.vu.add(3),yield Gc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield yd(t)}),ug.apply(this,arguments)}function _d(r,e){return vc.apply(this,arguments)}function vc(){return vc=(0,Ee.Z)(function*(r,e){const t=_n(r);e?(t.vu.delete(2),yield yd(t)):e||(t.vu.add(2),yield Gc(t),t.bu.set("Unknown"))}),vc.apply(this,arguments)}function vd(r){return r.Su||(r.Su=function(e,t,s){const a=_n(e);return a.fu(),new hv(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fE.bind(null,r),ao:rg.bind(null,r),nu:cy.bind(null,r)}),r.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(r.Su.Qo(),Of(r)?ay(r):r.bu.set("Unknown")):(yield r.Su.stop(),uy(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function Xu(r){return r.Du||(r.Du=function(e,t,s){const a=_n(e);return a.fu(),new fv(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:py.bind(null,r),ao:Ev.bind(null,r),au:_v.bind(null,r),cu:vv.bind(null,r)}),r.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(r.Du.Qo(),yield hh(r)):(yield r.Du.stop(),r.Eu.length>0&&($e("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class lg{constructor(e,t,s,a,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=d,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,s,a,d){const g=Date.now()+s,A=new lg(e,t,g,a,d);return A.start(s),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zt(yt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ed(r,e){if(en("AsyncQueue",`${e}: ${r}`),sa(r))return new Zt(yt.UNAVAILABLE,`${e}: ${r}`);throw r}class Ec{constructor(e){this.comparator=e?(t,s)=>e(t,s)||In.comparator(t.key,s.key):(t,s)=>In.comparator(t.key,s.key),this.keyedMap=rd(),this.sortedSet=new Hn(this.comparator)}static emptySet(e){return new Ec(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,d=s.getNext().key;if(!a.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Ec;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class fl{constructor(){this.Cu=new Hn(In.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ln():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ol{constructor(e,t,s,a,d,g,A,H,Q){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=A,this.excludesMetadataChanges=H,this.hasCachedResults=Q}static fromInitialDocuments(e,t,s,a,d){const g=[];return t.forEach(A=>{g.push({type:0,doc:A})}),new Ol(e,t,Ec.emptySet(t),g,s,a,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Ya{constructor(){this.Nu=void 0,this.listeners=[]}}class zc{constructor(){this.queries=new Sl(e=>nd(e),Gl),this.onlineState="Unknown",this.ku=new Set}}function wd(r,e){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,Ee.Z)(function*(r,e){const t=_n(r),s=e.query;let a=!1,d=t.queries.get(s);if(d||(a=!0,d=new Ya),a)try{d.Nu=yield t.onListen(s)}catch(g){const A=Ed(g,`Initialization of query '${Nc(e.query)}' failed`);return void e.onError(A)}t.queries.set(s,d),d.listeners.push(e),e.Mu(t.onlineState),d.Nu&&e.$u(d.Nu)&&Cc(t)}),Tu.apply(this,arguments)}function gh(r,e){return wc.apply(this,arguments)}function wc(){return wc=(0,Ee.Z)(function*(r,e){const t=_n(r),s=e.query;let a=!1;const d=t.queries.get(s);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),a=0===d.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),wc.apply(this,arguments)}function Cd(r,e){const t=_n(r);let s=!1;for(const a of e){const g=t.queries.get(a.query);if(g){for(const A of g.listeners)A.$u(a)&&(s=!0);g.Nu=a}}s&&Cc(t)}function Id(r,e,t){const s=_n(r),a=s.queries.get(e);if(a)for(const d of a.listeners)d.onError(t);s.queries.delete(e)}function Cc(r){r.ku.forEach(e=>{e.next()})}class Ic{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Td{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Wc{constructor(e){this.serializer=e}rr(e){return ul(this.serializer,e)}ur(e){return e.metadata.exists?Dm(this.serializer,e.document,!1):Gi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Wo(e)}}class bd{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kc(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=Ni.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new Wc(this.serializer);for(const a of e)if(a.metadata.queries){const d=s.rr(a.metadata.name);for(const g of a.metadata.queries){const A=(t.get(g)||_i()).add(d);t.set(g,A)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function ty(r,e,t,s){return Mf.apply(this,arguments)}(e.localStore,new Wc(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield ny(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Kc(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class cg{constructor(e){this.key=e}}class dg{constructor(e){this.key=e}}class hg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=_i(),this.mutatedKeys=_i(),this.tc=Zh(e),this.ec=new Ec(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new fl,a=t?t.ec:this.ec;let d=t?t.mutatedKeys:this.mutatedKeys,g=a,A=!1;const H="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,Q="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((ce,Ve)=>{const bt=a.get(ce),$t=Oc(this.query,Ve)?Ve:null,vn=!!bt&&this.mutatedKeys.has(bt.key),Nn=!!$t&&($t.hasLocalMutations||this.mutatedKeys.has($t.key)&&$t.hasCommittedMutations);let Jn=!1;bt&&$t?bt.data.isEqual($t.data)?vn!==Nn&&(s.track({type:3,doc:$t}),Jn=!0):this.rc(bt,$t)||(s.track({type:2,doc:$t}),Jn=!0,(H&&this.tc($t,H)>0||Q&&this.tc($t,Q)<0)&&(A=!0)):!bt&&$t?(s.track({type:0,doc:$t}),Jn=!0):bt&&!$t&&(s.track({type:1,doc:bt}),Jn=!0,(H||Q)&&(A=!0)),Jn&&($t?(g=g.add($t),d=Nn?d.add(ce):d.delete(ce)):(g=g.delete(ce),d=d.delete(ce)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const ce="F"===this.query.limitType?g.last():g.first();g=g.delete(ce.key),d=d.delete(ce.key),s.track({type:1,doc:ce})}return{ec:g,ic:s,zi:A,mutatedKeys:d}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const d=e.ic.xu();d.sort((Q,ce)=>function(Ve,bt){const $t=vn=>{switch(vn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ln()}};return $t(Ve)-$t(bt)}(Q.type,ce.type)||this.tc(Q.doc,ce.doc)),this.oc(s);const g=t?this.uc():[],A=0===this.Zu.size&&this.current?1:0,H=A!==this.Xu;return this.Xu=A,0!==d.length||H?{snapshot:new Ol(this.query,e.ec,a,d,e.mutatedKeys,0===A,H,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:g}:{cc:g}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new fl,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=_i(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new dg(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new cg(s))}),t}hc(e){this.Yu=e.ir,this.Zu=_i();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ol.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class my{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class yy{constructor(e){this.key=e,this.fc=!1}}class _y{constructor(e,t,s,a,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.dc={},this.wc=new Sl(A=>nd(A),Gl),this._c=new Map,this.mc=new Set,this.gc=new Hn(In.comparator),this.yc=new Map,this.Ic=new Op,this.Tc={},this.Ec=new Map,this.Ac=mc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function vy(r,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Ee.Z)(function*(r,e){const t=Tg(r);let s,a;const d=t.wc.get(e);if(d)s=d.targetId,t.sharedClientState.addLocalQueryTarget(s),a=d.view.lc();else{const g=yield nh(t.localStore,Ia(e)),A=t.sharedClientState.addLocalQueryTarget(g.targetId);s=g.targetId,a=yield Vf(t,e,s,"current"===A,g.resumeToken),t.isPrimaryClient&&Nf(t.remoteStore,g)}return a}),Lf.apply(this,arguments)}function Vf(r,e,t,s,a){return fg.apply(this,arguments)}function fg(){return fg=(0,Ee.Z)(function*(r,e,t,s,a){r.Rc=(Ve,bt,$t)=>{return(vn=(0,Ee.Z)(function*(Nn,Jn,ri,ls){let Ci=Jn.view.sc(ri);Ci.zi&&(Ci=yield $p(Nn.localStore,Jn.query,!1).then(({documents:qs})=>Jn.view.sc(qs,Ci)));const Bo=ls&&ls.targetChanges.get(Jn.targetId),vo=Jn.view.applyChanges(Ci,Nn.isPrimaryClient,Bo);return wg(Nn,Jn.targetId,vo.cc),vo.snapshot}),function(Nn,Jn,ri,ls){return vn.apply(this,arguments)})(r,Ve,bt,$t);var vn};const d=yield $p(r.localStore,e,!0),g=new hg(e,d.ir),A=g.sc(d.documents),H=qd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),Q=g.applyChanges(A,r.isPrimaryClient,H);wg(r,t,Q.cc);const ce=new my(e,t,g);return r.wc.set(e,ce),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),Q.snapshot}),fg.apply(this,arguments)}function Ey(r,e){return pg.apply(this,arguments)}function pg(){return pg=(0,Ee.Z)(function*(r,e){const t=_n(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(d=>!Gl(d,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield rh(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),dh(t.remoteStore,s.targetId),yh(t,s.targetId)}).catch(Ps))):(yh(t,s.targetId),yield rh(t.localStore,s.targetId,!0))}),pg.apply(this,arguments)}function Uf(){return Uf=(0,Ee.Z)(function*(r,e,t){const s=xy(r);try{const a=yield function(d,g){const A=_n(d),H=os.now(),Q=g.reduce((bt,$t)=>bt.add($t.key),_i());let ce,Ve;return A.persistence.runTransaction("Locally write mutations","readwrite",bt=>{let $t=lu(),vn=_i();return A.Zi.getEntries(bt,Q).next(Nn=>{$t=Nn,$t.forEach((Jn,ri)=>{ri.isValidDocument()||(vn=vn.add(Jn))})}).next(()=>A.localDocuments.getOverlayedDocuments(bt,$t)).next(Nn=>{ce=Nn;const Jn=[];for(const ri of g){const ls=_(ri,ce.get(ri.key).overlayedDocument);null!=ls&&Jn.push(new Z(ri.key,ls,Cu(ls.value.mapValue),io.exists(!0)))}return A.mutationQueue.addMutationBatch(bt,H,Jn,g)}).next(Nn=>{Ve=Nn;const Jn=Nn.applyToLocalDocumentSet(ce,vn);return A.documentOverlayCache.saveOverlays(bt,Nn.batchId,Jn)})}).then(()=>({batchId:Ve.batchId,changes:Qu(ce)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,g,A){let H=d.Tc[d.currentUser.toKey()];H||(H=new Hn($r)),H=H.insert(g,A),d.Tc[d.currentUser.toKey()]=H}(s,a.batchId,t),yield Ql(s,a.changes),yield hh(s.remoteStore)}catch(a){const d=Ed(a,"Failed to persist write");t.reject(d)}}),Uf.apply(this,arguments)}function Cy(r,e){return gg.apply(this,arguments)}function gg(){return gg=(0,Ee.Z)(function*(r,e){const t=_n(r);try{const s=yield Hp(t.localStore,e);e.targetChanges.forEach((a,d)=>{const g=t.yc.get(d);g&&(gn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?g.fc=!0:a.modifiedDocuments.size>0?gn(g.fc):a.removedDocuments.size>0&&(gn(g.fc),g.fc=!1))}),yield Ql(t,s,e)}catch(s){yield Ps(s)}}),gg.apply(this,arguments)}function mg(r,e,t){const s=_n(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((d,g)=>{const A=g.view.Mu(e);A.snapshot&&a.push(A.snapshot)}),function(d,g){const A=_n(d);A.onlineState=g;let H=!1;A.queries.forEach((Q,ce)=>{for(const Ve of ce.listeners)Ve.Mu(g)&&(H=!0)}),H&&Cc(A)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function wv(r,e,t){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,Ee.Z)(function*(r,e,t){const s=_n(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),d=a&&a.key;if(d){let g=new Hn(In.comparator);g=g.insert(d,Gi.newNoDocument(d,dr.min()));const A=_i().add(d),H=new pc(dr.min(),new Map,new Hn($r),g,A);yield Cy(s,H),s.gc=s.gc.remove(d),s.yc.delete(e),by(s)}else yield rh(s.localStore,e,!1).then(()=>yh(s,e,t)).catch(Ps)}),Bf.apply(this,arguments)}function Cv(r,e){return yg.apply(this,arguments)}function yg(){return yg=(0,Ee.Z)(function*(r,e){const t=_n(r),s=e.batch.batchId;try{const a=yield jp(t.localStore,e);Iy(t,s,null),Eg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Ql(t,a)}catch(a){yield Ps(a)}}),yg.apply(this,arguments)}function pE(r,e,t){return _g.apply(this,arguments)}function _g(){return _g=(0,Ee.Z)(function*(r,e,t){const s=_n(r);try{const a=yield function(d,g){const A=_n(d);return A.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let Q;return A.mutationQueue.lookupMutationBatch(H,g).next(ce=>(gn(null!==ce),Q=ce.keys(),A.mutationQueue.removeMutationBatch(H,ce))).next(()=>A.mutationQueue.performConsistencyCheck(H)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(H,Q,g)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,Q)).next(()=>A.localDocuments.getDocuments(H,Q))})}(s.localStore,e);Iy(s,e,t),Eg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Ql(s,a)}catch(a){yield Ps(a)}}),_g.apply(this,arguments)}function mh(){return mh=(0,Ee.Z)(function*(r,e){const t=_n(r);_c(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const g=_n(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",A=>g.mutationQueue.getHighestUnacknowledgedBatchId(A))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=Ed(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),mh.apply(this,arguments)}function Eg(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function Iy(r,e,t){const s=_n(r);let a=s.Tc[s.currentUser.toKey()];if(a){const d=a.get(e);d&&(t?d.reject(t):d.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function yh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||Iv(r,s)})}function Iv(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(dh(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),by(r))}function wg(r,e,t){for(const s of t)s instanceof cg?(r.Ic.addReference(s.key,e),Ty(r,s)):s instanceof dg?($e("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||Iv(r,s.key)):ln()}function Ty(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||($e("SyncEngine","New document in limbo: "+t),r.mc.add(s),by(r))}function by(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new In(Ni.fromString(e)),s=r.Ac.next();r.yc.set(s,new yy(t)),r.gc=r.gc.insert(t,s),Nf(r.remoteStore,new Rl(Ia(bl(t.path)),s,"TargetPurposeLimboResolution",to.ct))}}function Ql(r,e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,Ee.Z)(function*(r,e,t){const s=_n(r),a=[],d=[],g=[];var A;s.wc.isEmpty()||(s.wc.forEach((A,H)=>{g.push(s.Rc(H,e,t).then(Q=>{if((Q||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(H.targetId,(null==Q?void 0:Q.fromCache)?"not-current":"current"),Q){a.push(Q);const ce=Up.Li(H.targetId,Q);d.push(ce)}}))}),yield Promise.all(g),s.dc.nu(a),yield(A=(0,Ee.Z)(function*(H,Q){const ce=_n(H);try{yield ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ve=>vt.forEach(Q,bt=>vt.forEach(bt.Fi,$t=>ce.persistence.referenceDelegate.addReference(Ve,bt.targetId,$t)).next(()=>vt.forEach(bt.Bi,$t=>ce.persistence.referenceDelegate.removeReference(Ve,bt.targetId,$t)))))}catch(Ve){if(!sa(Ve))throw Ve;$e("LocalStore","Failed to update sequence numbers: "+Ve)}for(const Ve of Q){const bt=Ve.targetId;if(!Ve.fromCache){const $t=ce.Ji.get(bt),Nn=$t.withLastLimboFreeSnapshotVersion($t.snapshotVersion);ce.Ji=ce.Ji.insert(bt,Nn)}}}),function(H,Q){return A.apply(this,arguments)})(s.localStore,d))}),Tc.apply(this,arguments)}function Tv(r,e){return jf.apply(this,arguments)}function jf(){return jf=(0,Ee.Z)(function*(r,e){const t=_n(r);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const s=yield Qm(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(g=>{g.forEach(A=>{A.reject(new Zt(yt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ql(t,s.er)}var a}),jf.apply(this,arguments)}function bv(r,e){const t=_n(r),s=t.yc.get(e);if(s&&s.fc)return _i().add(s.key);{let a=_i();const d=t._c.get(e);if(!d)return a;for(const g of d){const A=t.wc.get(g);a=a.unionWith(A.view.nc)}return a}}function Dy(r,e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,Ee.Z)(function*(r,e){const t=_n(r),s=yield $p(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&wg(t,e.targetId,a.cc),a}),Dd.apply(this,arguments)}function Dv(r,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Ee.Z)(function*(r,e){const t=_n(r);return Gp(t.localStore,e).then(s=>Ql(t,s))}),Hf.apply(this,arguments)}function Sv(r,e,t,s){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,Ee.Z)(function*(r,e,t,s){const a=_n(r),d=yield function(g,A){const H=_n(g),Q=_n(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",ce=>Q.Sn(ce,A).next(Ve=>Ve?H.localDocuments.getDocuments(ce,Ve):vt.resolve(null)))}(a.localStore,e);var A;null!==d?("pending"===t?yield hh(a.remoteStore):"acknowledged"===t||"rejected"===t?(Iy(a,e,s||null),Eg(a,e),A=e,_n(_n(a.localStore).mutationQueue).Cn(A)):ln(),yield Ql(a,d)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),Cg.apply(this,arguments)}function Ig(){return Ig=(0,Ee.Z)(function*(r,e){const t=_n(r);if(Tg(t),xy(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Sy(t,s.toArray());t.vc=!0,yield _d(t.remoteStore,!0);for(const d of a)Nf(t.remoteStore,d)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?s.push(g):a=a.then(()=>(yh(t,g),rh(t.localStore,g,!0))),dh(t.remoteStore,g)}),yield a,yield Sy(t,s),function(d){const g=_n(d);g.yc.forEach((A,H)=>{dh(g.remoteStore,H)}),g.Ic.Ts(),g.yc=new Map,g.gc=new Hn(In.comparator)}(t),t.vc=!1,yield _d(t.remoteStore,!1)}}),Ig.apply(this,arguments)}function Sy(r,e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,Ee.Z)(function*(r,e,t){const s=_n(r),a=[],d=[];for(const g of e){let A;const H=s._c.get(g);if(H&&0!==H.length){A=yield nh(s.localStore,Ia(H[0]));for(const Q of H){const ce=s.wc.get(Q),Ve=yield Dy(s,ce);Ve.snapshot&&d.push(Ve.snapshot)}}else{const Q=yield ey(s.localStore,g);A=yield nh(s.localStore,Q),yield Vf(s,Ay(Q),g,!1,A.resumeToken)}a.push(A)}return s.dc.nu(d),a}),$f.apply(this,arguments)}function Ay(r){return Pc(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Ry(r){const e=_n(r);return _n(_n(e.localStore).persistence).$i()}function My(r,e,t,s){return _h.apply(this,arguments)}function _h(){return _h=(0,Ee.Z)(function*(r,e,t,s){const a=_n(r);if(a.vc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const d=a._c.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield Gp(a.localStore,$d(d[0])),A=pc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Is.EMPTY_BYTE_STRING);yield Ql(a,g,A);break}case"rejected":yield rh(a.localStore,e,!0),yh(a,e,s);break;default:ln()}}),_h.apply(this,arguments)}function gE(r,e,t){return vh.apply(this,arguments)}function vh(){return vh=(0,Ee.Z)(function*(r,e,t){const s=Tg(r);if(s.vc){for(const a of e){if(s._c.has(a)){$e("SyncEngine","Adding an already active target "+a);continue}const d=yield ey(s.localStore,a),g=yield nh(s.localStore,d);yield Vf(s,Ay(d),g.targetId,!1,g.resumeToken),Nf(s.remoteStore,g)}for(const a of t)s._c.has(a)&&(yield rh(s.localStore,a,!1).then(()=>{dh(s.remoteStore,a),yh(s,a)}).catch(Ps))}}),vh.apply(this,arguments)}function Tg(r){const e=_n(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wv.bind(null,e),e.dc.nu=Cd.bind(null,e.eventManager),e.dc.Pc=Id.bind(null,e.eventManager),e}function xy(r){const e=_n(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pE.bind(null,e),e}class Sd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=ch(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ym(this.persistence,new Zm,e.initialUser,this.serializer)}createPersistence(e){return new kp(eh.zs,this.serializer)}createSharedClientState(e){return new xf}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wh extends Sd{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield xy(s.Vc.syncEngine),yield hh(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Ym(this.persistence,new Zm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new nv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new Da(t,this.persistence);return new xu(e.asyncQueue,s)}createPersistence(e){const t=Vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new Lp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Hc(),lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new xf}}class Py extends wh{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof qp&&(s.sharedClientState.syncEngine={jr:Sv.bind(null,a),zr:My.bind(null,a),Wr:gE.bind(null,a),$i:Ry.bind(null,a),Qr:Dv.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var d=(0,Ee.Z)(function*(g){yield function Av(r,e){return Ig.apply(this,arguments)}(s.Vc.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Hc();if(!qp.D(t))throw new Zt(yt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Jl{initialize(e,t){var s=this;return(0,Ee.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>mg(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Tv.bind(null,s.syncEngine),yield _d(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zc}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=new sy(e.databaseInfo);return new pv(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,d=A=>mg(this.syncEngine,A,0),g=Zp.D()?new Zp:new iy,new oy(t,s,a,d,g);var t,s,a,d,g}createSyncEngine(e,t){return function(s,a,d,g,A,H,Q){const ce=new _y(s,a,d,g,A,H);return Q&&(ce.vc=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const s=_n(t);$e("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield Gc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ch(r,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ad{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mE{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const d=yield e.$c(a);return new Td(JSON.parse(d),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Rv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Zt(yt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,Ee.Z)(function*(d,g){const A=_n(d),H=cu(A.serializer)+"/documents",Q={documents:g.map($t=>Yd(A.serializer,$t))},ce=yield A.vo("BatchGetDocuments",H,Q,g.length),Ve=new Map;ce.forEach($t=>{const vn=function Z_(r,e){return"found"in e?function(t,s){gn(!!s.found);const a=ul(t,s.found.name),d=Wo(s.found.updateTime),g=s.found.createTime?Wo(s.found.createTime):dr.min(),A=new Ts({mapValue:{fields:s.found.fields}});return Gi.newFoundDocument(a,d,g,A)}(r,e):"missing"in e?function(t,s){gn(!!s.missing),gn(!!s.readTime);const a=ul(t,s.missing),d=Wo(s.readTime);return Gi.newNoDocument(a,d)}(r,e):ln()}(A.serializer,$t);Ve.set(vn.key.toString(),vn)});const bt=[];return g.forEach($t=>{const vn=Ve.get($t.toString());gn(!!vn),bt.push(vn)}),bt}),function(d,g){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rt(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const d=In.fromPath(a);e.mutations.push(new Gt(d,e.precondition(d)))}),yield(s=(0,Ee.Z)(function*(a,d){const g=_n(a),A=cu(g.serializer)+"/documents",H={writes:d.map(Q=>Qd(g.serializer,Q))};yield g.Io("Commit",A,H)}),function(a,d){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ln();t=dr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Zt(yt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dr.min())?io.exists(!1):io.updateTime(t):io.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dr.min()))throw new Zt(yt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return io.updateTime(t)}return io.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gf{constructor(e,t,s,a,d){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=d,this.Bc=s.maxAttempts,this.qo=new Jp(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const t=new Rv(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(d=>{e.Uc(d)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!ru(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ad(t)}return!1}}class zf{constructor(e,t,s,a){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=U.UNAUTHENTICATED,this.clientId=eu.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var g=(0,Ee.Z)(function*(A){$e("FirestoreClient","Received user=",A.uid),yield d.authCredentialListener(A),d.user=A});return function(A){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(s,g=>($e("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zt(yt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Ed(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Ih(r,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Ee.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,Ee.Z)(function*(d){s.isEqual(d)||(yield Qm(e.localStore,d),s=d)});return function(d){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),Wf.apply(this,arguments)}function Th(r,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Ee.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield bh(r);$e("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>gy(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,d)=>gy(e.remoteStore,d)),r._onlineComponents=e}),Kf.apply(this,arguments)}function Dg(r){return"FirebaseError"===r.name?r.code===yt.FAILED_PRECONDITION||r.code===yt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function bh(r){return qf.apply(this,arguments)}function qf(){return qf=(0,Ee.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ih(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Dg(t))throw t;_r("Error using user provided cache. Falling back to memory cache: "+t),yield Ih(r,new Sd)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield Ih(r,new Sd);return r._offlineComponents}),qf.apply(this,arguments)}function Zf(r){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Ee.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield Th(r,r._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield Th(r,new Jl))),r._onlineComponents}),Yf.apply(this,arguments)}function Sg(r){return bh(r).then(e=>e.persistence)}function Rd(r){return bh(r).then(e=>e.localStore)}function Ag(r){return Zf(r).then(e=>e.remoteStore)}function Rg(r){return Zf(r).then(e=>e.syncEngine)}function Md(r){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,Ee.Z)(function*(r){const e=yield Zf(r),t=e.eventManager;return t.onListen=vy.bind(null,e.syncEngine),t.onUnlisten=Ey.bind(null,e.syncEngine),t}),Qf.apply(this,arguments)}function xg(r,e,t={}){const s=new Qr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,d,g,A,H){const Q=new Ad({next:Ve=>{d.enqueueAndForget(()=>gh(a,ce));const bt=Ve.docs.has(g);!bt&&Ve.fromCache?H.reject(new Zt(yt.UNAVAILABLE,"Failed to get document because the client is offline.")):bt&&Ve.fromCache&&A&&"server"===A.source?H.reject(new Zt(yt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Ve)},error:Ve=>H.reject(Ve)}),ce=new Ic(bl(g.path),Q,{includeMetadataChanges:!0,Ku:!0});return wd(a,ce)}(yield Md(r),r.asyncQueue,e,t,s)})),s.promise}function Pg(r,e,t={}){const s=new Qr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,d,g,A,H){const Q=new Ad({next:Ve=>{d.enqueueAndForget(()=>gh(a,ce)),Ve.fromCache&&"server"===A.source?H.reject(new Zt(yt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Ve)},error:Ve=>H.reject(Ve)}),ce=new Ic(g,Q,{includeMetadataChanges:!0,Ku:!0});return wd(a,ce)}(yield Md(r),r.asyncQueue,e,t,s)})),s.promise}function By(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const jy=new Map;function Jf(r,e,t){if(!t)throw new Zt(yt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Hy(r,e,t,s){if(!0===e&&!0===s)throw new Zt(yt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function la(r){if(!In.isDocumentKey(r))throw new Zt(yt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ng(r){if(In.isDocumentKey(r))throw new Zt(yt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Xf(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":ln()}function Ji(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Zt(yt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xf(r);throw new Zt(yt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Og(r,e){if(e<=0)throw new Zt(yt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class $y{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Zt(yt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zt(yt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=By(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Zt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Zt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Zt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $y({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zt(yt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zt(yt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $y(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ga;switch(t.type){case"firstParty":return new Ga(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Zt(yt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jy.get(e);t&&($e("ComponentProvider","Removing Datastore"),jy.delete(e),t.terminate())}(this),Promise.resolve()}}class Os{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Os(this.firestore,e,this._key)}}class ja{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ja(this.firestore,e,this._query)}}class kl extends ja{constructor(e,t,s){super(e,t,bl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Os(this.firestore,null,new In(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function Fg(r,e,...t){if(r=(0,ft.m9)(r),Jf("collection","path",e),r instanceof xd){const s=Ni.fromString(e,...t);return Ng(s),new kl(r,null,s)}{if(!(r instanceof Os||r instanceof kl))throw new Zt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ni.fromString(e,...t));return Ng(s),new kl(r.firestore,null,s)}}function Dh(r,e,...t){if(r=(0,ft.m9)(r),1===arguments.length&&(e=eu.A()),Jf("doc","path",e),r instanceof xd){const s=Ni.fromString(e,...t);return la(s),new Os(r,null,new In(s))}{if(!(r instanceof Os||r instanceof kl))throw new Zt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ni.fromString(e,...t));return la(s),new Os(r.firestore,r instanceof kl?r.converter:null,new In(s))}}function xv(r,e){return r=(0,ft.m9)(r),e=(0,ft.m9)(e),(r instanceof Os||r instanceof kl)&&(e instanceof Os||e instanceof kl)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Sh(r,e){return r=(0,ft.m9)(r),e=(0,ft.m9)(e),r instanceof ja&&e instanceof ja&&r.firestore===e.firestore&&Gl(r._query,e._query)&&r.converter===e.converter}class Lg{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Jp(this,"async_queue_retry"),this.Xc=()=>{const t=lh();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=lh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=lh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Qr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!sa(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,en("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=lg.createAndSchedule(this,e,t,s,d=>this.na(d));return this.zc.push(a),a}Zc(){this.Wc&&ln()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function el(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class Pv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class us extends xd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Lg,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vg(this),this._firestoreClient.terminate()}}function Ko(r){return r._firestoreClient||Vg(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Vg(r){var e,t,s;const a=r._freezeSettings(),d=(A=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Lo(r._databaseId,A,r._persistenceKey,(Q=a).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,By(Q.experimentalLongPollingOptions),Q.useFetchStreams));var A,Q;r._firestoreClient=new zf(r._authCredentials,r._appCheckCredentials,r._queue,d),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function zy(r,e,t){const s=new Qr;return r.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield Ih(r,t),yield Th(r,e),s.resolve()}catch(a){const d=a;if(!Dg(d))throw d;_r("Error enabling indexeddb cache. Falling back to memory cache: "+d),s.reject(d)}})).then(()=>s.promise)}function Bg(r){if(r._initialized||r._terminated)throw new Zt(yt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(Is.fromBase64String(e))}catch(t){throw new Zt(yt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(Is.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Zt(yt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ul{constructor(e){this._methodName=e}}class Pd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zt(yt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zt(yt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $r(this._lat,e._lat)||$r(this._long,e._long)}}const qy=/^__.*__$/;class Zy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Z(e,this.data,this.fieldMask,t,this.fieldTransforms):new L(e,this.data,t,this.fieldTransforms)}}class jg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Z(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hg(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ln()}}class Rh{constructor(e,t,s,a,d,g){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===d&&this.ua(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Rh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return np(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Hg(this.ca)&&qy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Yy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ch(e)}ya(e,t,s,a=!1){return new Rh({ca:e,methodName:t,ga:s,path:Yi.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dc(r){const e=r._freezeSettings(),t=ch(r._databaseId);return new Yy(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ep(r,e,t,s,a,d={}){const g=r.ya(d.merge||d.mergeFields?2:0,e,t,a);Wg("Data must be an object, but it was:",g,s);const A=Xy(s,g);let H,Q;if(d.merge)H=new ti(g.fieldMask),Q=g.fieldTransforms;else if(d.mergeFields){const ce=[];for(const Ve of d.mergeFields){const bt=xh(e,Ve,t);if(!g.contains(bt))throw new Zt(yt.INVALID_ARGUMENT,`Field '${bt}' is specified in your field mask but missing from your input data.`);Kg(ce,bt)||ce.push(bt)}H=new ti(ce),Q=g.fieldTransforms.filter(Ve=>H.covers(Ve.field))}else H=null,Q=g.fieldTransforms;return new Zy(new Ts(A),H,Q)}class Mh extends Ul{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}function Qy(r,e,t){return new Rh({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $g extends Ul{_toFieldTransform(e){return new zd(e.path,new cc)}isEqual(e){return e instanceof $g}}class Bv extends Ul{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Qy(this,e,!0),s=this.pa.map(d=>qc(d,t)),a=new Pa(s);return new zd(e.path,a)}isEqual(e){return this===e}}class jv extends Ul{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Qy(this,e,!0),s=this.pa.map(d=>qc(d,t)),a=new Wl(s);return new zd(e.path,a)}isEqual(e){return this===e}}class Hv extends Ul{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new hc(e.serializer,ef(e.serializer,this.Ia));return new zd(e.path,t)}isEqual(e){return this===e}}function Gg(r,e,t,s){const a=r.ya(1,e,t);Wg("Data must be an object, but it was:",a,s);const d=[],g=Ts.empty();Sn(s,(H,Q)=>{const ce=tp(e,H,t);Q=(0,ft.m9)(Q);const Ve=a.da(ce);if(Q instanceof Mh)d.push(ce);else{const bt=qc(Q,Ve);null!=bt&&(d.push(ce),g.set(ce,bt))}});const A=new ti(d);return new jg(g,A,a.fieldTransforms)}function zg(r,e,t,s,a,d){const g=r.ya(1,e,t),A=[xh(e,s,t)],H=[a];if(d.length%2!=0)throw new Zt(yt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let bt=0;bt<d.length;bt+=2)A.push(xh(e,d[bt])),H.push(d[bt+1]);const Q=[],ce=Ts.empty();for(let bt=A.length-1;bt>=0;--bt)if(!Kg(Q,A[bt])){const $t=A[bt];let vn=H[bt];vn=(0,ft.m9)(vn);const Nn=g.da($t);if(vn instanceof Mh)Q.push($t);else{const Jn=qc(vn,Nn);null!=Jn&&(Q.push($t),ce.set($t,Jn))}}const Ve=new ti(Q);return new jg(ce,Ve,g.fieldTransforms)}function Jy(r,e,t,s=!1){return qc(t,r.ya(s?4:3,e))}function qc(r,e){if(e_(r=(0,ft.m9)(r)))return Wg("Unsupported field value:",e,r),Xy(r,e);if(r instanceof Ul)return function(t,s){if(!Hg(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let d=0;for(const g of t){let A=qc(g,s.wa(d));null==A&&(A={nullValue:"NULL_VALUE"}),a.push(A),d++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,ft.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ef(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=os.fromDate(t);return{timestampValue:Zd(s.serializer,a)}}if(t instanceof os){const a=new os(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zd(s.serializer,a)}}if(t instanceof Pd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pl)return{bytesValue:gp(s.serializer,t._byteString)};if(t instanceof Os){const a=s.databaseId,d=t.firestore._databaseId;if(!d.isEqual(a))throw s._a(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Im(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Xf(t)}`)}(r,e)}function Xy(r,e){const t={};return Un(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sn(r,(s,a)=>{const d=qc(a,e.ha(s));null!=d&&(t[s]=d)}),{mapValue:{fields:t}}}function e_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof os||r instanceof Pd||r instanceof pl||r instanceof Os||r instanceof Ul)}function Wg(r,e,t){if(!e_(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Xf(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function xh(r,e,t){if((e=(0,ft.m9)(e))instanceof Vl)return e._internalPath;if("string"==typeof e)return tp(r,e);throw np("Field path arguments must be of type string or ",r,!1,void 0,t)}const $v=new RegExp("[~\\*/\\[\\]]");function tp(r,e,t){if(e.search($v)>=0)throw np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Vl(...e.split("."))._internalPath}catch(s){throw np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function np(r,e,t,s,a){const d=s&&!s.isEmpty(),g=void 0!==a;let A=`Function ${e}() called with invalid data`;t&&(A+=" (via `toFirestore()`)"),A+=". ";let H="";return(d||g)&&(H+=" (found",d&&(H+=` in field ${s}`),g&&(H+=` in document ${a}`),H+=")"),new Zt(yt.INVALID_ARGUMENT,A+r+H)}function Kg(r,e){return r.some(t=>t.isEqual(e))}class Nd{constructor(e,t,s,a,d){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Os(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new t_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ph("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class t_ extends Nd{data(){return super.data()}}function Ph(r,e){return"string"==typeof e?tp(r,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}function qg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Zt(yt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class Od extends rp{}function Xl(r,e,...t){let s=[];e instanceof rp&&s.push(e),s=s.concat(t),function(a){const d=a.filter(A=>A instanceof Sc).length,g=a.filter(A=>A instanceof kd).length;if(d>1||d>0&&g>0)throw new Zt(yt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class kd extends Od{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new kd(e,t,s)}_apply(e){const t=this._parse(e);return kh(e._query,t),new ja(e.firestore,e.converter,uc(e._query,t))}_parse(e){const t=Dc(e.firestore);return function(a,d,g,A,H,Q,ce){let Ve;if(H.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new Zt(yt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){s_(ce,Q);const bt=[];for(const $t of ce)bt.push(Oh(A,a,$t));Ve={arrayValue:{values:bt}}}else Ve=Oh(A,a,ce)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||s_(ce,Q),Ve=Jy(g,"where",ce,"in"===Q||"not-in"===Q);return yi.create(H,Q,Ve)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Sc extends rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Qi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let d=s;const g=a.getFlattenedFilters();for(const A of g)kh(d,A),d=uc(d,A)}(e._query,t),new ja(e.firestore,e.converter,uc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zg extends Od{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zg(e,t)}_apply(e){const t=function(s,a,d){if(null!==s.startAt)throw new Zt(yt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Zt(yt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new Hl(a,d);return function(A,H){if(null===Dl(A)){const Q=ku(A);null!==Q&&Fh(0,Q,H.field)}}(s,g),g}(e._query,this._field,this._direction);return new ja(e.firestore,e.converter,function(s,a){const d=s.explicitOrderBy.concat([a]);return new xa(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class ip extends Od{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new ip(e,t,s)}_apply(e){return new ja(e.firestore,e.converter,lc(e._query,this._limit,this._limitType))}}class Nh extends Od{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Nh(e,t,s)}_apply(e){const t=i_(e,this.type,this._docOrFields,this._inclusive);return new ja(e.firestore,e.converter,(a=t,new xa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class jr extends Od{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new jr(e,t,s)}_apply(e){const t=i_(e,this.type,this._docOrFields,this._inclusive);return new ja(e.firestore,e.converter,(a=t,new xa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function i_(r,e,t,s){if(t[0]=(0,ft.m9)(t[0]),t[0]instanceof Nd)return function(a,d,g,A,H){if(!A)throw new Zt(yt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const Q=[];for(const ce of Ca(a))if(ce.field.isKeyField())Q.push(J(d,A.key));else{const Ve=A.data.field(ce.field);if(ro(Ve))throw new Zt(yt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ce.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ve){const bt=ce.field.canonicalString();throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${bt}' (used as the orderBy) does not exist.`)}Q.push(Ve)}return new Mo(Q,H)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Dc(r.firestore);return function(d,g,A,H,Q,ce){const Ve=d.explicitOrderBy;if(Q.length>Ve.length)throw new Zt(yt.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const bt=[];for(let $t=0;$t<Q.length;$t++){const vn=Q[$t];if(Ve[$t].field.isKeyField()){if("string"!=typeof vn)throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof vn}`);if(!$l(d)&&-1!==vn.indexOf("/"))throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${vn}' contains a slash.`);const Nn=d.path.child(Ni.fromString(vn));if(!In.isDocumentKey(Nn))throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${Nn}' is not because it contains an odd number of segments.`);const Jn=new In(Nn);bt.push(J(g,Jn))}else{const Nn=Jy(A,H,vn);bt.push(Nn)}}return new Mo(bt,ce)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Oh(r,e,t){if("string"==typeof(t=(0,ft.m9)(t))){if(""===t)throw new Zt(yt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$l(e)&&-1!==t.indexOf("/"))throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ni.fromString(t));if(!In.isDocumentKey(s))throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return J(r,new In(s))}if(t instanceof Os)return J(r,t._key);throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(t)}.`)}function s_(r,e){if(!Array.isArray(r)||0===r.length)throw new Zt(yt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kh(r,e){if(e.isInequality()){const s=ku(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const d=Dl(r);null!==d&&Fh(0,a,d)}const t=function(s,a){for(const d of s)for(const g of d.getFlattenedFilters())if(a.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Zt(yt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Fh(r,e,t){if(!t.isEqual(e))throw new Zt(yt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class o_{convertValue(e,t="none"){switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ln()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Sn(e,(a,d)=>{s[a]=this.convertValue(d,t)}),s}convertGeoPoint(e){return new Pd(mi(e.latitude),mi(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ns(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Fo(e));default:return null}}convertTimestamp(e){const t=Di(e);return new os(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ni.fromString(e);gn(pf(s));const a=new Vo(s.get(1),s.get(3)),d=new In(s.popFirst(5));return a.isEqual(t)||en(`Document ${d} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Lh(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Wv extends o_{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,t)}}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ec extends Nd{constructor(e,t,s,a,d,g){super(e,t,s,a,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ph("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Vh extends ec{data(e={}){return super.data(e)}}class tl{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Zc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Vh(this._firestore,this._userDataWriter,s.key,s,new Zc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zt(yt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new Vh(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Zc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>a||3!==g.type).map(g=>{const A=new Vh(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Zc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let H=-1,Q=-1;return 0!==g.type&&(H=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),Q=d.indexOf(g.doc.key)),{type:Yv(g.type),doc:A,oldIndex:H,newIndex:Q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Yv(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ln()}}function u_(r,e){return r instanceof ec&&e instanceof ec?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof tl&&e instanceof tl&&r._firestore===e._firestore&&Sh(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class gl extends o_{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,t)}}function Vd(r,e,t){r=Ji(r,Os);const s=Ji(r.firestore,us),a=Lh(r.converter,e,t);return Yc(s,[ep(Dc(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,io.none())])}function h_(r,e,t,...s){r=Ji(r,Os);const a=Ji(r.firestore,us),d=Dc(a);let g;return g="string"==typeof(e=(0,ft.m9)(e))||e instanceof Vl?zg(d,"updateDoc",r._key,e,t,s):Gg(d,"updateDoc",r._key,e),Yc(a,[g.toMutation(r._key,io.exists(!0))])}function Qg(r,...e){var t,s,a;r=(0,ft.m9)(r);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||el(e[g])||(d=e[g],g++);const A={includeMetadataChanges:d.includeMetadataChanges};if(el(e[g])){const Ve=e[g];e[g]=null===(t=Ve.next)||void 0===t?void 0:t.bind(Ve),e[g+1]=null===(s=Ve.error)||void 0===s?void 0:s.bind(Ve),e[g+2]=null===(a=Ve.complete)||void 0===a?void 0:a.bind(Ve)}let H,Q,ce;if(r instanceof Os)Q=Ji(r.firestore,us),ce=bl(r._key.path),H={next:Ve=>{e[g]&&e[g](Jg(Q,r,Ve))},error:e[g+1],complete:e[g+2]};else{const Ve=Ji(r,ja);Q=Ji(Ve.firestore,us),ce=Ve._query;const bt=new gl(Q);H={next:$t=>{e[g]&&e[g](new tl(Q,bt,Ve,$t))},error:e[g+1],complete:e[g+2]},qg(r._query)}return function(Ve,bt,$t,vn){const Nn=new Ad(vn),Jn=new Ic(bt,Nn,$t);return Ve.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return wd(yield Md(Ve),Jn)})),()=>{Nn.Dc(),Ve.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return gh(yield Md(Ve),Jn)}))}}(Ko(Q),ce,A,H)}function Yc(r,e){return function(t,s){const a=new Qr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function wy(r,e,t){return Uf.apply(this,arguments)}(yield Rg(t),s,a)})),a.promise}(Ko(r),e)}function Jg(r,e,t){const s=t.docs.get(e._key),a=new gl(r);return new ec(r,a,e._key,s,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}const a0={maxAttempts:5};class g_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dc(e)}set(e,t,s){this._verifyNotCommitted();const a=Ac(e,this._firestore),d=Lh(a.converter,t,s),g=ep(this._dataReader,"WriteBatch.set",a._key,d,null!==a.converter,s);return this._mutations.push(g.toMutation(a._key,io.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const d=Ac(e,this._firestore);let g;return g="string"==typeof(t=(0,ft.m9)(t))||t instanceof Vl?zg(this._dataReader,"WriteBatch.update",d._key,t,s,a):Gg(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,io.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ac(e,this._firestore);return this._mutations=this._mutations.concat(new Rt(t._key,io.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zt(yt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ac(r,e){if((r=(0,ft.m9)(r)).firestore!==e)throw new Zt(yt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class u0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dc(e)}get(e){const t=Ac(e,this._firestore),s=new Wv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return ln();const d=a[0];if(d.isFoundDocument())return new Nd(this._firestore,s,d.key,d,t.converter);if(d.isNoDocument())return new Nd(this._firestore,s,t._key,null,t.converter);throw ln()})}set(e,t,s){const a=Ac(e,this._firestore),d=Lh(a.converter,t,s),g=ep(this._dataReader,"Transaction.set",a._key,d,null!==a.converter,s);return this._transaction.set(a._key,g),this}update(e,t,s,...a){const d=Ac(e,this._firestore);let g;return g="string"==typeof(t=(0,ft.m9)(t))||t instanceof Vl?zg(this._dataReader,"Transaction.update",d._key,t,s,a):Gg(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Ac(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ac(e,this._firestore),s=new gl(this._firestore);return super.get(e).then(a=>new ec(this._firestore,s,t._key,a._document,new Zc(!1,!1),t.converter))}}function jh(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Zt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function E_(){if("undefined"==typeof Uint8Array)throw new Zt("unimplemented","Uint8Arrays are not available in this environment.")}function em(){if(!function Us(){return"undefined"!=typeof atob}())throw new Zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){Y=Me.SDK_VERSION,(0,Me._registerComponent)(new ot.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const d=t.getProvider("app").getImmediate(),g=new us(new jl(t.getProvider("auth-internal")),new rc(t.getProvider("app-check-internal")),function(A,H){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Zt(yt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(A.options.projectId,H)}(d,s),d);return a=Object.assign({useFetchStreams:e},a),g._setSettings(a),g},"PUBLIC").setMultipleInstances(!0)),(0,Me.registerVersion)(I,"3.13.0",r),(0,Me.registerVersion)(I,"3.13.0","esm2017")}();class Bd{constructor(e){this._delegate=e}static fromBase64String(e){return em(),new Bd(pl.fromBase64String(e))}static fromUint8Array(e){return E_(),new Bd(pl.fromUint8Array(e))}toBase64(){return em(),this._delegate.toBase64()}toUint8Array(){return E_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tm(r){return function p0(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class g0{enableIndexedDbPersistence(e,t){return function Nv(r,e){Bg(r=Ji(r,us));const t=Ko(r);if(t._uninitializedComponentsProvider)throw new Zt(yt.FAILED_PRECONDITION,"SDK cache is already specified.");_r("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new Jl;return zy(t,a,new wh(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ov(r){Bg(r=Ji(r,us));const e=Ko(r);if(e._uninitializedComponentsProvider)throw new Zt(yt.FAILED_PRECONDITION,"SDK cache is already specified.");_r("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new Jl;return zy(e,s,new Py(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kv(r){if(r._initialized&&!r._terminated)throw new Zt(yt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(s){if(!So.D())return Promise.resolve();const a=s+"main";yield So.delete(a)}),function(s){return t.apply(this,arguments)})(Vp(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sp{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_r("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function kg(r,e,t,s={}){var a;const d=(r=Ji(r,xd))._getSettings(),g=`${e}:${t}`;if("firestore.googleapis.com"!==d.host&&d.host!==g&&_r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},d),{host:g,ssl:!1})),s.mockUserToken){let A,H;if("string"==typeof s.mockUserToken)A=s.mockUserToken,H=U.MOCK_USER;else{A=(0,ft.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const Q=s.mockUserToken.sub||s.mockUserToken.user_id;if(!Q)throw new Zt(yt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");H=new U(Q)}r._authCredentials=new $a(new ra(A,H))}}(this._delegate,e,t,s)}enableNetwork(){return function Ah(r){return function Mg(r){return r.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Sg(r),t=yield Ag(r);return e.setNetworkEnabled(!0),function(s){const a=_n(s);return a.vu.delete(0),yd(a)}(t)}))}(Ko(r=Ji(r,us)))}(this._delegate)}disableNetwork(){return function Fv(r){return function Oy(r){return r.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Sg(r),t=yield Ag(r);return e.setNetworkEnabled(!1),(s=(0,Ee.Z)(function*(a){const d=_n(a);d.vu.add(0),yield Gc(d),d.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Ko(r=Ji(r,us)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Hy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ug(r){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function vg(r,e){return mh.apply(this,arguments)}(yield Rg(e),t)})),t.promise}(Ko(r=Ji(r,us)))}(this._delegate)}onSnapshotsInSync(e){return function f_(r,e){return function Ly(r,e){const t=new Ad(e);return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield Md(r),a=t,_n(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield Md(r),a=t,void _n(s).ku.delete(a);var s,a}))}}(Ko(r=Ji(r,us)),el(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jc(this,Fg(this._delegate,e))}catch(t){throw du(t,"collection()","Firestore.collection()")}}doc(e){try{return new nl(this,Dh(this._delegate,e))}catch(t){throw du(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qa(this,function Mv(r,e){if(r=Ji(r,xd),Jf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Zt(yt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ja(r,null,(t=e,new xa(Ni.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw du(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function m_(r,e,t){r=Ji(r,us);const s=Object.assign(Object.assign({},a0),t);return function(a){if(a.maxAttempts<1)throw new Zt(yt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,d,g){const A=new Qr;return a.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const H=yield function Ny(r){return Zf(r).then(e=>e.datastore)}(a);new Gf(a.asyncQueue,H,g,d,A).run()})),A.promise}(Ko(r),a=>e(new u0(r,a)),s)}(this._delegate,t=>e(new C_(this,t)))}batch(){return Ko(this._delegate),new I_(new g_(this._delegate,e=>Yc(this._delegate,e)))}loadBundle(e){return function Vv(r,e){const t=Ko(r=Ji(r,us)),s=new Pv;return function Vy(r,e,t,s){const a=function(d,g){let A;return A="string"==typeof d?uf().encode(d):d,H=function(H,Q){if(H instanceof Uint8Array)return Ch(H,Q);if(H instanceof ArrayBuffer)return Ch(new Uint8Array(H),Q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),new mE(H,g);var H}(t,ch(e));r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function Eh(r,e,t){const s=_n(r);var a;(a=(0,Ee.Z)(function*(d,g,A){try{const H=yield g.getMetadata();if(yield function(bt,$t){const vn=_n(bt),Nn=Wo($t.createTime);return vn.persistence.runTransaction("hasNewerBundle","readonly",Jn=>vn.qs.getBundleMetadata(Jn,$t.id)).then(Jn=>!!Jn&&Jn.createTime.compareTo(Nn)>=0)}(d.localStore,H))return yield g.close(),A._completeWith({taskState:"Success",documentsLoaded:(bt=H).totalDocuments,bytesLoaded:bt.totalBytes,totalDocuments:bt.totalDocuments,totalBytes:bt.totalBytes}),Promise.resolve(new Set);A._updateProgress(Kc(H));const Q=new bd(H,d.localStore,g.serializer);let ce=yield g.bc();for(;ce;){const bt=yield Q.zu(ce);bt&&A._updateProgress(bt),ce=yield g.bc()}const Ve=yield Q.complete();return yield Ql(d,Ve.Ju,void 0),yield function(bt,$t){const vn=_n(bt);return vn.persistence.runTransaction("Save bundle","readwrite",Nn=>vn.qs.saveBundleMetadata(Nn,$t))}(d.localStore,H),A._completeWith(Ve.progress),Promise.resolve(Ve.Hu)}catch(H){return _r("SyncEngine",`Loading bundle failed with ${H}`),A._failWith(H),Promise.resolve(new Set)}var bt}),function(d,g,A){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Rg(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Wy(r,e){return function Uy(r,e){return r.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,s){const a=_n(t);return a.persistence.runTransaction("Get named query","readonly",d=>a.qs.getNamedQuery(d,s))}(yield Rd(r),e)}))}(Ko(r=Ji(r,us)),e).then(t=>t?new ja(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Qa(this,t):null)}}class op extends o_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bd(new pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return nl.forKey(t,this.firestore,null)}}class C_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new op(e)}get(e){const t=Xc(e);return this._delegate.get(t).then(s=>new Hh(this._firestore,new ec(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Xc(e);return s?(jh("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=Xc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=Xc(e);return this._delegate.delete(t),this}}class I_{constructor(e){this._delegate=e}set(e,t,s){const a=Xc(e);return s?(jh("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const d=Xc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...a),this}delete(e){const t=Xc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qc{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Vh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jd(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Qc.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let d=a.get(t);return d||(d=new Qc(e,new op(e),t),a.set(t,d)),d}}Qc.INSTANCES=new WeakMap;class nl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new op(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nl(t,new Os(t._delegate,s,new In(e)))}static forKey(e,t,s){return new nl(t,new Os(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Jc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jc(this.firestore,Fg(this._delegate,e))}catch(t){throw du(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ft.m9)(e))instanceof Os&&xv(this._delegate,e)}set(e,t){t=jh("DocumentReference.set",t);try{return t?Vd(this._delegate,e,t):Vd(this._delegate,e)}catch(s){throw du(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?h_(this._delegate,e):h_(this._delegate,e,t,...s)}catch(a){throw du(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Xv(r){return Yc(Ji(r.firestore,us),[new Rt(r._key,io.none())])}(this._delegate)}onSnapshot(...e){const t=T_(e),s=b_(e,a=>new Hh(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Qg(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function l_(r){r=Ji(r,Os);const e=Ji(r.firestore,us),t=Ko(e),s=new gl(e);return function ky(r,e){const t=new Qr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(a,d,g){try{const A=yield function(H,Q){const ce=_n(H);return ce.persistence.runTransaction("read document","readonly",Ve=>ce.localDocuments.getDocument(Ve,Q))}(a,d);A.isFoundDocument()?g.resolve(A):A.isNoDocument()?g.resolve(null):g.reject(new Zt(yt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(A){const H=Ed(A,`Failed to get document '${d} from cache`);g.reject(H)}}),function(a,d,g){return s.apply(this,arguments)})(yield Rd(r),e,t);var s})),t.promise}(t,r._key).then(a=>new ec(e,s,r._key,a,new Zc(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function c_(r){r=Ji(r,Os);const e=Ji(r.firestore,us);return xg(Ko(e),r._key,{source:"server"}).then(t=>Jg(e,r,t))}(this._delegate):function Qv(r){r=Ji(r,Os);const e=Ji(r.firestore,us);return xg(Ko(e),r._key).then(t=>Jg(e,r,t))}(this._delegate),t.then(s=>new Hh(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new nl(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}function du(r,e,t){return r.message=r.message.replace(e,t),r}function T_(r){for(const e of r)if("object"==typeof e&&!tm(e))return e;return{}}function b_(r,e){var t,s;let a;return a=tm(r[0])?r[0]:tm(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:d=>{a.next&&a.next(e(d))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Hh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return u_(this._delegate,e._delegate)}}class jd extends Hh{data(e){const t=this._delegate.data(e);return function na(r,e){r||ln()}(void 0!==t),t}}class Qa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new op(e)}where(e,t,s){try{return new Qa(this.firestore,Xl(this._delegate,function n_(r,e,t){const s=e,a=Ph("where",r);return kd._create(a,s,t)}(e,t,s)))}catch(a){throw du(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qa(this.firestore,Xl(this._delegate,function Ld(r,e="asc"){const t=e,s=Ph("orderBy",r);return Zg._create(s,t)}(e,t)))}catch(s){throw du(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qa(this.firestore,Xl(this._delegate,function Yg(r){return Og("limit",r),ip._create("limit",r,"F")}(e)))}catch(t){throw du(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qa(this.firestore,Xl(this._delegate,function vE(r){return Og("limitToLast",r),ip._create("limitToLast",r,"L")}(e)))}catch(t){throw du(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qa(this.firestore,Xl(this._delegate,function r_(...r){return Nh._create("startAt",r,!0)}(...e)))}catch(t){throw du(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qa(this.firestore,Xl(this._delegate,function EE(...r){return Nh._create("startAfter",r,!1)}(...e)))}catch(t){throw du(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qa(this.firestore,Xl(this._delegate,function Gv(...r){return jr._create("endBefore",r,!1)}(...e)))}catch(t){throw du(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qa(this.firestore,Xl(this._delegate,function zv(...r){return jr._create("endAt",r,!0)}(...e)))}catch(t){throw du(t,"endAt()","Query.endAt()")}}isEqual(e){return Sh(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Jv(r){r=Ji(r,ja);const e=Ji(r.firestore,us),t=Ko(e),s=new gl(e);return function Fy(r,e){const t=new Qr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(a,d,g){try{const A=yield $p(a,d,!0),H=new hg(d,A.ir),Q=H.sc(A.documents),ce=H.applyChanges(Q,!1);g.resolve(ce.snapshot)}catch(A){const H=Ed(A,`Failed to execute query '${d} against cache`);g.reject(H)}}),function(a,d,g){return s.apply(this,arguments)})(yield Rd(r),e,t);var s})),t.promise}(t,r._query).then(a=>new tl(e,s,r,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function Uh(r){r=Ji(r,ja);const e=Ji(r.firestore,us),t=Ko(e),s=new gl(e);return Pg(t,r._query,{source:"server"}).then(a=>new tl(e,s,r,a))}(this._delegate):function d_(r){r=Ji(r,ja);const e=Ji(r.firestore,us),t=Ko(e),s=new gl(e);return qg(r._query),Pg(t,r._query).then(a=>new tl(e,s,r,a))}(this._delegate),t.then(s=>new nm(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=T_(e),s=b_(e,a=>new nm(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Qg(this._delegate,t,s)}withConverter(e){return new Qa(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}class m0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new m0(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new jd(this._firestore,s))})}isEqual(e){return u_(this._delegate,e._delegate)}}class Jc extends Qa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nl(this.firestore,e):null}doc(e){try{return new nl(this.firestore,void 0===e?Dh(this._delegate):Dh(this._delegate,e))}catch(t){throw du(t,"doc()","CollectionReference.doc()")}}add(e){return function e0(r,e){const t=Ji(r.firestore,us),s=Dh(r),a=Lh(r.converter,e);return Yc(t,[ep(Dc(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,io.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new nl(this.firestore,t))}isEqual(e){return xv(this._delegate,e._delegate)}withConverter(e){return new Jc(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}function Xc(r){return Ji(r,Os)}class rm{constructor(...e){this._delegate=new Vl(...e)}static documentId(){return new rm(Yi.keyField().canonicalString())}isEqual(e){return(e=(0,ft.m9)(e))instanceof Vl&&this._delegate._internalPath.isEqual(e._internalPath)}}class ed{constructor(e){this._delegate=e}static serverTimestamp(){const e=function c0(){return new $g("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ed(e)}static delete(){const e=function l0(){return new Mh("deleteField")}();return e._methodName="FieldValue.delete",new ed(e)}static arrayUnion(...e){const t=function Ud(...r){return new Bv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new ed(t)}static arrayRemove(...e){const t=function d0(...r){return new jv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new ed(t)}static increment(e){const t=function y_(r){return new Hv("increment",r)}(e);return t._methodName="FieldValue.increment",new ed(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const im={Firestore:sp,GeoPoint:Pd,Timestamp:os,Blob:Bd,Transaction:C_,WriteBatch:I_,DocumentReference:nl,DocumentSnapshot:Hh,Query:Qa,QueryDocumentSnapshot:jd,QuerySnapshot:nm,CollectionReference:Jc,FieldPath:rm,FieldValue:ed,setLogLevel:function w_(r){!function We(r){le.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function D_(r){(function sm(r,e){r.INTERNAL.registerComponent(new ot.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},im)))})(r,(e,t)=>new sp(e,t,new g0)),r.registerVersion("@firebase/firestore-compat","0.3.12")}(Xt.Z);var Bl=$(1205),y0=$(6215),_0=$(9260);function S_(r,e){return function om(r,e=B.z){return new X.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function am(r,e){return S_(r,e).pipe((0,Ce.U)(t=>({payload:t,type:"query"})))}function $h(r,e){return am(r,e).pipe((0,Xe.O)(void 0),be(),(0,Ce.U)(([t,s])=>{const a=s.payload.docChanges(),d=a.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((g,A)=>{const H=a.find(ce=>ce.doc.ref.isEqual(g.ref)),Q=null==t?void 0:t.payload.docs.find(ce=>ce.ref.isEqual(g.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(g.metadata)||!H&&Q&&JSON.stringify(Q.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:A,newIndex:A,type:"modified",doc:g}})}),d}))}function R_(r,e,t){return $h(r,t).pipe((0,nt.R)((s,a)=>function M_(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function v0(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return x_(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return x_(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return x_(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(d=>d.payload),e),[]),function Mt(r,e=Lt.y){return r=null!=r?r:Ft,(0,ze.e)((t,s)=>{let a,d=!0;t.subscribe((0,lt.x)(s,g=>{const A=e(g);(d||!r(a,A))&&(d=!1,a=A,s.next(g))}))})}(),(0,Ce.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function x_(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function Gh(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class P_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=$h(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ce.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Xe.O)(void 0),be(),(0,At.h)(([s,a])=>a.length>0||!s),(0,Ce.U)(([s,a])=>a),Ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,nt.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Gh(e);return R_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}valueChanges(e={}){return am(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Ke.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Ke.iC)}add(e){return this.ref.add(e)}doc(e){return new td(this.ref.doc(e),this.afs)}}class td{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:d}=k_(s,t);return new P_(a,d,this.afs)}snapshotChanges(){return function A_(r,e){return S_(r,e).pipe((0,Xe.O)(void 0),be(),(0,Ce.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ce.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ie.D)(this.ref.get(e)).pipe(Ke.iC)}}class zh{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$h(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,At.h)(t=>t.length>0),Ke.iC):$h(this.query,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,nt.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Gh(e);return R_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ke.iC)}valueChanges(e={}){return am(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Ke.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Ke.iC)}}const N_=new y.OlP("angularfire2.enableFirestorePersistence"),E0=new y.OlP("angularfire2.firestore.persistenceSettings"),O_=new y.OlP("angularfire2.firestore.settings"),w0=new y.OlP("angularfire2.firestore.use-emulator");function k_(r,e=(t=>t)){return{query:e(r),ref:r}}let F_=(()=>{class r{constructor(t,s,a,d,g,A,H,Q,ce,Ve,bt,$t,vn,Nn,Jn,ri,ls){this.schedulers=H;const Ci=(0,Qe.on)(t,A,s),Bo=ce;Ve&&(0,Bl.nw)(Ci,A,bt,vn,Nn,Jn,$t,ri),[this.firestore,this.persistenceEnabled$]=(0,Qe.cc)(`${Ci.name}.firestore`,"AngularFirestore",Ci.name,()=>{const vo=A.runOutsideAngular(()=>Ci.firestore());if(d&&vo.settings(d),Bo&&vo.useEmulator(...Bo),a&&!(0,Nt.PM)(g)){const qs=()=>{try{return(0,ie.D)(vo.enablePersistence(Q||void 0).then(()=>!0,()=>!1))}catch(hu){return"undefined"!=typeof console&&console.warn(hu),(0,Ue.of)(!1)}};return[vo,A.runOutsideAngular(qs)]}return[vo,(0,Ue.of)(!1)]},[d,Bo,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=k_(a,s),A=this.schedulers.ngZone.run(()=>d);return new P_(A,g,this)}collectionGroup(t,s){const a=s||(g=>g),d=this.firestore.collectionGroup(t);return new zh(a(d),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new td(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(y.LFG(Qe.Dh),y.LFG(Qe.xv,8),y.LFG(N_,8),y.LFG(O_,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Ke.HU),y.LFG(E0,8),y.LFG(w0,8),y.LFG(Bl.zQ,8),y.LFG(Bl.Qv,8),y.LFG(Bl.L6,8),y.LFG(Bl._Q,8),y.LFG(Bl.rT,8),y.LFG(Bl.lh,8),y.LFG(Bl.f7,8),y.LFG(y0.nm,8))},r.\u0275prov=y.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),C0=(()=>{class r{constructor(){_0.Z.registerVersion("angularfire",Ke.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:N_,useValue:!0},{provide:E0,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({providers:[F_]}),r})()},377:(pn,dt,$)=>{$.d(dt,{Q1:()=>ue,TE:()=>gi});var y=$(8306),B=$(9646),X=$(8996),ie=$(4986),Ue=$(4482),Ke=$(5403),ze=$(4004),lt=$(3900),be=$(4976),Ce=$(5e3),nt=$(2011),Lt=$(3942),Mt=$(5861),Ft=$(6881),At=$(2090),Qe=$(4859);const Nt="firebasestorage.googleapis.com",dn="storageBucket";class ot extends At.ZR{constructor(W,fe,Ie=0){super(ft(W),`Firebase Storage: ${fe} (${ft(W)})`),this.status_=Ie,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(W){this.status_=W}_codeEquals(W){return ft(W)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(W){this.customData.serverResponse=W,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var _t=(()=>{return(z=_t||(_t={})).UNKNOWN="unknown",z.OBJECT_NOT_FOUND="object-not-found",z.BUCKET_NOT_FOUND="bucket-not-found",z.PROJECT_NOT_FOUND="project-not-found",z.QUOTA_EXCEEDED="quota-exceeded",z.UNAUTHENTICATED="unauthenticated",z.UNAUTHORIZED="unauthorized",z.UNAUTHORIZED_APP="unauthorized-app",z.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",z.INVALID_CHECKSUM="invalid-checksum",z.CANCELED="canceled",z.INVALID_EVENT_NAME="invalid-event-name",z.INVALID_URL="invalid-url",z.INVALID_DEFAULT_BUCKET="invalid-default-bucket",z.NO_DEFAULT_BUCKET="no-default-bucket",z.CANNOT_SLICE_BLOB="cannot-slice-blob",z.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",z.NO_DOWNLOAD_URL="no-download-url",z.INVALID_ARGUMENT="invalid-argument",z.INVALID_ARGUMENT_COUNT="invalid-argument-count",z.APP_DELETED="app-deleted",z.INVALID_ROOT_OPERATION="invalid-root-operation",z.INVALID_FORMAT="invalid-format",z.INTERNAL_ERROR="internal-error",z.UNSUPPORTED_ENVIRONMENT="unsupported-environment",_t;var z})();function ft(z){return"storage/"+z}function tt(){return new ot(_t.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function on(){return new ot(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qr(){return new ot(_t.CANCELED,"User canceled the upload/download.")}function un(){return new ot(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function De(z){return new ot(_t.INVALID_ARGUMENT,z)}function ve(){return new ot(_t.APP_DELETED,"The Firebase app was deleted.")}function xe(z){return new ot(_t.INVALID_ROOT_OPERATION,"The operation '"+z+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pt(z,W){return new ot(_t.INVALID_FORMAT,"String does not match format '"+z+"': "+W)}function tn(z){throw new ot(_t.INTERNAL_ERROR,"Internal error: "+z)}class hn{constructor(W,fe){this.bucket=W,this.path_=fe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const W=encodeURIComponent;return"/b/"+W(this.bucket)+"/o/"+W(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(W,fe){let Ie;try{Ie=hn.makeFromUrl(W,fe)}catch(Fe){return new hn(W,"")}if(""===Ie.path)return Ie;throw function gr(z){return new ot(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+z+"'.")}(W)}static makeFromUrl(W,fe){let Ie=null;const Fe="([A-Za-z0-9.\\-_]+)",Vn=new RegExp("^gs://"+Fe+"(/(.*))?$","i");function cr(Zi){Zi.path_=decodeURIComponent(Zi.path)}const ci=fe.replace(/[.]/g,"\\."),$i=[{regex:Vn,indices:{bucket:1,path:3},postModify:function Ct(Zi){"/"===Zi.path.charAt(Zi.path.length-1)&&(Zi.path_=Zi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ci}/v[A-Za-z0-9_]+/b/${Fe}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:cr},{regex:new RegExp(`^https?://${fe===Nt?"(?:storage.googleapis.com|storage.cloud.google.com)":fe}/${Fe}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:cr}];for(let Zi=0;Zi<$i.length;Zi++){const Gs=$i[Zi],Io=Gs.regex.exec(W);if(Io){let Js=Io[Gs.indices.path];Js||(Js=""),Ie=new hn(Io[Gs.indices.bucket],Js),Gs.postModify(Ie);break}}if(null==Ie)throw function kn(z){return new ot(_t.INVALID_URL,"Invalid URL '"+z+"'.")}(W);return Ie}}class Dn{constructor(W){this.promise_=Promise.reject(W)}getPromise(){return this.promise_}cancel(W=!1){}}function En(z){return"string"==typeof z||z instanceof String}function nr(z){return Pn()&&z instanceof Blob}function Pn(){return"undefined"!=typeof Blob&&!(0,At.UG)()}function Mn(z,W,fe,Ie){if(Ie<W)throw De(`Invalid value for '${z}'. Expected ${W} or greater.`);if(Ie>fe)throw De(`Invalid value for '${z}'. Expected ${fe} or less.`)}function Zr(z,W,fe){let Ie=W;return null==fe&&(Ie=`https://${W}`),`${fe}://${Ie}/v0${z}`}function ts(z){const W=encodeURIComponent;let fe="?";for(const Ie in z)z.hasOwnProperty(Ie)&&(fe=fe+(W(Ie)+"=")+W(z[Ie])+"&");return fe=fe.slice(0,-1),fe}var Pt=(()=>{return(z=Pt||(Pt={}))[z.NO_ERROR=0]="NO_ERROR",z[z.NETWORK_ERROR=1]="NETWORK_ERROR",z[z.ABORT=2]="ABORT",Pt;var z})();function He(z,W){const fe=z>=500&&z<600,Fe=-1!==[408,429].indexOf(z),Ct=-1!==W.indexOf(z);return fe||Fe||Ct}class Ge{constructor(W,fe,Ie,Fe,Ct,Jt,Vn,Rn,cr,Kn,ci,Ai=!0){this.url_=W,this.method_=fe,this.headers_=Ie,this.body_=Fe,this.successCodes_=Ct,this.additionalRetryCodes_=Jt,this.callback_=Vn,this.errorCallback_=Rn,this.timeout_=cr,this.progressCallback_=Kn,this.connectionFactory_=ci,this.retry=Ai,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((bi,Br)=>{this.resolve_=bi,this.reject_=Br,this.start_()})}start_(){const fe=(Ie,Fe)=>{const Ct=this.resolve_,Jt=this.reject_,Vn=Fe.connection;if(Fe.wasSuccessCode)try{const Rn=this.callback_(Vn,Vn.getResponse());!function ir(z){return void 0!==z}(Rn)?Ct():Ct(Rn)}catch(Rn){Jt(Rn)}else if(null!==Vn){const Rn=tt();Rn.serverResponse=Vn.getErrorText(),Jt(this.errorCallback_?this.errorCallback_(Vn,Rn):Rn)}else Jt(Fe.canceled?this.appDelete_?ve():qr():on())};this.canceled_?fe(0,new at(!1,null,!0)):this.backoffId_=function zn(z,W,fe){let Ie=1,Fe=null,Ct=null,Jt=!1,Vn=0;function Rn(){return 2===Vn}let cr=!1;function Kn(...Ri){cr||(cr=!0,W.apply(null,Ri))}function ci(Ri){Fe=setTimeout(()=>{Fe=null,z(bi,Rn())},Ri)}function Ai(){Ct&&clearTimeout(Ct)}function bi(Ri,...Ls){if(cr)return void Ai();if(Ri)return Ai(),void Kn.call(null,Ri,...Ls);if(Rn()||Jt)return Ai(),void Kn.call(null,Ri,...Ls);let $i;Ie<64&&(Ie*=2),1===Vn?(Vn=2,$i=0):$i=1e3*(Ie+Math.random()),ci($i)}let Br=!1;function qi(Ri){Br||(Br=!0,Ai(),!cr&&(null!==Fe?(Ri||(Vn=2),clearTimeout(Fe),ci(0)):Ri||(Vn=1)))}return ci(0),Ct=setTimeout(()=>{Jt=!0,qi(!0)},fe),qi}((Ie,Fe)=>{if(Fe)return void Ie(!1,new at(!1,null,!0));const Ct=this.connectionFactory_();this.pendingConnection_=Ct;const Jt=Vn=>{null!==this.progressCallback_&&this.progressCallback_(Vn.loaded,Vn.lengthComputable?Vn.total:-1)};null!==this.progressCallback_&&Ct.addUploadProgressListener(Jt),Ct.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ct.removeUploadProgressListener(Jt),this.pendingConnection_=null;const Vn=Ct.getErrorCode()===Pt.NO_ERROR,Rn=Ct.getStatus();if(!Vn||He(Rn,this.additionalRetryCodes_)&&this.retry){const Kn=Ct.getErrorCode()===Pt.ABORT;return void Ie(!1,new at(!1,null,Kn))}const cr=-1!==this.successCodes_.indexOf(Rn);Ie(!0,new at(cr,Ct))})},fe,this.timeout_)}getPromise(){return this.promise_}cancel(W){this.canceled_=!0,this.appDelete_=W||!1,null!==this.backoffId_&&function mr(z){z(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class at{constructor(W,fe,Ie){this.wasSuccessCode=W,this.connection=fe,this.canceled=!!Ie}}function hi(...z){const W=function Wn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==W){const fe=new W;for(let Ie=0;Ie<z.length;Ie++)fe.append(z[Ie]);return fe.getBlob()}if(Pn())return new Blob(z);throw new ot(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Yt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Or{constructor(W,fe){this.data=W,this.contentType=fe||null}}function sr(z,W){switch(z){case Yt.RAW:return new Or(Er(W));case Yt.BASE64:case Yt.BASE64URL:return new Or(Hr(z,W));case Yt.DATA_URL:return new Or(function fi(z){const W=new Yr(z);return W.base64?Hr(Yt.BASE64,W.rest):function lr(z){let W;try{W=decodeURIComponent(z)}catch(fe){throw pt(Yt.DATA_URL,"Malformed data URL.")}return Er(W)}(W.rest)}(W),function ji(z){return new Yr(z).contentType}(W))}throw tt()}function Er(z){const W=[];for(let fe=0;fe<z.length;fe++){let Ie=z.charCodeAt(fe);Ie<=127?W.push(Ie):Ie<=2047?W.push(192|Ie>>6,128|63&Ie):55296==(64512&Ie)?fe<z.length-1&&56320==(64512&z.charCodeAt(fe+1))?(Ie=65536|(1023&Ie)<<10|1023&z.charCodeAt(++fe),W.push(240|Ie>>18,128|Ie>>12&63,128|Ie>>6&63,128|63&Ie)):W.push(239,191,189):56320==(64512&Ie)?W.push(239,191,189):W.push(224|Ie>>12,128|Ie>>6&63,128|63&Ie)}return new Uint8Array(W)}function Hr(z,W){switch(z){case Yt.BASE64:{const Fe=-1!==W.indexOf("-"),Ct=-1!==W.indexOf("_");if(Fe||Ct)throw pt(z,"Invalid character '"+(Fe?"-":"_")+"' found: is it base64url encoded?");break}case Yt.BASE64URL:{const Fe=-1!==W.indexOf("+"),Ct=-1!==W.indexOf("/");if(Fe||Ct)throw pt(z,"Invalid character '"+(Fe?"+":"/")+"' found: is it base64 encoded?");W=W.replace(/-/g,"+").replace(/_/g,"/");break}}let fe;try{fe=function br(z){if("undefined"==typeof atob)throw function _e(z){return new ot(_t.UNSUPPORTED_ENVIRONMENT,`${z} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(z)}(W)}catch(Fe){throw Fe.message.includes("polyfill")?Fe:pt(z,"Invalid character found")}const Ie=new Uint8Array(fe.length);for(let Fe=0;Fe<fe.length;Fe++)Ie[Fe]=fe.charCodeAt(Fe);return Ie}class Yr{constructor(W){this.base64=!1,this.contentType=null;const fe=W.match(/^data:([^,]+)?,/);if(null===fe)throw pt(Yt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ie=fe[1]||null;null!=Ie&&(this.base64=function Vi(z,W){return z.length>=W.length&&z.substring(z.length-W.length)===W}(Ie,";base64"),this.contentType=this.base64?Ie.substring(0,Ie.length-7):Ie),this.rest=W.substring(W.indexOf(",")+1)}}class Gr{constructor(W,fe){let Ie=0,Fe="";nr(W)?(this.data_=W,Ie=W.size,Fe=W.type):W instanceof ArrayBuffer?(fe?this.data_=new Uint8Array(W):(this.data_=new Uint8Array(W.byteLength),this.data_.set(new Uint8Array(W))),Ie=this.data_.length):W instanceof Uint8Array&&(fe?this.data_=W:(this.data_=new Uint8Array(W.length),this.data_.set(W)),Ie=W.length),this.size_=Ie,this.type_=Fe}size(){return this.size_}type(){return this.type_}slice(W,fe){if(nr(this.data_)){const Fe=function hr(z,W,fe){return z.webkitSlice?z.webkitSlice(W,fe):z.mozSlice?z.mozSlice(W,fe):z.slice?z.slice(W,fe):null}(this.data_,W,fe);return null===Fe?null:new Gr(Fe)}{const Ie=new Uint8Array(this.data_.buffer,W,fe-W);return new Gr(Ie,!0)}}static getBlob(...W){if(Pn()){const fe=W.map(Ie=>Ie instanceof Gr?Ie.data_:Ie);return new Gr(hi.apply(null,fe))}{const fe=W.map(Jt=>En(Jt)?sr(Yt.RAW,Jt).data:Jt.data_);let Ie=0;fe.forEach(Jt=>{Ie+=Jt.byteLength});const Fe=new Uint8Array(Ie);let Ct=0;return fe.forEach(Jt=>{for(let Vn=0;Vn<Jt.length;Vn++)Fe[Ct++]=Jt[Vn]}),new Gr(Fe,!0)}}uploadData(){return this.data_}}function Pe(z){let W;try{W=JSON.parse(z)}catch(fe){return null}return function Lr(z){return"object"==typeof z&&!Array.isArray(z)}(W)?W:null}function ge(z){const W=z.lastIndexOf("/",z.length-2);return-1===W?z:z.slice(W+1)}function G(z,W){return W}class ne{constructor(W,fe,Ie,Fe){this.server=W,this.local=fe||W,this.writable=!!Ie,this.xform=Fe||G}}let se=null;function ht(){if(se)return se;const z=[];z.push(new ne("bucket")),z.push(new ne("generation")),z.push(new ne("metageneration")),z.push(new ne("name","fullPath",!0));const fe=new ne("name");fe.xform=function W(Ct,Jt){return function Se(z){return!En(z)||z.length<2?z:ge(z)}(Jt)},z.push(fe);const Fe=new ne("size");return Fe.xform=function Ie(Ct,Jt){return void 0!==Jt?Number(Jt):Jt},z.push(Fe),z.push(new ne("timeCreated")),z.push(new ne("updated")),z.push(new ne("md5Hash",null,!0)),z.push(new ne("cacheControl",null,!0)),z.push(new ne("contentDisposition",null,!0)),z.push(new ne("contentEncoding",null,!0)),z.push(new ne("contentLanguage",null,!0)),z.push(new ne("contentType",null,!0)),z.push(new ne("metadata","customMetadata",!0)),se=z,se}function rn(z,W,fe){const Ie=Pe(W);return null===Ie?null:function yn(z,W,fe){const Ie={type:"file"},Fe=fe.length;for(let Ct=0;Ct<Fe;Ct++){const Jt=fe[Ct];Ie[Jt.local]=Jt.xform(Ie,W[Jt.server])}return function Wt(z,W){Object.defineProperty(z,"ref",{get:function fe(){const Ct=new hn(z.bucket,z.fullPath);return W._makeStorageReference(Ct)}})}(Ie,z),Ie}(z,Ie,fe)}function er(z,W){const fe={},Ie=W.length;for(let Fe=0;Fe<Ie;Fe++){const Ct=W[Fe];Ct.writable&&(fe[Ct.server]=z[Ct.local])}return JSON.stringify(fe)}const Ur="prefixes";class Ut{constructor(W,fe,Ie,Fe){this.url=W,this.method=fe,this.handler=Ie,this.timeout=Fe,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Dt(z){if(!z)throw tt()}function sn(z,W){return function fe(Ie,Fe){const Ct=rn(z,Fe,W);return Dt(null!==Ct),Ct}}function zr(z){return function W(fe,Ie){let Fe;return Fe=401===fe.getStatus()?fe.getErrorText().includes("Firebase App Check token is invalid")?function Ht(){return new ot(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function On(){return new ot(_t.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===fe.getStatus()?function It(z){return new ot(_t.QUOTA_EXCEEDED,"Quota for bucket '"+z+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(z.bucket):403===fe.getStatus()?function xn(z){return new ot(_t.UNAUTHORIZED,"User does not have permission to access '"+z+"'.")}(z.path):Ie,Fe.status=fe.getStatus(),Fe.serverResponse=Ie.serverResponse,Fe}}function wr(z){const W=zr(z);return function fe(Ie,Fe){let Ct=W(Ie,Fe);return 404===Ie.getStatus()&&(Ct=function Vt(z){return new ot(_t.OBJECT_NOT_FOUND,"Object '"+z+"' does not exist.")}(z.path)),Ct.serverResponse=Fe.serverResponse,Ct}}function Ii(z,W,fe){const Fe=Zr(W.fullServerUrl(),z.host,z._protocol),Jt=z.maxOperationRetryTime,Vn=new Ut(Fe,"GET",sn(z,fe),Jt);return Vn.errorHandler=wr(W),Vn}function oi(z,W,fe,Ie,Fe){const Ct={};Ct.prefix=W.isRoot?"":W.path+"/",fe&&fe.length>0&&(Ct.delimiter=fe),Ie&&(Ct.pageToken=Ie),Fe&&(Ct.maxResults=Fe);const Vn=Zr(W.bucketOnlyServerUrl(),z.host,z._protocol),cr=z.maxOperationRetryTime,Kn=new Ut(Vn,"GET",function Tn(z,W){return function fe(Ie,Fe){const Ct=function gt(z,W,fe){const Ie=Pe(fe);return null===Ie?null:function Et(z,W,fe){const Ie={prefixes:[],items:[],nextPageToken:fe.nextPageToken};if(fe[Ur])for(const Fe of fe[Ur]){const Ct=Fe.replace(/\/$/,""),Jt=z._makeStorageReference(new hn(W,Ct));Ie.prefixes.push(Jt)}if(fe.items)for(const Fe of fe.items){const Ct=z._makeStorageReference(new hn(W,Fe.name));Ie.items.push(Ct)}return Ie}(z,W,Ie)}(z,W,Fe);return Dt(null!==Ct),Ct}}(z,W.bucket),cr);return Kn.urlParams=Ct,Kn.errorHandler=zr(W),Kn}function ks(z,W,fe){const Ie=Object.assign({},fe);return Ie.fullPath=z.path,Ie.size=W.size(),Ie.contentType||(Ie.contentType=function gs(z,W){return z&&z.contentType||W&&W.type()||"application/octet-stream"}(null,W)),Ie}class wn{constructor(W,fe,Ie,Fe){this.current=W,this.total=fe,this.finalized=!!Ie,this.metadata=Fe||null}}function ar(z,W){let fe=null;try{fe=z.getResponseHeader("X-Goog-Upload-Status")}catch(Fe){Dt(!1)}return Dt(!!fe&&-1!==(W||["active"]).indexOf(fe)),fe}const Ze={STATE_CHANGED:"state_changed"},st={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mt(z){switch(z){case"running":case"pausing":case"canceling":return st.RUNNING;case"paused":return st.PAUSED;case"success":return st.SUCCESS;case"canceled":return st.CANCELED;default:return st.ERROR}}class kt{constructor(W,fe,Ie){if(function Ln(z){return"function"==typeof z}(W)||null!=fe||null!=Ie)this.next=W,this.error=null!=fe?fe:void 0,this.complete=null!=Ie?Ie:void 0;else{const Ct=W;this.next=Ct.next,this.error=Ct.error,this.complete=Ct.complete}}}function bn(z){return(...W)=>{Promise.resolve().then(()=>z(...W))}}class Tr extends class fr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pt.NO_ERROR,this.sendPromise_=new Promise(W=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pt.ABORT,W()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pt.NETWORK_ERROR,W()}),this.xhr_.addEventListener("load",()=>{W()})})}send(W,fe,Ie,Fe){if(this.sent_)throw tn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(fe,W,!0),void 0!==Fe)for(const Ct in Fe)Fe.hasOwnProperty(Ct)&&this.xhr_.setRequestHeader(Ct,Fe[Ct].toString());return void 0!==Ie?this.xhr_.send(Ie):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(W){return-1}}getResponse(){if(!this.sent_)throw tn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(W){return this.xhr_.getResponseHeader(W)}addUploadProgressListener(W){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",W)}removeUploadProgressListener(W){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",W)}}{initXhr(){this.xhr_.responseType="text"}}function ui(){return new Tr}class oo{constructor(W,fe,Ie=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=W,this._blob=fe,this._metadata=Ie,this._mappings=ht(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Fe=>{if(this._request=void 0,this._chunkMultiplier=1,Fe._codeEquals(_t.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Ct=this.isExponentialBackoffExpired();if(He(Fe.status,[])){if(!Ct)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Fe=on()}this._error=Fe,this._transition("error")}},this._metadataErrorHandler=Fe=>{this._request=void 0,Fe._codeEquals(_t.CANCELED)?this.completeTransitions_():(this._error=Fe,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Fe,Ct)=>{this._resolve=Fe,this._reject=Ct,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const W=this._transferred;return fe=>this._updateProgress(W+fe)}_shouldDoResumable(W){return W.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(W){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([fe,Ie])=>{switch(this._state){case"running":W(fe,Ie);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((W,fe)=>{const Ie=function Oi(z,W,fe,Ie,Fe){const Ct=W.bucketOnlyServerUrl(),Jt=ks(W,Ie,Fe),Vn={name:Jt.fullPath},Rn=Zr(Ct,z.host,z._protocol),Kn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ie.size()}`,"X-Goog-Upload-Header-Content-Type":Jt.contentType,"Content-Type":"application/json; charset=utf-8"},ci=er(Jt,fe),Br=new Ut(Rn,"POST",function bi(qi){let Ri;ar(qi);try{Ri=qi.getResponseHeader("X-Goog-Upload-URL")}catch(Ls){Dt(!1)}return Dt(En(Ri)),Ri},z.maxUploadRetryTime);return Br.urlParams=Vn,Br.headers=Kn,Br.body=ci,Br.errorHandler=zr(W),Br}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Fe=this._ref.storage._makeRequest(Ie,ui,W,fe);this._request=Fe,Fe.getPromise().then(Ct=>{this._request=void 0,this._uploadUrl=Ct,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const W=this._uploadUrl;this._resolveToken((fe,Ie)=>{const Fe=function Ar(z,W,fe,Ie){const Rn=new Ut(fe,"POST",function Ct(cr){const Kn=ar(cr,["active","final"]);let ci=null;try{ci=cr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(bi){Dt(!1)}ci||Dt(!1);const Ai=Number(ci);return Dt(!isNaN(Ai)),new wn(Ai,Ie.size(),"final"===Kn)},z.maxUploadRetryTime);return Rn.headers={"X-Goog-Upload-Command":"query"},Rn.errorHandler=zr(W),Rn}(this._ref.storage,this._ref._location,W,this._blob),Ct=this._ref.storage._makeRequest(Fe,ui,fe,Ie);this._request=Ct,Ct.getPromise().then(Jt=>{this._request=void 0,this._updateProgress(Jt.current),this._needToFetchStatus=!1,Jt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const W=262144*this._chunkMultiplier,fe=new wn(this._transferred,this._blob.size()),Ie=this._uploadUrl;this._resolveToken((Fe,Ct)=>{let Jt;try{Jt=function rt(z,W,fe,Ie,Fe,Ct,Jt,Vn){const Rn=new wn(0,0);if(Jt?(Rn.current=Jt.current,Rn.total=Jt.total):(Rn.current=0,Rn.total=Ie.size()),Ie.size()!==Rn.total)throw function it(){return new ot(_t.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const cr=Rn.total-Rn.current;let Kn=cr;Fe>0&&(Kn=Math.min(Kn,Fe));const ci=Rn.current;let bi="";bi=0===Kn?"finalize":cr===Kn?"upload, finalize":"upload";const Br={"X-Goog-Upload-Command":bi,"X-Goog-Upload-Offset":`${Rn.current}`},qi=Ie.slice(ci,ci+Kn);if(null===qi)throw un();const $i=new Ut(fe,"POST",function Ri(Zi,Gs){const Io=ar(Zi,["active","final"]),Xo=Rn.current+Kn,Js=Ie.size();let No;return No="final"===Io?sn(W,Ct)(Zi,Gs):null,new wn(Xo,Js,"final"===Io,No)},W.maxUploadRetryTime);return $i.headers=Br,$i.body=qi.uploadData(),$i.progressCallback=Vn||null,$i.errorHandler=zr(z),$i}(this._ref._location,this._ref.storage,Ie,this._blob,W,this._mappings,fe,this._makeProgressCallback())}catch(Rn){return this._error=Rn,void this._transition("error")}const Vn=this._ref.storage._makeRequest(Jt,ui,Fe,Ct,!1);this._request=Vn,Vn.getPromise().then(Rn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Rn.current),Rn.finalized?(this._metadata=Rn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((W,fe)=>{const Ie=Ii(this._ref.storage,this._ref._location,this._mappings),Fe=this._ref.storage._makeRequest(Ie,ui,W,fe);this._request=Fe,Fe.getPromise().then(Ct=>{this._request=void 0,this._metadata=Ct,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((W,fe)=>{const Ie=function Dr(z,W,fe,Ie,Fe){const Ct=W.bucketOnlyServerUrl(),Jt={"X-Goog-Upload-Protocol":"multipart"},Rn=function Vn(){let $i="";for(let Zi=0;Zi<2;Zi++)$i+=Math.random().toString().slice(2);return $i}();Jt["Content-Type"]="multipart/related; boundary="+Rn;const cr=ks(W,Ie,Fe),Kn=er(cr,fe),bi=Gr.getBlob("--"+Rn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Kn+"\r\n--"+Rn+"\r\nContent-Type: "+cr.contentType+"\r\n\r\n",Ie,"\r\n--"+Rn+"--");if(null===bi)throw un();const Br={name:cr.fullPath},qi=Zr(Ct,z.host,z._protocol),Ls=z.maxUploadRetryTime,is=new Ut(qi,"POST",sn(z,fe),Ls);return is.urlParams=Br,is.headers=Jt,is.body=bi.uploadData(),is.errorHandler=zr(W),is}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Fe=this._ref.storage._makeRequest(Ie,ui,W,fe);this._request=Fe,Fe.getPromise().then(Ct=>{this._request=void 0,this._metadata=Ct,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(W){const fe=this._transferred;this._transferred=W,this._transferred!==fe&&this._notifyObservers()}_transition(W){if(this._state!==W)switch(W){case"canceling":case"pausing":this._state=W,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const fe="paused"===this._state;this._state=W,fe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=W,this._notifyObservers();break;case"canceled":this._error=qr(),this._state=W,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const W=mt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:W,metadata:this._metadata,task:this,ref:this._ref}}on(W,fe,Ie,Fe){const Ct=new kt(fe||void 0,Ie||void 0,Fe||void 0);return this._addObserver(Ct),()=>{this._removeObserver(Ct)}}then(W,fe){return this._promise.then(W,fe)}catch(W){return this.then(null,W)}_addObserver(W){this._observers.push(W),this._notifyObserver(W)}_removeObserver(W){const fe=this._observers.indexOf(W);-1!==fe&&this._observers.splice(fe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(fe=>{this._notifyObserver(fe)})}_finishPromise(){if(void 0!==this._resolve){let W=!0;switch(mt(this._state)){case st.SUCCESS:bn(this._resolve.bind(null,this.snapshot))();break;case st.CANCELED:case st.ERROR:bn(this._reject.bind(null,this._error))();break;default:W=!1}W&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(W){switch(mt(this._state)){case st.RUNNING:case st.PAUSED:W.next&&bn(W.next.bind(W,this.snapshot))();break;case st.SUCCESS:W.complete&&bn(W.complete.bind(W))();break;default:W.error&&bn(W.error.bind(W,this._error))()}}resume(){const W="paused"===this._state||"pausing"===this._state;return W&&this._transition("running"),W}pause(){const W="running"===this._state;return W&&this._transition("pausing"),W}cancel(){const W="running"===this._state||"pausing"===this._state;return W&&this._transition("canceling"),W}}class Hi{constructor(W,fe){this._service=W,this._location=fe instanceof hn?fe:hn.makeFromUrl(fe,W.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(W,fe){return new Hi(W,fe)}get root(){const W=new hn(this._location.bucket,"");return this._newRef(this._service,W)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ge(this._location.path)}get storage(){return this._service}get parent(){const W=function Ae(z){if(0===z.length)return null;const W=z.lastIndexOf("/");return-1===W?"":z.slice(0,W)}(this._location.path);if(null===W)return null;const fe=new hn(this._location.bucket,W);return new Hi(this._service,fe)}_throwIfRoot(W){if(""===this._location.path)throw xe(W)}}function ms(z,W,fe){return kr.apply(this,arguments)}function kr(){return(kr=(0,Mt.Z)(function*(z,W,fe){const Fe=yield Qs(z,{pageToken:fe});W.prefixes.push(...Fe.prefixes),W.items.push(...Fe.items),null!=Fe.nextPageToken&&(yield ms(z,W,Fe.nextPageToken))})).apply(this,arguments)}function Qs(z,W){null!=W&&"number"==typeof W.maxResults&&Mn("options.maxResults",1,1e3,W.maxResults);const fe=W||{},Ie=oi(z.storage,z._location,"/",fe.pageToken,fe.maxResults);return z.storage.makeRequestWithTokens(Ie,ui)}function ki(z){z._throwIfRoot("getDownloadURL");const W=function bs(z,W,fe){const Fe=Zr(W.fullServerUrl(),z.host,z._protocol),Jt=z.maxOperationRetryTime,Vn=new Ut(Fe,"GET",function or(z,W){return function fe(Ie,Fe){const Ct=rn(z,Fe,W);return Dt(null!==Ct),function $n(z,W,fe,Ie){const Fe=Pe(W);if(null===Fe||!En(Fe.downloadTokens))return null;const Ct=Fe.downloadTokens;if(0===Ct.length)return null;const Jt=encodeURIComponent;return Ct.split(",").map(cr=>{const ci=z.fullPath;return Zr("/b/"+Jt(z.bucket)+"/o/"+Jt(ci),fe,Ie)+ts({alt:"media",token:cr})})[0]}(Ct,Fe,z.host,z._protocol)}}(z,fe),Jt);return Vn.errorHandler=wr(W),Vn}(z.storage,z._location,ht());return z.storage.makeRequestWithTokens(W,ui).then(fe=>{if(null===fe)throw function Je(){return new ot(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return fe})}function zi(z,W){const fe=function he(z,W){const fe=W.split("/").filter(Ie=>Ie.length>0).join("/");return 0===z.length?fe:z+"/"+fe}(z._location.path,W),Ie=new hn(z._location.bucket,fe);return new Hi(z.storage,Ie)}function Ho(z,W){if(z instanceof uo){const fe=z;if(null==fe._bucket)throw function tr(){return new ot(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dn+"' property when initializing the app?")}();const Ie=new Hi(fe,fe._bucket);return null!=W?Ho(Ie,W):Ie}return void 0!==W?zi(z,W):z}function js(z,W){if(W&&function da(z){return/^[A-Za-z]+:\/\//.test(z)}(W)){if(z instanceof uo)return function li(z,W){return new Hi(z,W)}(z,W);throw De("To use ref(service, url), the first argument must be a Storage instance.")}return Ho(z,W)}function Fs(z,W){const fe=null==W?void 0:W[dn];return null==fe?null:hn.makeFromBucketSpec(fe,z)}class uo{constructor(W,fe,Ie,Fe,Ct){this.app=W,this._authProvider=fe,this._appCheckProvider=Ie,this._url=Fe,this._firebaseVersion=Ct,this._bucket=null,this._host=Nt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Fe?hn.makeFromBucketSpec(Fe,this._host):Fs(this._host,this.app.options)}get host(){return this._host}set host(W){this._host=W,this._bucket=null!=this._url?hn.makeFromBucketSpec(this._url,W):Fs(W,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(W){Mn("time",0,Number.POSITIVE_INFINITY,W),this._maxUploadRetryTime=W}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(W){Mn("time",0,Number.POSITIVE_INFINITY,W),this._maxOperationRetryTime=W}_getAuthToken(){var W=this;return(0,Mt.Z)(function*(){if(W._overrideAuthToken)return W._overrideAuthToken;const fe=W._authProvider.getImmediate({optional:!0});if(fe){const Ie=yield fe.getToken();if(null!==Ie)return Ie.accessToken}return null})()}_getAppCheckToken(){var W=this;return(0,Mt.Z)(function*(){const fe=W._appCheckProvider.getImmediate({optional:!0});return fe?(yield fe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(W=>W.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(W){return new Hi(this,W)}_makeRequest(W,fe,Ie,Fe,Ct=!0){if(this._deleted)return new Dn(ve());{const Jt=function Xn(z,W,fe,Ie,Fe,Ct,Jt=!0){const Vn=ts(z.urlParams),Rn=z.url+Vn,cr=Object.assign({},z.headers);return function nn(z,W){W&&(z["X-Firebase-GMPID"]=W)}(cr,W),function St(z,W){null!==W&&W.length>0&&(z.Authorization="Firebase "+W)}(cr,fe),function zt(z,W){z["X-Firebase-Storage-Version"]="webjs/"+(null!=W?W:"AppManager")}(cr,Ct),function Nr(z,W){null!==W&&(z["X-Firebase-AppCheck"]=W)}(cr,Ie),new Ge(Rn,z.method,cr,z.body,z.successCodes,z.additionalRetryCodes,z.handler,z.errorHandler,z.timeout,z.progressCallback,Fe,Jt)}(W,this._appId,Ie,Fe,fe,this._firebaseVersion,Ct);return this._requests.add(Jt),Jt.getPromise().then(()=>this._requests.delete(Jt),()=>this._requests.delete(Jt)),Jt}}makeRequestWithTokens(W,fe){var Ie=this;return(0,Mt.Z)(function*(){const[Fe,Ct]=yield Promise.all([Ie._getAuthToken(),Ie._getAppCheckToken()]);return Ie._makeRequest(W,fe,Fe,Ct).getPromise()})()}}const Rs="@firebase/storage";function ys(z,W){return js(z=(0,At.m9)(z),W)}function de(z,{instanceIdentifier:W}){const fe=z.getProvider("app").getImmediate(),Ie=z.getProvider("auth-internal"),Fe=z.getProvider("app-check-internal");return new uo(fe,Ie,Fe,W,Ft.SDK_VERSION)}!function ke(){(0,Ft._registerComponent)(new Qe.wA("storage",de,"PUBLIC").setMultipleInstances(!0)),(0,Ft.registerVersion)(Rs,"0.11.2",""),(0,Ft.registerVersion)(Rs,"0.11.2","esm2017")}();class Tt{constructor(W,fe,Ie){this._delegate=W,this.task=fe,this.ref=Ie}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Bt{constructor(W,fe){this._delegate=W,this._ref=fe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Tt(this._delegate.snapshot,this,this._ref)}then(W,fe){return this._delegate.then(Ie=>{if(W)return W(new Tt(Ie,this,this._ref))},fe)}on(W,fe,Ie,Fe){let Ct;return fe&&(Ct="function"==typeof fe?Jt=>fe(new Tt(Jt,this,this._ref)):{next:fe.next?Jt=>fe.next(new Tt(Jt,this,this._ref)):void 0,complete:fe.complete||void 0,error:fe.error||void 0}),this._delegate.on(W,Ct,Ie||void 0,Fe||void 0)}}class Cn{constructor(W,fe){this._delegate=W,this._service=fe}get prefixes(){return this._delegate.prefixes.map(W=>new Fr(W,this._service))}get items(){return this._delegate.items.map(W=>new Fr(W,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Fr{constructor(W,fe){this._delegate=W,this.storage=fe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(W){const fe=function xs(z,W){return zi(z,W)}(this._delegate,W);return new Fr(fe,this.storage)}get root(){return new Fr(this._delegate.root,this.storage)}get parent(){const W=this._delegate.parent;return null==W?null:new Fr(W,this.storage)}put(W,fe){return this._throwIfRoot("put"),new Bt(function $s(z,W,fe){return function ca(z,W,fe){return z._throwIfRoot("uploadBytesResumable"),new oo(z,new Gr(W),fe)}(z=(0,At.m9)(z),W,fe)}(this._delegate,W,fe),this)}putString(W,fe=Yt.RAW,Ie){this._throwIfRoot("putString");const Fe=sr(fe,W),Ct=Object.assign({},Ie);return null==Ct.contentType&&null!=Fe.contentType&&(Ct.contentType=Fe.contentType),new Bt(new oo(this._delegate,new Gr(Fe.data,!0),Ct),this)}listAll(){return function lo(z){return function jo(z){const W={prefixes:[],items:[]};return ms(z,W).then(()=>W)}(z=(0,At.m9)(z))}(this._delegate).then(W=>new Cn(W,this.storage))}list(W){return function mo(z,W){return Qs(z=(0,At.m9)(z),W)}(this._delegate,W||void 0).then(fe=>new Cn(fe,this.storage))}getMetadata(){return function Ms(z){return function wo(z){z._throwIfRoot("getMetadata");const W=Ii(z.storage,z._location,ht());return z.storage.makeRequestWithTokens(W,ui)}(z=(0,At.m9)(z))}(this._delegate)}updateMetadata(W){return function ni(z,W){return function ao(z,W){z._throwIfRoot("updateMetadata");const fe=function rr(z,W,fe,Ie){const Ct=Zr(W.fullServerUrl(),z.host,z._protocol),Vn=er(fe,Ie),cr=z.maxOperationRetryTime,Kn=new Ut(Ct,"PATCH",sn(z,Ie),cr);return Kn.headers={"Content-Type":"application/json; charset=utf-8"},Kn.body=Vn,Kn.errorHandler=wr(W),Kn}(z.storage,z._location,W,ht());return z.storage.makeRequestWithTokens(fe,ui)}(z=(0,At.m9)(z),W)}(this._delegate,W)}getDownloadURL(){return function Wr(z){return ki(z=(0,At.m9)(z))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ns(z){return function Ss(z){z._throwIfRoot("deleteObject");const W=function Ui(z,W){const Ie=Zr(W.fullServerUrl(),z.host,z._protocol),Vn=new Ut(Ie,"DELETE",function Jt(Rn,cr){},z.maxOperationRetryTime);return Vn.successCodes=[200,204],Vn.errorHandler=wr(W),Vn}(z.storage,z._location);return z.storage.makeRequestWithTokens(W,ui)}(z=(0,At.m9)(z))}(this._delegate)}_throwIfRoot(W){if(""===this._delegate._location.path)throw xe(W)}}class Vr{constructor(W,fe){this.app=W,this._delegate=fe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(W){if(yr(W))throw De("ref() expected a child path but got a URL, use refFromURL instead.");return new Fr(ys(this._delegate,W),this)}refFromURL(W){if(!yr(W))throw De("refFromURL() expected a full URL but got a child path, use ref() instead.");try{hn.makeFromUrl(W,this._delegate.host)}catch(fe){throw De("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fr(ys(this._delegate,W),this)}setMaxUploadRetryTime(W){this._delegate.maxUploadRetryTime=W}setMaxOperationRetryTime(W){this._delegate.maxOperationRetryTime=W}useEmulator(W,fe,Ie={}){!function F(z,W,fe,Ie={}){!function As(z,W,fe,Ie={}){z.host=`${W}:${fe}`,z._protocol="http";const{mockUserToken:Fe}=Ie;Fe&&(z._overrideAuthToken="string"==typeof Fe?Fe:(0,At.Sg)(Fe,z.app.options.projectId))}(z,W,fe,Ie)}(this._delegate,W,fe,Ie)}}function yr(z){return/^[A-Za-z]+:\/\//.test(z)}function ii(z,{instanceIdentifier:W}){const fe=z.getProvider("app-compat").getImmediate(),Ie=z.getProvider("storage").getImmediate({identifier:W});return new Vr(fe,Ie)}!function yo(z){const W={TaskState:st,TaskEvent:Ze,StringFormat:Yt,Storage:Vr,Reference:Fr};z.INTERNAL.registerComponent(new Qe.wA("storage-compat",ii,"PUBLIC").setServiceProps(W).setMultipleInstances(!0)),z.registerVersion("@firebase/storage-compat","0.3.2")}(Lt.Z);var Fi=$(6215),ur=$(9260);function rs(z){const W=function _s(z){return new y.y(W=>{const fe=Jt=>W.next(Jt);fe(z.snapshot);const Ct=z.on("state_changed",fe);return z.then(Jt=>{fe(Jt),W.complete()},Jt=>{fe(z.snapshot),(Jt=>{W.error(Jt)})(Jt)}),function(){Ct()}}).pipe(function Xe(z,W=ie.z){return(0,Ue.e)((fe,Ie)=>{let Fe=null,Ct=null,Jt=null;const Vn=()=>{if(Fe){Fe.unsubscribe(),Fe=null;const cr=Ct;Ct=null,Ie.next(cr)}};function Rn(){const cr=Jt+z,Kn=W.now();if(Kn<cr)return Fe=this.schedule(void 0,cr-Kn),void Ie.add(Fe);Vn()}fe.subscribe((0,Ke.x)(Ie,cr=>{Ct=cr,Jt=W.now(),Fe||(Fe=W.schedule(Rn,z),Ie.add(Fe))},()=>{Vn(),Ie.complete()},void 0,()=>{Ct=Fe=null}))})}(0))}(z);return{task:z,then:z.then.bind(z),catch:z.catch.bind(z),pause:z.pause.bind(z),cancel:z.cancel.bind(z),resume:z.resume.bind(z),snapshotChanges:()=>W,percentageChanges:()=>W.pipe((0,ze.U)(fe=>fe.bytesTransferred/fe.totalBytes*100))}}function vs(z){return{getDownloadURL:()=>(0,B.of)(void 0).pipe(be.fc,(0,lt.w)(()=>z.getDownloadURL()),be.iC),getMetadata:()=>(0,B.of)(void 0).pipe(be.fc,(0,lt.w)(()=>z.getMetadata()),be.iC),delete:()=>(0,X.D)(z.delete()),child:W=>vs(z.child(W)),updateMetadata:W=>(0,X.D)(z.updateMetadata(W)),put:(W,fe)=>rs(z.put(W,fe)),putString:(W,fe,Ie)=>rs(z.putString(W,fe,Ie)),list:W=>(0,X.D)(z.list(W)),listAll:()=>(0,X.D)(z.listAll())}}const qo=new Ce.OlP("angularfire2.storageBucket"),K=new Ce.OlP("angularfire2.storage.maxUploadRetryTime"),V=new Ce.OlP("angularfire2.storage.maxOperationRetryTime"),O=new Ce.OlP("angularfire2.storage.use-emulator");let ue=(()=>{class z{constructor(fe,Ie,Fe,Ct,Jt,Vn,Rn,cr,Kn,ci){const Ai=(0,nt.on)(fe,Jt,Ie);this.storage=(0,nt.cc)(`${Ai.name}.storage.${Fe}`,"AngularFireStorage",Ai.name,()=>{const bi=Jt.runOutsideAngular(()=>Ai.storage(Fe||void 0)),Br=Kn;return Br&&bi.useEmulator(...Br),Rn&&bi.setMaxUploadRetryTime(Rn),cr&&bi.setMaxOperationRetryTime(cr),bi},[Rn,cr])}ref(fe){return vs(this.storage.ref(fe))}refFromURL(fe){return vs(this.storage.refFromURL(fe))}upload(fe,Ie,Fe){return vs(this.storage.ref(fe)).put(Ie,Fe)}}return z.\u0275fac=function(fe){return new(fe||z)(Ce.LFG(nt.Dh),Ce.LFG(nt.xv,8),Ce.LFG(qo,8),Ce.LFG(Ce.Lbi),Ce.LFG(Ce.R0b),Ce.LFG(be.HU),Ce.LFG(K,8),Ce.LFG(V,8),Ce.LFG(O,8),Ce.LFG(Fi.nm,8))},z.\u0275prov=Ce.Yz7({token:z,factory:z.\u0275fac,providedIn:"any"}),z})(),qt=(()=>{class z{}return z.\u0275fac=function(fe){return new(fe||z)},z.\u0275mod=Ce.oAB({type:z}),z.\u0275inj=Ce.cJS({}),z})(),gi=(()=>{class z{constructor(){ur.Z.registerVersion("angularfire",be.q4.full,"gcs-compat")}}return z.\u0275fac=function(fe){return new(fe||z)},z.\u0275mod=Ce.oAB({type:z}),z.\u0275inj=Ce.cJS({providers:[ue],imports:[qt]}),z})()},2011:(pn,dt,$)=>{$.d(dt,{Dh:()=>ze,GT:()=>Ke,cc:()=>Mt,hO:()=>Lt,on:()=>be,pX:()=>Ue,xv:()=>lt});var y=$(5e3),B=$(9260),X=$(4976);pn=$.hmd(pn);const ie=["ngOnDestroy"],Ue=(Nt,dn,Xt,Ee={})=>new Proxy(Nt,{get:(Me,ot)=>Xt.runOutsideAngular(()=>{var _t;if(Nt[ot])return(null===(_t=null==Ee?void 0:Ee.spy)||void 0===_t?void 0:_t.get)&&Ee.spy.get(ot,Nt[ot]),Nt[ot];if(ie.indexOf(ot)>-1)return()=>{};const ft=dn.toPromise().then(tt=>{const Vt=tt&&tt[ot];return"function"==typeof Vt?Vt.bind(tt):Vt&&Vt.then?Vt.then(It=>Xt.run(()=>It)):Xt.run(()=>Vt)});return new Proxy(()=>{},{get:(tt,Vt)=>ft[Vt],apply:(tt,Vt,It)=>ft.then(On=>{var Ht;const xn=On&&On(...It);return(null===(Ht=null==Ee?void 0:Ee.spy)||void 0===Ht?void 0:Ht.apply)&&Ee.spy.apply(ot,It,xn),xn})})})}),Ke=(Nt,dn)=>{dn.forEach(Xt=>{Object.getOwnPropertyNames(Xt.prototype||Xt).forEach(Ee=>{Object.defineProperty(Nt.prototype,Ee,Object.getOwnPropertyDescriptor(Xt.prototype||Xt,Ee))})})};class Xe{constructor(dn){return dn}}const ze=new y.OlP("angularfire2.app.options"),lt=new y.OlP("angularfire2.app.name");function be(Nt,dn,Xt){const Me="object"==typeof Xt&&Xt||{};Me.name=Me.name||"string"==typeof Xt&&Xt||"[DEFAULT]";const _t=B.Z.apps.filter(ft=>ft&&ft.name===Me.name)[0]||dn.runOutsideAngular(()=>B.Z.initializeApp(Nt,Me));try{JSON.stringify(Nt)!==JSON.stringify(_t.options)&&Ce("error",`${_t.name} Firebase App already initialized with different options${pn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ft){}return new Xe(_t)}const Ce=(Nt,...dn)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Nt](...dn)},nt={provide:Xe,useFactory:be,deps:[ze,y.R0b,[new y.FiY,lt]]};let Lt=(()=>{class Nt{constructor(Xt){B.Z.registerVersion("angularfire",X.q4.full,"core"),B.Z.registerVersion("angularfire",X.q4.full,"app-compat"),B.Z.registerVersion("angular",y.q4F.full,Xt.toString())}static initializeApp(Xt,Ee){return{ngModule:Nt,providers:[{provide:ze,useValue:Xt},{provide:lt,useValue:Ee}]}}}return Nt.\u0275fac=function(Xt){return new(Xt||Nt)(y.LFG(y.Lbi))},Nt.\u0275mod=y.oAB({type:Nt}),Nt.\u0275inj=y.cJS({providers:[nt]}),Nt})();function Mt(Nt,dn,Xt,Ee,Me){const[,ot,_t]=globalThis.\u0275AngularfireInstanceCache.find(ft=>ft[0]===Nt)||[];if(ot)return function Ft(Nt,dn){try{return Nt.toString()===dn.toString()}catch(Xt){return Nt===dn}}(Me,_t)||(Qe("error",`${dn} was already initialized on the ${Xt} Firebase App with different settings.${At?" You may need to reload as Firebase is not HMR aware.":""}`),Qe("warn",{is:Me,was:_t})),ot;{const ft=Ee();return globalThis.\u0275AngularfireInstanceCache.push([Nt,ft,Me]),ft}}const At=!!pn.hot,Qe=(Nt,...dn)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Nt](...dn)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(pn,dt,$)=>{$.d(dt,{q4:()=>ei,iC:()=>di,fc:()=>pr,HU:()=>Lo,vb:()=>no,JM:()=>mi,u3:()=>Ks});var y=$(5e3),B=$(259),X=$(5861),ie=$(6881),Ue=$(2090),Ke=$(4859),Xe=$(1877);let lt,be;const Lt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,At=new WeakMap,Qe=new WeakMap;let Xt={get(D,P,J){if(D instanceof IDBTransaction){if("done"===P)return Mt.get(D);if("objectStoreNames"===P)return D.objectStoreNames||Ft.get(D);if("store"===P)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return _t(D[P])},set:(D,P,J)=>(D[P]=J,!0),has:(D,P)=>D instanceof IDBTransaction&&("done"===P||"store"===P)||P in D};function ot(D){return"function"==typeof D?function Me(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function nt(){return be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...P){return D.apply(ft(this),P),_t(Lt.get(this))}:function(...P){return _t(D.apply(ft(this),P))}:function(P,...J){const we=D.call(ft(this),P,...J);return Ft.set(we,P.sort?P.sort():[P]),_t(we)}}(D):(D instanceof IDBTransaction&&function dn(D){if(Mt.has(D))return;const P=new Promise((J,we)=>{const Be=()=>{D.removeEventListener("complete",ct),D.removeEventListener("error",Ot),D.removeEventListener("abort",Ot)},ct=()=>{J(),Be()},Ot=()=>{we(D.error||new DOMException("AbortError","AbortError")),Be()};D.addEventListener("complete",ct),D.addEventListener("error",Ot),D.addEventListener("abort",Ot)});Mt.set(D,P)}(D),((D,P)=>P.some(J=>D instanceof J))(D,function Ce(){return lt||(lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,Xt):D)}function _t(D){if(D instanceof IDBRequest)return function Nt(D){const P=new Promise((J,we)=>{const Be=()=>{D.removeEventListener("success",ct),D.removeEventListener("error",Ot)},ct=()=>{J(_t(D.result)),Be()},Ot=()=>{we(D.error),Be()};D.addEventListener("success",ct),D.addEventListener("error",Ot)});return P.then(J=>{J instanceof IDBCursor&&Lt.set(J,D)}).catch(()=>{}),Qe.set(P,D),P}(D);if(At.has(D))return At.get(D);const P=ot(D);return P!==D&&(At.set(D,P),Qe.set(P,D)),P}const ft=D=>Qe.get(D),It=["get","getKey","getAll","getAllKeys","count"],On=["put","add","delete","clear"],Ht=new Map;function xn(D,P){if(!(D instanceof IDBDatabase)||P in D||"string"!=typeof P)return;if(Ht.get(P))return Ht.get(P);const J=P.replace(/FromIndex$/,""),we=P!==J,Be=On.includes(J);if(!(J in(we?IDBIndex:IDBObjectStore).prototype)||!Be&&!It.includes(J))return;const ct=function(){var Ot=(0,X.Z)(function*(cn,...mn){const Qn=this.transaction(cn,Be?"readwrite":"readonly");let Xr=Qn.store;return we&&(Xr=Xr.index(mn.shift())),(yield Promise.all([Xr[J](...mn),Be&&Qn.done]))[0]});return function(mn){return Ot.apply(this,arguments)}}();return Ht.set(P,ct),ct}!function Ee(D){Xt=D(Xt)}(D=>z_(G_({},D),{get:(P,J,we)=>xn(P,J)||D.get(P,J,we),has:(P,J)=>!!xn(P,J)||D.has(P,J)}));const on="@firebase/installations",gr="w:0.6.4",tr="FIS_v2",ve=new Ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xe(D){return D instanceof Ue.ZR&&D.code.includes("request-failed")}function pt({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function tn(D){return{token:D.token,requestStatus:2,expiresIn:Lr(D.expiresIn),creationTime:Date.now()}}function hn(D,P){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,X.Z)(function*(D,P){const we=(yield P.json()).error;return ve.create("request-failed",{requestName:D,serverCode:we.code,serverMessage:we.message,serverStatus:we.status})})).apply(this,arguments)}function zn({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function mr(D,{refreshToken:P}){const J=zn(D);return J.append("Authorization",function En(D){return`${tr} ${D}`}(P)),J}function ir(D){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,X.Z)(function*(D){const P=yield D();return P.status>=500&&P.status<600?D():P})).apply(this,arguments)}function Lr(D){return Number(D.replace("s","000"))}function nr(D,P){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,X.Z)(function*({appConfig:D,heartbeatServiceProvider:P},{fid:J}){const we=pt(D),Be=zn(D),ct=P.getImmediate({optional:!0});if(ct){const Qn=yield ct.getHeartbeatsHeader();Qn&&Be.append("x-firebase-client",Qn)}const cn={method:"POST",headers:Be,body:JSON.stringify({fid:J,authVersion:tr,appId:D.appId,sdkVersion:gr})},mn=yield ir(()=>fetch(we,cn));if(mn.ok){const Qn=yield mn.json();return{fid:Qn.fid||J,registrationStatus:2,refreshToken:Qn.refreshToken,authToken:tn(Qn.authToken)}}throw yield hn("Create Installation",mn)})).apply(this,arguments)}function Mn(D){return new Promise(P=>{setTimeout(P,D)})}const ts=/^[cdef][\w-]{21}$/;function He(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const J=function Ge(D){return function Zr(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return ts.test(J)?J:""}catch(D){return""}}function at(D){return`${D.appName}!${D.appId}`}const St=new Map;function zt(D,P){const J=at(D);Xn(J,P),function Wn(D,P){const J=function hr(){return!hi&&"BroadcastChannel"in self&&(hi=new BroadcastChannel("[Firebase] FID Change"),hi.onmessage=D=>{Xn(D.data.key,D.data.fid)}),hi}();J&&J.postMessage({key:D,fid:P}),function br(){0===St.size&&hi&&(hi.close(),hi=null)}()}(J,P)}function Xn(D,P){const J=St.get(D);if(J)for(const we of J)we(P)}let hi=null;const sr="firebase-installations-store";let Er=null;function lr(){return Er||(Er=function tt(D,P,{blocked:J,upgrade:we,blocking:Be,terminated:ct}={}){const Ot=indexedDB.open(D,P),cn=_t(Ot);return we&&Ot.addEventListener("upgradeneeded",mn=>{we(_t(Ot.result),mn.oldVersion,mn.newVersion,_t(Ot.transaction))}),J&&Ot.addEventListener("blocked",()=>J()),cn.then(mn=>{ct&&mn.addEventListener("close",()=>ct()),Be&&mn.addEventListener("versionchange",()=>Be())}).catch(()=>{}),cn}("firebase-installations-database",1,{upgrade:(D,P)=>{0===P&&D.createObjectStore(sr)}})),Er}function Hr(D,P){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,X.Z)(function*(D,P){const J=at(D),Be=(yield lr()).transaction(sr,"readwrite"),ct=Be.objectStore(sr),Ot=yield ct.get(J);return yield ct.put(P,J),yield Be.done,(!Ot||Ot.fid!==P.fid)&&zt(D,P.fid),P})).apply(this,arguments)}function fi(D){return ji.apply(this,arguments)}function ji(){return(ji=(0,X.Z)(function*(D){const P=at(D),we=(yield lr()).transaction(sr,"readwrite");yield we.objectStore(sr).delete(P),yield we.done})).apply(this,arguments)}function Vi(D,P){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,X.Z)(function*(D,P){const J=at(D),Be=(yield lr()).transaction(sr,"readwrite"),ct=Be.objectStore(sr),Ot=yield ct.get(J),cn=P(Ot);return void 0===cn?yield ct.delete(J):yield ct.put(cn,J),yield Be.done,cn&&(!Ot||Ot.fid!==cn.fid)&&zt(D,cn.fid),cn})).apply(this,arguments)}function Pe(D){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,X.Z)(function*(D){let P;const J=yield Vi(D.appConfig,we=>{const Be=he(we),ct=ge(D,Be);return P=ct.registrationPromise,ct.installationEntry});return""===J.fid?{installationEntry:yield P}:{installationEntry:J,registrationPromise:P}})).apply(this,arguments)}function he(D){return Wt(D||{fid:He(),registrationStatus:0})}function ge(D,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(ve.create("app-offline"))};const J={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},we=function G(D,P){return ne.apply(this,arguments)}(D,J);return{installationEntry:J,registrationPromise:we}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:se(D)}:{installationEntry:P}}function ne(){return(ne=(0,X.Z)(function*(D,P){try{const J=yield nr(D,P);return Hr(D.appConfig,J)}catch(J){throw xe(J)&&409===J.customData.serverCode?yield fi(D.appConfig):yield Hr(D.appConfig,{fid:P.fid,registrationStatus:0}),J}})).apply(this,arguments)}function se(D){return Se.apply(this,arguments)}function Se(){return(Se=(0,X.Z)(function*(D){let P=yield ht(D.appConfig);for(;1===P.registrationStatus;)yield Mn(100),P=yield ht(D.appConfig);if(0===P.registrationStatus){const{installationEntry:J,registrationPromise:we}=yield Pe(D);return we||J}return P})).apply(this,arguments)}function ht(D){return Vi(D,P=>{if(!P)throw ve.create("installation-not-found");return Wt(P)})}function Wt(D){return function yn(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function rn(D,P){return $n.apply(this,arguments)}function $n(){return($n=(0,X.Z)(function*({appConfig:D,heartbeatServiceProvider:P},J){const we=er(D,J),Be=mr(D,J),ct=P.getImmediate({optional:!0});if(ct){const Qn=yield ct.getHeartbeatsHeader();Qn&&Be.append("x-firebase-client",Qn)}const cn={method:"POST",headers:Be,body:JSON.stringify({installation:{sdkVersion:gr,appId:D.appId}})},mn=yield ir(()=>fetch(we,cn));if(mn.ok)return tn(yield mn.json());throw yield hn("Generate Auth Token",mn)})).apply(this,arguments)}function er(D,{fid:P}){return`${pt(D)}/${P}/authTokens:generate`}function Ur(D){return pi.apply(this,arguments)}function pi(){return(pi=(0,X.Z)(function*(D,P=!1){let J;const we=yield Vi(D.appConfig,ct=>{if(!Tn(ct))throw ve.create("not-registered");const Ot=ct.authToken;if(!P&&or(Ot))return ct;if(1===Ot.requestStatus)return J=Et(D,P),ct;{if(!navigator.onLine)throw ve.create("app-offline");const cn=wr(ct);return J=Dt(D,cn),cn}});return J?yield J:we.authToken})).apply(this,arguments)}function Et(D,P){return gt.apply(this,arguments)}function gt(){return(gt=(0,X.Z)(function*(D,P){let J=yield Ut(D.appConfig);for(;1===J.authToken.requestStatus;)yield Mn(100),J=yield Ut(D.appConfig);const we=J.authToken;return 0===we.requestStatus?Ur(D,P):we})).apply(this,arguments)}function Ut(D){return Vi(D,P=>{if(!Tn(P))throw ve.create("not-registered");return function Ii(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function Dt(D,P){return sn.apply(this,arguments)}function sn(){return(sn=(0,X.Z)(function*(D,P){try{const J=yield rn(D,P),we=Object.assign(Object.assign({},P),{authToken:J});return yield Hr(D.appConfig,we),J}catch(J){if(!xe(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const we=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield Hr(D.appConfig,we)}else yield fi(D.appConfig);throw J}})).apply(this,arguments)}function Tn(D){return void 0!==D&&2===D.registrationStatus}function or(D){return 2===D.requestStatus&&!function zr(D){const P=Date.now();return P<D.creationTime||D.creationTime+D.expiresIn<P+36e5}(D)}function wr(D){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:P})}function Ti(){return(Ti=(0,X.Z)(function*(D){const P=D,{installationEntry:J,registrationPromise:we}=yield Pe(P);return we?we.catch(console.error):Ur(P).catch(console.error),J.fid})).apply(this,arguments)}function rr(){return(rr=(0,X.Z)(function*(D,P=!1){const J=D;return yield Ui(J),(yield Ur(J,P)).token})).apply(this,arguments)}function Ui(D){return gs.apply(this,arguments)}function gs(){return(gs=(0,X.Z)(function*(D){const{registrationPromise:P}=yield Pe(D);P&&(yield P)})).apply(this,arguments)}function Ze(D){return ve.create("missing-app-config-values",{valueName:D})}const st="installations",kt=D=>{const P=D.getProvider("app").getImmediate(),J=function rt(D){if(!D||!D.options)throw Ze("App Configuration");if(!D.name)throw Ze("App Name");const P=["projectId","apiKey","appId"];for(const J of P)if(!D.options[J])throw Ze(J);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(P);return{app:P,appConfig:J,heartbeatServiceProvider:(0,ie._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},bn=D=>{const P=D.getProvider("app").getImmediate(),J=(0,ie._getProvider)(P,st).getImmediate();return{getId:()=>function oi(D){return Ti.apply(this,arguments)}(J),getToken:Be=>function bs(D){return rr.apply(this,arguments)}(J,Be)}};(function Rr(){(0,ie._registerComponent)(new Ke.wA(st,kt,"PUBLIC")),(0,ie._registerComponent)(new Ke.wA("installations-internal",bn,"PRIVATE"))})(),(0,ie.registerVersion)(on,"0.6.4"),(0,ie.registerVersion)(on,"0.6.4","esm2017");const fr="@firebase/remote-config",Wi=new Ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ho{constructor(P,J,we,Be){this.client=P,this.storage=J,this.storageCache=we,this.logger=Be}isCachedDataFresh(P,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const we=Date.now()-J,Be=we<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${we}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${Be}.`),Be}fetch(P){var J=this;return(0,X.Z)(function*(){const[we,Be]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(Be&&J.isCachedDataFresh(P.cacheMaxAgeMillis,we))return Be;P.eTag=Be&&Be.eTag;const ct=yield J.client.fetch(P),Ot=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ct.status&&Ot.push(J.storage.setLastSuccessfulFetchResponse(ct)),yield Promise.all(Ot),ct})()}}function js(D=navigator){return D.languages&&D.languages[0]||D.language}class Fs{constructor(P,J,we,Be,ct,Ot){this.firebaseInstallations=P,this.sdkVersion=J,this.namespace=we,this.projectId=Be,this.apiKey=ct,this.appId=Ot}fetch(P){var J=this;return(0,X.Z)(function*(){const[we,Be]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),Ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,cn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},mn={sdk_version:J.sdkVersion,app_instance_id:we,app_instance_id_token:Be,app_id:J.appId,language_code:js()},Qn={method:"POST",headers:cn,body:JSON.stringify(mn)},Xr=fetch(Ot,Qn),xr=new Promise((Mo,Ba)=>{P.signal.addEventListener(()=>{const ol=new Error("The operation was aborted.");ol.name="AbortError",Ba(ol)})});let Ro;try{yield Promise.race([Xr,xr]),Ro=yield Xr}catch(Mo){let Ba="fetch-client-network";throw"AbortError"===(null==Mo?void 0:Mo.name)&&(Ba="fetch-timeout"),Wi.create(Ba,{originalErrorMessage:null==Mo?void 0:Mo.message})}let fo=Ro.status;const Ts=Ro.headers.get("ETag")||void 0;let Cu,Gi;if(200===Ro.status){let Mo;try{Mo=yield Ro.json()}catch(Ba){throw Wi.create("fetch-client-parse",{originalErrorMessage:null==Ba?void 0:Ba.message})}Cu=Mo.entries,Gi=Mo.state}if("INSTANCE_STATE_UNSPECIFIED"===Gi?fo=500:"NO_CHANGE"===Gi?fo=304:("NO_TEMPLATE"===Gi||"EMPTY_CONFIG"===Gi)&&(Cu={}),304!==fo&&200!==fo)throw Wi.create("fetch-status",{httpStatus:fo});return{status:fo,eTag:Ts,config:Cu}})()}}class Rs{constructor(P,J){this.client=P,this.storage=J}fetch(P){var J=this;return(0,X.Z)(function*(){const we=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(P,we)})()}attemptFetch(P,J){var we=this;return(0,X.Z)(function*(Be,{throttleEndTimeMillis:ct,backoffCount:Ot}){yield function As(D,P){return new Promise((J,we)=>{const Be=Math.max(P-Date.now(),0),ct=setTimeout(J,Be);D.addEventListener(()=>{clearTimeout(ct),we(Wi.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(Be.signal,ct);try{const cn=yield we.client.fetch(Be);return yield we.storage.deleteThrottleMetadata(),cn}catch(cn){if(!function uo(D){if(!(D instanceof Ue.ZR&&D.customData))return!1;const P=Number(D.customData.httpStatus);return 429===P||500===P||503===P||504===P}(cn))throw cn;const mn={throttleEndTimeMillis:Date.now()+(0,Ue.$s)(Ot),backoffCount:Ot+1};return yield we.storage.setThrottleMetadata(mn),we.attemptFetch(Be,mn)}}).apply(this,arguments)}}class Po{constructor(P,J,we,Be,ct){this.app=P,this._client=J,this._storageCache=we,this._storage=Be,this._logger=ct,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hs(D,P){const J=D.target.error||void 0;return Wi.create(P,{originalErrorMessage:J&&(null==J?void 0:J.message)})}const Ki="app_namespace_store";class mo{constructor(P,J,we,Be=function ni(){return new Promise((D,P)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=we=>{P(Hs(we,"storage-open"))},J.onsuccess=we=>{D(we.target.result)},J.onupgradeneeded=we=>{0===we.oldVersion&&we.target.result.createObjectStore(Ki,{keyPath:"compositeKey"})}}catch(J){P(Wi.create("storage-open",{originalErrorMessage:null==J?void 0:J.message}))}})}()){this.appId=P,this.appName=J,this.namespace=we,this.openDbPromise=Be}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var J=this;return(0,X.Z)(function*(){const we=yield J.openDbPromise;return new Promise((Be,ct)=>{const cn=we.transaction([Ki],"readonly").objectStore(Ki),mn=J.createCompositeKey(P);try{const Qn=cn.get(mn);Qn.onerror=Xr=>{ct(Hs(Xr,"storage-get"))},Qn.onsuccess=Xr=>{const xr=Xr.target.result;Be(xr?xr.value:void 0)}}catch(Qn){ct(Wi.create("storage-get",{originalErrorMessage:null==Qn?void 0:Qn.message}))}})})()}set(P,J){var we=this;return(0,X.Z)(function*(){const Be=yield we.openDbPromise;return new Promise((ct,Ot)=>{const mn=Be.transaction([Ki],"readwrite").objectStore(Ki),Qn=we.createCompositeKey(P);try{const Xr=mn.put({compositeKey:Qn,value:J});Xr.onerror=xr=>{Ot(Hs(xr,"storage-set"))},Xr.onsuccess=()=>{ct()}}catch(Xr){Ot(Wi.create("storage-set",{originalErrorMessage:null==Xr?void 0:Xr.message}))}})})()}delete(P){var J=this;return(0,X.Z)(function*(){const we=yield J.openDbPromise;return new Promise((Be,ct)=>{const cn=we.transaction([Ki],"readwrite").objectStore(Ki),mn=J.createCompositeKey(P);try{const Qn=cn.delete(mn);Qn.onerror=Xr=>{ct(Hs(Xr,"storage-delete"))},Qn.onsuccess=()=>{Be()}}catch(Qn){ct(Wi.create("storage-delete",{originalErrorMessage:null==Qn?void 0:Qn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class lo{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,X.Z)(function*(){const J=P.storage.getLastFetchStatus(),we=P.storage.getLastSuccessfulFetchTimestampMillis(),Be=P.storage.getActiveConfig(),ct=yield J;ct&&(P.lastFetchStatus=ct);const Ot=yield we;Ot&&(P.lastSuccessfulFetchTimestampMillis=Ot);const cn=yield Be;cn&&(P.activeConfig=cn)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function xs(){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,X.Z)(function*(){if(!(0,Ue.hl)())return!1;try{return yield(0,Ue.eu)()}catch(D){return!1}})).apply(this,arguments)}let ae,j;!function Wr(){(0,ie._registerComponent)(new Ke.wA("remote-config",function D(P,{instanceIdentifier:J}){const we=P.getProvider("app").getImmediate(),Be=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Wi.create("registration-window");if(!(0,Ue.hl)())throw Wi.create("indexed-db-unavailable");const{projectId:ct,apiKey:Ot,appId:cn}=we.options;if(!ct)throw Wi.create("registration-project-id");if(!Ot)throw Wi.create("registration-api-key");if(!cn)throw Wi.create("registration-app-id");const mn=new mo(cn,we.name,J=J||"firebase"),Qn=new lo(mn),Xr=new Xe.Yd(fr);Xr.logLevel=Xe.in.ERROR;const xr=new Fs(Be,ie.SDK_VERSION,J,ct,Ot,cn),Ro=new Rs(xr,mn),fo=new Ho(Ro,mn,Qn,Xr),Ts=new Po(we,fo,Qn,mn,Xr);return function ms(D){const P=(0,Ue.m9)(D);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Ts),Ts},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(fr,"0.4.4"),(0,ie.registerVersion)(fr,"0.4.4","esm2017")}();const Tt=new WeakMap,Bt=new WeakMap,Cn=new WeakMap,Fr=new WeakMap,Vr=new WeakMap;let Mi={get(D,P,J){if(D instanceof IDBTransaction){if("done"===P)return Bt.get(D);if("objectStoreNames"===P)return D.objectStoreNames||Cn.get(D);if("store"===P)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Fi(D[P])},set:(D,P,J)=>(D[P]=J,!0),has:(D,P)=>D instanceof IDBTransaction&&("done"===P||"store"===P)||P in D};function yo(D){return"function"==typeof D?function ii(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ke(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...P){return D.apply(ur(this),P),Fi(Tt.get(this))}:function(...P){return Fi(D.apply(ur(this),P))}:function(P,...J){const we=D.call(ur(this),P,...J);return Cn.set(we,P.sort?P.sort():[P]),Fi(we)}}(D):(D instanceof IDBTransaction&&function Mr(D){if(Bt.has(D))return;const P=new Promise((J,we)=>{const Be=()=>{D.removeEventListener("complete",ct),D.removeEventListener("error",Ot),D.removeEventListener("abort",Ot)},ct=()=>{J(),Be()},Ot=()=>{we(D.error||new DOMException("AbortError","AbortError")),Be()};D.addEventListener("complete",ct),D.addEventListener("error",Ot),D.addEventListener("abort",Ot)});Bt.set(D,P)}(D),((D,P)=>P.some(J=>D instanceof J))(D,function de(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,Mi):D)}function Fi(D){if(D instanceof IDBRequest)return function yr(D){const P=new Promise((J,we)=>{const Be=()=>{D.removeEventListener("success",ct),D.removeEventListener("error",Ot)},ct=()=>{J(Fi(D.result)),Be()},Ot=()=>{we(D.error),Be()};D.addEventListener("success",ct),D.addEventListener("error",Ot)});return P.then(J=>{J instanceof IDBCursor&&Tt.set(J,D)}).catch(()=>{}),Vr.set(P,D),P}(D);if(Fr.has(D))return Fr.get(D);const P=yo(D);return P!==D&&(Fr.set(D,P),Vr.set(P,D)),P}const ur=D=>Vr.get(D);function _s(D,P,{blocked:J,upgrade:we,blocking:Be,terminated:ct}={}){const Ot=indexedDB.open(D,P),cn=Fi(Ot);return we&&Ot.addEventListener("upgradeneeded",mn=>{we(Fi(Ot.result),mn.oldVersion,mn.newVersion,Fi(Ot.transaction))}),J&&Ot.addEventListener("blocked",()=>J()),cn.then(mn=>{ct&&mn.addEventListener("close",()=>ct()),Be&&mn.addEventListener("versionchange",()=>Be())}).catch(()=>{}),cn}function rs(D,{blocked:P}={}){const J=indexedDB.deleteDatabase(D);return P&&J.addEventListener("blocked",()=>P()),Fi(J).then(()=>{})}const vs=["get","getKey","getAll","getAllKeys","count"],qo=["put","add","delete","clear"],K=new Map;function V(D,P){if(!(D instanceof IDBDatabase)||P in D||"string"!=typeof P)return;if(K.get(P))return K.get(P);const J=P.replace(/FromIndex$/,""),we=P!==J,Be=qo.includes(J);if(!(J in(we?IDBIndex:IDBObjectStore).prototype)||!Be&&!vs.includes(J))return;const ct=function(){var Ot=(0,X.Z)(function*(cn,...mn){const Qn=this.transaction(cn,Be?"readwrite":"readonly");let Xr=Qn.store;return we&&(Xr=Xr.index(mn.shift())),(yield Promise.all([Xr[J](...mn),Be&&Qn.done]))[0]});return function(mn){return Ot.apply(this,arguments)}}();return K.set(P,ct),ct}!function Si(D){Mi=D(Mi)}(D=>z_(G_({},D),{get:(P,J,we)=>V(P,J)||D.get(P,J,we),has:(P,J)=>!!V(P,J)||D.has(P,J)}));const O="/firebase-messaging-sw.js",ue="/firebase-cloud-messaging-push-scope",Ne="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gi="google.c.a.c_id",z="google.c.a.c_l",W="google.c.a.ts",fe="google.c.a.e";var Fe=(()=>{return(D=Fe||(Fe={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Fe;var D})();function Ct(D){const P=new Uint8Array(D);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jt(D){const J=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),we=atob(J),Be=new Uint8Array(we.length);for(let ct=0;ct<we.length;++ct)Be[ct]=we.charCodeAt(ct);return Be}const Vn="fcm_token_details_db",cr="fcm_token_object_Store";function Kn(D){return ci.apply(this,arguments)}function ci(){return ci=(0,X.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ct=>ct.name).includes(Vn))return null;let P=null;return(yield _s(Vn,5,{upgrade:(we=(0,X.Z)(function*(Be,ct,Ot,cn){var mn;if(ct<2||!Be.objectStoreNames.contains(cr))return;const Qn=cn.objectStore(cr),Xr=yield Qn.index("fcmSenderId").get(D);if(yield Qn.clear(),Xr)if(2===ct){const xr=Xr;if(!xr.auth||!xr.p256dh||!xr.endpoint)return;P={token:xr.fcmToken,createTime:null!==(mn=xr.createTime)&&void 0!==mn?mn:Date.now(),subscriptionOptions:{auth:xr.auth,p256dh:xr.p256dh,endpoint:xr.endpoint,swScope:xr.swScope,vapidKey:"string"==typeof xr.vapidKey?xr.vapidKey:Ct(xr.vapidKey)}}}else if(3===ct){const xr=Xr;P={token:xr.fcmToken,createTime:xr.createTime,subscriptionOptions:{auth:Ct(xr.auth),p256dh:Ct(xr.p256dh),endpoint:xr.endpoint,swScope:xr.swScope,vapidKey:Ct(xr.vapidKey)}}}else if(4===ct){const xr=Xr;P={token:xr.fcmToken,createTime:xr.createTime,subscriptionOptions:{auth:Ct(xr.auth),p256dh:Ct(xr.p256dh),endpoint:xr.endpoint,swScope:xr.swScope,vapidKey:Ct(xr.vapidKey)}}}}),function(ct,Ot,cn,mn){return we.apply(this,arguments)})})).close(),yield rs(Vn),yield rs("fcm_vapid_details_db"),yield rs("undefined"),Ai(P)?P:null;var we}),ci.apply(this,arguments)}function Ai(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:P}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const qi="firebase-messaging-store";let Ri=null;function Ls(){return Ri||(Ri=_s("firebase-messaging-database",1,{upgrade:(D,P)=>{0===P&&D.createObjectStore(qi)}})),Ri}function is(D){return $i.apply(this,arguments)}function $i(){return($i=(0,X.Z)(function*(D){const P=Js(D),we=yield(yield Ls()).transaction(qi).objectStore(qi).get(P);if(we)return we;{const Be=yield Kn(D.appConfig.senderId);if(Be)return yield Zi(D,Be),Be}})).apply(this,arguments)}function Zi(D,P){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,X.Z)(function*(D,P){const J=Js(D),Be=(yield Ls()).transaction(qi,"readwrite");return yield Be.objectStore(qi).put(P,J),yield Be.done,P})).apply(this,arguments)}function Io(D){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,X.Z)(function*(D){const P=Js(D),we=(yield Ls()).transaction(qi,"readwrite");yield we.objectStore(qi).delete(P),yield we.done})).apply(this,arguments)}function Js({appConfig:D}){return D.appId}const hs=new Ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ha(D,P){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,X.Z)(function*(D,P){const J=yield Es(D),we=$o(P),Be={method:"POST",headers:J,body:JSON.stringify(we)};let ct;try{ct=yield(yield fetch(ss(D.appConfig),Be)).json()}catch(Ot){throw hs.create("token-subscribe-failed",{errorInfo:null==Ot?void 0:Ot.toString()})}if(ct.error)throw hs.create("token-subscribe-failed",{errorInfo:ct.error.message});if(!ct.token)throw hs.create("token-subscribe-no-token");return ct.token})).apply(this,arguments)}function Ha(D,P){return ea.apply(this,arguments)}function ea(){return(ea=(0,X.Z)(function*(D,P){const J=yield Es(D),we=$o(P.subscriptionOptions),Be={method:"PATCH",headers:J,body:JSON.stringify(we)};let ct;try{ct=yield(yield fetch(`${ss(D.appConfig)}/${P.token}`,Be)).json()}catch(Ot){throw hs.create("token-update-failed",{errorInfo:null==Ot?void 0:Ot.toString()})}if(ct.error)throw hs.create("token-update-failed",{errorInfo:ct.error.message});if(!ct.token)throw hs.create("token-update-no-token");return ct.token})).apply(this,arguments)}function xi(D,P){return co.apply(this,arguments)}function co(){return(co=(0,X.Z)(function*(D,P){const we={method:"DELETE",headers:yield Es(D)};try{const ct=yield(yield fetch(`${ss(D.appConfig)}/${P}`,we)).json();if(ct.error)throw hs.create("token-unsubscribe-failed",{errorInfo:ct.error.message})}catch(Be){throw hs.create("token-unsubscribe-failed",{errorInfo:null==Be?void 0:Be.toString()})}})).apply(this,arguments)}function ss({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Es(D){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,X.Z)(function*({appConfig:D,installations:P}){const J=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function $o({p256dh:D,auth:P,endpoint:J,vapidKey:we}){const Be={web:{endpoint:J,auth:P,p256dh:D}};return we!==Ne&&(Be.web.applicationPubKey=we),Be}const Oa=6048e5;function fu(D){return ta.apply(this,arguments)}function ta(){return(ta=(0,X.Z)(function*(D){const P=yield bu(D.swRegistration,D.vapidKey),J={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:P.endpoint,auth:Ct(P.getKey("auth")),p256dh:Ct(P.getKey("p256dh"))},we=yield is(D.firebaseDependencies);if(we){if(Go(we.subscriptionOptions,J))return Date.now()>=we.createTime+Oa?ws(D,{token:we.token,createTime:Date.now(),subscriptionOptions:J}):we.token;try{yield xi(D.firebaseDependencies,we.token)}catch(Be){console.warn(Be)}return cs(D.firebaseDependencies,J)}return cs(D.firebaseDependencies,J)})).apply(this,arguments)}function pu(D){return To.apply(this,arguments)}function To(){return(To=(0,X.Z)(function*(D){const P=yield is(D.firebaseDependencies);P&&(yield xi(D.firebaseDependencies,P.token),yield Io(D.firebaseDependencies));const J=yield D.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()})).apply(this,arguments)}function ws(D,P){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,X.Z)(function*(D,P){try{const J=yield Ha(D.firebaseDependencies,P),we=Object.assign(Object.assign({},P),{token:J,createTime:Date.now()});return yield Zi(D.firebaseDependencies,we),J}catch(J){throw yield pu(D),J}})).apply(this,arguments)}function cs(D,P){return ko.apply(this,arguments)}function ko(){return(ko=(0,X.Z)(function*(D,P){const we={token:yield ha(D,P),createTime:Date.now(),subscriptionOptions:P};return yield Zi(D,we),we.token})).apply(this,arguments)}function bu(D,P){return ho.apply(this,arguments)}function ho(){return(ho=(0,X.Z)(function*(D,P){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jt(P)})})).apply(this,arguments)}function Go(D,P){return P.vapidKey===D.vapidKey&&P.endpoint===D.endpoint&&P.auth===D.auth&&P.p256dh===D.p256dh}function si(D){const P={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function rl(D,P){if(!P.notification)return;D.notification={};const J=P.notification.title;J&&(D.notification.title=J);const we=P.notification.body;we&&(D.notification.body=we);const Be=P.notification.image;Be&&(D.notification.image=Be);const ct=P.notification.icon;ct&&(D.notification.icon=ct)}(P,D),function Uu(D,P){!P.data||(D.data=P.data)}(P,D),function bo(D,P){var J,we,Be,ct,Ot;if(!P.fcmOptions&&!(null===(J=P.notification)||void 0===J?void 0:J.click_action))return;D.fcmOptions={};const cn=null!==(Be=null===(we=P.fcmOptions)||void 0===we?void 0:we.link)&&void 0!==Be?Be:null===(ct=P.notification)||void 0===ct?void 0:ct.click_action;cn&&(D.fcmOptions.link=cn);const mn=null===(Ot=P.fcmOptions)||void 0===Ot?void 0:Ot.analytics_label;mn&&(D.fcmOptions.analyticsLabel=mn)}(P,D),P}function Du(D){return"object"==typeof D&&!!D&&gi in D}function gu(D,P){const J=[];for(let we=0;we<D.length;we++)J.push(D.charAt(we)),we<P.length&&J.push(P.charAt(we));return J.join("")}function mu(D){return hs.create("missing-app-config-values",{valueName:D})}gu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nc{constructor(P,J,we){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Be=function Ja(D){if(!D||!D.options)throw mu("App Configuration Object");if(!D.name)throw mu("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:J}=D;for(const we of P)if(!J[we])throw mu(we);return{appName:D.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:Be,installations:J,analyticsProvider:we}}_delete(){return Promise.resolve()}}function Xs(D){return eo.apply(this,arguments)}function eo(){return(eo=(0,X.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(O,{scope:ue}),D.swRegistration.update().catch(()=>{})}catch(P){throw hs.create("failed-service-worker-registration",{browserErrorMessage:null==P?void 0:P.message})}})).apply(this,arguments)}function fs(D,P){return _o.apply(this,arguments)}function _o(){return(_o=(0,X.Z)(function*(D,P){if(!P&&!D.swRegistration&&(yield Xs(D)),P||!D.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw hs.create("invalid-sw-registration");D.swRegistration=P}})).apply(this,arguments)}function fa(D,P){return ka.apply(this,arguments)}function ka(){return(ka=(0,X.Z)(function*(D,P){P?D.vapidKey=P:D.vapidKey||(D.vapidKey=Ne)})).apply(this,arguments)}function yu(){return(yu=(0,X.Z)(function*(D,P){if(!navigator)throw hs.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw hs.create("permission-blocked");return yield fa(D,null==P?void 0:P.vapidKey),yield fs(D,null==P?void 0:P.serviceWorkerRegistration),fu(D)})).apply(this,arguments)}function Qo(D,P,J){return _u.apply(this,arguments)}function _u(){return(_u=(0,X.Z)(function*(D,P,J){const we=Su(P);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(we,{message_id:J[gi],message_name:J[z],message_time:J[W],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Su(D){switch(D){case Fe.NOTIFICATION_CLICKED:return"notification_open";case Fe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function pa(){return(pa=(0,X.Z)(function*(D,P){const J=P.data;if(!J.isFirebaseMessaging)return;D.onMessageHandler&&J.messageType===Fe.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(si(J)):D.onMessageHandler.next(si(J)));const we=J.data;Du(we)&&"1"===we[fe]&&(yield Qo(D,J.messageType,we))})).apply(this,arguments)}const Bu="@firebase/messaging",ju=D=>{const P=new nc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function vu(D,P){return pa.apply(this,arguments)}(P,J)),P},Fa=D=>{const P=D.getProvider("messaging").getImmediate();return{getToken:we=>function Yo(D,P){return yu.apply(this,arguments)}(P,we)}};function x(){return b.apply(this,arguments)}function b(){return(b=(0,X.Z)(function*(){try{yield(0,Ue.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,Ue.hl)()&&(0,Ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hu(){(0,ie._registerComponent)(new Ke.wA("messaging",ju,"PUBLIC")),(0,ie._registerComponent)(new Ke.wA("messaging-internal",Fa,"PRIVATE")),(0,ie.registerVersion)(Bu,"0.12.4"),(0,ie.registerVersion)(Bu,"0.12.4","esm2017")}();const _r="analytics",Zn="firebase_id",na="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_n="https://www.googletagmanager.com/gtag/js",yt=new Xe.Yd("@firebase/analytics"),Qr=new Ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ra(D){if(!D.startsWith(_n)){const P=Qr.create("invalid-gtag-resource",{gtagURL:D});return yt.warn(P.message),""}return D}function ga(D){return Promise.all(D.map(P=>P.catch(J=>J)))}function jl(D,P){const J=function $a(D,P){let J;return window.trustedTypes&&(J=window.trustedTypes.createPolicy(D,P)),J}("firebase-js-sdk-policy",{createScriptURL:ra}),we=document.createElement("script"),Be=`${_n}?l=${D}&id=${P}`;we.src=J?null==J?void 0:J.createScriptURL(Be):Be,we.async=!0,document.head.appendChild(we)}function Ga(D,P,J,we,Be,ct){return Au.apply(this,arguments)}function Au(){return(Au=(0,X.Z)(function*(D,P,J,we,Be,ct){const Ot=we[Be];try{if(Ot)yield P[Ot];else{const mn=(yield ga(J)).find(Qn=>Qn.measurementId===Be);mn&&(yield P[mn.appId])}}catch(cn){yt.error(cn)}D("config",Be,ct)})).apply(this,arguments)}function rc(D,P,J,we,Be){return ps.apply(this,arguments)}function ps(){return(ps=(0,X.Z)(function*(D,P,J,we,Be){try{let ct=[];if(Be&&Be.send_to){let Ot=Be.send_to;Array.isArray(Ot)||(Ot=[Ot]);const cn=yield ga(J);for(const mn of Ot){const Qn=cn.find(xr=>xr.measurementId===mn),Xr=Qn&&P[Qn.appId];if(!Xr){ct=[];break}ct.push(Xr)}}0===ct.length&&(ct=Object.values(P)),yield Promise.all(ct),D("event",we,Be||{})}catch(ct){yt.error(ct)}})).apply(this,arguments)}function $r(D){const P=window.document.getElementsByTagName("script");for(const J of Object.values(P))if(J.src&&J.src.includes(_n)&&J.src.includes(D))return J;return null}const dr=new class os{constructor(P={},J=1e3){this.throttleMetadata=P,this.intervalMillis=J}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,J){this.throttleMetadata[P]=J}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function ma(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ni(D){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,X.Z)(function*(D){var P;const{appId:J,apiKey:we}=D,Be={method:"GET",headers:ma(we)},ct=na.replace("{app-id}",J),Ot=yield fetch(ct,Be);if(200!==Ot.status&&304!==Ot.status){let cn="";try{const mn=yield Ot.json();(null===(P=mn.error)||void 0===P?void 0:P.message)&&(cn=mn.error.message)}catch(mn){}throw Qr.create("config-fetch-failed",{httpStatus:Ot.status,responseMessage:cn})}return Ot.json()})).apply(this,arguments)}function Yi(D){return In.apply(this,arguments)}function In(){return(In=(0,X.Z)(function*(D,P=dr,J){const{appId:we,apiKey:Be,measurementId:ct}=D.options;if(!we)throw Qr.create("no-app-id");if(!Be){if(ct)return{measurementId:ct,appId:we};throw Qr.create("no-api-key")}const Ot=P.getThrottleMetadata(we)||{backoffCount:0,throttleEndTimeMillis:Date.now()},cn=new zu;return setTimeout((0,X.Z)(function*(){cn.abort()}),void 0!==J?J:6e4),Gu({appId:we,apiKey:Be,measurementId:ct},Ot,cn,P)})).apply(this,arguments)}function Gu(D,P,J){return ia.apply(this,arguments)}function ia(){return(ia=(0,X.Z)(function*(D,{throttleEndTimeMillis:P,backoffCount:J},we,Be=dr){var ct;const{appId:Ot,measurementId:cn}=D;try{yield Cs(we,P)}catch(mn){if(cn)return yt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${cn} provided in the "measurementId" field in the local Firebase config. [${null==mn?void 0:mn.message}]`),{appId:Ot,measurementId:cn};throw mn}try{const mn=yield Ni(D);return Be.deleteThrottleMetadata(Ot),mn}catch(mn){const Qn=mn;if(!La(Qn)){if(Be.deleteThrottleMetadata(Ot),cn)return yt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${cn} provided in the "measurementId" field in the local Firebase config. [${null==Qn?void 0:Qn.message}]`),{appId:Ot,measurementId:cn};throw mn}const Xr=503===Number(null===(ct=null==Qn?void 0:Qn.customData)||void 0===ct?void 0:ct.httpStatus)?(0,Ue.$s)(J,Be.intervalMillis,30):(0,Ue.$s)(J,Be.intervalMillis),xr={throttleEndTimeMillis:Date.now()+Xr,backoffCount:J+1};return Be.setThrottleMetadata(Ot,xr),yt.debug(`Calling attemptFetch again in ${Xr} millis`),Gu(D,xr,we,Be)}})).apply(this,arguments)}function Cs(D,P){return new Promise((J,we)=>{const Be=Math.max(P-Date.now(),0),ct=setTimeout(J,Be);D.addEventListener(()=>{clearTimeout(ct),we(Qr.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function La(D){if(!(D instanceof Ue.ZR&&D.customData))return!1;const P=Number(D.customData.httpStatus);return 429===P||500===P||503===P||504===P}class zu{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}let Ru,Eu;function Mu(){return(Mu=(0,X.Z)(function*(D,P,J,we,Be){if(Be&&Be.global)D("event",J,we);else{const ct=yield P;D("event",J,Object.assign(Object.assign({},we),{send_to:ct}))}})).apply(this,arguments)}function _a(D){Eu=D}function sa(D){Ru=D}function ic(){return zo.apply(this,arguments)}function zo(){return(zo=(0,X.Z)(function*(){if(!(0,Ue.hl)())return yt.warn(Qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ue.eu)()}catch(D){return yt.warn(Qr.create("indexeddb-unavailable",{errorInfo:null==D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function oa(){return(oa=(0,X.Z)(function*(D,P,J,we,Be,ct,Ot){var cn;const mn=Yi(D);mn.then(fo=>{J[fo.measurementId]=fo.appId,D.options.measurementId&&fo.measurementId!==D.options.measurementId&&yt.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${fo.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fo=>yt.error(fo)),P.push(mn);const Qn=ic().then(fo=>{if(fo)return we.getId()}),[Xr,xr]=yield Promise.all([mn,Qn]);$r(ct)||jl(ct,Xr.measurementId),Eu&&(Be("consent","default",Eu),_a(void 0)),Be("js",new Date);const Ro=null!==(cn=null==Ot?void 0:Ot.config)&&void 0!==cn?cn:{};return Ro.origin="firebase",Ro.update=!0,null!=xr&&(Ro[Zn]=xr),Be("config",Xr.measurementId,Ro),Ru&&(Be("set",Ru),sa(void 0)),Xr.measurementId})).apply(this,arguments)}class xu{constructor(P){this.app=P}_delete(){return delete Da[this.app.options.appId],Promise.resolve()}}let Da={},to=[];const ru={};let Ao,Sa,Jo="dataLayer",Wa=!1;function iu(D,P,J){!function Ua(){const D=[];if((0,Ue.ru)()&&D.push("This is a browser extension environment."),(0,Ue.zI)()||D.push("Cookies are not available."),D.length>0){const P=D.map((we,Be)=>`(${Be+1}) ${we}`).join(" "),J=Qr.create("invalid-analytics-context",{errorInfo:P});yt.warn(J.message)}}();const we=D.options.appId;if(!we)throw Qr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Qr.create("no-api-key");yt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Da[we])throw Qr.create("already-exists",{id:we});if(!Wa){!function $u(D){let P=[];Array.isArray(window[D])?P=window[D]:window[D]=P}(Jo);const{wrappedGtag:ct,gtagCore:Ot}=function eu(D,P,J,we,Be){let ct=function(...Ot){window[we].push(arguments)};return window[Be]&&"function"==typeof window[Be]&&(ct=window[Be]),window[Be]=function yl(D,P,J,we){function ct(){return(ct=(0,X.Z)(function*(Ot,...cn){try{if("event"===Ot){const[mn,Qn]=cn;yield rc(D,P,J,mn,Qn)}else if("config"===Ot){const[mn,Qn]=cn;yield Ga(D,P,J,we,mn,Qn)}else if("consent"===Ot){const[mn]=cn;D("consent","update",mn)}else if("get"===Ot){const[mn,Qn,Xr]=cn;D("get",mn,Qn,Xr)}else if("set"===Ot){const[mn]=cn;D("set",mn)}else D(Ot,...cn)}catch(mn){yt.error(mn)}})).apply(this,arguments)}return function Be(Ot){return ct.apply(this,arguments)}}(ct,D,P,J),{gtagCore:ct,wrappedGtag:window[Be]}}(Da,to,ru,Jo,"gtag");Sa=ct,Ao=Ot,Wa=!0}return Da[we]=function El(D,P,J,we,Be,ct,Ot){return oa.apply(this,arguments)}(D,to,ru,P,Ao,Jo,J),new xu(D)}function wl(){return wu.apply(this,arguments)}function wu(){return(wu=(0,X.Z)(function*(){if((0,Ue.ru)()||!(0,Ue.zI)()||!(0,Ue.hl)())return!1;try{return yield(0,Ue.eu)()}catch(D){return!1}})).apply(this,arguments)}const Nu="@firebase/analytics",q="0.10.0";!function E(){(0,ie._registerComponent)(new Ke.wA(_r,(P,{options:J})=>iu(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,ie._registerComponent)(new Ke.wA("analytics-internal",function D(P){try{const J=P.getProvider(_r).getImmediate();return{logEvent:(we,Be,ct)=>function Il(D,P,J,we){D=(0,Ue.m9)(D),function ya(D,P,J,we,Be){return Mu.apply(this,arguments)}(Sa,Da[D.app.options.appId],P,J,we).catch(Be=>yt.error(Be))}(J,we,Be,ct)}}catch(J){throw Qr.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,ie.registerVersion)(Nu,q),(0,ie.registerVersion)(Nu,q,"esm2017")}();var C=$(4408),re=$(7565);const Le=new class ye extends re.v{}(class k extends C.o{constructor(P,J){super(P,J),this.scheduler=P,this.work=J}schedule(P,J=0){return J>0?super.schedule(P,J):(this.delay=J,this.state=P,this.scheduler.flush(this),this)}execute(P,J){return J>0||this.closed?super.execute(P,J):this._execute(P,J)}requestAsyncId(P,J,we=0){return null!=we&&we>0||null==we&&this.delay>0?super.requestAsyncId(P,J,we):(P.flush(this),0)}});var et=$(4986),jt=$(8306),Sn=$(8505),Un=$(5363),Hn=$(9468);const ei=new y.GfV("7.6.1"),Bn="__angularfire_symbol__analyticsIsSupportedValue",qn="__angularfire_symbol__analyticsIsSupported",Jr="__angularfire_symbol__remoteConfigIsSupportedValue",Xi="__angularfire_symbol__remoteConfigIsSupported",ti="__angularfire_symbol__messagingIsSupportedValue",Ws="__angularfire_symbol__messagingIsSupported";function mi(D,P,J){if(P){if(1===P.length)return P[0];const ct=P.filter(Ot=>Ot.app===J);if(1===ct.length)return ct[0]}return J.container.getProvider(D).getImmediate({optional:!0})}globalThis[qn]||(globalThis[qn]=wl().then(D=>globalThis[Bn]=D).catch(()=>globalThis[Bn]=!1)),globalThis[Ws]||(globalThis[Ws]=x().then(D=>globalThis[ti]=D).catch(()=>globalThis[ti]=!1)),globalThis[Xi]||(globalThis[Xi]=xs().then(D=>globalThis[Jr]=D).catch(()=>globalThis[Jr]=!1));const no=(D,P)=>{const J=P?[P]:(0,B.C6)(),we=[];return J.forEach(Be=>{Be.container.getProvider(D).instances.forEach(Ot=>{we.includes(Ot)||we.push(Ot)})}),we};function ro(){}class Ns{constructor(P,J=Le){this.zone=P,this.delegate=J}now(){return this.delegate.now()}schedule(P,J,we){const Be=this.zone;return this.delegate.schedule(function(Ot){Be.runGuarded(()=>{P.apply(this,[Ot])})},J,we)}}class Fo{constructor(P){this.zone=P,this.task=null}call(P,J){const we=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)),J.pipe((0,Sn.b)({next:we,complete:we,error:we})).subscribe(P).add(we)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Lo=(()=>{class D{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new Ns(Zone.current)),this.insideAngular=J.run(()=>new Ns(Zone.current,et.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(J){return new(J||D)(y.LFG(y.R0b))},D.\u0275prov=y.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Vo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function va(D){return Vo().ngZone.runOutsideAngular(()=>D())}function jn(D){return Vo().ngZone.run(()=>D())}function pr(D){return D.pipe((0,Un.Q)(Vo().outsideAngular))}function di(D){return Vo(),function as(D){return function(J){return(J=J.lift(new Fo(D.ngZone))).pipe((0,Hn.R)(D.outsideAngular),(0,Un.Q)(D.insideAngular))}}(Vo())(D)}const Ea=(D,P)=>function(){const we=arguments;return P&&setTimeout(()=>{"scheduled"===P.state&&P.invoke()},10),jn(()=>D.apply(void 0,we))},Ks=(D,P)=>function(){let J;const we=arguments;for(let ct=0;ct<arguments.length;ct++)"function"==typeof we[ct]&&(P&&(J||(J=jn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)))),we[ct]=Ea(we[ct],J));const Be=va(()=>D.apply(this,we));if(!P){if(Be instanceof jt.y){const ct=Vo();return Be.pipe((0,Hn.R)(ct.outsideAngular),(0,Un.Q)(ct.insideAngular))}return jn(()=>Be)}return Be instanceof jt.y?Be.pipe(di):Be instanceof Promise?jn(()=>new Promise((ct,Ot)=>Be.then(cn=>jn(()=>ct(cn)),cn=>jn(()=>Ot(cn))))):"function"==typeof Be&&J?function(){return setTimeout(()=>{J&&"scheduled"===J.state&&J.invoke()},10),Be.apply(this,arguments)}:jn(()=>Be)}},1389:(pn,dt,$)=>{$.d(dt,{$:()=>O,A:()=>Ce,D:()=>Mt,I:()=>ai,J:()=>kt,L:()=>li,N:()=>Vi,P:()=>El,Q:()=>mo,R:()=>Wu,U:()=>ys,V:()=>xs,W:()=>Ei,X:()=>ns,Y:()=>de,Z:()=>ke,_:()=>Vr,a:()=>Y,a0:()=>Ne,a1:()=>gi,a2:()=>Ie,a3:()=>cr,a4:()=>ci,a5:()=>bi,a6:()=>qi,a7:()=>Ls,a8:()=>$i,a9:()=>Gs,aA:()=>tt,aB:()=>qn,aC:()=>fi,aD:()=>Gr,aE:()=>Sn,aF:()=>Yu,aG:()=>Cl,aH:()=>wn,aL:()=>We,aO:()=>ae,aa:()=>Io,ab:()=>Js,ac:()=>No,ad:()=>Ha,ae:()=>xi,af:()=>ss,ai:()=>Oa,aj:()=>ta,ak:()=>pu,an:()=>ii,ao:()=>rl,aq:()=>ka,ar:()=>Bu,as:()=>It,at:()=>Wt,au:()=>se,av:()=>Ee,aw:()=>xr,ax:()=>Ws,ay:()=>yn,az:()=>Me,b:()=>I,c:()=>Sa,d:()=>iu,e:()=>Aa,f:()=>Nu,g:()=>ye,h:()=>C,i:()=>ba,j:()=>et,k:()=>Gi,l:()=>vt,m:()=>ol,p:()=>ze,r:()=>So,s:()=>Ps,u:()=>ic});var y=$(5861),B=$(2090),X=$(6881),ie=$(7582),Ue=$(1877),Ke=$(4859);const ze={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ce={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Mt=function nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ft=function Lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},At=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nt=new Ue.Yd("@firebase/auth");function Xt(T,...p){Nt.logLevel<=Ue.in.ERROR&&Nt.error(`Auth (${X.SDK_VERSION}): ${T}`,...p)}function Ee(T,...p){throw ft(T,...p)}function Me(T,...p){return ft(T,...p)}function ot(T,p,v){const R=Object.assign(Object.assign({},Ft()),{[p]:v});return new B.LL("auth","Firebase",R).create(p,{appName:T.name})}function _t(T,p,v){if(!(p instanceof v))throw v.name!==p.constructor.name&&Ee(T,"argument-error"),ot(T,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ft(T,...p){if("string"!=typeof T){const v=p[0],R=[...p.slice(1)];return R[0]&&(R[0].appName=T.name),T._errorFactory.create(v,...R)}return At.create(T,...p)}function tt(T,p,...v){if(!T)throw ft(p,...v)}function Vt(T){const p="INTERNAL ASSERTION FAILED: "+T;throw Xt(p),new Error(p)}function It(T,p){T||Vt(p)}function On(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function Ht(){return"http:"===xn()||"https:"===xn()}function xn(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class kn{constructor(p,v){this.shortDelay=p,this.longDelay=v,It(v>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function on(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ht()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gr(T,p){It(T.emulator,"Emulator should always be set here");const{url:v}=T.emulator;return p?`${v}${p.startsWith("/")?p.slice(1):p}`:v}class tr{static initialize(p,v,R){this.fetchImpl=p,v&&(this.headersImpl=v),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},it=new kn(3e4,6e4);function Je(T,p){return T.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:T.tenantId}):p}function _e(T,p,v,R){return De.apply(this,arguments)}function De(){return(De=(0,y.Z)(function*(T,p,v,R,te={}){return ve(T,te,(0,y.Z)(function*(){let pe={},ut={};R&&("GET"===p?ut=R:pe={body:JSON.stringify(R)});const xt=(0,B.xO)(Object.assign({key:T.config.apiKey},ut)).slice(1),fn=yield T._getAdditionalHeaders();return fn["Content-Type"]="application/json",T.languageCode&&(fn["X-Firebase-Locale"]=T.languageCode),tr.fetch()(hn(T,T.config.apiHost,v,xt),Object.assign({method:p,headers:fn,referrerPolicy:"no-referrer"},pe))}))})).apply(this,arguments)}function ve(T,p,v){return xe.apply(this,arguments)}function xe(){return(xe=(0,y.Z)(function*(T,p,v){T._canInitEmulator=!1;const R=Object.assign(Object.assign({},un),p);try{const te=new Dn(T),pe=yield Promise.race([v(),te.promise]);te.clearNetworkTimeout();const ut=yield pe.json();if("needConfirmation"in ut)throw zn(T,"account-exists-with-different-credential",ut);if(pe.ok&&!("errorMessage"in ut))return ut;{const xt=pe.ok?ut.errorMessage:ut.error.message,[fn,Fn]=xt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===fn)throw zn(T,"credential-already-in-use",ut);if("EMAIL_EXISTS"===fn)throw zn(T,"email-already-in-use",ut);if("USER_DISABLED"===fn)throw zn(T,"user-disabled",ut);const Cr=R[fn]||fn.toLowerCase().replace(/[_\s]+/g,"-");if(Fn)throw ot(T,Cr,Fn);Ee(T,Cr)}}catch(te){if(te instanceof B.ZR)throw te;Ee(T,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function pt(T,p,v,R){return tn.apply(this,arguments)}function tn(){return(tn=(0,y.Z)(function*(T,p,v,R,te={}){const pe=yield _e(T,p,v,R,te);return"mfaPendingCredential"in pe&&Ee(T,"multi-factor-auth-required",{_serverResponse:pe}),pe})).apply(this,arguments)}function hn(T,p,v,R){const te=`${p}${v}?${R}`;return T.config.emulator?gr(T.config,te):`${T.config.apiScheme}://${te}`}class Dn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((v,R)=>{this.timer=setTimeout(()=>R(Me(this.auth,"network-request-failed")),it.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(T,p,v){const R={appName:T.name};v.email&&(R.email=v.email),v.phoneNumber&&(R.phoneNumber=v.phoneNumber);const te=Me(T,p,R);return te.customData._tokenResponse=v,te}function ir(){return(ir=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ln(T,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function En(T,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Pn(T){if(T)try{const p=new Date(Number(T));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function ts(){return(ts=(0,y.Z)(function*(T,p=!1){const v=(0,B.m9)(T),R=yield v.getIdToken(p),te=He(R);tt(te&&te.exp&&te.auth_time&&te.iat,v.auth,"internal-error");const pe="object"==typeof te.firebase?te.firebase:void 0,ut=null==pe?void 0:pe.sign_in_provider;return{claims:te,token:R,authTime:Pn(Pt(te.auth_time)),issuedAtTime:Pn(Pt(te.iat)),expirationTime:Pn(Pt(te.exp)),signInProvider:ut||null,signInSecondFactor:(null==pe?void 0:pe.sign_in_second_factor)||null}})).apply(this,arguments)}function Pt(T){return 1e3*Number(T)}function He(T){const[p,v,R]=T.split(".");if(void 0===p||void 0===v||void 0===R)return Xt("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,B.tV)(v);return te?JSON.parse(te):(Xt("Failed to decode base64 JWT payload"),null)}catch(te){return Xt("Caught error parsing JWT payload as JSON",null==te?void 0:te.toString()),null}}function at(T,p){return St.apply(this,arguments)}function St(){return(St=(0,y.Z)(function*(T,p,v=!1){if(v)return p;try{return yield p}catch(R){throw R instanceof B.ZR&&zt(R)&&T.auth.currentUser===T&&(yield T.auth.signOut()),R}})).apply(this,arguments)}function zt({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class nn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var v;if(p){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const te=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(p=!1){var v=this;if(!this.isRunning)return;const R=this.getInterval(p);this.timerId=setTimeout((0,y.Z)(function*(){yield v.iteration()}),R)}iteration(){var p=this;return(0,y.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===(null==v?void 0:v.code)&&p.schedule(!0))}p.schedule()})()}}class Nr{constructor(p,v){this.createdAt=p,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pn(this.lastLoginAt),this.creationTime=Pn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(T){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,y.Z)(function*(T){var p;const v=T.auth,R=yield T.getIdToken(),te=yield at(T,En(v,{idToken:R}));tt(null==te?void 0:te.users.length,v,"internal-error");const pe=te.users[0];T._notifyReloadListener(pe);const ut=(null===(p=pe.providerUserInfo)||void 0===p?void 0:p.length)?Yt(pe.providerUserInfo):[],xt=br(T.providerData,ut),Cr=!!T.isAnonymous&&!(T.email&&pe.passwordHash||(null==xt?void 0:xt.length)),Pr={uid:pe.localId,displayName:pe.displayName||null,photoURL:pe.photoUrl||null,email:pe.email||null,emailVerified:pe.emailVerified||!1,phoneNumber:pe.phoneNumber||null,tenantId:pe.tenantId||null,providerData:xt,metadata:new Nr(pe.createdAt,pe.lastLoginAt),isAnonymous:Cr};Object.assign(T,Pr)})).apply(this,arguments)}function hr(){return(hr=(0,y.Z)(function*(T){const p=(0,B.m9)(T);yield Xn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function br(T,p){return[...T.filter(R=>!p.some(te=>te.providerId===R.providerId)),...p]}function Yt(T){return T.map(p=>{var{providerId:v}=p,R=(0,ie._T)(p,["providerId"]);return{providerId:v,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}function sr(){return(sr=(0,y.Z)(function*(T,p){const v=yield ve(T,{},(0,y.Z)(function*(){const R=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:te,apiKey:pe}=T.config,ut=hn(T,te,"/v1/token",`key=${pe}`),xt=yield T._getAdditionalHeaders();return xt["Content-Type"]="application/x-www-form-urlencoded",tr.fetch()(ut,{method:"POST",headers:xt,body:R})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Er{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){tt(p.idToken,"internal-error"),tt(void 0!==p.idToken,"internal-error"),tt(void 0!==p.refreshToken,"internal-error");const v="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Ge(T){const p=He(T);return tt(p,"internal-error"),tt(void 0!==p.exp,"internal-error"),tt(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,v)}getToken(p){var v=this;return(0,y.Z)(function*(R,te=!1){return tt(!v.accessToken||v.refreshToken,R,"user-token-expired"),te||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(R,v.refreshToken),v.accessToken):null:v.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(p,v){var R=this;return(0,y.Z)(function*(){const{accessToken:te,refreshToken:pe,expiresIn:ut}=yield function Or(T,p){return sr.apply(this,arguments)}(p,v);R.updateTokensAndExpiration(te,pe,Number(ut))})()}updateTokensAndExpiration(p,v,R){this.refreshToken=v||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(p,v){const{refreshToken:R,accessToken:te,expirationTime:pe}=v,ut=new Er;return R&&(tt("string"==typeof R,"internal-error",{appName:p}),ut.refreshToken=R),te&&(tt("string"==typeof te,"internal-error",{appName:p}),ut.accessToken=te),pe&&(tt("number"==typeof pe,"internal-error",{appName:p}),ut.expirationTime=pe),ut}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Er,this.toJSON())}_performRefresh(){return Vt("not implemented")}}function lr(T,p){tt("string"==typeof T||void 0===T,"internal-error",{appName:p})}class Hr{constructor(p){var{uid:v,auth:R,stsTokenManager:te}=p,pe=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=R,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=pe.displayName||null,this.email=pe.email||null,this.emailVerified=pe.emailVerified||!1,this.phoneNumber=pe.phoneNumber||null,this.photoURL=pe.photoURL||null,this.isAnonymous=pe.isAnonymous||!1,this.tenantId=pe.tenantId||null,this.providerData=pe.providerData?[...pe.providerData]:[],this.metadata=new Nr(pe.createdAt||void 0,pe.lastLoginAt||void 0)}getIdToken(p){var v=this;return(0,y.Z)(function*(){const R=yield at(v,v.stsTokenManager.getToken(v.auth,p));return tt(R,v.auth,"internal-error"),v.accessToken!==R&&(v.accessToken=R,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),R})()}getIdTokenResult(p){return function Zr(T){return ts.apply(this,arguments)}(this,p)}reload(){return function hi(T){return hr.apply(this,arguments)}(this)}_assign(p){this!==p&&(tt(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(v=>Object.assign({},v)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const v=new Hr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(p){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p){var v=this;return(0,y.Z)(function*(R,te=!1){let pe=!1;R.idToken&&R.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(R),pe=!0),te&&(yield Xn(v)),yield v.auth._persistUserIfCurrent(v),pe&&v.auth._notifyListenersIfCurrent(v)}).apply(this,arguments)}delete(){var p=this;return(0,y.Z)(function*(){const v=yield p.getIdToken();return yield at(p,function mr(T,p){return ir.apply(this,arguments)}(p.auth,{idToken:v})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,v){var R,te,pe,ut,xt,fn,Fn,Cr;const Pr=null!==(R=v.displayName)&&void 0!==R?R:void 0,Li=null!==(te=v.email)&&void 0!==te?te:void 0,aa=null!==(pe=v.phoneNumber)&&void 0!==pe?pe:void 0,al=null!==(ut=v.photoURL)&&void 0!==ut?ut:void 0,xa=null!==(xt=v.tenantId)&&void 0!==xt?xt:void 0,Pc=null!==(fn=v._redirectEventId)&&void 0!==fn?fn:void 0,bl=null!==(Fn=v.createdAt)&&void 0!==Fn?Fn:void 0,ac=null!==(Cr=v.lastLoginAt)&&void 0!==Cr?Cr:void 0,{uid:Dl,emailVerified:ku,isAnonymous:$l,providerData:Ca,stsTokenManager:Ia}=v;tt(Dl&&Ia,p,"internal-error");const uc=Er.fromJSON(this.name,Ia);tt("string"==typeof Dl,p,"internal-error"),lr(Pr,p.name),lr(Li,p.name),tt("boolean"==typeof ku,p,"internal-error"),tt("boolean"==typeof $l,p,"internal-error"),lr(aa,p.name),lr(al,p.name),lr(xa,p.name),lr(Pc,p.name),lr(bl,p.name),lr(ac,p.name);const lc=new Hr({uid:Dl,auth:p,email:Li,emailVerified:ku,displayName:Pr,isAnonymous:$l,photoURL:al,phoneNumber:aa,tenantId:xa,stsTokenManager:uc,createdAt:bl,lastLoginAt:ac});return Ca&&Array.isArray(Ca)&&(lc.providerData=Ca.map(Gl=>Object.assign({},Gl))),Pc&&(lc._redirectEventId=Pc),lc}static _fromIdTokenResponse(p,v){return(0,y.Z)(function*(R,te,pe=!1){const ut=new Er;ut.updateFromServerResponse(te);const xt=new Hr({uid:te.localId,auth:R,stsTokenManager:ut,isAnonymous:pe});return yield Xn(xt),xt}).apply(this,arguments)}}const Yr=new Map;function fi(T){It(T instanceof Function,"Expected a class definition");let p=Yr.get(T);return p?(It(p instanceof T,"Instance stored in cache mismatched with class"),p):(p=new T,Yr.set(T,p),p)}const Vi=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(v,R){var te=this;return(0,y.Z)(function*(){te.storage[v]=R})()}_get(v){var R=this;return(0,y.Z)(function*(){const te=R.storage[v];return void 0===te?null:te})()}_remove(v){var R=this;return(0,y.Z)(function*(){delete R.storage[v]})()}_addListener(v,R){}_removeListener(v,R){}}return T.type="NONE",T})();function Gr(T,p,v){return`firebase:${T}:${p}:${v}`}class Pe{constructor(p,v,R){this.persistence=p,this.auth=v,this.userKey=R;const{config:te,name:pe}=this.auth;this.fullUserKey=Gr(this.userKey,te.apiKey,pe),this.fullPersistenceKey=Gr("persistence",te.apiKey,pe),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,y.Z)(function*(){const v=yield p.persistence._get(p.fullUserKey);return v?Hr._fromJSON(p.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var v=this;return(0,y.Z)(function*(){if(v.persistence===p)return;const R=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=p,R?v.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,v){return(0,y.Z)(function*(R,te,pe="authUser"){if(!te.length)return new Pe(fi(Vi),R,pe);const ut=(yield Promise.all(te.map(function(){var Pr=(0,y.Z)(function*(Li){if(yield Li._isAvailable())return Li});return function(Li){return Pr.apply(this,arguments)}}()))).filter(Pr=>Pr);let xt=ut[0]||fi(Vi);const fn=Gr(pe,R.config.apiKey,R.name);let Fn=null;for(const Pr of te)try{const Li=yield Pr._get(fn);if(Li){const aa=Hr._fromJSON(R,Li);Pr!==xt&&(Fn=aa),xt=Pr;break}}catch(Li){}const Cr=ut.filter(Pr=>Pr._shouldAllowMigration);return xt._shouldAllowMigration&&Cr.length?(xt=Cr[0],Fn&&(yield xt._set(fn,Fn.toJSON())),yield Promise.all(te.map(function(){var Pr=(0,y.Z)(function*(Li){if(Li!==xt)try{yield Li._remove(fn)}catch(aa){}});return function(Li){return Pr.apply(this,arguments)}}())),new Pe(xt,R,pe)):new Pe(xt,R,pe)}).apply(this,arguments)}}function Ae(T){const p=T.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(ne(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(he(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Se(p))return"Blackberry";if(ht(p))return"Webos";if(ge(p))return"Safari";if((p.includes("chrome/")||G(p))&&!p.includes("edge/"))return"Chrome";if(se(p))return"Android";{const R=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==R?void 0:R.length))return R[1]}return"Other"}function he(T=(0,B.z$)()){return/firefox\//i.test(T)}function ge(T=(0,B.z$)()){const p=T.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function G(T=(0,B.z$)()){return/crios\//i.test(T)}function ne(T=(0,B.z$)()){return/iemobile/i.test(T)}function se(T=(0,B.z$)()){return/android/i.test(T)}function Se(T=(0,B.z$)()){return/blackberry/i.test(T)}function ht(T=(0,B.z$)()){return/webos/i.test(T)}function Wt(T=(0,B.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function yn(T=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function er(T=(0,B.z$)()){return Wt(T)||se(T)||ht(T)||Se(T)||/windows phone/i.test(T)||ne(T)}function pi(T,p=[]){let v;switch(T){case"Browser":v=Ae((0,B.z$)());break;case"Worker":v=`${Ae((0,B.z$)())}-${T}`;break;default:v=T}const R=p.length?p.join(","):"FirebaseCore-web";return`${v}/JsCore/${X.SDK_VERSION}/${R}`}function gt(){return(gt=(0,y.Z)(function*(T){return(yield _e(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ut(T,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,y.Z)(function*(T,p){return _e(T,"GET","/v2/recaptchaConfig",Je(T,p))})).apply(this,arguments)}function sn(T){return void 0!==T&&void 0!==T.getResponse}function Tn(T){return void 0!==T&&void 0!==T.enterprise}class or{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function wr(T){return new Promise((p,v)=>{const R=document.createElement("script");R.setAttribute("src",T),R.onload=p,R.onerror=te=>{const pe=Me("internal-error");pe.customData=te,v(pe)},R.type="text/javascript",R.charset="UTF-8",function zr(){var T,p;return null!==(p=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==p?p:document}().appendChild(R)})}function Ii(T){return`__${T}${Math.floor(1e6*Math.random())}`}class rr{constructor(p){this.type="recaptcha-enterprise",this.auth=wn(p)}verify(){var p=this;return(0,y.Z)(function*(v="verify",R=!1){function pe(){return pe=(0,y.Z)(function*(xt){if(!R){if(null==xt.tenantId&&null!=xt._agentRecaptchaConfig)return xt._agentRecaptchaConfig.siteKey;if(null!=xt.tenantId&&void 0!==xt._tenantRecaptchaConfigs[xt.tenantId])return xt._tenantRecaptchaConfigs[xt.tenantId].siteKey}return new Promise(function(){var fn=(0,y.Z)(function*(Fn,Cr){Ut(xt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Pr=>{if(void 0!==Pr.recaptchaKey){const Li=new or(Pr);return null==xt.tenantId?xt._agentRecaptchaConfig=Li:xt._tenantRecaptchaConfigs[xt.tenantId]=Li,Fn(Li.siteKey)}Cr(new Error("recaptcha Enterprise site key undefined"))}).catch(Pr=>{Cr(Pr)})});return function(Fn,Cr){return fn.apply(this,arguments)}}())}),pe.apply(this,arguments)}function ut(xt,fn,Fn){const Cr=window.grecaptcha;Tn(Cr)?Cr.enterprise.ready(()=>{Cr.enterprise.execute(xt,{action:v}).then(Pr=>{fn(Pr)}).catch(()=>{fn("NO_RECAPTCHA")})}):Fn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((xt,fn)=>{(function te(xt){return pe.apply(this,arguments)})(p.auth).then(Fn=>{if(!R&&Tn(window.grecaptcha))ut(Fn,xt,fn);else{if("undefined"==typeof window)return void fn(new Error("RecaptchaVerifier is only supported in browser"));wr("https://www.google.com/recaptcha/enterprise.js?render="+Fn).then(()=>{ut(Fn,xt,fn)}).catch(Cr=>{fn(Cr)})}}).catch(Fn=>{fn(Fn)})})}).apply(this,arguments)}}function Ui(T,p,v){return gs.apply(this,arguments)}function gs(){return(gs=(0,y.Z)(function*(T,p,v,R=!1){const te=new rr(T);let pe;try{pe=yield te.verify(v)}catch(xt){pe=yield te.verify(v,!0)}const ut=Object.assign({},p);return Object.assign(ut,R?{captchaResp:pe}:{captchaResponse:pe}),Object.assign(ut,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ut,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ut})).apply(this,arguments)}class ks{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,v){const R=pe=>new Promise((ut,xt)=>{try{ut(p(pe))}catch(fn){xt(fn)}});R.onAbort=v,this.queue.push(R);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(p){var v=this;return(0,y.Z)(function*(){if(v.auth.currentUser===p)return;const R=[];try{for(const te of v.queue)yield te(p),te.onAbort&&R.push(te.onAbort)}catch(te){R.reverse();for(const pe of R)try{pe()}catch(ut){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null==te?void 0:te.message})}})()}}class Dr{constructor(p,v,R,te){this.app=p,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=R,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ar(this),this.idTokenSubscription=new ar(this),this.beforeStateQueue=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=At,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(p,v){var R=this;return v&&(this._popupRedirectResolver=fi(v)),this._initializationPromise=this.queue((0,y.Z)(function*(){var te,pe;if(!R._deleted&&(R.persistenceManager=yield Pe.create(R,p),!R._deleted)){if(null===(te=R._popupRedirectResolver)||void 0===te?void 0:te._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch(ut){}yield R.initializeCurrentUser(v),R.lastNotifiedUid=(null===(pe=R.currentUser)||void 0===pe?void 0:pe.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,y.Z)(function*(){if(p._deleted)return;const v=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||v){if(p.currentUser&&v&&p.currentUser.uid===v.uid)return p._currentUser._assign(v),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(v,!0)}})()}initializeCurrentUser(p){var v=this;return(0,y.Z)(function*(){var R;const te=yield v.assertedPersistence.getCurrentUser();let pe=te,ut=!1;if(p&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const xt=null===(R=v.redirectUser)||void 0===R?void 0:R._redirectEventId,fn=null==pe?void 0:pe._redirectEventId,Fn=yield v.tryRedirectSignIn(p);(!xt||xt===fn)&&(null==Fn?void 0:Fn.user)&&(pe=Fn.user,ut=!0)}if(!pe)return v.directlySetCurrentUser(null);if(!pe._redirectEventId){if(ut)try{yield v.beforeStateQueue.runMiddleware(pe)}catch(xt){pe=te,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(xt))}return pe?v.reloadAndSetCurrentUserOrClear(pe):v.directlySetCurrentUser(null)}return tt(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===pe._redirectEventId?v.directlySetCurrentUser(pe):v.reloadAndSetCurrentUserOrClear(pe)})()}tryRedirectSignIn(p){var v=this;return(0,y.Z)(function*(){let R=null;try{R=yield v._popupRedirectResolver._completeRedirectFn(v,p,!0)}catch(te){yield v._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(p){var v=this;return(0,y.Z)(function*(){try{yield Xn(p)}catch(R){if("auth/network-request-failed"!==(null==R?void 0:R.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function qr(){if("undefined"==typeof navigator)return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var p=this;return(0,y.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var v=this;return(0,y.Z)(function*(){const R=p?(0,B.m9)(p):null;return R&&tt(R.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(R&&R._clone(v))})()}_updateCurrentUser(p){var v=this;return(0,y.Z)(function*(R,te=!1){if(!v._deleted)return R&&tt(v.tenantId===R.tenantId,v,"tenant-id-mismatch"),te||(yield v.beforeStateQueue.runMiddleware(R)),v.queue((0,y.Z)(function*(){yield v.directlySetCurrentUser(R),v.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var p=this;return(0,y.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var v=this;return this.queue((0,y.Z)(function*(){yield v.assertedPersistence.setPersistence(fi(p))}))}initializeRecaptchaConfig(){var p=this;return(0,y.Z)(function*(){const v=yield Ut(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),R=new or(v);null==p.tenantId?p._agentRecaptchaConfig=R:p._tenantRecaptchaConfigs[p.tenantId]=R,R.emailPasswordEnabled&&new rr(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,v,R){return this.registerStateListener(this.authStateSubscription,p,v,R)}beforeAuthStateChanged(p,v){return this.beforeStateQueue.pushCallback(p,v)}onIdTokenChanged(p,v,R){return this.registerStateListener(this.idTokenSubscription,p,v,R)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,v){var R=this;return(0,y.Z)(function*(){const te=yield R.getOrInitRedirectPersistenceManager(v);return null===p?te.removeCurrentUser():te.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var v=this;return(0,y.Z)(function*(){if(!v.redirectPersistenceManager){const R=p&&fi(p)||v._popupRedirectResolver;tt(R,v,"argument-error"),v.redirectPersistenceManager=yield Pe.create(v,[fi(R._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(p){var v=this;return(0,y.Z)(function*(){var R,te;return v._isInitialized&&(yield v.queue((0,y.Z)(function*(){}))),(null===(R=v._currentUser)||void 0===R?void 0:R._redirectEventId)===p?v._currentUser:(null===(te=v.redirectUser)||void 0===te?void 0:te._redirectEventId)===p?v.redirectUser:null})()}_persistUserIfCurrent(p){var v=this;return(0,y.Z)(function*(){if(p===v.currentUser)return v.queue((0,y.Z)(function*(){return v.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(v=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,v,R,te){if(this._deleted)return()=>{};const pe="function"==typeof v?v:v.next.bind(v),ut=this._isInitialized?Promise.resolve():this._initializationPromise;return tt(ut,this,"internal-error"),ut.then(()=>pe(this.currentUser)),"function"==typeof v?p.addObserver(v,R,te):p.addObserver(v)}directlySetCurrentUser(p){var v=this;return(0,y.Z)(function*(){v.currentUser&&v.currentUser!==p&&v._currentUser._stopProactiveRefresh(),p&&v.isProactiveRefreshEnabled&&p._startProactiveRefresh(),v.currentUser=p,p?yield v.assertedPersistence.setCurrentUser(p):yield v.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=pi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,y.Z)(function*(){var v;const R={"X-Client-Version":p.clientVersion};p.app.options.appId&&(R["X-Firebase-gmpid"]=p.app.options.appId);const te=yield null===(v=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();te&&(R["X-Firebase-Client"]=te);const pe=yield p._getAppCheckToken();return pe&&(R["X-Firebase-AppCheck"]=pe),R})()}_getAppCheckToken(){var p=this;return(0,y.Z)(function*(){var v;const R=yield null===(v=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return(null==R?void 0:R.error)&&function dn(T,...p){Nt.logLevel<=Ue.in.WARN&&Nt.warn(`Auth (${X.SDK_VERSION}): ${T}`,...p)}(`Error while retrieving App Check token: ${R.error}`),null==R?void 0:R.token})()}}function wn(T){return(0,B.m9)(T)}class ar{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(v=>this.observer=v)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ai(T,p,v){const R=wn(T);tt(R._canInitEmulator,R,"emulator-config-failed"),tt(/^https?:\/\//.test(p),R,"invalid-emulator-scheme");const te=!!(null==v?void 0:v.disableWarnings),pe=rt(p),{host:ut,port:xt}=function Ze(T){const p=rt(T),v=/(\/\/)?([^?#/]+)/.exec(T.substr(p.length));if(!v)return{host:"",port:null};const R=v[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(R);if(te){const pe=te[1];return{host:pe,port:st(R.substr(pe.length+1))}}{const[pe,ut]=R.split(":");return{host:pe,port:st(ut)}}}(p);R.config.emulator={url:`${pe}//${ut}${null===xt?"":`:${xt}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:ut,port:xt,protocol:pe.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function mt(){function T(){const p=document.createElement("p"),v=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function rt(T){const p=T.indexOf(":");return p<0?"":T.substr(0,p+1)}function st(T){if(!T)return null;const p=Number(T);return isNaN(p)?null:p}class kt{constructor(p,v){this.providerId=p,this.signInMethod=v}toJSON(){return Vt("not implemented")}_getIdTokenResponse(p){return Vt("not implemented")}_linkToIdToken(p,v){return Vt("not implemented")}_getReauthenticationResolver(p){return Vt("not implemented")}}function bn(T,p){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:resetPassword",Je(T,p))})).apply(this,arguments)}function fr(T,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ui(T,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:update",Je(T,p))})).apply(this,arguments)}function vi(T,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signInWithPassword",Je(T,p))})).apply(this,arguments)}function Ds(T,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:sendOobCode",Je(T,p))})).apply(this,arguments)}function Hi(T,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,y.Z)(function*(T,p){return Ds(T,p)})).apply(this,arguments)}function po(T,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,y.Z)(function*(T,p){return Ds(T,p)})).apply(this,arguments)}function ca(T,p){return xo.apply(this,arguments)}function xo(){return(xo=(0,y.Z)(function*(T,p){return Ds(T,p)})).apply(this,arguments)}function jo(T,p){return ms.apply(this,arguments)}function ms(){return(ms=(0,y.Z)(function*(T,p){return Ds(T,p)})).apply(this,arguments)}function Qs(){return(Qs=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signInWithEmailLink",Je(T,p))})).apply(this,arguments)}function ao(){return(ao=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signInWithEmailLink",Je(T,p))})).apply(this,arguments)}class ki extends kt{constructor(p,v,R,te=null){super("password",R),this._email=p,this._password=v,this._tenantId=te}static _fromEmailAndPassword(p,v){return new ki(p,v,"password")}static _fromEmailAndCode(p,v,R=null){return new ki(p,v,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const v="string"==typeof p?JSON.parse(p):p;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(p){var v=this;return(0,y.Z)(function*(){var R;switch(v.signInMethod){case"password":const te={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null===(R=p._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const pe=yield Ui(p,te,"signInWithPassword");return vi(p,pe)}return vi(p,te).catch(function(){var pe=(0,y.Z)(function*(ut){if("auth/missing-recaptcha-token"===ut.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const xt=yield Ui(p,te,"signInWithPassword");return vi(p,xt)}return Promise.reject(ut)});return function(ut){return pe.apply(this,arguments)}}());case"emailLink":return function kr(T,p){return Qs.apply(this,arguments)}(p,{email:v._email,oobCode:v._password});default:Ee(p,"internal-error")}})()}_linkToIdToken(p,v){var R=this;return(0,y.Z)(function*(){switch(R.signInMethod){case"password":return fr(p,{idToken:v,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function wo(T,p){return ao.apply(this,arguments)}(p,{idToken:v,email:R._email,oobCode:R._password});default:Ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ss(T,p){return zi.apply(this,arguments)}function zi(){return(zi=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signInWithIdp",Je(T,p))})).apply(this,arguments)}class li extends kt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const v=new li(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(v.idToken=p.idToken),p.accessToken&&(v.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(v.nonce=p.nonce),p.pendingToken&&(v.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(v.accessToken=p.oauthToken,v.secret=p.oauthTokenSecret):Ee("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const v="string"==typeof p?JSON.parse(p):p,{providerId:R,signInMethod:te}=v,pe=(0,ie._T)(v,["providerId","signInMethod"]);if(!R||!te)return null;const ut=new li(R,te);return ut.idToken=pe.idToken||void 0,ut.accessToken=pe.accessToken||void 0,ut.secret=pe.secret,ut.nonce=pe.nonce,ut.pendingToken=pe.pendingToken||null,ut}_getIdTokenResponse(p){return Ss(p,this.buildRequest())}_linkToIdToken(p,v){const R=this.buildRequest();return R.idToken=v,Ss(p,R)}_getReauthenticationResolver(p){const v=this.buildRequest();return v.autoCreate=!1,Ss(p,v)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),p.postBody=(0,B.xO)(v)}return p}}function Ho(T,p){return js.apply(this,arguments)}function js(){return(js=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:sendVerificationCode",Je(T,p))})).apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signInWithPhoneNumber",Je(T,p))})).apply(this,arguments)}function Rs(){return(Rs=(0,y.Z)(function*(T,p){const v=yield pt(T,"POST","/v1/accounts:signInWithPhoneNumber",Je(T,p));if(v.temporaryProof)throw zn(T,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Co={USER_NOT_FOUND:"user-not-found"};function Po(){return(Po=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signInWithPhoneNumber",Je(T,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Co)})).apply(this,arguments)}class Hs extends kt{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,v){return new Hs({verificationId:p,verificationCode:v})}static _fromTokenResponse(p,v){return new Hs({phoneNumber:p,temporaryProof:v})}_getIdTokenResponse(p){return function Fs(T,p){return As.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,v){return function uo(T,p){return Rs.apply(this,arguments)}(p,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function go(T,p){return Po.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:v,verificationId:R,verificationCode:te}=this.params;return p&&v?{temporaryProof:p,phoneNumber:v}:{sessionInfo:R,code:te}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:v,verificationCode:R,phoneNumber:te,temporaryProof:pe}=p;return R||v||te||pe?new Hs({verificationId:v,verificationCode:R,phoneNumber:te,temporaryProof:pe}):null}}class Ms{constructor(p){var v,R,te,pe,ut,xt;const fn=(0,B.zd)((0,B.pd)(p)),Fn=null!==(v=fn.apiKey)&&void 0!==v?v:null,Cr=null!==(R=fn.oobCode)&&void 0!==R?R:null,Pr=function Ki(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=fn.mode)&&void 0!==te?te:null);tt(Fn&&Cr&&Pr,"argument-error"),this.apiKey=Fn,this.operation=Pr,this.code=Cr,this.continueUrl=null!==(pe=fn.continueUrl)&&void 0!==pe?pe:null,this.languageCode=null!==(ut=fn.languageCode)&&void 0!==ut?ut:null,this.tenantId=null!==(xt=fn.tenantId)&&void 0!==xt?xt:null}static parseLink(p){const v=function $s(T){const p=(0,B.zd)((0,B.pd)(T)).link,v=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,R=(0,B.zd)((0,B.pd)(T)).deep_link_id;return(R?(0,B.zd)((0,B.pd)(R)).link:null)||R||v||p||T}(p);try{return new Ms(v)}catch(R){return null}}}let mo=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(v,R){return ki._fromEmailAndPassword(v,R)}static credentialWithLink(v,R){const te=Ms.parseLink(R);return tt(te,"argument-error"),ki._fromEmailAndCode(v,te.code,te.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class lo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Wr extends lo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ns extends Wr{static credentialFromJSON(p){const v="string"==typeof p?JSON.parse(p):p;return tt("providerId"in v&&"signInMethod"in v,"argument-error"),li._fromParams(v)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return tt(p.idToken||p.accessToken,"argument-error"),li._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ns.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ns.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:R,oauthTokenSecret:te,pendingToken:pe,nonce:ut,providerId:xt}=p;if(!R&&!te&&!v&&!pe||!xt)return null;try{return new ns(xt)._credential({idToken:v,accessToken:R,nonce:ut,pendingToken:pe})}catch(fn){return null}}}let ys=(()=>{class T extends Wr{constructor(){super("facebook.com")}static credential(v){return li._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch(R){return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),xs=(()=>{class T extends Wr{constructor(){super("google.com"),this.addScope("profile")}static credential(v,R){return li._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:R})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:R,oauthAccessToken:te}=v;if(!R&&!te)return null;try{return T.credential(R,te)}catch(pe){return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),Ei=(()=>{class T extends Wr{constructor(){super("github.com")}static credential(v){return li._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch(R){return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class ae extends kt{constructor(p,v){super(p,p),this.pendingToken=v}_getIdTokenResponse(p){return Ss(p,this.buildRequest())}_linkToIdToken(p,v){const R=this.buildRequest();return R.idToken=v,Ss(p,R)}_getReauthenticationResolver(p){const v=this.buildRequest();return v.autoCreate=!1,Ss(p,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const v="string"==typeof p?JSON.parse(p):p,{providerId:R,signInMethod:te,pendingToken:pe}=v;return R&&te&&pe&&R===te?new ae(R,pe):null}static _create(p,v){return new ae(p,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class de extends lo{constructor(p){tt(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return de.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return de.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const v=ae.fromJSON(p);return tt(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:v,providerId:R}=p;if(!v||!R)return null;try{return ae._create(R,v)}catch(te){return null}}}let ke=(()=>{class T extends Wr{constructor(){super("twitter.com")}static credential(v,R){return li._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:R})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:R,oauthTokenSecret:te}=v;if(!R||!te)return null;try{return T.credential(R,te)}catch(pe){return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Tt(T,p){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signUp",Je(T,p))})).apply(this,arguments)}class Cn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,v,R){return(0,y.Z)(function*(te,pe,ut,xt=!1){const fn=yield Hr._fromIdTokenResponse(te,ut,xt),Fn=Fr(ut);return new Cn({user:fn,providerId:Fn,_tokenResponse:ut,operationType:pe})}).apply(this,arguments)}static _forOperation(p,v,R){return(0,y.Z)(function*(){yield p._updateTokensIfNecessary(R,!0);const te=Fr(R);return new Cn({user:p,providerId:te,_tokenResponse:R,operationType:v})})()}}function Fr(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function Vr(T){return yr.apply(this,arguments)}function yr(){return(yr=(0,y.Z)(function*(T){var p;const v=wn(T);if(yield v._initializationPromise,null===(p=v.currentUser)||void 0===p?void 0:p.isAnonymous)return new Cn({user:v.currentUser,providerId:null,operationType:"signIn"});const R=yield Tt(v,{returnSecureToken:!0}),te=yield Cn._fromIdTokenResponse(v,"signIn",R,!0);return yield v._updateCurrentUser(te.user),te})).apply(this,arguments)}class Mr extends B.ZR{constructor(p,v,R,te){var pe;super(v.code,v.message),this.operationType=R,this.user=te,Object.setPrototypeOf(this,Mr.prototype),this.customData={appName:p.name,tenantId:null!==(pe=p.tenantId)&&void 0!==pe?pe:void 0,_serverResponse:v.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(p,v,R,te){return new Mr(p,v,R,te)}}function Mi(T,p,v,R){return("reauthenticate"===p?v._getReauthenticationResolver(T):v._getIdTokenResponse(T)).catch(pe=>{throw"auth/multi-factor-auth-required"===pe.code?Mr._fromErrorAndOperation(T,pe,p,R):pe})}function Si(T){return new Set(T.map(({providerId:p})=>p).filter(p=>!!p))}function ii(T,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T);yield _s(!0,v,p);const{providerUserInfo:R}=yield Ln(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[p]}),te=Si(R||[]);return v.providerData=v.providerData.filter(pe=>te.has(pe.providerId)),te.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Fi(T,p){return ur.apply(this,arguments)}function ur(){return(ur=(0,y.Z)(function*(T,p,v=!1){const R=yield at(T,p._linkToIdToken(T.auth,yield T.getIdToken()),v);return Cn._forOperation(T,"link",R)})).apply(this,arguments)}function _s(T,p,v){return rs.apply(this,arguments)}function rs(){return(rs=(0,y.Z)(function*(T,p,v){yield Xn(p);const te=!1===T?"provider-already-linked":"no-such-provider";tt(Si(p.providerData).has(v)===T,p.auth,te)})).apply(this,arguments)}function vs(T,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,y.Z)(function*(T,p,v=!1){const{auth:R}=T,te="reauthenticate";try{const pe=yield at(T,Mi(R,te,p,T),v);tt(pe.idToken,R,"internal-error");const ut=He(pe.idToken);tt(ut,R,"internal-error");const{sub:xt}=ut;return tt(T.uid===xt,R,"user-mismatch"),Cn._forOperation(T,te,pe)}catch(pe){throw"auth/user-not-found"===(null==pe?void 0:pe.code)&&Ee(R,"user-mismatch"),pe}})).apply(this,arguments)}function K(T,p){return V.apply(this,arguments)}function V(){return(V=(0,y.Z)(function*(T,p,v=!1){const R="signIn",te=yield Mi(T,R,p),pe=yield Cn._fromIdTokenResponse(T,R,te);return v||(yield T._updateCurrentUser(pe.user)),pe})).apply(this,arguments)}function O(T,p){return ue.apply(this,arguments)}function ue(){return(ue=(0,y.Z)(function*(T,p){return K(wn(T),p)})).apply(this,arguments)}function Ne(T,p){return qt.apply(this,arguments)}function qt(){return(qt=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T);return yield _s(!1,v,p.providerId),Fi(v,p)})).apply(this,arguments)}function gi(T,p){return z.apply(this,arguments)}function z(){return(z=(0,y.Z)(function*(T,p){return vs((0,B.m9)(T),p)})).apply(this,arguments)}function W(T,p){return fe.apply(this,arguments)}function fe(){return(fe=(0,y.Z)(function*(T,p){return pt(T,"POST","/v1/accounts:signInWithCustomToken",Je(T,p))})).apply(this,arguments)}function Ie(T,p){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,y.Z)(function*(T,p){const v=wn(T),R=yield W(v,{token:p,returnSecureToken:!0}),te=yield Cn._fromIdTokenResponse(v,"signIn",R);return yield v._updateCurrentUser(te.user),te})).apply(this,arguments)}class Ct{constructor(p,v){this.factorId=p,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(p,v){return"phoneInfo"in v?Jt._fromServerResponse(p,v):"totpInfo"in v?Vn._fromServerResponse(p,v):Ee(p,"internal-error")}}class Jt extends Ct{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,v){return new Jt(v)}}class Vn extends Ct{constructor(p){super("totp",p)}static _fromServerResponse(p,v){return new Vn(v)}}function Rn(T,p,v){var R;tt((null===(R=v.url)||void 0===R?void 0:R.length)>0,T,"invalid-continue-uri"),tt(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),p.continueUrl=v.url,p.dynamicLinkDomain=v.dynamicLinkDomain,p.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(tt(v.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),p.iOSBundleId=v.iOS.bundleId),v.android&&(tt(v.android.packageName.length>0,T,"missing-android-pkg-name"),p.androidInstallApp=v.android.installApp,p.androidMinimumVersionCode=v.android.minimumVersion,p.androidPackageName=v.android.packageName)}function cr(T,p,v){return Kn.apply(this,arguments)}function Kn(){return Kn=(0,y.Z)(function*(T,p,v){var R;const te=wn(T),pe={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null===(R=te._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const ut=yield Ui(te,pe,"getOobCode",!0);v&&Rn(te,ut,v),yield po(te,ut)}else v&&Rn(te,pe,v),yield po(te,pe).catch(function(){var ut=(0,y.Z)(function*(xt){if("auth/missing-recaptcha-token"!==xt.code)return Promise.reject(xt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const fn=yield Ui(te,pe,"getOobCode",!0);v&&Rn(te,fn,v),yield po(te,fn)}});return function(xt){return ut.apply(this,arguments)}}())}),Kn.apply(this,arguments)}function ci(T,p,v){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,y.Z)(function*(T,p,v){yield bn((0,B.m9)(T),{oobCode:p,newPassword:v})})).apply(this,arguments)}function bi(T,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,y.Z)(function*(T,p){yield ui((0,B.m9)(T),{oobCode:p})})).apply(this,arguments)}function qi(T,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T),R=yield bn(v,{oobCode:p}),te=R.requestType;switch(tt(te,v,"internal-error"),te){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(R.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(R.mfaInfo,v,"internal-error");default:tt(R.email,v,"internal-error")}let pe=null;return R.mfaInfo&&(pe=Ct._fromServerResponse(wn(v),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:pe},operation:te}})).apply(this,arguments)}function Ls(T,p){return is.apply(this,arguments)}function is(){return(is=(0,y.Z)(function*(T,p){const{data:v}=yield qi((0,B.m9)(T),p);return v.email})).apply(this,arguments)}function $i(T,p,v){return Zi.apply(this,arguments)}function Zi(){return Zi=(0,y.Z)(function*(T,p,v){var R;const te=wn(T),pe={returnSecureToken:!0,email:p,password:v,clientType:"CLIENT_TYPE_WEB"};let ut;if(null===(R=te._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const Fn=yield Ui(te,pe,"signUpPassword");ut=Tt(te,Fn)}else ut=Tt(te,pe).catch(function(){var Fn=(0,y.Z)(function*(Cr){if("auth/missing-recaptcha-token"===Cr.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Pr=yield Ui(te,pe,"signUpPassword");return Tt(te,Pr)}return Promise.reject(Cr)});return function(Cr){return Fn.apply(this,arguments)}}());const xt=yield ut.catch(Fn=>Promise.reject(Fn)),fn=yield Cn._fromIdTokenResponse(te,"signIn",xt);return yield te._updateCurrentUser(fn.user),fn}),Zi.apply(this,arguments)}function Gs(T,p,v){return O((0,B.m9)(T),mo.credential(p,v))}function Io(T,p,v){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,y.Z)(function*(T,p,v){var R;const te=wn(T),pe={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function ut(xt,fn){tt(fn.handleCodeInApp,te,"argument-error"),fn&&Rn(te,xt,fn)}if(null===(R=te._getRecaptchaConfig())||void 0===R?void 0:R.emailPasswordEnabled){const xt=yield Ui(te,pe,"getOobCode",!0);ut(xt,v),yield ca(te,xt)}else ut(pe,v),yield ca(te,pe).catch(function(){var xt=(0,y.Z)(function*(fn){if("auth/missing-recaptcha-token"!==fn.code)return Promise.reject(fn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Fn=yield Ui(te,pe,"getOobCode",!0);ut(Fn,v),yield ca(te,Fn)}});return function(fn){return xt.apply(this,arguments)}}())}),Xo.apply(this,arguments)}function Js(T,p){const v=Ms.parseLink(p);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function No(T,p,v){return hs.apply(this,arguments)}function hs(){return(hs=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T),te=mo.credentialWithLink(p,v||On());return tt(te._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),O(R,te)})).apply(this,arguments)}function ha(T,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:createAuthUri",Je(T,p))})).apply(this,arguments)}function Ha(T,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,y.Z)(function*(T,p){const R={identifier:p,continueUri:Ht()?On():"http://localhost"},{signinMethods:te}=yield ha((0,B.m9)(T),R);return te||[]})).apply(this,arguments)}function xi(T,p){return co.apply(this,arguments)}function co(){return(co=(0,y.Z)(function*(T,p){const v=(0,B.m9)(T),te={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};p&&Rn(v.auth,te,p);const{email:pe}=yield Hi(v.auth,te);pe!==T.email&&(yield T.reload())})).apply(this,arguments)}function ss(T,p,v){return Es.apply(this,arguments)}function Es(){return(Es=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T),pe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:p};v&&Rn(R.auth,pe,v);const{email:ut}=yield jo(R.auth,pe);ut!==T.email&&(yield T.reload())})).apply(this,arguments)}function Pi(T,p){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(T,p){return _e(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Oa(T,p){return fu.apply(this,arguments)}function fu(){return(fu=(0,y.Z)(function*(T,{displayName:p,photoURL:v}){if(void 0===p&&void 0===v)return;const R=(0,B.m9)(T),pe={idToken:yield R.getIdToken(),displayName:p,photoUrl:v,returnSecureToken:!0},ut=yield at(R,Pi(R.auth,pe));R.displayName=ut.displayName||null,R.photoURL=ut.photoUrl||null;const xt=R.providerData.find(({providerId:fn})=>"password"===fn);xt&&(xt.displayName=R.displayName,xt.photoURL=R.photoURL),yield R._updateTokensIfNecessary(ut)})).apply(this,arguments)}function ta(T,p){return To((0,B.m9)(T),p,null)}function pu(T,p){return To((0,B.m9)(T),null,p)}function To(T,p,v){return ws.apply(this,arguments)}function ws(){return(ws=(0,y.Z)(function*(T,p,v){const{auth:R}=T,pe={idToken:yield T.getIdToken(),returnSecureToken:!0};p&&(pe.email=p),v&&(pe.password=v);const ut=yield at(T,fr(R,pe));yield T._updateTokensIfNecessary(ut,!0)})).apply(this,arguments)}class cs{constructor(p,v,R={}){this.isNewUser=p,this.providerId=v,this.profile=R}}class ko extends cs{constructor(p,v,R,te){super(p,v,R),this.username=te}}class bu extends cs{constructor(p,v){super(p,"facebook.com",v)}}class ho extends ko{constructor(p,v){super(p,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Go extends cs{constructor(p,v){super(p,"google.com",v)}}class si extends ko{constructor(p,v,R){super(p,"twitter.com",v,R)}}function rl(T){const{user:p,_tokenResponse:v}=T;return p.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Zo(T){var p,v;if(!T)return null;const{providerId:R}=T,te=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},pe=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!R&&(null==T?void 0:T.idToken)){const ut=null===(v=null===(p=He(T.idToken))||void 0===p?void 0:p.firebase)||void 0===v?void 0:v.sign_in_provider;if(ut)return new cs(pe,"anonymous"!==ut&&"custom"!==ut?ut:null)}if(!R)return null;switch(R){case"facebook.com":return new bu(pe,te);case"github.com":return new ho(pe,te);case"google.com":return new Go(pe,te);case"twitter.com":return new si(pe,te,T.screenName||null);case"custom":case"anonymous":return new cs(pe,null);default:return new cs(pe,R,te)}}(v)}class _o{constructor(p,v,R){this.type=p,this.credential=v,this.auth=R}static _fromIdtoken(p,v){return new _o("enroll",p,v)}static _fromMfaPendingCredential(p){return new _o("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var v,R;if(null==p?void 0:p.multiFactorSession){if(null===(v=p.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return _o._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(R=p.multiFactorSession)||void 0===R?void 0:R.idToken)return _o._fromIdtoken(p.multiFactorSession.idToken)}return null}}class fa{constructor(p,v,R){this.session=p,this.hints=v,this.signInResolver=R}static _fromError(p,v){const R=wn(p),te=v.customData._serverResponse,pe=(te.mfaInfo||[]).map(xt=>Ct._fromServerResponse(R,xt));tt(te.mfaPendingCredential,R,"internal-error");const ut=_o._fromMfaPendingCredential(te.mfaPendingCredential);return new fa(ut,pe,function(){var xt=(0,y.Z)(function*(fn){const Fn=yield fn._process(R,ut);delete te.mfaInfo,delete te.mfaPendingCredential;const Cr=Object.assign(Object.assign({},te),{idToken:Fn.idToken,refreshToken:Fn.refreshToken});switch(v.operationType){case"signIn":const Pr=yield Cn._fromIdTokenResponse(R,v.operationType,Cr);return yield R._updateCurrentUser(Pr.user),Pr;case"reauthenticate":return tt(v.user,R,"internal-error"),Cn._forOperation(v.user,v.operationType,Cr);default:Ee(R,"internal-error")}});return function(fn){return xt.apply(this,arguments)}}())}resolveSignIn(p){var v=this;return(0,y.Z)(function*(){return v.signInResolver(p)})()}}function ka(T,p){var v;const R=(0,B.m9)(T),te=p;return tt(p.customData.operationType,R,"argument-error"),tt(null===(v=te.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,R,"argument-error"),fa._fromError(R,te)}function Yo(T,p){return _e(T,"POST","/v2/accounts/mfaEnrollment:start",Je(T,p))}class vu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(R=>Ct._fromServerResponse(p.auth,R)))})}static _fromUser(p){return new vu(p)}getSession(){var p=this;return(0,y.Z)(function*(){return _o._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,v){var R=this;return(0,y.Z)(function*(){const te=p,pe=yield R.getSession(),ut=yield at(R.user,te._process(R.user.auth,pe,v));return yield R.user._updateTokensIfNecessary(ut),R.user.reload()})()}unenroll(p){var v=this;return(0,y.Z)(function*(){const R="string"==typeof p?p:p.uid,te=yield v.user.getIdToken();try{const pe=yield at(v.user,function Su(T,p){return _e(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Je(T,p))}(v.user.auth,{idToken:te,mfaEnrollmentId:R}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ut})=>ut!==R),yield v.user._updateTokensIfNecessary(pe),yield v.user.reload()}catch(pe){throw pe}})()}}const pa=new WeakMap;function Bu(T){const p=(0,B.m9)(T);return pa.has(p)||pa.set(p,vu._fromUser(p)),pa.get(p)}const Xa="__sak";class ju{constructor(p,v){this.storageRetriever=p,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Xa,"1"),this.storage.removeItem(Xa),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,v){return this.storage.setItem(p,JSON.stringify(v)),Promise.resolve()}_get(p){const v=this.storage.getItem(p);return Promise.resolve(v?JSON.parse(v):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const I=(()=>{class T extends ju{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,R)=>this.onStorageEvent(v,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fa(){const T=(0,B.z$)();return ge(T)||Wt(T)}()&&function Ur(){try{return!(!window||window===window.top)}catch(T){return!1}}(),this.fallbackToPolling=er(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const R of Object.keys(this.listeners)){const te=this.storage.getItem(R),pe=this.localCache[R];te!==pe&&v(R,pe,te)}}onStorageEvent(v,R=!1){if(!v.key)return void this.forAllChangedKeys((xt,fn,Fn)=>{this.notifyListeners(xt,Fn)});const te=v.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xt=this.storage.getItem(te);if(v.newValue!==xt)null!==v.newValue?this.storage.setItem(te,v.newValue):this.storage.removeItem(te);else if(this.localCache[te]===v.newValue&&!R)return}const pe=()=>{const xt=this.storage.getItem(te);!R&&this.localCache[te]===xt||this.notifyListeners(te,xt)},ut=this.storage.getItem(te);!function $n(){return(0,B.w1)()&&10===document.documentMode}()||ut===v.newValue||v.newValue===v.oldValue?pe():setTimeout(pe,10)}notifyListeners(v,R){this.localCache[v]=R;const te=this.listeners[v];if(te)for(const pe of Array.from(te))pe(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,R,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:R,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,R){var te=()=>super._set,pe=this;return(0,y.Z)(function*(){yield te().call(pe,v,R),pe.localCache[v]=JSON.stringify(R)})()}_get(v){var R=()=>super._get,te=this;return(0,y.Z)(function*(){const pe=yield R().call(te,v);return te.localCache[v]=JSON.stringify(pe),pe})()}_remove(v){var R=()=>super._remove,te=this;return(0,y.Z)(function*(){yield R().call(te,v),delete te.localCache[v]})()}}return T.type="LOCAL",T})(),Y=(()=>{class T extends ju{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,R){}_removeListener(v,R){}}return T.type="SESSION",T})();let Re=(()=>{class T{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const R=this.receivers.find(pe=>pe.isListeningto(v));if(R)return R;const te=new T(v);return this.receivers.push(te),te}isListeningto(v){return this.eventTarget===v}handleEvent(v){var R=this;return(0,y.Z)(function*(){const te=v,{eventId:pe,eventType:ut,data:xt}=te.data,fn=R.handlersMap[ut];if(!(null==fn?void 0:fn.size))return;te.ports[0].postMessage({status:"ack",eventId:pe,eventType:ut});const Fn=Array.from(fn).map(function(){var Pr=(0,y.Z)(function*(Li){return Li(te.origin,xt)});return function(Li){return Pr.apply(this,arguments)}}()),Cr=yield function le(T){return Promise.all(T.map(function(){var p=(0,y.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(R){return{fulfilled:!1,reason:R}}});return function(v){return p.apply(this,arguments)}}()))}(Fn);te.ports[0].postMessage({status:"done",eventId:pe,eventType:ut,response:Cr})})()}_subscribe(v,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(R)}_unsubscribe(v,R){this.handlersMap[v]&&R&&this.handlersMap[v].delete(R),(!R||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function We(T="",p=10){let v="";for(let R=0;R<p;R++)v+=Math.floor(10*Math.random());return T+v}class $e{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,v){var R=this;return(0,y.Z)(function*(te,pe,ut=50){const xt="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!xt)throw new Error("connection_unavailable");let fn,Fn;return new Promise((Cr,Pr)=>{const Li=We("",20);xt.port1.start();const aa=setTimeout(()=>{Pr(new Error("unsupported_event"))},ut);Fn={messageChannel:xt,onMessage(al){const xa=al;if(xa.data.eventId===Li)switch(xa.data.status){case"ack":clearTimeout(aa),fn=setTimeout(()=>{Pr(new Error("timeout"))},3e3);break;case"done":clearTimeout(fn),Cr(xa.data.response);break;default:clearTimeout(aa),clearTimeout(fn),Pr(new Error("invalid_response"))}}},R.handlers.add(Fn),xt.port1.addEventListener("message",Fn.onMessage),R.target.postMessage({eventType:te,eventId:Li,data:pe},[xt.port2])}).finally(()=>{Fn&&R.removeMessageHandler(Fn)})}).apply(this,arguments)}}function en(){return window}function Zn(){return void 0!==en().WorkerGlobalScope&&"function"==typeof en().importScripts}function gn(){return(gn=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(T){return null}})).apply(this,arguments)}const yt="firebaseLocalStorageDb",Qr="firebaseLocalStorage",ra="fbase_key";class ga{constructor(p){this.request=p}toPromise(){return new Promise((p,v)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function $a(T,p){return T.transaction([Qr],p?"readwrite":"readonly").objectStore(Qr)}function $u(){const T=indexedDB.open(yt,1);return new Promise((p,v)=>{T.addEventListener("error",()=>{v(T.error)}),T.addEventListener("upgradeneeded",()=>{const R=T.result;try{R.createObjectStore(Qr,{keyPath:ra})}catch(te){v(te)}}),T.addEventListener("success",(0,y.Z)(function*(){const R=T.result;R.objectStoreNames.contains(Qr)?p(R):(R.close(),yield function jl(){const T=indexedDB.deleteDatabase(yt);return new ga(T).toPromise()}(),p(yield $u()))}))})}function Ga(T,p,v){return Au.apply(this,arguments)}function Au(){return(Au=(0,y.Z)(function*(T,p,v){const R=$a(T,!0).put({[ra]:p,value:v});return new ga(R).toPromise()})).apply(this,arguments)}function ps(){return(ps=(0,y.Z)(function*(T,p){const v=$a(T,!1).get(p),R=yield new ga(v).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function yl(T,p){const v=$a(T,!0).delete(p);return new ga(v).toPromise()}const ba=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,y.Z)(function*(){return v.db||(v.db=yield $u()),v.db})()}_withRetries(v){var R=this;return(0,y.Z)(function*(){let te=0;for(;;)try{const pe=yield R._openDb();return yield v(pe)}catch(pe){if(te++>3)throw pe;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,y.Z)(function*(){return Zn()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,y.Z)(function*(){v.receiver=Re._getInstance(function _n(){return Zn()?self:null}()),v.receiver._subscribe("keyChanged",function(){var R=(0,y.Z)(function*(te,pe){return{keyProcessed:(yield v._poll()).includes(pe.key)}});return function(te,pe){return R.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var R=(0,y.Z)(function*(te,pe){return["keyChanged"]});return function(te,pe){return R.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,y.Z)(function*(){var R,te;if(v.activeServiceWorker=yield function ln(){return gn.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new $e(v.activeServiceWorker);const pe=yield v.sender._send("ping",{},800);!pe||(null===(R=pe[0])||void 0===R?void 0:R.fulfilled)&&(null===(te=pe[0])||void 0===te?void 0:te.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var R=this;return(0,y.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function na(){var T;return(null===(T=null==navigator?void 0:navigator.serviceWorker)||void 0===T?void 0:T.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:v},R.serviceWorkerReceiverAvailable?800:50)}catch(te){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const v=yield $u();return yield Ga(v,Xa,"1"),yield yl(v,Xa),!0}catch(v){}return!1})()}_withPendingWrite(v){var R=this;return(0,y.Z)(function*(){R.pendingWrites++;try{yield v()}finally{R.pendingWrites--}})()}_set(v,R){var te=this;return(0,y.Z)(function*(){return te._withPendingWrite((0,y.Z)(function*(){return yield te._withRetries(pe=>Ga(pe,v,R)),te.localCache[v]=R,te.notifyServiceWorker(v)}))})()}_get(v){var R=this;return(0,y.Z)(function*(){const te=yield R._withRetries(pe=>function rc(T,p){return ps.apply(this,arguments)}(pe,v));return R.localCache[v]=te,te})()}_remove(v){var R=this;return(0,y.Z)(function*(){return R._withPendingWrite((0,y.Z)(function*(){return yield R._withRetries(te=>yl(te,v)),delete R.localCache[v],R.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,y.Z)(function*(){const R=yield v._withRetries(ut=>{const xt=$a(ut,!1).getAll();return new ga(xt).toPromise()});if(!R)return[];if(0!==v.pendingWrites)return[];const te=[],pe=new Set;for(const{fbase_key:ut,value:xt}of R)pe.add(ut),JSON.stringify(v.localCache[ut])!==JSON.stringify(xt)&&(v.notifyListeners(ut,xt),te.push(ut));for(const ut of Object.keys(v.localCache))v.localCache[ut]&&!pe.has(ut)&&(v.notifyListeners(ut,null),te.push(ut));return te})()}notifyListeners(v,R){this.localCache[v]=R;const te=this.listeners[v];if(te)for(const pe of Array.from(te))pe(R)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function os(T,p){return _e(T,"POST","/v2/accounts/mfaSignIn:start",Je(T,p))}const Yi=1e12;class In{constructor(p){this.auth=p,this.counter=Yi,this._widgets=new Map}render(p,v){const R=this.counter;return this._widgets.set(R,new Gu(p,this.auth.name,v||{})),this.counter++,R}reset(p){var v;const R=p||Yi;null===(v=this._widgets.get(R))||void 0===v||v.delete(),this._widgets.delete(R)}getResponse(p){var v;return(null===(v=this._widgets.get(p||Yi))||void 0===v?void 0:v.getResponse())||""}execute(p){var v=this;return(0,y.Z)(function*(){var R;return null===(R=v._widgets.get(p||Yi))||void 0===R||R.execute(),""})()}}class Gu{constructor(p,v,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const te="string"==typeof p?document.getElementById(p):p;tt(te,"argument-error",{appName:v}),this.container=te,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ia(T){const p=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<T;R++)p.push(v.charAt(Math.floor(Math.random()*v.length)));return p.join("")}(50);const{callback:p,"expired-callback":v}=this.params;if(p)try{p(this.responseToken)}catch(R){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(R){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cs=Ii("rcb"),La=new kn(3e4,6e4);class Ru{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=en().grecaptcha)||void 0===p?void 0:p.render)}load(p,v=""){return tt(function ya(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(v),p,"argument-error"),this.shouldResolveImmediately(v)&&sn(en().grecaptcha)?Promise.resolve(en().grecaptcha):new Promise((R,te)=>{const pe=en().setTimeout(()=>{te(Me(p,"network-request-failed"))},La.get());en()[Cs]=()=>{en().clearTimeout(pe),delete en()[Cs];const xt=en().grecaptcha;if(!xt||!sn(xt))return void te(Me(p,"internal-error"));const fn=xt.render;xt.render=(Fn,Cr)=>{const Pr=fn(Fn,Cr);return this.counter++,Pr},this.hostLanguage=v,R(xt)},wr(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Cs,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(pe),te(Me(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var v;return!!(null===(v=en().grecaptcha)||void 0===v?void 0:v.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mu{load(p){return(0,y.Z)(function*(){return new In(p)})()}clearedOneInstance(){}}const _l="recaptcha",Do={theme:"light",type:"image"};class Wu{constructor(p,v=Object.assign({},Do),R){this.parameters=v,this.type=_l,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(R),this.isInvisible="invisible"===this.parameters.size,tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const te="string"==typeof p?document.getElementById(p):p;tt(te,this.auth,"argument-error"),this.container=te,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mu:new Ru,this.validateStartingState()}verify(){var p=this;return(0,y.Z)(function*(){p.assertNotDestroyed();const v=yield p.render(),R=p.getAssertedRecaptcha();return R.getResponse(v)||new Promise(pe=>{const ut=xt=>{!xt||(p.tokenChangeListeners.delete(ut),pe(xt))};p.tokenChangeListeners.add(ut),p.isInvisible&&R.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return v=>{if(this.tokenChangeListeners.forEach(R=>R(v)),"function"==typeof p)p(v);else if("string"==typeof p){const R=en()[p];"function"==typeof R&&R(v)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,y.Z)(function*(){if(yield p.init(),!p.widgetId){let v=p.container;if(!p.isInvisible){const R=document.createElement("div");v.appendChild(R),v=R}p.widgetId=p.getAssertedRecaptcha().render(v,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,y.Z)(function*(){tt(Ht()&&!Zn(),p.auth,"internal-error"),yield function vl(){let T=null;return new Promise(p=>{"complete"!==document.readyState?(T=()=>p(),window.addEventListener("load",T)):p()}).catch(p=>{throw T&&window.removeEventListener("load",T),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const v=yield function Et(T){return gt.apply(this,arguments)}(p.auth);tt(v,p.auth,"internal-error"),p.parameters.sitekey=v})()}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Va{constructor(p,v){this.verificationId=p,this.onConfirmation=v}confirm(p){const v=Hs._fromVerification(this.verificationId,p);return this.onConfirmation(v)}}function Ps(T,p,v){return nu.apply(this,arguments)}function nu(){return(nu=(0,y.Z)(function*(T,p,v){const R=wn(T),te=yield _a(R,p,(0,B.m9)(v));return new Va(te,pe=>O(R,pe))})).apply(this,arguments)}function vt(T,p,v){return za.apply(this,arguments)}function za(){return(za=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);yield _s(!1,R,"phone");const te=yield _a(R.auth,p,(0,B.m9)(v));return new Va(te,pe=>Ne(R,pe))})).apply(this,arguments)}function So(T,p,v){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T),te=yield _a(R.auth,p,(0,B.m9)(v));return new Va(te,pe=>gi(R,pe))})).apply(this,arguments)}function _a(T,p,v){return sa.apply(this,arguments)}function sa(){return(sa=(0,y.Z)(function*(T,p,v){var R;const te=yield v.verify();try{let pe;if(tt("string"==typeof te,T,"argument-error"),tt(v.type===_l,T,"argument-error"),pe="string"==typeof p?{phoneNumber:p}:p,"session"in pe){const ut=pe.session;if("phoneNumber"in pe)return tt("enroll"===ut.type,T,"internal-error"),(yield Yo(T,{idToken:ut.credential,phoneEnrollmentInfo:{phoneNumber:pe.phoneNumber,recaptchaToken:te}})).phoneSessionInfo.sessionInfo;{tt("signin"===ut.type,T,"internal-error");const xt=(null===(R=pe.multiFactorHint)||void 0===R?void 0:R.uid)||pe.multiFactorUid;return tt(xt,T,"missing-multi-factor-info"),(yield os(T,{mfaPendingCredential:ut.credential,mfaEnrollmentId:xt,phoneSignInInfo:{recaptchaToken:te}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ut}=yield Ho(T,{phoneNumber:pe.phoneNumber,recaptchaToken:te});return ut}}finally{v._reset()}})).apply(this,arguments)}function ic(T,p){return zo.apply(this,arguments)}function zo(){return(zo=(0,y.Z)(function*(T,p){yield Fi((0,B.m9)(T),p)})).apply(this,arguments)}let El=(()=>{class T{constructor(v){this.providerId=T.PROVIDER_ID,this.auth=wn(v)}verifyPhoneNumber(v,R){return _a(this.auth,v,(0,B.m9)(R))}static credential(v,R){return Hs._fromVerification(v,R)}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:R,temporaryProof:te}=v;return R&&te?Hs._fromTokenResponse(R,te):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function oa(T,p){return p?fi(p):(tt(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class xu extends kt{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ss(p,this._buildIdpRequest())}_linkToIdToken(p,v){return Ss(p,this._buildIdpRequest(v))}_getReauthenticationResolver(p){return Ss(p,this._buildIdpRequest())}_buildIdpRequest(p){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(v.idToken=p),v}}function Da(T){return K(T.auth,new xu(T),T.bypassAuthState)}function to(T){const{auth:p,user:v}=T;return tt(v,p,"internal-error"),vs(v,new xu(T),T.bypassAuthState)}function ru(T){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,y.Z)(function*(T){const{auth:p,user:v}=T;return tt(v,p,"internal-error"),Fi(v,new xu(T),T.bypassAuthState)})).apply(this,arguments)}class il{constructor(p,v,R,te,pe=!1){this.auth=p,this.resolver=R,this.user=te,this.bypassAuthState=pe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var p=this;return new Promise(function(){var v=(0,y.Z)(function*(R,te){p.pendingPromise={resolve:R,reject:te};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(pe){p.reject(pe)}});return function(R,te){return v.apply(this,arguments)}}())}onAuthEvent(p){var v=this;return(0,y.Z)(function*(){const{urlResponse:R,sessionId:te,postBody:pe,tenantId:ut,error:xt,type:fn}=p;if(xt)return void v.reject(xt);const Fn={auth:v.auth,requestUri:R,sessionId:te,tenantId:ut||void 0,postBody:pe||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(fn)(Fn))}catch(Cr){v.reject(Cr)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Da;case"linkViaPopup":case"linkViaRedirect":return ru;case"reauthViaPopup":case"reauthViaRedirect":return to;default:Ee(this.auth,"internal-error")}}resolve(p){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ao=new kn(2e3,1e4);function Sa(T,p,v){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,y.Z)(function*(T,p,v){const R=wn(T);_t(T,p,lo);const te=oa(R,v);return new zs(R,"signInViaPopup",p,te).executeNotNull()})).apply(this,arguments)}function Aa(T,p,v){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);_t(R.auth,p,lo);const te=oa(R.auth,v);return new zs(R.auth,"reauthViaPopup",p,te,R).executeNotNull()})).apply(this,arguments)}function iu(T,p,v){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);_t(R.auth,p,lo);const te=oa(R.auth,v);return new zs(R.auth,"linkViaPopup",p,te,R).executeNotNull()})).apply(this,arguments)}let zs=(()=>{class T extends il{constructor(v,R,te,pe,ut){super(v,R,pe,ut),this.provider=te,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var v=this;return(0,y.Z)(function*(){const R=yield v.execute();return tt(R,v.auth,"internal-error"),R})()}onExecution(){var v=this;return(0,y.Z)(function*(){It(1===v.filter.length,"Popup operations only handle one event");const R=We();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],R),v.authWindow.associatedEvent=R,v.resolver._originValidation(v.auth).catch(te=>{v.reject(te)}),v.resolver._isIframeWebStorageSupported(v.auth,te=>{te||v.reject(Me(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const v=()=>{var R,te;this.pollId=(null===(te=null===(R=this.authWindow)||void 0===R?void 0:R.window)||void 0===te?void 0:te.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,Ao.get())};v()}}return T.currentPopupAction=null,T})();const wu=new Map;class Ku extends il{constructor(p,v,R=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,R),this.eventId=null}execute(){var p=()=>super.execute,v=this;return(0,y.Z)(function*(){let R=wu.get(v.auth._key());if(!R){try{const pe=(yield function qu(T,p){return Zu.apply(this,arguments)}(v.resolver,v.auth))?yield p().call(v):null;R=()=>Promise.resolve(pe)}catch(te){R=()=>Promise.reject(te)}wu.set(v.auth._key(),R)}return v.bypassAuthState||wu.set(v.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(p){var v=()=>super.onAuthEvent,R=this;return(0,y.Z)(function*(){if("signInViaRedirect"===p.type)return v().call(R,p);if("unknown"!==p.type){if(p.eventId){const te=yield R.auth._redirectUserForId(p.eventId);if(te)return R.user=te,v().call(R,p);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Zu(){return(Zu=(0,y.Z)(function*(T,p){const v=su(p),R=Il(T);if(!(yield R._isAvailable()))return!1;const te="true"===(yield R._get(v));return yield R._remove(v),te})).apply(this,arguments)}function Pu(T,p){return sl.apply(this,arguments)}function sl(){return(sl=(0,y.Z)(function*(T,p){return Il(T)._set(su(p),"true")})).apply(this,arguments)}function Cl(){wu.clear()}function Yu(T,p){wu.set(T._key(),p)}function Il(T){return fi(T._redirectPersistence)}function su(T){return Gr("pendingRedirect",T.config.apiKey,T.name)}function Nu(T,p,v){return function q(T,p,v){return E.apply(this,arguments)}(T,p,v)}function E(){return(E=(0,y.Z)(function*(T,p,v){const R=wn(T);_t(T,p,lo),yield R._initializationPromise;const te=oa(R,v);return yield Pu(te,R),te._openRedirect(R,p,"signInViaRedirect")})).apply(this,arguments)}function C(T,p,v){return function k(T,p,v){return re.apply(this,arguments)}(T,p,v)}function re(){return(re=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);_t(R.auth,p,lo),yield R.auth._initializationPromise;const te=oa(R.auth,v);yield Pu(te,R.auth);const pe=yield Hn(R);return te._openRedirect(R.auth,p,"reauthViaRedirect",pe)})).apply(this,arguments)}function ye(T,p,v){return function Le(T,p,v){return je.apply(this,arguments)}(T,p,v)}function je(){return(je=(0,y.Z)(function*(T,p,v){const R=(0,B.m9)(T);_t(R.auth,p,lo),yield R.auth._initializationPromise;const te=oa(R.auth,v);yield _s(!1,R,p.providerId),yield Pu(te,R.auth);const pe=yield Hn(R);return te._openRedirect(R.auth,p,"linkViaRedirect",pe)})).apply(this,arguments)}function et(T,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,y.Z)(function*(T,p){return yield wn(T)._initializationPromise,Sn(T,p,!1)})).apply(this,arguments)}function Sn(T,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,y.Z)(function*(T,p,v=!1){const R=wn(T),te=oa(R,p),ut=yield new Ku(R,te,v).execute();return ut&&!v&&(delete ut.user._redirectEventId,yield R._persistUserIfCurrent(ut.user),yield R._setRedirectUser(null,p)),ut})).apply(this,arguments)}function Hn(T){return ei.apply(this,arguments)}function ei(){return(ei=(0,y.Z)(function*(T){const p=We(`${T.uid}:::`);return T._redirectEventId=p,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),p})).apply(this,arguments)}class qn{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let v=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(p,R)&&(v=!0,this.sendToConsumer(p,R),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ti(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xi(T);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=p,v=!0)),v}sendToConsumer(p,v){var R;if(p.error&&!Xi(p)){const te=(null===(R=p.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";v.onError(Me(this.auth,te))}else v.onAuthEvent(p)}isEventForConsumer(p,v){const R=null===v.eventId||!!p.eventId&&p.eventId===v.eventId;return v.filter.includes(p.type)&&R}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jr(p))}saveEventToCache(p){this.cachedEventUids.add(Jr(p)),this.lastProcessedEventTime=Date.now()}}function Jr(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(p=>p).join("-")}function Xi({type:T,error:p}){return"unknown"===T&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ws(T){return Us.apply(this,arguments)}function Us(){return(Us=(0,y.Z)(function*(T,p={}){return _e(T,"GET","/v1/projects",p)})).apply(this,arguments)}const Is=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ra=/^https?/;function mi(){return(mi=(0,y.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:p}=yield Ws(T);for(const v of p)try{if(no(v))return}catch(R){}Ee(T,"unauthorized-domain")})).apply(this,arguments)}function no(T){const p=On(),{protocol:v,hostname:R}=new URL(p);if(T.startsWith("chrome-extension://")){const ut=new URL(T);return""===ut.hostname&&""===R?"chrome-extension:"===v&&T.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===v&&ut.hostname===R}if(!Ra.test(v))return!1;if(Is.test(T))return R===T;const te=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(R)}const ro=new kn(3e4,6e4);function Ns(){const T=en().___jsl;if(null==T?void 0:T.H)for(const p of Object.keys(T.H))if(T.H[p].r=T.H[p].r||[],T.H[p].L=T.H[p].L||[],T.H[p].r=[...T.H[p].L],T.CP)for(let v=0;v<T.CP.length;v++)T.CP[v]=null}let Lo=null;function Vo(T){return Lo=Lo||function Fo(T){return new Promise((p,v)=>{var R,te,pe;function ut(){Ns(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Ns(),v(Me(T,"network-request-failed"))},timeout:ro.get()})}if(null===(te=null===(R=en().gapi)||void 0===R?void 0:R.iframes)||void 0===te?void 0:te.Iframe)p(gapi.iframes.getContext());else{if(!(null===(pe=en().gapi)||void 0===pe?void 0:pe.load)){const xt=Ii("iframefcb");return en()[xt]=()=>{gapi.load?ut():v(Me(T,"network-request-failed"))},wr(`https://apis.google.com/js/api.js?onload=${xt}`).catch(fn=>v(fn))}ut()}}).catch(p=>{throw Lo=null,p})}(T),Lo}const va=new kn(5e3,15e3),vr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},di=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function as(T){const p=T.config;tt(p.authDomain,T,"auth-domain-config-required");const v=p.emulator?gr(p,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,R={apiKey:p.apiKey,appName:T.name,v:X.SDK_VERSION},te=di.get(T.config.apiHost);te&&(R.eid=te);const pe=T._getFrameworks();return pe.length&&(R.fw=pe.join(",")),`${v}?${(0,B.xO)(R).slice(1)}`}function Ks(){return Ks=(0,y.Z)(function*(T){const p=yield Vo(T),v=en().gapi;return tt(v,T,"internal-error"),p.open({where:document.body,url:as(T),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vr,dontclear:!0},R=>new Promise(function(){var te=(0,y.Z)(function*(pe,ut){yield R.restyle({setHideOnLeave:!1});const xt=Me(T,"network-request-failed"),fn=en().setTimeout(()=>{ut(xt)},va.get());function Fn(){en().clearTimeout(fn),pe(R)}R.ping(Fn).then(Fn,()=>{ut(xt)})});return function(pe,ut){return te.apply(this,arguments)}}()))}),Ks.apply(this,arguments)}const D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ct{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}const Xr=encodeURIComponent("fac");function xr(T,p,v,R,te,pe){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,y.Z)(function*(T,p,v,R,te,pe){tt(T.config.authDomain,T,"auth-domain-config-required"),tt(T.config.apiKey,T,"invalid-api-key");const ut={apiKey:T.config.apiKey,appName:T.name,authType:v,redirectUrl:R,v:X.SDK_VERSION,eventId:te};if(p instanceof lo){p.setDefaultLanguage(T.languageCode),ut.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(ut.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Cr,Pr]of Object.entries(pe||{}))ut[Cr]=Pr}if(p instanceof Wr){const Cr=p.getScopes().filter(Pr=>""!==Pr);Cr.length>0&&(ut.scopes=Cr.join(","))}T.tenantId&&(ut.tid=T.tenantId);const xt=ut;for(const Cr of Object.keys(xt))void 0===xt[Cr]&&delete xt[Cr];const fn=yield T._getAppCheckToken(),Fn=fn?`#${Xr}=${encodeURIComponent(fn)}`:"";return`${fo(T)}?${(0,B.xO)(xt).slice(1)}${Fn}`})).apply(this,arguments)}function fo({config:T}){return T.emulator?gr(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}const Ts="webStorageSupport",Gi=class Cu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y,this._completeRedirectFn=Sn,this._overrideRedirectResult=Yu}_openPopup(p,v,R,te){var pe=this;return(0,y.Z)(function*(){var ut;It(null===(ut=pe.eventManagers[p._key()])||void 0===ut?void 0:ut.manager,"_initialize() not called before _openPopup()");const xt=yield xr(p,v,R,On(),te);return function Ot(T,p,v,R=500,te=600){const pe=Math.max((window.screen.availHeight-te)/2,0).toString(),ut=Math.max((window.screen.availWidth-R)/2,0).toString();let xt="";const fn=Object.assign(Object.assign({},D),{width:R.toString(),height:te.toString(),top:pe,left:ut}),Fn=(0,B.z$)().toLowerCase();v&&(xt=G(Fn)?"_blank":v),he(Fn)&&(p=p||"http://localhost",fn.scrollbars="yes");const Cr=Object.entries(fn).reduce((Li,[aa,al])=>`${Li}${aa}=${al},`,"");if(function rn(T=(0,B.z$)()){var p;return Wt(T)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Fn)&&"_self"!==xt)return function cn(T,p){const v=document.createElement("a");v.href=T,v.target=p;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(R)}(p||"",xt),new ct(null);const Pr=window.open(p||"",xt,Cr);tt(Pr,T,"popup-blocked");try{Pr.focus()}catch(Li){}return new ct(Pr)}(p,xt,We())})()}_openRedirect(p,v,R,te){var pe=this;return(0,y.Z)(function*(){return yield pe._originValidation(p),function _r(T){en().location.href=T}(yield xr(p,v,R,On(),te)),new Promise(()=>{})})()}_initialize(p){const v=p._key();if(this.eventManagers[v]){const{manager:te,promise:pe}=this.eventManagers[v];return te?Promise.resolve(te):(It(pe,"If manager is not set, promise should be"),pe)}const R=this.initAndGetManager(p);return this.eventManagers[v]={promise:R},R.catch(()=>{delete this.eventManagers[v]}),R}initAndGetManager(p){var v=this;return(0,y.Z)(function*(){const R=yield function Ea(T){return Ks.apply(this,arguments)}(p),te=new qn(p);return R.register("authEvent",pe=>(tt(null==pe?void 0:pe.authEvent,p,"invalid-auth-event"),{status:te.onEvent(pe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[p._key()]={manager:te},v.iframes[p._key()]=R,te})()}_isIframeWebStorageSupported(p,v){this.iframes[p._key()].send(Ts,{type:Ts},te=>{var pe;const ut=null===(pe=null==te?void 0:te[0])||void 0===pe?void 0:pe[Ts];void 0!==ut&&v(!!ut),Ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const v=p._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Di(T){return mi.apply(this,arguments)}(p)),this.originValidationPromises[v]}get _shouldInitProactively(){return er()||ge()||Wt()}};class Ba extends class Mo{constructor(p){this.factorId=p}_process(p,v,R){switch(v.type){case"enroll":return this._finalizeEnroll(p,v.credential,R);case"signin":return this._finalizeSignIn(p,v.credential);default:return Vt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ba(p)}_finalizeEnroll(p,v,R){return function yu(T,p){return _e(T,"POST","/v2/accounts/mfaEnrollment:finalize",Je(T,p))}(p,{idToken:v,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,v){return function dr(T,p){return _e(T,"POST","/v2/accounts/mfaSignIn:finalize",Je(T,p))}(p,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ol=(()=>{class T{constructor(){}static assertion(v){return Ba._fromCredential(v)}}return T.FACTOR_ID="phone",T})();var Qi="@firebase/auth";class xc{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var v=this;return(0,y.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const v=this.auth.onIdTokenChanged(R=>{p((null==R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,v),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const v=this.internalListeners.get(p);!v||(this.internalListeners.delete(p),v(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function Tl(T){(0,X._registerComponent)(new Ke.wA("auth",(p,{options:v})=>{const R=p.getProvider("app").getImmediate(),te=p.getProvider("heartbeat"),pe=p.getProvider("app-check-internal"),{apiKey:ut,authDomain:xt}=R.options;tt(ut&&!ut.includes(":"),"invalid-api-key",{appName:R.name});const fn={apiKey:ut,authDomain:xt,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pi(T)},Fn=new Dr(R,te,pe,fn);return function Ar(T,p){const v=(null==p?void 0:p.persistence)||[],R=(Array.isArray(v)?v:[v]).map(fi);(null==p?void 0:p.errorMap)&&T._updateErrorMap(p.errorMap),T._initializeWithPersistence(R,null==p?void 0:p.popupRedirectResolver)}(Fn,v),Fn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,v,R)=>{p.getProvider("auth-internal").initialize()})),(0,X._registerComponent)(new Ke.wA("auth-internal",p=>{const v=wn(p.getProvider("auth").getImmediate());return new xc(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,X.registerVersion)(Qi,"0.23.2",function wa(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,X.registerVersion)(Qi,"0.23.2","esm2017")}("Browser")},2090:(pn,dt,$)=>{$.d(dt,{$s:()=>fi,BH:()=>ot,DV:()=>Lr,G6:()=>gr,GJ:()=>ir,L:()=>lt,LL:()=>De,P0:()=>Xt,Pz:()=>Me,Sg:()=>_t,UG:()=>Vt,UI:()=>nr,US:()=>Ke,Wl:()=>tn,Yr:()=>kn,ZB:()=>nt,ZR:()=>_e,aH:()=>Ee,b$:()=>Ht,cI:()=>pt,dS:()=>Yt,eu:()=>un,g5:()=>X,gK:()=>Wn,gQ:()=>Ge,h$:()=>ze,hl:()=>tr,hu:()=>B,jU:()=>It,m9:()=>Gr,ne:()=>at,p$:()=>Ce,pd:()=>He,r3:()=>Ln,ru:()=>On,tV:()=>be,uI:()=>tt,ug:()=>Or,vZ:()=>Pn,w1:()=>on,w9:()=>mr,xO:()=>ts,xb:()=>En,z$:()=>ft,zI:()=>it,zd:()=>Pt});const B=function(Pe,Ae){if(!Pe)throw X(Ae)},X=function(Pe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Pe)},ie=function(Pe){const Ae=[];let he=0;for(let ge=0;ge<Pe.length;ge++){let G=Pe.charCodeAt(ge);G<128?Ae[he++]=G:G<2048?(Ae[he++]=G>>6|192,Ae[he++]=63&G|128):55296==(64512&G)&&ge+1<Pe.length&&56320==(64512&Pe.charCodeAt(ge+1))?(G=65536+((1023&G)<<10)+(1023&Pe.charCodeAt(++ge)),Ae[he++]=G>>18|240,Ae[he++]=G>>12&63|128,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128):(Ae[he++]=G>>12|224,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128)}return Ae},Ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Pe,Ae){if(!Array.isArray(Pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const he=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let G=0;G<Pe.length;G+=3){const ne=Pe[G],se=G+1<Pe.length,Se=se?Pe[G+1]:0,ht=G+2<Pe.length,Wt=ht?Pe[G+2]:0;let $n=(15&Se)<<2|Wt>>6,er=63&Wt;ht||(er=64,se||($n=64)),ge.push(he[ne>>2],he[(3&ne)<<4|Se>>4],he[$n],he[er])}return ge.join("")},encodeString(Pe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Pe):this.encodeByteArray(ie(Pe),Ae)},decodeString(Pe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Pe):function(Pe){const Ae=[];let he=0,ge=0;for(;he<Pe.length;){const G=Pe[he++];if(G<128)Ae[ge++]=String.fromCharCode(G);else if(G>191&&G<224){const ne=Pe[he++];Ae[ge++]=String.fromCharCode((31&G)<<6|63&ne)}else if(G>239&&G<365){const ht=((7&G)<<18|(63&Pe[he++])<<12|(63&Pe[he++])<<6|63&Pe[he++])-65536;Ae[ge++]=String.fromCharCode(55296+(ht>>10)),Ae[ge++]=String.fromCharCode(56320+(1023&ht))}else{const ne=Pe[he++],se=Pe[he++];Ae[ge++]=String.fromCharCode((15&G)<<12|(63&ne)<<6|63&se)}}return Ae.join("")}(this.decodeStringToByteArray(Pe,Ae))},decodeStringToByteArray(Pe,Ae){this.init_();const he=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let G=0;G<Pe.length;){const ne=he[Pe.charAt(G++)],Se=G<Pe.length?he[Pe.charAt(G)]:0;++G;const Wt=G<Pe.length?he[Pe.charAt(G)]:64;++G;const rn=G<Pe.length?he[Pe.charAt(G)]:64;if(++G,null==ne||null==Se||null==Wt||null==rn)throw new Xe;ge.push(ne<<2|Se>>4),64!==Wt&&(ge.push(Se<<4&240|Wt>>2),64!==rn&&ge.push(Wt<<6&192|rn))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Pe=0;Pe<this.ENCODED_VALS.length;Pe++)this.byteToCharMap_[Pe]=this.ENCODED_VALS.charAt(Pe),this.charToByteMap_[this.byteToCharMap_[Pe]]=Pe,this.byteToCharMapWebSafe_[Pe]=this.ENCODED_VALS_WEBSAFE.charAt(Pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Pe]]=Pe,Pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Pe)]=Pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Pe)]=Pe)}}};class Xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(Pe){const Ae=ie(Pe);return Ke.encodeByteArray(Ae,!0)},lt=function(Pe){return ze(Pe).replace(/\./g,"")},be=function(Pe){try{return Ke.decodeString(Pe,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function Ce(Pe){return nt(void 0,Pe)}function nt(Pe,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Pe&&(Pe={});break;case Array:Pe=[];break;default:return Ae}for(const he in Ae)!Ae.hasOwnProperty(he)||!Lt(he)||(Pe[he]=nt(Pe[he],Ae[he]));return Pe}function Lt(Pe){return"__proto__"!==Pe}const Nt=()=>{try{return function Mt(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Pe=process.env.__FIREBASE_DEFAULTS__;return Pe?JSON.parse(Pe):void 0})()||(()=>{if("undefined"==typeof document)return;let Pe;try{Pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(he){return}const Ae=Pe&&be(Pe[1]);return Ae&&JSON.parse(Ae)})()}catch(Pe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Pe}`)}},Xt=Pe=>{const Ae=(Pe=>{var Ae,he;return null===(he=null===(Ae=Nt())||void 0===Ae?void 0:Ae.emulatorHosts)||void 0===he?void 0:he[Pe]})(Pe);if(!Ae)return;const he=Ae.lastIndexOf(":");if(he<=0||he+1===Ae.length)throw new Error(`Invalid host ${Ae} with no separate hostname and port!`);const ge=parseInt(Ae.substring(he+1),10);return"["===Ae[0]?[Ae.substring(1,he-1),ge]:[Ae.substring(0,he),ge]},Ee=()=>{var Pe;return null===(Pe=Nt())||void 0===Pe?void 0:Pe.config},Me=Pe=>{var Ae;return null===(Ae=Nt())||void 0===Ae?void 0:Ae[`_${Pe}`]};class ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,he)=>{this.resolve=Ae,this.reject=he})}wrapCallback(Ae){return(he,ge)=>{he?this.reject(he):this.resolve(ge),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(he):Ae(he,ge))}}}function _t(Pe,Ae){if(Pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=Ae||"demo-project",G=Pe.iat||0,ne=Pe.sub||Pe.user_id;if(!ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:G,exp:G+3600,auth_time:G,sub:ne,user_id:ne,firebase:{sign_in_provider:"custom",identities:{}}},Pe);return[lt(JSON.stringify({alg:"none",type:"JWT"})),lt(JSON.stringify(se)),""].join(".")}function ft(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function Vt(){var Pe;const Ae=null===(Pe=Nt())||void 0===Pe?void 0:Pe.forceEnvironment;if("node"===Ae)return!0;if("browser"===Ae)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(he){return!1}}function It(){return"object"==typeof self&&self.self===self}function On(){const Pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Pe&&void 0!==Pe.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function on(){const Pe=ft();return Pe.indexOf("MSIE ")>=0||Pe.indexOf("Trident/")>=0}function kn(){return!1}function gr(){return!Vt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tr(){try{return"object"==typeof indexedDB}catch(Pe){return!1}}function un(){return new Promise((Pe,Ae)=>{try{let he=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(ge);G.onsuccess=()=>{G.result.close(),he||self.indexedDB.deleteDatabase(ge),Pe(!0)},G.onupgradeneeded=()=>{he=!1},G.onerror=()=>{var ne;Ae((null===(ne=G.error)||void 0===ne?void 0:ne.message)||"")}}catch(he){Ae(he)}})}function it(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class _e extends Error{constructor(Ae,he,ge){super(he),this.code=Ae,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor(Ae,he,ge){this.service=Ae,this.serviceName=he,this.errors=ge}create(Ae,...he){const ge=he[0]||{},G=`${this.service}/${Ae}`,ne=this.errors[Ae],se=ne?function ve(Pe,Ae){return Pe.replace(xe,(he,ge)=>{const G=Ae[ge];return null!=G?String(G):`<${ge}?>`})}(ne,ge):"Error";return new _e(G,`${this.serviceName}: ${se} (${G}).`,ge)}}const xe=/\{\$([^}]+)}/g;function pt(Pe){return JSON.parse(Pe)}function tn(Pe){return JSON.stringify(Pe)}const hn=function(Pe){let Ae={},he={},ge={},G="";try{const ne=Pe.split(".");Ae=pt(be(ne[0])||""),he=pt(be(ne[1])||""),G=ne[2],ge=he.d||{},delete he.d}catch(ne){}return{header:Ae,claims:he,data:ge,signature:G}},mr=function(Pe){const he=hn(Pe).claims;return!!he&&"object"==typeof he&&he.hasOwnProperty("iat")},ir=function(Pe){const Ae=hn(Pe).claims;return"object"==typeof Ae&&!0===Ae.admin};function Ln(Pe,Ae){return Object.prototype.hasOwnProperty.call(Pe,Ae)}function Lr(Pe,Ae){if(Object.prototype.hasOwnProperty.call(Pe,Ae))return Pe[Ae]}function En(Pe){for(const Ae in Pe)if(Object.prototype.hasOwnProperty.call(Pe,Ae))return!1;return!0}function nr(Pe,Ae,he){const ge={};for(const G in Pe)Object.prototype.hasOwnProperty.call(Pe,G)&&(ge[G]=Ae.call(he,Pe[G],G,Pe));return ge}function Pn(Pe,Ae){if(Pe===Ae)return!0;const he=Object.keys(Pe),ge=Object.keys(Ae);for(const G of he){if(!ge.includes(G))return!1;const ne=Pe[G],se=Ae[G];if(Mn(ne)&&Mn(se)){if(!Pn(ne,se))return!1}else if(ne!==se)return!1}for(const G of ge)if(!he.includes(G))return!1;return!0}function Mn(Pe){return null!==Pe&&"object"==typeof Pe}function ts(Pe){const Ae=[];for(const[he,ge]of Object.entries(Pe))Array.isArray(ge)?ge.forEach(G=>{Ae.push(encodeURIComponent(he)+"="+encodeURIComponent(G))}):Ae.push(encodeURIComponent(he)+"="+encodeURIComponent(ge));return Ae.length?"&"+Ae.join("&"):""}function Pt(Pe){const Ae={};return Pe.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[G,ne]=ge.split("=");Ae[decodeURIComponent(G)]=decodeURIComponent(ne)}}),Ae}function He(Pe){const Ae=Pe.indexOf("?");if(!Ae)return"";const he=Pe.indexOf("#",Ae);return Pe.substring(Ae,he>0?he:void 0)}class Ge{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ae=1;Ae<this.blockSize;++Ae)this.pad_[Ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ae,he){he||(he=0);const ge=this.W_;if("string"==typeof Ae)for(let rn=0;rn<16;rn++)ge[rn]=Ae.charCodeAt(he)<<24|Ae.charCodeAt(he+1)<<16|Ae.charCodeAt(he+2)<<8|Ae.charCodeAt(he+3),he+=4;else for(let rn=0;rn<16;rn++)ge[rn]=Ae[he]<<24|Ae[he+1]<<16|Ae[he+2]<<8|Ae[he+3],he+=4;for(let rn=16;rn<80;rn++){const $n=ge[rn-3]^ge[rn-8]^ge[rn-14]^ge[rn-16];ge[rn]=4294967295&($n<<1|$n>>>31)}let Wt,yn,G=this.chain_[0],ne=this.chain_[1],se=this.chain_[2],Se=this.chain_[3],ht=this.chain_[4];for(let rn=0;rn<80;rn++){rn<40?rn<20?(Wt=Se^ne&(se^Se),yn=1518500249):(Wt=ne^se^Se,yn=1859775393):rn<60?(Wt=ne&se|Se&(ne|se),yn=2400959708):(Wt=ne^se^Se,yn=3395469782);const $n=(G<<5|G>>>27)+Wt+ht+yn+ge[rn]&4294967295;ht=Se,Se=se,se=4294967295&(ne<<30|ne>>>2),ne=G,G=$n}this.chain_[0]=this.chain_[0]+G&4294967295,this.chain_[1]=this.chain_[1]+ne&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Se&4294967295,this.chain_[4]=this.chain_[4]+ht&4294967295}update(Ae,he){if(null==Ae)return;void 0===he&&(he=Ae.length);const ge=he-this.blockSize;let G=0;const ne=this.buf_;let se=this.inbuf_;for(;G<he;){if(0===se)for(;G<=ge;)this.compress_(Ae,G),G+=this.blockSize;if("string"==typeof Ae){for(;G<he;)if(ne[se]=Ae.charCodeAt(G),++se,++G,se===this.blockSize){this.compress_(ne),se=0;break}}else for(;G<he;)if(ne[se]=Ae[G],++se,++G,se===this.blockSize){this.compress_(ne),se=0;break}}this.inbuf_=se,this.total_+=he}digest(){const Ae=[];let he=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let G=this.blockSize-1;G>=56;G--)this.buf_[G]=255&he,he/=256;this.compress_(this.buf_);let ge=0;for(let G=0;G<5;G++)for(let ne=24;ne>=0;ne-=8)Ae[ge]=this.chain_[G]>>ne&255,++ge;return Ae}}function at(Pe,Ae){const he=new St(Pe,Ae);return he.subscribe.bind(he)}class St{constructor(Ae,he){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=he,this.task.then(()=>{Ae(this)}).catch(ge=>{this.error(ge)})}next(Ae){this.forEachObserver(he=>{he.next(Ae)})}error(Ae){this.forEachObserver(he=>{he.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,he,ge){let G;if(void 0===Ae&&void 0===he&&void 0===ge)throw new Error("Missing Observer.");G=function nn(Pe,Ae){if("object"!=typeof Pe||null===Pe)return!1;for(const he of Ae)if(he in Pe&&"function"==typeof Pe[he])return!0;return!1}(Ae,["next","error","complete"])?Ae:{next:Ae,error:he,complete:ge},void 0===G.next&&(G.next=Nr),void 0===G.error&&(G.error=Nr),void 0===G.complete&&(G.complete=Nr);const ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(se){}}),this.observers.push(G),ne}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let he=0;he<this.observers.length;he++)this.sendOne(he,Ae)}sendOne(Ae,he){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{he(this.observers[Ae])}catch(ge){"undefined"!=typeof console&&console.error&&console.error(ge)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nr(){}function Wn(Pe,Ae){return`${Pe} failed: ${Ae} argument `}const Yt=function(Pe){const Ae=[];let he=0;for(let ge=0;ge<Pe.length;ge++){let G=Pe.charCodeAt(ge);if(G>=55296&&G<=56319){const ne=G-55296;ge++,B(ge<Pe.length,"Surrogate pair missing trail surrogate."),G=65536+(ne<<10)+(Pe.charCodeAt(ge)-56320)}G<128?Ae[he++]=G:G<2048?(Ae[he++]=G>>6|192,Ae[he++]=63&G|128):G<65536?(Ae[he++]=G>>12|224,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128):(Ae[he++]=G>>18|240,Ae[he++]=G>>12&63|128,Ae[he++]=G>>6&63|128,Ae[he++]=63&G|128)}return Ae},Or=function(Pe){let Ae=0;for(let he=0;he<Pe.length;he++){const ge=Pe.charCodeAt(he);ge<128?Ae++:ge<2048?Ae+=2:ge>=55296&&ge<=56319?(Ae+=4,he++):Ae+=3}return Ae};function fi(Pe,Ae=1e3,he=2){const ge=Ae*Math.pow(he,Pe),G=Math.round(.5*ge*(Math.random()-.5)*2);return Math.min(144e5,ge+G)}function Gr(Pe){return Pe&&Pe._delegate?Pe._delegate:Pe}},5089:(pn,dt,$)=>{$.d(dt,{e:()=>Ue});var y=$(2340),B=$(5e3),X=$(520),ie=$(2729);let Ue=(()=>{class Ke{constructor(ze,lt){this.http=ze,this.router=lt,this.logoutloading=!1}login(ze){return this.http.post(`${y.N.apiUrl}login_teacher`,ze)}logout(){this.logoutloading=!0,this.http.post(`${y.N.apiUrl}logout`,{}).subscribe(ze=>{localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/auth/login"]),this.logoutloading=!1})}}return Ke.\u0275fac=function(ze){return new(ze||Ke)(B.LFG(X.eN),B.LFG(ie.F0))},Ke.\u0275prov=B.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})()},4466:(pn,dt,$)=>{$.d(dt,{m:()=>ze});var y=$(9808),B=$(2729),X=$(2382),ie=$(520),Ue=$(2290),Ke=$(377),Xe=$(5e3);let ze=(()=>{class lt{}return lt.\u0275fac=function(Ce){return new(Ce||lt)},lt.\u0275mod=Xe.oAB({type:lt}),lt.\u0275inj=Xe.cJS({providers:[y.uU],imports:[[Ke.TE,y.ez,B.Bz,X.UX,X.u5,ie.JF,Ue.Rh.forRoot()],Ke.TE,X.UX,X.u5,ie.JF,Ue.Rh]}),lt})()},2340:(pn,dt,$)=>{$.d(dt,{N:()=>y});const y={production:!0,apiUrl:"https://drastiiq8.com/demo-dev/Drasti-Backend/public/api/"}},359:(pn,dt,$)=>{var y=$(2313),B=$(5e3),X=$(2729);let ie=(()=>{class q{constructor(C){this.router=C}canActivate(C,k){return!localStorage.getItem("drastitoken")||(this.router.navigate(["/"]),!1)}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(X.F0))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})(),Ue=(()=>{class q{constructor(C){this.title=C}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - NAMNAM")}}return q.\u0275fac=function(C){return new(C||q)(B.Y36(y.Dx))},q.\u0275cmp=B.Xpm({type:q,selectors:[["app-notfound"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(C,k){1&C&&(B.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),B._uU(4,"\u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627."),B.qZA()()()())},styles:[""]}),q})(),Ke=(()=>{class q{constructor(C){this.router=C}canActivate(C,k){return!!localStorage.getItem("drastitoken")||(this.router.navigate(["/auth/login"]),!1)}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(X.F0))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();const Xe=[{path:"",loadChildren:()=>$.e(129).then($.bind($,3129)).then(q=>q.HomeModule),canActivate:[Ke]},{path:"material-chat/:id/:name",loadChildren:()=>Promise.all([$.e(592),$.e(734)]).then($.bind($,9734)).then(q=>q.ChattingModule),canActivate:[Ke]},{path:"all-msgs",loadChildren:()=>Promise.all([$.e(592),$.e(522)]).then($.bind($,522)).then(q=>q.AllMsgsModule),canActivate:[Ke]},{path:"auth",loadChildren:()=>$.e(836).then($.bind($,7836)).then(q=>q.AuthModule),canActivate:[ie]},{path:"**",component:Ue}];let ze=(()=>{class q{}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q}),q.\u0275inj=B.cJS({imports:[[X.Bz.forRoot(Xe,{initialNavigation:"enabled",scrollPositionRestoration:"enabled"})],X.Bz]}),q})();var lt=$(259),be=$(6197),Ce=$(5089),nt=$(9808);function Lt(q,E){if(1&q){const C=B.EpF();B.TgZ(0,"div",6)(1,"a",7),B._uU(2,"\u0645\u0648\u0627\u062f\u064a"),B.qZA(),B._UZ(3,"span",8),B.TgZ(4,"a",9),B._uU(5,"\u0627\u0644\u0627\u0633\u0626\u0644\u0629"),B.qZA(),B._UZ(6,"span",8),B.TgZ(7,"button",10),B.NdJ("click",function(){return B.CHM(C),B.oxw().authService.logout()}),B._uU(8," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),B.qZA()()}if(2&q){const C=B.oxw();B.xp6(7),B.Q6J("disabled",C.authService.logoutloading)}}let Mt=(()=>{class q{constructor(C){this.authService=C}ngOnInit(){}isLogin(){return!!localStorage.getItem("drastitoken")}}return q.\u0275fac=function(C){return new(C||q)(B.Y36(Ce.e))},q.\u0275cmp=B.Xpm({type:q,selectors:[["app-navbar"]],decls:7,vars:1,consts:[[1,"container","mt-2","d-md-none",2,"direction","ltr","text-align","left"],[1,"container","flx"],[1,"logoParent"],["routerLink","/","aria-label","NAMNAM"],["src","assets/0838de4f-5271-4e88-99d9-c0f89edfe1c2.jfif","alt","NAMNAM",1,"mainlogo"],["class","loginParent","style","display: flex; gap: 10px; align-items: center",4,"ngIf"],[1,"loginParent",2,"display","flex","gap","10px","align-items","center"],["routerLink","/"],[1,"mx-2"],["routerLink","/all-msgs"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(C,k){1&C&&(B.TgZ(0,"nav"),B._UZ(1,"div",0),B.TgZ(2,"div",1)(3,"div",2)(4,"a",3),B._UZ(5,"img",4),B.qZA()(),B.YNc(6,Lt,9,1,"div",5),B.qZA()()),2&C&&(B.xp6(6),B.Q6J("ngIf",k.isLogin()))},directives:[X.yS,nt.O5],styles:[""]}),q})(),Ft=(()=>{class q{constructor(C){this.router=C}ngOnInit(){this.app=(0,lt.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,be.N8)(this.app),localStorage.getItem("drastitoken")&&(0,be.t8)((0,be.iH)(this.db,`Auth/${localStorage.getItem("userid")}`),{user_token:localStorage.getItem("drastitoken")});const C=(0,be.iH)(this.db,"Auth");(0,be.jM)(C,k=>{var re;if(localStorage.getItem("drastitoken")){const ye=k.val();for(let Le in ye)Le==localStorage.getItem("userid")&&(this.savedToken=ye[Le]);(null===(re=this.savedToken)||void 0===re?void 0:re.user_token)!=localStorage.getItem("drastitoken")&&(localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]))}})}}return q.\u0275fac=function(C){return new(C||q)(B.Y36(X.F0))},q.\u0275cmp=B.Xpm({type:q,selectors:[["app-root"]],decls:2,vars:0,template:function(C,k){1&C&&B._UZ(0,"app-navbar")(1,"router-outlet")},directives:[Mt,X.lC],styles:[""]}),q})();var At=$(1777);const Qe=!1;function dn(q){return new B.vHH(3e3,Qe)}function Pn(){return"undefined"!=typeof window&&void 0!==window.document}function Mn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Zr(q){switch(q.length){case 0:return new At.ZN;case 1:return q[0];default:return new At.ZE(q)}}function ts(q,E,C,k,re={},ye={}){const Le=[],je=[];let et=-1,jt=null;if(k.forEach(Sn=>{const Un=Sn.offset,Hn=Un==et,ei=Hn&&jt||{};Object.keys(Sn).forEach(Bn=>{let qn=Bn,Jr=Sn[Bn];if("offset"!==Bn)switch(qn=E.normalizePropertyName(qn,Le),Jr){case At.k1:Jr=re[Bn];break;case At.l3:Jr=ye[Bn];break;default:Jr=E.normalizeStyleValue(Bn,qn,Jr,Le)}ei[qn]=Jr}),Hn||je.push(ei),jt=ei,et=Un}),Le.length)throw function xe(q){return new B.vHH(3502,Qe)}();return je}function Pt(q,E,C,k){switch(E){case"start":q.onStart(()=>k(C&&He(C,"start",q)));break;case"done":q.onDone(()=>k(C&&He(C,"done",q)));break;case"destroy":q.onDestroy(()=>k(C&&He(C,"destroy",q)))}}function He(q,E,C){const k=C.totalTime,ye=Ge(q.element,q.triggerName,q.fromState,q.toState,E||q.phaseName,null==k?q.totalTime:k,!!C.disabled),Le=q._data;return null!=Le&&(ye._data=Le),ye}function Ge(q,E,C,k,re="",ye=0,Le){return{element:q,triggerName:E,fromState:C,toState:k,phaseName:re,totalTime:ye,disabled:!!Le}}function at(q,E,C){let k;return q instanceof Map?(k=q.get(E),k||q.set(E,k=C)):(k=q[E],k||(k=q[E]=C)),k}function St(q){const E=q.indexOf(":");return[q.substring(1,E),q.substr(E+1)]}let zt=(q,E)=>!1,nn=(q,E,C)=>[],Nr=null;function Xn(q){const E=q.parentNode||q.host;return E===Nr?null:E}(Mn()||"undefined"!=typeof Element)&&(Pn()?(Nr=(()=>document.documentElement)(),zt=(q,E)=>{for(;E;){if(E===q)return!0;E=Xn(E)}return!1}):zt=(q,E)=>q.contains(E),nn=(q,E,C)=>{if(C)return Array.from(q.querySelectorAll(E));const k=q.querySelector(E);return k?[k]:[]});let hr=null,br=!1;function Yt(q){hr||(hr=function Or(){return"undefined"!=typeof document?document.body:null}()||{},br=!!hr.style&&"WebkitAppearance"in hr.style);let E=!0;return hr.style&&!function hi(q){return"ebkit"==q.substring(1,6)}(q)&&(E=q in hr.style,!E&&br&&(E="Webkit"+q.charAt(0).toUpperCase()+q.substr(1)in hr.style)),E}const sr=zt,Er=nn;let Hr=(()=>{class q{validateStyleProperty(C){return Yt(C)}matchesElement(C,k){return!1}containsElement(C,k){return sr(C,k)}getParentElement(C){return Xn(C)}query(C,k,re){return Er(C,k,re)}computeStyle(C,k,re){return re||""}animate(C,k,re,ye,Le,je=[],et){return new At.ZN(re,ye)}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})(),Yr=(()=>{class q{}return q.NOOP=new Hr,q})();const Gr="ng-enter",Pe="ng-leave",Ae="ng-trigger",he=".ng-trigger",ge="ng-animating",G=".ng-animating";function ne(q){if("number"==typeof q)return q;const E=q.match(/^(-?[\.\d]+)(m?s)/);return!E||E.length<2?0:se(parseFloat(E[1]),E[2])}function se(q,E){return"s"===E?1e3*q:q}function Se(q,E,C){return q.hasOwnProperty("duration")?q:function ht(q,E,C){let re,ye=0,Le="";if("string"==typeof q){const je=q.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===je)return E.push(dn()),{duration:0,delay:0,easing:""};re=se(parseFloat(je[1]),je[2]);const et=je[3];null!=et&&(ye=se(parseFloat(et),je[4]));const jt=je[5];jt&&(Le=jt)}else re=q;if(!C){let je=!1,et=E.length;re<0&&(E.push(function Xt(){return new B.vHH(3100,Qe)}()),je=!0),ye<0&&(E.push(function Ee(){return new B.vHH(3101,Qe)}()),je=!0),je&&E.splice(et,0,dn())}return{duration:re,delay:ye,easing:Le}}(q,E,C)}function Wt(q,E={}){return Object.keys(q).forEach(C=>{E[C]=q[C]}),E}function rn(q,E,C={}){if(E)for(let k in q)C[k]=q[k];else Wt(q,C);return C}function $n(q,E,C){return C?E+":"+C+";":""}function er(q){let E="";for(let C=0;C<q.style.length;C++){const k=q.style.item(C);E+=$n(0,k,q.style.getPropertyValue(k))}for(const C in q.style)q.style.hasOwnProperty(C)&&!C.startsWith("_")&&(E+=$n(0,wr(C),q.style[C]));q.setAttribute("style",E)}function Ur(q,E,C){q.style&&(Object.keys(E).forEach(k=>{const re=zr(k);C&&!C.hasOwnProperty(k)&&(C[k]=q.style[re]),q.style[re]=E[k]}),Mn()&&er(q))}function pi(q,E){q.style&&(Object.keys(E).forEach(C=>{const k=zr(C);q.style[k]=""}),Mn()&&er(q))}function Et(q){return Array.isArray(q)?1==q.length?q[0]:(0,At.vP)(q):q}const Ut=new RegExp("{{\\s*(.+?)\\s*}}","g");function Dt(q){let E=[];if("string"==typeof q){let C;for(;C=Ut.exec(q);)E.push(C[1]);Ut.lastIndex=0}return E}function sn(q,E,C){const k=q.toString(),re=k.replace(Ut,(ye,Le)=>{let je=E[Le];return E.hasOwnProperty(Le)||(C.push(function ot(q){return new B.vHH(3003,Qe)}()),je=""),je.toString()});return re==k?q:re}function Tn(q){const E=[];let C=q.next();for(;!C.done;)E.push(C.value),C=q.next();return E}const or=/-+([a-z0-9])/g;function zr(q){return q.replace(or,(...E)=>E[1].toUpperCase())}function wr(q){return q.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ti(q,E,C){switch(E.type){case 7:return q.visitTrigger(E,C);case 0:return q.visitState(E,C);case 1:return q.visitTransition(E,C);case 2:return q.visitSequence(E,C);case 3:return q.visitGroup(E,C);case 4:return q.visitAnimate(E,C);case 5:return q.visitKeyframes(E,C);case 6:return q.visitStyle(E,C);case 8:return q.visitReference(E,C);case 9:return q.visitAnimateChild(E,C);case 10:return q.visitAnimateRef(E,C);case 11:return q.visitQuery(E,C);case 12:return q.visitStagger(E,C);default:throw function _t(q){return new B.vHH(3004,Qe)}()}}function bs(q,E){return window.getComputedStyle(q)[E]}function Ar(q,E){const C=[];return"string"==typeof q?q.split(/\s*,\s*/).forEach(k=>function ai(q,E,C){if(":"==q[0]){const et=function rt(q,E){switch(q){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(C,k)=>parseFloat(k)>parseFloat(C);case":decrement":return(C,k)=>parseFloat(k)<parseFloat(C);default:return E.push(function Je(q){return new B.vHH(3016,Qe)}()),"* => *"}}(q,C);if("function"==typeof et)return void E.push(et);q=et}const k=q.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==k||k.length<4)return C.push(function it(q){return new B.vHH(3015,Qe)}()),E;const re=k[1],ye=k[2],Le=k[3];E.push(mt(re,Le));"<"==ye[0]&&!("*"==re&&"*"==Le)&&E.push(mt(Le,re))}(k,C,E)):C.push(q),C}const Ze=new Set(["true","1"]),st=new Set(["false","0"]);function mt(q,E){const C=Ze.has(q)||st.has(q),k=Ze.has(E)||st.has(E);return(re,ye)=>{let Le="*"==q||q==re,je="*"==E||E==ye;return!Le&&C&&"boolean"==typeof re&&(Le=re?Ze.has(q):st.has(q)),!je&&k&&"boolean"==typeof ye&&(je=ye?Ze.has(E):st.has(E)),Le&&je}}const bn=new RegExp("s*:selfs*,?","g");function Rr(q,E,C,k){return new Tr(q).build(E,C,k)}class Tr{constructor(E){this._driver=E}build(E,C,k){const re=new vi(C);this._resetContextStyleTimingState(re);const ye=Ti(this,Et(E),re);return re.unsupportedCSSPropertiesFound.size&&re.unsupportedCSSPropertiesFound.keys(),ye}_resetContextStyleTimingState(E){E.currentQuerySelector="",E.collectedStyles={},E.collectedStyles[""]={},E.currentTime=0}visitTrigger(E,C){let k=C.queryCount=0,re=C.depCount=0;const ye=[],Le=[];return"@"==E.name.charAt(0)&&C.errors.push(function tt(){return new B.vHH(3006,Qe)}()),E.definitions.forEach(je=>{if(this._resetContextStyleTimingState(C),0==je.type){const et=je,jt=et.name;jt.toString().split(/\s*,\s*/).forEach(Sn=>{et.name=Sn,ye.push(this.visitState(et,C))}),et.name=jt}else if(1==je.type){const et=this.visitTransition(je,C);k+=et.queryCount,re+=et.depCount,Le.push(et)}else C.errors.push(function Vt(){return new B.vHH(3007,Qe)}())}),{type:7,name:E.name,states:ye,transitions:Le,queryCount:k,depCount:re,options:null}}visitState(E,C){const k=this.visitStyle(E.styles,C),re=E.options&&E.options.params||null;if(k.containsDynamicStyles){const ye=new Set,Le=re||{};k.styles.forEach(je=>{if(Ds(je)){const et=je;Object.keys(et).forEach(jt=>{Dt(et[jt]).forEach(Sn=>{Le.hasOwnProperty(Sn)||ye.add(Sn)})})}}),ye.size&&(Tn(ye.values()),C.errors.push(function It(q,E){return new B.vHH(3008,Qe)}()))}return{type:0,name:E.name,style:k,options:re?{params:re}:null}}visitTransition(E,C){C.queryCount=0,C.depCount=0;const k=Ti(this,Et(E.animation),C);return{type:1,matchers:Ar(E.expr,C.errors),animation:k,queryCount:C.queryCount,depCount:C.depCount,options:Hi(E.options)}}visitSequence(E,C){return{type:2,steps:E.steps.map(k=>Ti(this,k,C)),options:Hi(E.options)}}visitGroup(E,C){const k=C.currentTime;let re=0;const ye=E.steps.map(Le=>{C.currentTime=k;const je=Ti(this,Le,C);return re=Math.max(re,C.currentTime),je});return C.currentTime=re,{type:3,steps:ye,options:Hi(E.options)}}visitAnimate(E,C){const k=function oo(q,E){if(q.hasOwnProperty("duration"))return q;if("number"==typeof q)return Eo(Se(q,E).duration,0,"");const C=q;if(C.split(/\s+/).some(ye=>"{"==ye.charAt(0)&&"{"==ye.charAt(1))){const ye=Eo(0,0,"");return ye.dynamic=!0,ye.strValue=C,ye}const re=Se(C,E);return Eo(re.duration,re.delay,re.easing)}(E.timings,C.errors);C.currentAnimateTimings=k;let re,ye=E.styles?E.styles:(0,At.oB)({});if(5==ye.type)re=this.visitKeyframes(ye,C);else{let Le=E.styles,je=!1;if(!Le){je=!0;const jt={};k.easing&&(jt.easing=k.easing),Le=(0,At.oB)(jt)}C.currentTime+=k.duration+k.delay;const et=this.visitStyle(Le,C);et.isEmptyStep=je,re=et}return C.currentAnimateTimings=null,{type:4,timings:k,style:re,options:null}}visitStyle(E,C){const k=this._makeStyleAst(E,C);return this._validateStyleAst(k,C),k}_makeStyleAst(E,C){const k=[];Array.isArray(E.styles)?E.styles.forEach(Le=>{"string"==typeof Le?Le==At.l3?k.push(Le):C.errors.push(function On(q){return new B.vHH(3002,Qe)}()):k.push(Le)}):k.push(E.styles);let re=!1,ye=null;return k.forEach(Le=>{if(Ds(Le)){const je=Le,et=je.easing;if(et&&(ye=et,delete je.easing),!re)for(let jt in je)if(je[jt].toString().indexOf("{{")>=0){re=!0;break}}}),{type:6,styles:k,easing:ye,offset:E.offset,containsDynamicStyles:re,options:null}}_validateStyleAst(E,C){const k=C.currentAnimateTimings;let re=C.currentTime,ye=C.currentTime;k&&ye>0&&(ye-=k.duration+k.delay),E.styles.forEach(Le=>{"string"!=typeof Le&&Object.keys(Le).forEach(je=>{if(!this._driver.validateStyleProperty(je))return delete Le[je],void C.unsupportedCSSPropertiesFound.add(je);const et=C.collectedStyles[C.currentQuerySelector],jt=et[je];let Sn=!0;jt&&(ye!=re&&ye>=jt.startTime&&re<=jt.endTime&&(C.errors.push(function xn(q,E,C,k,re){return new B.vHH(3010,Qe)}()),Sn=!1),ye=jt.startTime),Sn&&(et[je]={startTime:ye,endTime:re}),C.options&&function gt(q,E,C){const k=E.params||{},re=Dt(q);re.length&&re.forEach(ye=>{k.hasOwnProperty(ye)||C.push(function Me(q){return new B.vHH(3001,Qe)}())})}(Le[je],C.options,C.errors)})})}visitKeyframes(E,C){const k={type:5,styles:[],options:null};if(!C.currentAnimateTimings)return C.errors.push(function on(){return new B.vHH(3011,Qe)}()),k;let ye=0;const Le=[];let je=!1,et=!1,jt=0;const Sn=E.steps.map(Xi=>{const ti=this._makeStyleAst(Xi,C);let Ws=null!=ti.offset?ti.offset:function Wi(q){if("string"==typeof q)return null;let E=null;if(Array.isArray(q))q.forEach(C=>{if(Ds(C)&&C.hasOwnProperty("offset")){const k=C;E=parseFloat(k.offset),delete k.offset}});else if(Ds(q)&&q.hasOwnProperty("offset")){const C=q;E=parseFloat(C.offset),delete C.offset}return E}(ti.styles),Us=0;return null!=Ws&&(ye++,Us=ti.offset=Ws),et=et||Us<0||Us>1,je=je||Us<jt,jt=Us,Le.push(Us),ti});et&&C.errors.push(function qr(){return new B.vHH(3012,Qe)}()),je&&C.errors.push(function kn(){return new B.vHH(3200,Qe)}());const Un=E.steps.length;let Hn=0;ye>0&&ye<Un?C.errors.push(function gr(){return new B.vHH(3202,Qe)}()):0==ye&&(Hn=1/(Un-1));const ei=Un-1,Bn=C.currentTime,qn=C.currentAnimateTimings,Jr=qn.duration;return Sn.forEach((Xi,ti)=>{const Ws=Hn>0?ti==ei?1:Hn*ti:Le[ti],Us=Ws*Jr;C.currentTime=Bn+qn.delay+Us,qn.duration=Us,this._validateStyleAst(Xi,C),Xi.offset=Ws,k.styles.push(Xi)}),k}visitReference(E,C){return{type:8,animation:Ti(this,Et(E.animation),C),options:Hi(E.options)}}visitAnimateChild(E,C){return C.depCount++,{type:9,options:Hi(E.options)}}visitAnimateRef(E,C){return{type:10,animation:this.visitReference(E.animation,C),options:Hi(E.options)}}visitQuery(E,C){const k=C.currentQuerySelector,re=E.options||{};C.queryCount++,C.currentQuery=E;const[ye,Le]=function ui(q){const E=!!q.split(/\s*,\s*/).find(C=>":self"==C);return E&&(q=q.replace(bn,"")),q=q.replace(/@\*/g,he).replace(/@\w+/g,C=>he+"-"+C.substr(1)).replace(/:animating/g,G),[q,E]}(E.selector);C.currentQuerySelector=k.length?k+" "+ye:ye,at(C.collectedStyles,C.currentQuerySelector,{});const je=Ti(this,Et(E.animation),C);return C.currentQuery=null,C.currentQuerySelector=k,{type:11,selector:ye,limit:re.limit||0,optional:!!re.optional,includeSelf:Le,animation:je,originalSelector:E.selector,options:Hi(E.options)}}visitStagger(E,C){C.currentQuery||C.errors.push(function tr(){return new B.vHH(3013,Qe)}());const k="full"===E.timings?{duration:0,delay:0,easing:"full"}:Se(E.timings,C.errors,!0);return{type:12,animation:Ti(this,Et(E.animation),C),timings:k,options:null}}}class vi{constructor(E){this.errors=E,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ds(q){return!Array.isArray(q)&&"object"==typeof q}function Hi(q){return q?(q=Wt(q)).params&&(q.params=function Ys(q){return q?Wt(q):null}(q.params)):q={},q}function Eo(q,E,C){return{duration:q,delay:E,easing:C}}function po(q,E,C,k,re,ye,Le=null,je=!1){return{type:1,element:q,keyframes:E,preStyleProps:C,postStyleProps:k,duration:re,delay:ye,totalTime:re+ye,easing:Le,subTimeline:je}}class Bs{constructor(){this._map=new Map}get(E){return this._map.get(E)||[]}append(E,C){let k=this._map.get(E);k||this._map.set(E,k=[]),k.push(...C)}has(E){return this._map.has(E)}clear(){this._map.clear()}}const jo=new RegExp(":enter","g"),kr=new RegExp(":leave","g");function Qs(q,E,C,k,re,ye={},Le={},je,et,jt=[]){return(new wo).buildKeyframes(q,E,C,k,re,ye,Le,je,et,jt)}class wo{buildKeyframes(E,C,k,re,ye,Le,je,et,jt,Sn=[]){jt=jt||new Bs;const Un=new ki(E,C,jt,re,ye,Sn,[]);Un.options=et,Un.currentTimeline.setStyles([Le],null,Un.errors,et),Ti(this,k,Un);const Hn=Un.timelines.filter(ei=>ei.containsAnimation());if(Object.keys(je).length){let ei;for(let Bn=Hn.length-1;Bn>=0;Bn--){const qn=Hn[Bn];if(qn.element===C){ei=qn;break}}ei&&!ei.allowOnlyTimelineStyles()&&ei.setStyles([je],null,Un.errors,et)}return Hn.length?Hn.map(ei=>ei.buildKeyframes()):[po(C,[],[],[],0,0,"",!1)]}visitTrigger(E,C){}visitState(E,C){}visitTransition(E,C){}visitAnimateChild(E,C){const k=C.subInstructions.get(C.element);if(k){const re=C.createSubContext(E.options),ye=C.currentTimeline.currentTime,Le=this._visitSubInstructions(k,re,re.options);ye!=Le&&C.transformIntoNewTimeline(Le)}C.previousNode=E}visitAnimateRef(E,C){const k=C.createSubContext(E.options);k.transformIntoNewTimeline(),this.visitReference(E.animation,k),C.transformIntoNewTimeline(k.currentTimeline.currentTime),C.previousNode=E}_visitSubInstructions(E,C,k){let ye=C.currentTimeline.currentTime;const Le=null!=k.duration?ne(k.duration):null,je=null!=k.delay?ne(k.delay):null;return 0!==Le&&E.forEach(et=>{const jt=C.appendInstructionToTimeline(et,Le,je);ye=Math.max(ye,jt.duration+jt.delay)}),ye}visitReference(E,C){C.updateOptions(E.options,!0),Ti(this,E.animation,C),C.previousNode=E}visitSequence(E,C){const k=C.subContextCount;let re=C;const ye=E.options;if(ye&&(ye.params||ye.delay)&&(re=C.createSubContext(ye),re.transformIntoNewTimeline(),null!=ye.delay)){6==re.previousNode.type&&(re.currentTimeline.snapshotCurrentStyles(),re.previousNode=ao);const Le=ne(ye.delay);re.delayNextStep(Le)}E.steps.length&&(E.steps.forEach(Le=>Ti(this,Le,re)),re.currentTimeline.applyStylesToKeyframe(),re.subContextCount>k&&re.transformIntoNewTimeline()),C.previousNode=E}visitGroup(E,C){const k=[];let re=C.currentTimeline.currentTime;const ye=E.options&&E.options.delay?ne(E.options.delay):0;E.steps.forEach(Le=>{const je=C.createSubContext(E.options);ye&&je.delayNextStep(ye),Ti(this,Le,je),re=Math.max(re,je.currentTimeline.currentTime),k.push(je.currentTimeline)}),k.forEach(Le=>C.currentTimeline.mergeTimelineCollectedStyles(Le)),C.transformIntoNewTimeline(re),C.previousNode=E}_visitTiming(E,C){if(E.dynamic){const k=E.strValue;return Se(C.params?sn(k,C.params,C.errors):k,C.errors)}return{duration:E.duration,delay:E.delay,easing:E.easing}}visitAnimate(E,C){const k=C.currentAnimateTimings=this._visitTiming(E.timings,C),re=C.currentTimeline;k.delay&&(C.incrementTime(k.delay),re.snapshotCurrentStyles());const ye=E.style;5==ye.type?this.visitKeyframes(ye,C):(C.incrementTime(k.duration),this.visitStyle(ye,C),re.applyStylesToKeyframe()),C.currentAnimateTimings=null,C.previousNode=E}visitStyle(E,C){const k=C.currentTimeline,re=C.currentAnimateTimings;!re&&k.getCurrentStyleProperties().length&&k.forwardFrame();const ye=re&&re.easing||E.easing;E.isEmptyStep?k.applyEmptyStep(ye):k.setStyles(E.styles,ye,C.errors,C.options),C.previousNode=E}visitKeyframes(E,C){const k=C.currentAnimateTimings,re=C.currentTimeline.duration,ye=k.duration,je=C.createSubContext().currentTimeline;je.easing=k.easing,E.styles.forEach(et=>{je.forwardTime((et.offset||0)*ye),je.setStyles(et.styles,et.easing,C.errors,C.options),je.applyStylesToKeyframe()}),C.currentTimeline.mergeTimelineCollectedStyles(je),C.transformIntoNewTimeline(re+ye),C.previousNode=E}visitQuery(E,C){const k=C.currentTimeline.currentTime,re=E.options||{},ye=re.delay?ne(re.delay):0;ye&&(6===C.previousNode.type||0==k&&C.currentTimeline.getCurrentStyleProperties().length)&&(C.currentTimeline.snapshotCurrentStyles(),C.previousNode=ao);let Le=k;const je=C.invokeQuery(E.selector,E.originalSelector,E.limit,E.includeSelf,!!re.optional,C.errors);C.currentQueryTotal=je.length;let et=null;je.forEach((jt,Sn)=>{C.currentQueryIndex=Sn;const Un=C.createSubContext(E.options,jt);ye&&Un.delayNextStep(ye),jt===C.element&&(et=Un.currentTimeline),Ti(this,E.animation,Un),Un.currentTimeline.applyStylesToKeyframe(),Le=Math.max(Le,Un.currentTimeline.currentTime)}),C.currentQueryIndex=0,C.currentQueryTotal=0,C.transformIntoNewTimeline(Le),et&&(C.currentTimeline.mergeTimelineCollectedStyles(et),C.currentTimeline.snapshotCurrentStyles()),C.previousNode=E}visitStagger(E,C){const k=C.parentContext,re=C.currentTimeline,ye=E.timings,Le=Math.abs(ye.duration),je=Le*(C.currentQueryTotal-1);let et=Le*C.currentQueryIndex;switch(ye.duration<0?"reverse":ye.easing){case"reverse":et=je-et;break;case"full":et=k.currentStaggerTime}const Sn=C.currentTimeline;et&&Sn.delayNextStep(et);const Un=Sn.currentTime;Ti(this,E.animation,C),C.previousNode=E,k.currentStaggerTime=re.currentTime-Un+(re.startTime-k.currentTimeline.startTime)}}const ao={};class ki{constructor(E,C,k,re,ye,Le,je,et){this._driver=E,this.element=C,this.subInstructions=k,this._enterClassName=re,this._leaveClassName=ye,this.errors=Le,this.timelines=je,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ao,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=et||new Ss(this._driver,C,0),je.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(E,C){if(!E)return;const k=E;let re=this.options;null!=k.duration&&(re.duration=ne(k.duration)),null!=k.delay&&(re.delay=ne(k.delay));const ye=k.params;if(ye){let Le=re.params;Le||(Le=this.options.params={}),Object.keys(ye).forEach(je=>{(!C||!Le.hasOwnProperty(je))&&(Le[je]=sn(ye[je],Le,this.errors))})}}_copyOptions(){const E={};if(this.options){const C=this.options.params;if(C){const k=E.params={};Object.keys(C).forEach(re=>{k[re]=C[re]})}}return E}createSubContext(E=null,C,k){const re=C||this.element,ye=new ki(this._driver,re,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(re,k||0));return ye.previousNode=this.previousNode,ye.currentAnimateTimings=this.currentAnimateTimings,ye.options=this._copyOptions(),ye.updateOptions(E),ye.currentQueryIndex=this.currentQueryIndex,ye.currentQueryTotal=this.currentQueryTotal,ye.parentContext=this,this.subContextCount++,ye}transformIntoNewTimeline(E){return this.previousNode=ao,this.currentTimeline=this.currentTimeline.fork(this.element,E),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(E,C,k){const re={duration:null!=C?C:E.duration,delay:this.currentTimeline.currentTime+(null!=k?k:0)+E.delay,easing:""},ye=new zi(this._driver,E.element,E.keyframes,E.preStyleProps,E.postStyleProps,re,E.stretchStartingKeyframe);return this.timelines.push(ye),re}incrementTime(E){this.currentTimeline.forwardTime(this.currentTimeline.duration+E)}delayNextStep(E){E>0&&this.currentTimeline.delayNextStep(E)}invokeQuery(E,C,k,re,ye,Le){let je=[];if(re&&je.push(this.element),E.length>0){E=(E=E.replace(jo,"."+this._enterClassName)).replace(kr,"."+this._leaveClassName);let jt=this._driver.query(this.element,E,1!=k);0!==k&&(jt=k<0?jt.slice(jt.length+k,jt.length):jt.slice(0,k)),je.push(...jt)}return!ye&&0==je.length&&Le.push(function un(q){return new B.vHH(3014,Qe)}()),je}}class Ss{constructor(E,C,k,re){this._driver=E,this.element=C,this.startTime=k,this._elementTimelineStylesLookup=re,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(C),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(C,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(E){const C=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||C?(this.forwardTime(this.currentTime+E),C&&this.snapshotCurrentStyles()):this.startTime+=E}fork(E,C){return this.applyStylesToKeyframe(),new Ss(this._driver,E,C||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(E){this.applyStylesToKeyframe(),this.duration=E,this._loadKeyframe()}_updateStyle(E,C){this._localTimelineStyles[E]=C,this._globalTimelineStyles[E]=C,this._styleSummary[E]={time:this.currentTime,value:C}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(E){E&&(this._previousKeyframe.easing=E),Object.keys(this._globalTimelineStyles).forEach(C=>{this._backFill[C]=this._globalTimelineStyles[C]||At.l3,this._currentKeyframe[C]=At.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(E,C,k,re){C&&(this._previousKeyframe.easing=C);const ye=re&&re.params||{},Le=function li(q,E){const C={};let k;return q.forEach(re=>{"*"===re?(k=k||Object.keys(E),k.forEach(ye=>{C[ye]=At.l3})):rn(re,!1,C)}),C}(E,this._globalTimelineStyles);Object.keys(Le).forEach(je=>{const et=sn(Le[je],ye,k);this._pendingStyles[je]=et,this._localTimelineStyles.hasOwnProperty(je)||(this._backFill[je]=this._globalTimelineStyles.hasOwnProperty(je)?this._globalTimelineStyles[je]:At.l3),this._updateStyle(je,et)})}applyStylesToKeyframe(){const E=this._pendingStyles,C=Object.keys(E);0!=C.length&&(this._pendingStyles={},C.forEach(k=>{this._currentKeyframe[k]=E[k]}),Object.keys(this._localTimelineStyles).forEach(k=>{this._currentKeyframe.hasOwnProperty(k)||(this._currentKeyframe[k]=this._localTimelineStyles[k])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(E=>{const C=this._localTimelineStyles[E];this._pendingStyles[E]=C,this._updateStyle(E,C)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const E=[];for(let C in this._currentKeyframe)E.push(C);return E}mergeTimelineCollectedStyles(E){Object.keys(E._styleSummary).forEach(C=>{const k=this._styleSummary[C],re=E._styleSummary[C];(!k||re.time>k.time)&&this._updateStyle(C,re.value)})}buildKeyframes(){this.applyStylesToKeyframe();const E=new Set,C=new Set,k=1===this._keyframes.size&&0===this.duration;let re=[];this._keyframes.forEach((je,et)=>{const jt=rn(je,!0);Object.keys(jt).forEach(Sn=>{const Un=jt[Sn];Un==At.k1?E.add(Sn):Un==At.l3&&C.add(Sn)}),k||(jt.offset=et/this.duration),re.push(jt)});const ye=E.size?Tn(E.values()):[],Le=C.size?Tn(C.values()):[];if(k){const je=re[0],et=Wt(je);je.offset=0,et.offset=1,re=[je,et]}return po(this.element,re,ye,Le,this.duration,this.startTime,this.easing,!1)}}class zi extends Ss{constructor(E,C,k,re,ye,Le,je=!1){super(E,C,Le.delay),this.keyframes=k,this.preStyleProps=re,this.postStyleProps=ye,this._stretchStartingKeyframe=je,this.timings={duration:Le.duration,delay:Le.delay,easing:Le.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let E=this.keyframes,{delay:C,duration:k,easing:re}=this.timings;if(this._stretchStartingKeyframe&&C){const ye=[],Le=k+C,je=C/Le,et=rn(E[0],!1);et.offset=0,ye.push(et);const jt=rn(E[0],!1);jt.offset=da(je),ye.push(jt);const Sn=E.length-1;for(let Un=1;Un<=Sn;Un++){let Hn=rn(E[Un],!1);Hn.offset=da((C+Hn.offset*k)/Le),ye.push(Hn)}k=Le,C=0,re="",E=ye}return po(this.element,E,this.preStyleProps,this.postStyleProps,k,C,re,!0)}}function da(q,E=3){const C=Math.pow(10,E-1);return Math.round(q*C)/C}class js{}class As extends js{normalizePropertyName(E,C){return zr(E)}normalizeStyleValue(E,C,k,re){let ye="";const Le=k.toString().trim();if(uo[C]&&0!==k&&"0"!==k)if("number"==typeof k)ye="px";else{const je=k.match(/^[+-]?[\d\.]+([a-z]*)$/);je&&0==je[1].length&&re.push(function ft(q,E){return new B.vHH(3005,Qe)}())}return Le+ye}}const uo=(()=>function Rs(q){const E={};return q.forEach(C=>E[C]=!0),E}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Co(q,E,C,k,re,ye,Le,je,et,jt,Sn,Un,Hn){return{type:0,element:q,triggerName:E,isRemovalTransition:re,fromState:C,fromStyles:ye,toState:k,toStyles:Le,timelines:je,queriedElements:et,preStyleProps:jt,postStyleProps:Sn,totalTime:Un,errors:Hn}}const go={};class Po{constructor(E,C,k){this._triggerName=E,this.ast=C,this._stateStyles=k}match(E,C,k,re){return function Hs(q,E,C,k,re){return q.some(ye=>ye(E,C,k,re))}(this.ast.matchers,E,C,k,re)}buildStyles(E,C,k){const re=this._stateStyles["*"],ye=this._stateStyles[E],Le=re?re.buildStyles(C,k):{};return ye?ye.buildStyles(C,k):Le}build(E,C,k,re,ye,Le,je,et,jt,Sn){const Un=[],Hn=this.ast.options&&this.ast.options.params||go,Bn=this.buildStyles(k,je&&je.params||go,Un),qn=et&&et.params||go,Jr=this.buildStyles(re,qn,Un),Xi=new Set,ti=new Map,Ws=new Map,Us="void"===re,Is={params:Object.assign(Object.assign({},Hn),qn)},Ra=Sn?[]:Qs(E,C,this.ast.animation,ye,Le,Bn,Jr,Is,jt,Un);let Di=0;if(Ra.forEach(no=>{Di=Math.max(no.duration+no.delay,Di)}),Un.length)return Co(C,this._triggerName,k,re,Us,Bn,Jr,[],[],ti,Ws,Di,Un);Ra.forEach(no=>{const ro=no.element,Ns=at(ti,ro,{});no.preStyleProps.forEach(Lo=>Ns[Lo]=!0);const Fo=at(Ws,ro,{});no.postStyleProps.forEach(Lo=>Fo[Lo]=!0),ro!==C&&Xi.add(ro)});const mi=Tn(Xi.values());return Co(C,this._triggerName,k,re,Us,Bn,Jr,Ra,mi,ti,Ws,Di)}}class Ki{constructor(E,C,k){this.styles=E,this.defaultParams=C,this.normalizer=k}buildStyles(E,C){const k={},re=Wt(this.defaultParams);return Object.keys(E).forEach(ye=>{const Le=E[ye];null!=Le&&(re[ye]=Le)}),this.styles.styles.forEach(ye=>{if("string"!=typeof ye){const Le=ye;Object.keys(Le).forEach(je=>{let et=Le[je];et.length>1&&(et=sn(et,re,C));const jt=this.normalizer.normalizePropertyName(je,C);et=this.normalizer.normalizeStyleValue(je,jt,et,C),k[jt]=et})}}),k}}class Ms{constructor(E,C,k){this.name=E,this.ast=C,this._normalizer=k,this.transitionFactories=[],this.states={},C.states.forEach(re=>{this.states[re.name]=new Ki(re.style,re.options&&re.options.params||{},k)}),mo(this.states,"true","1"),mo(this.states,"false","0"),C.transitions.forEach(re=>{this.transitionFactories.push(new Po(E,re,this.states))}),this.fallbackTransition=function ni(q,E,C){return new Po(q,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Le,je)=>!0],options:null,queryCount:0,depCount:0},E)}(E,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(E,C,k,re){return this.transitionFactories.find(Le=>Le.match(E,C,k,re))||null}matchStyles(E,C,k){return this.fallbackTransition.buildStyles(E,C,k)}}function mo(q,E,C){q.hasOwnProperty(E)?q.hasOwnProperty(C)||(q[C]=q[E]):q.hasOwnProperty(C)&&(q[E]=q[C])}const lo=new Bs;class Wr{constructor(E,C,k){this.bodyNode=E,this._driver=C,this._normalizer=k,this._animations={},this._playersById={},this.players=[]}register(E,C){const k=[],ye=Rr(this._driver,C,k,[]);if(k.length)throw function pt(q){return new B.vHH(3503,Qe)}();this._animations[E]=ye}_buildPlayer(E,C,k){const re=E.element,ye=ts(0,this._normalizer,0,E.keyframes,C,k);return this._driver.animate(re,ye,E.duration,E.delay,E.easing,[],!0)}create(E,C,k={}){const re=[],ye=this._animations[E];let Le;const je=new Map;if(ye?(Le=Qs(this._driver,C,ye,Gr,Pe,{},{},k,lo,re),Le.forEach(Sn=>{const Un=at(je,Sn.element,{});Sn.postStyleProps.forEach(Hn=>Un[Hn]=null)})):(re.push(function tn(){return new B.vHH(3300,Qe)}()),Le=[]),re.length)throw function hn(q){return new B.vHH(3504,Qe)}();je.forEach((Sn,Un)=>{Object.keys(Sn).forEach(Hn=>{Sn[Hn]=this._driver.computeStyle(Un,Hn,At.l3)})});const jt=Zr(Le.map(Sn=>{const Un=je.get(Sn.element);return this._buildPlayer(Sn,{},Un)}));return this._playersById[E]=jt,jt.onDestroy(()=>this.destroy(E)),this.players.push(jt),jt}destroy(E){const C=this._getPlayer(E);C.destroy(),delete this._playersById[E];const k=this.players.indexOf(C);k>=0&&this.players.splice(k,1)}_getPlayer(E){const C=this._playersById[E];if(!C)throw function Dn(q){return new B.vHH(3301,Qe)}();return C}listen(E,C,k,re){const ye=Ge(C,"","","");return Pt(this._getPlayer(E),k,ye,re),()=>{}}command(E,C,k,re){if("register"==k)return void this.register(E,re[0]);if("create"==k)return void this.create(E,C,re[0]||{});const ye=this._getPlayer(E);switch(k){case"play":ye.play();break;case"pause":ye.pause();break;case"reset":ye.reset();break;case"restart":ye.restart();break;case"finish":ye.finish();break;case"init":ye.init();break;case"setPosition":ye.setPosition(parseFloat(re[0]));break;case"destroy":this.destroy(E)}}}const ns="ng-animate-queued",xs="ng-animate-disabled",j=[],de={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ke={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tt="__ng_removed";class Bt{constructor(E,C=""){this.namespaceId=C;const k=E&&E.hasOwnProperty("value");if(this.value=function Si(q){return null!=q?q:null}(k?E.value:E),k){const ye=Wt(E);delete ye.value,this.options=ye}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(E){const C=E.params;if(C){const k=this.options.params;Object.keys(C).forEach(re=>{null==k[re]&&(k[re]=C[re])})}}}const Cn="void",Fr=new Bt(Cn);class Vr{constructor(E,C,k){this.id=E,this.hostElement=C,this._engine=k,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+E,rs(C,this._hostClassName)}listen(E,C,k,re){if(!this._triggers.hasOwnProperty(C))throw function zn(q,E){return new B.vHH(3302,Qe)}();if(null==k||0==k.length)throw function mr(q){return new B.vHH(3303,Qe)}();if(!function yo(q){return"start"==q||"done"==q}(k))throw function ir(q,E){return new B.vHH(3400,Qe)}();const ye=at(this._elementListeners,E,[]),Le={name:C,phase:k,callback:re};ye.push(Le);const je=at(this._engine.statesByElement,E,{});return je.hasOwnProperty(C)||(rs(E,Ae),rs(E,Ae+"-"+C),je[C]=Fr),()=>{this._engine.afterFlush(()=>{const et=ye.indexOf(Le);et>=0&&ye.splice(et,1),this._triggers[C]||delete je[C]})}}register(E,C){return!this._triggers[E]&&(this._triggers[E]=C,!0)}_getTrigger(E){const C=this._triggers[E];if(!C)throw function Ln(q){return new B.vHH(3401,Qe)}();return C}trigger(E,C,k,re=!0){const ye=this._getTrigger(C),Le=new Mr(this.id,C,E);let je=this._engine.statesByElement.get(E);je||(rs(E,Ae),rs(E,Ae+"-"+C),this._engine.statesByElement.set(E,je={}));let et=je[C];const jt=new Bt(k,this.id);if(!(k&&k.hasOwnProperty("value"))&&et&&jt.absorbOptions(et.options),je[C]=jt,et||(et=Fr),jt.value!==Cn&&et.value===jt.value){if(!function O(q,E){const C=Object.keys(q),k=Object.keys(E);if(C.length!=k.length)return!1;for(let re=0;re<C.length;re++){const ye=C[re];if(!E.hasOwnProperty(ye)||q[ye]!==E[ye])return!1}return!0}(et.params,jt.params)){const qn=[],Jr=ye.matchStyles(et.value,et.params,qn),Xi=ye.matchStyles(jt.value,jt.params,qn);qn.length?this._engine.reportError(qn):this._engine.afterFlush(()=>{pi(E,Jr),Ur(E,Xi)})}return}const Hn=at(this._engine.playersByElement,E,[]);Hn.forEach(qn=>{qn.namespaceId==this.id&&qn.triggerName==C&&qn.queued&&qn.destroy()});let ei=ye.matchTransition(et.value,jt.value,E,jt.params),Bn=!1;if(!ei){if(!re)return;ei=ye.fallbackTransition,Bn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:C,transition:ei,fromState:et,toState:jt,player:Le,isFallbackTransition:Bn}),Bn||(rs(E,ns),Le.onStart(()=>{vs(E,ns)})),Le.onDone(()=>{let qn=this.players.indexOf(Le);qn>=0&&this.players.splice(qn,1);const Jr=this._engine.playersByElement.get(E);if(Jr){let Xi=Jr.indexOf(Le);Xi>=0&&Jr.splice(Xi,1)}}),this.players.push(Le),Hn.push(Le),Le}deregister(E){delete this._triggers[E],this._engine.statesByElement.forEach((C,k)=>{delete C[E]}),this._elementListeners.forEach((C,k)=>{this._elementListeners.set(k,C.filter(re=>re.name!=E))})}clearElementCache(E){this._engine.statesByElement.delete(E),this._elementListeners.delete(E);const C=this._engine.playersByElement.get(E);C&&(C.forEach(k=>k.destroy()),this._engine.playersByElement.delete(E))}_signalRemovalForInnerTriggers(E,C){const k=this._engine.driver.query(E,he,!0);k.forEach(re=>{if(re[Tt])return;const ye=this._engine.fetchNamespacesByElement(re);ye.size?ye.forEach(Le=>Le.triggerLeaveAnimation(re,C,!1,!0)):this.clearElementCache(re)}),this._engine.afterFlushAnimationsDone(()=>k.forEach(re=>this.clearElementCache(re)))}triggerLeaveAnimation(E,C,k,re){const ye=this._engine.statesByElement.get(E),Le=new Map;if(ye){const je=[];if(Object.keys(ye).forEach(et=>{if(Le.set(et,ye[et].value),this._triggers[et]){const jt=this.trigger(E,et,Cn,re);jt&&je.push(jt)}}),je.length)return this._engine.markElementAsRemoved(this.id,E,!0,C,Le),k&&Zr(je).onDone(()=>this._engine.processLeaveNode(E)),!0}return!1}prepareLeaveAnimationListeners(E){const C=this._elementListeners.get(E),k=this._engine.statesByElement.get(E);if(C&&k){const re=new Set;C.forEach(ye=>{const Le=ye.name;if(re.has(Le))return;re.add(Le);const et=this._triggers[Le].fallbackTransition,jt=k[Le]||Fr,Sn=new Bt(Cn),Un=new Mr(this.id,Le,E);this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:Le,transition:et,fromState:jt,toState:Sn,player:Un,isFallbackTransition:!0})})}}removeNode(E,C){const k=this._engine;if(E.childElementCount&&this._signalRemovalForInnerTriggers(E,C),this.triggerLeaveAnimation(E,C,!0))return;let re=!1;if(k.totalAnimations){const ye=k.players.length?k.playersByQueriedElement.get(E):[];if(ye&&ye.length)re=!0;else{let Le=E;for(;Le=Le.parentNode;)if(k.statesByElement.get(Le)){re=!0;break}}}if(this.prepareLeaveAnimationListeners(E),re)k.markElementAsRemoved(this.id,E,!1,C);else{const ye=E[Tt];(!ye||ye===de)&&(k.afterFlush(()=>this.clearElementCache(E)),k.destroyInnerAnimations(E),k._onRemovalComplete(E,C))}}insertNode(E,C){rs(E,this._hostClassName)}drainQueuedTransitions(E){const C=[];return this._queue.forEach(k=>{const re=k.player;if(re.destroyed)return;const ye=k.element,Le=this._elementListeners.get(ye);Le&&Le.forEach(je=>{if(je.name==k.triggerName){const et=Ge(ye,k.triggerName,k.fromState.value,k.toState.value);et._data=E,Pt(k.player,je.phase,et,je.callback)}}),re.markedForDestroy?this._engine.afterFlush(()=>{re.destroy()}):C.push(k)}),this._queue=[],C.sort((k,re)=>{const ye=k.transition.ast.depCount,Le=re.transition.ast.depCount;return 0==ye||0==Le?ye-Le:this._engine.driver.containsElement(k.element,re.element)?1:-1})}destroy(E){this.players.forEach(C=>C.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,E)}elementContainsData(E){let C=!1;return this._elementListeners.has(E)&&(C=!0),C=!!this._queue.find(k=>k.element===E)||C,C}}class yr{constructor(E,C,k){this.bodyNode=E,this.driver=C,this._normalizer=k,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(re,ye)=>{}}_onRemovalComplete(E,C){this.onRemovalComplete(E,C)}get queuedPlayers(){const E=[];return this._namespaceList.forEach(C=>{C.players.forEach(k=>{k.queued&&E.push(k)})}),E}createNamespace(E,C){const k=new Vr(E,C,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,C)?this._balanceNamespaceList(k,C):(this.newHostElements.set(C,k),this.collectEnterElement(C)),this._namespaceLookup[E]=k}_balanceNamespaceList(E,C){const k=this._namespaceList,re=this.namespacesByHostElement,ye=k.length-1;if(ye>=0){let Le=!1;if(void 0!==this.driver.getParentElement){let je=this.driver.getParentElement(C);for(;je;){const et=re.get(je);if(et){const jt=k.indexOf(et);k.splice(jt+1,0,E),Le=!0;break}je=this.driver.getParentElement(je)}}else for(let je=ye;je>=0;je--)if(this.driver.containsElement(k[je].hostElement,C)){k.splice(je+1,0,E),Le=!0;break}Le||k.unshift(E)}else k.push(E);return re.set(C,E),E}register(E,C){let k=this._namespaceLookup[E];return k||(k=this.createNamespace(E,C)),k}registerTrigger(E,C,k){let re=this._namespaceLookup[E];re&&re.register(C,k)&&this.totalAnimations++}destroy(E,C){if(!E)return;const k=this._fetchNamespace(E);this.afterFlush(()=>{this.namespacesByHostElement.delete(k.hostElement),delete this._namespaceLookup[E];const re=this._namespaceList.indexOf(k);re>=0&&this._namespaceList.splice(re,1)}),this.afterFlushAnimationsDone(()=>k.destroy(C))}_fetchNamespace(E){return this._namespaceLookup[E]}fetchNamespacesByElement(E){const C=new Set,k=this.statesByElement.get(E);if(k){const re=Object.keys(k);for(let ye=0;ye<re.length;ye++){const Le=k[re[ye]].namespaceId;if(Le){const je=this._fetchNamespace(Le);je&&C.add(je)}}}return C}trigger(E,C,k,re){if(ii(C)){const ye=this._fetchNamespace(E);if(ye)return ye.trigger(C,k,re),!0}return!1}insertNode(E,C,k,re){if(!ii(C))return;const ye=C[Tt];if(ye&&ye.setForRemoval){ye.setForRemoval=!1,ye.setForMove=!0;const Le=this.collectedLeaveElements.indexOf(C);Le>=0&&this.collectedLeaveElements.splice(Le,1)}if(E){const Le=this._fetchNamespace(E);Le&&Le.insertNode(C,k)}re&&this.collectEnterElement(C)}collectEnterElement(E){this.collectedEnterElements.push(E)}markElementAsDisabled(E,C){C?this.disabledNodes.has(E)||(this.disabledNodes.add(E),rs(E,xs)):this.disabledNodes.has(E)&&(this.disabledNodes.delete(E),vs(E,xs))}removeNode(E,C,k,re){if(ii(C)){const ye=E?this._fetchNamespace(E):null;if(ye?ye.removeNode(C,re):this.markElementAsRemoved(E,C,!1,re),k){const Le=this.namespacesByHostElement.get(C);Le&&Le.id!==E&&Le.removeNode(C,re)}}else this._onRemovalComplete(C,re)}markElementAsRemoved(E,C,k,re,ye){this.collectedLeaveElements.push(C),C[Tt]={namespaceId:E,setForRemoval:re,hasAnimation:k,removedBeforeQueried:!1,previousTriggersValues:ye}}listen(E,C,k,re,ye){return ii(C)?this._fetchNamespace(E).listen(C,k,re,ye):()=>{}}_buildInstruction(E,C,k,re,ye){return E.transition.build(this.driver,E.element,E.fromState.value,E.toState.value,k,re,E.fromState.options,E.toState.options,C,ye)}destroyInnerAnimations(E){let C=this.driver.query(E,he,!0);C.forEach(k=>this.destroyActiveAnimationsForElement(k)),0!=this.playersByQueriedElement.size&&(C=this.driver.query(E,G,!0),C.forEach(k=>this.finishActiveQueriedAnimationOnElement(k)))}destroyActiveAnimationsForElement(E){const C=this.playersByElement.get(E);C&&C.forEach(k=>{k.queued?k.markedForDestroy=!0:k.destroy()})}finishActiveQueriedAnimationOnElement(E){const C=this.playersByQueriedElement.get(E);C&&C.forEach(k=>k.finish())}whenRenderingDone(){return new Promise(E=>{if(this.players.length)return Zr(this.players).onDone(()=>E());E()})}processLeaveNode(E){var C;const k=E[Tt];if(k&&k.setForRemoval){if(E[Tt]=de,k.namespaceId){this.destroyInnerAnimations(E);const re=this._fetchNamespace(k.namespaceId);re&&re.clearElementCache(E)}this._onRemovalComplete(E,k.setForRemoval)}(null===(C=E.classList)||void 0===C?void 0:C.contains(xs))&&this.markElementAsDisabled(E,!1),this.driver.query(E,".ng-animate-disabled",!0).forEach(re=>{this.markElementAsDisabled(re,!1)})}flush(E=-1){let C=[];if(this.newHostElements.size&&(this.newHostElements.forEach((k,re)=>this._balanceNamespaceList(k,re)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let k=0;k<this.collectedEnterElements.length;k++)rs(this.collectedEnterElements[k],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const k=[];try{C=this._flushAnimations(k,E)}finally{for(let re=0;re<k.length;re++)k[re]()}}else for(let k=0;k<this.collectedLeaveElements.length;k++)this.processLeaveNode(this.collectedLeaveElements[k]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(k=>k()),this._flushFns=[],this._whenQuietFns.length){const k=this._whenQuietFns;this._whenQuietFns=[],C.length?Zr(C).onDone(()=>{k.forEach(re=>re())}):k.forEach(re=>re())}}reportError(E){throw function Lr(q){return new B.vHH(3402,Qe)}()}_flushAnimations(E,C){const k=new Bs,re=[],ye=new Map,Le=[],je=new Map,et=new Map,jt=new Map,Sn=new Set;this.disabledNodes.forEach(jn=>{Sn.add(jn);const pr=this.driver.query(jn,".ng-animate-queued",!0);for(let vr=0;vr<pr.length;vr++)Sn.add(pr[vr])});const Un=this.bodyNode,Hn=Array.from(this.statesByElement.keys()),ei=_s(Hn,this.collectedEnterElements),Bn=new Map;let qn=0;ei.forEach((jn,pr)=>{const vr=Gr+qn++;Bn.set(pr,vr),jn.forEach(di=>rs(di,vr))});const Jr=[],Xi=new Set,ti=new Set;for(let jn=0;jn<this.collectedLeaveElements.length;jn++){const pr=this.collectedLeaveElements[jn],vr=pr[Tt];vr&&vr.setForRemoval&&(Jr.push(pr),Xi.add(pr),vr.hasAnimation?this.driver.query(pr,".ng-star-inserted",!0).forEach(di=>Xi.add(di)):ti.add(pr))}const Ws=new Map,Us=_s(Hn,Array.from(Xi));Us.forEach((jn,pr)=>{const vr=Pe+qn++;Ws.set(pr,vr),jn.forEach(di=>rs(di,vr))}),E.push(()=>{ei.forEach((jn,pr)=>{const vr=Bn.get(pr);jn.forEach(di=>vs(di,vr))}),Us.forEach((jn,pr)=>{const vr=Ws.get(pr);jn.forEach(di=>vs(di,vr))}),Jr.forEach(jn=>{this.processLeaveNode(jn)})});const Is=[],Ra=[];for(let jn=this._namespaceList.length-1;jn>=0;jn--)this._namespaceList[jn].drainQueuedTransitions(C).forEach(vr=>{const di=vr.player,as=vr.element;if(Is.push(di),this.collectedEnterElements.length){const Be=as[Tt];if(Be&&Be.setForMove){if(Be.previousTriggersValues&&Be.previousTriggersValues.has(vr.triggerName)){const ct=Be.previousTriggersValues.get(vr.triggerName),Ot=this.statesByElement.get(vr.element);Ot&&Ot[vr.triggerName]&&(Ot[vr.triggerName].value=ct)}return void di.destroy()}}const Ea=!Un||!this.driver.containsElement(Un,as),Ks=Ws.get(as),D=Bn.get(as),P=this._buildInstruction(vr,k,D,Ks,Ea);if(P.errors&&P.errors.length)return void Ra.push(P);if(Ea)return di.onStart(()=>pi(as,P.fromStyles)),di.onDestroy(()=>Ur(as,P.toStyles)),void re.push(di);if(vr.isFallbackTransition)return di.onStart(()=>pi(as,P.fromStyles)),di.onDestroy(()=>Ur(as,P.toStyles)),void re.push(di);const J=[];P.timelines.forEach(Be=>{Be.stretchStartingKeyframe=!0,this.disabledNodes.has(Be.element)||J.push(Be)}),P.timelines=J,k.append(as,P.timelines),Le.push({instruction:P,player:di,element:as}),P.queriedElements.forEach(Be=>at(je,Be,[]).push(di)),P.preStyleProps.forEach((Be,ct)=>{const Ot=Object.keys(Be);if(Ot.length){let cn=et.get(ct);cn||et.set(ct,cn=new Set),Ot.forEach(mn=>cn.add(mn))}}),P.postStyleProps.forEach((Be,ct)=>{const Ot=Object.keys(Be);let cn=jt.get(ct);cn||jt.set(ct,cn=new Set),Ot.forEach(mn=>cn.add(mn))})});if(Ra.length){const jn=[];Ra.forEach(pr=>{jn.push(function nr(q,E){return new B.vHH(3505,Qe)}())}),Is.forEach(pr=>pr.destroy()),this.reportError(jn)}const Di=new Map,mi=new Map;Le.forEach(jn=>{const pr=jn.element;k.has(pr)&&(mi.set(pr,pr),this._beforeAnimationBuild(jn.player.namespaceId,jn.instruction,Di))}),re.forEach(jn=>{const pr=jn.element;this._getPreviousPlayers(pr,!1,jn.namespaceId,jn.triggerName,null).forEach(di=>{at(Di,pr,[]).push(di),di.destroy()})});const no=Jr.filter(jn=>ue(jn,et,jt)),ro=new Map;ur(ro,this.driver,ti,jt,At.l3).forEach(jn=>{ue(jn,et,jt)&&no.push(jn)});const Fo=new Map;ei.forEach((jn,pr)=>{ur(Fo,this.driver,new Set(jn),et,At.k1)}),no.forEach(jn=>{const pr=ro.get(jn),vr=Fo.get(jn);ro.set(jn,Object.assign(Object.assign({},pr),vr))});const Lo=[],Vo=[],va={};Le.forEach(jn=>{const{element:pr,player:vr,instruction:di}=jn;if(k.has(pr)){if(Sn.has(pr))return vr.onDestroy(()=>Ur(pr,di.toStyles)),vr.disabled=!0,vr.overrideTotalTime(di.totalTime),void re.push(vr);let as=va;if(mi.size>1){let Ks=pr;const D=[];for(;Ks=Ks.parentNode;){const P=mi.get(Ks);if(P){as=P;break}D.push(Ks)}D.forEach(P=>mi.set(P,as))}const Ea=this._buildAnimation(vr.namespaceId,di,Di,ye,Fo,ro);if(vr.setRealPlayer(Ea),as===va)Lo.push(vr);else{const Ks=this.playersByElement.get(as);Ks&&Ks.length&&(vr.parentPlayer=Zr(Ks)),re.push(vr)}}else pi(pr,di.fromStyles),vr.onDestroy(()=>Ur(pr,di.toStyles)),Vo.push(vr),Sn.has(pr)&&re.push(vr)}),Vo.forEach(jn=>{const pr=ye.get(jn.element);if(pr&&pr.length){const vr=Zr(pr);jn.setRealPlayer(vr)}}),re.forEach(jn=>{jn.parentPlayer?jn.syncPlayerEvents(jn.parentPlayer):jn.destroy()});for(let jn=0;jn<Jr.length;jn++){const pr=Jr[jn],vr=pr[Tt];if(vs(pr,Pe),vr&&vr.hasAnimation)continue;let di=[];if(je.size){let Ea=je.get(pr);Ea&&Ea.length&&di.push(...Ea);let Ks=this.driver.query(pr,G,!0);for(let D=0;D<Ks.length;D++){let P=je.get(Ks[D]);P&&P.length&&di.push(...P)}}const as=di.filter(Ea=>!Ea.destroyed);as.length?qo(this,pr,as):this.processLeaveNode(pr)}return Jr.length=0,Lo.forEach(jn=>{this.players.push(jn),jn.onDone(()=>{jn.destroy();const pr=this.players.indexOf(jn);this.players.splice(pr,1)}),jn.play()}),Lo}elementContainsData(E,C){let k=!1;const re=C[Tt];return re&&re.setForRemoval&&(k=!0),this.playersByElement.has(C)&&(k=!0),this.playersByQueriedElement.has(C)&&(k=!0),this.statesByElement.has(C)&&(k=!0),this._fetchNamespace(E).elementContainsData(C)||k}afterFlush(E){this._flushFns.push(E)}afterFlushAnimationsDone(E){this._whenQuietFns.push(E)}_getPreviousPlayers(E,C,k,re,ye){let Le=[];if(C){const je=this.playersByQueriedElement.get(E);je&&(Le=je)}else{const je=this.playersByElement.get(E);if(je){const et=!ye||ye==Cn;je.forEach(jt=>{jt.queued||!et&&jt.triggerName!=re||Le.push(jt)})}}return(k||re)&&(Le=Le.filter(je=>!(k&&k!=je.namespaceId||re&&re!=je.triggerName))),Le}_beforeAnimationBuild(E,C,k){const ye=C.element,Le=C.isRemovalTransition?void 0:E,je=C.isRemovalTransition?void 0:C.triggerName;for(const et of C.timelines){const jt=et.element,Sn=jt!==ye,Un=at(k,jt,[]);this._getPreviousPlayers(jt,Sn,Le,je,C.toState).forEach(ei=>{const Bn=ei.getRealPlayer();Bn.beforeDestroy&&Bn.beforeDestroy(),ei.destroy(),Un.push(ei)})}pi(ye,C.fromStyles)}_buildAnimation(E,C,k,re,ye,Le){const je=C.triggerName,et=C.element,jt=[],Sn=new Set,Un=new Set,Hn=C.timelines.map(Bn=>{const qn=Bn.element;Sn.add(qn);const Jr=qn[Tt];if(Jr&&Jr.removedBeforeQueried)return new At.ZN(Bn.duration,Bn.delay);const Xi=qn!==et,ti=function K(q){const E=[];return V(q,E),E}((k.get(qn)||j).map(Di=>Di.getRealPlayer())).filter(Di=>!!Di.element&&Di.element===qn),Ws=ye.get(qn),Us=Le.get(qn),Is=ts(0,this._normalizer,0,Bn.keyframes,Ws,Us),Ra=this._buildPlayer(Bn,Is,ti);if(Bn.subTimeline&&re&&Un.add(qn),Xi){const Di=new Mr(E,je,qn);Di.setRealPlayer(Ra),jt.push(Di)}return Ra});jt.forEach(Bn=>{at(this.playersByQueriedElement,Bn.element,[]).push(Bn),Bn.onDone(()=>function Mi(q,E,C){let k;if(q instanceof Map){if(k=q.get(E),k){if(k.length){const re=k.indexOf(C);k.splice(re,1)}0==k.length&&q.delete(E)}}else if(k=q[E],k){if(k.length){const re=k.indexOf(C);k.splice(re,1)}0==k.length&&delete q[E]}return k}(this.playersByQueriedElement,Bn.element,Bn))}),Sn.forEach(Bn=>rs(Bn,ge));const ei=Zr(Hn);return ei.onDestroy(()=>{Sn.forEach(Bn=>vs(Bn,ge)),Ur(et,C.toStyles)}),Un.forEach(Bn=>{at(re,Bn,[]).push(ei)}),ei}_buildPlayer(E,C,k){return C.length>0?this.driver.animate(E.element,C,E.duration,E.delay,E.easing,k):new At.ZN(E.duration,E.delay)}}class Mr{constructor(E,C,k){this.namespaceId=E,this.triggerName=C,this.element=k,this._player=new At.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(E){this._containsRealPlayer||(this._player=E,Object.keys(this._queuedCallbacks).forEach(C=>{this._queuedCallbacks[C].forEach(k=>Pt(E,C,void 0,k))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(E.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(E){this.totalTime=E}syncPlayerEvents(E){const C=this._player;C.triggerCallback&&E.onStart(()=>C.triggerCallback("start")),E.onDone(()=>this.finish()),E.onDestroy(()=>this.destroy())}_queueEvent(E,C){at(this._queuedCallbacks,E,[]).push(C)}onDone(E){this.queued&&this._queueEvent("done",E),this._player.onDone(E)}onStart(E){this.queued&&this._queueEvent("start",E),this._player.onStart(E)}onDestroy(E){this.queued&&this._queueEvent("destroy",E),this._player.onDestroy(E)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(E){this.queued||this._player.setPosition(E)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(E){const C=this._player;C.triggerCallback&&C.triggerCallback(E)}}function ii(q){return q&&1===q.nodeType}function Fi(q,E){const C=q.style.display;return q.style.display=null!=E?E:"none",C}function ur(q,E,C,k,re){const ye=[];C.forEach(et=>ye.push(Fi(et)));const Le=[];k.forEach((et,jt)=>{const Sn={};et.forEach(Un=>{const Hn=Sn[Un]=E.computeStyle(jt,Un,re);(!Hn||0==Hn.length)&&(jt[Tt]=ke,Le.push(jt))}),q.set(jt,Sn)});let je=0;return C.forEach(et=>Fi(et,ye[je++])),Le}function _s(q,E){const C=new Map;if(q.forEach(je=>C.set(je,[])),0==E.length)return C;const re=new Set(E),ye=new Map;function Le(je){if(!je)return 1;let et=ye.get(je);if(et)return et;const jt=je.parentNode;return et=C.has(jt)?jt:re.has(jt)?1:Le(jt),ye.set(je,et),et}return E.forEach(je=>{const et=Le(je);1!==et&&C.get(et).push(je)}),C}function rs(q,E){var C;null===(C=q.classList)||void 0===C||C.add(E)}function vs(q,E){var C;null===(C=q.classList)||void 0===C||C.remove(E)}function qo(q,E,C){Zr(C).onDone(()=>q.processLeaveNode(E))}function V(q,E){for(let C=0;C<q.length;C++){const k=q[C];k instanceof At.ZE?V(k.players,E):E.push(k)}}function ue(q,E,C){const k=C.get(q);if(!k)return!1;let re=E.get(q);return re?k.forEach(ye=>re.add(ye)):E.set(q,k),C.delete(q),!0}class Ne{constructor(E,C,k){this.bodyNode=E,this._driver=C,this._normalizer=k,this._triggerCache={},this.onRemovalComplete=(re,ye)=>{},this._transitionEngine=new yr(E,C,k),this._timelineEngine=new Wr(E,C,k),this._transitionEngine.onRemovalComplete=(re,ye)=>this.onRemovalComplete(re,ye)}registerTrigger(E,C,k,re,ye){const Le=E+"-"+re;let je=this._triggerCache[Le];if(!je){const et=[],Sn=Rr(this._driver,ye,et,[]);if(et.length)throw function ve(q,E){return new B.vHH(3404,Qe)}();je=function $s(q,E,C){return new Ms(q,E,C)}(re,Sn,this._normalizer),this._triggerCache[Le]=je}this._transitionEngine.registerTrigger(C,re,je)}register(E,C){this._transitionEngine.register(E,C)}destroy(E,C){this._transitionEngine.destroy(E,C)}onInsert(E,C,k,re){this._transitionEngine.insertNode(E,C,k,re)}onRemove(E,C,k,re){this._transitionEngine.removeNode(E,C,re||!1,k)}disableAnimations(E,C){this._transitionEngine.markElementAsDisabled(E,C)}process(E,C,k,re){if("@"==k.charAt(0)){const[ye,Le]=St(k);this._timelineEngine.command(ye,C,Le,re)}else this._transitionEngine.trigger(E,C,k,re)}listen(E,C,k,re,ye){if("@"==k.charAt(0)){const[Le,je]=St(k);return this._timelineEngine.listen(Le,C,je,ye)}return this._transitionEngine.listen(E,C,k,re,ye)}flush(E=-1){this._transitionEngine.flush(E)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let gi=(()=>{class q{constructor(C,k,re){this._element=C,this._startStyles=k,this._endStyles=re,this._state=0;let ye=q.initialStylesByElement.get(C);ye||q.initialStylesByElement.set(C,ye={}),this._initialStyles=ye}start(){this._state<1&&(this._startStyles&&Ur(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ur(this._element,this._initialStyles),this._endStyles&&(Ur(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(q.initialStylesByElement.delete(this._element),this._startStyles&&(pi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pi(this._element,this._endStyles),this._endStyles=null),Ur(this._element,this._initialStyles),this._state=3)}}return q.initialStylesByElement=new WeakMap,q})();function z(q){let E=null;const C=Object.keys(q);for(let k=0;k<C.length;k++){const re=C[k];W(re)&&(E=E||{},E[re]=q[re])}return E}function W(q){return"display"===q||"position"===q}class fe{constructor(E,C,k,re){this.element=E,this.keyframes=C,this.options=k,this._specialStyles=re,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=k.duration,this._delay=k.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(E=>E()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const E=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,E,this.options),this._finalKeyframe=E.length?E[E.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(E,C,k){return E.animate(C,k)}onStart(E){this._onStartFns.push(E)}onDone(E){this._onDoneFns.push(E)}onDestroy(E){this._onDestroyFns.push(E)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(E=>E()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(E=>E()),this._onDestroyFns=[])}setPosition(E){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=E*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const E={};if(this.hasStarted()){const C=this._finalKeyframe;Object.keys(C).forEach(k=>{"offset"!=k&&(E[k]=this._finished?C[k]:bs(this.element,k))})}this.currentSnapshot=E}triggerCallback(E){const C="start"==E?this._onStartFns:this._onDoneFns;C.forEach(k=>k()),C.length=0}}class Ie{validateStyleProperty(E){return Yt(E)}matchesElement(E,C){return!1}containsElement(E,C){return sr(E,C)}getParentElement(E){return Xn(E)}query(E,C,k){return Er(E,C,k)}computeStyle(E,C,k){return window.getComputedStyle(E)[C]}animate(E,C,k,re,ye,Le=[]){const et={duration:k,delay:re,fill:0==re?"both":"forwards"};ye&&(et.easing=ye);const jt={},Sn=Le.filter(Hn=>Hn instanceof fe);(function Ii(q,E){return 0===q||0===E})(k,re)&&Sn.forEach(Hn=>{let ei=Hn.currentSnapshot;Object.keys(ei).forEach(Bn=>jt[Bn]=ei[Bn])}),C=function oi(q,E,C){const k=Object.keys(C);if(k.length&&E.length){let ye=E[0],Le=[];if(k.forEach(je=>{ye.hasOwnProperty(je)||Le.push(je),ye[je]=C[je]}),Le.length)for(var re=1;re<E.length;re++){let je=E[re];Le.forEach(function(et){je[et]=bs(q,et)})}}return E}(E,C=C.map(Hn=>rn(Hn,!1)),jt);const Un=function qt(q,E){let C=null,k=null;return Array.isArray(E)&&E.length?(C=z(E[0]),E.length>1&&(k=z(E[E.length-1]))):E&&(C=z(E)),C||k?new gi(q,C,k):null}(E,C);return new fe(E,C,et,Un)}}let Fe=(()=>{class q extends At._j{constructor(C,k){super(),this._nextAnimationId=0,this._renderer=C.createRenderer(k.body,{id:"0",encapsulation:B.ifc.None,styles:[],data:{animation:[]}})}build(C){const k=this._nextAnimationId.toString();this._nextAnimationId++;const re=Array.isArray(C)?(0,At.vP)(C):C;return Vn(this._renderer,null,k,"register",[re]),new Ct(k,this._renderer)}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(B.FYo),B.LFG(nt.K0))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();class Ct extends At.LC{constructor(E,C){super(),this._id=E,this._renderer=C}create(E,C){return new Jt(this._id,E,C||{},this._renderer)}}class Jt{constructor(E,C,k,re){this.id=E,this.element=C,this._renderer=re,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",k)}_listen(E,C){return this._renderer.listen(this.element,`@@${this.id}:${E}`,C)}_command(E,...C){return Vn(this._renderer,this.element,this.id,E,C)}onDone(E){this._listen("done",E)}onStart(E){this._listen("start",E)}onDestroy(E){this._listen("destroy",E)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(E){this._command("setPosition",E)}getPosition(){var E,C;return null!==(C=null===(E=this._renderer.engine.players[+this.id])||void 0===E?void 0:E.getPosition())&&void 0!==C?C:0}}function Vn(q,E,C,k,re){return q.setProperty(E,`@@${C}:${k}`,re)}const cr="@.disabled";let Kn=(()=>{class q{constructor(C,k,re){this.delegate=C,this.engine=k,this._zone=re,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),k.onRemovalComplete=(ye,Le)=>{const je=null==Le?void 0:Le.parentNode(ye);je&&Le.removeChild(je,ye)}}createRenderer(C,k){const ye=this.delegate.createRenderer(C,k);if(!(C&&k&&k.data&&k.data.animation)){let Sn=this._rendererCache.get(ye);return Sn||(Sn=new ci("",ye,this.engine),this._rendererCache.set(ye,Sn)),Sn}const Le=k.id,je=k.id+"-"+this._currentId;this._currentId++,this.engine.register(je,C);const et=Sn=>{Array.isArray(Sn)?Sn.forEach(et):this.engine.registerTrigger(Le,je,C,Sn.name,Sn)};return k.data.animation.forEach(et),new Ai(this,je,ye,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(C,k,re){C>=0&&C<this._microtaskId?this._zone.run(()=>k(re)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ye=>{const[Le,je]=ye;Le(je)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([k,re]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(B.FYo),B.LFG(Ne),B.LFG(B.R0b))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();class ci{constructor(E,C,k){this.namespaceId=E,this.delegate=C,this.engine=k,this.destroyNode=this.delegate.destroyNode?re=>C.destroyNode(re):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(E,C){return this.delegate.createElement(E,C)}createComment(E){return this.delegate.createComment(E)}createText(E){return this.delegate.createText(E)}appendChild(E,C){this.delegate.appendChild(E,C),this.engine.onInsert(this.namespaceId,C,E,!1)}insertBefore(E,C,k,re=!0){this.delegate.insertBefore(E,C,k),this.engine.onInsert(this.namespaceId,C,E,re)}removeChild(E,C,k){this.engine.onRemove(this.namespaceId,C,this.delegate,k)}selectRootElement(E,C){return this.delegate.selectRootElement(E,C)}parentNode(E){return this.delegate.parentNode(E)}nextSibling(E){return this.delegate.nextSibling(E)}setAttribute(E,C,k,re){this.delegate.setAttribute(E,C,k,re)}removeAttribute(E,C,k){this.delegate.removeAttribute(E,C,k)}addClass(E,C){this.delegate.addClass(E,C)}removeClass(E,C){this.delegate.removeClass(E,C)}setStyle(E,C,k,re){this.delegate.setStyle(E,C,k,re)}removeStyle(E,C,k){this.delegate.removeStyle(E,C,k)}setProperty(E,C,k){"@"==C.charAt(0)&&C==cr?this.disableAnimations(E,!!k):this.delegate.setProperty(E,C,k)}setValue(E,C){this.delegate.setValue(E,C)}listen(E,C,k){return this.delegate.listen(E,C,k)}disableAnimations(E,C){this.engine.disableAnimations(E,C)}}class Ai extends ci{constructor(E,C,k,re){super(C,k,re),this.factory=E,this.namespaceId=C}setProperty(E,C,k){"@"==C.charAt(0)?"."==C.charAt(1)&&C==cr?this.disableAnimations(E,k=void 0===k||!!k):this.engine.process(this.namespaceId,E,C.substr(1),k):this.delegate.setProperty(E,C,k)}listen(E,C,k){if("@"==C.charAt(0)){const re=function bi(q){switch(q){case"body":return document.body;case"document":return document;case"window":return window;default:return q}}(E);let ye=C.substr(1),Le="";return"@"!=ye.charAt(0)&&([ye,Le]=function Br(q){const E=q.indexOf(".");return[q.substring(0,E),q.substr(E+1)]}(ye)),this.engine.listen(this.namespaceId,re,ye,Le,je=>{this.factory.scheduleListenerCallback(je._data||-1,k,je)})}return this.delegate.listen(E,C,k)}}let qi=(()=>{class q extends Ne{constructor(C,k,re){super(C.body,k,re)}ngOnDestroy(){this.flush()}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(nt.K0),B.LFG(Yr),B.LFG(js))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();const is=new B.OlP("AnimationModuleType"),$i=[{provide:At._j,useClass:Fe},{provide:js,useFactory:function Ri(){return new As}},{provide:Ne,useClass:qi},{provide:B.FYo,useFactory:function Ls(q,E,C){return new Kn(q,E,C)},deps:[y.se,Ne,B.R0b]}],Zi=[{provide:Yr,useFactory:()=>new Ie},{provide:is,useValue:"BrowserAnimations"},...$i],Gs=[{provide:Yr,useClass:Hr},{provide:is,useValue:"NoopAnimations"},...$i];let Io=(()=>{class q{static withConfig(C){return{ngModule:q,providers:C.disableAnimations?Gs:Zi}}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q}),q.\u0275inj=B.cJS({providers:Zi,imports:[y.b2]}),q})();var Js=$(4466),No=$(520),hs=$(2011),ha=$(1205),Oo=$(2255);let Ha=(()=>{class q{constructor(){}intercept(C,k){let re=C.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("drastitoken")}`}});return k.handle(re)}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();var ea=$(262),xi=$(2843),co=$(2290);let ss=(()=>{class q{constructor(C,k){this.router=C,this.toastr=k}intercept(C,k){return k.handle(C).pipe((0,ea.K)(re=>{var ye,Le,je;let et=null===(ye=null==re?void 0:re.error)||void 0===ye?void 0:ye.errors;if(Array.isArray(et)&&(null==et?void 0:et.length))for(let jt=0;jt<(null==et?void 0:et.length);jt++)(null===(Le=et[jt])||void 0===Le?void 0:Le.message)&&this.toastr.error(null===(je=et[jt])||void 0===je?void 0:je.message);else(null==et?void 0:et.message)&&this.toastr.error(null==et?void 0:et.message);return-1!==[401,403].indexOf(re.status)&&(localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username")),(0,xi._)(re)}))}}return q.\u0275fac=function(C){return new(C||q)(B.LFG(X.F0),B.LFG(co._W))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac}),q})();var Es=$(4976),Pi=$(3692);$(1389),$(2090),$(6881),$(1877),$(4859);class Zo{constructor(){return(0,Es.vb)("auth")}}var $r=$(6215);class tu{constructor(E){return E}}const ba="database",ma=new B.OlP("angularfire2.database-instances");function Vs(q){return(E,C)=>{const k=E.runOutsideAngular(()=>q(C));return new tu(k)}}const Yi={provide:class os{constructor(){return(0,Es.vb)(ba)}},deps:[[new B.FiY,ma]]},In={provide:tu,useFactory:function Ni(q,E){const C=(0,Es.JM)(ba,q,E);return C&&new tu(C)},deps:[[new B.FiY,ma],Pi.Ot]};let Gu=(()=>{class q{constructor(){(0,lt.KN)("angularfire",Es.q4.full,"rtdb")}}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q}),q.\u0275inj=B.cJS({providers:[In,Yi]}),q})();function ia(q,...E){return{ngModule:Gu,providers:[{provide:ma,useFactory:Vs(q),multi:!0,deps:[B.R0b,B.zs3,Es.HU,Pi.z6,[new B.FiY,Zo],[new B.FiY,$r.nm],...E]}]}}const _a=(0,Es.u3)(be.N8,!0);let su=(()=>{class q{}return q.\u0275fac=function(C){return new(C||q)},q.\u0275mod=B.oAB({type:q,bootstrap:[Ft]}),q.\u0275inj=B.cJS({providers:[{provide:No.TP,useClass:Ha,multi:!0},{provide:No.TP,useClass:ss,multi:!0}],imports:[[y.b2.withServerTransition({appId:"serverApp"}),ze,Io,Js.m,Oo.yb,ha.ww,hs.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),ia(()=>_a())]]}),q})();$(2340).N.production&&(0,B.G48)(),y.q6().bootstrapModule(su).catch(q=>console.error(q))},8306:(pn,dt,$)=>{$.d(dt,{y:()=>be});var y=$(2961),B=$(727),X=$(8822),ie=$(4671);var Xe=$(2416),ze=$(576),lt=$(2806);let be=(()=>{class Mt{constructor(At){At&&(this._subscribe=At)}lift(At){const Qe=new Mt;return Qe.source=this,Qe.operator=At,Qe}subscribe(At,Qe,Nt){const dn=function Lt(Mt){return Mt&&Mt instanceof y.Lv||function nt(Mt){return Mt&&(0,ze.m)(Mt.next)&&(0,ze.m)(Mt.error)&&(0,ze.m)(Mt.complete)}(Mt)&&(0,B.Nn)(Mt)}(At)?At:new y.Hp(At,Qe,Nt);return(0,lt.x)(()=>{const{operator:Xt,source:Ee}=this;dn.add(Xt?Xt.call(dn,Ee):Ee?this._subscribe(dn):this._trySubscribe(dn))}),dn}_trySubscribe(At){try{return this._subscribe(At)}catch(Qe){At.error(Qe)}}forEach(At,Qe){return new(Qe=Ce(Qe))((Nt,dn)=>{const Xt=new y.Hp({next:Ee=>{try{At(Ee)}catch(Me){dn(Me),Xt.unsubscribe()}},error:dn,complete:Nt});this.subscribe(Xt)})}_subscribe(At){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(At)}[X.L](){return this}pipe(...At){return function Ke(Mt){return 0===Mt.length?ie.y:1===Mt.length?Mt[0]:function(At){return Mt.reduce((Qe,Nt)=>Nt(Qe),At)}}(At)(this)}toPromise(At){return new(At=Ce(At))((Qe,Nt)=>{let dn;this.subscribe(Xt=>dn=Xt,Xt=>Nt(Xt),()=>Qe(dn))})}}return Mt.create=Ft=>new Mt(Ft),Mt})();function Ce(Mt){var Ft;return null!==(Ft=null!=Mt?Mt:Xe.v.Promise)&&void 0!==Ft?Ft:Promise}},7579:(pn,dt,$)=>{$.d(dt,{x:()=>Xe});var y=$(8306),B=$(727);const ie=(0,$(3888).d)(lt=>function(){lt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=$(8737),Ke=$(2806);let Xe=(()=>{class lt extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ce){const nt=new ze(this,this);return nt.operator=Ce,nt}_throwIfClosed(){if(this.closed)throw new ie}next(Ce){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const nt of this.currentObservers)nt.next(Ce)}})}error(Ce){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ce;const{observers:nt}=this;for(;nt.length;)nt.shift().error(Ce)}})}complete(){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ce;return(null===(Ce=this.observers)||void 0===Ce?void 0:Ce.length)>0}_trySubscribe(Ce){return this._throwIfClosed(),super._trySubscribe(Ce)}_subscribe(Ce){return this._throwIfClosed(),this._checkFinalizedStatuses(Ce),this._innerSubscribe(Ce)}_innerSubscribe(Ce){const{hasError:nt,isStopped:Lt,observers:Mt}=this;return nt||Lt?B.Lc:(this.currentObservers=null,Mt.push(Ce),new B.w0(()=>{this.currentObservers=null,(0,Ue.P)(Mt,Ce)}))}_checkFinalizedStatuses(Ce){const{hasError:nt,thrownError:Lt,isStopped:Mt}=this;nt?Ce.error(Lt):Mt&&Ce.complete()}asObservable(){const Ce=new y.y;return Ce.source=this,Ce}}return lt.create=(be,Ce)=>new ze(be,Ce),lt})();class ze extends Xe{constructor(be,Ce){super(),this.destination=be,this.source=Ce}next(be){var Ce,nt;null===(nt=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.next)||void 0===nt||nt.call(Ce,be)}error(be){var Ce,nt;null===(nt=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.error)||void 0===nt||nt.call(Ce,be)}complete(){var be,Ce;null===(Ce=null===(be=this.destination)||void 0===be?void 0:be.complete)||void 0===Ce||Ce.call(be)}_subscribe(be){var Ce,nt;return null!==(nt=null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(be))&&void 0!==nt?nt:B.Lc}}},2961:(pn,dt,$)=>{$.d(dt,{Hp:()=>At,Lv:()=>nt});var y=$(576),B=$(727),X=$(2416),ie=$(7849);function Ue(){}const Ke=lt("C",void 0,void 0);function lt(Ee,Me,ot){return{kind:Ee,value:Me,error:ot}}var be=$(3410),Ce=$(2806);class nt extends B.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,B.Nn)(Me)&&Me.add(this)):this.destination=Xt}static create(Me,ot,_t){return new At(Me,ot,_t)}next(Me){this.isStopped?dn(function ze(Ee){return lt("N",Ee,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?dn(function Xe(Ee){return lt("E",void 0,Ee)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?dn(Ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Lt=Function.prototype.bind;function Mt(Ee,Me){return Lt.call(Ee,Me)}class Ft{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:ot}=this;if(ot.next)try{ot.next(Me)}catch(_t){Qe(_t)}}error(Me){const{partialObserver:ot}=this;if(ot.error)try{ot.error(Me)}catch(_t){Qe(_t)}else Qe(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(ot){Qe(ot)}}}class At extends nt{constructor(Me,ot,_t){let ft;if(super(),(0,y.m)(Me)||!Me)ft={next:null!=Me?Me:void 0,error:null!=ot?ot:void 0,complete:null!=_t?_t:void 0};else{let tt;this&&X.v.useDeprecatedNextContext?(tt=Object.create(Me),tt.unsubscribe=()=>this.unsubscribe(),ft={next:Me.next&&Mt(Me.next,tt),error:Me.error&&Mt(Me.error,tt),complete:Me.complete&&Mt(Me.complete,tt)}):ft=Me}this.destination=new Ft(ft)}}function Qe(Ee){X.v.useDeprecatedSynchronousErrorHandling?(0,Ce.O)(Ee):(0,ie.h)(Ee)}function dn(Ee,Me){const{onStoppedNotification:ot}=X.v;ot&&be.z.setTimeout(()=>ot(Ee,Me))}const Xt={closed:!0,next:Ue,error:function Nt(Ee){throw Ee},complete:Ue}},727:(pn,dt,$)=>{$.d(dt,{Lc:()=>Ke,w0:()=>Ue,Nn:()=>Xe});var y=$(576);const X=(0,$(3888).d)(lt=>function(Ce){lt(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((nt,Lt)=>`${Lt+1}) ${nt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce});var ie=$(8737);class Ue{constructor(be){this.initialTeardown=be,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let be;if(!this.closed){this.closed=!0;const{_parentage:Ce}=this;if(Ce)if(this._parentage=null,Array.isArray(Ce))for(const Mt of Ce)Mt.remove(this);else Ce.remove(this);const{initialTeardown:nt}=this;if((0,y.m)(nt))try{nt()}catch(Mt){be=Mt instanceof X?Mt.errors:[Mt]}const{_finalizers:Lt}=this;if(Lt){this._finalizers=null;for(const Mt of Lt)try{ze(Mt)}catch(Ft){be=null!=be?be:[],Ft instanceof X?be=[...be,...Ft.errors]:be.push(Ft)}}if(be)throw new X(be)}}add(be){var Ce;if(be&&be!==this)if(this.closed)ze(be);else{if(be instanceof Ue){if(be.closed||be._hasParent(this))return;be._addParent(this)}(this._finalizers=null!==(Ce=this._finalizers)&&void 0!==Ce?Ce:[]).push(be)}}_hasParent(be){const{_parentage:Ce}=this;return Ce===be||Array.isArray(Ce)&&Ce.includes(be)}_addParent(be){const{_parentage:Ce}=this;this._parentage=Array.isArray(Ce)?(Ce.push(be),Ce):Ce?[Ce,be]:be}_removeParent(be){const{_parentage:Ce}=this;Ce===be?this._parentage=null:Array.isArray(Ce)&&(0,ie.P)(Ce,be)}remove(be){const{_finalizers:Ce}=this;Ce&&(0,ie.P)(Ce,be),be instanceof Ue&&be._removeParent(this)}}Ue.EMPTY=(()=>{const lt=new Ue;return lt.closed=!0,lt})();const Ke=Ue.EMPTY;function Xe(lt){return lt instanceof Ue||lt&&"closed"in lt&&(0,y.m)(lt.remove)&&(0,y.m)(lt.add)&&(0,y.m)(lt.unsubscribe)}function ze(lt){(0,y.m)(lt)?lt():lt.unsubscribe()}},2416:(pn,dt,$)=>{$.d(dt,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(pn,dt,$)=>{$.d(dt,{z:()=>Ue});var y=$(8189),X=$(7669),ie=$(8996);function Ue(...Ke){return function B(){return(0,y.J)(1)}()((0,ie.D)(Ke,(0,X.yG)(Ke)))}},515:(pn,dt,$)=>{$.d(dt,{E:()=>B});const B=new($(8306).y)(Ue=>Ue.complete())},8996:(pn,dt,$)=>{$.d(dt,{D:()=>Me});var y=$(8421),B=$(5363),X=$(9468),Ke=$(8306),ze=$(2202),lt=$(576),be=$(9672);function nt(ot,_t){if(!ot)throw new Error("Iterable cannot be null");return new Ke.y(ft=>{(0,be.f)(ft,_t,()=>{const tt=ot[Symbol.asyncIterator]();(0,be.f)(ft,_t,()=>{tt.next().then(Vt=>{Vt.done?ft.complete():ft.next(Vt.value)})},0,!0)})})}var Lt=$(3670),Mt=$(8239),Ft=$(1144),At=$(6495),Qe=$(2206),Nt=$(4532),dn=$(3260);function Me(ot,_t){return _t?function Ee(ot,_t){if(null!=ot){if((0,Lt.c)(ot))return function ie(ot,_t){return(0,y.Xf)(ot).pipe((0,X.R)(_t),(0,B.Q)(_t))}(ot,_t);if((0,Ft.z)(ot))return function Xe(ot,_t){return new Ke.y(ft=>{let tt=0;return _t.schedule(function(){tt===ot.length?ft.complete():(ft.next(ot[tt++]),ft.closed||this.schedule())})})}(ot,_t);if((0,Mt.t)(ot))return function Ue(ot,_t){return(0,y.Xf)(ot).pipe((0,X.R)(_t),(0,B.Q)(_t))}(ot,_t);if((0,Qe.D)(ot))return nt(ot,_t);if((0,At.T)(ot))return function Ce(ot,_t){return new Ke.y(ft=>{let tt;return(0,be.f)(ft,_t,()=>{tt=ot[ze.h](),(0,be.f)(ft,_t,()=>{let Vt,It;try{({value:Vt,done:It}=tt.next())}catch(On){return void ft.error(On)}It?ft.complete():ft.next(Vt)},0,!0)}),()=>(0,lt.m)(null==tt?void 0:tt.return)&&tt.return()})}(ot,_t);if((0,dn.L)(ot))return function Xt(ot,_t){return nt((0,dn.Q)(ot),_t)}(ot,_t)}throw(0,Nt.z)(ot)}(ot,_t):(0,y.Xf)(ot)}},8421:(pn,dt,$)=>{$.d(dt,{Xf:()=>Lt});var y=$(7582),B=$(1144),X=$(8239),ie=$(8306),Ue=$(3670),Ke=$(2206),Xe=$(4532),ze=$(6495),lt=$(3260),be=$(576),Ce=$(7849),nt=$(8822);function Lt(Ee){if(Ee instanceof ie.y)return Ee;if(null!=Ee){if((0,Ue.c)(Ee))return function Mt(Ee){return new ie.y(Me=>{const ot=Ee[nt.L]();if((0,be.m)(ot.subscribe))return ot.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,B.z)(Ee))return function Ft(Ee){return new ie.y(Me=>{for(let ot=0;ot<Ee.length&&!Me.closed;ot++)Me.next(Ee[ot]);Me.complete()})}(Ee);if((0,X.t)(Ee))return function At(Ee){return new ie.y(Me=>{Ee.then(ot=>{Me.closed||(Me.next(ot),Me.complete())},ot=>Me.error(ot)).then(null,Ce.h)})}(Ee);if((0,Ke.D)(Ee))return Nt(Ee);if((0,ze.T)(Ee))return function Qe(Ee){return new ie.y(Me=>{for(const ot of Ee)if(Me.next(ot),Me.closed)return;Me.complete()})}(Ee);if((0,lt.L)(Ee))return function dn(Ee){return Nt((0,lt.Q)(Ee))}(Ee)}throw(0,Xe.z)(Ee)}function Nt(Ee){return new ie.y(Me=>{(function Xt(Ee,Me){var ot,_t,ft,tt;return(0,y.mG)(this,void 0,void 0,function*(){try{for(ot=(0,y.KL)(Ee);!(_t=yield ot.next()).done;)if(Me.next(_t.value),Me.closed)return}catch(Vt){ft={error:Vt}}finally{try{_t&&!_t.done&&(tt=ot.return)&&(yield tt.call(ot))}finally{if(ft)throw ft.error}}Me.complete()})})(Ee,Me).catch(ot=>Me.error(ot))})}},6451:(pn,dt,$)=>{$.d(dt,{T:()=>Ke});var y=$(8189),B=$(8421),X=$(515),ie=$(7669),Ue=$(8996);function Ke(...Xe){const ze=(0,ie.yG)(Xe),lt=(0,ie._6)(Xe,1/0),be=Xe;return be.length?1===be.length?(0,B.Xf)(be[0]):(0,y.J)(lt)((0,Ue.D)(be,ze)):X.E}},9646:(pn,dt,$)=>{$.d(dt,{of:()=>X});var y=$(7669),B=$(8996);function X(...ie){const Ue=(0,y.yG)(ie);return(0,B.D)(ie,Ue)}},2843:(pn,dt,$)=>{$.d(dt,{_:()=>X});var y=$(8306),B=$(576);function X(ie,Ue){const Ke=(0,B.m)(ie)?ie:()=>ie,Xe=ze=>ze.error(Ke());return new y.y(Ue?ze=>Ue.schedule(Xe,0,ze):Xe)}},5403:(pn,dt,$)=>{$.d(dt,{x:()=>B});var y=$(2961);function B(ie,Ue,Ke,Xe,ze){return new X(ie,Ue,Ke,Xe,ze)}class X extends y.Lv{constructor(Ue,Ke,Xe,ze,lt,be){super(Ue),this.onFinalize=lt,this.shouldUnsubscribe=be,this._next=Ke?function(Ce){try{Ke(Ce)}catch(nt){Ue.error(nt)}}:super._next,this._error=ze?function(Ce){try{ze(Ce)}catch(nt){Ue.error(nt)}finally{this.unsubscribe()}}:super._error,this._complete=Xe?function(){try{Xe()}catch(Ce){Ue.error(Ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ke}=this;super.unsubscribe(),!Ke&&(null===(Ue=this.onFinalize)||void 0===Ue||Ue.call(this))}}}},262:(pn,dt,$)=>{$.d(dt,{K:()=>ie});var y=$(8421),B=$(5403),X=$(4482);function ie(Ue){return(0,X.e)((Ke,Xe)=>{let be,ze=null,lt=!1;ze=Ke.subscribe((0,B.x)(Xe,void 0,void 0,Ce=>{be=(0,y.Xf)(Ue(Ce,ie(Ue)(Ke))),ze?(ze.unsubscribe(),ze=null,be.subscribe(Xe)):lt=!0})),lt&&(ze.unsubscribe(),ze=null,be.subscribe(Xe))})}},4351:(pn,dt,$)=>{$.d(dt,{b:()=>X});var y=$(5577),B=$(576);function X(ie,Ue){return(0,B.m)(Ue)?(0,y.z)(ie,Ue,1):(0,y.z)(ie,1)}},6590:(pn,dt,$)=>{$.d(dt,{d:()=>X});var y=$(4482),B=$(5403);function X(ie){return(0,y.e)((Ue,Ke)=>{let Xe=!1;Ue.subscribe((0,B.x)(Ke,ze=>{Xe=!0,Ke.next(ze)},()=>{Xe||Ke.next(ie),Ke.complete()}))})}},9300:(pn,dt,$)=>{$.d(dt,{h:()=>X});var y=$(4482),B=$(5403);function X(ie,Ue){return(0,y.e)((Ke,Xe)=>{let ze=0;Ke.subscribe((0,B.x)(Xe,lt=>ie.call(Ue,lt,ze++)&&Xe.next(lt)))})}},590:(pn,dt,$)=>{$.d(dt,{P:()=>Xe});var y=$(6805),B=$(9300),X=$(5698),ie=$(6590),Ue=$(8068),Ke=$(4671);function Xe(ze,lt){const be=arguments.length>=2;return Ce=>Ce.pipe(ze?(0,B.h)((nt,Lt)=>ze(nt,Lt,Ce)):Ke.y,(0,X.q)(1),be?(0,ie.d)(lt):(0,Ue.T)(()=>new y.K))}},4004:(pn,dt,$)=>{$.d(dt,{U:()=>X});var y=$(4482),B=$(5403);function X(ie,Ue){return(0,y.e)((Ke,Xe)=>{let ze=0;Ke.subscribe((0,B.x)(Xe,lt=>{Xe.next(ie.call(Ue,lt,ze++))}))})}},8189:(pn,dt,$)=>{$.d(dt,{J:()=>X});var y=$(5577),B=$(4671);function X(ie=1/0){return(0,y.z)(B.y,ie)}},5577:(pn,dt,$)=>{$.d(dt,{z:()=>ze});var y=$(4004),B=$(8421),X=$(4482),ie=$(9672),Ue=$(5403),Xe=$(576);function ze(lt,be,Ce=1/0){return(0,Xe.m)(be)?ze((nt,Lt)=>(0,y.U)((Mt,Ft)=>be(nt,Mt,Lt,Ft))((0,B.Xf)(lt(nt,Lt))),Ce):("number"==typeof be&&(Ce=be),(0,X.e)((nt,Lt)=>function Ke(lt,be,Ce,nt,Lt,Mt,Ft,At){const Qe=[];let Nt=0,dn=0,Xt=!1;const Ee=()=>{Xt&&!Qe.length&&!Nt&&be.complete()},Me=_t=>Nt<nt?ot(_t):Qe.push(_t),ot=_t=>{Mt&&be.next(_t),Nt++;let ft=!1;(0,B.Xf)(Ce(_t,dn++)).subscribe((0,Ue.x)(be,tt=>{null==Lt||Lt(tt),Mt?Me(tt):be.next(tt)},()=>{ft=!0},void 0,()=>{if(ft)try{for(Nt--;Qe.length&&Nt<nt;){const tt=Qe.shift();Ft?(0,ie.f)(be,Ft,()=>ot(tt)):ot(tt)}Ee()}catch(tt){be.error(tt)}}))};return lt.subscribe((0,Ue.x)(be,Me,()=>{Xt=!0,Ee()})),()=>{null==At||At()}}(nt,Lt,lt,Ce)))}},5363:(pn,dt,$)=>{$.d(dt,{Q:()=>ie});var y=$(9672),B=$(4482),X=$(5403);function ie(Ue,Ke=0){return(0,B.e)((Xe,ze)=>{Xe.subscribe((0,X.x)(ze,lt=>(0,y.f)(ze,Ue,()=>ze.next(lt),Ke),()=>(0,y.f)(ze,Ue,()=>ze.complete(),Ke),lt=>(0,y.f)(ze,Ue,()=>ze.error(lt),Ke)))})}},5026:(pn,dt,$)=>{$.d(dt,{R:()=>ie});var y=$(4482),B=$(5403);function X(Ue,Ke,Xe,ze,lt){return(be,Ce)=>{let nt=Xe,Lt=Ke,Mt=0;be.subscribe((0,B.x)(Ce,Ft=>{const At=Mt++;Lt=nt?Ue(Lt,Ft,At):(nt=!0,Ft),ze&&Ce.next(Lt)},lt&&(()=>{nt&&Ce.next(Lt),Ce.complete()})))}}function ie(Ue,Ke){return(0,y.e)(X(Ue,Ke,arguments.length>=2,!0))}},3099:(pn,dt,$)=>{$.d(dt,{B:()=>Ue});var y=$(8421),B=$(7579),X=$(2961),ie=$(4482);function Ue(Xe={}){const{connector:ze=(()=>new B.x),resetOnError:lt=!0,resetOnComplete:be=!0,resetOnRefCountZero:Ce=!0}=Xe;return nt=>{let Lt,Mt,Ft,At=0,Qe=!1,Nt=!1;const dn=()=>{null==Mt||Mt.unsubscribe(),Mt=void 0},Xt=()=>{dn(),Lt=Ft=void 0,Qe=Nt=!1},Ee=()=>{const Me=Lt;Xt(),null==Me||Me.unsubscribe()};return(0,ie.e)((Me,ot)=>{At++,!Nt&&!Qe&&dn();const _t=Ft=null!=Ft?Ft:ze();ot.add(()=>{At--,0===At&&!Nt&&!Qe&&(Mt=Ke(Ee,Ce))}),_t.subscribe(ot),!Lt&&At>0&&(Lt=new X.Hp({next:ft=>_t.next(ft),error:ft=>{Nt=!0,dn(),Mt=Ke(Xt,lt,ft),_t.error(ft)},complete:()=>{Qe=!0,dn(),Mt=Ke(Xt,be),_t.complete()}}),(0,y.Xf)(Me).subscribe(Lt))})(nt)}}function Ke(Xe,ze,...lt){if(!0===ze)return void Xe();if(!1===ze)return;const be=new X.Hp({next:()=>{be.unsubscribe(),Xe()}});return ze(...lt).subscribe(be)}},8675:(pn,dt,$)=>{$.d(dt,{O:()=>ie});var y=$(7272),B=$(7669),X=$(4482);function ie(...Ue){const Ke=(0,B.yG)(Ue);return(0,X.e)((Xe,ze)=>{(Ke?(0,y.z)(Ue,Xe,Ke):(0,y.z)(Ue,Xe)).subscribe(ze)})}},9468:(pn,dt,$)=>{$.d(dt,{R:()=>B});var y=$(4482);function B(X,ie=0){return(0,y.e)((Ue,Ke)=>{Ke.add(X.schedule(()=>Ue.subscribe(Ke),ie))})}},3900:(pn,dt,$)=>{$.d(dt,{w:()=>ie});var y=$(8421),B=$(4482),X=$(5403);function ie(Ue,Ke){return(0,B.e)((Xe,ze)=>{let lt=null,be=0,Ce=!1;const nt=()=>Ce&&!lt&&ze.complete();Xe.subscribe((0,X.x)(ze,Lt=>{null==lt||lt.unsubscribe();let Mt=0;const Ft=be++;(0,y.Xf)(Ue(Lt,Ft)).subscribe(lt=(0,X.x)(ze,At=>ze.next(Ke?Ke(Lt,At,Ft,Mt++):At),()=>{lt=null,nt()}))},()=>{Ce=!0,nt()}))})}},5698:(pn,dt,$)=>{$.d(dt,{q:()=>ie});var y=$(515),B=$(4482),X=$(5403);function ie(Ue){return Ue<=0?()=>y.E:(0,B.e)((Ke,Xe)=>{let ze=0;Ke.subscribe((0,X.x)(Xe,lt=>{++ze<=Ue&&(Xe.next(lt),Ue<=ze&&Xe.complete())}))})}},8505:(pn,dt,$)=>{$.d(dt,{b:()=>Ue});var y=$(576),B=$(4482),X=$(5403),ie=$(4671);function Ue(Ke,Xe,ze){const lt=(0,y.m)(Ke)||Xe||ze?{next:Ke,error:Xe,complete:ze}:Ke;return lt?(0,B.e)((be,Ce)=>{var nt;null===(nt=lt.subscribe)||void 0===nt||nt.call(lt);let Lt=!0;be.subscribe((0,X.x)(Ce,Mt=>{var Ft;null===(Ft=lt.next)||void 0===Ft||Ft.call(lt,Mt),Ce.next(Mt)},()=>{var Mt;Lt=!1,null===(Mt=lt.complete)||void 0===Mt||Mt.call(lt),Ce.complete()},Mt=>{var Ft;Lt=!1,null===(Ft=lt.error)||void 0===Ft||Ft.call(lt,Mt),Ce.error(Mt)},()=>{var Mt,Ft;Lt&&(null===(Mt=lt.unsubscribe)||void 0===Mt||Mt.call(lt)),null===(Ft=lt.finalize)||void 0===Ft||Ft.call(lt)}))}):ie.y}},8068:(pn,dt,$)=>{$.d(dt,{T:()=>ie});var y=$(6805),B=$(4482),X=$(5403);function ie(Ke=Ue){return(0,B.e)((Xe,ze)=>{let lt=!1;Xe.subscribe((0,X.x)(ze,be=>{lt=!0,ze.next(be)},()=>lt?ze.complete():ze.error(Ke())))})}function Ue(){return new y.K}},4408:(pn,dt,$)=>{$.d(dt,{o:()=>Ue});var y=$(727);class B extends y.w0{constructor(Xe,ze){super()}schedule(Xe,ze=0){return this}}const X={setInterval(Ke,Xe,...ze){const{delegate:lt}=X;return(null==lt?void 0:lt.setInterval)?lt.setInterval(Ke,Xe,...ze):setInterval(Ke,Xe,...ze)},clearInterval(Ke){const{delegate:Xe}=X;return((null==Xe?void 0:Xe.clearInterval)||clearInterval)(Ke)},delegate:void 0};var ie=$(8737);class Ue extends B{constructor(Xe,ze){super(Xe,ze),this.scheduler=Xe,this.work=ze,this.pending=!1}schedule(Xe,ze=0){var lt;if(this.closed)return this;this.state=Xe;const be=this.id,Ce=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(Ce,be,ze)),this.pending=!0,this.delay=ze,this.id=null!==(lt=this.id)&&void 0!==lt?lt:this.requestAsyncId(Ce,this.id,ze),this}requestAsyncId(Xe,ze,lt=0){return X.setInterval(Xe.flush.bind(Xe,this),lt)}recycleAsyncId(Xe,ze,lt=0){if(null!=lt&&this.delay===lt&&!1===this.pending)return ze;null!=ze&&X.clearInterval(ze)}execute(Xe,ze){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const lt=this._execute(Xe,ze);if(lt)return lt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Xe,ze){let be,lt=!1;try{this.work(Xe)}catch(Ce){lt=!0,be=Ce||new Error("Scheduled action threw falsy error")}if(lt)return this.unsubscribe(),be}unsubscribe(){if(!this.closed){const{id:Xe,scheduler:ze}=this,{actions:lt}=ze;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(lt,this),null!=Xe&&(this.id=this.recycleAsyncId(ze,Xe,null)),this.delay=null,super.unsubscribe()}}}},7565:(pn,dt,$)=>{$.d(dt,{v:()=>X});var y=$(6063);class B{constructor(Ue,Ke=B.now){this.schedulerActionCtor=Ue,this.now=Ke}schedule(Ue,Ke=0,Xe){return new this.schedulerActionCtor(this,Ue).schedule(Xe,Ke)}}B.now=y.l.now;class X extends B{constructor(Ue,Ke=B.now){super(Ue,Ke),this.actions=[],this._active=!1}flush(Ue){const{actions:Ke}=this;if(this._active)return void Ke.push(Ue);let Xe;this._active=!0;do{if(Xe=Ue.execute(Ue.state,Ue.delay))break}while(Ue=Ke.shift());if(this._active=!1,Xe){for(;Ue=Ke.shift();)Ue.unsubscribe();throw Xe}}}},4986:(pn,dt,$)=>{$.d(dt,{z:()=>X});var y=$(4408);const X=new($(7565).v)(y.o)},6063:(pn,dt,$)=>{$.d(dt,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(pn,dt,$)=>{$.d(dt,{z:()=>y});const y={setTimeout(B,X,...ie){const{delegate:Ue}=y;return(null==Ue?void 0:Ue.setTimeout)?Ue.setTimeout(B,X,...ie):setTimeout(B,X,...ie)},clearTimeout(B){const{delegate:X}=y;return((null==X?void 0:X.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(pn,dt,$)=>{$.d(dt,{h:()=>B});const B=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pn,dt,$)=>{$.d(dt,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(pn,dt,$)=>{$.d(dt,{K:()=>B});const B=(0,$(3888).d)(X=>function(){X(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(pn,dt,$)=>{$.d(dt,{_6:()=>Ke,jO:()=>ie,yG:()=>Ue});var y=$(576);function X(Xe){return Xe[Xe.length-1]}function ie(Xe){return(0,y.m)(X(Xe))?Xe.pop():void 0}function Ue(Xe){return function B(Xe){return Xe&&(0,y.m)(Xe.schedule)}(X(Xe))?Xe.pop():void 0}function Ke(Xe,ze){return"number"==typeof X(Xe)?Xe.pop():ze}},4742:(pn,dt,$)=>{$.d(dt,{D:()=>Ue});const{isArray:y}=Array,{getPrototypeOf:B,prototype:X,keys:ie}=Object;function Ue(Xe){if(1===Xe.length){const ze=Xe[0];if(y(ze))return{args:ze,keys:null};if(function Ke(Xe){return Xe&&"object"==typeof Xe&&B(Xe)===X}(ze)){const lt=ie(ze);return{args:lt.map(be=>ze[be]),keys:lt}}}return{args:Xe,keys:null}}},8737:(pn,dt,$)=>{function y(B,X){if(B){const ie=B.indexOf(X);0<=ie&&B.splice(ie,1)}}$.d(dt,{P:()=>y})},3888:(pn,dt,$)=>{function y(B){const ie=B(Ue=>{Error.call(Ue),Ue.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}$.d(dt,{d:()=>y})},1810:(pn,dt,$)=>{function y(B,X){return B.reduce((ie,Ue,Ke)=>(ie[Ue]=X[Ke],ie),{})}$.d(dt,{n:()=>y})},2806:(pn,dt,$)=>{$.d(dt,{O:()=>ie,x:()=>X});var y=$(2416);let B=null;function X(Ue){if(y.v.useDeprecatedSynchronousErrorHandling){const Ke=!B;if(Ke&&(B={errorThrown:!1,error:null}),Ue(),Ke){const{errorThrown:Xe,error:ze}=B;if(B=null,Xe)throw ze}}else Ue()}function ie(Ue){y.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=Ue)}},9672:(pn,dt,$)=>{function y(B,X,ie,Ue=0,Ke=!1){const Xe=X.schedule(function(){ie(),Ke?B.add(this.schedule(null,Ue)):this.unsubscribe()},Ue);if(B.add(Xe),!Ke)return Xe}$.d(dt,{f:()=>y})},4671:(pn,dt,$)=>{function y(B){return B}$.d(dt,{y:()=>y})},1144:(pn,dt,$)=>{$.d(dt,{z:()=>y});const y=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(pn,dt,$)=>{$.d(dt,{D:()=>B});var y=$(576);function B(X){return Symbol.asyncIterator&&(0,y.m)(null==X?void 0:X[Symbol.asyncIterator])}},576:(pn,dt,$)=>{function y(B){return"function"==typeof B}$.d(dt,{m:()=>y})},3670:(pn,dt,$)=>{$.d(dt,{c:()=>X});var y=$(8822),B=$(576);function X(ie){return(0,B.m)(ie[y.L])}},6495:(pn,dt,$)=>{$.d(dt,{T:()=>X});var y=$(2202),B=$(576);function X(ie){return(0,B.m)(null==ie?void 0:ie[y.h])}},8239:(pn,dt,$)=>{$.d(dt,{t:()=>B});var y=$(576);function B(X){return(0,y.m)(null==X?void 0:X.then)}},3260:(pn,dt,$)=>{$.d(dt,{L:()=>ie,Q:()=>X});var y=$(7582),B=$(576);function X(Ue){return(0,y.FC)(this,arguments,function*(){const Xe=Ue.getReader();try{for(;;){const{value:ze,done:lt}=yield(0,y.qq)(Xe.read());if(lt)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(ze)}}finally{Xe.releaseLock()}})}function ie(Ue){return(0,B.m)(null==Ue?void 0:Ue.getReader)}},4482:(pn,dt,$)=>{$.d(dt,{A:()=>B,e:()=>X});var y=$(576);function B(ie){return(0,y.m)(null==ie?void 0:ie.lift)}function X(ie){return Ue=>{if(B(Ue))return Ue.lift(function(Ke){try{return ie(Ke,this)}catch(Xe){this.error(Xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(pn,dt,$)=>{$.d(dt,{Z:()=>ie});var y=$(4004);const{isArray:B}=Array;function ie(Ue){return(0,y.U)(Ke=>function X(Ue,Ke){return B(Ke)?Ue(...Ke):Ue(Ke)}(Ue,Ke))}},7849:(pn,dt,$)=>{$.d(dt,{h:()=>X});var y=$(2416),B=$(3410);function X(ie){B.z.setTimeout(()=>{const{onUnhandledError:Ue}=y.v;if(!Ue)throw ie;Ue(ie)})}},4532:(pn,dt,$)=>{function y(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(dt,{z:()=>y})},1777:(pn,dt,$)=>{$.d(dt,{LC:()=>B,SB:()=>lt,X$:()=>ie,ZE:()=>dn,ZN:()=>Nt,_j:()=>y,eR:()=>Ce,jt:()=>Ue,k1:()=>Xt,l3:()=>X,oB:()=>ze,vP:()=>Xe});class y{}class B{}const X="*";function ie(Ee,Me){return{type:7,name:Ee,definitions:Me,options:{}}}function Ue(Ee,Me=null){return{type:4,styles:Me,timings:Ee}}function Xe(Ee,Me=null){return{type:2,steps:Ee,options:Me}}function ze(Ee){return{type:6,styles:Ee,offset:null}}function lt(Ee,Me,ot){return{type:0,name:Ee,styles:Me,options:ot}}function Ce(Ee,Me,ot=null){return{type:1,expr:Ee,animation:Me,options:ot}}function Qe(Ee){Promise.resolve(null).then(Ee)}class Nt{constructor(Me=0,ot=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Me+ot}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}onStart(Me){this._onStartFns.push(Me)}onDone(Me){this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Qe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Me=>Me()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Me){this._position=this.totalTime?Me*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Me){const ot="start"==Me?this._onStartFns:this._onDoneFns;ot.forEach(_t=>_t()),ot.length=0}}class dn{constructor(Me){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Me;let ot=0,_t=0,ft=0;const tt=this.players.length;0==tt?Qe(()=>this._onFinish()):this.players.forEach(Vt=>{Vt.onDone(()=>{++ot==tt&&this._onFinish()}),Vt.onDestroy(()=>{++_t==tt&&this._onDestroy()}),Vt.onStart(()=>{++ft==tt&&this._onStart()})}),this.totalTime=this.players.reduce((Vt,It)=>Math.max(Vt,It.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}init(){this.players.forEach(Me=>Me.init())}onStart(Me){this._onStartFns.push(Me)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Me=>Me()),this._onStartFns=[])}onDone(Me){this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Me=>Me.play())}pause(){this.players.forEach(Me=>Me.pause())}restart(){this.players.forEach(Me=>Me.restart())}finish(){this._onFinish(),this.players.forEach(Me=>Me.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Me=>Me.destroy()),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this.players.forEach(Me=>Me.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Me){const ot=Me*this.totalTime;this.players.forEach(_t=>{const ft=_t.totalTime?Math.min(1,ot/_t.totalTime):1;_t.setPosition(ft)})}getPosition(){const Me=this.players.reduce((ot,_t)=>null===ot||_t.totalTime>ot.totalTime?_t:ot,null);return null!=Me?Me.getPosition():0}beforeDestroy(){this.players.forEach(Me=>{Me.beforeDestroy&&Me.beforeDestroy()})}triggerCallback(Me){const ot="start"==Me?this._onStartFns:this._onDoneFns;ot.forEach(_t=>_t()),ot.length=0}}const Xt="!"},9808:(pn,dt,$)=>{$.d(dt,{Do:()=>Ee,EM:()=>lo,HT:()=>Ue,JF:()=>Ei,JJ:()=>da,K0:()=>Xe,Mx:()=>Ui,O5:()=>Ar,PC:()=>Tr,PM:()=>$s,S$:()=>Qe,V_:()=>be,Ye:()=>Me,b0:()=>Xt,bD:()=>Co,ez:()=>Rs,lw:()=>ze,mk:()=>gs,mr:()=>dn,q:()=>X,qS:()=>rr,sg:()=>wn,uU:()=>ms,w_:()=>Ke});var y=$(5e3);let B=null;function X(){return B}function Ue(F){B||(B=F)}class Ke{}const Xe=new y.OlP("DocumentToken");let ze=(()=>{class F{historyGo(j){throw new Error("Not implemented")}}return F.\u0275fac=function(j){return new(j||F)},F.\u0275prov=y.Yz7({token:F,factory:function(){return function lt(){return(0,y.LFG)(Ce)}()},providedIn:"platform"}),F})();const be=new y.OlP("Location Initialized");let Ce=(()=>{class F extends ze{constructor(j){super(),this._doc=j,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return X().getBaseHref(this._doc)}onPopState(j){const de=X().getGlobalEventTarget(this._doc,"window");return de.addEventListener("popstate",j,!1),()=>de.removeEventListener("popstate",j)}onHashChange(j){const de=X().getGlobalEventTarget(this._doc,"window");return de.addEventListener("hashchange",j,!1),()=>de.removeEventListener("hashchange",j)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(j){this.location.pathname=j}pushState(j,de,ke){nt()?this._history.pushState(j,de,ke):this.location.hash=ke}replaceState(j,de,ke){nt()?this._history.replaceState(j,de,ke):this.location.hash=ke}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return F.\u0275fac=function(j){return new(j||F)(y.LFG(Xe))},F.\u0275prov=y.Yz7({token:F,factory:function(){return function Lt(){return new Ce((0,y.LFG)(Xe))}()},providedIn:"platform"}),F})();function nt(){return!!window.history.pushState}function Mt(F,ae){if(0==F.length)return ae;if(0==ae.length)return F;let j=0;return F.endsWith("/")&&j++,ae.startsWith("/")&&j++,2==j?F+ae.substring(1):1==j?F+ae:F+"/"+ae}function Ft(F){const ae=F.match(/#|\?|$/),j=ae&&ae.index||F.length;return F.slice(0,j-("/"===F[j-1]?1:0))+F.slice(j)}function At(F){return F&&"?"!==F[0]?"?"+F:F}let Qe=(()=>{class F{historyGo(j){throw new Error("Not implemented")}}return F.\u0275fac=function(j){return new(j||F)},F.\u0275prov=y.Yz7({token:F,factory:function(){return function Nt(F){const ae=(0,y.LFG)(Xe).location;return new Xt((0,y.LFG)(ze),ae&&ae.origin||"")}()},providedIn:"root"}),F})();const dn=new y.OlP("appBaseHref");let Xt=(()=>{class F extends Qe{constructor(j,de){if(super(),this._platformLocation=j,this._removeListenerFns=[],null==de&&(de=this._platformLocation.getBaseHrefFromDOM()),null==de)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=de}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return Mt(this._baseHref,j)}path(j=!1){const de=this._platformLocation.pathname+At(this._platformLocation.search),ke=this._platformLocation.hash;return ke&&j?`${de}${ke}`:de}pushState(j,de,ke,Tt){const Bt=this.prepareExternalUrl(ke+At(Tt));this._platformLocation.pushState(j,de,Bt)}replaceState(j,de,ke,Tt){const Bt=this.prepareExternalUrl(ke+At(Tt));this._platformLocation.replaceState(j,de,Bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var de,ke;null===(ke=(de=this._platformLocation).historyGo)||void 0===ke||ke.call(de,j)}}return F.\u0275fac=function(j){return new(j||F)(y.LFG(ze),y.LFG(dn,8))},F.\u0275prov=y.Yz7({token:F,factory:F.\u0275fac}),F})(),Ee=(()=>{class F extends Qe{constructor(j,de){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=de&&(this._baseHref=de)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let de=this._platformLocation.hash;return null==de&&(de="#"),de.length>0?de.substring(1):de}prepareExternalUrl(j){const de=Mt(this._baseHref,j);return de.length>0?"#"+de:de}pushState(j,de,ke,Tt){let Bt=this.prepareExternalUrl(ke+At(Tt));0==Bt.length&&(Bt=this._platformLocation.pathname),this._platformLocation.pushState(j,de,Bt)}replaceState(j,de,ke,Tt){let Bt=this.prepareExternalUrl(ke+At(Tt));0==Bt.length&&(Bt=this._platformLocation.pathname),this._platformLocation.replaceState(j,de,Bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var de,ke;null===(ke=(de=this._platformLocation).historyGo)||void 0===ke||ke.call(de,j)}}return F.\u0275fac=function(j){return new(j||F)(y.LFG(ze),y.LFG(dn,8))},F.\u0275prov=y.Yz7({token:F,factory:F.\u0275fac}),F})(),Me=(()=>{class F{constructor(j,de){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=j;const ke=this._platformStrategy.getBaseHref();this._platformLocation=de,this._baseHref=Ft(ft(ke)),this._platformStrategy.onPopState(Tt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Tt.state,type:Tt.type})})}path(j=!1){return this.normalize(this._platformStrategy.path(j))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(j,de=""){return this.path()==this.normalize(j+At(de))}normalize(j){return F.stripTrailingSlash(function _t(F,ae){return F&&ae.startsWith(F)?ae.substring(F.length):ae}(this._baseHref,ft(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._platformStrategy.prepareExternalUrl(j)}go(j,de="",ke=null){this._platformStrategy.pushState(ke,"",j,de),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+At(de)),ke)}replaceState(j,de="",ke=null){this._platformStrategy.replaceState(ke,"",j,de),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+At(de)),ke)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(j=0){var de,ke;null===(ke=(de=this._platformStrategy).historyGo)||void 0===ke||ke.call(de,j)}onUrlChange(j){this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(de=>{this._notifyUrlChangeListeners(de.url,de.state)}))}_notifyUrlChangeListeners(j="",de){this._urlChangeListeners.forEach(ke=>ke(j,de))}subscribe(j,de,ke){return this._subject.subscribe({next:j,error:de,complete:ke})}}return F.normalizeQueryParams=At,F.joinWithSlash=Mt,F.stripTrailingSlash=Ft,F.\u0275fac=function(j){return new(j||F)(y.LFG(Qe),y.LFG(ze))},F.\u0275prov=y.Yz7({token:F,factory:function(){return function ot(){return new Me((0,y.LFG)(Qe),(0,y.LFG)(ze))}()},providedIn:"root"}),F})();function ft(F){return F.replace(/\/index.html$/,"")}var Vt=(()=>((Vt=Vt||{})[Vt.Decimal=0]="Decimal",Vt[Vt.Percent=1]="Percent",Vt[Vt.Currency=2]="Currency",Vt[Vt.Scientific=3]="Scientific",Vt))(),On=(()=>((On=On||{})[On.Format=0]="Format",On[On.Standalone=1]="Standalone",On))(),Ht=(()=>((Ht=Ht||{})[Ht.Narrow=0]="Narrow",Ht[Ht.Abbreviated=1]="Abbreviated",Ht[Ht.Wide=2]="Wide",Ht[Ht.Short=3]="Short",Ht))(),xn=(()=>((xn=xn||{})[xn.Short=0]="Short",xn[xn.Medium=1]="Medium",xn[xn.Long=2]="Long",xn[xn.Full=3]="Full",xn))(),on=(()=>((on=on||{})[on.Decimal=0]="Decimal",on[on.Group=1]="Group",on[on.List=2]="List",on[on.PercentSign=3]="PercentSign",on[on.PlusSign=4]="PlusSign",on[on.MinusSign=5]="MinusSign",on[on.Exponential=6]="Exponential",on[on.SuperscriptingExponent=7]="SuperscriptingExponent",on[on.PerMille=8]="PerMille",on[on.Infinity=9]="Infinity",on[on.NaN=10]="NaN",on[on.TimeSeparator=11]="TimeSeparator",on[on.CurrencyDecimal=12]="CurrencyDecimal",on[on.CurrencyGroup=13]="CurrencyGroup",on))();function De(F,ae){return Pn((0,y.cg1)(F)[y.wAp.DateFormat],ae)}function ve(F,ae){return Pn((0,y.cg1)(F)[y.wAp.TimeFormat],ae)}function xe(F,ae){return Pn((0,y.cg1)(F)[y.wAp.DateTimeFormat],ae)}function pt(F,ae){const j=(0,y.cg1)(F),de=j[y.wAp.NumberSymbols][ae];if(void 0===de){if(ae===on.CurrencyDecimal)return j[y.wAp.NumberSymbols][on.Decimal];if(ae===on.CurrencyGroup)return j[y.wAp.NumberSymbols][on.Group]}return de}function Ln(F){if(!F[y.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${F[y.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Pn(F,ae){for(let j=ae;j>-1;j--)if(void 0!==F[j])return F[j];throw new Error("Locale data API: locale data undefined")}function Mn(F){const[ae,j]=F.split(":");return{hours:+ae,minutes:+j}}const He=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ge={},at=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var St=(()=>((St=St||{})[St.Short=0]="Short",St[St.ShortGMT=1]="ShortGMT",St[St.Long=2]="Long",St[St.Extended=3]="Extended",St))(),zt=(()=>((zt=zt||{})[zt.FullYear=0]="FullYear",zt[zt.Month=1]="Month",zt[zt.Date=2]="Date",zt[zt.Hours=3]="Hours",zt[zt.Minutes=4]="Minutes",zt[zt.Seconds=5]="Seconds",zt[zt.FractionalSeconds=6]="FractionalSeconds",zt[zt.Day=7]="Day",zt))(),nn=(()=>((nn=nn||{})[nn.DayPeriods=0]="DayPeriods",nn[nn.Days=1]="Days",nn[nn.Months=2]="Months",nn[nn.Eras=3]="Eras",nn))();function Nr(F,ae,j,de){let ke=function ne(F){if(Se(F))return F;if("number"==typeof F&&!isNaN(F))return new Date(F);if("string"==typeof F){if(F=F.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(F)){const[ke,Tt=1,Bt=1]=F.split("-").map(Cn=>+Cn);return Xn(ke,Tt-1,Bt)}const j=parseFloat(F);if(!isNaN(F-j))return new Date(j);let de;if(de=F.match(He))return function se(F){const ae=new Date(0);let j=0,de=0;const ke=F[8]?ae.setUTCFullYear:ae.setFullYear,Tt=F[8]?ae.setUTCHours:ae.setHours;F[9]&&(j=Number(F[9]+F[10]),de=Number(F[9]+F[11])),ke.call(ae,Number(F[1]),Number(F[2])-1,Number(F[3]));const Bt=Number(F[4]||0)-j,Cn=Number(F[5]||0)-de,Fr=Number(F[6]||0),Vr=Math.floor(1e3*parseFloat("0."+(F[7]||0)));return Tt.call(ae,Bt,Cn,Fr,Vr),ae}(de)}const ae=new Date(F);if(!Se(ae))throw new Error(`Unable to convert "${F}" into a date`);return ae}(F);ae=Wn(j,ae)||ae;let Cn,Bt=[];for(;ae;){if(Cn=at.exec(ae),!Cn){Bt.push(ae);break}{Bt=Bt.concat(Cn.slice(1));const yr=Bt.pop();if(!yr)break;ae=yr}}let Fr=ke.getTimezoneOffset();de&&(Fr=he(de,Fr),ke=function G(F,ae,j){const de=j?-1:1,ke=F.getTimezoneOffset();return function ge(F,ae){return(F=new Date(F.getTime())).setMinutes(F.getMinutes()+ae),F}(F,de*(he(ae,ke)-ke))}(ke,de,!0));let Vr="";return Bt.forEach(yr=>{const Mr=function Ae(F){if(Pe[F])return Pe[F];let ae;switch(F){case"G":case"GG":case"GGG":ae=sr(nn.Eras,Ht.Abbreviated);break;case"GGGG":ae=sr(nn.Eras,Ht.Wide);break;case"GGGGG":ae=sr(nn.Eras,Ht.Narrow);break;case"y":ae=Yt(zt.FullYear,1,0,!1,!0);break;case"yy":ae=Yt(zt.FullYear,2,0,!0,!0);break;case"yyy":ae=Yt(zt.FullYear,3,0,!1,!0);break;case"yyyy":ae=Yt(zt.FullYear,4,0,!1,!0);break;case"Y":ae=Gr(1);break;case"YY":ae=Gr(2,!0);break;case"YYY":ae=Gr(3);break;case"YYYY":ae=Gr(4);break;case"M":case"L":ae=Yt(zt.Month,1,1);break;case"MM":case"LL":ae=Yt(zt.Month,2,1);break;case"MMM":ae=sr(nn.Months,Ht.Abbreviated);break;case"MMMM":ae=sr(nn.Months,Ht.Wide);break;case"MMMMM":ae=sr(nn.Months,Ht.Narrow);break;case"LLL":ae=sr(nn.Months,Ht.Abbreviated,On.Standalone);break;case"LLLL":ae=sr(nn.Months,Ht.Wide,On.Standalone);break;case"LLLLL":ae=sr(nn.Months,Ht.Narrow,On.Standalone);break;case"w":ae=Vi(1);break;case"ww":ae=Vi(2);break;case"W":ae=Vi(1,!0);break;case"d":ae=Yt(zt.Date,1);break;case"dd":ae=Yt(zt.Date,2);break;case"c":case"cc":ae=Yt(zt.Day,1);break;case"ccc":ae=sr(nn.Days,Ht.Abbreviated,On.Standalone);break;case"cccc":ae=sr(nn.Days,Ht.Wide,On.Standalone);break;case"ccccc":ae=sr(nn.Days,Ht.Narrow,On.Standalone);break;case"cccccc":ae=sr(nn.Days,Ht.Short,On.Standalone);break;case"E":case"EE":case"EEE":ae=sr(nn.Days,Ht.Abbreviated);break;case"EEEE":ae=sr(nn.Days,Ht.Wide);break;case"EEEEE":ae=sr(nn.Days,Ht.Narrow);break;case"EEEEEE":ae=sr(nn.Days,Ht.Short);break;case"a":case"aa":case"aaa":ae=sr(nn.DayPeriods,Ht.Abbreviated);break;case"aaaa":ae=sr(nn.DayPeriods,Ht.Wide);break;case"aaaaa":ae=sr(nn.DayPeriods,Ht.Narrow);break;case"b":case"bb":case"bbb":ae=sr(nn.DayPeriods,Ht.Abbreviated,On.Standalone,!0);break;case"bbbb":ae=sr(nn.DayPeriods,Ht.Wide,On.Standalone,!0);break;case"bbbbb":ae=sr(nn.DayPeriods,Ht.Narrow,On.Standalone,!0);break;case"B":case"BB":case"BBB":ae=sr(nn.DayPeriods,Ht.Abbreviated,On.Format,!0);break;case"BBBB":ae=sr(nn.DayPeriods,Ht.Wide,On.Format,!0);break;case"BBBBB":ae=sr(nn.DayPeriods,Ht.Narrow,On.Format,!0);break;case"h":ae=Yt(zt.Hours,1,-12);break;case"hh":ae=Yt(zt.Hours,2,-12);break;case"H":ae=Yt(zt.Hours,1);break;case"HH":ae=Yt(zt.Hours,2);break;case"m":ae=Yt(zt.Minutes,1);break;case"mm":ae=Yt(zt.Minutes,2);break;case"s":ae=Yt(zt.Seconds,1);break;case"ss":ae=Yt(zt.Seconds,2);break;case"S":ae=Yt(zt.FractionalSeconds,1);break;case"SS":ae=Yt(zt.FractionalSeconds,2);break;case"SSS":ae=Yt(zt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ae=lr(St.Short);break;case"ZZZZZ":ae=lr(St.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ae=lr(St.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ae=lr(St.Long);break;default:return null}return Pe[F]=ae,ae}(yr);Vr+=Mr?Mr(ke,j,Fr):"''"===yr?"'":yr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Vr}function Xn(F,ae,j){const de=new Date(0);return de.setFullYear(F,ae,j),de.setHours(0,0,0),de}function Wn(F,ae){const j=function kn(F){return(0,y.cg1)(F)[y.wAp.LocaleId]}(F);if(Ge[j]=Ge[j]||{},Ge[j][ae])return Ge[j][ae];let de="";switch(ae){case"shortDate":de=De(F,xn.Short);break;case"mediumDate":de=De(F,xn.Medium);break;case"longDate":de=De(F,xn.Long);break;case"fullDate":de=De(F,xn.Full);break;case"shortTime":de=ve(F,xn.Short);break;case"mediumTime":de=ve(F,xn.Medium);break;case"longTime":de=ve(F,xn.Long);break;case"fullTime":de=ve(F,xn.Full);break;case"short":const ke=Wn(F,"shortTime"),Tt=Wn(F,"shortDate");de=hi(xe(F,xn.Short),[ke,Tt]);break;case"medium":const Bt=Wn(F,"mediumTime"),Cn=Wn(F,"mediumDate");de=hi(xe(F,xn.Medium),[Bt,Cn]);break;case"long":const Fr=Wn(F,"longTime"),Vr=Wn(F,"longDate");de=hi(xe(F,xn.Long),[Fr,Vr]);break;case"full":const yr=Wn(F,"fullTime"),Mr=Wn(F,"fullDate");de=hi(xe(F,xn.Full),[yr,Mr])}return de&&(Ge[j][ae]=de),de}function hi(F,ae){return ae&&(F=F.replace(/\{([^}]+)}/g,function(j,de){return null!=ae&&de in ae?ae[de]:j})),F}function hr(F,ae,j="-",de,ke){let Tt="";(F<0||ke&&F<=0)&&(ke?F=1-F:(F=-F,Tt=j));let Bt=String(F);for(;Bt.length<ae;)Bt="0"+Bt;return de&&(Bt=Bt.substr(Bt.length-ae)),Tt+Bt}function Yt(F,ae,j=0,de=!1,ke=!1){return function(Tt,Bt){let Cn=function Or(F,ae){switch(F){case zt.FullYear:return ae.getFullYear();case zt.Month:return ae.getMonth();case zt.Date:return ae.getDate();case zt.Hours:return ae.getHours();case zt.Minutes:return ae.getMinutes();case zt.Seconds:return ae.getSeconds();case zt.FractionalSeconds:return ae.getMilliseconds();case zt.Day:return ae.getDay();default:throw new Error(`Unknown DateType value "${F}".`)}}(F,Tt);if((j>0||Cn>-j)&&(Cn+=j),F===zt.Hours)0===Cn&&-12===j&&(Cn=12);else if(F===zt.FractionalSeconds)return function br(F,ae){return hr(F,3).substr(0,ae)}(Cn,ae);const Fr=pt(Bt,on.MinusSign);return hr(Cn,ae,Fr,de,ke)}}function sr(F,ae,j=On.Format,de=!1){return function(ke,Tt){return function Er(F,ae,j,de,ke,Tt){switch(j){case nn.Months:return function un(F,ae,j){const de=(0,y.cg1)(F),Tt=Pn([de[y.wAp.MonthsFormat],de[y.wAp.MonthsStandalone]],ae);return Pn(Tt,j)}(ae,ke,de)[F.getMonth()];case nn.Days:return function tr(F,ae,j){const de=(0,y.cg1)(F),Tt=Pn([de[y.wAp.DaysFormat],de[y.wAp.DaysStandalone]],ae);return Pn(Tt,j)}(ae,ke,de)[F.getDay()];case nn.DayPeriods:const Bt=F.getHours(),Cn=F.getMinutes();if(Tt){const Vr=function Lr(F){const ae=(0,y.cg1)(F);return Ln(ae),(ae[y.wAp.ExtraData][2]||[]).map(de=>"string"==typeof de?Mn(de):[Mn(de[0]),Mn(de[1])])}(ae),yr=function En(F,ae,j){const de=(0,y.cg1)(F);Ln(de);const Tt=Pn([de[y.wAp.ExtraData][0],de[y.wAp.ExtraData][1]],ae)||[];return Pn(Tt,j)||[]}(ae,ke,de),Mr=Vr.findIndex(Mi=>{if(Array.isArray(Mi)){const[Si,ii]=Mi,yo=Bt>=Si.hours&&Cn>=Si.minutes,Fi=Bt<ii.hours||Bt===ii.hours&&Cn<ii.minutes;if(Si.hours<ii.hours){if(yo&&Fi)return!0}else if(yo||Fi)return!0}else if(Mi.hours===Bt&&Mi.minutes===Cn)return!0;return!1});if(-1!==Mr)return yr[Mr]}return function gr(F,ae,j){const de=(0,y.cg1)(F),Tt=Pn([de[y.wAp.DayPeriodsFormat],de[y.wAp.DayPeriodsStandalone]],ae);return Pn(Tt,j)}(ae,ke,de)[Bt<12?0:1];case nn.Eras:return function it(F,ae){return Pn((0,y.cg1)(F)[y.wAp.Eras],ae)}(ae,de)[F.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${j}`)}}(ke,Tt,F,ae,j,de)}}function lr(F){return function(ae,j,de){const ke=-1*de,Tt=pt(j,on.MinusSign),Bt=ke>0?Math.floor(ke/60):Math.ceil(ke/60);switch(F){case St.Short:return(ke>=0?"+":"")+hr(Bt,2,Tt)+hr(Math.abs(ke%60),2,Tt);case St.ShortGMT:return"GMT"+(ke>=0?"+":"")+hr(Bt,1,Tt);case St.Long:return"GMT"+(ke>=0?"+":"")+hr(Bt,2,Tt)+":"+hr(Math.abs(ke%60),2,Tt);case St.Extended:return 0===de?"Z":(ke>=0?"+":"")+hr(Bt,2,Tt)+":"+hr(Math.abs(ke%60),2,Tt);default:throw new Error(`Unknown zone width "${F}"`)}}}function ji(F){return Xn(F.getFullYear(),F.getMonth(),F.getDate()+(4-F.getDay()))}function Vi(F,ae=!1){return function(j,de){let ke;if(ae){const Tt=new Date(j.getFullYear(),j.getMonth(),1).getDay()-1,Bt=j.getDate();ke=1+Math.floor((Bt+Tt)/7)}else{const Tt=ji(j),Bt=function fi(F){const ae=Xn(F,0,1).getDay();return Xn(F,0,1+(ae<=4?4:11)-ae)}(Tt.getFullYear()),Cn=Tt.getTime()-Bt.getTime();ke=1+Math.round(Cn/6048e5)}return hr(ke,F,pt(de,on.MinusSign))}}function Gr(F,ae=!1){return function(j,de){return hr(ji(j).getFullYear(),F,pt(de,on.MinusSign),ae)}}const Pe={};function he(F,ae){F=F.replace(/:/g,"");const j=Date.parse("Jan 01, 1970 00:00:00 "+F)/6e4;return isNaN(j)?ae:j}function Se(F){return F instanceof Date&&!isNaN(F.valueOf())}const ht=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ii(F){const ae=parseInt(F);if(isNaN(ae))throw new Error("Invalid integer literal when parsing "+F);return ae}function rr(F,ae,j){return(0,y.dwT)(F,ae,j)}function Ui(F,ae){ae=encodeURIComponent(ae);for(const j of F.split(";")){const de=j.indexOf("="),[ke,Tt]=-1==de?[j,""]:[j.slice(0,de),j.slice(de+1)];if(ke.trim()===ae)return decodeURIComponent(Tt)}return null}let gs=(()=>{class F{constructor(j,de,ke,Tt){this._iterableDiffers=j,this._keyValueDiffers=de,this._ngEl=ke,this._renderer=Tt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(j){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof j?j.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(j){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof j?j.split(/\s+/):j,this._rawClass&&((0,y.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const j=this._iterableDiffer.diff(this._rawClass);j&&this._applyIterableChanges(j)}else if(this._keyValueDiffer){const j=this._keyValueDiffer.diff(this._rawClass);j&&this._applyKeyValueChanges(j)}}_applyKeyValueChanges(j){j.forEachAddedItem(de=>this._toggleClass(de.key,de.currentValue)),j.forEachChangedItem(de=>this._toggleClass(de.key,de.currentValue)),j.forEachRemovedItem(de=>{de.previousValue&&this._toggleClass(de.key,!1)})}_applyIterableChanges(j){j.forEachAddedItem(de=>{if("string"!=typeof de.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,y.AaK)(de.item)}`);this._toggleClass(de.item,!0)}),j.forEachRemovedItem(de=>this._toggleClass(de.item,!1))}_applyClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(de=>this._toggleClass(de,!0)):Object.keys(j).forEach(de=>this._toggleClass(de,!!j[de])))}_removeClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(de=>this._toggleClass(de,!1)):Object.keys(j).forEach(de=>this._toggleClass(de,!1)))}_toggleClass(j,de){(j=j.trim())&&j.split(/\s+/g).forEach(ke=>{de?this._renderer.addClass(this._ngEl.nativeElement,ke):this._renderer.removeClass(this._ngEl.nativeElement,ke)})}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),F})();class Dr{constructor(ae,j,de,ke){this.$implicit=ae,this.ngForOf=j,this.index=de,this.count=ke}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wn=(()=>{class F{constructor(j,de,ke){this._viewContainer=j,this._template=de,this._differs=ke,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const de=this._viewContainer;j.forEachOperation((ke,Tt,Bt)=>{if(null==ke.previousIndex)de.createEmbeddedView(this._template,new Dr(ke.item,this._ngForOf,-1,-1),null===Bt?void 0:Bt);else if(null==Bt)de.remove(null===Tt?void 0:Tt);else if(null!==Tt){const Cn=de.get(Tt);de.move(Cn,Bt),ar(Cn,ke)}});for(let ke=0,Tt=de.length;ke<Tt;ke++){const Cn=de.get(ke).context;Cn.index=ke,Cn.count=Tt,Cn.ngForOf=this._ngForOf}j.forEachIdentityChange(ke=>{ar(de.get(ke.currentIndex),ke)})}static ngTemplateContextGuard(j,de){return!0}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),F})();function ar(F,ae){F.context.$implicit=ae.item}let Ar=(()=>{class F{constructor(j,de){this._viewContainer=j,this._context=new ai,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=de}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){rt("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){rt("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,de){return!0}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.s_b),y.Y36(y.Rgc))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),F})();class ai{constructor(){this.$implicit=null,this.ngIf=null}}function rt(F,ae){if(ae&&!ae.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,y.AaK)(ae)}'.`)}let Tr=(()=>{class F{constructor(j,de,ke){this._ngEl=j,this._differs=de,this._renderer=ke,this._ngStyle=null,this._differ=null}set ngStyle(j){this._ngStyle=j,!this._differ&&j&&(this._differ=this._differs.find(j).create())}ngDoCheck(){if(this._differ){const j=this._differ.diff(this._ngStyle);j&&this._applyChanges(j)}}_setStyle(j,de){const[ke,Tt]=j.split(".");null!=(de=null!=de&&Tt?`${de}${Tt}`:de)?this._renderer.setStyle(this._ngEl.nativeElement,ke,de):this._renderer.removeStyle(this._ngEl.nativeElement,ke)}_applyChanges(j){j.forEachRemovedItem(de=>this._setStyle(de.key,null)),j.forEachAddedItem(de=>this._setStyle(de.key,de.currentValue)),j.forEachChangedItem(de=>this._setStyle(de.key,de.currentValue))}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.SBq),y.Y36(y.aQg),y.Y36(y.Qsj))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),F})();function vi(F,ae){return new y.vHH(2100,"")}const jo=new y.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ms=(()=>{class F{constructor(j,de){this.locale=j,this.defaultTimezone=de}transform(j,de="mediumDate",ke,Tt){var Bt;if(null==j||""===j||j!=j)return null;try{return Nr(j,de,Tt||this.locale,null!==(Bt=null!=ke?ke:this.defaultTimezone)&&void 0!==Bt?Bt:void 0)}catch(Cn){throw vi()}}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.soG,16),y.Y36(jo,24))},F.\u0275pipe=y.Yjl({name:"date",type:F,pure:!0}),F})(),da=(()=>{class F{constructor(j){this._locale=j}transform(j,de,ke){if(!function js(F){return!(null==F||""===F||F!=F)}(j))return null;ke=ke||this._locale;try{return function sn(F,ae,j){return function gt(F,ae,j,de,ke,Tt,Bt=!1){let Cn="",Fr=!1;if(isFinite(F)){let Vr=function zr(F){let de,ke,Tt,Bt,Cn,ae=Math.abs(F)+"",j=0;for((ke=ae.indexOf("."))>-1&&(ae=ae.replace(".","")),(Tt=ae.search(/e/i))>0?(ke<0&&(ke=Tt),ke+=+ae.slice(Tt+1),ae=ae.substring(0,Tt)):ke<0&&(ke=ae.length),Tt=0;"0"===ae.charAt(Tt);Tt++);if(Tt===(Cn=ae.length))de=[0],ke=1;else{for(Cn--;"0"===ae.charAt(Cn);)Cn--;for(ke-=Tt,de=[],Bt=0;Tt<=Cn;Tt++,Bt++)de[Bt]=Number(ae.charAt(Tt))}return ke>22&&(de=de.splice(0,21),j=ke-1,ke=1),{digits:de,exponent:j,integerLen:ke}}(F);Bt&&(Vr=function or(F){if(0===F.digits[0])return F;const ae=F.digits.length-F.integerLen;return F.exponent?F.exponent+=2:(0===ae?F.digits.push(0,0):1===ae&&F.digits.push(0),F.integerLen+=2),F}(Vr));let yr=ae.minInt,Mr=ae.minFrac,Mi=ae.maxFrac;if(Tt){const _s=Tt.match(ht);if(null===_s)throw new Error(`${Tt} is not a valid digit info`);const rs=_s[1],vs=_s[3],qo=_s[5];null!=rs&&(yr=Ii(rs)),null!=vs&&(Mr=Ii(vs)),null!=qo?Mi=Ii(qo):null!=vs&&Mr>Mi&&(Mi=Mr)}!function wr(F,ae,j){if(ae>j)throw new Error(`The minimum number of digits after fraction (${ae}) is higher than the maximum (${j}).`);let de=F.digits,ke=de.length-F.integerLen;const Tt=Math.min(Math.max(ae,ke),j);let Bt=Tt+F.integerLen,Cn=de[Bt];if(Bt>0){de.splice(Math.max(F.integerLen,Bt));for(let Mr=Bt;Mr<de.length;Mr++)de[Mr]=0}else{ke=Math.max(0,ke),F.integerLen=1,de.length=Math.max(1,Bt=Tt+1),de[0]=0;for(let Mr=1;Mr<Bt;Mr++)de[Mr]=0}if(Cn>=5)if(Bt-1<0){for(let Mr=0;Mr>Bt;Mr--)de.unshift(0),F.integerLen++;de.unshift(1),F.integerLen++}else de[Bt-1]++;for(;ke<Math.max(0,Tt);ke++)de.push(0);let Fr=0!==Tt;const Vr=ae+F.integerLen,yr=de.reduceRight(function(Mr,Mi,Si,ii){return ii[Si]=(Mi+=Mr)<10?Mi:Mi-10,Fr&&(0===ii[Si]&&Si>=Vr?ii.pop():Fr=!1),Mi>=10?1:0},0);yr&&(de.unshift(yr),F.integerLen++)}(Vr,Mr,Mi);let Si=Vr.digits,ii=Vr.integerLen;const yo=Vr.exponent;let Fi=[];for(Fr=Si.every(_s=>!_s);ii<yr;ii++)Si.unshift(0);for(;ii<0;ii++)Si.unshift(0);ii>0?Fi=Si.splice(ii,Si.length):(Fi=Si,Si=[0]);const ur=[];for(Si.length>=ae.lgSize&&ur.unshift(Si.splice(-ae.lgSize,Si.length).join(""));Si.length>ae.gSize;)ur.unshift(Si.splice(-ae.gSize,Si.length).join(""));Si.length&&ur.unshift(Si.join("")),Cn=ur.join(pt(j,de)),Fi.length&&(Cn+=pt(j,ke)+Fi.join("")),yo&&(Cn+=pt(j,on.Exponential)+"+"+yo)}else Cn=pt(j,on.Infinity);return Cn=F<0&&!Fr?ae.negPre+Cn+ae.negSuf:ae.posPre+Cn+ae.posSuf,Cn}(F,function Tn(F,ae="-"){const j={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},de=F.split(";"),ke=de[0],Tt=de[1],Bt=-1!==ke.indexOf(".")?ke.split("."):[ke.substring(0,ke.lastIndexOf("0")+1),ke.substring(ke.lastIndexOf("0")+1)],Cn=Bt[0],Fr=Bt[1]||"";j.posPre=Cn.substr(0,Cn.indexOf("#"));for(let yr=0;yr<Fr.length;yr++){const Mr=Fr.charAt(yr);"0"===Mr?j.minFrac=j.maxFrac=yr+1:"#"===Mr?j.maxFrac=yr+1:j.posSuf+=Mr}const Vr=Cn.split(",");if(j.gSize=Vr[1]?Vr[1].length:0,j.lgSize=Vr[2]||Vr[1]?(Vr[2]||Vr[1]).length:0,Tt){const yr=ke.length-j.posPre.length-j.posSuf.length,Mr=Tt.indexOf("#");j.negPre=Tt.substr(0,Mr).replace(/'/g,""),j.negSuf=Tt.substr(Mr+yr).replace(/'/g,"")}else j.negPre=ae+j.posPre,j.negSuf=j.posSuf;return j}(function tn(F,ae){return(0,y.cg1)(F)[y.wAp.NumberFormats][ae]}(ae,Vt.Decimal),pt(ae,on.MinusSign)),ae,on.Group,on.Decimal,j)}(function Fs(F){if("string"==typeof F&&!isNaN(Number(F)-parseFloat(F)))return Number(F);if("number"!=typeof F)throw new Error(`${F} is not a number`);return F}(j),ke,de)}catch(Tt){throw vi()}}}return F.\u0275fac=function(j){return new(j||F)(y.Y36(y.soG,16))},F.\u0275pipe=y.Yjl({name:"number",type:F,pure:!0}),F})();let Rs=(()=>{class F{}return F.\u0275fac=function(j){return new(j||F)},F.\u0275mod=y.oAB({type:F}),F.\u0275inj=y.cJS({}),F})();const Co="browser";function $s(F){return"server"===F}let lo=(()=>{class F{}return F.\u0275prov=(0,y.Yz7)({token:F,providedIn:"root",factory:()=>new Wr((0,y.LFG)(Xe),window)}),F})();class Wr{constructor(ae,j){this.document=ae,this.window=j,this.offset=()=>[0,0]}setOffset(ae){this.offset=Array.isArray(ae)?()=>ae:ae}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ae){this.supportsScrolling()&&this.window.scrollTo(ae[0],ae[1])}scrollToAnchor(ae){if(!this.supportsScrolling())return;const j=function ys(F,ae){const j=F.getElementById(ae)||F.getElementsByName(ae)[0];if(j)return j;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const de=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let ke=de.currentNode;for(;ke;){const Tt=ke.shadowRoot;if(Tt){const Bt=Tt.getElementById(ae)||Tt.querySelector(`[name="${ae}"]`);if(Bt)return Bt}ke=de.nextNode()}}return null}(this.document,ae);j&&(this.scrollToElement(j),j.focus())}setHistoryScrollRestoration(ae){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=ae)}}scrollToElement(ae){const j=ae.getBoundingClientRect(),de=j.left+this.window.pageXOffset,ke=j.top+this.window.pageYOffset,Tt=this.offset();this.window.scrollTo(de-Tt[0],ke-Tt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ae=ns(this.window.history)||ns(Object.getPrototypeOf(this.window.history));return!(!ae||!ae.writable&&!ae.set)}catch(ae){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ae){return!1}}}function ns(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class Ei{}},520:(pn,dt,$)=>{$.d(dt,{JF:()=>Mn,TP:()=>kn,eN:()=>on});var y=$(9808),B=$(5e3),X=$(9646),ie=$(8306),Ue=$(4351),Ke=$(9300),Xe=$(4004);class ze{}class lt{}class be{constructor(He){this.normalizedNames=new Map,this.lazyUpdate=null,He?this.lazyInit="string"==typeof He?()=>{this.headers=new Map,He.split("\n").forEach(Ge=>{const at=Ge.indexOf(":");if(at>0){const St=Ge.slice(0,at),zt=St.toLowerCase(),nn=Ge.slice(at+1).trim();this.maybeSetNormalizedName(St,zt),this.headers.has(zt)?this.headers.get(zt).push(nn):this.headers.set(zt,[nn])}})}:()=>{this.headers=new Map,Object.keys(He).forEach(Ge=>{let at=He[Ge];const St=Ge.toLowerCase();"string"==typeof at&&(at=[at]),at.length>0&&(this.headers.set(St,at),this.maybeSetNormalizedName(Ge,St))})}:this.headers=new Map}has(He){return this.init(),this.headers.has(He.toLowerCase())}get(He){this.init();const Ge=this.headers.get(He.toLowerCase());return Ge&&Ge.length>0?Ge[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(He){return this.init(),this.headers.get(He.toLowerCase())||null}append(He,Ge){return this.clone({name:He,value:Ge,op:"a"})}set(He,Ge){return this.clone({name:He,value:Ge,op:"s"})}delete(He,Ge){return this.clone({name:He,value:Ge,op:"d"})}maybeSetNormalizedName(He,Ge){this.normalizedNames.has(Ge)||this.normalizedNames.set(Ge,He)}init(){this.lazyInit&&(this.lazyInit instanceof be?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(He=>this.applyUpdate(He)),this.lazyUpdate=null))}copyFrom(He){He.init(),Array.from(He.headers.keys()).forEach(Ge=>{this.headers.set(Ge,He.headers.get(Ge)),this.normalizedNames.set(Ge,He.normalizedNames.get(Ge))})}clone(He){const Ge=new be;return Ge.lazyInit=this.lazyInit&&this.lazyInit instanceof be?this.lazyInit:this,Ge.lazyUpdate=(this.lazyUpdate||[]).concat([He]),Ge}applyUpdate(He){const Ge=He.name.toLowerCase();switch(He.op){case"a":case"s":let at=He.value;if("string"==typeof at&&(at=[at]),0===at.length)return;this.maybeSetNormalizedName(He.name,Ge);const St=("a"===He.op?this.headers.get(Ge):void 0)||[];St.push(...at),this.headers.set(Ge,St);break;case"d":const zt=He.value;if(zt){let nn=this.headers.get(Ge);if(!nn)return;nn=nn.filter(Nr=>-1===zt.indexOf(Nr)),0===nn.length?(this.headers.delete(Ge),this.normalizedNames.delete(Ge)):this.headers.set(Ge,nn)}else this.headers.delete(Ge),this.normalizedNames.delete(Ge)}}forEach(He){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ge=>He(this.normalizedNames.get(Ge),this.headers.get(Ge)))}}class Ce{encodeKey(He){return Ft(He)}encodeValue(He){return Ft(He)}decodeKey(He){return decodeURIComponent(He)}decodeValue(He){return decodeURIComponent(He)}}const Lt=/%(\d[a-f0-9])/gi,Mt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ft(Pt){return encodeURIComponent(Pt).replace(Lt,(He,Ge)=>{var at;return null!==(at=Mt[Ge])&&void 0!==at?at:He})}function At(Pt){return`${Pt}`}class Qe{constructor(He={}){if(this.updates=null,this.cloneFrom=null,this.encoder=He.encoder||new Ce,He.fromString){if(He.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nt(Pt,He){const Ge=new Map;return Pt.length>0&&Pt.replace(/^\?/,"").split("&").forEach(St=>{const zt=St.indexOf("="),[nn,Nr]=-1==zt?[He.decodeKey(St),""]:[He.decodeKey(St.slice(0,zt)),He.decodeValue(St.slice(zt+1))],Xn=Ge.get(nn)||[];Xn.push(Nr),Ge.set(nn,Xn)}),Ge}(He.fromString,this.encoder)}else He.fromObject?(this.map=new Map,Object.keys(He.fromObject).forEach(Ge=>{const at=He.fromObject[Ge];this.map.set(Ge,Array.isArray(at)?at:[at])})):this.map=null}has(He){return this.init(),this.map.has(He)}get(He){this.init();const Ge=this.map.get(He);return Ge?Ge[0]:null}getAll(He){return this.init(),this.map.get(He)||null}keys(){return this.init(),Array.from(this.map.keys())}append(He,Ge){return this.clone({param:He,value:Ge,op:"a"})}appendAll(He){const Ge=[];return Object.keys(He).forEach(at=>{const St=He[at];Array.isArray(St)?St.forEach(zt=>{Ge.push({param:at,value:zt,op:"a"})}):Ge.push({param:at,value:St,op:"a"})}),this.clone(Ge)}set(He,Ge){return this.clone({param:He,value:Ge,op:"s"})}delete(He,Ge){return this.clone({param:He,value:Ge,op:"d"})}toString(){return this.init(),this.keys().map(He=>{const Ge=this.encoder.encodeKey(He);return this.map.get(He).map(at=>Ge+"="+this.encoder.encodeValue(at)).join("&")}).filter(He=>""!==He).join("&")}clone(He){const Ge=new Qe({encoder:this.encoder});return Ge.cloneFrom=this.cloneFrom||this,Ge.updates=(this.updates||[]).concat(He),Ge}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(He=>this.map.set(He,this.cloneFrom.map.get(He))),this.updates.forEach(He=>{switch(He.op){case"a":case"s":const Ge=("a"===He.op?this.map.get(He.param):void 0)||[];Ge.push(At(He.value)),this.map.set(He.param,Ge);break;case"d":if(void 0===He.value){this.map.delete(He.param);break}{let at=this.map.get(He.param)||[];const St=at.indexOf(At(He.value));-1!==St&&at.splice(St,1),at.length>0?this.map.set(He.param,at):this.map.delete(He.param)}}}),this.cloneFrom=this.updates=null)}}class dn{constructor(){this.map=new Map}set(He,Ge){return this.map.set(He,Ge),this}get(He){return this.map.has(He)||this.map.set(He,He.defaultValue()),this.map.get(He)}delete(He){return this.map.delete(He),this}has(He){return this.map.has(He)}keys(){return this.map.keys()}}function Ee(Pt){return"undefined"!=typeof ArrayBuffer&&Pt instanceof ArrayBuffer}function Me(Pt){return"undefined"!=typeof Blob&&Pt instanceof Blob}function ot(Pt){return"undefined"!=typeof FormData&&Pt instanceof FormData}class ft{constructor(He,Ge,at,St){let zt;if(this.url=Ge,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=He.toUpperCase(),function Xt(Pt){switch(Pt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||St?(this.body=void 0!==at?at:null,zt=St):zt=at,zt&&(this.reportProgress=!!zt.reportProgress,this.withCredentials=!!zt.withCredentials,zt.responseType&&(this.responseType=zt.responseType),zt.headers&&(this.headers=zt.headers),zt.context&&(this.context=zt.context),zt.params&&(this.params=zt.params)),this.headers||(this.headers=new be),this.context||(this.context=new dn),this.params){const nn=this.params.toString();if(0===nn.length)this.urlWithParams=Ge;else{const Nr=Ge.indexOf("?");this.urlWithParams=Ge+(-1===Nr?"?":Nr<Ge.length-1?"&":"")+nn}}else this.params=new Qe,this.urlWithParams=Ge}serializeBody(){return null===this.body?null:Ee(this.body)||Me(this.body)||ot(this.body)||function _t(Pt){return"undefined"!=typeof URLSearchParams&&Pt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ot(this.body)?null:Me(this.body)?this.body.type||null:Ee(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(He={}){var Ge;const at=He.method||this.method,St=He.url||this.url,zt=He.responseType||this.responseType,nn=void 0!==He.body?He.body:this.body,Nr=void 0!==He.withCredentials?He.withCredentials:this.withCredentials,Xn=void 0!==He.reportProgress?He.reportProgress:this.reportProgress;let Wn=He.headers||this.headers,hi=He.params||this.params;const hr=null!==(Ge=He.context)&&void 0!==Ge?Ge:this.context;return void 0!==He.setHeaders&&(Wn=Object.keys(He.setHeaders).reduce((br,Yt)=>br.set(Yt,He.setHeaders[Yt]),Wn)),He.setParams&&(hi=Object.keys(He.setParams).reduce((br,Yt)=>br.set(Yt,He.setParams[Yt]),hi)),new ft(at,St,nn,{params:hi,headers:Wn,context:hr,reportProgress:Xn,responseType:zt,withCredentials:Nr})}}var tt=(()=>((tt=tt||{})[tt.Sent=0]="Sent",tt[tt.UploadProgress=1]="UploadProgress",tt[tt.ResponseHeader=2]="ResponseHeader",tt[tt.DownloadProgress=3]="DownloadProgress",tt[tt.Response=4]="Response",tt[tt.User=5]="User",tt))();class Vt{constructor(He,Ge=200,at="OK"){this.headers=He.headers||new be,this.status=void 0!==He.status?He.status:Ge,this.statusText=He.statusText||at,this.url=He.url||null,this.ok=this.status>=200&&this.status<300}}class It extends Vt{constructor(He={}){super(He),this.type=tt.ResponseHeader}clone(He={}){return new It({headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class On extends Vt{constructor(He={}){super(He),this.type=tt.Response,this.body=void 0!==He.body?He.body:null}clone(He={}){return new On({body:void 0!==He.body?He.body:this.body,headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class Ht extends Vt{constructor(He){super(He,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${He.url||"(unknown url)"}`:`Http failure response for ${He.url||"(unknown url)"}: ${He.status} ${He.statusText}`,this.error=He.error||null}}function xn(Pt,He){return{body:He,headers:Pt.headers,context:Pt.context,observe:Pt.observe,params:Pt.params,reportProgress:Pt.reportProgress,responseType:Pt.responseType,withCredentials:Pt.withCredentials}}let on=(()=>{class Pt{constructor(Ge){this.handler=Ge}request(Ge,at,St={}){let zt;if(Ge instanceof ft)zt=Ge;else{let Xn,Wn;Xn=St.headers instanceof be?St.headers:new be(St.headers),St.params&&(Wn=St.params instanceof Qe?St.params:new Qe({fromObject:St.params})),zt=new ft(Ge,at,void 0!==St.body?St.body:null,{headers:Xn,context:St.context,params:Wn,reportProgress:St.reportProgress,responseType:St.responseType||"json",withCredentials:St.withCredentials})}const nn=(0,X.of)(zt).pipe((0,Ue.b)(Xn=>this.handler.handle(Xn)));if(Ge instanceof ft||"events"===St.observe)return nn;const Nr=nn.pipe((0,Ke.h)(Xn=>Xn instanceof On));switch(St.observe||"body"){case"body":switch(zt.responseType){case"arraybuffer":return Nr.pipe((0,Xe.U)(Xn=>{if(null!==Xn.body&&!(Xn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Xn.body}));case"blob":return Nr.pipe((0,Xe.U)(Xn=>{if(null!==Xn.body&&!(Xn.body instanceof Blob))throw new Error("Response is not a Blob.");return Xn.body}));case"text":return Nr.pipe((0,Xe.U)(Xn=>{if(null!==Xn.body&&"string"!=typeof Xn.body)throw new Error("Response is not a string.");return Xn.body}));default:return Nr.pipe((0,Xe.U)(Xn=>Xn.body))}case"response":return Nr;default:throw new Error(`Unreachable: unhandled observe type ${St.observe}}`)}}delete(Ge,at={}){return this.request("DELETE",Ge,at)}get(Ge,at={}){return this.request("GET",Ge,at)}head(Ge,at={}){return this.request("HEAD",Ge,at)}jsonp(Ge,at){return this.request("JSONP",Ge,{params:(new Qe).append(at,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ge,at={}){return this.request("OPTIONS",Ge,at)}patch(Ge,at,St={}){return this.request("PATCH",Ge,xn(St,at))}post(Ge,at,St={}){return this.request("POST",Ge,xn(St,at))}put(Ge,at,St={}){return this.request("PUT",Ge,xn(St,at))}}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)(B.LFG(ze))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})();class qr{constructor(He,Ge){this.next=He,this.interceptor=Ge}handle(He){return this.interceptor.intercept(He,this.next)}}const kn=new B.OlP("HTTP_INTERCEPTORS");let gr=(()=>{class Pt{intercept(Ge,at){return at.handle(Ge)}}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})();const pt=/^\)\]\}',?\n/;let hn=(()=>{class Pt{constructor(Ge){this.xhrFactory=Ge}handle(Ge){if("JSONP"===Ge.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ie.y(at=>{const St=this.xhrFactory.build();if(St.open(Ge.method,Ge.urlWithParams),Ge.withCredentials&&(St.withCredentials=!0),Ge.headers.forEach((Yt,Or)=>St.setRequestHeader(Yt,Or.join(","))),Ge.headers.has("Accept")||St.setRequestHeader("Accept","application/json, text/plain, */*"),!Ge.headers.has("Content-Type")){const Yt=Ge.detectContentTypeHeader();null!==Yt&&St.setRequestHeader("Content-Type",Yt)}if(Ge.responseType){const Yt=Ge.responseType.toLowerCase();St.responseType="json"!==Yt?Yt:"text"}const zt=Ge.serializeBody();let nn=null;const Nr=()=>{if(null!==nn)return nn;const Yt=St.statusText||"OK",Or=new be(St.getAllResponseHeaders()),sr=function tn(Pt){return"responseURL"in Pt&&Pt.responseURL?Pt.responseURL:/^X-Request-URL:/m.test(Pt.getAllResponseHeaders())?Pt.getResponseHeader("X-Request-URL"):null}(St)||Ge.url;return nn=new It({headers:Or,status:St.status,statusText:Yt,url:sr}),nn},Xn=()=>{let{headers:Yt,status:Or,statusText:sr,url:Er}=Nr(),lr=null;204!==Or&&(lr=void 0===St.response?St.responseText:St.response),0===Or&&(Or=lr?200:0);let Hr=Or>=200&&Or<300;if("json"===Ge.responseType&&"string"==typeof lr){const Yr=lr;lr=lr.replace(pt,"");try{lr=""!==lr?JSON.parse(lr):null}catch(fi){lr=Yr,Hr&&(Hr=!1,lr={error:fi,text:lr})}}Hr?(at.next(new On({body:lr,headers:Yt,status:Or,statusText:sr,url:Er||void 0})),at.complete()):at.error(new Ht({error:lr,headers:Yt,status:Or,statusText:sr,url:Er||void 0}))},Wn=Yt=>{const{url:Or}=Nr(),sr=new Ht({error:Yt,status:St.status||0,statusText:St.statusText||"Unknown Error",url:Or||void 0});at.error(sr)};let hi=!1;const hr=Yt=>{hi||(at.next(Nr()),hi=!0);let Or={type:tt.DownloadProgress,loaded:Yt.loaded};Yt.lengthComputable&&(Or.total=Yt.total),"text"===Ge.responseType&&!!St.responseText&&(Or.partialText=St.responseText),at.next(Or)},br=Yt=>{let Or={type:tt.UploadProgress,loaded:Yt.loaded};Yt.lengthComputable&&(Or.total=Yt.total),at.next(Or)};return St.addEventListener("load",Xn),St.addEventListener("error",Wn),St.addEventListener("timeout",Wn),St.addEventListener("abort",Wn),Ge.reportProgress&&(St.addEventListener("progress",hr),null!==zt&&St.upload&&St.upload.addEventListener("progress",br)),St.send(zt),at.next({type:tt.Sent}),()=>{St.removeEventListener("error",Wn),St.removeEventListener("abort",Wn),St.removeEventListener("load",Xn),St.removeEventListener("timeout",Wn),Ge.reportProgress&&(St.removeEventListener("progress",hr),null!==zt&&St.upload&&St.upload.removeEventListener("progress",br)),St.readyState!==St.DONE&&St.abort()}})}}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)(B.LFG(y.JF))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})();const Dn=new B.OlP("XSRF_COOKIE_NAME"),zn=new B.OlP("XSRF_HEADER_NAME");class mr{}let ir=(()=>{class Pt{constructor(Ge,at,St){this.doc=Ge,this.platform=at,this.cookieName=St,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ge=this.doc.cookie||"";return Ge!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,y.Mx)(Ge,this.cookieName),this.lastCookieString=Ge),this.lastToken}}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)(B.LFG(y.K0),B.LFG(B.Lbi),B.LFG(Dn))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})(),Ln=(()=>{class Pt{constructor(Ge,at){this.tokenService=Ge,this.headerName=at}intercept(Ge,at){const St=Ge.url.toLowerCase();if("GET"===Ge.method||"HEAD"===Ge.method||St.startsWith("http://")||St.startsWith("https://"))return at.handle(Ge);const zt=this.tokenService.getToken();return null!==zt&&!Ge.headers.has(this.headerName)&&(Ge=Ge.clone({headers:Ge.headers.set(this.headerName,zt)})),at.handle(Ge)}}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)(B.LFG(mr),B.LFG(zn))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})(),Lr=(()=>{class Pt{constructor(Ge,at){this.backend=Ge,this.injector=at,this.chain=null}handle(Ge){if(null===this.chain){const at=this.injector.get(kn,[]);this.chain=at.reduceRight((St,zt)=>new qr(St,zt),this.backend)}return this.chain.handle(Ge)}}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)(B.LFG(lt),B.LFG(B.zs3))},Pt.\u0275prov=B.Yz7({token:Pt,factory:Pt.\u0275fac}),Pt})(),Pn=(()=>{class Pt{static disable(){return{ngModule:Pt,providers:[{provide:Ln,useClass:gr}]}}static withOptions(Ge={}){return{ngModule:Pt,providers:[Ge.cookieName?{provide:Dn,useValue:Ge.cookieName}:[],Ge.headerName?{provide:zn,useValue:Ge.headerName}:[]]}}}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)},Pt.\u0275mod=B.oAB({type:Pt}),Pt.\u0275inj=B.cJS({providers:[Ln,{provide:kn,useExisting:Ln,multi:!0},{provide:mr,useClass:ir},{provide:Dn,useValue:"XSRF-TOKEN"},{provide:zn,useValue:"X-XSRF-TOKEN"}]}),Pt})(),Mn=(()=>{class Pt{}return Pt.\u0275fac=function(Ge){return new(Ge||Pt)},Pt.\u0275mod=B.oAB({type:Pt}),Pt.\u0275inj=B.cJS({providers:[on,{provide:ze,useClass:Lr},hn,{provide:lt,useExisting:hn}],imports:[[Pn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Pt})()},5e3:(pn,dt,$)=>{$.d(dt,{$8M:()=>Qr,$Z:()=>Sd,AFp:()=>fw,ALo:()=>kE,AaK:()=>ze,AsE:()=>Pd,BQk:()=>zf,CHM:()=>gi,CRH:()=>zE,CZH:()=>F0,CqO:()=>Dg,EJc:()=>NC,EiD:()=>me,EpF:()=>Wf,F4k:()=>Kf,FYo:()=>O_,FiY:()=>Yu,G48:()=>nI,Gf:()=>$E,GfV:()=>r,Gpc:()=>Ce,JOm:()=>ti,JVY:()=>id,L6k:()=>hm,LAX:()=>_i,LFG:()=>zs,LSH:()=>Yn,Lbi:()=>MC,MAs:()=>wy,NdJ:()=>bh,OlP:()=>ps,Oqu:()=>Ky,PXZ:()=>qC,Q6J:()=>bg,QGY:()=>Th,Qsj:()=>w0,R0b:()=>tc,RDi:()=>ns,Rgc:()=>cm,SBq:()=>zh,Sil:()=>kC,Suo:()=>GE,TTD:()=>js,TgZ:()=>Jl,Tol:()=>Gy,Udp:()=>Sh,VKq:()=>AE,VLi:()=>zC,W1O:()=>ZE,WLB:()=>RE,X6Q:()=>tI,XFs:()=>En,Xpm:()=>ji,Y36:()=>Eh,YKP:()=>Jn,YNc:()=>Ey,Yjl:()=>se,Yz7:()=>De,ZZ4:()=>Y0,_Bn:()=>A_,_UZ:()=>Ad,_Vd:()=>Gh,_c5:()=>_I,_uU:()=>Vl,aQg:()=>Q0,c2e:()=>xC,cJS:()=>xe,cg1:()=>Yg,d8E:()=>Sc,dDg:()=>vw,deG:()=>yl,dqk:()=>Wn,dwT:()=>ip,eBb:()=>cp,eFA:()=>Cw,ekj:()=>Lg,evT:()=>wm,g9A:()=>gw,h0i:()=>Nn,hGG:()=>vI,hij:()=>Ul,iGM:()=>HE,ifc:()=>St,ip1:()=>hw,kL8:()=>Nh,lG2:()=>ne,mCW:()=>kc,n5z:()=>yt,oAB:()=>he,oJD:()=>Gt,oxw:()=>Ag,pB0:()=>Qh,q3G:()=>Rt,q4F:()=>e,qLn:()=>pc,qOj:()=>fh,qZA:()=>Ch,qzn:()=>qa,sBO:()=>rI,sIi:()=>Xu,s_b:()=>V_,soG:()=>V0,tBr:()=>Cl,tb:()=>mw,tp0:()=>su,uIk:()=>gh,vHH:()=>Ft,vpe:()=>Mc,wAp:()=>jr,xi3:()=>FE,xp6:()=>Am,yhl:()=>Gd,ynx:()=>Gf,z2F:()=>G0,z3N:()=>Qu,zSh:()=>ah,zs3:()=>Ju});var y=$(7579),B=$(727),X=$(8306),ie=$(6451),Ue=$(3099);function Ke(n){for(let i in n)if(n[i]===Ke)return i;throw Error("Could not find renamed property on target object.")}function Xe(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function ze(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ze).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function lt(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const be=Ke({__forward_ref__:Ke});function Ce(n){return n.__forward_ref__=Ce,n.toString=function(){return ze(this())},n}function nt(n){return Lt(n)?n():n}function Lt(n){return"function"==typeof n&&n.hasOwnProperty(be)&&n.__forward_ref__===Ce}class Ft extends Error{constructor(i,o){super(function At(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function Qe(n){return"string"==typeof n?n:null==n?"":String(n)}function Nt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Qe(n)}function Me(n,i){const o=i?` in ${i}`:"";throw new Ft(-201,`No provider for ${Nt(n)} found${o}`)}function tr(n,i){null==n&&function un(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function De(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xe(n){return{providers:n.providers||[],imports:n.imports||[]}}function pt(n){return tn(n,mr)||tn(n,Ln)}function tn(n,i){return n.hasOwnProperty(i)?n[i]:null}function zn(n){return n&&(n.hasOwnProperty(ir)||n.hasOwnProperty(Lr))?n[ir]:null}const mr=Ke({\u0275prov:Ke}),ir=Ke({\u0275inj:Ke}),Ln=Ke({ngInjectableDef:Ke}),Lr=Ke({ngInjectorDef:Ke});var En=(()=>((En=En||{})[En.Default=0]="Default",En[En.Host=1]="Host",En[En.Self=2]="Self",En[En.SkipSelf=4]="SkipSelf",En[En.Optional=8]="Optional",En))();let nr;function Mn(n){const i=nr;return nr=n,i}function Zr(n,i,o){const u=pt(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&En.Optional?null:void 0!==i?i:void Me(ze(n),"Injector")}function Pt(n){return{toString:n}.toString()}var He=(()=>((He=He||{})[He.OnPush=0]="OnPush",He[He.Default=1]="Default",He))(),St=(()=>{return(n=St||(St={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",St;var n})();const zt="undefined"!=typeof globalThis&&globalThis,nn="undefined"!=typeof window&&window,Nr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wn=zt||"undefined"!=typeof global&&global||nn||Nr,br={},Yt=[],Or=Ke({\u0275cmp:Ke}),sr=Ke({\u0275dir:Ke}),Er=Ke({\u0275pipe:Ke}),lr=Ke({\u0275mod:Ke}),Hr=Ke({\u0275fac:Ke}),Yr=Ke({__NG_ELEMENT_ID__:Ke});let fi=0;function ji(n){return Pt(()=>{const o={},u={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===He.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Yt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||St.Emulated,id:"c",styles:n.styles||Yt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,m=n.features,w=n.pipes;return u.id+=fi++,u.inputs=G(n.inputs,o),u.outputs=G(n.outputs),m&&m.forEach(M=>M(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(Gr):null,u.pipeDefs=w?()=>("function"==typeof w?w():w).map(Pe):null,u})}function Gr(n){return Se(n)||function ht(n){return n[sr]||null}(n)}function Pe(n){return function Wt(n){return n[Er]||null}(n)}const Ae={};function he(n){return Pt(()=>{const i={type:n.type,bootstrap:n.bootstrap||Yt,declarations:n.declarations||Yt,imports:n.imports||Yt,exports:n.exports||Yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Ae[n.id]=n.type),i})}function G(n,i){if(null==n)return br;const o={};for(const u in n)if(n.hasOwnProperty(u)){let h=n[u],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),o[h]=u,i&&(i[h]=m)}return o}const ne=ji;function se(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Se(n){return n[Or]||null}function yn(n,i){const o=n[lr]||null;if(!o&&!0===i)throw new Error(`Type ${ze(n)} does not have '\u0275mod' property.`);return o}function st(n){return Array.isArray(n)&&"object"==typeof n[1]}function mt(n){return Array.isArray(n)&&!0===n[1]}function kt(n){return 0!=(8&n.flags)}function bn(n){return 2==(2&n.flags)}function Rr(n){return 1==(1&n.flags)}function fr(n){return null!==n.template}function Tr(n){return 0!=(512&n[2])}function li(n,i){return n.hasOwnProperty(Hr)?n[Hr]:null}class Ho{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function js(){return Fs}function Fs(n){return n.type.prototype.ngOnChanges&&(n.setInput=uo),As}function As(){const n=Co(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===br)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function uo(n,i,o,u){const h=Co(n)||function go(n,i){return n[Rs]=i}(n,{previous:br,current:null}),m=h.current||(h.current={}),w=h.previous,M=this.declaredInputs[o],N=w[M];m[M]=new Ho(N&&N.currentValue,i,w===br),n[u]=i}js.ngInherit=!0;const Rs="__ngSimpleChanges__";function Co(n){return n[Rs]||null}let Wr;function ns(n){Wr=n}function ys(){return void 0!==Wr?Wr:"undefined"!=typeof document?document:void 0}function Ei(n){return!!n.listen}const F={createRenderer:(n,i)=>ys()};function j(n){for(;Array.isArray(n);)n=n[0];return n}function Tt(n,i){return j(i[n])}function Bt(n,i){return j(i[n.index])}function Fr(n,i){return n.data[i]}function Vr(n,i){return n[i]}function yr(n,i){const o=i[n];return st(o)?o:o[0]}function Mr(n){return 4==(4&n[2])}function Mi(n){return 128==(128&n[2])}function ii(n,i){return null==i?null:n[i]}function yo(n){n[18]=0}function Fi(n,i){n[5]+=i;let o=n,u=n[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const ur={lFrame:ha(null),bindingsEnabled:!0};function V(){return ur.bindingsEnabled}function Ne(){return ur.lFrame.lView}function qt(){return ur.lFrame.tView}function gi(n){return ur.lFrame.contextLView=n,n[8]}function z(){let n=W();for(;null!==n&&64===n.type;)n=n.parent;return n}function W(){return ur.lFrame.currentTNode}function Ie(n,i){const o=ur.lFrame;o.currentTNode=n,o.isParent=i}function Fe(){return ur.lFrame.isParent}function Ct(){ur.lFrame.isParent=!1}function Kn(){const n=ur.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function bi(){return ur.lFrame.bindingIndex++}function Br(n){const i=ur.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Ls(n,i){const o=ur.lFrame;o.bindingIndex=o.bindingRootIndex=n,$i(i)}function $i(n){ur.lFrame.currentDirectiveIndex=n}function Zi(n){const i=ur.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function Gs(){return ur.lFrame.currentQueryIndex}function Io(n){ur.lFrame.currentQueryIndex=n}function Xo(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function Js(n,i,o){if(o&En.SkipSelf){let h=i,m=n;for(;!(h=h.parent,null!==h||o&En.Host||(h=Xo(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;i=h,n=m}const u=ur.lFrame=hs();return u.currentTNode=i,u.lView=n,!0}function No(n){const i=hs(),o=n[1];ur.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function hs(){const n=ur.lFrame,i=null===n?null:n.child;return null===i?ha(n):i}function ha(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Oo(){const n=ur.lFrame;return ur.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ha=Oo;function ea(){const n=Oo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ss(){return ur.lFrame.selectedIndex}function Es(n){ur.lFrame.selectedIndex=n}function Pi(){const n=ur.lFrame;return Fr(n.tView,n.selectedIndex)}function ws(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const m=n.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:M,ngAfterViewInit:N,ngAfterViewChecked:ee,ngOnDestroy:oe}=m;w&&(n.contentHooks||(n.contentHooks=[])).push(-o,w),M&&((n.contentHooks||(n.contentHooks=[])).push(o,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,M)),N&&(n.viewHooks||(n.viewHooks=[])).push(-o,N),ee&&((n.viewHooks||(n.viewHooks=[])).push(o,ee),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,ee)),null!=oe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,oe)}}function Zo(n,i,o){bu(n,i,3,o)}function cs(n,i,o,u){(3&n[2])===o&&bu(n,i,o,u)}function ko(n,i){let o=n[2];(3&o)===i&&(o&=2047,o+=1,n[2]=o)}function bu(n,i,o,u){const m=null!=u?u:-1,w=i.length-1;let M=0;for(let N=void 0!==u?65535&n[18]:0;N<w;N++)if("number"==typeof i[N+1]){if(M=i[N],null!=u&&M>=u)break}else i[N]<0&&(n[18]+=65536),(M<m||-1==m)&&(ho(n,o,i,N),n[18]=(4294901760&n[18])+N+2),N++}function ho(n,i,o,u){const h=o[u]<0,m=o[u+1],M=n[h?-o[u]:o[u]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{m.call(M)}finally{}}}else try{m.call(M)}finally{}}class si{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Xs(n,i,o){const u=Ei(n);let h=0;for(;h<o.length;){const m=o[h];if("number"==typeof m){if(0!==m)break;h++;const w=o[h++],M=o[h++],N=o[h++];u?n.setAttribute(i,M,N,w):i.setAttributeNS(w,M,N)}else{const w=m,M=o[++h];fs(w)?u&&n.setProperty(i,w,M):u?n.setAttribute(i,w,M):i.setAttribute(w,M),h++}}return h}function eo(n){return 3===n||4===n||6===n}function fs(n){return 64===n.charCodeAt(0)}function _o(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const h=i[u];"number"==typeof h?o=h:0===o||fa(n,o,h,null,-1===o||2===o?i[++u]:null)}}return n}function fa(n,i,o,u,h){let m=0,w=n.length;if(-1===i)w=-1;else for(;m<n.length;){const M=n[m++];if("number"==typeof M){if(M===i){w=-1;break}if(M>i){w=m-1;break}}}for(;m<n.length;){const M=n[m];if("number"==typeof M)break;if(M===o){if(null===u)return void(null!==h&&(n[m+1]=h));if(u===n[m+1])return void(n[m+2]=h)}m++,null!==u&&m++,null!==h&&m++}-1!==w&&(n.splice(w,0,i),m=w+1),n.splice(m++,0,o),null!==u&&n.splice(m++,0,u),null!==h&&n.splice(m++,0,h)}function ka(n){return-1!==n}function Yo(n){return 32767&n}function Qo(n,i){let o=function yu(n){return n>>16}(n),u=i;for(;o>0;)u=u[15],o--;return u}let _u=!0;function Su(n){const i=_u;return _u=n,i}let Xa=0;function Fa(n,i){const o=x(n,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(n.injectorIndex=i.length,Hu(u.data,n),Hu(i,null),Hu(u.blueprint,null));const h=b(n,i),m=n.injectorIndex;if(ka(h)){const w=Yo(h),M=Qo(h,i),N=M[1].data;for(let ee=0;ee<8;ee++)i[m+ee]=M[w+ee]|N[w+ee]}return i[m+8]=h,m}function Hu(n,i){n.push(0,0,0,0,0,0,0,0,i)}function x(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function b(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,h=i;for(;null!==h;){const m=h[1],w=m.type;if(u=2===w?m.declTNode:1===w?h[6]:null,null===u)return-1;if(o++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function I(n,i,o){!function ju(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Yr)&&(u=o[Yr]),null==u&&(u=o[Yr]=Xa++);const h=255&u;i.data[n+(h>>5)]|=1<<h}(n,i,o)}function Y(n,i,o){if(o&En.Optional)return n;Me(i,"NodeInjector")}function le(n,i,o,u){if(o&En.Optional&&void 0===u&&(u=null),0==(o&(En.Self|En.Host))){const h=n[9],m=Mn(void 0);try{return h?h.get(i,u,o&En.Optional):Zr(i,u,o&En.Optional)}finally{Mn(m)}}return Y(u,i,o)}function Re(n,i,o,u=En.Default,h){if(null!==n){const m=function ln(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Yr)?n[Yr]:void 0;return"number"==typeof i?i>=0?255&i:$e:i}(o);if("function"==typeof m){if(!Js(i,n,u))return u&En.Host?Y(h,o,u):le(i,o,u,h);try{const w=m(u);if(null!=w||u&En.Optional)return w;Me(o)}finally{Ha()}}else if("number"==typeof m){let w=null,M=x(n,i),N=-1,ee=u&En.Host?i[16][6]:null;for((-1===M||u&En.SkipSelf)&&(N=-1===M?b(n,i):i[M+8],-1!==N&&na(u,!1)?(w=i[1],M=Yo(N),i=Qo(N,i)):M=-1);-1!==M;){const oe=i[1];if(gn(m,M,oe.data)){const Te=en(M,i,o,w,u,ee);if(Te!==We)return Te}N=i[M+8],-1!==N&&na(u,i[1].data[M+8]===ee)&&gn(m,M,i)?(w=oe,M=Yo(N),i=Qo(N,i)):M=-1}}}return le(i,o,u,h)}const We={};function $e(){return new _n(z(),Ne())}function en(n,i,o,u,h,m){const w=i[1],M=w.data[n+8],oe=_r(M,w,o,null==u?bn(M)&&_u:u!=w&&0!=(3&M.type),h&En.Host&&m===M);return null!==oe?Zn(i,w,oe,M):We}function _r(n,i,o,u,h){const m=n.providerIndexes,w=i.data,M=1048575&m,N=n.directiveStart,oe=m>>20,Ye=h?M+oe:n.directiveEnd;for(let wt=u?M:M+oe;wt<Ye;wt++){const Kt=w[wt];if(wt<N&&o===Kt||wt>=N&&Kt.type===o)return wt}if(h){const wt=w[N];if(wt&&fr(wt)&&wt.type===o)return N}return null}function Zn(n,i,o,u){let h=n[o];const m=i.data;if(function rl(n){return n instanceof si}(h)){const w=h;w.resolving&&function dn(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Ft(-200,`Circular dependency in DI detected for ${n}${o}`)}(Nt(m[o]));const M=Su(w.canSeeViewProviders);w.resolving=!0;const N=w.injectImpl?Mn(w.injectImpl):null;Js(n,u,En.Default);try{h=n[o]=w.factory(void 0,m,n,u),i.firstCreatePass&&o>=u.directiveStart&&function To(n,i,o){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:m}=i.type.prototype;if(u){const w=Fs(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,w),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,w)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),m&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m))}(o,m[o],i)}finally{null!==N&&Mn(N),Su(M),w.resolving=!1,Ha()}}return h}function gn(n,i,o){return!!(o[i+(n>>5)]&1<<n)}function na(n,i){return!(n&En.Self||n&En.Host&&i)}class _n{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Re(this._tNode,this._lView,i,u,o)}}function yt(n){return Pt(()=>{const i=n.prototype.constructor,o=i[Hr]||Zt(i),u=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==u;){const m=h[Hr]||Zt(h);if(m&&m!==o)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Zt(n){return Lt(n)?()=>{const i=Zt(nt(n));return i&&i()}:li(n)}function Qr(n){return function U(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let h=0;for(;h<u;){const m=o[h];if(eo(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<u&&"string"==typeof o[h];)h++;else{if(m===i)return o[h+1];h+=2}}}return null}(z(),n)}const ga="__parameters__";function Ga(n,i,o){return Pt(()=>{const u=function $u(n){return function(...o){if(n){const u=n(...o);for(const h in u)this[h]=u[h]}}}(i);function h(...m){if(this instanceof h)return u.apply(this,m),this;const w=new h(...m);return M.annotation=w,M;function M(N,ee,oe){const Te=N.hasOwnProperty(ga)?N[ga]:Object.defineProperty(N,ga,{value:[]})[ga];for(;Te.length<=oe;)Te.push(null);return(Te[oe]=Te[oe]||[]).push(w),N}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class ps{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=De({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const yl=new ps("AnalyzeForEntryComponents");function Cs(n,i){void 0===i&&(i=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(i===n&&(i=n.slice(0,o)),Cs(u,i)):i!==n&&i.push(u)}return i}function La(n,i){n.forEach(o=>Array.isArray(o)?La(o,i):i(o))}function zu(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Ru(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Ps(n,i,o){let u=vt(n,i);return u>=0?n[1|u]=o:(u=~u,function Do(n,i,o,u){let h=n.length;if(h==i)n.push(o,u);else if(1===h)n.push(u,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function nu(n,i){const o=vt(n,i);if(o>=0)return n[1|o]}function vt(n,i){return function So(n,i,o){let u=0,h=n.length>>o;for(;h!==u;){const m=u+(h-u>>1),w=n[m<<o];if(i===w)return m<<o;w>i?h=m:u=m+1}return~(h<<o)}(n,i,1)}const to={},ru="__NG_DI_FLAG__",Jo="ngTempTokenPath",Ao=/\n/gm,Wa="__source",Aa=Ke({provide:String,useValue:Ke});let Ua;function iu(n){const i=Ua;return Ua=n,i}function Ka(n,i=En.Default){if(void 0===Ua)throw new Ft(203,"");return null===Ua?Zr(n,void 0,i):Ua.get(n,i&En.Optional?null:void 0,i)}function zs(n,i=En.Default){return(function Pn(){return nr}()||Ka)(nt(n),i)}const wu=zs;function Ku(n){const i=[];for(let o=0;o<n.length;o++){const u=nt(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Ft(900,"");let h,m=En.Default;for(let w=0;w<u.length;w++){const M=u[w],N=Zu(M);"number"==typeof N?-1===N?h=M.token:m|=N:h=M}i.push(zs(h,m))}else i.push(zs(u))}return i}function qu(n,i){return n[ru]=i,n.prototype[ru]=i,n}function Zu(n){return n[ru]}const Cl=qu(Ga("Inject",n=>({token:n})),-1),Yu=qu(Ga("Optional"),8),su=qu(Ga("SkipSelf"),4);var ti=(()=>((ti=ti||{})[ti.Important=1]="Important",ti[ti.DashCase=2]="DashCase",ti))();const ro="__ngContext__";function Ns(n,i){n[ro]=i}function Lo(n){const i=function Fo(n){return n[ro]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function P(n,i){return undefined(n,i)}function Be(n){const i=n[3];return mt(i)?i[3]:i}function cn(n){return Qn(n[13])}function mn(n){return Qn(n[4])}function Qn(n){for(;null!==n&&!mt(n);)n=n[4];return n}function xr(n,i,o,u,h){if(null!=u){let m,w=!1;mt(u)?m=u:st(u)&&(w=!0,u=u[0]);const M=j(u);0===n&&null!==o?null==h?Ma(i,o,M):uu(i,o,M,h||null,!0):1===n&&null!==o?uu(i,o,M,h||null,!0):2===n?function Pr(n,i,o){const u=T(n,i);u&&function Hd(n,i,o,u){Ei(n)?n.removeChild(i,o,u):i.removeChild(o)}(n,u,i,o)}(i,M,w):3===n&&i.destroyNode(M),null!=m&&function Pc(n,i,o,u,h){const m=o[7];m!==j(o)&&xr(i,n,u,m,h);for(let M=10;M<o.length;M++){const N=o[M];aa(N[1],N,n,i,u,m)}}(i,n,m,o,h)}}function Cu(n,i,o){if(Ei(n))return n.createElement(i,o);{const u=null!==o?function lo(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(o):null;return null===u?n.createElement(i):n.createElementNS(u,i)}}function oc(n,i){const o=n[9],u=o.indexOf(i),h=i[3];1024&i[2]&&(i[2]&=-1025,Fi(h,-1)),o.splice(u,1)}function yi(n,i){if(n.length<=10)return;const o=10+i,u=n[o];if(u){const h=u[17];null!==h&&h!==n&&oc(h,u),i>0&&(n[o-1][4]=u[4]);const m=Ru(n,10+i);!function Gi(n,i){aa(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const w=m[19];null!==w&&w.detachView(m[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Qi(n,i){if(!(256&i[2])){const o=i[11];Ei(o)&&o.destroyNode&&aa(n,i,o,3,null,null),function ol(n){let i=n[13];if(!i)return ou(n[1],n);for(;i;){let o=null;if(st(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==n;)st(i)&&ou(i[1],i),i=i[3];null===i&&(i=n),st(i)&&ou(i[1],i),o=i&&i[4]}i=o}}(i)}}function ou(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function wa(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const h=i[o[u]];if(!(h instanceof si)){const m=o[u+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const M=h[m[w]],N=m[w+1];try{N.call(M)}finally{}}else try{m.call(h)}finally{}}}}(n,i),function xc(n,i){const o=n.cleanup,u=i[7];let h=-1;if(null!==o)for(let m=0;m<o.length-1;m+=2)if("string"==typeof o[m]){const w=o[m+1],M="function"==typeof w?w(i):j(i[w]),N=u[h=o[m+2]],ee=o[m+3];"boolean"==typeof ee?M.removeEventListener(o[m],N,ee):ee>=0?u[h=ee]():u[h=-ee].unsubscribe(),m+=2}else{const w=u[h=o[m+1]];o[m].call(w)}if(null!==u){for(let m=h+1;m<u.length;m++)u[m]();i[7]=null}}(n,i),1===i[1].type&&Ei(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&mt(i[3])){o!==i[3]&&oc(o,i);const u=i[19];null!==u&&u.detachView(n)}}}function Tl(n,i,o){return function au(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const h=n.data[u.directiveStart].encapsulation;if(h===St.None||h===St.Emulated)return null}return Bt(u,o)}(n,i.parent,o)}function uu(n,i,o,u,h){Ei(n)?n.insertBefore(i,o,u,h):i.insertBefore(o,u,h)}function Ma(n,i,o){Ei(n)?n.appendChild(i,o):i.appendChild(o)}function Ou(n,i,o,u,h){null!==u?uu(n,i,o,u,h):Ma(n,i,o)}function T(n,i){return Ei(n)?n.parentNode(i):i.parentNode}let ku,nd,te=function R(n,i,o){return 40&n.type?Bt(n,o):null};function xt(n,i,o,u){const h=Tl(n,u,i),m=i[11],M=function v(n,i,o){return te(n,i,o)}(u.parent||i[6],u,i);if(null!=h)if(Array.isArray(o))for(let N=0;N<o.length;N++)Ou(m,h,o[N],M,!1);else Ou(m,h,o,M,!1)}function fn(n,i){if(null!==i){const o=i.type;if(3&o)return Bt(i,n);if(4&o)return Cr(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return fn(n,u);{const h=n[i.index];return mt(h)?Cr(-1,h):j(h)}}if(32&o)return P(i,n)()||j(n[i.index]);{const u=Fn(n,i);return null!==u?Array.isArray(u)?u[0]:fn(Be(n[16]),u):fn(n,i.next)}}return null}function Fn(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Cr(n,i){const o=10+n+1;if(o<i.length){const u=i[o],h=u[1].firstChild;if(null!==h)return fn(u,h)}return i[7]}function Li(n,i,o,u,h,m,w){for(;null!=o;){const M=u[o.index],N=o.type;if(w&&0===i&&(M&&Ns(j(M),u),o.flags|=4),64!=(64&o.flags))if(8&N)Li(n,i,o.child,u,h,m,!1),xr(i,n,h,M,m);else if(32&N){const ee=P(o,u);let oe;for(;oe=ee();)xr(i,n,h,oe,m);xr(i,n,h,M,m)}else 16&N?xa(n,i,u,o,h,m):xr(i,n,h,M,m);o=w?o.projectionNext:o.next}}function aa(n,i,o,u,h,m){Li(o,u,n.firstChild,i,h,m,!1)}function xa(n,i,o,u,h,m){const w=o[16],N=w[6].projection[u.projection];if(Array.isArray(N))for(let ee=0;ee<N.length;ee++)xr(i,n,h,N[ee],m);else Li(n,i,N,w[3],h,m,!0)}function ac(n,i,o){Ei(n)?n.setAttribute(i,"style",o):i.style.cssText=o}function Dl(n,i,o){Ei(n)?""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o):i.className=o}function Ca(n){var i;return(null===(i=function $l(){if(void 0===ku&&(ku=null,Wn.trustedTypes))try{ku=Wn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return ku}())||void 0===i?void 0:i.createHTML(n))||n}function Oc(n){var i;return(null===(i=function Nc(){if(void 0===nd&&(nd=null,Wn.trustedTypes))try{nd=Wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return nd}())||void 0===i?void 0:i.createHTML(n))||n}class zl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sl extends zl{getTypeName(){return"HTML"}}class lp extends zl{getTypeName(){return"Style"}}class lu extends zl{getTypeName(){return"Script"}}class Yh extends zl{getTypeName(){return"URL"}}class rd extends zl{getTypeName(){return"ResourceURL"}}function Qu(n){return n instanceof zl?n.changingThisBreaksApplicationSecurity:n}function qa(n,i){const o=Gd(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function Gd(n){return n instanceof zl&&n.getTypeName()||null}function id(n){return new Sl(n)}function hm(n){return new lp(n)}function cp(n){return new lu(n)}function _i(n){return new Yh(n)}function Qh(n){return new rd(n)}class Jh{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Ca(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Xh{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Ca(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Ca(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let h=o.length-1;0<h;h--){const w=o.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&i.removeAttribute(w)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const od=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,tf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function kc(n){return(n=String(n)).match(od)||n.match(tf)?n:"unsafe:"+n}function Pa(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function dc(...n){const i={};for(const o of n)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const Wl=Pa("area,br,col,hr,img,wbr"),nf=Pa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hc=Pa("rp,rt"),rf=dc(Wl,dc(nf,Pa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dc(hc,Pa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dc(hc,nf)),Wd=Pa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),io=Pa("srcset"),f=dc(Wd,io,Pa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Pa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),l=Pa("script,style,template");class c{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!rf.hasOwnProperty(o))return this.sanitizedSomething=!0,!l.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let h=0;h<u.length;h++){const m=u.item(h),w=m.name,M=w.toLowerCase();if(!f.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let N=m.value;Wd[M]&&(N=kc(N)),io[M]&&(n=N,N=(n=String(n)).split(",").map(i=>kc(i.trim())).join(", ")),this.buf.push(" ",w,'="',L(N),'"')}var n;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();rf.hasOwnProperty(o)&&!Wl.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(L(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const _=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S=/([^\#-~ |!])/g;function L(n){return n.replace(/&/g,"&amp;").replace(_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(S,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Z;function me(n,i){let o=null;try{Z=Z||function sd(n){const i=new Xh(n);return function ef(){try{return!!(new window.DOMParser).parseFromString(Ca(""),"text/html")}catch(n){return!1}}()?new Jh(i):i}(n);let u=i?String(i):"";o=Z.getInertBodyElement(u);let h=5,m=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=m,m=o.innerHTML,o=Z.getInertBodyElement(u)}while(u!==m);return Ca((new c).sanitizeChildren(Oe(o)||o))}finally{if(o){const u=Oe(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Oe(n){return"content"in n&&function qe(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Rt=(()=>((Rt=Rt||{})[Rt.NONE=0]="NONE",Rt[Rt.HTML=1]="HTML",Rt[Rt.STYLE=2]="STYLE",Rt[Rt.SCRIPT=3]="SCRIPT",Rt[Rt.URL=4]="URL",Rt[Rt.RESOURCE_URL=5]="RESOURCE_URL",Rt))();function Gt(n){const i=fc();return i?Oc(i.sanitize(Rt.HTML,n)||""):qa(n,"HTML")?Oc(Qu(n)):me(ys(),Qe(n))}function Yn(n){const i=fc();return i?i.sanitize(Rt.URL,n)||"":qa(n,"URL")?Qu(n):kc(Qe(n))}function fc(){const n=Ne();return n&&n[12]}function lf(n){return n.ngOriginalError}function Kd(n,...i){n.error(...i)}class pc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=function pp(n){return n&&n.ngErrorLogger||Kd}(i);u(this._console,"ERROR",i),o&&u(this._console,"ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&lf(i);for(;o&&lf(o);)o=lf(o);return o||null}}const vm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wn))();function wm(n){return n.ownerDocument}function Al(n){return n instanceof Function?n():n}function Wo(n,i,o){let u=n.length;for(;;){const h=n.indexOf(i,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const m=i.length;if(h+m===u||n.charCodeAt(h+m)<=32)return h}o=h+1}}const mp="ng-template";function Yd(n,i,o){let u=0;for(;u<n.length;){let h=n[u++];if(o&&"class"===h){if(h=n[u],-1!==Wo(h.toLowerCase(),i,0))return!0}else if(1===h){for(;u<n.length&&"string"==typeof(h=n[u++]);)if(h.toLowerCase()===i)return!0;return!1}}return!1}function ul(n){return 4===n.type&&n.value!==mp}function yp(n,i,o){return i===(4!==n.type||o?n.value:mp)}function Tm(n,i,o){let u=4;const h=n.attrs||[],m=function Z_(n){for(let i=0;i<n.length;i++)if(eo(n[i]))return i;return n.length}(h);let w=!1;for(let M=0;M<i.length;M++){const N=i[M];if("number"!=typeof N){if(!w)if(4&u){if(u=2|1&u,""!==N&&!yp(n,N,o)||""===N&&1===i.length){if(cu(u))return!1;w=!0}}else{const ee=8&u?N:i[++M];if(8&u&&null!==n.attrs){if(!Yd(n.attrs,ee,o)){if(cu(u))return!1;w=!0}continue}const Te=bm(8&u?"class":N,h,ul(n),o);if(-1===Te){if(cu(u))return!1;w=!0;continue}if(""!==ee){let Ye;Ye=Te>m?"":h[Te+1].toLowerCase();const wt=8&u?Ye:null;if(wt&&-1!==Wo(wt,ee,0)||2&u&&ee!==Ye){if(cu(u))return!1;w=!0}}}}else{if(!w&&!cu(u)&&!cu(N))return!1;if(w&&cu(N))continue;w=!1,u=N|1&u}}return cu(u)||w}function cu(n){return 0==(1&n)}function bm(n,i,o,u){if(null===i)return-1;let h=0;if(u||!o){let m=!1;for(;h<i.length;){const w=i[h];if(w===n)return h;if(3===w||6===w)m=!0;else{if(1===w||2===w){let M=i[++h];for(;"string"==typeof M;)M=i[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=m?1:2}return-1}return function Y_(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function _p(n,i,o=!1){for(let u=0;u<i.length;u++)if(Tm(n,i[u],o))return!0;return!1}function df(n,i){return n?":not("+i.trim()+")":i}function Q_(n){let i=n[0],o=1,u=2,h="",m=!1;for(;o<n.length;){let w=n[o];if("string"==typeof w)if(2&u){const M=n[++o];h+="["+w+(M.length>0?'="'+M+'"':"")+"]"}else 8&u?h+="."+w:4&u&&(h+=" "+w);else""!==h&&!cu(w)&&(i+=df(m,h),h=""),u=w,m=m||!cu(u);o++}return""!==h&&(i+=df(m,h)),i}const wi={};function Am(n){Ep(qt(),Ne(),ss()+n,!1)}function Ep(n,i,o,u){if(!u)if(3==(3&i[2])){const m=n.preOrderCheckHooks;null!==m&&Zo(i,m,o)}else{const m=n.preOrderHooks;null!==m&&cs(i,m,0,o)}Es(o)}function hf(n,i){return n<<17|i<<2}function ll(n){return n>>17&32767}function ff(n){return 2|n}function ql(n){return(131068&n)>>2}function pf(n,i){return-131069&n|i<<2}function gf(n){return 1|n}function dd(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u],m=o[u+1];if(-1!==m){const w=n.data[m];Io(h),w.contentQueries(2,i[m],m)}}}function ua(n,i,o,u,h,m,w,M,N,ee){const oe=i.blueprint.slice();return oe[0]=h,oe[2]=140|u,yo(oe),oe[3]=oe[15]=n,oe[8]=o,oe[10]=w||n&&n[10],oe[11]=M||n&&n[11],oe[12]=N||n&&n[12]||null,oe[9]=ee||n&&n[9]||null,oe[6]=m,oe[16]=2==i.type?n[16]:oe,oe}function Uc(n,i,o,u,h){let m=n.data[i];if(null===m)m=function hd(n,i,o,u,h){const m=W(),w=Fe(),N=n.data[i]=function rv(n,i,o,u,h,m){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,o,i,u,h);return null===n.firstChild&&(n.firstChild=N),null!==m&&(w?null==m.child&&null!==N.parent&&(m.child=N):null===m.next&&(m.next=N)),N}(n,i,o,u,h),function qi(){return ur.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=o,m.value=u,m.attrs=h;const w=function fe(){const n=ur.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return Ie(m,!0),m}function Yl(n,i,o,u){if(0===o)return-1;const h=i.length;for(let m=0;m<o;m++)i.push(u),n.blueprint.push(u),n.data.push(null);return h}function fd(n,i,o){No(i);try{const u=n.viewQuery;null!==u&&ih(1,u,o);const h=n.template;null!==h&&Rp(n,i,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&dd(n,i),n.staticViewQueries&&ih(2,n.viewQuery,o);const m=n.components;null!==m&&function Um(n,i){for(let o=0;o<i.length;o++)Ym(n,i[o])}(i,m)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[2]&=-5,ea()}}function Fu(n,i,o,u){const h=i[2];if(256!=(256&h)){No(i);try{yo(i),function Ai(n){return ur.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Rp(n,i,o,2,u);const w=3==(3&h);if(w){const ee=n.preOrderCheckHooks;null!==ee&&Zo(i,ee,null)}else{const ee=n.preOrderHooks;null!==ee&&cs(i,ee,0,null),ko(i,0)}if(function Up(n){for(let i=cn(n);null!==i;i=mn(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const h=o[u],m=h[3];0==(1024&h[2])&&Fi(m,1),h[2]|=1024}}}(i),function Vp(n){for(let i=cn(n);null!==i;i=mn(i))for(let o=10;o<i.length;o++){const u=i[o],h=u[1];Mi(u)&&Fu(h,u,h.template,u[8])}}(i),null!==n.contentQueries&&dd(n,i),w){const ee=n.contentCheckHooks;null!==ee&&Zo(i,ee)}else{const ee=n.contentHooks;null!==ee&&cs(i,ee,1),ko(i,1)}!function If(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const h=o[u];if(h<0)Es(~h);else{const m=h,w=o[++u],M=o[++u];Ls(w,m),M(2,i[m])}}}finally{Es(-1)}}(n,i);const M=n.components;null!==M&&function Vm(n,i){for(let o=0;o<i.length;o++)Zm(n,i[o])}(i,M);const N=n.viewQuery;if(null!==N&&ih(2,N,u),w){const ee=n.viewCheckHooks;null!==ee&&Zo(i,ee)}else{const ee=n.viewHooks;null!==ee&&cs(i,ee,2),ko(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-73,1024&i[2]&&(i[2]&=-1025,Fi(i[3],-1))}finally{ea()}}}function pd(n,i,o,u){const h=i[10],w=Mr(i);try{!w&&h.begin&&h.begin(),w&&fd(n,i,u),Fu(n,i,o,u)}finally{!w&&h.end&&h.end()}}function Rp(n,i,o,u,h){const m=ss(),w=2&u;try{Es(-1),w&&i.length>20&&Ep(n,i,20,!1),o(u,h)}finally{Es(m)}}function mc(n,i,o){if(kt(i)){const h=i.directiveEnd;for(let m=i.directiveStart;m<h;m++){const w=n.data[m];w.contentQueries&&w.contentQueries(1,o[m],m)}}}function Mp(n,i,o){!V()||(function Op(n,i,o,u){const h=o.directiveStart,m=o.directiveEnd;n.firstCreatePass||Fa(o,i),Ns(u,i);const w=o.initialInputs;for(let M=h;M<m;M++){const N=n.data[M],ee=fr(N);ee&&Df(i,o,N);const oe=Zn(i,n,M,o);Ns(oe,i),null!==w&&Fp(0,M-h,oe,N,0,w),ee&&(yr(o.index,i)[8]=oe)}}(n,i,o,Bt(o,i)),128==(128&o.flags)&&function Na(n,i,o){const u=o.directiveStart,h=o.directiveEnd,w=o.index,M=function is(){return ur.lFrame.currentDirectiveIndex}();try{Es(w);for(let N=u;N<h;N++){const ee=n.data[N],oe=i[N];$i(N),(null!==ee.hostBindings||0!==ee.hostVars||null!==ee.hostAttrs)&&Wm(ee,oe)}}finally{Es(-1),$i(M)}}(n,i,o))}function yc(n,i,o=Bt){const u=i.localNames;if(null!==u){let h=i.index+1;for(let m=0;m<u.length;m+=2){const w=u[m+1],M=-1===w?o(i,n):n[w];n[h++]=M}}}function xp(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=dl(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function dl(n,i,o,u,h,m,w,M,N,ee){const oe=20+u,Te=oe+h,Ye=function Bm(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:wi);return o}(oe,Te),wt="function"==typeof ee?ee():ee;return Ye[1]={type:n,blueprint:Ye,template:o,queries:null,viewQuery:M,declTNode:i,data:Ye.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:N,consts:wt,incompleteFirstPass:!1}}function Pp(n,i,o,u){const h=Gp(i);null===o?h.push(u):(h.push(o),n.firstCreatePass&&zp(n).push(u,h.length-1))}function Xd(n,i,o){for(let u in n)if(n.hasOwnProperty(u)){const h=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,h):o[u]=[i,h]}return o}function Iu(n,i,o,u,h,m,w,M){const N=Bt(i,o);let oe,ee=i.inputs;!M&&null!=ee&&(oe=ee[u])?(ny(n,o,oe,u,h),bn(i)&&function sv(n,i){const o=yr(i,n);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function iv(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),h=null!=w?w(h,i.value||"",u):h,Ei(m)?m.setProperty(N,u,h):fs(u)||(N.setProperty?N.setProperty(u,h):N[u]=h))}function bf(n,i,o,u){let h=!1;if(V()){const m=function lv(n,i,o){const u=n.directiveRegistry;let h=null;if(u)for(let m=0;m<u.length;m++){const w=u[m];_p(o,w.selectors,!1)&&(h||(h=[]),I(Fa(o,i),n,w.type),fr(w)?(Km(n,o),h.unshift(w)):h.push(w))}return h}(n,i,o),w=null===u?null:{"":-1};if(null!==m){h=!0,qm(o,n.data.length,m.length);for(let oe=0;oe<m.length;oe++){const Te=m[oe];Te.providersResolver&&Te.providersResolver(Te)}let M=!1,N=!1,ee=Yl(n,i,m.length,null);for(let oe=0;oe<m.length;oe++){const Te=m[oe];o.mergedAttrs=_o(o.mergedAttrs,Te.hostAttrs),eh(n,o,i,ee,Te),kp(ee,Te,w),null!==Te.contentQueries&&(o.flags|=8),(null!==Te.hostBindings||null!==Te.hostAttrs||0!==Te.hostVars)&&(o.flags|=128);const Ye=Te.type.prototype;!M&&(Ye.ngOnChanges||Ye.ngOnInit||Ye.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),M=!0),!N&&(Ye.ngOnChanges||Ye.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),N=!0),ee++}!function $m(n,i){const u=i.directiveEnd,h=n.data,m=i.attrs,w=[];let M=null,N=null;for(let ee=i.directiveStart;ee<u;ee++){const oe=h[ee],Te=oe.inputs,Ye=null===m||ul(i)?null:Lp(Te,m);w.push(Ye),M=Xd(Te,ee,M),N=Xd(oe.outputs,ee,N)}null!==M&&(M.hasOwnProperty("class")&&(i.flags|=16),M.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=w,i.inputs=M,i.outputs=N}(n,o)}w&&function cv(n,i,o){if(i){const u=n.localNames=[];for(let h=0;h<i.length;h+=2){const m=o[i[h+1]];if(null==m)throw new Ft(-301,!1);u.push(i[h],m)}}}(o,u,w)}return o.mergedAttrs=_o(o.mergedAttrs,o.attrs),h}function zm(n,i,o,u,h,m){const w=m.hostBindings;if(w){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const N=~i.index;(function uv(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(M)!=N&&M.push(N),M.push(u,h,w)}}function Wm(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Km(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function kp(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;fr(i)&&(o[""]=n)}}function qm(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}function eh(n,i,o,u,h){n.data[u]=h;const m=h.factory||(h.factory=li(h.type)),w=new si(m,fr(h),null);n.blueprint[u]=w,o[u]=w,zm(n,i,0,u,Yl(n,o,h.hostVars,wi),h)}function Df(n,i,o){const u=Bt(i,n),h=xp(o),m=n[10],w=md(n,ua(n,h,null,o.onPush?64:16,u,i,m,m.createRenderer(u,o),null,null));n[i.index]=w}function Nl(n,i,o,u,h,m){const w=Bt(n,i);!function Sf(n,i,o,u,h,m,w){if(null==m)Ei(n)?n.removeAttribute(i,h,o):i.removeAttribute(h);else{const M=null==w?Qe(m):w(m,u||"",h);Ei(n)?n.setAttribute(i,h,M,o):o?i.setAttributeNS(o,h,M):i.setAttribute(h,M)}}(i[11],w,m,n.value,o,u,h)}function Fp(n,i,o,u,h,m){const w=m[i];if(null!==w){const M=u.setInput;for(let N=0;N<w.length;){const ee=w[N++],oe=w[N++],Te=w[N++];null!==M?u.setInput(o,Te,ee,oe):o[oe]=Te}}}function Lp(n,i){let o=null,u=0;for(;u<i.length;){const h=i[u];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],i[u+1])),u+=2}else u+=2;else u+=4}return o}function th(n,i,o,u){return new Array(n,!0,!1,i,null,0,u,o,null,null)}function Zm(n,i){const o=yr(i,n);if(Mi(o)){const u=o[1];80&o[2]?Fu(u,o,u.template,o[8]):o[5]>0&&Bp(o)}}function Bp(n){for(let u=cn(n);null!==u;u=mn(u))for(let h=10;h<u.length;h++){const m=u[h];if(1024&m[2]){const w=m[1];Fu(w,m,w.template,m[8])}else m[5]>0&&Bp(m)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const h=yr(o[u],n);Mi(h)&&h[5]>0&&Bp(h)}}function Ym(n,i){const o=yr(i,n),u=o[1];(function Qm(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(u,o),fd(u,o,o[8])}function md(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function jp(n){for(;n;){n[2]|=64;const i=Be(n);if(Tr(n)&&!i)return n;n=i}return null}function Xm(n){!function Hp(n){for(let i=0;i<n.components.length;i++){const o=n.components[i],u=Lo(o),h=u[1];pd(h,u,h.template,o)}}(n[8])}function ih(n,i,o){Io(0),i(n,o)}const ey=(()=>Promise.resolve(null))();function Gp(n){return n[7]||(n[7]=[])}function zp(n){return n.cleanup||(n.cleanup=[])}function Mf(n,i){const o=n[9],u=o?o.get(pc,null):null;u&&u.handleError(i)}function ny(n,i,o,u,h){for(let m=0;m<o.length;){const w=o[m++],M=o[m++],N=i[w],ee=n.data[w];null!==ee.setInput?ee.setInput(N,h,u,M):N[M]=h}}function hl(n,i,o){const u=Tt(i,n);!function fo(n,i,o){Ei(n)?n.setValue(i,o):i.textContent=o}(n[11],u,o)}function sh(n,i,o){let u=o?n.styles:null,h=o?n.classes:null,m=0;if(null!==i)for(let w=0;w<i.length;w++){const M=i[w];"number"==typeof M?m=M:1==m?h=lt(h,M):2==m&&(u=lt(u,M+": "+i[++w]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=h:n.classesWithoutHost=h}const Bc=new ps("INJECTOR",-1);class oh{get(i,o=to){if(o===to){const u=new Error(`NullInjectorError: No provider for ${ze(i)}!`);throw u.name="NullInjectorError",u}return o}}const ah=new ps("Set Injector scope."),jc={},qp={};let xf;function iy(){return void 0===xf&&(xf=new oh),xf}function Zp(n,i=null,o=null,u){const h=uh(n,i,o,u);return h._resolveInjectorDefTypes(),h}function uh(n,i=null,o=null,u){return new Yp(n,o,i||iy(),u)}class Yp{constructor(i,o,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];o&&La(o,M=>this.processProvider(M,i,o)),La([i],M=>this.processInjectorType(M,[],m)),this.records.set(Bc,Hc(void 0,this));const w=this.records.get(ah);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof i?null:ze(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=to,u=En.Default){this.assertNotDestroyed();const h=iu(this),m=Mn(void 0);try{if(!(u&En.SkipSelf)){let M=this.records.get(i);if(void 0===M){const N=function gv(n){return"function"==typeof n||"object"==typeof n&&n instanceof ps}(i)&&pt(i);M=N&&this.injectableDefInScope(N)?Hc(Qp(i),jc):null,this.records.set(i,M)}if(null!=M)return this.hydrate(i,M)}return(u&En.Self?iy():this.parent).get(i,o=u&En.Optional&&o===to?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[Jo]=w[Jo]||[]).unshift(ze(i)),h)throw w;return function Pu(n,i,o,u){const h=n[Jo];throw i[Wa]&&h.unshift(i[Wa]),n.message=function sl(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=ze(i);if(Array.isArray(i))h=i.map(ze).join(" -> ");else if("object"==typeof i){let m=[];for(let w in i)if(i.hasOwnProperty(w)){let M=i[w];m.push(w+":"+("string"==typeof M?JSON.stringify(M):ze(M)))}h=`{${m.join(", ")}}`}return`${o}${u?"("+u+")":""}[${h}]: ${n.replace(Ao,"\n  ")}`}("\n"+n.message,h,o,u),n.ngTokenPath=h,n[Jo]=null,n}(w,i,"R3InjectorError",this.source)}throw w}finally{Mn(m),iu(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,h)=>i.push(ze(h))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ft(205,!1)}processInjectorType(i,o,u){if(!(i=nt(i)))return!1;let h=zn(i);const m=null==h&&i.ngModule||void 0,w=void 0===m?i:m,M=-1!==u.indexOf(w);if(void 0!==m&&(h=zn(m)),null==h)return!1;if(null!=h.imports&&!M){let oe;u.push(w);try{La(h.imports,Te=>{this.processInjectorType(Te,o,u)&&(void 0===oe&&(oe=[]),oe.push(Te))})}finally{}if(void 0!==oe)for(let Te=0;Te<oe.length;Te++){const{ngModule:Ye,providers:wt}=oe[Te];La(wt,Kt=>this.processProvider(Kt,Ye,wt||Yt))}}this.injectorDefTypes.add(w);const N=li(w)||(()=>new w);this.records.set(w,Hc(N,jc));const ee=h.providers;if(null!=ee&&!M){const oe=i;La(ee,Te=>this.processProvider(Te,oe,ee))}return void 0!==m&&void 0!==i.providers}processProvider(i,o,u){let h=$c(i=nt(i))?i:nt(i&&i.provide);const m=function Za(n,i,o){return lh(n)?Hc(void 0,n.useValue):Hc(sy(n),jc)}(i);if($c(i)||!0!==i.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Hc(void 0,jc,!0),w.factory=()=>Ku(w.multi),this.records.set(h,w)),h=i,w.multi.push(i)}this.records.set(h,m)}hydrate(i,o){return o.value===jc&&(o.value=qp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function pv(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=nt(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Qp(n){const i=pt(n),o=null!==i?i.factory:li(n);if(null!==o)return o;if(n instanceof ps)throw new Ft(204,!1);if(n instanceof Function)return function dv(n){const i=n.length;if(i>0)throw function ya(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}(i,"?"),new Ft(204,!1);const o=function hn(n){const i=n&&(n[mr]||n[Ln]);if(i){const o=function Dn(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ft(204,!1)}function sy(n,i,o){let u;if($c(n)){const h=nt(n);return li(h)||Qp(h)}if(lh(n))u=()=>nt(n.useValue);else if(function Jp(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...Ku(n.deps||[]));else if(function ch(n){return!(!n||!n.useExisting)}(n))u=()=>zs(nt(n.useExisting));else{const h=nt(n&&(n.useClass||n.provide));if(!function fv(n){return!!n.deps}(n))return li(h)||Qp(h);u=()=>new h(...Ku(n.deps))}return u}function Hc(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function lh(n){return null!==n&&"object"==typeof n&&Aa in n}function $c(n){return"function"==typeof n}let Ju=(()=>{class n{static create(o,u){var h;if(Array.isArray(o))return Zp({name:""},u,o,"");{const m=null!==(h=o.name)&&void 0!==h?h:"";return Zp({name:m},o.parent,o.providers,m)}}}return n.THROW_IF_NOT_FOUND=to,n.NULL=new oh,n.\u0275prov=De({token:n,providedIn:"any",factory:()=>zs(Bc)}),n.__NG_ELEMENT_ID__=-1,n})();function fy(n,i){ws(Lo(n)[1],z())}function fh(n){let i=function py(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;i;){let h;if(fr(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Ft(903,"");h=i.\u0275dir}if(h){if(o){u.push(h);const w=n;w.inputs=ph(n.inputs),w.declaredInputs=ph(n.declaredInputs),w.outputs=ph(n.outputs);const M=h.hostBindings;M&&Ev(n,M);const N=h.viewQuery,ee=h.contentQueries;if(N&&vv(n,N),ee&&og(n,ee),Xe(n.inputs,h.inputs),Xe(n.declaredInputs,h.declaredInputs),Xe(n.outputs,h.outputs),fr(h)&&h.data.animation){const oe=n.data;oe.animation=(oe.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let w=0;w<m.length;w++){const M=m[w];M&&M.ngInherit&&M(n),M===fh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function _v(n){let i=0,o=null;for(let u=n.length-1;u>=0;u--){const h=n[u];h.hostVars=i+=h.hostVars,h.hostAttrs=_o(h.hostAttrs,o=_o(o,h.hostAttrs))}}(u)}function ph(n){return n===br?{}:n===Yt?[]:n}function vv(n,i){const o=n.viewQuery;n.viewQuery=o?(u,h)=>{i(u,h),o(u,h)}:i}function og(n,i){const o=n.contentQueries;n.contentQueries=o?(u,h,m)=>{i(u,h,m),o(u,h,m)}:i}function Ev(n,i){const o=n.hostBindings;n.hostBindings=o?(u,h)=>{i(u,h),o(u,h)}:i}let _d=null;function vc(){if(!_d){const n=Wn.Symbol;if(n&&n.iterator)_d=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(_d=u)}}}return _d}function Xu(n){return!!Ec(n)&&(Array.isArray(n)||!(n instanceof Map)&&vc()in n)}function Ec(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fl(n,i,o){return n[i]=o}function Ya(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function zc(n,i,o,u){const h=Ya(n,i,o);return Ya(n,i+1,u)||h}function gh(n,i,o,u){const h=Ne();return Ya(h,bi(),i)&&(qt(),Nl(Pi(),h,n,i,o,u)),gh}function Id(n,i,o,u,h,m){const M=zc(n,function ci(){return ur.lFrame.bindingIndex}(),o,h);return Br(2),M?i+Qe(o)+u+Qe(h)+m:wi}function Ey(n,i,o,u,h,m,w,M){const N=Ne(),ee=qt(),oe=n+20,Te=ee.firstCreatePass?function fg(n,i,o,u,h,m,w,M,N){const ee=i.consts,oe=Uc(i,n,4,w||null,ii(ee,M));bf(i,o,oe,ii(ee,N)),ws(i,oe);const Te=oe.tViews=dl(2,oe,u,h,m,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ee);return null!==i.queries&&(i.queries.template(i,oe),Te.queries=i.queries.embeddedTView(oe)),oe}(oe,ee,N,i,o,u,h,m,w):ee.data[oe];Ie(Te,!1);const Ye=N[11].createComment("");xt(ee,N,Ye,Te),Ns(Ye,N),md(N,N[oe]=th(Ye,N,Ye,Te)),Rr(Te)&&Mp(ee,N,Te),null!=w&&yc(N,Te,M)}function wy(n){return Vr(function Vn(){return ur.lFrame.contextLView}(),20+n)}function Eh(n,i=En.Default){const o=Ne();return null===o?zs(n,i):Re(z(),o,nt(n),i)}function Sd(){throw new Error("invalid")}function bg(n,i,o){const u=Ne();return Ya(u,bi(),i)&&Iu(qt(),Pi(),u,n,i,u[11],o,!1),bg}function wh(n,i,o,u,h){const w=h?"class":"style";ny(n,o,i.inputs[w],w,u)}function Jl(n,i,o,u){const h=Ne(),m=qt(),w=20+n,M=h[11],N=h[w]=Cu(M,i,function pu(){return ur.lFrame.currentNamespace}()),ee=m.firstCreatePass?function Py(n,i,o,u,h,m,w){const M=i.consts,ee=Uc(i,n,2,h,ii(M,m));return bf(i,o,ee,ii(M,w)),null!==ee.attrs&&sh(ee,ee.attrs,!1),null!==ee.mergedAttrs&&sh(ee,ee.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,ee),ee}(w,m,h,0,i,o,u):m.data[w];Ie(ee,!0);const oe=ee.mergedAttrs;null!==oe&&Xs(M,N,oe);const Te=ee.classes;null!==Te&&Dl(M,N,Te);const Ye=ee.styles;return null!==Ye&&ac(M,N,Ye),64!=(64&ee.flags)&&xt(m,h,N,ee),0===function vs(){return ur.lFrame.elementDepthCount}()&&Ns(N,h),function qo(){ur.lFrame.elementDepthCount++}(),Rr(ee)&&(Mp(m,h,ee),mc(m,ee,h)),null!==u&&yc(h,ee),Jl}function Ch(){let n=z();Fe()?Ct():(n=n.parent,Ie(n,!1));const i=n;!function K(){ur.lFrame.elementDepthCount--}();const o=qt();return o.firstCreatePass&&(ws(o,n),kt(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function gu(n){return 0!=(16&n.flags)}(i)&&wh(o,i,Ne(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Ja(n){return 0!=(32&n.flags)}(i)&&wh(o,i,Ne(),i.stylesWithoutHost,!1),Ch}function Ad(n,i,o,u){return Jl(n,i,o,u),Ch(),Ad}function Gf(n,i,o){const u=Ne(),h=qt(),m=n+20,w=h.firstCreatePass?function Rv(n,i,o,u,h){const m=i.consts,w=ii(m,u),M=Uc(i,n,8,"ng-container",w);return null!==w&&sh(M,w,!0),bf(i,o,M,ii(m,h)),null!==i.queries&&i.queries.elementStart(i,M),M}(m,h,u,i,o):h.data[m];Ie(w,!0);const M=u[m]=u[11].createComment("");return xt(h,u,M,w),Ns(M,u),Rr(w)&&(Mp(h,u,w),mc(h,w,u)),null!=o&&yc(u,w),Gf}function zf(){let n=z();const i=qt();return Fe()?Ct():(n=n.parent,Ie(n,!1)),i.firstCreatePass&&(ws(i,n),kt(n)&&i.queries.elementEnd(n)),zf}function Wf(){return Ne()}function Th(n){return!!n&&"function"==typeof n.then}function Kf(n){return!!n&&"function"==typeof n.subscribe}const Dg=Kf;function bh(n,i,o,u){const h=Ne(),m=qt(),w=z();return function Yf(n,i,o,u,h,m,w,M){const N=Rr(u),oe=n.firstCreatePass&&zp(n),Te=i[8],Ye=Gp(i);let wt=!0;if(3&u.type||M){const Gn=Bt(u,i),Ir=M?M(Gn):Gn,an=Ye.length,Kr=M?es=>M(j(es[u.index])):u.index;if(Ei(o)){let es=null;if(!M&&N&&(es=function Zf(n,i,o,u){const h=n.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const w=h[m];if(w===o&&h[m+1]===u){const M=i[7],N=h[m+2];return M.length>N?M[N]:null}"string"==typeof w&&(m+=2)}return null}(n,i,h,u.index)),null!==es)(es.__ngLastListenerFn__||es).__ngNextListenerFn__=m,es.__ngLastListenerFn__=m,wt=!1;else{m=Rd(u,i,Te,m,!1);const Zs=o.listen(Ir,h,m);Ye.push(m,Zs),oe&&oe.push(h,Kr,an,an+1)}}else m=Rd(u,i,Te,m,!0),Ir.addEventListener(h,m,w),Ye.push(m),oe&&oe.push(h,Kr,an,w)}else m=Rd(u,i,Te,m,!1);const Kt=u.outputs;let An;if(wt&&null!==Kt&&(An=Kt[h])){const Gn=An.length;if(Gn)for(let Ir=0;Ir<Gn;Ir+=2){const ml=i[An[Ir]][An[Ir+1]].subscribe(m),qh=Ye.length;Ye.push(m,ml),oe&&oe.push(h,u.index,qh,-(qh+1))}}}(m,h,h[11],w,n,i,!!o,u),bh}function Sg(n,i,o,u){try{return!1!==o(u)}catch(h){return Mf(n,h),!1}}function Rd(n,i,o,u,h){return function m(w){if(w===Function)return u;const M=2&n.flags?yr(n.index,i):i;0==(32&i[2])&&jp(M);let N=Sg(i,0,u,w),ee=m.__ngNextListenerFn__;for(;ee;)N=Sg(i,0,ee,w)&&N,ee=ee.__ngNextListenerFn__;return h&&!1===N&&(w.preventDefault(),w.returnValue=!1),N}}function Ag(n=1){return function xi(n){return(ur.lFrame.contextLView=function co(n,i){for(;n>0;)i=i[15],n--;return i}(n,ur.lFrame.contextLView))[8]}(n)}function Jf(n,i,o,u,h){const m=n[o+1],w=null===i;let M=u?ll(m):ql(m),N=!1;for(;0!==M&&(!1===N||w);){const oe=n[M+1];Hy(n[M],i)&&(N=!0,n[M+1]=u?gf(oe):ff(oe)),M=u?ll(oe):ql(oe)}N&&(n[o+1]=u?ff(m):gf(m))}function Hy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&vt(n,i)>=0}const la={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ng(n){return n.substring(la.key,la.keyEnd)}function Og(n,i){const o=la.textEnd;return o===i?-1:(i=la.keyEnd=function ja(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,la.key=i,o),Os(n,i,o))}function Os(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function Sh(n,i,o){return Fl(n,i,o,!1),Sh}function Lg(n,i){return Fl(n,i,null,!0),Lg}function Gy(n){!function Ll(n,i,o,u){const h=qt(),m=Br(2);h.firstUpdatePass&&Vg(h,null,m,u);const w=Ne();if(o!==wi&&Ya(w,m,o)){const M=h.data[ss()];if(pl(M,u)&&!Ko(h,m)){let N=u?M.classesWithoutHost:M.stylesWithoutHost;null!==N&&(o=lt(N,o||"")),wh(h,M,w,o,u)}else!function Vv(n,i,o,u,h,m,w,M){h===wi&&(h=Yt);let N=0,ee=0,oe=0<h.length?h[0]:null,Te=0<m.length?m[0]:null;for(;null!==oe||null!==Te;){const Ye=N<h.length?h[N+1]:void 0,wt=ee<m.length?m[ee+1]:void 0;let An,Kt=null;oe===Te?(N+=2,ee+=2,Ye!==wt&&(Kt=Te,An=wt)):null===Te||null!==oe&&oe<Te?(N+=2,Kt=oe):(ee+=2,Kt=Te,An=wt),null!==Kt&&Wy(n,i,o,u,Kt,An,w,M),oe=N<h.length?h[N]:null,Te=ee<m.length?m[ee]:null}}(h,M,w,w[11],w[m+1],w[m+1]=function Fv(n,i,o){if(null==o||""===o)return Yt;const u=[],h=Qu(o);if(Array.isArray(h))for(let m=0;m<h.length;m++)n(u,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&n(u,m,h[m]);else"string"==typeof h&&i(u,h);return u}(n,i,o),u,m)}}(Ps,us,n,!0)}function us(n,i){for(let o=function Ji(n){return function kg(n){la.key=0,la.keyEnd=0,la.value=0,la.valueEnd=0,la.textEnd=n.length}(n),Og(n,Os(n,0,la.textEnd))}(i);o>=0;o=Og(i,o))Ps(n,Ng(i),!0)}function Fl(n,i,o,u){const h=Ne(),m=qt(),w=Br(2);m.firstUpdatePass&&Vg(m,n,w,u),i!==wi&&Ya(h,w,i)&&Wy(m,m.data[ss()],h,h[11],n,h[w+1]=function Uv(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=ze(Qu(n)))),n}(i,o),u,w)}function Ko(n,i){return i>=n.expandoStartIndex}function Vg(n,i,o,u){const h=n.data;if(null===h[o+1]){const m=h[ss()],w=Ko(n,o);pl(m,u)&&null===i&&!w&&(i=!1),i=function Nv(n,i,o,u){const h=Zi(n);let m=u?i.residualClasses:i.residualStyles;if(null===h)0===(u?i.classBindings:i.styleBindings)&&(o=Ah(o=Ug(null,n,i,o,u),i.attrs,u),m=null);else{const w=i.directiveStylingLast;if(-1===w||n[w]!==h)if(o=Ug(h,n,i,o,u),null===m){let N=function Ov(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==ql(u))return n[ll(u)]}(n,i,u);void 0!==N&&Array.isArray(N)&&(N=Ug(null,n,i,N[1],u),N=Ah(N,i.attrs,u),function zy(n,i,o,u){n[ll(o?i.classBindings:i.styleBindings)]=u}(n,i,u,N))}else m=function kv(n,i,o){let u;const h=i.directiveEnd;for(let m=1+i.directiveStylingLast;m<h;m++)u=Ah(u,n[m].hostAttrs,o);return Ah(u,i.attrs,o)}(n,i,u)}return void 0!==m&&(u?i.residualClasses=m:i.residualStyles=m),o}(h,m,i,u),function By(n,i,o,u,h,m){let w=m?i.classBindings:i.styleBindings,M=ll(w),N=ql(w);n[u]=o;let oe,ee=!1;if(Array.isArray(o)){const Te=o;oe=Te[1],(null===oe||vt(Te,oe)>0)&&(ee=!0)}else oe=o;if(h)if(0!==N){const Ye=ll(n[M+1]);n[u+1]=hf(Ye,M),0!==Ye&&(n[Ye+1]=pf(n[Ye+1],u)),n[M+1]=function ld(n,i){return 131071&n|i<<17}(n[M+1],u)}else n[u+1]=hf(M,0),0!==M&&(n[M+1]=pf(n[M+1],u)),M=u;else n[u+1]=hf(N,0),0===M?M=u:n[N+1]=pf(n[N+1],u),N=u;ee&&(n[u+1]=ff(n[u+1])),Jf(n,oe,u,!0),Jf(n,oe,u,!1),function jy(n,i,o,u,h){const m=h?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof i&&vt(m,i)>=0&&(o[u+1]=gf(o[u+1]))}(i,oe,n,u,m),w=hf(M,N),m?i.classBindings=w:i.styleBindings=w}(h,m,i,o,w,u)}}function Ug(n,i,o,u,h){let m=null;const w=o.directiveEnd;let M=o.directiveStylingLast;for(-1===M?M=o.directiveStart:M++;M<w&&(m=i[M],u=Ah(u,m.hostAttrs,h),m!==n);)M++;return null!==n&&(o.directiveStylingLast=M),u}function Ah(n,i,o){const u=o?1:2;let h=-1;if(null!==i)for(let m=0;m<i.length;m++){const w=i[m];"number"==typeof w?h=w:h===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ps(n,w,!!o||i[++m]))}return void 0===n?null:n}function Wy(n,i,o,u,h,m,w,M){if(!(3&i.type))return;const N=n.data,ee=N[M+1];bc(function Rl(n){return 1==(1&n)}(ee)?Bg(N,i,o,h,ql(ee),w):void 0)||(bc(m)||function Kl(n){return 2==(2&n)}(ee)&&(m=Bg(N,null,o,h,M,w)),function bl(n,i,o,u,h){const m=Ei(n);if(i)h?m?n.addClass(o,u):o.classList.add(u):m?n.removeClass(o,u):o.classList.remove(u);else{let w=-1===u.indexOf("-")?void 0:ti.DashCase;if(null==h)m?n.removeStyle(o,u,w):o.style.removeProperty(u);else{const M="string"==typeof h&&h.endsWith("!important");M&&(h=h.slice(0,-10),w|=ti.Important),m?n.setStyle(o,u,h,w):o.style.setProperty(u,h,M?"important":"")}}}(u,w,Tt(ss(),o),h,m))}function Bg(n,i,o,u,h,m){const w=null===i;let M;for(;h>0;){const N=n[h],ee=Array.isArray(N),oe=ee?N[1]:N,Te=null===oe;let Ye=o[h+1];Ye===wi&&(Ye=Te?Yt:void 0);let wt=Te?nu(Ye,u):oe===u?Ye:void 0;if(ee&&!bc(wt)&&(wt=nu(N,u)),bc(wt)&&(M=wt,w))return M;const Kt=n[h+1];h=w?ll(Kt):ql(Kt)}if(null!==i){let N=m?i.residualClasses:i.residualStyles;null!=N&&(M=nu(N,u))}return M}function bc(n){return void 0!==n}function pl(n,i){return 0!=(n.flags&(i?16:32))}function Vl(n,i=""){const o=Ne(),u=qt(),h=n+20,m=u.firstCreatePass?Uc(u,h,1,i,null):u.data[h],w=o[h]=function Ro(n,i){return Ei(n)?n.createText(i):n.createTextNode(i)}(o[11],i);xt(u,o,w,m),Ie(m,!1)}function Ky(n){return Ul("",n,""),Ky}function Ul(n,i,o){const u=Ne(),h=function Cd(n,i,o,u){return Ya(n,bi(),o)?i+Qe(o)+u:wi}(u,n,i,o);return h!==wi&&hl(u,ss(),h),Ul}function Pd(n,i,o,u,h){const m=Ne(),w=Id(m,n,i,o,u,h);return w!==wi&&hl(m,ss(),w),Pd}function Sc(n,i,o){const u=Ne();if(Ya(u,bi(),i)){const m=qt(),w=Pi();Iu(m,w,u,n,i,function ty(n,i,o){return(null===n||fr(n))&&(o=function de(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[i.index])),o[11]}(Zi(m.data),w,u),o,!0)}return Sc}const Fd=void 0;var Zg=["en",[["a","p"],["AM","PM"],Fd],[["AM","PM"],Fd,Fd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fd,"{1} 'at' {0}",Fd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _E(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Ld={};function ip(n,i,o){"string"!=typeof i&&(o=i,i=n[jr.LocaleId]),i=i.toLowerCase().replace(/_/g,"-"),Ld[i]=n,o&&(Ld[i][jr.ExtraData]=o)}function Yg(n){const i=function Gv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=r_(i);if(o)return o;const u=i.split("-")[0];if(o=r_(u),o)return o;if("en"===u)return Zg;throw new Error(`Missing locale data for the locale "${n}".`)}function Nh(n){return Yg(n)[jr.PluralCase]}function r_(n){return n in Ld||(Ld[n]=Wn.ng&&Wn.ng.common&&Wn.ng.common.locales&&Wn.ng.common.locales[n]),Ld[n]}var jr=(()=>((jr=jr||{})[jr.LocaleId=0]="LocaleId",jr[jr.DayPeriodsFormat=1]="DayPeriodsFormat",jr[jr.DayPeriodsStandalone=2]="DayPeriodsStandalone",jr[jr.DaysFormat=3]="DaysFormat",jr[jr.DaysStandalone=4]="DaysStandalone",jr[jr.MonthsFormat=5]="MonthsFormat",jr[jr.MonthsStandalone=6]="MonthsStandalone",jr[jr.Eras=7]="Eras",jr[jr.FirstDayOfWeek=8]="FirstDayOfWeek",jr[jr.WeekendRange=9]="WeekendRange",jr[jr.DateFormat=10]="DateFormat",jr[jr.TimeFormat=11]="TimeFormat",jr[jr.DateTimeFormat=12]="DateTimeFormat",jr[jr.NumberSymbols=13]="NumberSymbols",jr[jr.NumberFormats=14]="NumberFormats",jr[jr.CurrencyCode=15]="CurrencyCode",jr[jr.CurrencySymbol=16]="CurrencySymbol",jr[jr.CurrencyName=17]="CurrencyName",jr[jr.Currencies=18]="Currencies",jr[jr.Directionality=19]="Directionality",jr[jr.PluralCase=20]="PluralCase",jr[jr.ExtraData=21]="ExtraData",jr))();const Oh="en-US";let Lh=Oh;function im(n,i,o,u,h){if(n=nt(n),Array.isArray(n))for(let m=0;m<n.length;m++)im(n[m],i,o,u,h);else{const m=qt(),w=Ne();let M=$c(n)?n:nt(n.provide),N=sy(n);const ee=z(),oe=1048575&ee.providerIndexes,Te=ee.directiveStart,Ye=ee.providerIndexes>>20;if($c(n)||!n.multi){const wt=new si(N,h,Eh),Kt=Bl(M,i,h?oe:oe+Ye,Te);-1===Kt?(I(Fa(ee,w),m,M),sm(m,n,i.length),i.push(M),ee.directiveStart++,ee.directiveEnd++,h&&(ee.providerIndexes+=1048576),o.push(wt),w.push(wt)):(o[Kt]=wt,w[Kt]=wt)}else{const wt=Bl(M,i,oe+Ye,Te),Kt=Bl(M,i,oe,oe+Ye),An=wt>=0&&o[wt],Gn=Kt>=0&&o[Kt];if(h&&!Gn||!h&&!An){I(Fa(ee,w),m,M);const Ir=function S_(n,i,o,u,h){const m=new si(n,o,Eh);return m.multi=[],m.index=i,m.componentProviders=0,D_(m,h,u&&!o),m}(h?_0:y0,o.length,h,u,N);!h&&Gn&&(o[Kt].providerFactory=Ir),sm(m,n,i.length,0),i.push(M),ee.directiveStart++,ee.directiveEnd++,h&&(ee.providerIndexes+=1048576),o.push(Ir),w.push(Ir)}else sm(m,n,wt>-1?wt:Kt,D_(o[h?Kt:wt],N,!h&&u));!h&&u&&Gn&&o[Kt].componentProviders++}}}function sm(n,i,o,u){const h=$c(i),m=function hv(n){return!!n.useClass}(i);if(h||m){const N=(m?nt(i.useClass):i).prototype.ngOnDestroy;if(N){const ee=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const oe=ee.indexOf(o);-1===oe?ee.push(o,[u,N]):ee[oe+1].push(u,N)}else ee.push(o,N)}}}function D_(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Bl(n,i,o,u){for(let h=o;h<u;h++)if(i[h]===n)return h;return-1}function y0(n,i,o,u){return om(this.multi,[])}function _0(n,i,o,u){const h=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,M=Zn(o,o[1],this.providerFactory.index,u);m=M.slice(0,w),om(h,m);for(let N=w;N<M.length;N++)m.push(M[N])}else m=[],om(h,m);return m}function om(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function A_(n,i=[]){return o=>{o.providersResolver=(u,h)=>function ed(n,i,o){const u=qt();if(u.firstCreatePass){const h=fr(n);im(o,u.data,u.blueprint,h,!0),im(i,u.data,u.blueprint,h,!1)}}(u,h?h(n):n,i)}}class $h{}class v0{resolveComponentFactory(i){throw function R_(n){const i=Error(`No component factory found for ${ze(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Gh=(()=>{class n{}return n.NULL=new v0,n})();function P_(){return td(z(),Ne())}function td(n,i){return new zh(Bt(n,i))}let zh=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=P_,n})();function N_(n){return n instanceof zh?n.nativeElement:n}class O_{}let w0=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function F_(){const n=Ne(),o=yr(z().index,n);return function k_(n){return n[11]}(st(o)?o:n)}(),n})(),C0=(()=>{class n{}return n.\u0275prov=De({token:n,providedIn:"root",factory:()=>null}),n})();class r{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const e=new r("13.3.12"),t={};function s(n,i,o,u,h=!1){for(;null!==o;){const m=i[o.index];if(null!==m&&u.push(j(m)),mt(m))for(let M=10;M<m.length;M++){const N=m[M],ee=N[1].firstChild;null!==ee&&s(N[1],N,ee,u)}const w=o.type;if(8&w)s(n,i,o.child,u);else if(32&w){const M=P(o,i);let N;for(;N=M();)u.push(N)}else if(16&w){const M=Fn(i,o);if(Array.isArray(M))u.push(...M);else{const N=Be(i[16]);s(N[1],N,M,u,!0)}}o=h?o.projectionNext:o.next}return u}class a{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return s(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(mt(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(yi(i,u),Ru(o,u))}this._attachedToViewContainer=!1}Qi(this._lView[1],this._lView)}onDestroy(i){Pp(this._lView[1],this._lView,null,i)}markForCheck(){jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Rf(n,i,o){const u=i[10];u.begin&&u.begin();try{Fu(n,i,n.template,o)}catch(h){throw Mf(i,h),h}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ft(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ba(n,i){aa(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Ft(902,"");this._appRef=i}}class d extends a{constructor(i){super(i),this._view=i}detectChanges(){Xm(this._view)}checkNoChanges(){}get context(){return null}}class g extends Gh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Se(i);return new ce(o,this.ngModule)}}function A(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class ce extends $h{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Sm(n){return n.map(Q_).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return A(this.componentDef.inputs)}get outputs(){return A(this.componentDef.outputs)}create(i,o,u,h){const m=(h=h||this.ngModule)?function Q(n,i){return{get:(o,u,h)=>{const m=n.get(o,t,h);return m!==t||u===t?m:i.get(o,u,h)}}}(i,h.injector):i,w=m.get(O_,F),M=m.get(C0,null),N=w.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",oe=u?function Hm(n,i,o){if(Ei(n))return n.selectRootElement(i,o===St.ShadowDom);let u="string"==typeof i?n.querySelector(i):i;return u.textContent="",u}(N,u,this.componentDef.encapsulation):Cu(w.createRenderer(null,this.componentDef),ee,function H(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ee)),Te=this.componentDef.onPush?576:528,Ye=function hy(n,i){return{components:[],scheduler:n||vm,clean:ey,playerHandler:i||null,flags:0}}(),wt=dl(0,null,null,1,0,null,null,null,null,null),Kt=ua(null,wt,Ye,Te,null,null,w,N,M,m);let An,Gn;No(Kt);try{const Ir=function Ff(n,i,o,u,h,m){const w=o[1];o[20]=n;const N=Uc(w,20,2,"#host",null),ee=N.mergedAttrs=i.hostAttrs;null!==ee&&(sh(N,ee,!0),null!==n&&(Xs(h,n,ee),null!==N.classes&&Dl(h,n,N.classes),null!==N.styles&&ac(h,n,N.styles)));const oe=u.createRenderer(n,i),Te=ua(o,xp(i),null,i.onPush?64:16,o[20],N,u,oe,m||null,null);return w.firstCreatePass&&(I(Fa(N,o),w,i.type),Km(w,N),qm(N,o.length,1)),md(o,Te),o[20]=Te}(oe,this.componentDef,Kt,w,N);if(oe)if(u)Xs(N,oe,["ng-version",e.full]);else{const{attrs:an,classes:Kr}=function vp(n){const i=[],o=[];let u=1,h=2;for(;u<n.length;){let m=n[u];if("string"==typeof m)2===h?""!==m&&i.push(m,n[++u]):8===h&&o.push(m);else{if(!cu(h))break;h=m}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);an&&Xs(N,oe,an),Kr&&Kr.length>0&&Dl(N,oe,Kr.join(" "))}if(Gn=Fr(wt,20),void 0!==o){const an=Gn.projection=[];for(let Kr=0;Kr<this.ngContentSelectors.length;Kr++){const es=o[Kr];an.push(null!=es?Array.from(es):null)}}An=function dy(n,i,o,u,h){const m=o[1],w=function av(n,i,o){const u=z();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),eh(n,u,i,Yl(n,i,1,null),o));const h=Zn(i,n,u.directiveStart,u);Ns(h,i);const m=Bt(u,i);return m&&Ns(m,i),h}(m,o,i);if(u.components.push(w),n[8]=w,h&&h.forEach(N=>N(w,i)),i.contentQueries){const N=z();i.contentQueries(1,w,N.directiveStart)}const M=z();return!m.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Es(M.index),zm(o[1],M,0,M.directiveStart,M.directiveEnd,i),Wm(i,w)),w}(Ir,this.componentDef,Kt,Ye,[fy]),fd(wt,Kt,null)}finally{ea()}return new $t(this.componentType,An,td(Gn,Kt),Kt,Gn)}}class $t extends class am{}{constructor(i,o,u,h,m){super(),this.location=u,this._rootLView=h,this._tNode=m,this.instance=o,this.hostView=this.changeDetectorRef=new d(h),this.componentType=i}get injector(){return new _n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Nn{}class Jn{}const ri=new Map;class Rc extends Nn{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new g(this);const u=yn(i);this._bootstrapComponents=Al(u.bootstrap),this._r3Injector=uh(i,o,[{provide:Nn,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver}],ze(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Ju.THROW_IF_NOT_FOUND,u=En.Default){return i===Ju||i===Nn||i===Bc?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class ap extends Jn{constructor(i){super(),this.moduleType=i,null!==yn(i)&&function Bo(n){const i=new Set;!function o(u){const h=yn(u,!0),m=h.id;null!==m&&(function Ci(n,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${n} - ${ze(i)} vs ${ze(i.name)}`)}(m,ri.get(m),u),ri.set(m,u));const w=Al(h.imports);for(const M of w)i.has(M)||(i.add(M),o(M))}(n)}(i)}create(i){return new Rc(this.moduleType,i)}}function AE(n,i,o,u){return function ME(n,i,o,u,h,m){const w=i+o;return Ya(n,w,h)?fl(n,w+1,m?u.call(m,h):u(h)):um(n,w+1)}(Ne(),Kn(),n,i,o,u)}function RE(n,i,o,u,h){return xE(Ne(),Kn(),n,i,o,u,h)}function um(n,i){const o=n[i];return o===wi?void 0:o}function xE(n,i,o,u,h,m,w){const M=i+o;return zc(n,M,h,m)?fl(n,M+2,w?u.call(w,h,m):u(h,m)):um(n,M+2)}function kE(n,i){const o=qt();let u;const h=n+20;o.firstCreatePass?(u=function qw(n,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(n===u.name)return u}}(i,o.pipeRegistry),o.data[h]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,u.onDestroy)):u=o.data[h];const m=u.factory||(u.factory=li(u.type)),w=Mn(Eh);try{const M=Su(!1),N=m();return Su(M),function pg(n,i,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=u}(o,Ne(),h,N),N}finally{Mn(w)}}function FE(n,i,o,u){const h=n+20,m=Ne(),w=Vr(m,h);return function lm(n,i){return n[1].data[i].pure}(m,h)?xE(m,Kn(),i,w.transform,o,u,w):w.transform(o,u)}function I0(n){return i=>{setTimeout(n,void 0,i)}}const Mc=class Xw extends y.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var h,m,w;let M=i,N=o||(()=>null),ee=u;if(i&&"object"==typeof i){const Te=i;M=null===(h=Te.next)||void 0===h?void 0:h.bind(Te),N=null===(m=Te.error)||void 0===m?void 0:m.bind(Te),ee=null===(w=Te.complete)||void 0===w?void 0:w.bind(Te)}this.__isAsync&&(N=I0(N),M&&(M=I0(M)),ee&&(ee=I0(ee)));const oe=super.subscribe({next:M,error:N,complete:ee});return i instanceof B.w0&&i.add(oe),oe}};function eC(){return this._results[vc()]()}class T0{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=vc(),u=T0.prototype;u[o]||(u[o]=eC)}get changes(){return this._changes||(this._changes=new Mc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const h=Cs(i);(this._changesDetected=!function ia(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let h=n[u],m=i[u];if(o&&(h=o(h),m=o(m)),m!==h)return!1}return!0}(u._results,h,o))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let cm=(()=>{class n{}return n.__NG_ELEMENT_ID__=rC,n})();const tC=cm,nC=class extends tC{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=ua(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(u[19]=m.createEmbeddedView(o)),fd(o,u,i),new a(u)}};function rC(){return L_(z(),Ne())}function L_(n,i){return 4&n.type?new nC(i,n,td(n,i)):null}let V_=(()=>{class n{}return n.__NG_ELEMENT_ID__=iC,n})();function iC(){return UE(z(),Ne())}const sC=V_,LE=class extends sC{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new _n(this._hostTNode,this._hostLView)}get parentInjector(){const i=b(this._hostTNode,this._hostLView);if(ka(i)){const o=Qo(i,this._hostLView),u=Yo(i);return new _n(o[1].data[u+8],o)}return new _n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=VE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const h=i.createEmbeddedView(o||{});return this.insert(h,u),h}createComponent(i,o,u,h,m){const w=i&&!function In(n){return"function"==typeof n}(i);let M;if(w)M=o;else{const Te=o||{};M=Te.index,u=Te.injector,h=Te.projectableNodes,m=Te.ngModuleRef}const N=w?i:new ce(Se(i)),ee=u||this.parentInjector;if(!m&&null==N.ngModule){const Ye=(w?ee:this.parentInjector).get(Nn,null);Ye&&(m=Ye)}const oe=N.create(ee,h,void 0,m);return this.insert(oe.hostView,M),oe}insert(i,o){const u=i._lView,h=u[1];if(function Si(n){return mt(n[3])}(u)){const oe=this.indexOf(i);if(-1!==oe)this.detach(oe);else{const Te=u[3],Ye=new LE(Te,Te[6],Te[3]);Ye.detach(Ye.indexOf(i))}}const m=this._adjustIndex(o),w=this._lContainer;!function Hl(n,i,o,u){const h=10+u,m=o.length;u>0&&(o[h-1][4]=i),u<m-10?(i[4]=o[h],zu(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const w=i[17];null!==w&&o!==w&&function sc(n,i){const o=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===o?n[9]=[i]:o.push(i)}(w,i);const M=i[19];null!==M&&M.insertView(n),i[2]|=128}(h,u,w,m);const M=Cr(m,w),N=u[11],ee=T(N,w[7]);return null!==ee&&function Mo(n,i,o,u,h,m){u[0]=h,u[6]=i,aa(n,u,o,1,h,m)}(h,w[6],N,u,ee,M),i.attachToViewContainerRef(),zu(b0(w),m,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=VE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=yi(this._lContainer,o);u&&(Ru(b0(this._lContainer),o),Qi(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=yi(this._lContainer,o);return u&&null!=Ru(b0(this._lContainer),o)?new a(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function VE(n){return n[8]}function b0(n){return n[8]||(n[8]=[])}function UE(n,i){let o;const u=i[n.index];if(mt(u))o=u;else{let h;if(8&n.type)h=j(u);else{const m=i[11];h=m.createComment("");const w=Bt(n,i);uu(m,T(m,w),h,function p(n,i){return Ei(n)?n.nextSibling(i):i.nextSibling}(m,w),!1)}i[n.index]=o=th(u,i,h,n),md(i,o)}return new LE(o,n,i)}class D0{constructor(i){this.queryList=i,this.matches=null}clone(){return new D0(this.queryList)}setDirty(){this.queryList.setDirty()}}class S0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let m=0;m<u;m++){const w=o.getByIndex(m);h.push(this.queries[w.indexInDeclarationView].clone())}return new S0(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==qE(i,o).matches&&this.queries[o].setDirty()}}class BE{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class A0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const h=null!==o?o.length:0,m=this.getByIndex(u).embeddedTView(i,h);m&&(m.indexInDeclarationView=u,null!==o?o.push(m):o=[m])}return null!==o?new A0(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class R0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new R0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const m=u[h];this.matchTNodeWithReadOption(i,o,uC(o,m)),this.matchTNodeWithReadOption(i,o,_r(o,i,m,!1,!1))}else u===cm?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,_r(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===zh||h===V_||h===cm&&4&o.type)this.addMatch(o.index,-2);else{const m=_r(o,i,h,!1,!1);null!==m&&this.addMatch(o.index,m)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function uC(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function cC(n,i,o,u){return-1===o?function lC(n,i){return 11&n.type?td(n,i):4&n.type?L_(n,i):null}(i,n):-2===o?function dC(n,i,o){return o===zh?td(i,n):o===cm?L_(i,n):o===V_?UE(i,n):void 0}(n,i,u):Zn(n,n[1],o,i)}function jE(n,i,o,u){const h=i[19].queries[u];if(null===h.matches){const m=n.data,w=o.matches,M=[];for(let N=0;N<w.length;N+=2){const ee=w[N];M.push(ee<0?null:cC(i,m[ee],w[N+1],o.metadata.read))}h.matches=M}return h.matches}function M0(n,i,o,u){const h=n.queries.getByIndex(o),m=h.matches;if(null!==m){const w=jE(n,i,h,o);for(let M=0;M<m.length;M+=2){const N=m[M];if(N>0)u.push(w[M/2]);else{const ee=m[M+1],oe=i[-N];for(let Te=10;Te<oe.length;Te++){const Ye=oe[Te];Ye[17]===Ye[3]&&M0(Ye[1],Ye,ee,u)}if(null!==oe[9]){const Te=oe[9];for(let Ye=0;Ye<Te.length;Ye++){const wt=Te[Ye];M0(wt[1],wt,ee,u)}}}}}return u}function HE(n){const i=Ne(),o=qt(),u=Gs();Io(u+1);const h=qE(o,u);if(n.dirty&&Mr(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const m=h.crossesNgTemplate?M0(o,i,u,[]):jE(o,i,h,u);n.reset(m,N_),n.notifyOnChanges()}return!0}return!1}function $E(n,i,o){const u=qt();u.firstCreatePass&&(KE(u,new BE(n,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),WE(u,Ne(),i)}function GE(n,i,o,u){const h=qt();if(h.firstCreatePass){const m=z();KE(h,new BE(i,o,u),m.index),function fC(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}WE(h,Ne(),o)}function zE(){return function hC(n,i){return n[19].queries[i].queryList}(Ne(),Gs())}function WE(n,i,o){const u=new T0(4==(4&o));Pp(n,i,u,u.destroy),null===i[19]&&(i[19]=new S0),i[19].queries.push(new D0(u))}function KE(n,i,o){null===n.queries&&(n.queries=new A0),n.queries.track(new R0(i,o))}function qE(n,i){return n.queries.getByIndex(i)}function ZE(n,i){return L_(n,i)}function j_(...n){}const hw=new ps("Application Initializer");let F0=(()=>{class n{constructor(o){this.appInits=o,this.resolve=j_,this.reject=j_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Th(m))o.push(m);else if(Dg(m)){const w=new Promise((M,N)=>{m.subscribe({complete:M,error:N})});o.push(w)}}Promise.all(o).then(()=>{u()}).catch(h=>{this.reject(h)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(zs(hw,8))},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fw=new ps("AppId",{providedIn:"root",factory:function pw(){return`${L0()}${L0()}${L0()}`}});function L0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gw=new ps("Platform Initializer"),MC=new ps("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mw=new ps("appBootstrapListener");let xC=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const V0=new ps("LocaleId",{providedIn:"root",factory:()=>wu(V0,En.Optional|En.SkipSelf)||function PC(){return"undefined"!=typeof $localize&&$localize.locale||Oh}()}),NC=new ps("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class OC{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let kC=(()=>{class n{compileModuleSync(o){return new ap(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),m=Al(yn(o).declarations).reduce((w,M)=>{const N=Se(M);return N&&w.push(new ce(N)),w},[]);return new OC(u,m)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LC=(()=>Promise.resolve(0))();function U0(n){"undefined"==typeof Zone?LC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class tc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mc(!1),this.onMicrotaskEmpty=new Mc(!1),this.onStable=new Mc(!1),this.onError=new Mc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&o,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function VC(){let n=Wn.requestAnimationFrame,i=Wn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function jC(n){const i=()=>{!function BC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,B0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,h,m,w,M)=>{try{return yw(n),o.invokeTask(h,m,w,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&i(),_w(n)}},onInvoke:(o,u,h,m,w,M,N)=>{try{return yw(n),o.invoke(h,m,w,M,N)}finally{n.shouldCoalesceRunChangeDetection&&i(),_w(n)}},onHasTask:(o,u,h,m)=>{o.hasTask(h,m),u===h&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,j0(n),B0(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(o,u,h,m)=>(o.handleError(h,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(tc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,h){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+h,i,UC,j_,j_);try{return m.runTask(w,o,u)}finally{m.cancelTask(w)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const UC={};function B0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function yw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _w(n){n._nesting--,B0(n)}class HC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mc,this.onMicrotaskEmpty=new Mc,this.onStable=new Mc,this.onError=new Mc}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,h){return i.apply(o,u)}}let vw=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tc.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,h){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:m,updateCb:h})}whenStable(o,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(zs(tc))},n.\u0275prov=De({token:n,factory:n.\u0275fac}),n})(),$C=(()=>{class n{constructor(){this._applications=new Map,H0.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return H0.findTestabilityInTree(this,o,u)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class GC{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function zC(n){H0=n}let H0=new GC,Wh=null;const Ew=new ps("AllowMultipleToken"),ww=new ps("PlatformOnDestroy");class qC{constructor(i,o){this.name=i,this.token=o}}function Cw(n,i,o=[]){const u=`Platform: ${i}`,h=new ps(u);return(m=[])=>{let w=$0();if(!w||w.injector.get(Ew,!1)){const M=[...o,...m,{provide:h,useValue:!0}];n?n(M):function ZC(n){if(Wh&&!Wh.get(Ew,!1))throw new Ft(400,"");Wh=n;const i=n.get(Iw),o=n.get(gw,null);o&&o.forEach(u=>u())}(function QC(n=[],i){return Ju.create({name:i,providers:[{provide:ah,useValue:"platform"},{provide:ww,useValue:()=>Wh=null},...n]})}(M,u))}return function YC(n){const i=$0();if(!i)throw new Ft(401,"");return i}()}}function $0(){var n;return null!==(n=null==Wh?void 0:Wh.get(Iw))&&void 0!==n?n:null}let Iw=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const M=function JC(n,i){let o;return o="noop"===n?new HC:("zone.js"===n?void 0:n)||new tc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),N=[{provide:tc,useValue:M}];return M.run(()=>{const ee=Ju.create({providers:N,parent:this.injector,name:o.moduleType.name}),oe=o.create(ee),Te=oe.injector.get(pc,null);if(!Te)throw new Ft(402,"");return M.runOutsideAngular(()=>{const Ye=M.onError.subscribe({next:wt=>{Te.handleError(wt)}});oe.onDestroy(()=>{z0(this._modules,oe),Ye.unsubscribe()})}),function XC(n,i,o){try{const u=o();return Th(u)?u.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(Te,M,()=>{const Ye=oe.injector.get(F0);return Ye.runInitializers(),Ye.donePromise.then(()=>(function Wv(n){tr(n,"Expected localeId to be defined"),"string"==typeof n&&(Lh=n.toLowerCase().replace(/_/g,"-"))}(oe.injector.get(V0,Oh)||Oh),this._moduleDoBootstrap(oe),oe))})})}bootstrapModule(o,u=[]){const h=Tw({},u);return function WC(n,i,o){const u=new ap(o);return Promise.resolve(u)}(0,0,o).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(o){const u=o.injector.get(G0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new Ft(403,"");o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ft(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(ww,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(zs(Ju))},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Tw(n,i){return Array.isArray(i)?i.reduce(Tw,n):Object.assign(Object.assign({},n),i)}let G0=(()=>{class n{constructor(o,u,h,m){this._zone=o,this._injector=u,this._exceptionHandler=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new X.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),M=new X.y(N=>{let ee;this._zone.runOutsideAngular(()=>{ee=this._zone.onStable.subscribe(()=>{tc.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const oe=this._zone.onUnstable.subscribe(()=>{tc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{ee.unsubscribe(),oe.unsubscribe()}});this.isStable=(0,ie.T)(w,M.pipe((0,Ue.B)()))}bootstrap(o,u){if(!this._initStatus.done)throw new Ft(405,"");let h;h=o instanceof $h?o:this._injector.get(Gh).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const m=function KC(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Nn),M=h.create(Ju.NULL,[],u||h.selector,m),N=M.location.nativeElement,ee=M.injector.get(vw,null),oe=ee&&M.injector.get($C);return ee&&oe&&oe.registerApplication(N,ee),M.onDestroy(()=>{this.detachView(M.hostView),z0(this.components,M),oe&&oe.unregisterApplication(N)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Ft(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;z0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(mw,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(zs(tc),zs(Ju),zs(pc),zs(F0))},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z0(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let Dw=!0,Sw=!1;function tI(){return Sw=!0,Dw}function nI(){if(Sw)throw new Error("Cannot enable prod mode after platform setup.");Dw=!1}let rI=(()=>{class n{}return n.__NG_ELEMENT_ID__=iI,n})();function iI(n){return function sI(n,i,o){if(bn(n)&&!o){const u=yr(n.index,i);return new a(u,u)}return 47&n.type?new a(i[16],i):null}(z(),Ne(),16==(16&n))}class xw{constructor(){}supports(i){return Xu(i)}create(i){return new dI(i)}}const cI=(n,i)=>i;class dI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||cI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,h=0,m=null;for(;o||u;){const w=!u||o&&o.currentIndex<Nw(u,h,m)?o:u,M=Nw(w,h,m),N=w.currentIndex;if(w===u)h--,u=u._nextRemoved;else if(o=o._next,null==w.previousIndex)h++;else{m||(m=[]);const ee=M-h,oe=N-h;if(ee!=oe){for(let Ye=0;Ye<ee;Ye++){const wt=Ye<m.length?m[Ye]:m[Ye]=0,Kt=wt+Ye;oe<=Kt&&Kt<ee&&(m[Ye]=wt+1)}m[w.previousIndex]=oe-ee}}M!==N&&i(w,M,N)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Xu(i))throw new Ft(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,m,w,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let M=0;M<this.length;M++)m=i[M],w=this._trackByFn(M,m),null!==o&&Object.is(o.trackById,w)?(u&&(o=this._verifyReinsertion(o,m,w,M)),Object.is(o.item,m)||this._addIdentityChange(o,m)):(o=this._mismatch(o,m,w,M),u=!0),o=o._next}else h=0,function Ed(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[vc()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,M=>{w=this._trackByFn(h,M),null!==o&&Object.is(o.trackById,w)?(u&&(o=this._verifyReinsertion(o,M,w,h)),Object.is(o.item,M)||this._addIdentityChange(o,M)):(o=this._mismatch(o,M,w,h),u=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,h){let m;return null===i?m=this._itTail:(m=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,m,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,m,h)):i=this._addAfter(new hI(o,u),m,h),i}_verifyReinsertion(i,o,u,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?i=this._reinsertAfter(m,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,m=i._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Pw),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class hI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Pw{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new fI,this.map.set(o,u)),u.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nw(n,i,o){const u=n.previousIndex;if(null===u)return u;let h=0;return o&&u<o.length&&(h=o[u]),u+i+h}class Ow{constructor(){}supports(i){return i instanceof Map||Ec(i)}create(){return new pI}}class pI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Ec(i)))throw new Ft(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const m=this._getOrCreateRecordForKey(h,u);o=this._insertBeforeOrAppend(o,m)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const m=h._prev,w=h._next;return m&&(m._next=w),w&&(w._prev=m),h._next=null,h._prev=null,h}const u=new gI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class gI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kw(){return new Y0([new xw])}let Y0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const h=u.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||kw()),deps:[[n,new su,new Yu]]}}find(o){const u=this.factories.find(h=>h.supports(o));if(null!=u)return u;throw new Ft(901,"")}}return n.\u0275prov=De({token:n,providedIn:"root",factory:kw}),n})();function Fw(){return new Q0([new Ow])}let Q0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const h=u.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||Fw()),deps:[[n,new su,new Yu]]}}find(o){const u=this.factories.find(m=>m.supports(o));if(u)return u;throw new Ft(901,"")}}return n.\u0275prov=De({token:n,providedIn:"root",factory:Fw}),n})();const _I=Cw(null,"core",[]);let vI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(zs(G0))},n.\u0275mod=he({type:n}),n.\u0275inj=xe({}),n})()},2382:(pn,dt,$)=>{$.d(dt,{Fj:()=>Ee,qu:()=>vs,u:()=>Fs,cw:()=>Ar,sg:()=>ki,u5:()=>ur,JJ:()=>He,JL:()=>Ge,UX:()=>_s,kI:()=>Vt,_Y:()=>Ds});var y=$(5e3),B=$(9808),X=$(8996),ie=$(8306),Ue=$(4742),Ke=$(8421),Xe=$(7669),ze=$(5403),lt=$(3268),be=$(1810),nt=$(4004);let Lt=(()=>{class K{constructor(O,ue){this._renderer=O,this._elementRef=ue,this.onChange=Ne=>{},this.onTouched=()=>{}}setProperty(O,ue){this._renderer.setProperty(this._elementRef.nativeElement,O,ue)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(y.Qsj),y.Y36(y.SBq))},K.\u0275dir=y.lG2({type:K}),K})(),Mt=(()=>{class K extends Lt{}return K.\u0275fac=function(){let V;return function(ue){return(V||(V=y.n5z(K)))(ue||K)}}(),K.\u0275dir=y.lG2({type:K,features:[y.qOj]}),K})();const Ft=new y.OlP("NgValueAccessor"),Nt={provide:Ft,useExisting:(0,y.Gpc)(()=>Ee),multi:!0},Xt=new y.OlP("CompositionEventMode");let Ee=(()=>{class K extends Lt{constructor(O,ue,Ne){super(O,ue),this._compositionMode=Ne,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dn(){const K=(0,B.q)()?(0,B.q)().getUserAgent():"";return/android (\d+)/.test(K.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Xt,8))},K.\u0275dir=y.lG2({type:K,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,ue){1&O&&y.NdJ("input",function(qt){return ue._handleInput(qt.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(qt){return ue._compositionEnd(qt.target.value)})},features:[y._Bn([Nt]),y.qOj]}),K})();function Me(K){return null==K||0===K.length}function ot(K){return null!=K&&"number"==typeof K.length}const _t=new y.OlP("NgValidators"),ft=new y.OlP("NgAsyncValidators"),tt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vt{static min(V){return function It(K){return V=>{if(Me(V.value)||Me(K))return null;const O=parseFloat(V.value);return!isNaN(O)&&O<K?{min:{min:K,actual:V.value}}:null}}(V)}static max(V){return function On(K){return V=>{if(Me(V.value)||Me(K))return null;const O=parseFloat(V.value);return!isNaN(O)&&O>K?{max:{max:K,actual:V.value}}:null}}(V)}static required(V){return function Ht(K){return Me(K.value)?{required:!0}:null}(V)}static requiredTrue(V){return function xn(K){return!0===K.value?null:{required:!0}}(V)}static email(V){return function on(K){return Me(K.value)||tt.test(K.value)?null:{email:!0}}(V)}static minLength(V){return function qr(K){return V=>Me(V.value)||!ot(V.value)?null:V.value.length<K?{minlength:{requiredLength:K,actualLength:V.value.length}}:null}(V)}static maxLength(V){return function kn(K){return V=>ot(V.value)&&V.value.length>K?{maxlength:{requiredLength:K,actualLength:V.value.length}}:null}(V)}static pattern(V){return function gr(K){if(!K)return tr;let V,O;return"string"==typeof K?(O="","^"!==K.charAt(0)&&(O+="^"),O+=K,"$"!==K.charAt(K.length-1)&&(O+="$"),V=new RegExp(O)):(O=K.toString(),V=K),ue=>{if(Me(ue.value))return null;const Ne=ue.value;return V.test(Ne)?null:{pattern:{requiredPattern:O,actualValue:Ne}}}}(V)}static nullValidator(V){return null}static compose(V){return xe(V)}static composeAsync(V){return tn(V)}}function tr(K){return null}function un(K){return null!=K}function it(K){const V=(0,y.QGY)(K)?(0,X.D)(K):K;return(0,y.CqO)(V),V}function Je(K){let V={};return K.forEach(O=>{V=null!=O?Object.assign(Object.assign({},V),O):V}),0===Object.keys(V).length?null:V}function _e(K,V){return V.map(O=>O(K))}function ve(K){return K.map(V=>function De(K){return!K.validate}(V)?V:O=>V.validate(O))}function xe(K){if(!K)return null;const V=K.filter(un);return 0==V.length?null:function(O){return Je(_e(O,V))}}function pt(K){return null!=K?xe(ve(K)):null}function tn(K){if(!K)return null;const V=K.filter(un);return 0==V.length?null:function(O){return function Ce(...K){const V=(0,Xe.jO)(K),{args:O,keys:ue}=(0,Ue.D)(K),Ne=new ie.y(qt=>{const{length:gi}=O;if(!gi)return void qt.complete();const z=new Array(gi);let W=gi,fe=gi;for(let Ie=0;Ie<gi;Ie++){let Fe=!1;(0,Ke.Xf)(O[Ie]).subscribe((0,ze.x)(qt,Ct=>{Fe||(Fe=!0,fe--),z[Ie]=Ct},()=>W--,void 0,()=>{(!W||!Fe)&&(fe||qt.next(ue?(0,be.n)(ue,z):z),qt.complete())}))}});return V?Ne.pipe((0,lt.Z)(V)):Ne}(_e(O,V).map(it)).pipe((0,nt.U)(Je))}}function hn(K){return null!=K?tn(ve(K)):null}function Dn(K,V){return null===K?[V]:Array.isArray(K)?[...K,V]:[K,V]}function zn(K){return K._rawValidators}function mr(K){return K._rawAsyncValidators}function ir(K){return K?Array.isArray(K)?K:[K]:[]}function Ln(K,V){return Array.isArray(K)?K.includes(V):K===V}function Lr(K,V){const O=ir(V);return ir(K).forEach(Ne=>{Ln(O,Ne)||O.push(Ne)}),O}function En(K,V){return ir(V).filter(O=>!Ln(K,O))}class nr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=pt(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=hn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,O){return!!this.control&&this.control.hasError(V,O)}getError(V,O){return this.control?this.control.getError(V,O):null}}class Pn extends nr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Mn extends nr{get formDirective(){return null}get path(){return null}}class Zr{constructor(V){this._cd=V}is(V){var O,ue,Ne;return"submitted"===V?!!(null===(O=this._cd)||void 0===O?void 0:O.submitted):!!(null===(Ne=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===Ne?void 0:Ne[V])}}let He=(()=>{class K extends Zr{constructor(O){super(O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(Pn,2))},K.\u0275dir=y.lG2({type:K,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,ue){2&O&&y.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[y.qOj]}),K})(),Ge=(()=>{class K extends Zr{constructor(O){super(O)}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(Mn,10))},K.\u0275dir=y.lG2({type:K,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,ue){2&O&&y.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[y.qOj]}),K})();function fi(K,V){Pe(K,V),V.valueAccessor.writeValue(K.value),function he(K,V){V.valueAccessor.registerOnChange(O=>{K._pendingValue=O,K._pendingChange=!0,K._pendingDirty=!0,"change"===K.updateOn&&G(K,V)})}(K,V),function ne(K,V){const O=(ue,Ne)=>{V.valueAccessor.writeValue(ue),Ne&&V.viewToModelUpdate(ue)};K.registerOnChange(O),V._registerOnDestroy(()=>{K._unregisterOnChange(O)})}(K,V),function ge(K,V){V.valueAccessor.registerOnTouched(()=>{K._pendingTouched=!0,"blur"===K.updateOn&&K._pendingChange&&G(K,V),"submit"!==K.updateOn&&K.markAsTouched()})}(K,V),function Gr(K,V){if(V.valueAccessor.setDisabledState){const O=ue=>{V.valueAccessor.setDisabledState(ue)};K.registerOnDisabledChange(O),V._registerOnDestroy(()=>{K._unregisterOnDisabledChange(O)})}}(K,V)}function ji(K,V,O=!0){const ue=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(ue),V.valueAccessor.registerOnTouched(ue)),Ae(K,V),K&&(V._invokeOnDestroyCallbacks(),K._registerOnCollectionChange(()=>{}))}function Vi(K,V){K.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(V)})}function Pe(K,V){const O=zn(K);null!==V.validator?K.setValidators(Dn(O,V.validator)):"function"==typeof O&&K.setValidators([O]);const ue=mr(K);null!==V.asyncValidator?K.setAsyncValidators(Dn(ue,V.asyncValidator)):"function"==typeof ue&&K.setAsyncValidators([ue]);const Ne=()=>K.updateValueAndValidity();Vi(V._rawValidators,Ne),Vi(V._rawAsyncValidators,Ne)}function Ae(K,V){let O=!1;if(null!==K){if(null!==V.validator){const Ne=zn(K);if(Array.isArray(Ne)&&Ne.length>0){const qt=Ne.filter(gi=>gi!==V.validator);qt.length!==Ne.length&&(O=!0,K.setValidators(qt))}}if(null!==V.asyncValidator){const Ne=mr(K);if(Array.isArray(Ne)&&Ne.length>0){const qt=Ne.filter(gi=>gi!==V.asyncValidator);qt.length!==Ne.length&&(O=!0,K.setAsyncValidators(qt))}}}const ue=()=>{};return Vi(V._rawValidators,ue),Vi(V._rawAsyncValidators,ue),O}function G(K,V){K._pendingDirty&&K.markAsDirty(),K.setValue(K._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(K._pendingValue),K._pendingChange=!1}function Et(K,V){const O=K.indexOf(V);O>-1&&K.splice(O,1)}const Dt="VALID",sn="INVALID",Tn="PENDING",or="DISABLED";function wr(K){return(bs(K)?K.validators:K)||null}function Ii(K){return Array.isArray(K)?pt(K):K||null}function oi(K,V){return(bs(V)?V.asyncValidators:K)||null}function Ti(K){return Array.isArray(K)?hn(K):K||null}function bs(K){return null!=K&&!Array.isArray(K)&&"object"==typeof K}const rr=K=>K instanceof Oi,Ui=K=>K instanceof Ar,gs=K=>K instanceof ai;function ks(K){return rr(K)?K.value:K.getRawValue()}function Dr(K,V){const O=Ui(K),ue=K.controls;if(!(O?Object.keys(ue):ue).length)throw new y.vHH(1e3,"");if(!ue[V])throw new y.vHH(1001,"")}function wn(K,V){Ui(K),K._forEachChild((ue,Ne)=>{if(void 0===V[Ne])throw new y.vHH(1002,"")})}class ar{constructor(V,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=O,this._composedValidatorFn=Ii(this._rawValidators),this._composedAsyncValidatorFn=Ti(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===Dt}get invalid(){return this.status===sn}get pending(){return this.status==Tn}get disabled(){return this.status===or}get enabled(){return this.status!==or}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=Ii(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=Ti(V)}addValidators(V){this.setValidators(Lr(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Lr(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(En(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(En(V,this._rawAsyncValidators))}hasValidator(V){return Ln(this._rawValidators,V)}hasAsyncValidator(V){return Ln(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=Tn,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const O=this._parentMarkedDirty(V.onlySelf);this.status=or,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:O})),this._onDisabledChange.forEach(ue=>ue(!0))}enable(V={}){const O=this._parentMarkedDirty(V.onlySelf);this.status=Dt,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:O})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dt||this.status===Tn)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?or:Dt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=Tn,this._hasOwnPendingAsyncValidator=!0;const O=it(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,O={}){this.errors=V,this._updateControlsErrors(!1!==O.emitEvent)}get(V){return function zr(K,V,O){if(null==V||(Array.isArray(V)||(V=V.split(O)),Array.isArray(V)&&0===V.length))return null;let ue=K;return V.forEach(Ne=>{ue=Ui(ue)?ue.controls.hasOwnProperty(Ne)?ue.controls[Ne]:null:gs(ue)&&ue.at(Ne)||null}),ue}(this,V,".")}getError(V,O){const ue=O?this.get(O):this;return ue&&ue.errors?ue.errors[V]:null}hasError(V,O){return!!this.getError(V,O)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?or:this.errors?sn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tn)?Tn:this._anyControlsHaveStatus(sn)?sn:Dt}_anyControlsHaveStatus(V){return this._anyControls(O=>O.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_isBoxedValue(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){bs(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Oi extends ar{constructor(V=null,O,ue){super(wr(O),oi(ue,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bs(O)&&O.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(V)?V.value:V)}setValue(V,O={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(V,O={}){this.setValue(V,O)}reset(V=this.defaultValue,O={}){this._applyFormState(V),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){Et(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){Et(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){this._isBoxedValue(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}}class Ar extends ar{constructor(V,O,ue){super(wr(O),oi(ue,O)),this.controls=V,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,O){return this.controls[V]?this.controls[V]:(this.controls[V]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(V,O,ue={}){this.registerControl(V,O),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(V,O={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(V,O,ue={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],O&&this.registerControl(V,O),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,O={}){wn(this,V),Object.keys(V).forEach(ue=>{Dr(this,ue),this.controls[ue].setValue(V[ue],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(V,O={}){null!=V&&(Object.keys(V).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue(V[ue],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(V={},O={}){this._forEachChild((ue,Ne)=>{ue.reset(V[Ne],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(V,O,ue)=>(V[ue]=ks(O),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(O,ue)=>!!ue._syncPendingControls()||O);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){Object.keys(this.controls).forEach(O=>{const ue=this.controls[O];ue&&V(ue,O)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const O of Object.keys(this.controls)){const ue=this.controls[O];if(this.contains(O)&&V(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},(V,O,ue)=>((O.enabled||this.disabled)&&(V[ue]=O.value),V))}_reduceChildren(V,O){let ue=V;return this._forEachChild((Ne,qt)=>{ue=O(ue,Ne,qt)}),ue}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ai extends ar{constructor(V,O,ue){super(wr(O),oi(ue,O)),this.controls=V,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[V]}push(V,O={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(V,O,ue={}){this.controls.splice(V,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(V,O={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(V,O,ue={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),O&&(this.controls.splice(V,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,O={}){wn(this,V),V.forEach((ue,Ne)=>{Dr(this,Ne),this.at(Ne).setValue(ue,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(V,O={}){null!=V&&(V.forEach((ue,Ne)=>{this.at(Ne)&&this.at(Ne).patchValue(ue,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(V=[],O={}){this._forEachChild((ue,Ne)=>{ue.reset(V[Ne],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(V=>ks(V))}clear(V={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_syncPendingControls(){let V=this.controls.reduce((O,ue)=>!!ue._syncPendingControls()||O,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){this.controls.forEach((O,ue)=>{V(O,ue)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(O=>O.enabled&&V(O))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}}let Ds=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275dir=y.lG2({type:K,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),K})(),Bs=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({}),K})();const kr=new y.OlP("NgModelWithFormControlWarning"),ao={provide:Mn,useExisting:(0,y.Gpc)(()=>ki)};let ki=(()=>{class K extends Mn{constructor(O,ue){super(),this.validators=O,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(O),this._setAsyncValidators(ue)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ae(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ue=this.form.get(O.path);return fi(ue,O),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ue}getControl(O){return this.form.get(O.path)}removeControl(O){ji(O.control||null,O,!1),Et(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ue){this.form.get(O.path).setValue(ue)}onSubmit(O){return this.submitted=!0,function Ur(K,V){K._syncPendingControls(),V.forEach(O=>{const ue=O.control;"submit"===ue.updateOn&&ue._pendingChange&&(O.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ue=O.control,Ne=this.form.get(O.path);ue!==Ne&&(ji(ue||null,O),rr(Ne)&&(fi(Ne,O),O.control=Ne))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ue=this.form.get(O.path);(function se(K,V){Pe(K,V)})(ue,O),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ue=this.form.get(O.path);ue&&function Se(K,V){return Ae(K,V)}(ue,O)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Pe(this.form,this),this._oldForm&&Ae(this._oldForm,this)}_checkFormPresent(){}}return K.\u0275fac=function(O){return new(O||K)(y.Y36(_t,10),y.Y36(ft,10))},K.\u0275dir=y.lG2({type:K,selectors:[["","formGroup",""]],hostBindings:function(O,ue){1&O&&y.NdJ("submit",function(qt){return ue.onSubmit(qt)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([ao]),y.qOj,y.TTD]}),K})();const js={provide:Pn,useExisting:(0,y.Gpc)(()=>Fs)};let Fs=(()=>{class K extends Pn{constructor(O,ue,Ne,qt,gi){super(),this._ngModelWarningConfig=gi,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ue),this._setAsyncValidators(Ne),this.valueAccessor=function pi(K,V){if(!V)return null;let O,ue,Ne;return Array.isArray(V),V.forEach(qt=>{qt.constructor===Ee?O=qt:function er(K){return Object.getPrototypeOf(K.constructor)===Mt}(qt)?ue=qt:Ne=qt}),Ne||ue||O||null}(0,qt)}set isDisabled(O){}ngOnChanges(O){this._added||this._setUpControl(),function $n(K,V){if(!K.hasOwnProperty("model"))return!1;const O=K.model;return!!O.isFirstChange()||!Object.is(V,O.currentValue)}(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return function Yr(K,V){return[...V.path,K]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return K._ngModelWarningSentOnce=!1,K.\u0275fac=function(O){return new(O||K)(y.Y36(Mn,13),y.Y36(_t,10),y.Y36(ft,10),y.Y36(Ft,10),y.Y36(kr,8))},K.\u0275dir=y.lG2({type:K,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([js]),y.qOj,y.TTD]}),K})(),Fi=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[[Bs]]}),K})(),ur=(()=>{class K{}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[Fi]}),K})(),_s=(()=>{class K{static withConfig(O){return{ngModule:K,providers:[{provide:kr,useValue:O.warnOnNgModelWithFormControl}]}}}return K.\u0275fac=function(O){return new(O||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[Fi]}),K})(),vs=(()=>{class K{group(O,ue=null){const Ne=this._reduceControls(O);let z,qt=null,gi=null;return null!=ue&&(function rs(K){return void 0!==K.asyncValidators||void 0!==K.validators||void 0!==K.updateOn}(ue)?(qt=null!=ue.validators?ue.validators:null,gi=null!=ue.asyncValidators?ue.asyncValidators:null,z=null!=ue.updateOn?ue.updateOn:void 0):(qt=null!=ue.validator?ue.validator:null,gi=null!=ue.asyncValidator?ue.asyncValidator:null)),new Ar(Ne,{asyncValidators:gi,updateOn:z,validators:qt})}control(O,ue,Ne){return new Oi(O,ue,Ne)}array(O,ue,Ne){const qt=O.map(gi=>this._createControl(gi));return new ai(qt,ue,Ne)}_reduceControls(O){const ue={};return Object.keys(O).forEach(Ne=>{ue[Ne]=this._createControl(O[Ne])}),ue}_createControl(O){return rr(O)||Ui(O)||gs(O)?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return K.\u0275fac=function(O){return new(O||K)},K.\u0275prov=y.Yz7({token:K,factory:K.\u0275fac,providedIn:_s}),K})()},2313:(pn,dt,$)=>{$.d(dt,{Dx:()=>Mn,H7:()=>Pe,b2:()=>Ln,q6:()=>mr,se:()=>xn});var y=$(9808),B=$(5e3);class X extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ie extends X{static makeCurrent(){(0,y.HT)(new ie)}onAndCancel(ne,se,Se){return ne.addEventListener(se,Se,!1),()=>{ne.removeEventListener(se,Se,!1)}}dispatchEvent(ne,se){ne.dispatchEvent(se)}remove(ne){ne.parentNode&&ne.parentNode.removeChild(ne)}createElement(ne,se){return(se=se||this.getDefaultDocument()).createElement(ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ne){return ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(ne){return ne instanceof DocumentFragment}getGlobalEventTarget(ne,se){return"window"===se?window:"document"===se?ne:"body"===se?ne.body:null}getBaseHref(ne){const se=function Ke(){return Ue=Ue||document.querySelector("base"),Ue?Ue.getAttribute("href"):null}();return null==se?null:function ze(G){Xe=Xe||document.createElement("a"),Xe.setAttribute("href",G);const ne=Xe.pathname;return"/"===ne.charAt(0)?ne:`/${ne}`}(se)}resetBaseElement(){Ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(ne){return(0,y.Mx)(document.cookie,ne)}}let Xe,Ue=null;const lt=new B.OlP("TRANSITION_ID"),Ce=[{provide:B.ip1,useFactory:function be(G,ne,se){return()=>{se.get(B.CZH).donePromise.then(()=>{const Se=(0,y.q)(),ht=ne.querySelectorAll(`style[ng-transition="${G}"]`);for(let Wt=0;Wt<ht.length;Wt++)Se.remove(ht[Wt])})}},deps:[lt,y.K0,B.zs3],multi:!0}];class nt{static init(){(0,B.VLi)(new nt)}addToWindow(ne){B.dqk.getAngularTestability=(Se,ht=!0)=>{const Wt=ne.findTestabilityInTree(Se,ht);if(null==Wt)throw new Error("Could not find testability for element.");return Wt},B.dqk.getAllAngularTestabilities=()=>ne.getAllTestabilities(),B.dqk.getAllAngularRootElements=()=>ne.getAllRootElements(),B.dqk.frameworkStabilizers||(B.dqk.frameworkStabilizers=[]),B.dqk.frameworkStabilizers.push(Se=>{const ht=B.dqk.getAllAngularTestabilities();let Wt=ht.length,yn=!1;const rn=function($n){yn=yn||$n,Wt--,0==Wt&&Se(yn)};ht.forEach(function($n){$n.whenStable(rn)})})}findTestabilityInTree(ne,se,Se){if(null==se)return null;const ht=ne.getTestability(se);return null!=ht?ht:Se?(0,y.q)().isShadowRoot(se)?this.findTestabilityInTree(ne,se.host,!0):this.findTestabilityInTree(ne,se.parentElement,!0):null}}let Lt=(()=>{class G{build(){return new XMLHttpRequest}}return G.\u0275fac=function(se){return new(se||G)},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();const Mt=new B.OlP("EventManagerPlugins");let Ft=(()=>{class G{constructor(se,Se){this._zone=Se,this._eventNameToPlugin=new Map,se.forEach(ht=>ht.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,Se,ht){return this._findPluginFor(Se).addEventListener(se,Se,ht)}addGlobalEventListener(se,Se,ht){return this._findPluginFor(Se).addGlobalEventListener(se,Se,ht)}getZone(){return this._zone}_findPluginFor(se){const Se=this._eventNameToPlugin.get(se);if(Se)return Se;const ht=this._plugins;for(let Wt=0;Wt<ht.length;Wt++){const yn=ht[Wt];if(yn.supports(se))return this._eventNameToPlugin.set(se,yn),yn}throw new Error(`No event manager plugin found for event ${se}`)}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(Mt),B.LFG(B.R0b))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();class At{constructor(ne){this._doc=ne}addGlobalEventListener(ne,se,Se){const ht=(0,y.q)().getGlobalEventTarget(this._doc,ne);if(!ht)throw new Error(`Unsupported event target ${ht} for event ${se}`);return this.addEventListener(ht,se,Se)}}let Qe=(()=>{class G{constructor(){this._stylesSet=new Set}addStyles(se){const Se=new Set;se.forEach(ht=>{this._stylesSet.has(ht)||(this._stylesSet.add(ht),Se.add(ht))}),this.onStylesAdded(Se)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return G.\u0275fac=function(se){return new(se||G)},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})(),Nt=(()=>{class G extends Qe{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,Se,ht){se.forEach(Wt=>{const yn=this._doc.createElement("style");yn.textContent=Wt,ht.push(Se.appendChild(yn))})}addHost(se){const Se=[];this._addStylesToHost(this._stylesSet,se,Se),this._hostNodes.set(se,Se)}removeHost(se){const Se=this._hostNodes.get(se);Se&&Se.forEach(dn),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((Se,ht)=>{this._addStylesToHost(se,ht,Se)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(dn))}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();function dn(G){(0,y.q)().remove(G)}const Xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ee=/%COMP%/g;function It(G,ne,se){for(let Se=0;Se<ne.length;Se++){let ht=ne[Se];Array.isArray(ht)?It(G,ht,se):(ht=ht.replace(Ee,G),se.push(ht))}return se}function On(G){return ne=>{if("__ngUnwrap__"===ne)return G;!1===G(ne)&&(ne.preventDefault(),ne.returnValue=!1)}}let xn=(()=>{class G{constructor(se,Se,ht){this.eventManager=se,this.sharedStylesHost=Se,this.appId=ht,this.rendererByCompId=new Map,this.defaultRenderer=new on(se)}createRenderer(se,Se){if(!se||!Se)return this.defaultRenderer;switch(Se.encapsulation){case B.ifc.Emulated:{let ht=this.rendererByCompId.get(Se.id);return ht||(ht=new gr(this.eventManager,this.sharedStylesHost,Se,this.appId),this.rendererByCompId.set(Se.id,ht)),ht.applyToHost(se),ht}case 1:case B.ifc.ShadowDom:return new tr(this.eventManager,this.sharedStylesHost,se,Se);default:if(!this.rendererByCompId.has(Se.id)){const ht=It(Se.id,Se.styles,[]);this.sharedStylesHost.addStyles(ht),this.rendererByCompId.set(Se.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(Ft),B.LFG(Nt),B.LFG(B.AFp))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();class on{constructor(ne){this.eventManager=ne,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ne,se){return se?document.createElementNS(Xt[se]||se,ne):document.createElement(ne)}createComment(ne){return document.createComment(ne)}createText(ne){return document.createTextNode(ne)}appendChild(ne,se){ne.appendChild(se)}insertBefore(ne,se,Se){ne&&ne.insertBefore(se,Se)}removeChild(ne,se){ne&&ne.removeChild(se)}selectRootElement(ne,se){let Se="string"==typeof ne?document.querySelector(ne):ne;if(!Se)throw new Error(`The selector "${ne}" did not match any elements`);return se||(Se.textContent=""),Se}parentNode(ne){return ne.parentNode}nextSibling(ne){return ne.nextSibling}setAttribute(ne,se,Se,ht){if(ht){se=ht+":"+se;const Wt=Xt[ht];Wt?ne.setAttributeNS(Wt,se,Se):ne.setAttribute(se,Se)}else ne.setAttribute(se,Se)}removeAttribute(ne,se,Se){if(Se){const ht=Xt[Se];ht?ne.removeAttributeNS(ht,se):ne.removeAttribute(`${Se}:${se}`)}else ne.removeAttribute(se)}addClass(ne,se){ne.classList.add(se)}removeClass(ne,se){ne.classList.remove(se)}setStyle(ne,se,Se,ht){ht&(B.JOm.DashCase|B.JOm.Important)?ne.style.setProperty(se,Se,ht&B.JOm.Important?"important":""):ne.style[se]=Se}removeStyle(ne,se,Se){Se&B.JOm.DashCase?ne.style.removeProperty(se):ne.style[se]=""}setProperty(ne,se,Se){ne[se]=Se}setValue(ne,se){ne.nodeValue=se}listen(ne,se,Se){return"string"==typeof ne?this.eventManager.addGlobalEventListener(ne,se,On(Se)):this.eventManager.addEventListener(ne,se,On(Se))}}class gr extends on{constructor(ne,se,Se,ht){super(ne),this.component=Se;const Wt=It(ht+"-"+Se.id,Se.styles,[]);se.addStyles(Wt),this.contentAttr=function tt(G){return"_ngcontent-%COMP%".replace(Ee,G)}(ht+"-"+Se.id),this.hostAttr=function Vt(G){return"_nghost-%COMP%".replace(Ee,G)}(ht+"-"+Se.id)}applyToHost(ne){super.setAttribute(ne,this.hostAttr,"")}createElement(ne,se){const Se=super.createElement(ne,se);return super.setAttribute(Se,this.contentAttr,""),Se}}class tr extends on{constructor(ne,se,Se,ht){super(ne),this.sharedStylesHost=se,this.hostEl=Se,this.shadowRoot=Se.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Wt=It(ht.id,ht.styles,[]);for(let yn=0;yn<Wt.length;yn++){const rn=document.createElement("style");rn.textContent=Wt[yn],this.shadowRoot.appendChild(rn)}}nodeOrShadowRoot(ne){return ne===this.hostEl?this.shadowRoot:ne}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ne,se){return super.appendChild(this.nodeOrShadowRoot(ne),se)}insertBefore(ne,se,Se){return super.insertBefore(this.nodeOrShadowRoot(ne),se,Se)}removeChild(ne,se){return super.removeChild(this.nodeOrShadowRoot(ne),se)}parentNode(ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ne)))}}let un=(()=>{class G extends At{constructor(se){super(se)}supports(se){return!0}addEventListener(se,Se,ht){return se.addEventListener(Se,ht,!1),()=>this.removeEventListener(se,Se,ht)}removeEventListener(se,Se,ht){return se.removeEventListener(Se,ht)}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();const it=["alt","control","meta","shift"],_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},De={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ve={alt:G=>G.altKey,control:G=>G.ctrlKey,meta:G=>G.metaKey,shift:G=>G.shiftKey};let xe=(()=>{class G extends At{constructor(se){super(se)}supports(se){return null!=G.parseEventName(se)}addEventListener(se,Se,ht){const Wt=G.parseEventName(Se),yn=G.eventCallback(Wt.fullKey,ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(se,Wt.domEventName,yn))}static parseEventName(se){const Se=se.toLowerCase().split("."),ht=Se.shift();if(0===Se.length||"keydown"!==ht&&"keyup"!==ht)return null;const Wt=G._normalizeKey(Se.pop());let yn="";if(it.forEach($n=>{const er=Se.indexOf($n);er>-1&&(Se.splice(er,1),yn+=$n+".")}),yn+=Wt,0!=Se.length||0===Wt.length)return null;const rn={};return rn.domEventName=ht,rn.fullKey=yn,rn}static getEventFullKey(se){let Se="",ht=function pt(G){let ne=G.key;if(null==ne){if(ne=G.keyIdentifier,null==ne)return"Unidentified";ne.startsWith("U+")&&(ne=String.fromCharCode(parseInt(ne.substring(2),16)),3===G.location&&De.hasOwnProperty(ne)&&(ne=De[ne]))}return _e[ne]||ne}(se);return ht=ht.toLowerCase()," "===ht?ht="space":"."===ht&&(ht="dot"),it.forEach(Wt=>{Wt!=ht&&ve[Wt](se)&&(Se+=Wt+".")}),Se+=ht,Se}static eventCallback(se,Se,ht){return Wt=>{G.getEventFullKey(Wt)===se&&ht.runGuarded(()=>Se(Wt))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:G.\u0275fac}),G})();const mr=(0,B.eFA)(B._c5,"browser",[{provide:B.Lbi,useValue:y.bD},{provide:B.g9A,useValue:function tn(){ie.makeCurrent(),nt.init()},multi:!0},{provide:y.K0,useFactory:function Dn(){return(0,B.RDi)(document),document},deps:[]}]),ir=[{provide:B.zSh,useValue:"root"},{provide:B.qLn,useFactory:function hn(){return new B.qLn},deps:[]},{provide:Mt,useClass:un,multi:!0,deps:[y.K0,B.R0b,B.Lbi]},{provide:Mt,useClass:xe,multi:!0,deps:[y.K0]},{provide:xn,useClass:xn,deps:[Ft,Nt,B.AFp]},{provide:B.FYo,useExisting:xn},{provide:Qe,useExisting:Nt},{provide:Nt,useClass:Nt,deps:[y.K0]},{provide:B.dDg,useClass:B.dDg,deps:[B.R0b]},{provide:Ft,useClass:Ft,deps:[Mt,B.R0b]},{provide:y.JF,useClass:Lt,deps:[]}];let Ln=(()=>{class G{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:G,providers:[{provide:B.AFp,useValue:se.appId},{provide:lt,useExisting:B.AFp},Ce]}}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(G,12))},G.\u0275mod=B.oAB({type:G}),G.\u0275inj=B.cJS({providers:ir,imports:[y.ez,B.hGG]}),G})(),Mn=(()=>{class G{constructor(se){this._doc=se}getTitle(){return this._doc.title}setTitle(se){this._doc.title=se||""}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:function(se){let Se=null;return Se=se?new se:function Pn(){return new Mn((0,B.LFG)(y.K0))}(),Se},providedIn:"root"}),G})();"undefined"!=typeof window&&window;let Pe=(()=>{class G{}return G.\u0275fac=function(se){return new(se||G)},G.\u0275prov=B.Yz7({token:G,factory:function(se){let Se=null;return Se=se?new(se||G):B.LFG(he),Se},providedIn:"root"}),G})(),he=(()=>{class G extends Pe{constructor(se){super(),this._doc=se}sanitize(se,Se){if(null==Se)return null;switch(se){case B.q3G.NONE:return Se;case B.q3G.HTML:return(0,B.qzn)(Se,"HTML")?(0,B.z3N)(Se):(0,B.EiD)(this._doc,String(Se)).toString();case B.q3G.STYLE:return(0,B.qzn)(Se,"Style")?(0,B.z3N)(Se):Se;case B.q3G.SCRIPT:if((0,B.qzn)(Se,"Script"))return(0,B.z3N)(Se);throw new Error("unsafe value used in a script context");case B.q3G.URL:return(0,B.yhl)(Se),(0,B.qzn)(Se,"URL")?(0,B.z3N)(Se):(0,B.mCW)(String(Se));case B.q3G.RESOURCE_URL:if((0,B.qzn)(Se,"ResourceURL"))return(0,B.z3N)(Se);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,B.JVY)(se)}bypassSecurityTrustStyle(se){return(0,B.L6k)(se)}bypassSecurityTrustScript(se){return(0,B.eBb)(se)}bypassSecurityTrustUrl(se){return(0,B.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,B.pB0)(se)}}return G.\u0275fac=function(se){return new(se||G)(B.LFG(y.K0))},G.\u0275prov=B.Yz7({token:G,factory:function(se){let Se=null;return Se=se?new se:function Ae(G){return new he(G.get(y.K0))}(B.LFG(B.zs3)),Se},providedIn:"root"}),G})()},2729:(pn,dt,$)=>{$.d(dt,{gz:()=>rt,F0:()=>cs,rH:()=>ho,yS:()=>Go,Bz:()=>fa,lC:()=>mo});var y=$(5e3),B=$(8996),X=$(9646),ie=$(7579);class Ue extends ie.x{constructor(b){super(),this._value=b}get value(){return this.getValue()}_subscribe(b){const I=super._subscribe(b);return!I.closed&&b.next(this._value),I}getValue(){const{hasError:b,thrownError:I,_value:U}=this;if(b)throw I;return this._throwIfClosed(),U}next(b){super.next(this._value=b)}}var Ke=$(8306),Xe=$(4742),ze=$(4671),lt=$(3268),be=$(7669),Ce=$(1810),nt=$(5403),Lt=$(9672);function At(x,b,I){x?(0,Lt.f)(I,x,b):b()}var Qe=$(2843),Nt=$(6805),dn=$(7272),Xt=$(8421);function Ee(x){return new Ke.y(b=>{(0,Xt.Xf)(x()).subscribe(b)})}var Me=$(515),ot=$(727),_t=$(4482);function ft(){return(0,_t.e)((x,b)=>{let I=null;x._refCount++;const U=(0,nt.x)(b,void 0,void 0,void 0,()=>{if(!x||x._refCount<=0||0<--x._refCount)return void(I=null);const Y=x._connection,le=I;I=null,Y&&(!le||Y===le)&&Y.unsubscribe(),b.unsubscribe()});x.subscribe(U),U.closed||(I=x.connect())})}class tt extends Ke.y{constructor(b,I){super(),this.source=b,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,_t.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,null==b||b.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new ot.w0;const I=this.getSubject();b.add(this.source.subscribe((0,nt.x)(I,void 0,()=>{this._teardown(),I.complete()},U=>{this._teardown(),I.error(U)},()=>this._teardown()))),b.closed&&(this._connection=null,b=ot.w0.EMPTY)}return b}refCount(){return ft()(this)}}var Vt=$(4004),It=$(3900),On=$(5698),Ht=$(8675),xn=$(5026),on=$(9300),qr=$(262),kn=$(4351);function gr(x){return x<=0?()=>Me.E:(0,_t.e)((b,I)=>{let U=[];b.subscribe((0,nt.x)(I,Y=>{U.push(Y),x<U.length&&U.shift()},()=>{for(const Y of U)I.next(Y);I.complete()},void 0,()=>{U=null}))})}var tr=$(8068),un=$(6590),Je=$(590),_e=$(5577),De=$(8505),xe=$(8189),pt=$(9808);class tn{constructor(b,I){this.id=b,this.url=I}}class hn extends tn{constructor(b,I,U="imperative",Y=null){super(b,I),this.navigationTrigger=U,this.restoredState=Y}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dn extends tn{constructor(b,I,U){super(b,I),this.urlAfterRedirects=U}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zn extends tn{constructor(b,I,U){super(b,I),this.reason=U}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mr extends tn{constructor(b,I,U){super(b,I),this.error=U}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ir extends tn{constructor(b,I,U,Y){super(b,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ln extends tn{constructor(b,I,U,Y){super(b,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr extends tn{constructor(b,I,U,Y,le){super(b,I),this.urlAfterRedirects=U,this.state=Y,this.shouldActivate=le}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class En extends tn{constructor(b,I,U,Y){super(b,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nr extends tn{constructor(b,I,U,Y){super(b,I),this.urlAfterRedirects=U,this.state=Y}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pn{constructor(b){this.route=b}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mn{constructor(b){this.route=b}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zr{constructor(b){this.snapshot=b}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ts{constructor(b){this.snapshot=b}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pt{constructor(b){this.snapshot=b}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class He{constructor(b){this.snapshot=b}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ge{constructor(b,I,U){this.routerEvent=b,this.position=I,this.anchor=U}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const at="primary";class St{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I[0]:I}return null}getAll(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function zt(x){return new St(x)}const nn="ngNavigationCancelingError";function Nr(x){const b=Error("NavigationCancelingError: "+x);return b[nn]=!0,b}function Wn(x,b,I){const U=I.path.split("/");if(U.length>x.length||"full"===I.pathMatch&&(b.hasChildren()||U.length<x.length))return null;const Y={};for(let le=0;le<U.length;le++){const Re=U[le],We=x[le];if(Re.startsWith(":"))Y[Re.substring(1)]=We;else if(Re!==We.path)return null}return{consumed:x.slice(0,U.length),posParams:Y}}function hr(x,b){const I=x?Object.keys(x):void 0,U=b?Object.keys(b):void 0;if(!I||!U||I.length!=U.length)return!1;let Y;for(let le=0;le<I.length;le++)if(Y=I[le],!br(x[Y],b[Y]))return!1;return!0}function br(x,b){if(Array.isArray(x)&&Array.isArray(b)){if(x.length!==b.length)return!1;const I=[...x].sort(),U=[...b].sort();return I.every((Y,le)=>U[le]===Y)}return x===b}function Yt(x){return Array.prototype.concat.apply([],x)}function Or(x){return x.length>0?x[x.length-1]:null}function Er(x,b){for(const I in x)x.hasOwnProperty(I)&&b(x[I],I)}function lr(x){return(0,y.CqO)(x)?x:(0,y.QGY)(x)?(0,B.D)(Promise.resolve(x)):(0,X.of)(x)}const Yr={exact:function Gr(x,b,I){if(!ht(x.segments,b.segments)||!ge(x.segments,b.segments,I)||x.numberOfChildren!==b.numberOfChildren)return!1;for(const U in b.children)if(!x.children[U]||!Gr(x.children[U],b.children[U],I))return!1;return!0},subset:Ae},fi={exact:function Vi(x,b){return hr(x,b)},subset:function Pe(x,b){return Object.keys(b).length<=Object.keys(x).length&&Object.keys(b).every(I=>br(x[I],b[I]))},ignored:()=>!0};function ji(x,b,I){return Yr[I.paths](x.root,b.root,I.matrixParams)&&fi[I.queryParams](x.queryParams,b.queryParams)&&!("exact"===I.fragment&&x.fragment!==b.fragment)}function Ae(x,b,I){return he(x,b,b.segments,I)}function he(x,b,I,U){if(x.segments.length>I.length){const Y=x.segments.slice(0,I.length);return!(!ht(Y,I)||b.hasChildren()||!ge(Y,I,U))}if(x.segments.length===I.length){if(!ht(x.segments,I)||!ge(x.segments,I,U))return!1;for(const Y in b.children)if(!x.children[Y]||!Ae(x.children[Y],b.children[Y],U))return!1;return!0}{const Y=I.slice(0,x.segments.length),le=I.slice(x.segments.length);return!!(ht(x.segments,Y)&&ge(x.segments,Y,U)&&x.children[at])&&he(x.children[at],b,le,U)}}function ge(x,b,I){return b.every((U,Y)=>fi[I](x[Y].parameters,U.parameters))}class G{constructor(b,I,U){this.root=b,this.queryParams=I,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zt(this.queryParams)),this._queryParamMap}toString(){return $n.serialize(this)}}class ne{constructor(b,I){this.segments=b,this.children=I,this.parent=null,Er(I,(U,Y)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return er(this)}}class se{constructor(b,I){this.path=b,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=zt(this.parameters)),this._parameterMap}toString(){return Tn(this)}}function ht(x,b){return x.length===b.length&&x.every((I,U)=>I.path===b[U].path)}class yn{}class rn{parse(b){const I=new Ui(b);return new G(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(b){const I=`/${Ur(b.root,!0)}`,U=function zr(x){const b=Object.keys(x).map(I=>{const U=x[I];return Array.isArray(U)?U.map(Y=>`${Et(I)}=${Et(Y)}`).join("&"):`${Et(I)}=${Et(U)}`}).filter(I=>!!I);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${I}${U}${"string"==typeof b.fragment?`#${function gt(x){return encodeURI(x)}(b.fragment)}`:""}`}}const $n=new rn;function er(x){return x.segments.map(b=>Tn(b)).join("/")}function Ur(x,b){if(!x.hasChildren())return er(x);if(b){const I=x.children[at]?Ur(x.children[at],!1):"",U=[];return Er(x.children,(Y,le)=>{le!==at&&U.push(`${le}:${Ur(Y,!1)}`)}),U.length>0?`${I}(${U.join("//")})`:I}{const I=function Wt(x,b){let I=[];return Er(x.children,(U,Y)=>{Y===at&&(I=I.concat(b(U,Y)))}),Er(x.children,(U,Y)=>{Y!==at&&(I=I.concat(b(U,Y)))}),I}(x,(U,Y)=>Y===at?[Ur(x.children[at],!1)]:[`${Y}:${Ur(U,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[at]?`${er(x)}/${I[0]}`:`${er(x)}/(${I.join("//")})`}}function pi(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Et(x){return pi(x).replace(/%3B/gi,";")}function Ut(x){return pi(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dt(x){return decodeURIComponent(x)}function sn(x){return Dt(x.replace(/\+/g,"%20"))}function Tn(x){return`${Ut(x.path)}${function or(x){return Object.keys(x).map(b=>`;${Ut(b)}=${Ut(x[b])}`).join("")}(x.parameters)}`}const wr=/^[^\/()?;=#]+/;function Ii(x){const b=x.match(wr);return b?b[0]:""}const oi=/^[^=?&#]+/,bs=/^[^&#]+/;class Ui{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(b.length>0||Object.keys(I).length>0)&&(U[at]=new ne(b,I)),U}parseSegment(){const b=Ii(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(b),new se(Dt(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const I=Ii(this.remaining);if(!I)return;this.capture(I);let U="";if(this.consumeOptional("=")){const Y=Ii(this.remaining);Y&&(U=Y,this.capture(U))}b[Dt(I)]=Dt(U)}parseQueryParam(b){const I=function Ti(x){const b=x.match(oi);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let U="";if(this.consumeOptional("=")){const Re=function rr(x){const b=x.match(bs);return b?b[0]:""}(this.remaining);Re&&(U=Re,this.capture(U))}const Y=sn(I),le=sn(U);if(b.hasOwnProperty(Y)){let Re=b[Y];Array.isArray(Re)||(Re=[Re],b[Y]=Re),Re.push(le)}else b[Y]=le}parseParens(b){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=Ii(this.remaining),Y=this.remaining[U.length];if("/"!==Y&&")"!==Y&&";"!==Y)throw new Error(`Cannot parse url '${this.url}'`);let le;U.indexOf(":")>-1?(le=U.substr(0,U.indexOf(":")),this.capture(le),this.capture(":")):b&&(le=at);const Re=this.parseChildren();I[le]=1===Object.keys(Re).length?Re[at]:new ne([],Re),this.consumeOptional("//")}return I}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new Error(`Expected "${b}".`)}}class gs{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const I=this.pathFromRoot(b);return I.length>1?I[I.length-2]:null}children(b){const I=ks(b,this._root);return I?I.children.map(U=>U.value):[]}firstChild(b){const I=ks(b,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(b){const I=Dr(b,this._root);return I.length<2?[]:I[I.length-2].children.map(Y=>Y.value).filter(Y=>Y!==b)}pathFromRoot(b){return Dr(b,this._root).map(I=>I.value)}}function ks(x,b){if(x===b.value)return b;for(const I of b.children){const U=ks(x,I);if(U)return U}return null}function Dr(x,b){if(x===b.value)return[b];for(const I of b.children){const U=Dr(x,I);if(U.length)return U.unshift(b),U}return[]}class wn{constructor(b,I){this.value=b,this.children=I}toString(){return`TreeNode(${this.value})`}}function ar(x){const b={};return x&&x.children.forEach(I=>b[I.value.outlet]=I),b}class Oi extends gs{constructor(b,I){super(b),this.snapshot=I,bn(this,b)}toString(){return this.snapshot.toString()}}function Ar(x,b){const I=function ai(x,b){const Re=new mt([],{},{},"",{},at,b,null,x.root,-1,{});return new kt("",new wn(Re,[]))}(x,b),U=new Ue([new se("",{})]),Y=new Ue({}),le=new Ue({}),Re=new Ue({}),We=new Ue(""),$e=new rt(U,Y,Re,We,le,at,b,I.root);return $e.snapshot=I.root,new Oi(new wn($e,[]),I)}class rt{constructor(b,I,U,Y,le,Re,We,$e){this.url=b,this.params=I,this.queryParams=U,this.fragment=Y,this.data=le,this.outlet=Re,this.component=We,this._futureSnapshot=$e}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(b=>zt(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(b=>zt(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ze(x,b="emptyOnly"){const I=x.pathFromRoot;let U=0;if("always"!==b)for(U=I.length-1;U>=1;){const Y=I[U],le=I[U-1];if(Y.routeConfig&&""===Y.routeConfig.path)U--;else{if(le.component)break;U--}}return function st(x){return x.reduce((b,I)=>({params:Object.assign(Object.assign({},b.params),I.params),data:Object.assign(Object.assign({},b.data),I.data),resolve:Object.assign(Object.assign({},b.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(U))}class mt{constructor(b,I,U,Y,le,Re,We,$e,en,_r,Zn){this.url=b,this.params=I,this.queryParams=U,this.fragment=Y,this.data=le,this.outlet=Re,this.component=We,this.routeConfig=$e,this._urlSegment=en,this._lastPathIndex=_r,this._resolve=Zn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kt extends gs{constructor(b,I){super(I),this.url=b,bn(this,I)}toString(){return Rr(this._root)}}function bn(x,b){b.value._routerState=x,b.children.forEach(I=>bn(x,I))}function Rr(x){const b=x.children.length>0?` { ${x.children.map(Rr).join(", ")} } `:"";return`${x.value}${b}`}function fr(x){if(x.snapshot){const b=x.snapshot,I=x._futureSnapshot;x.snapshot=I,hr(b.queryParams,I.queryParams)||x.queryParams.next(I.queryParams),b.fragment!==I.fragment&&x.fragment.next(I.fragment),hr(b.params,I.params)||x.params.next(I.params),function hi(x,b){if(x.length!==b.length)return!1;for(let I=0;I<x.length;++I)if(!hr(x[I],b[I]))return!1;return!0}(b.url,I.url)||x.url.next(I.url),hr(b.data,I.data)||x.data.next(I.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function Tr(x,b){const I=hr(x.params,b.params)&&function Se(x,b){return ht(x,b)&&x.every((I,U)=>hr(I.parameters,b[U].parameters))}(x.url,b.url);return I&&!(!x.parent!=!b.parent)&&(!x.parent||Tr(x.parent,b.parent))}function Ys(x,b,I){if(I&&x.shouldReuseRoute(b.value,I.value.snapshot)){const U=I.value;U._futureSnapshot=b.value;const Y=function vi(x,b,I){return b.children.map(U=>{for(const Y of I.children)if(x.shouldReuseRoute(U.value,Y.value.snapshot))return Ys(x,U,Y);return Ys(x,U)})}(x,b,I);return new wn(U,Y)}{if(x.shouldAttach(b.value)){const le=x.retrieve(b.value);if(null!==le){const Re=le.route;return Re.value._futureSnapshot=b.value,Re.children=b.children.map(We=>Ys(x,We)),Re}}const U=function Wi(x){return new rt(new Ue(x.url),new Ue(x.params),new Ue(x.queryParams),new Ue(x.fragment),new Ue(x.data),x.outlet,x.component,x)}(b.value),Y=b.children.map(le=>Ys(x,le));return new wn(U,Y)}}function oo(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function Hi(x){return"object"==typeof x&&null!=x&&x.outlets}function Eo(x,b,I,U,Y){let le={};if(U&&Er(U,(We,$e)=>{le[$e]=Array.isArray(We)?We.map(en=>`${en}`):`${We}`}),x===b)return new G(I,le,Y);const Re=po(x,b,I);return new G(Re,le,Y)}function po(x,b,I){const U={};return Er(x.children,(Y,le)=>{U[le]=Y===b?I:po(Y,b,I)}),new ne(x.segments,U)}class Bs{constructor(b,I,U){if(this.isAbsolute=b,this.numberOfDoubleDots=I,this.commands=U,b&&U.length>0&&oo(U[0]))throw new Error("Root segment cannot have matrix parameters");const Y=U.find(Hi);if(Y&&Y!==Or(U))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xo{constructor(b,I,U){this.segmentGroup=b,this.processChildren=I,this.index=U}}function Qs(x,b,I){if(x||(x=new ne([],{})),0===x.segments.length&&x.hasChildren())return wo(x,b,I);const U=function ao(x,b,I){let U=0,Y=b;const le={match:!1,pathIndex:0,commandIndex:0};for(;Y<x.segments.length;){if(U>=I.length)return le;const Re=x.segments[Y],We=I[U];if(Hi(We))break;const $e=`${We}`,en=U<I.length-1?I[U+1]:null;if(Y>0&&void 0===$e)break;if($e&&en&&"object"==typeof en&&void 0===en.outlets){if(!da($e,en,Re))return le;U+=2}else{if(!da($e,{},Re))return le;U++}Y++}return{match:!0,pathIndex:Y,commandIndex:U}}(x,b,I),Y=I.slice(U.commandIndex);if(U.match&&U.pathIndex<x.segments.length){const le=new ne(x.segments.slice(0,U.pathIndex),{});return le.children[at]=new ne(x.segments.slice(U.pathIndex),x.children),wo(le,0,Y)}return U.match&&0===Y.length?new ne(x.segments,{}):U.match&&!x.hasChildren()?ki(x,b,I):U.match?wo(x,0,Y):ki(x,b,I)}function wo(x,b,I){if(0===I.length)return new ne(x.segments,{});{const U=function kr(x){return Hi(x[0])?x[0].outlets:{[at]:x}}(I),Y={};return Er(U,(le,Re)=>{"string"==typeof le&&(le=[le]),null!==le&&(Y[Re]=Qs(x.children[Re],b,le))}),Er(x.children,(le,Re)=>{void 0===U[Re]&&(Y[Re]=le)}),new ne(x.segments,Y)}}function ki(x,b,I){const U=x.segments.slice(0,b);let Y=0;for(;Y<I.length;){const le=I[Y];if(Hi(le)){const $e=Ss(le.outlets);return new ne(U,$e)}if(0===Y&&oo(I[0])){U.push(new se(x.segments[b].path,zi(I[0]))),Y++;continue}const Re=Hi(le)?le.outlets[at]:`${le}`,We=Y<I.length-1?I[Y+1]:null;Re&&We&&oo(We)?(U.push(new se(Re,zi(We))),Y+=2):(U.push(new se(Re,{})),Y++)}return new ne(U,{})}function Ss(x){const b={};return Er(x,(I,U)=>{"string"==typeof I&&(I=[I]),null!==I&&(b[U]=ki(new ne([],{}),0,I))}),b}function zi(x){const b={};return Er(x,(I,U)=>b[U]=`${I}`),b}function da(x,b,I){return x==I.path&&hr(b,I.parameters)}class Ho{constructor(b,I,U,Y){this.routeReuseStrategy=b,this.futureState=I,this.currState=U,this.forwardEvent=Y}activate(b){const I=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,U,b),fr(this.futureState.root),this.activateChildRoutes(I,U,b)}deactivateChildRoutes(b,I,U){const Y=ar(I);b.children.forEach(le=>{const Re=le.value.outlet;this.deactivateRoutes(le,Y[Re],U),delete Y[Re]}),Er(Y,(le,Re)=>{this.deactivateRouteAndItsChildren(le,U)})}deactivateRoutes(b,I,U){const Y=b.value,le=I?I.value:null;if(Y===le)if(Y.component){const Re=U.getContext(Y.outlet);Re&&this.deactivateChildRoutes(b,I,Re.children)}else this.deactivateChildRoutes(b,I,U);else le&&this.deactivateRouteAndItsChildren(I,U)}deactivateRouteAndItsChildren(b,I){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,I):this.deactivateRouteAndOutlet(b,I)}detachAndStoreRouteSubtree(b,I){const U=I.getContext(b.value.outlet),Y=U&&b.value.component?U.children:I,le=ar(b);for(const Re of Object.keys(le))this.deactivateRouteAndItsChildren(le[Re],Y);if(U&&U.outlet){const Re=U.outlet.detach(),We=U.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:Re,route:b,contexts:We})}}deactivateRouteAndOutlet(b,I){const U=I.getContext(b.value.outlet),Y=U&&b.value.component?U.children:I,le=ar(b);for(const Re of Object.keys(le))this.deactivateRouteAndItsChildren(le[Re],Y);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(b,I,U){const Y=ar(I);b.children.forEach(le=>{this.activateRoutes(le,Y[le.value.outlet],U),this.forwardEvent(new He(le.value.snapshot))}),b.children.length&&this.forwardEvent(new ts(b.value.snapshot))}activateRoutes(b,I,U){const Y=b.value,le=I?I.value:null;if(fr(Y),Y===le)if(Y.component){const Re=U.getOrCreateContext(Y.outlet);this.activateChildRoutes(b,I,Re.children)}else this.activateChildRoutes(b,I,U);else if(Y.component){const Re=U.getOrCreateContext(Y.outlet);if(this.routeReuseStrategy.shouldAttach(Y.snapshot)){const We=this.routeReuseStrategy.retrieve(Y.snapshot);this.routeReuseStrategy.store(Y.snapshot,null),Re.children.onOutletReAttached(We.contexts),Re.attachRef=We.componentRef,Re.route=We.route.value,Re.outlet&&Re.outlet.attach(We.componentRef,We.route.value),fr(We.route.value),this.activateChildRoutes(b,null,Re.children)}else{const We=function js(x){for(let b=x.parent;b;b=b.parent){const I=b.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(Y.snapshot),$e=We?We.module.componentFactoryResolver:null;Re.attachRef=null,Re.route=Y,Re.resolver=$e,Re.outlet&&Re.outlet.activateWith(Y,$e),this.activateChildRoutes(b,null,Re.children)}}else this.activateChildRoutes(b,null,U)}}class Fs{constructor(b,I){this.routes=b,this.module=I}}function As(x){return"function"==typeof x}function Rs(x){return x instanceof G}const Ki=Symbol("INITIAL_VALUE");function $s(){return(0,It.w)(x=>function Mt(...x){const b=(0,be.yG)(x),I=(0,be.jO)(x),{args:U,keys:Y}=(0,Xe.D)(x);if(0===U.length)return(0,B.D)([],b);const le=new Ke.y(function Ft(x,b,I=ze.y){return U=>{At(b,()=>{const{length:Y}=x,le=new Array(Y);let Re=Y,We=Y;for(let $e=0;$e<Y;$e++)At(b,()=>{const en=(0,B.D)(x[$e],b);let _r=!1;en.subscribe((0,nt.x)(U,Zn=>{le[$e]=Zn,_r||(_r=!0,We--),We||U.next(I(le.slice()))},()=>{--Re||U.complete()}))},U)},U)}}(U,b,Y?Re=>(0,Ce.n)(Y,Re):ze.y));return I?le.pipe((0,lt.Z)(I)):le}(x.map(b=>b.pipe((0,On.q)(1),(0,Ht.O)(Ki)))).pipe((0,xn.R)((b,I)=>{let U=!1;return I.reduce((Y,le,Re)=>Y!==Ki?Y:(le===Ki&&(U=!0),U||!1!==le&&Re!==I.length-1&&!Rs(le)?Y:le),b)},Ki),(0,on.h)(b=>b!==Ki),(0,Vt.U)(b=>Rs(b)?b:!0===b),(0,On.q)(1)))}class Ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ni,this.attachRef=null}}class ni{constructor(){this.contexts=new Map}onChildOutletCreated(b,I){const U=this.getOrCreateContext(b);U.outlet=I,this.contexts.set(b,U)}onChildOutletDestroyed(b){const I=this.getContext(b);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let I=this.getContext(b);return I||(I=new Ms,this.contexts.set(b,I)),I}getContext(b){return this.contexts.get(b)||null}}let mo=(()=>{class x{constructor(I,U,Y,le,Re){this.parentContexts=I,this.location=U,this.resolver=Y,this.changeDetector=Re,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=le||at,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,U){this.activated=I,this._activatedRoute=U,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,U){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const Re=(U=U||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),We=this.parentContexts.getOrCreateContext(this.name).children,$e=new lo(I,We,this.location.injector);this.activated=this.location.createComponent(Re,this.location.length,$e),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(I){return new(I||x)(y.Y36(ni),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},x.\u0275dir=y.lG2({type:x,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),x})();class lo{constructor(b,I,U){this.route=b,this.childContexts=I,this.parent=U}get(b,I){return b===rt?this.route:b===ni?this.childContexts:this.parent.get(b,I)}}let Wr=(()=>{class x{}return x.\u0275fac=function(I){return new(I||x)},x.\u0275cmp=y.Xpm({type:x,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,U){1&I&&y._UZ(0,"router-outlet")},directives:[mo],encapsulation:2}),x})();function ns(x,b=""){for(let I=0;I<x.length;I++){const U=x[I];ys(U,xs(b,U))}}function ys(x,b){x.children&&ns(x.children,b)}function xs(x,b){return b?x||b.path?x&&!b.path?`${x}/`:!x&&b.path?b.path:`${x}/${b.path}`:"":x}function Ei(x){const b=x.children&&x.children.map(Ei),I=b?Object.assign(Object.assign({},x),{children:b}):Object.assign({},x);return!I.component&&(b||I.loadChildren)&&I.outlet&&I.outlet!==at&&(I.component=Wr),I}function F(x){return x.outlet||at}function ae(x,b){const I=x.filter(U=>F(U)===b);return I.push(...x.filter(U=>F(U)!==b)),I}const j={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function de(x,b,I){var U;if(""===b.path)return"full"===b.pathMatch&&(x.hasChildren()||I.length>0)?Object.assign({},j):{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const le=(b.matcher||Wn)(I,x,b);if(!le)return Object.assign({},j);const Re={};Er(le.posParams,($e,en)=>{Re[en]=$e.path});const We=le.consumed.length>0?Object.assign(Object.assign({},Re),le.consumed[le.consumed.length-1].parameters):Re;return{matched:!0,consumedSegments:le.consumed,remainingSegments:I.slice(le.consumed.length),parameters:We,positionalParamSegments:null!==(U=le.posParams)&&void 0!==U?U:{}}}function ke(x,b,I,U,Y="corrected"){if(I.length>0&&function Cn(x,b,I){return I.some(U=>Vr(x,b,U)&&F(U)!==at)}(x,I,U)){const Re=new ne(b,function Bt(x,b,I,U){const Y={};Y[at]=U,U._sourceSegment=x,U._segmentIndexShift=b.length;for(const le of I)if(""===le.path&&F(le)!==at){const Re=new ne([],{});Re._sourceSegment=x,Re._segmentIndexShift=b.length,Y[F(le)]=Re}return Y}(x,b,U,new ne(I,x.children)));return Re._sourceSegment=x,Re._segmentIndexShift=b.length,{segmentGroup:Re,slicedSegments:[]}}if(0===I.length&&function Fr(x,b,I){return I.some(U=>Vr(x,b,U))}(x,I,U)){const Re=new ne(x.segments,function Tt(x,b,I,U,Y,le){const Re={};for(const We of U)if(Vr(x,I,We)&&!Y[F(We)]){const $e=new ne([],{});$e._sourceSegment=x,$e._segmentIndexShift="legacy"===le?x.segments.length:b.length,Re[F(We)]=$e}return Object.assign(Object.assign({},Y),Re)}(x,b,I,U,x.children,Y));return Re._sourceSegment=x,Re._segmentIndexShift=b.length,{segmentGroup:Re,slicedSegments:I}}const le=new ne(x.segments,x.children);return le._sourceSegment=x,le._segmentIndexShift=b.length,{segmentGroup:le,slicedSegments:I}}function Vr(x,b,I){return(!(x.hasChildren()||b.length>0)||"full"!==I.pathMatch)&&""===I.path}function yr(x,b,I,U){return!!(F(x)===U||U!==at&&Vr(b,I,x))&&("**"===x.path||de(b,x,I).matched)}function Mr(x,b,I){return 0===b.length&&!x.children[I]}class Mi{constructor(b){this.segmentGroup=b||null}}class Si{constructor(b){this.urlTree=b}}function ii(x){return(0,Qe._)(new Mi(x))}function yo(x){return(0,Qe._)(new Si(x))}class rs{constructor(b,I,U,Y,le){this.configLoader=I,this.urlSerializer=U,this.urlTree=Y,this.config=le,this.allowRedirects=!0,this.ngModule=b.get(y.h0i)}apply(){const b=ke(this.urlTree.root,[],[],this.config).segmentGroup,I=new ne(b.segments,b.children);return this.expandSegmentGroup(this.ngModule,this.config,I,at).pipe((0,Vt.U)(le=>this.createUrlTree(qo(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,qr.K)(le=>{if(le instanceof Si)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof Mi?this.noMatchError(le):le}))}match(b){return this.expandSegmentGroup(this.ngModule,this.config,b.root,at).pipe((0,Vt.U)(Y=>this.createUrlTree(qo(Y),b.queryParams,b.fragment))).pipe((0,qr.K)(Y=>{throw Y instanceof Mi?this.noMatchError(Y):Y}))}noMatchError(b){return new Error(`Cannot match any routes. URL Segment: '${b.segmentGroup}'`)}createUrlTree(b,I,U){const Y=b.segments.length>0?new ne([],{[at]:b}):b;return new G(Y,I,U)}expandSegmentGroup(b,I,U,Y){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(b,I,U).pipe((0,Vt.U)(le=>new ne([],le))):this.expandSegment(b,U,I,U.segments,Y,!0)}expandChildren(b,I,U){const Y=[];for(const le of Object.keys(U.children))"primary"===le?Y.unshift(le):Y.push(le);return(0,B.D)(Y).pipe((0,kn.b)(le=>{const Re=U.children[le],We=ae(I,le);return this.expandSegmentGroup(b,We,Re,le).pipe((0,Vt.U)($e=>({segment:$e,outlet:le})))}),(0,xn.R)((le,Re)=>(le[Re.outlet]=Re.segment,le),{}),function it(x,b){const I=arguments.length>=2;return U=>U.pipe(x?(0,on.h)((Y,le)=>x(Y,le,U)):ze.y,gr(1),I?(0,un.d)(b):(0,tr.T)(()=>new Nt.K))}())}expandSegment(b,I,U,Y,le,Re){return(0,B.D)(U).pipe((0,kn.b)(We=>this.expandSegmentAgainstRoute(b,I,U,We,Y,le,Re).pipe((0,qr.K)(en=>{if(en instanceof Mi)return(0,X.of)(null);throw en}))),(0,Je.P)(We=>!!We),(0,qr.K)((We,$e)=>{if(We instanceof Nt.K||"EmptyError"===We.name)return Mr(I,Y,le)?(0,X.of)(new ne([],{})):ii(I);throw We}))}expandSegmentAgainstRoute(b,I,U,Y,le,Re,We){return yr(Y,I,le,Re)?void 0===Y.redirectTo?this.matchSegmentAgainstRoute(b,I,Y,le,Re):We&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,I,U,Y,le,Re):ii(I):ii(I)}expandSegmentAgainstRouteUsingRedirect(b,I,U,Y,le,Re){return"**"===Y.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,U,Y,Re):this.expandRegularSegmentAgainstRouteUsingRedirect(b,I,U,Y,le,Re)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,I,U,Y){const le=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?yo(le):this.lineralizeSegments(U,le).pipe((0,_e.z)(Re=>{const We=new ne(Re,{});return this.expandSegment(b,We,I,Re,Y,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,I,U,Y,le,Re){const{matched:We,consumedSegments:$e,remainingSegments:en,positionalParamSegments:_r}=de(I,Y,le);if(!We)return ii(I);const Zn=this.applyRedirectCommands($e,Y.redirectTo,_r);return Y.redirectTo.startsWith("/")?yo(Zn):this.lineralizeSegments(Y,Zn).pipe((0,_e.z)(ln=>this.expandSegment(b,I,U,ln.concat(en),Re,!1)))}matchSegmentAgainstRoute(b,I,U,Y,le){if("**"===U.path)return U.loadChildren?(U._loadedConfig?(0,X.of)(U._loadedConfig):this.configLoader.load(b.injector,U)).pipe((0,Vt.U)(Zn=>(U._loadedConfig=Zn,new ne(Y,{})))):(0,X.of)(new ne(Y,{}));const{matched:Re,consumedSegments:We,remainingSegments:$e}=de(I,U,Y);return Re?this.getChildConfig(b,U,Y).pipe((0,_e.z)(_r=>{const Zn=_r.module,ln=_r.routes,{segmentGroup:gn,slicedSegments:na}=ke(I,We,$e,ln),_n=new ne(gn.segments,gn.children);if(0===na.length&&_n.hasChildren())return this.expandChildren(Zn,ln,_n).pipe((0,Vt.U)(ra=>new ne(We,ra)));if(0===ln.length&&0===na.length)return(0,X.of)(new ne(We,{}));const yt=F(U)===le;return this.expandSegment(Zn,_n,ln,na,yt?at:le,!0).pipe((0,Vt.U)(Qr=>new ne(We.concat(Qr.segments),Qr.children)))})):ii(I)}getChildConfig(b,I,U){return I.children?(0,X.of)(new Fs(I.children,b)):I.loadChildren?void 0!==I._loadedConfig?(0,X.of)(I._loadedConfig):this.runCanLoadGuards(b.injector,I,U).pipe((0,_e.z)(Y=>Y?this.configLoader.load(b.injector,I).pipe((0,Vt.U)(le=>(I._loadedConfig=le,le))):function ur(x){return(0,Qe._)(Nr(`Cannot load children because the guard of the route "path: '${x.path}'" returned false`))}(I))):(0,X.of)(new Fs([],b))}runCanLoadGuards(b,I,U){const Y=I.canLoad;if(!Y||0===Y.length)return(0,X.of)(!0);const le=Y.map(Re=>{const We=b.get(Re);let $e;if(function Co(x){return x&&As(x.canLoad)}(We))$e=We.canLoad(I,U);else{if(!As(We))throw new Error("Invalid CanLoad guard");$e=We(I,U)}return lr($e)});return(0,X.of)(le).pipe($s(),(0,De.b)(Re=>{if(!Rs(Re))return;const We=Nr(`Redirecting to "${this.urlSerializer.serialize(Re)}"`);throw We.url=Re,We}),(0,Vt.U)(Re=>!0===Re))}lineralizeSegments(b,I){let U=[],Y=I.root;for(;;){if(U=U.concat(Y.segments),0===Y.numberOfChildren)return(0,X.of)(U);if(Y.numberOfChildren>1||!Y.children[at])return(0,Qe._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${b.redirectTo}'`));Y=Y.children[at]}}applyRedirectCommands(b,I,U){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),b,U)}applyRedirectCreatreUrlTree(b,I,U,Y){const le=this.createSegmentGroup(b,I.root,U,Y);return new G(le,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(b,I){const U={};return Er(b,(Y,le)=>{if("string"==typeof Y&&Y.startsWith(":")){const We=Y.substring(1);U[le]=I[We]}else U[le]=Y}),U}createSegmentGroup(b,I,U,Y){const le=this.createSegments(b,I.segments,U,Y);let Re={};return Er(I.children,(We,$e)=>{Re[$e]=this.createSegmentGroup(b,We,U,Y)}),new ne(le,Re)}createSegments(b,I,U,Y){return I.map(le=>le.path.startsWith(":")?this.findPosParam(b,le,Y):this.findOrReturn(le,U))}findPosParam(b,I,U){const Y=U[I.path.substring(1)];if(!Y)throw new Error(`Cannot redirect to '${b}'. Cannot find '${I.path}'.`);return Y}findOrReturn(b,I){let U=0;for(const Y of I){if(Y.path===b.path)return I.splice(U),Y;U++}return b}}function qo(x){const b={};for(const U of Object.keys(x.children)){const le=qo(x.children[U]);(le.segments.length>0||le.hasChildren())&&(b[U]=le)}return function vs(x){if(1===x.numberOfChildren&&x.children[at]){const b=x.children[at];return new ne(x.segments.concat(b.segments),b.children)}return x}(new ne(x.segments,b))}class V{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class O{constructor(b,I){this.component=b,this.route=I}}function ue(x,b,I){const U=x._root;return z(U,b?b._root:null,I,[U.value])}function qt(x,b,I){const U=function gi(x){if(!x)return null;for(let b=x.parent;b;b=b.parent){const I=b.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(b);return(U?U.module.injector:I).get(x)}function z(x,b,I,U,Y={canDeactivateChecks:[],canActivateChecks:[]}){const le=ar(b);return x.children.forEach(Re=>{(function W(x,b,I,U,Y={canDeactivateChecks:[],canActivateChecks:[]}){const le=x.value,Re=b?b.value:null,We=I?I.getContext(x.value.outlet):null;if(Re&&le.routeConfig===Re.routeConfig){const $e=function fe(x,b,I){if("function"==typeof I)return I(x,b);switch(I){case"pathParamsChange":return!ht(x.url,b.url);case"pathParamsOrQueryParamsChange":return!ht(x.url,b.url)||!hr(x.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tr(x,b)||!hr(x.queryParams,b.queryParams);default:return!Tr(x,b)}}(Re,le,le.routeConfig.runGuardsAndResolvers);$e?Y.canActivateChecks.push(new V(U)):(le.data=Re.data,le._resolvedData=Re._resolvedData),z(x,b,le.component?We?We.children:null:I,U,Y),$e&&We&&We.outlet&&We.outlet.isActivated&&Y.canDeactivateChecks.push(new O(We.outlet.component,Re))}else Re&&Ie(b,We,Y),Y.canActivateChecks.push(new V(U)),z(x,null,le.component?We?We.children:null:I,U,Y)})(Re,le[Re.value.outlet],I,U.concat([Re.value]),Y),delete le[Re.value.outlet]}),Er(le,(Re,We)=>Ie(Re,I.getContext(We),Y)),Y}function Ie(x,b,I){const U=ar(x),Y=x.value;Er(U,(le,Re)=>{Ie(le,Y.component?b?b.children.getContext(Re):null:b,I)}),I.canDeactivateChecks.push(new O(Y.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,Y))}class Ai{}function bi(x){return new Ke.y(b=>b.error(x))}class qi{constructor(b,I,U,Y,le,Re){this.rootComponentType=b,this.config=I,this.urlTree=U,this.url=Y,this.paramsInheritanceStrategy=le,this.relativeLinkResolution=Re}recognize(){const b=ke(this.urlTree.root,[],[],this.config.filter(Re=>void 0===Re.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,b,at);if(null===I)return null;const U=new mt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},at,this.rootComponentType,null,this.urlTree.root,-1,{}),Y=new wn(U,I),le=new kt(this.url,Y);return this.inheritParamsAndData(le._root),le}inheritParamsAndData(b){const I=b.value,U=Ze(I,this.paramsInheritanceStrategy);I.params=Object.freeze(U.params),I.data=Object.freeze(U.data),b.children.forEach(Y=>this.inheritParamsAndData(Y))}processSegmentGroup(b,I,U){return 0===I.segments.length&&I.hasChildren()?this.processChildren(b,I):this.processSegment(b,I,I.segments,U)}processChildren(b,I){const U=[];for(const le of Object.keys(I.children)){const Re=I.children[le],We=ae(b,le),$e=this.processSegmentGroup(We,Re,le);if(null===$e)return null;U.push(...$e)}const Y=$i(U);return function Ri(x){x.sort((b,I)=>b.value.outlet===at?-1:I.value.outlet===at?1:b.value.outlet.localeCompare(I.value.outlet))}(Y),Y}processSegment(b,I,U,Y){for(const le of b){const Re=this.processSegmentAgainstRoute(le,I,U,Y);if(null!==Re)return Re}return Mr(I,U,Y)?[]:null}processSegmentAgainstRoute(b,I,U,Y){if(b.redirectTo||!yr(b,I,U,Y))return null;let le,Re=[],We=[];if("**"===b.path){const gn=U.length>0?Or(U).parameters:{};le=new mt(U,gn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xo(b),F(b),b.component,b,Gs(I),Io(I)+U.length,Js(b))}else{const gn=de(I,b,U);if(!gn.matched)return null;Re=gn.consumedSegments,We=gn.remainingSegments,le=new mt(Re,gn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xo(b),F(b),b.component,b,Gs(I),Io(I)+Re.length,Js(b))}const $e=function Ls(x){return x.children?x.children:x.loadChildren?x._loadedConfig.routes:[]}(b),{segmentGroup:en,slicedSegments:_r}=ke(I,Re,We,$e.filter(gn=>void 0===gn.redirectTo),this.relativeLinkResolution);if(0===_r.length&&en.hasChildren()){const gn=this.processChildren($e,en);return null===gn?null:[new wn(le,gn)]}if(0===$e.length&&0===_r.length)return[new wn(le,[])];const Zn=F(b)===Y,ln=this.processSegment($e,en,_r,Zn?at:Y);return null===ln?null:[new wn(le,ln)]}}function is(x){const b=x.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function $i(x){const b=[],I=new Set;for(const U of x){if(!is(U)){b.push(U);continue}const Y=b.find(le=>U.value.routeConfig===le.value.routeConfig);void 0!==Y?(Y.children.push(...U.children),I.add(Y)):b.push(U)}for(const U of I){const Y=$i(U.children);b.push(new wn(U.value,Y))}return b.filter(U=>!I.has(U))}function Gs(x){let b=x;for(;b._sourceSegment;)b=b._sourceSegment;return b}function Io(x){let b=x,I=b._segmentIndexShift?b._segmentIndexShift:0;for(;b._sourceSegment;)b=b._sourceSegment,I+=b._segmentIndexShift?b._segmentIndexShift:0;return I-1}function Xo(x){return x.data||{}}function Js(x){return x.resolve||{}}function Ha(x){return[...Object.keys(x),...Object.getOwnPropertySymbols(x)]}function xi(x){return(0,It.w)(b=>{const I=x(b);return I?(0,B.D)(I).pipe((0,Vt.U)(()=>b)):(0,X.of)(b)})}class Es extends class ss{shouldDetach(b){return!1}store(b,I){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,I){return b.routeConfig===I.routeConfig}}{}const Pi=new y.OlP("ROUTES");class $o{constructor(b,I,U,Y){this.injector=b,this.compiler=I,this.onLoadStartListener=U,this.onLoadEndListener=Y}load(b,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const Y=this.loadModuleFactory(I.loadChildren).pipe((0,Vt.U)(le=>{this.onLoadEndListener&&this.onLoadEndListener(I);const Re=le.create(b);return new Fs(Yt(Re.injector.get(Pi,void 0,y.XFs.Self|y.XFs.Optional)).map(Ei),Re)}),(0,qr.K)(le=>{throw I._loader$=void 0,le}));return I._loader$=new tt(Y,()=>new ie.x).pipe(ft()),I._loader$}loadModuleFactory(b){return lr(b()).pipe((0,_e.z)(I=>I instanceof y.YKP?(0,X.of)(I):(0,B.D)(this.compiler.compileModuleAsync(I))))}}class fu{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,I){return b}}function ta(x){throw x}function pu(x,b,I){return b.parse("/")}function To(x,b){return(0,X.of)(null)}const ws={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cs=(()=>{class x{constructor(I,U,Y,le,Re,We,$e){this.rootComponentType=I,this.urlSerializer=U,this.rootContexts=Y,this.location=le,this.config=$e,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ie.x,this.errorHandler=ta,this.malformedUriErrorHandler=pu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:To,afterPreactivation:To},this.urlHandlingStrategy=new fu,this.routeReuseStrategy=new Es,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Re.get(y.h0i),this.console=Re.get(y.c2e);const Zn=Re.get(y.R0b);this.isNgZoneEnabled=Zn instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig($e),this.currentUrlTree=function Hr(){return new G(new ne([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $o(Re,We,ln=>this.triggerEvent(new Pn(ln)),ln=>this.triggerEvent(new Mn(ln))),this.routerState=Ar(this.currentUrlTree,this.rootComponentType),this.transitions=new Ue({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const U=this.events;return I.pipe((0,on.h)(Y=>0!==Y.id),(0,Vt.U)(Y=>Object.assign(Object.assign({},Y),{extractedUrl:this.urlHandlingStrategy.extract(Y.rawUrl)})),(0,It.w)(Y=>{let le=!1,Re=!1;return(0,X.of)(Y).pipe((0,De.b)(We=>{this.currentNavigation={id:We.id,initialUrl:We.currentRawUrl,extractedUrl:We.extractedUrl,trigger:We.source,extras:We.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,It.w)(We=>{const $e=this.browserUrlTree.toString(),en=!this.navigated||We.extractedUrl.toString()!==$e||$e!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||en)&&this.urlHandlingStrategy.shouldProcessUrl(We.rawUrl))return bu(We.source)&&(this.browserUrlTree=We.extractedUrl),(0,X.of)(We).pipe((0,It.w)(Zn=>{const ln=this.transitions.getValue();return U.next(new hn(Zn.id,this.serializeUrl(Zn.extractedUrl),Zn.source,Zn.restoredState)),ln!==this.transitions.getValue()?Me.E:Promise.resolve(Zn)}),function K(x,b,I,U){return(0,It.w)(Y=>function _s(x,b,I,U,Y){return new rs(x,b,I,U,Y).apply()}(x,b,I,Y.extractedUrl,U).pipe((0,Vt.U)(le=>Object.assign(Object.assign({},Y),{urlAfterRedirects:le}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,De.b)(Zn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Zn.urlAfterRedirects})}),function No(x,b,I,U,Y){return(0,_e.z)(le=>function Br(x,b,I,U,Y="emptyOnly",le="legacy"){try{const Re=new qi(x,b,I,U,Y,le).recognize();return null===Re?bi(new Ai):(0,X.of)(Re)}catch(Re){return bi(Re)}}(x,b,le.urlAfterRedirects,I(le.urlAfterRedirects),U,Y).pipe((0,Vt.U)(Re=>Object.assign(Object.assign({},le),{targetSnapshot:Re}))))}(this.rootComponentType,this.config,Zn=>this.serializeUrl(Zn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,De.b)(Zn=>{if("eager"===this.urlUpdateStrategy){if(!Zn.extras.skipLocationChange){const gn=this.urlHandlingStrategy.merge(Zn.urlAfterRedirects,Zn.rawUrl);this.setBrowserUrl(gn,Zn)}this.browserUrlTree=Zn.urlAfterRedirects}const ln=new ir(Zn.id,this.serializeUrl(Zn.extractedUrl),this.serializeUrl(Zn.urlAfterRedirects),Zn.targetSnapshot);U.next(ln)}));if(en&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ln,extractedUrl:gn,source:na,restoredState:_n,extras:yt}=We,Zt=new hn(ln,this.serializeUrl(gn),na,_n);U.next(Zt);const Qr=Ar(gn,this.rootComponentType).snapshot;return(0,X.of)(Object.assign(Object.assign({},We),{targetSnapshot:Qr,urlAfterRedirects:gn,extras:Object.assign(Object.assign({},yt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=We.rawUrl,We.resolve(null),Me.E}),xi(We=>{const{targetSnapshot:$e,id:en,extractedUrl:_r,rawUrl:Zn,extras:{skipLocationChange:ln,replaceUrl:gn}}=We;return this.hooks.beforePreactivation($e,{navigationId:en,appliedUrlTree:_r,rawUrlTree:Zn,skipLocationChange:!!ln,replaceUrl:!!gn})}),(0,De.b)(We=>{const $e=new Ln(We.id,this.serializeUrl(We.extractedUrl),this.serializeUrl(We.urlAfterRedirects),We.targetSnapshot);this.triggerEvent($e)}),(0,Vt.U)(We=>Object.assign(Object.assign({},We),{guards:ue(We.targetSnapshot,We.currentSnapshot,this.rootContexts)})),function Fe(x,b){return(0,_e.z)(I=>{const{targetSnapshot:U,currentSnapshot:Y,guards:{canActivateChecks:le,canDeactivateChecks:Re}}=I;return 0===Re.length&&0===le.length?(0,X.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function Ct(x,b,I,U){return(0,B.D)(x).pipe((0,_e.z)(Y=>function ci(x,b,I,U,Y){const le=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!le||0===le.length)return(0,X.of)(!0);const Re=le.map(We=>{const $e=qt(We,b,Y);let en;if(function Hs(x){return x&&As(x.canDeactivate)}($e))en=lr($e.canDeactivate(x,b,I,U));else{if(!As($e))throw new Error("Invalid CanDeactivate guard");en=lr($e(x,b,I,U))}return en.pipe((0,Je.P)())});return(0,X.of)(Re).pipe($s())}(Y.component,Y.route,I,b,U)),(0,Je.P)(Y=>!0!==Y,!0))}(Re,U,Y,x).pipe((0,_e.z)(We=>We&&function uo(x){return"boolean"==typeof x}(We)?function Jt(x,b,I,U){return(0,B.D)(b).pipe((0,kn.b)(Y=>(0,dn.z)(function Rn(x,b){return null!==x&&b&&b(new Zr(x)),(0,X.of)(!0)}(Y.route.parent,U),function Vn(x,b){return null!==x&&b&&b(new Pt(x)),(0,X.of)(!0)}(Y.route,U),function Kn(x,b,I){const U=b[b.length-1],le=b.slice(0,b.length-1).reverse().map(Re=>function Ne(x){const b=x.routeConfig?x.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:x,guards:b}:null}(Re)).filter(Re=>null!==Re).map(Re=>Ee(()=>{const We=Re.guards.map($e=>{const en=qt($e,Re.node,I);let _r;if(function Po(x){return x&&As(x.canActivateChild)}(en))_r=lr(en.canActivateChild(U,x));else{if(!As(en))throw new Error("Invalid CanActivateChild guard");_r=lr(en(U,x))}return _r.pipe((0,Je.P)())});return(0,X.of)(We).pipe($s())}));return(0,X.of)(le).pipe($s())}(x,Y.path,I),function cr(x,b,I){const U=b.routeConfig?b.routeConfig.canActivate:null;if(!U||0===U.length)return(0,X.of)(!0);const Y=U.map(le=>Ee(()=>{const Re=qt(le,b,I);let We;if(function go(x){return x&&As(x.canActivate)}(Re))We=lr(Re.canActivate(b,x));else{if(!As(Re))throw new Error("Invalid CanActivate guard");We=lr(Re(b,x))}return We.pipe((0,Je.P)())}));return(0,X.of)(Y).pipe($s())}(x,Y.route,I))),(0,Je.P)(Y=>!0!==Y,!0))}(U,le,x,b):(0,X.of)(We)),(0,Vt.U)(We=>Object.assign(Object.assign({},I),{guardsResult:We})))})}(this.ngModule.injector,We=>this.triggerEvent(We)),(0,De.b)(We=>{if(Rs(We.guardsResult)){const en=Nr(`Redirecting to "${this.serializeUrl(We.guardsResult)}"`);throw en.url=We.guardsResult,en}const $e=new Lr(We.id,this.serializeUrl(We.extractedUrl),this.serializeUrl(We.urlAfterRedirects),We.targetSnapshot,!!We.guardsResult);this.triggerEvent($e)}),(0,on.h)(We=>!!We.guardsResult||(this.restoreHistory(We),this.cancelNavigationTransition(We,""),!1)),xi(We=>{if(We.guards.canActivateChecks.length)return(0,X.of)(We).pipe((0,De.b)($e=>{const en=new En($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);this.triggerEvent(en)}),(0,It.w)($e=>{let en=!1;return(0,X.of)($e).pipe(function hs(x,b){return(0,_e.z)(I=>{const{targetSnapshot:U,guards:{canActivateChecks:Y}}=I;if(!Y.length)return(0,X.of)(I);let le=0;return(0,B.D)(Y).pipe((0,kn.b)(Re=>function ha(x,b,I,U){return function Oo(x,b,I,U){const Y=Ha(x);if(0===Y.length)return(0,X.of)({});const le={};return(0,B.D)(Y).pipe((0,_e.z)(Re=>function ea(x,b,I,U){const Y=qt(x,b,U);return lr(Y.resolve?Y.resolve(b,I):Y(b,I))}(x[Re],b,I,U).pipe((0,De.b)(We=>{le[Re]=We}))),gr(1),(0,_e.z)(()=>Ha(le).length===Y.length?(0,X.of)(le):Me.E))}(x._resolve,x,b,U).pipe((0,Vt.U)(le=>(x._resolvedData=le,x.data=Object.assign(Object.assign({},x.data),Ze(x,I).resolve),null)))}(Re.route,U,x,b)),(0,De.b)(()=>le++),gr(1),(0,_e.z)(Re=>le===Y.length?(0,X.of)(I):Me.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,De.b)({next:()=>en=!0,complete:()=>{en||(this.restoreHistory($e),this.cancelNavigationTransition($e,"At least one route resolver didn't emit any value."))}}))}),(0,De.b)($e=>{const en=new nr($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);this.triggerEvent(en)}))}),xi(We=>{const{targetSnapshot:$e,id:en,extractedUrl:_r,rawUrl:Zn,extras:{skipLocationChange:ln,replaceUrl:gn}}=We;return this.hooks.afterPreactivation($e,{navigationId:en,appliedUrlTree:_r,rawUrlTree:Zn,skipLocationChange:!!ln,replaceUrl:!!gn})}),(0,Vt.U)(We=>{const $e=function ui(x,b,I){const U=Ys(x,b._root,I?I._root:void 0);return new Oi(U,b)}(this.routeReuseStrategy,We.targetSnapshot,We.currentRouterState);return Object.assign(Object.assign({},We),{targetRouterState:$e})}),(0,De.b)(We=>{this.currentUrlTree=We.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(We.urlAfterRedirects,We.rawUrl),this.routerState=We.targetRouterState,"deferred"===this.urlUpdateStrategy&&(We.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,We),this.browserUrlTree=We.urlAfterRedirects)}),((x,b,I)=>(0,Vt.U)(U=>(new Ho(b,U.targetRouterState,U.currentRouterState,I).activate(x),U)))(this.rootContexts,this.routeReuseStrategy,We=>this.triggerEvent(We)),(0,De.b)({next(){le=!0},complete(){le=!0}}),function ve(x){return(0,_t.e)((b,I)=>{try{b.subscribe(I)}finally{I.add(x)}})}(()=>{var We;le||Re||this.cancelNavigationTransition(Y,`Navigation ID ${Y.id} is not equal to the current navigation id ${this.navigationId}`),(null===(We=this.currentNavigation)||void 0===We?void 0:We.id)===Y.id&&(this.currentNavigation=null)}),(0,qr.K)(We=>{if(Re=!0,function Xn(x){return x&&x[nn]}(We)){const $e=Rs(We.url);$e||(this.navigated=!0,this.restoreHistory(Y,!0));const en=new zn(Y.id,this.serializeUrl(Y.extractedUrl),We.message);U.next(en),$e?setTimeout(()=>{const _r=this.urlHandlingStrategy.merge(We.url,this.rawUrlTree),Zn={skipLocationChange:Y.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bu(Y.source)};this.scheduleNavigation(_r,"imperative",null,Zn,{resolve:Y.resolve,reject:Y.reject,promise:Y.promise})},0):Y.resolve(!1)}else{this.restoreHistory(Y,!0);const $e=new mr(Y.id,this.serializeUrl(Y.extractedUrl),We);U.next($e);try{Y.resolve(this.errorHandler(We))}catch(en){Y.reject(en)}}return Me.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const U="popstate"===I.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{var Y;const le={replaceUrl:!0},Re=(null===(Y=I.state)||void 0===Y?void 0:Y.navigationId)?I.state:null;if(Re){const $e=Object.assign({},Re);delete $e.navigationId,delete $e.\u0275routerPageId,0!==Object.keys($e).length&&(le.state=$e)}const We=this.parseUrl(I.url);this.scheduleNavigation(We,U,Re,le)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){ns(I),this.config=I.map(Ei),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,U={}){const{relativeTo:Y,queryParams:le,fragment:Re,queryParamsHandling:We,preserveFragment:$e}=U,en=Y||this.routerState.root,_r=$e?this.currentUrlTree.fragment:Re;let Zn=null;switch(We){case"merge":Zn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),le);break;case"preserve":Zn=this.currentUrlTree.queryParams;break;default:Zn=le||null}return null!==Zn&&(Zn=this.removeEmptyProps(Zn)),function Ds(x,b,I,U,Y){if(0===I.length)return Eo(b.root,b.root,b.root,U,Y);const le=function ca(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new Bs(!0,0,x);let b=0,I=!1;const U=x.reduce((Y,le,Re)=>{if("object"==typeof le&&null!=le){if(le.outlets){const We={};return Er(le.outlets,($e,en)=>{We[en]="string"==typeof $e?$e.split("/"):$e}),[...Y,{outlets:We}]}if(le.segmentPath)return[...Y,le.segmentPath]}return"string"!=typeof le?[...Y,le]:0===Re?(le.split("/").forEach((We,$e)=>{0==$e&&"."===We||(0==$e&&""===We?I=!0:".."===We?b++:""!=We&&Y.push(We))}),Y):[...Y,le]},[]);return new Bs(I,b,U)}(I);if(le.toRoot())return Eo(b.root,b.root,new ne([],{}),U,Y);const Re=function jo(x,b,I){if(x.isAbsolute)return new xo(b.root,!0,0);if(-1===I.snapshot._lastPathIndex){const le=I.snapshot._urlSegment;return new xo(le,le===b.root,0)}const U=oo(x.commands[0])?0:1;return function ms(x,b,I){let U=x,Y=b,le=I;for(;le>Y;){if(le-=Y,U=U.parent,!U)throw new Error("Invalid number of '../'");Y=U.segments.length}return new xo(U,!1,Y-le)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+U,x.numberOfDoubleDots)}(le,b,x),We=Re.processChildren?wo(Re.segmentGroup,Re.index,le.commands):Qs(Re.segmentGroup,Re.index,le.commands);return Eo(b.root,Re.segmentGroup,We,U,Y)}(en,this.currentUrlTree,I,Zn,null!=_r?_r:null)}navigateByUrl(I,U={skipLocationChange:!1}){const Y=Rs(I)?I:this.parseUrl(I),le=this.urlHandlingStrategy.merge(Y,this.rawUrlTree);return this.scheduleNavigation(le,"imperative",null,U)}navigate(I,U={skipLocationChange:!1}){return function ko(x){for(let b=0;b<x.length;b++){const I=x[b];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${b}`)}}(I),this.navigateByUrl(this.createUrlTree(I,U),U)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let U;try{U=this.urlSerializer.parse(I)}catch(Y){U=this.malformedUriErrorHandler(Y,this.urlSerializer,I)}return U}isActive(I,U){let Y;if(Y=!0===U?Object.assign({},ws):!1===U?Object.assign({},Zo):U,Rs(I))return ji(this.currentUrlTree,I,Y);const le=this.parseUrl(I);return ji(this.currentUrlTree,le,Y)}removeEmptyProps(I){return Object.keys(I).reduce((U,Y)=>{const le=I[Y];return null!=le&&(U[Y]=le),U},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new Dn(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,U,Y,le,Re){var We,$e;if(this.disposed)return Promise.resolve(!1);let en,_r,Zn;Re?(en=Re.resolve,_r=Re.reject,Zn=Re.promise):Zn=new Promise((na,_n)=>{en=na,_r=_n});const ln=++this.navigationId;let gn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Y=this.location.getState()),gn=Y&&Y.\u0275routerPageId?Y.\u0275routerPageId:le.replaceUrl||le.skipLocationChange?null!==(We=this.browserPageId)&&void 0!==We?We:0:(null!==($e=this.browserPageId)&&void 0!==$e?$e:0)+1):gn=0,this.setTransition({id:ln,targetPageId:gn,source:U,restoredState:Y,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:le,resolve:en,reject:_r,promise:Zn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Zn.catch(na=>Promise.reject(na))}setBrowserUrl(I,U){const Y=this.urlSerializer.serialize(I),le=Object.assign(Object.assign({},U.extras.state),this.generateNgRouterState(U.id,U.targetPageId));this.location.isCurrentPathEqualTo(Y)||U.extras.replaceUrl?this.location.replaceState(Y,"",le):this.location.go(Y,"",le)}restoreHistory(I,U=!1){var Y,le;if("computed"===this.canceledNavigationResolution){const Re=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Y=this.currentNavigation)||void 0===Y?void 0:Y.finalUrl)||0===Re?this.currentUrlTree===(null===(le=this.currentNavigation)||void 0===le?void 0:le.finalUrl)&&0===Re&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Re)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,U){const Y=new zn(I.id,this.serializeUrl(I.extractedUrl),U);this.triggerEvent(Y),I.resolve(!1)}generateNgRouterState(I,U){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:U}:{navigationId:I}}}return x.\u0275fac=function(I){y.$Z()},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})();function bu(x){return"imperative"!==x}let ho=(()=>{class x{constructor(I,U,Y,le,Re){this.router=I,this.route=U,this.tabIndexAttribute=Y,this.renderer=le,this.el=Re,this.commands=null,this.onChanges=new ie.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const U=this.renderer,Y=this.el.nativeElement;null!==I?U.setAttribute(Y,"tabindex",I):U.removeAttribute(Y,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const I={skipLocationChange:si(this.skipLocationChange),replaceUrl:si(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:si(this.preserveFragment)})}}return x.\u0275fac=function(I){return new(I||x)(y.Y36(cs),y.Y36(rt),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq))},x.\u0275dir=y.lG2({type:x,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,U){1&I&&y.NdJ("click",function(){return U.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),x})(),Go=(()=>{class x{constructor(I,U,Y){this.router=I,this.route=U,this.locationStrategy=Y,this.commands=null,this.href=null,this.onChanges=new ie.x,this.subscription=I.events.subscribe(le=>{le instanceof Dn&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,U,Y,le,Re){if(0!==I||U||Y||le||Re||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const We={skipLocationChange:si(this.skipLocationChange),replaceUrl:si(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,We),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:si(this.preserveFragment)})}}return x.\u0275fac=function(I){return new(I||x)(y.Y36(cs),y.Y36(rt),y.Y36(pt.S$))},x.\u0275dir=y.lG2({type:x,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,U){1&I&&y.NdJ("click",function(le){return U.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&I&&y.uIk("target",U.target)("href",U.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),x})();function si(x){return""===x||!!x}class bo{}class gu{preload(b,I){return(0,X.of)(null)}}let Ja=(()=>{class x{constructor(I,U,Y,le){this.router=I,this.injector=Y,this.preloadingStrategy=le,this.loader=new $o(Y,U,$e=>I.triggerEvent(new Pn($e)),$e=>I.triggerEvent(new Mn($e)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,on.h)(I=>I instanceof Dn),(0,kn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(y.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,U){const Y=[];for(const le of U)if(le.loadChildren&&!le.canLoad&&le._loadedConfig){const Re=le._loadedConfig;Y.push(this.processRoutes(Re.module,Re.routes))}else le.loadChildren&&!le.canLoad?Y.push(this.preloadConfig(I,le)):le.children&&Y.push(this.processRoutes(I,le.children));return(0,B.D)(Y).pipe((0,xe.J)(),(0,Vt.U)(le=>{}))}preloadConfig(I,U){return this.preloadingStrategy.preload(U,()=>(U._loadedConfig?(0,X.of)(U._loadedConfig):this.loader.load(I.injector,U)).pipe((0,_e.z)(le=>(U._loadedConfig=le,this.processRoutes(le.module,le.routes)))))}}return x.\u0275fac=function(I){return new(I||x)(y.LFG(cs),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(bo))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})(),mu=(()=>{class x{constructor(I,U,Y={}){this.router=I,this.viewportScroller=U,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof hn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Dn&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Ge&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,U){this.router.triggerEvent(new Ge(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return x.\u0275fac=function(I){y.$Z()},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})();const Xs=new y.OlP("ROUTER_CONFIGURATION"),eo=new y.OlP("ROUTER_FORROOT_GUARD"),fs=[pt.Ye,{provide:yn,useClass:rn},{provide:cs,useFactory:function _u(x,b,I,U,Y,le,Re={},We,$e){const en=new cs(null,x,b,I,U,Y,Yt(le));return We&&(en.urlHandlingStrategy=We),$e&&(en.routeReuseStrategy=$e),function Su(x,b){x.errorHandler&&(b.errorHandler=x.errorHandler),x.malformedUriErrorHandler&&(b.malformedUriErrorHandler=x.malformedUriErrorHandler),x.onSameUrlNavigation&&(b.onSameUrlNavigation=x.onSameUrlNavigation),x.paramsInheritanceStrategy&&(b.paramsInheritanceStrategy=x.paramsInheritanceStrategy),x.relativeLinkResolution&&(b.relativeLinkResolution=x.relativeLinkResolution),x.urlUpdateStrategy&&(b.urlUpdateStrategy=x.urlUpdateStrategy),x.canceledNavigationResolution&&(b.canceledNavigationResolution=x.canceledNavigationResolution)}(Re,en),Re.enableTracing&&en.events.subscribe(_r=>{var Zn,ln;null===(Zn=console.group)||void 0===Zn||Zn.call(console,`Router Event: ${_r.constructor.name}`),console.log(_r.toString()),console.log(_r),null===(ln=console.groupEnd)||void 0===ln||ln.call(console)}),en},deps:[yn,ni,pt.Ye,y.zs3,y.Sil,Pi,Xs,[class Oa{},new y.FiY],[class co{},new y.FiY]]},ni,{provide:rt,useFactory:function vu(x){return x.routerState.root},deps:[cs]},Ja,gu,class Du{preload(b,I){return I().pipe((0,qr.K)(()=>(0,X.of)(null)))}},{provide:Xs,useValue:{enableTracing:!1}}];function _o(){return new y.PXZ("Router",cs)}let fa=(()=>{class x{constructor(I,U){}static forRoot(I,U){return{ngModule:x,providers:[fs,Qo(I),{provide:eo,useFactory:yu,deps:[[cs,new y.FiY,new y.tp0]]},{provide:Xs,useValue:U||{}},{provide:pt.S$,useFactory:Yo,deps:[pt.lw,[new y.tBr(pt.mr),new y.FiY],Xs]},{provide:mu,useFactory:ka,deps:[cs,pt.EM,Xs]},{provide:bo,useExisting:U&&U.preloadingStrategy?U.preloadingStrategy:gu},{provide:y.PXZ,multi:!0,useFactory:_o},[pa,{provide:y.ip1,multi:!0,useFactory:Bu,deps:[pa]},{provide:ju,useFactory:Xa,deps:[pa]},{provide:y.tb,multi:!0,useExisting:ju}]]}}static forChild(I){return{ngModule:x,providers:[Qo(I)]}}}return x.\u0275fac=function(I){return new(I||x)(y.LFG(eo,8),y.LFG(cs,8))},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({}),x})();function ka(x,b,I){return I.scrollOffset&&b.setOffset(I.scrollOffset),new mu(x,b,I)}function Yo(x,b,I={}){return I.useHash?new pt.Do(x,b):new pt.b0(x,b)}function yu(x){return"guarded"}function Qo(x){return[{provide:y.deG,multi:!0,useValue:x},{provide:Pi,multi:!0,useValue:x}]}let pa=(()=>{class x{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ie.x}appInitializer(){return this.injector.get(pt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let U=null;const Y=new Promise(We=>U=We),le=this.injector.get(cs),Re=this.injector.get(Xs);return"disabled"===Re.initialNavigation?(le.setUpLocationChangeListener(),U(!0)):"enabled"===Re.initialNavigation||"enabledBlocking"===Re.initialNavigation?(le.hooks.afterPreactivation=()=>this.initNavigation?(0,X.of)(null):(this.initNavigation=!0,U(!0),this.resultOfPreactivationDone),le.initialNavigation()):U(!0),Y})}bootstrapListener(I){const U=this.injector.get(Xs),Y=this.injector.get(Ja),le=this.injector.get(mu),Re=this.injector.get(cs),We=this.injector.get(y.z2F);I===We.components[0]&&(("enabledNonBlocking"===U.initialNavigation||void 0===U.initialNavigation)&&Re.initialNavigation(),Y.setUpPreloading(),le.init(),Re.resetRootComponentType(We.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return x.\u0275fac=function(I){return new(I||x)(y.LFG(y.zs3))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})();function Bu(x){return x.appInitializer.bind(x)}function Xa(x){return x.bootstrapListener.bind(x)}const ju=new y.OlP("Router Initializer")},3942:(pn,dt,$)=>{$.d(dt,{Z:()=>Ft});var y=$(2090),B=$(4859),X=$(6881),ie=$(1877);class Ue{constructor(Qe,Nt){this._delegate=Qe,this.firebase=Nt,(0,X._addComponent)(Qe,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this._delegate.automaticDataCollectionEnabled=Qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Qe=>{this._delegate.checkDestroyed(),Qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,X.deleteApp)(this._delegate)))}_getService(Qe,Nt=X._DEFAULT_ENTRY_NAME){var dn;this._delegate.checkDestroyed();const Xt=this._delegate.container.getProvider(Qe);return!Xt.isInitialized()&&"EXPLICIT"===(null===(dn=Xt.getComponent())||void 0===dn?void 0:dn.instantiationMode)&&Xt.initialize(),Xt.getImmediate({identifier:Nt})}_removeServiceInstance(Qe,Nt=X._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Qe).clearInstance(Nt)}_addComponent(Qe){(0,X._addComponent)(this._delegate,Qe)}_addOrOverwriteComponent(Qe){(0,X._addOrOverwriteComponent)(this._delegate,Qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xe=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),be=function lt(){const At=function ze(At){const Qe={},Nt={__esModule:!0,initializeApp:function Ee(ft,tt={}){const Vt=X.initializeApp(ft,tt);if((0,y.r3)(Qe,Vt.name))return Qe[Vt.name];const It=new At(Vt,Nt);return Qe[Vt.name]=It,It},app:Xt,registerVersion:X.registerVersion,setLogLevel:X.setLogLevel,onLog:X.onLog,apps:null,SDK_VERSION:X.SDK_VERSION,INTERNAL:{registerComponent:function ot(ft){const tt=ft.name,Vt=tt.replace("-compat","");if(X._registerComponent(ft)&&"PUBLIC"===ft.type){const It=(On=Xt())=>{if("function"!=typeof On[Vt])throw Xe.create("invalid-app-argument",{appName:tt});return On[Vt]()};void 0!==ft.serviceProps&&(0,y.ZB)(It,ft.serviceProps),Nt[Vt]=It,At.prototype[Vt]=function(...On){return this._getService.bind(this,tt).apply(this,ft.multipleInstances?On:[])}}return"PUBLIC"===ft.type?Nt[Vt]:null},removeApp:function dn(ft){delete Qe[ft]},useAsService:function _t(ft,tt){return"serverAuth"===tt?null:tt},modularAPIs:X}};function Xt(ft){if(!(0,y.r3)(Qe,ft=ft||X._DEFAULT_ENTRY_NAME))throw Xe.create("no-app",{appName:ft});return Qe[ft]}return Nt.default=Nt,Object.defineProperty(Nt,"apps",{get:function Me(){return Object.keys(Qe).map(ft=>Qe[ft])}}),Xt.App=At,Nt}(Ue);return At.INTERNAL=Object.assign(Object.assign({},At.INTERNAL),{createFirebaseNamespace:lt,extendNamespace:function Qe(Nt){(0,y.ZB)(At,Nt)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),At}(),Ce=new ie.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){Ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const At=self.firebase.SDK_VERSION;At&&At.indexOf("LITE")>=0&&Ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ft=be;!function Mt(At){(0,X.registerVersion)("@firebase/app-compat","0.2.13",At)}()},6881:(pn,dt,$)=>{$.r(dt),$.d(dt,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Yt,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>St,_addOrOverwriteComponent:()=>zt,_apps:()=>Ge,_clearComponents:()=>Wn,_components:()=>at,_getProvider:()=>Nr,_registerComponent:()=>nn,_removeServiceInstance:()=>Xn,deleteApp:()=>lr,getApp:()=>sr,getApps:()=>Er,initializeApp:()=>Or,onLog:()=>fi,registerVersion:()=>Yr,setLogLevel:()=>ji});var y=$(5861),B=$(4859),X=$(1877),ie=$(2090);let Ke,Xe;const be=new WeakMap,Ce=new WeakMap,nt=new WeakMap,Lt=new WeakMap,Mt=new WeakMap;let Qe={get(Et,gt,Ut){if(Et instanceof IDBTransaction){if("done"===gt)return Ce.get(Et);if("objectStoreNames"===gt)return Et.objectStoreNames||nt.get(Et);if("store"===gt)return Ut.objectStoreNames[1]?void 0:Ut.objectStore(Ut.objectStoreNames[0])}return Ee(Et[gt])},set:(Et,gt,Ut)=>(Et[gt]=Ut,!0),has:(Et,gt)=>Et instanceof IDBTransaction&&("done"===gt||"store"===gt)||gt in Et};function Xt(Et){return"function"==typeof Et?function dn(Et){return Et!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function lt(){return Xe||(Xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Et)?function(...gt){return Et.apply(Me(this),gt),Ee(be.get(this))}:function(...gt){return Ee(Et.apply(Me(this),gt))}:function(gt,...Ut){const Dt=Et.call(Me(this),gt,...Ut);return nt.set(Dt,gt.sort?gt.sort():[gt]),Ee(Dt)}}(Et):(Et instanceof IDBTransaction&&function At(Et){if(Ce.has(Et))return;const gt=new Promise((Ut,Dt)=>{const sn=()=>{Et.removeEventListener("complete",Tn),Et.removeEventListener("error",or),Et.removeEventListener("abort",or)},Tn=()=>{Ut(),sn()},or=()=>{Dt(Et.error||new DOMException("AbortError","AbortError")),sn()};Et.addEventListener("complete",Tn),Et.addEventListener("error",or),Et.addEventListener("abort",or)});Ce.set(Et,gt)}(Et),((Et,gt)=>gt.some(Ut=>Et instanceof Ut))(Et,function ze(){return Ke||(Ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Et,Qe):Et)}function Ee(Et){if(Et instanceof IDBRequest)return function Ft(Et){const gt=new Promise((Ut,Dt)=>{const sn=()=>{Et.removeEventListener("success",Tn),Et.removeEventListener("error",or)},Tn=()=>{Ut(Ee(Et.result)),sn()},or=()=>{Dt(Et.error),sn()};Et.addEventListener("success",Tn),Et.addEventListener("error",or)});return gt.then(Ut=>{Ut instanceof IDBCursor&&be.set(Ut,Et)}).catch(()=>{}),Mt.set(gt,Et),gt}(Et);if(Lt.has(Et))return Lt.get(Et);const gt=Xt(Et);return gt!==Et&&(Lt.set(Et,gt),Mt.set(gt,Et)),gt}const Me=Et=>Mt.get(Et),ft=["get","getKey","getAll","getAllKeys","count"],tt=["put","add","delete","clear"],Vt=new Map;function It(Et,gt){if(!(Et instanceof IDBDatabase)||gt in Et||"string"!=typeof gt)return;if(Vt.get(gt))return Vt.get(gt);const Ut=gt.replace(/FromIndex$/,""),Dt=gt!==Ut,sn=tt.includes(Ut);if(!(Ut in(Dt?IDBIndex:IDBObjectStore).prototype)||!sn&&!ft.includes(Ut))return;const Tn=function(){var or=(0,y.Z)(function*(zr,...wr){const Ii=this.transaction(zr,sn?"readwrite":"readonly");let oi=Ii.store;return Dt&&(oi=oi.index(wr.shift())),(yield Promise.all([oi[Ut](...wr),sn&&Ii.done]))[0]});return function(wr){return or.apply(this,arguments)}}();return Vt.set(gt,Tn),Tn}!function Nt(Et){Qe=Et(Qe)}(Et=>z_(G_({},Et),{get:(gt,Ut,Dt)=>It(gt,Ut)||Et.get(gt,Ut,Dt),has:(gt,Ut)=>!!It(gt,Ut)||Et.has(gt,Ut)}));class On{constructor(gt){this.container=gt}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function Ht(Et){const gt=Et.getComponent();return"VERSION"===(null==gt?void 0:gt.type)}(Ut)){const Dt=Ut.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(Ut=>Ut).join(" ")}}const xn="@firebase/app",qr=new X.Yd("@firebase/app"),Pt="[DEFAULT]",He={[xn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ge=new Map,at=new Map;function St(Et,gt){try{Et.container.addComponent(gt)}catch(Ut){qr.debug(`Component ${gt.name} failed to register with FirebaseApp ${Et.name}`,Ut)}}function zt(Et,gt){Et.container.addOrOverwriteComponent(gt)}function nn(Et){const gt=Et.name;if(at.has(gt))return qr.debug(`There were multiple attempts to register component ${gt}.`),!1;at.set(gt,Et);for(const Ut of Ge.values())St(Ut,Et);return!0}function Nr(Et,gt){const Ut=Et.container.getProvider("heartbeat").getImmediate({optional:!0});return Ut&&Ut.triggerHeartbeat(),Et.container.getProvider(gt)}function Xn(Et,gt,Ut=Pt){Nr(Et,gt).clearInstance(Ut)}function Wn(){at.clear()}const hr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class br{constructor(gt,Ut,Dt){this._isDeleted=!1,this._options=Object.assign({},gt),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this.checkDestroyed(),this._automaticDataCollectionEnabled=gt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(gt){this._isDeleted=gt}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const Yt="9.23.0";function Or(Et,gt={}){let Ut=Et;"object"!=typeof gt&&(gt={name:gt});const Dt=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},gt),sn=Dt.name;if("string"!=typeof sn||!sn)throw hr.create("bad-app-name",{appName:String(sn)});if(Ut||(Ut=(0,ie.aH)()),!Ut)throw hr.create("no-options");const Tn=Ge.get(sn);if(Tn){if((0,ie.vZ)(Ut,Tn.options)&&(0,ie.vZ)(Dt,Tn.config))return Tn;throw hr.create("duplicate-app",{appName:sn})}const or=new B.H0(sn);for(const wr of at.values())or.addComponent(wr);const zr=new br(Ut,Dt,or);return Ge.set(sn,zr),zr}function sr(Et=Pt){const gt=Ge.get(Et);if(!gt&&Et===Pt&&(0,ie.aH)())return Or();if(!gt)throw hr.create("no-app",{appName:Et});return gt}function Er(){return Array.from(Ge.values())}function lr(Et){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,y.Z)(function*(Et){const gt=Et.name;Ge.has(gt)&&(Ge.delete(gt),yield Promise.all(Et.container.getProviders().map(Ut=>Ut.delete())),Et.isDeleted=!0)})).apply(this,arguments)}function Yr(Et,gt,Ut){var Dt;let sn=null!==(Dt=He[Et])&&void 0!==Dt?Dt:Et;Ut&&(sn+=`-${Ut}`);const Tn=sn.match(/\s|\//),or=gt.match(/\s|\//);if(Tn||or){const zr=[`Unable to register library "${sn}" with version "${gt}":`];return Tn&&zr.push(`library name "${sn}" contains illegal characters (whitespace or "/")`),Tn&&or&&zr.push("and"),or&&zr.push(`version name "${gt}" contains illegal characters (whitespace or "/")`),void qr.warn(zr.join(" "))}nn(new B.wA(`${sn}-version`,()=>({library:sn,version:gt}),"VERSION"))}function fi(Et,gt){if(null!==Et&&"function"!=typeof Et)throw hr.create("invalid-log-argument");(0,X.Am)(Et,gt)}function ji(Et){(0,X.Ub)(Et)}const Pe="firebase-heartbeat-store";let Ae=null;function he(){return Ae||(Ae=function ot(Et,gt,{blocked:Ut,upgrade:Dt,blocking:sn,terminated:Tn}={}){const or=indexedDB.open(Et,gt),zr=Ee(or);return Dt&&or.addEventListener("upgradeneeded",wr=>{Dt(Ee(or.result),wr.oldVersion,wr.newVersion,Ee(or.transaction),wr)}),Ut&&or.addEventListener("blocked",wr=>Ut(wr.oldVersion,wr.newVersion,wr)),zr.then(wr=>{Tn&&wr.addEventListener("close",()=>Tn()),sn&&wr.addEventListener("versionchange",Ii=>sn(Ii.oldVersion,Ii.newVersion,Ii))}).catch(()=>{}),zr}("firebase-heartbeat-database",1,{upgrade:(Et,gt)=>{0===gt&&Et.createObjectStore(Pe)}}).catch(Et=>{throw hr.create("idb-open",{originalErrorMessage:Et.message})})),Ae}function G(){return(G=(0,y.Z)(function*(Et){try{return yield(yield he()).transaction(Pe).objectStore(Pe).get(Se(Et))}catch(gt){if(gt instanceof ie.ZR)qr.warn(gt.message);else{const Ut=hr.create("idb-get",{originalErrorMessage:null==gt?void 0:gt.message});qr.warn(Ut.message)}}})).apply(this,arguments)}function ne(Et,gt){return se.apply(this,arguments)}function se(){return(se=(0,y.Z)(function*(Et,gt){try{const Dt=(yield he()).transaction(Pe,"readwrite");yield Dt.objectStore(Pe).put(gt,Se(Et)),yield Dt.done}catch(Ut){if(Ut instanceof ie.ZR)qr.warn(Ut.message);else{const Dt=hr.create("idb-set",{originalErrorMessage:null==Ut?void 0:Ut.message});qr.warn(Dt.message)}}})).apply(this,arguments)}function Se(Et){return`${Et.name}!${Et.options.appId}`}class yn{constructor(gt){this.container=gt,this._heartbeatsCache=null;const Ut=this.container.getProvider("app").getImmediate();this._storage=new er(Ut),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var gt=this;return(0,y.Z)(function*(){const Dt=gt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=rn();if(null===gt._heartbeatsCache&&(gt._heartbeatsCache=yield gt._heartbeatsCachePromise),gt._heartbeatsCache.lastSentHeartbeatDate!==sn&&!gt._heartbeatsCache.heartbeats.some(Tn=>Tn.date===sn))return gt._heartbeatsCache.heartbeats.push({date:sn,agent:Dt}),gt._heartbeatsCache.heartbeats=gt._heartbeatsCache.heartbeats.filter(Tn=>{const or=new Date(Tn.date).valueOf();return Date.now()-or<=2592e6}),gt._storage.overwrite(gt._heartbeatsCache)})()}getHeartbeatsHeader(){var gt=this;return(0,y.Z)(function*(){if(null===gt._heartbeatsCache&&(yield gt._heartbeatsCachePromise),null===gt._heartbeatsCache||0===gt._heartbeatsCache.heartbeats.length)return"";const Ut=rn(),{heartbeatsToSend:Dt,unsentEntries:sn}=function $n(Et,gt=1024){const Ut=[];let Dt=Et.slice();for(const sn of Et){const Tn=Ut.find(or=>or.agent===sn.agent);if(Tn){if(Tn.dates.push(sn.date),Ur(Ut)>gt){Tn.dates.pop();break}}else if(Ut.push({agent:sn.agent,dates:[sn.date]}),Ur(Ut)>gt){Ut.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:Ut,unsentEntries:Dt}}(gt._heartbeatsCache.heartbeats),Tn=(0,ie.L)(JSON.stringify({version:2,heartbeats:Dt}));return gt._heartbeatsCache.lastSentHeartbeatDate=Ut,sn.length>0?(gt._heartbeatsCache.heartbeats=sn,yield gt._storage.overwrite(gt._heartbeatsCache)):(gt._heartbeatsCache.heartbeats=[],gt._storage.overwrite(gt._heartbeatsCache)),Tn})()}}function rn(){return(new Date).toISOString().substring(0,10)}class er{constructor(gt){this.app=gt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var gt=this;return(0,y.Z)(function*(){return(yield gt._canUseIndexedDBPromise)&&(yield function ge(Et){return G.apply(this,arguments)}(gt.app))||{heartbeats:[]}})()}overwrite(gt){var Ut=this;return(0,y.Z)(function*(){var Dt;if(yield Ut._canUseIndexedDBPromise){const Tn=yield Ut.read();return ne(Ut.app,{lastSentHeartbeatDate:null!==(Dt=gt.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Tn.lastSentHeartbeatDate,heartbeats:gt.heartbeats})}})()}add(gt){var Ut=this;return(0,y.Z)(function*(){var Dt;if(yield Ut._canUseIndexedDBPromise){const Tn=yield Ut.read();return ne(Ut.app,{lastSentHeartbeatDate:null!==(Dt=gt.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Tn.lastSentHeartbeatDate,heartbeats:[...Tn.heartbeats,...gt.heartbeats]})}})()}}function Ur(Et){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Et})).length}!function pi(Et){nn(new B.wA("platform-logger",gt=>new On(gt),"PRIVATE")),nn(new B.wA("heartbeat",gt=>new yn(gt),"PRIVATE")),Yr(xn,"0.9.13",Et),Yr(xn,"0.9.13","esm2017"),Yr("fire-js","")}("")},4859:(pn,dt,$)=>{$.d(dt,{H0:()=>ze,wA:()=>X});var y=$(5861),B=$(2090);class X{constructor(be,Ce,nt){this.name=be,this.instanceFactory=Ce,this.type=nt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(be){return this.instantiationMode=be,this}setMultipleInstances(be){return this.multipleInstances=be,this}setServiceProps(be){return this.serviceProps=be,this}setInstanceCreatedCallback(be){return this.onInstanceCreated=be,this}}const ie="[DEFAULT]";class Ue{constructor(be,Ce){this.name=be,this.container=Ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(be){const Ce=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(Ce)){const nt=new B.BH;if(this.instancesDeferred.set(Ce,nt),this.isInitialized(Ce)||this.shouldAutoInitialize())try{const Lt=this.getOrInitializeService({instanceIdentifier:Ce});Lt&&nt.resolve(Lt)}catch(Lt){}}return this.instancesDeferred.get(Ce).promise}getImmediate(be){var Ce;const nt=this.normalizeInstanceIdentifier(null==be?void 0:be.identifier),Lt=null!==(Ce=null==be?void 0:be.optional)&&void 0!==Ce&&Ce;if(!this.isInitialized(nt)&&!this.shouldAutoInitialize()){if(Lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:nt})}catch(Mt){if(Lt)return null;throw Mt}}getComponent(){return this.component}setComponent(be){if(be.name!==this.name)throw Error(`Mismatching Component ${be.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=be,this.shouldAutoInitialize()){if(function Xe(lt){return"EAGER"===lt.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(Ce){}for(const[Ce,nt]of this.instancesDeferred.entries()){const Lt=this.normalizeInstanceIdentifier(Ce);try{const Mt=this.getOrInitializeService({instanceIdentifier:Lt});nt.resolve(Mt)}catch(Mt){}}}}clearInstance(be=ie){this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}delete(){var be=this;return(0,y.Z)(function*(){const Ce=Array.from(be.instances.values());yield Promise.all([...Ce.filter(nt=>"INTERNAL"in nt).map(nt=>nt.INTERNAL.delete()),...Ce.filter(nt=>"_delete"in nt).map(nt=>nt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(be=ie){return this.instances.has(be)}getOptions(be=ie){return this.instancesOptions.get(be)||{}}initialize(be={}){const{options:Ce={}}=be,nt=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(nt))throw Error(`${this.name}(${nt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Lt=this.getOrInitializeService({instanceIdentifier:nt,options:Ce});for(const[Mt,Ft]of this.instancesDeferred.entries())nt===this.normalizeInstanceIdentifier(Mt)&&Ft.resolve(Lt);return Lt}onInit(be,Ce){var nt;const Lt=this.normalizeInstanceIdentifier(Ce),Mt=null!==(nt=this.onInitCallbacks.get(Lt))&&void 0!==nt?nt:new Set;Mt.add(be),this.onInitCallbacks.set(Lt,Mt);const Ft=this.instances.get(Lt);return Ft&&be(Ft,Lt),()=>{Mt.delete(be)}}invokeOnInitCallbacks(be,Ce){const nt=this.onInitCallbacks.get(Ce);if(nt)for(const Lt of nt)try{Lt(be,Ce)}catch(Mt){}}getOrInitializeService({instanceIdentifier:be,options:Ce={}}){let nt=this.instances.get(be);if(!nt&&this.component&&(nt=this.component.instanceFactory(this.container,{instanceIdentifier:(lt=be,lt===ie?void 0:lt),options:Ce}),this.instances.set(be,nt),this.instancesOptions.set(be,Ce),this.invokeOnInitCallbacks(nt,be),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,be,nt)}catch(Lt){}var lt;return nt||null}normalizeInstanceIdentifier(be=ie){return this.component?this.component.multipleInstances?be:ie:be}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ze{constructor(be){this.name=be,this.providers=new Map}addComponent(be){const Ce=this.getProvider(be.name);if(Ce.isComponentSet())throw new Error(`Component ${be.name} has already been registered with ${this.name}`);Ce.setComponent(be)}addOrOverwriteComponent(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}getProvider(be){if(this.providers.has(be))return this.providers.get(be);const Ce=new Ue(be,this);return this.providers.set(be,Ce),Ce}getProviders(){return Array.from(this.providers.values())}}},1877:(pn,dt,$)=>{$.d(dt,{Am:()=>lt,Ub:()=>ze,Yd:()=>Xe,in:()=>B});const y=[];var B=(()=>{return(be=B||(B={}))[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",B;var be})();const X={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ie=B.INFO,Ue={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Ke=(be,Ce,...nt)=>{if(Ce<be.logLevel)return;const Lt=(new Date).toISOString(),Mt=Ue[Ce];if(!Mt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ce})`);console[Mt](`[${Lt}]  ${be.name}:`,...nt)};class Xe{constructor(Ce){this.name=Ce,this._logLevel=ie,this._logHandler=Ke,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(Ce){if(!(Ce in B))throw new TypeError(`Invalid value "${Ce}" assigned to \`logLevel\``);this._logLevel=Ce}setLogLevel(Ce){this._logLevel="string"==typeof Ce?X[Ce]:Ce}get logHandler(){return this._logHandler}set logHandler(Ce){if("function"!=typeof Ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ce){this._userLogHandler=Ce}debug(...Ce){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...Ce),this._logHandler(this,B.DEBUG,...Ce)}log(...Ce){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...Ce),this._logHandler(this,B.VERBOSE,...Ce)}info(...Ce){this._userLogHandler&&this._userLogHandler(this,B.INFO,...Ce),this._logHandler(this,B.INFO,...Ce)}warn(...Ce){this._userLogHandler&&this._userLogHandler(this,B.WARN,...Ce),this._logHandler(this,B.WARN,...Ce)}error(...Ce){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...Ce),this._logHandler(this,B.ERROR,...Ce)}}function ze(be){y.forEach(Ce=>{Ce.setLogLevel(be)})}function lt(be,Ce){for(const nt of y){let Lt=null;Ce&&Ce.level&&(Lt=X[Ce.level]),nt.userLogHandler=null===be?null:(Mt,Ft,...At)=>{const Qe=At.map(Nt=>{if(null==Nt)return null;if("string"==typeof Nt)return Nt;if("number"==typeof Nt||"boolean"==typeof Nt)return Nt.toString();if(Nt instanceof Error)return Nt.message;try{return JSON.stringify(Nt)}catch(dn){return null}}).filter(Nt=>Nt).join(" ");Ft>=(null!=Lt?Lt:Mt.logLevel)&&be({level:B[Ft].toLowerCase(),message:Qe,args:At,type:Mt.name})}}}},259:(pn,dt,$)=>{$.d(dt,{C6:()=>y.getApps,KN:()=>y.registerVersion,Mq:()=>y.getApp,ZF:()=>y.initializeApp});var y=$(6881);(0,y.registerVersion)("firebase","9.23.0","app")},9260:(pn,dt,$)=>{$.d(dt,{Z:()=>y.Z});var y=$(3942);y.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(pn,dt,$)=>{$.r(dt);var y=$(5861),B=$(3942),X=$(1389),ie=$(2090),Xe=($(6881),$(1877),$(4859));function ze(){return window}function Ce(){return(Ce=(0,y.Z)(function*(he,ge,G){var ne;const{BuildInfo:se}=ze();(0,X.as)(ge.sessionId,"AuthEvent did not contain a session ID");const Se=yield Nt(ge.sessionId),ht={};return(0,X.at)()?ht.ibi=se.packageName:(0,X.au)()?ht.apn=se.packageName:(0,X.av)(he,"operation-not-supported-in-this-environment"),se.displayName&&(ht.appDisplayName=se.displayName),ht.sessionId=Se,(0,X.aw)(he,G,ge.type,void 0,null!==(ne=ge.eventId)&&void 0!==ne?ne:void 0,ht)})).apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(he){const{BuildInfo:ge}=ze(),G={};(0,X.at)()?G.iosBundleId=ge.packageName:(0,X.au)()?G.androidPackageName=ge.packageName:(0,X.av)(he,"operation-not-supported-in-this-environment"),yield(0,X.ax)(he,G)})).apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(he,ge,G){const{cordova:ne}=ze();let se=()=>{};try{yield new Promise((Se,ht)=>{let Wt=null;function yn(){var er;Se();const Ur=null===(er=ne.plugins.browsertab)||void 0===er?void 0:er.close;"function"==typeof Ur&&Ur(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function rn(){Wt||(Wt=window.setTimeout(()=>{ht((0,X.az)(he,"redirect-cancelled-by-user"))},2e3))}function $n(){"visible"===(null==document?void 0:document.visibilityState)&&rn()}ge.addPassiveListener(yn),document.addEventListener("resume",rn,!1),(0,X.au)()&&document.addEventListener("visibilitychange",$n,!1),se=()=>{ge.removePassiveListener(yn),document.removeEventListener("resume",rn,!1),document.removeEventListener("visibilitychange",$n,!1),Wt&&window.clearTimeout(Wt)}})}finally{se()}})).apply(this,arguments)}function Nt(he){return dn.apply(this,arguments)}function dn(){return(dn=(0,y.Z)(function*(he){const ge=Xt(he),G=yield crypto.subtle.digest("SHA-256",ge);return Array.from(new Uint8Array(G)).map(se=>se.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Xt(he){if((0,X.as)(/[0-9a-zA-Z]+/.test(he),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(he);const ge=new ArrayBuffer(he.length),G=new Uint8Array(ge);for(let ne=0;ne<he.length;ne++)G[ne]=he.charCodeAt(ne);return G}class Me extends X.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ge=>{this.resolveInialized=ge})}addPassiveListener(ge){this.passiveListeners.add(ge)}removePassiveListener(ge){this.passiveListeners.delete(ge)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ge){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(ge)),super.onEvent(ge)}initialized(){var ge=this;return(0,y.Z)(function*(){yield ge.initPromise})()}}function ft(he){return tt.apply(this,arguments)}function tt(){return(tt=(0,y.Z)(function*(he){const ge=yield On()._get(Ht(he));return ge&&(yield On()._remove(Ht(he))),ge})).apply(this,arguments)}function It(){const he=[],ge="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const ne=Math.floor(Math.random()*ge.length);he.push(ge.charAt(ne))}return he.join("")}function On(){return(0,X.aC)(X.b)}function Ht(he){return(0,X.aD)("authEvent",he.config.apiKey,he.name)}function qr(he){if(!(null==he?void 0:he.includes("?")))return{};const[ge,...G]=he.split("?");return(0,ie.zd)(G.join("?"))}function un(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,X.az)("no-auth-event")}}function ve(){var he;return(null===(he=null==self?void 0:self.location)||void 0===he?void 0:he.protocol)||null}function pt(he=(0,ie.z$)()){return!("file:"!==ve()&&"ionic:"!==ve()&&"capacitor:"!==ve()||!he.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){try{const he=self.localStorage,ge=X.aL();if(he)return he.setItem(ge,"1"),he.removeItem(ge),!function zn(he=(0,ie.z$)()){return function hn(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Dn(he=(0,ie.z$)()){return/Edge\/\d+/.test(he)}(he)}()||(0,ie.hl)()}catch(he){return ir()&&(0,ie.hl)()}return!1}function ir(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ln(){return(function xe(){return"http:"===ve()||"https:"===ve()}()||(0,ie.ru)()||pt())&&!function tn(){return(0,ie.b$)()||(0,ie.UG)()}()&&mr()&&!ir()}function Lr(){return pt()&&"undefined"!=typeof document}function nr(){return(nr=(0,y.Z)(function*(){return!!Lr()&&new Promise(he=>{const ge=setTimeout(()=>{he(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ge),he(!0)})})})).apply(this,arguments)}const Mn={LOCAL:"local",NONE:"none",SESSION:"session"},Zr=X.aA,ts="persistence";function He(he){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,y.Z)(function*(he){yield he._initializationPromise;const ge=St(),G=X.aD(ts,he.config.apiKey,he.name);ge&&ge.setItem(G,he._getPersistence())})).apply(this,arguments)}function St(){var he;try{return(null===(he=function Pn(){return"undefined"!=typeof window?window:null}())||void 0===he?void 0:he.sessionStorage)||null}catch(ge){return null}}const zt=X.aA;class nn{constructor(){this.browserResolver=X.aC(X.k),this.cordovaResolver=X.aC(class gr{constructor(){this._redirectPersistence=X.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=X.aE,this._overrideRedirectResult=X.aF}_initialize(ge){var G=this;return(0,y.Z)(function*(){const ne=ge._key();let se=G.eventManagers.get(ne);return se||(se=new Me(ge),G.eventManagers.set(ne,se),G.attachCallbackListeners(ge,se)),se})()}_openPopup(ge){(0,X.av)(ge,"operation-not-supported-in-this-environment")}_openRedirect(ge,G,ne,se){var Se=this;return(0,y.Z)(function*(){!function Qe(he){var ge,G,ne,se,Se,ht,Wt,yn,rn,$n;const er=ze();(0,X.aA)("function"==typeof(null===(ge=null==er?void 0:er.universalLinks)||void 0===ge?void 0:ge.subscribe),he,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,X.aA)(void 0!==(null===(G=null==er?void 0:er.BuildInfo)||void 0===G?void 0:G.packageName),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,X.aA)("function"==typeof(null===(Se=null===(se=null===(ne=null==er?void 0:er.cordova)||void 0===ne?void 0:ne.plugins)||void 0===se?void 0:se.browsertab)||void 0===Se?void 0:Se.openUrl),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,X.aA)("function"==typeof(null===(yn=null===(Wt=null===(ht=null==er?void 0:er.cordova)||void 0===ht?void 0:ht.plugins)||void 0===Wt?void 0:Wt.browsertab)||void 0===yn?void 0:yn.isAvailable),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,X.aA)("function"==typeof(null===($n=null===(rn=null==er?void 0:er.cordova)||void 0===rn?void 0:rn.InAppBrowser)||void 0===$n?void 0:$n.open),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ge);const ht=yield Se._initialize(ge);yield ht.initialized(),ht.resetRedirect(),(0,X.aG)(),yield Se._originValidation(ge);const Wt=function ot(he,ge,G=null){return{type:ge,eventId:G,urlResponse:null,sessionId:It(),postBody:null,tenantId:he.tenantId,error:(0,X.az)(he,"no-auth-event")}}(ge,ne,se);yield function _t(he,ge){return On()._set(Ht(he),ge)}(ge,Wt);const yn=yield function be(he,ge,G){return Ce.apply(this,arguments)}(ge,Wt,G),rn=yield function Mt(he){const{cordova:ge}=ze();return new Promise(G=>{ge.plugins.browsertab.isAvailable(ne=>{let se=null;ne?ge.plugins.browsertab.openUrl(he):se=ge.InAppBrowser.open(he,(0,X.ay)()?"_blank":"_system","location=yes"),G(se)})})}(yn);return function Ft(he,ge,G){return At.apply(this,arguments)}(ge,ht,rn)})()}_isIframeWebStorageSupported(ge,G){throw new Error("Method not implemented.")}_originValidation(ge){const G=ge._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function nt(he){return Lt.apply(this,arguments)}(ge)),this.originValidationPromises[G]}attachCallbackListeners(ge,G){const{universalLinks:ne,handleOpenURL:se,BuildInfo:Se}=ze(),ht=setTimeout((0,y.Z)(function*(){yield ft(ge),G.onEvent(un())}),500),Wt=function(){var $n=(0,y.Z)(function*(er){clearTimeout(ht);const Ur=yield ft(ge);let pi=null;Ur&&(null==er?void 0:er.url)&&(pi=function Vt(he,ge){var G,ne;const se=function on(he){const ge=qr(he),G=ge.link?decodeURIComponent(ge.link):void 0,ne=qr(G).link,se=ge.deep_link_id?decodeURIComponent(ge.deep_link_id):void 0;return qr(se).link||se||ne||G||he}(ge);if(se.includes("/__/auth/callback")){const Se=qr(se),ht=Se.firebaseError?function xn(he){try{return JSON.parse(he)}catch(ge){return null}}(decodeURIComponent(Se.firebaseError)):null,Wt=null===(ne=null===(G=null==ht?void 0:ht.code)||void 0===G?void 0:G.split("auth/"))||void 0===ne?void 0:ne[1],yn=Wt?(0,X.az)(Wt):null;return yn?{type:he.type,eventId:he.eventId,tenantId:he.tenantId,error:yn,urlResponse:null,sessionId:null,postBody:null}:{type:he.type,eventId:he.eventId,tenantId:he.tenantId,sessionId:he.sessionId,urlResponse:se,postBody:null}}return null}(Ur,er.url)),G.onEvent(pi||un())});return function(Ur){return $n.apply(this,arguments)}}();void 0!==ne&&"function"==typeof ne.subscribe&&ne.subscribe(null,Wt);const yn=se,rn=`${Se.packageName.toLowerCase()}://`;ze().handleOpenURL=function(){var $n=(0,y.Z)(function*(er){if(er.toLowerCase().startsWith(rn)&&Wt({url:er}),"function"==typeof yn)try{yn(er)}catch(Ur){console.error(Ur)}});return function(er){return $n.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=X.a,this._completeRedirectFn=X.aE,this._overrideRedirectResult=X.aF}_initialize(ge){var G=this;return(0,y.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(ge)})()}_openPopup(ge,G,ne,se){var Se=this;return(0,y.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openPopup(ge,G,ne,se)})()}_openRedirect(ge,G,ne,se){var Se=this;return(0,y.Z)(function*(){return yield Se.selectUnderlyingResolver(),Se.assertedUnderlyingResolver._openRedirect(ge,G,ne,se)})()}_isIframeWebStorageSupported(ge,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ge,G)}_originValidation(ge){return this.assertedUnderlyingResolver._originValidation(ge)}get _shouldInitProactively(){return Lr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ge=this;return(0,y.Z)(function*(){if(ge.underlyingResolver)return;const G=yield function En(){return nr.apply(this,arguments)}();ge.underlyingResolver=G?ge.cordovaResolver:ge.browserResolver})()}}function Nr(he){return he.unwrap()}function Wn(he){return hr(he)}function hr(he){const{_tokenResponse:ge}=he instanceof ie.ZR?he.customData:he;if(!ge)return null;if(!(he instanceof ie.ZR)&&"temporaryProof"in ge&&"phoneNumber"in ge)return X.P.credentialFromResult(he);const G=ge.providerId;if(!G||G===X.p.PASSWORD)return null;let ne;switch(G){case X.p.GOOGLE:ne=X.V;break;case X.p.FACEBOOK:ne=X.U;break;case X.p.GITHUB:ne=X.W;break;case X.p.TWITTER:ne=X.Z;break;default:const{oauthIdToken:se,oauthAccessToken:Se,oauthTokenSecret:ht,pendingToken:Wt,nonce:yn}=ge;return Se||ht||se||Wt?Wt?G.startsWith("saml.")?X.aO._create(G,Wt):X.L._fromParams({providerId:G,signInMethod:G,pendingToken:Wt,idToken:se,accessToken:Se}):new X.X(G).credential({idToken:se,accessToken:Se,rawNonce:yn}):null}return he instanceof ie.ZR?ne.credentialFromError(he):ne.credentialFromResult(he)}function br(he,ge){return ge.catch(G=>{throw G instanceof ie.ZR&&function hi(he,ge){var G;const ne=null===(G=ge.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===(null==ge?void 0:ge.code))ge.resolver=new sr(he,X.aq(he,ge));else if(ne){const se=hr(ge),Se=ge;se&&(Se.credential=se,Se.tenantId=ne.tenantId||void 0,Se.email=ne.email||void 0,Se.phoneNumber=ne.phoneNumber||void 0)}}(he,G),G}).then(G=>{const se=G.user;return{operationType:G.operationType,credential:Wn(G),additionalUserInfo:X.ao(G),user:Er.getOrCreate(se)}})}function Yt(he,ge){return Or.apply(this,arguments)}function Or(){return(Or=(0,y.Z)(function*(he,ge){const G=yield ge;return{verificationId:G.verificationId,confirm:ne=>br(he,G.confirm(ne))}})).apply(this,arguments)}class sr{constructor(ge,G){this.resolver=G,this.auth=function Xn(he){return he.wrapped()}(ge)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ge){return br(Nr(this.auth),this.resolver.resolveSignIn(ge))}}class Er{constructor(ge){this._delegate=ge,this.multiFactor=X.ar(ge)}static getOrCreate(ge){return Er.USER_MAP.has(ge)||Er.USER_MAP.set(ge,new Er(ge)),Er.USER_MAP.get(ge)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ge){return this._delegate.getIdTokenResult(ge)}getIdToken(ge){return this._delegate.getIdToken(ge)}linkAndRetrieveDataWithCredential(ge){return this.linkWithCredential(ge)}linkWithCredential(ge){var G=this;return(0,y.Z)(function*(){return br(G.auth,X.a0(G._delegate,ge))})()}linkWithPhoneNumber(ge,G){var ne=this;return(0,y.Z)(function*(){return Yt(ne.auth,X.l(ne._delegate,ge,G))})()}linkWithPopup(ge){var G=this;return(0,y.Z)(function*(){return br(G.auth,X.d(G._delegate,ge,nn))})()}linkWithRedirect(ge){var G=this;return(0,y.Z)(function*(){return yield He(X.aH(G.auth)),X.g(G._delegate,ge,nn)})()}reauthenticateAndRetrieveDataWithCredential(ge){return this.reauthenticateWithCredential(ge)}reauthenticateWithCredential(ge){var G=this;return(0,y.Z)(function*(){return br(G.auth,X.a1(G._delegate,ge))})()}reauthenticateWithPhoneNumber(ge,G){return Yt(this.auth,X.r(this._delegate,ge,G))}reauthenticateWithPopup(ge){return br(this.auth,X.e(this._delegate,ge,nn))}reauthenticateWithRedirect(ge){var G=this;return(0,y.Z)(function*(){return yield He(X.aH(G.auth)),X.h(G._delegate,ge,nn)})()}sendEmailVerification(ge){return X.ae(this._delegate,ge)}unlink(ge){var G=this;return(0,y.Z)(function*(){return yield X.an(G._delegate,ge),G})()}updateEmail(ge){return X.aj(this._delegate,ge)}updatePassword(ge){return X.ak(this._delegate,ge)}updatePhoneNumber(ge){return X.u(this._delegate,ge)}updateProfile(ge){return X.ai(this._delegate,ge)}verifyBeforeUpdateEmail(ge,G){return X.af(this._delegate,ge,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Er.USER_MAP=new WeakMap;const lr=X.aA;let Hr=(()=>{class he{constructor(G,ne){if(this.app=G,ne.isInitialized())return this._delegate=ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:se}=G.options;lr(se,"invalid-api-key",{appName:G.name}),lr(se,"invalid-api-key",{appName:G.name});const Se="undefined"!=typeof window?nn:void 0;this._delegate=ne.initialize({options:{persistence:fi(se,G.name),popupRedirectResolver:Se}}),this._delegate._updateErrorMap(X.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Er.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,ne){X.I(this._delegate,G,ne)}applyActionCode(G){return X.a5(this._delegate,G)}checkActionCode(G){return X.a6(this._delegate,G)}confirmPasswordReset(G,ne){return X.a4(this._delegate,G,ne)}createUserWithEmailAndPassword(G,ne){var se=this;return(0,y.Z)(function*(){return br(se._delegate,X.a8(se._delegate,G,ne))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return X.ad(this._delegate,G)}isSignInWithEmailLink(G){return X.ab(this._delegate,G)}getRedirectResult(){var G=this;return(0,y.Z)(function*(){lr(Ln(),G._delegate,"operation-not-supported-in-this-environment");const ne=yield X.j(G._delegate,nn);return ne?br(G._delegate,Promise.resolve(ne)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function it(he,ge){(0,X.aH)(he)._logFramework(ge)}(this._delegate,G)}onAuthStateChanged(G,ne,se){const{next:Se,error:ht,complete:Wt}=Yr(G,ne,se);return this._delegate.onAuthStateChanged(Se,ht,Wt)}onIdTokenChanged(G,ne,se){const{next:Se,error:ht,complete:Wt}=Yr(G,ne,se);return this._delegate.onIdTokenChanged(Se,ht,Wt)}sendSignInLinkToEmail(G,ne){return X.aa(this._delegate,G,ne)}sendPasswordResetEmail(G,ne){return X.a3(this._delegate,G,ne||void 0)}setPersistence(G){var ne=this;return(0,y.Z)(function*(){let se;switch(function Pt(he,ge){Zr(Object.values(Mn).includes(ge),he,"invalid-persistence-type"),(0,ie.b$)()?Zr(ge!==Mn.SESSION,he,"unsupported-persistence-type"):(0,ie.UG)()?Zr(ge===Mn.NONE,he,"unsupported-persistence-type"):ir()?Zr(ge===Mn.NONE||ge===Mn.LOCAL&&(0,ie.hl)(),he,"unsupported-persistence-type"):Zr(ge===Mn.NONE||mr(),he,"unsupported-persistence-type")}(ne._delegate,G),G){case Mn.SESSION:se=X.a;break;case Mn.LOCAL:se=(yield X.aC(X.i)._isAvailable())?X.i:X.b;break;case Mn.NONE:se=X.N;break;default:return X.av("argument-error",{appName:ne._delegate.name})}return ne._delegate.setPersistence(se)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return br(this._delegate,X._(this._delegate))}signInWithCredential(G){return br(this._delegate,X.$(this._delegate,G))}signInWithCustomToken(G){return br(this._delegate,X.a2(this._delegate,G))}signInWithEmailAndPassword(G,ne){return br(this._delegate,X.a9(this._delegate,G,ne))}signInWithEmailLink(G,ne){return br(this._delegate,X.ac(this._delegate,G,ne))}signInWithPhoneNumber(G,ne){return Yt(this._delegate,X.s(this._delegate,G,ne))}signInWithPopup(G){var ne=this;return(0,y.Z)(function*(){return lr(Ln(),ne._delegate,"operation-not-supported-in-this-environment"),br(ne._delegate,X.c(ne._delegate,G,nn))})()}signInWithRedirect(G){var ne=this;return(0,y.Z)(function*(){return lr(Ln(),ne._delegate,"operation-not-supported-in-this-environment"),yield He(ne._delegate),X.f(ne._delegate,G,nn)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return X.a7(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return he.Persistence=Mn,he})();function Yr(he,ge,G){let ne=he;"function"!=typeof he&&({next:ne,error:ge,complete:G}=he);const se=ne;return{next:ht=>se(ht&&Er.getOrCreate(ht)),error:ge,complete:G}}function fi(he,ge){const G=function at(he,ge){const G=St();if(!G)return[];const ne=X.aD(ts,he,ge);switch(G.getItem(ne)){case Mn.NONE:return[X.N];case Mn.LOCAL:return[X.i,X.a];case Mn.SESSION:return[X.a];default:return[]}}(he,ge);if("undefined"!=typeof self&&!G.includes(X.i)&&G.push(X.i),"undefined"!=typeof window)for(const ne of[X.b,X.a])G.includes(ne)||G.push(ne);return G.includes(X.N)||G.push(X.N),G}class ji{constructor(){this.providerId="phone",this._delegate=new X.P(Nr(B.Z.auth()))}static credential(ge,G){return X.P.credential(ge,G)}verifyPhoneNumber(ge,G){return this._delegate.verifyPhoneNumber(ge,G)}unwrap(){return this._delegate}}ji.PHONE_SIGN_IN_METHOD=X.P.PHONE_SIGN_IN_METHOD,ji.PROVIDER_ID=X.P.PROVIDER_ID;const Vi=X.aA;class Gr{constructor(ge,G,ne=B.Z.app()){var se;Vi(null===(se=ne.options)||void 0===se?void 0:se.apiKey,"invalid-api-key",{appName:ne.name}),this._delegate=new X.R(ge,G,ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ae(he){he.INTERNAL.registerComponent(new Xe.wA("auth-compat",ge=>{const G=ge.getProvider("app-compat").getImmediate(),ne=ge.getProvider("auth");return new Hr(G,ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:X.A.EMAIL_SIGNIN,PASSWORD_RESET:X.A.PASSWORD_RESET,RECOVER_EMAIL:X.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:X.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:X.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:X.A.VERIFY_EMAIL}},EmailAuthProvider:X.Q,FacebookAuthProvider:X.U,GithubAuthProvider:X.W,GoogleAuthProvider:X.V,OAuthProvider:X.X,SAMLAuthProvider:X.Y,PhoneAuthProvider:ji,PhoneMultiFactorGenerator:X.m,RecaptchaVerifier:Gr,TwitterAuthProvider:X.Z,Auth:Hr,AuthCredential:X.J,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),he.registerVersion("@firebase/auth-compat","0.4.2")}(B.Z)},6197:(pn,dt,$)=>{$.d(dt,{U2:()=>Fn,N8:()=>Pa,S1:()=>ac,yv:()=>al,jM:()=>aa,iH:()=>Hd,t8:()=>pe,Vx:()=>fn});var y=$(5861),B=$(6881),X=$(4859),ie=$(2090),Ue=$(1877);const Ke="@firebase/database";let ze="";class be{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,c){null==c?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,ie.Wl)(c))}get(l){const c=this.domStorage_.getItem(this.prefixedName_(l));return null==c?null:(0,ie.cI)(c)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Ce{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,c){null==c?delete this.cache_[l]:this.cache_[l]=c}get(l){return(0,ie.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const nt=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const l=window[f];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new be(l)}}catch(l){}return new Ce},Lt=nt("localStorage"),Mt=nt("sessionStorage"),Ft=new Ue.Yd("@firebase/database"),At=function(){let f=1;return function(){return f++}}(),Qe=function(f){const l=(0,ie.dS)(f),c=new ie.gQ;c.update(l);const _=c.digest();return ie.US.encodeByteArray(_)},Nt=function(...f){let l="";for(let c=0;c<f.length;c++){const _=f[c];Array.isArray(_)||_&&"object"==typeof _&&"number"==typeof _.length?l+=Nt.apply(null,_):l+="object"==typeof _?(0,ie.Wl)(_):_,l+=" "}return l};let dn=null,Xt=!0;const Me=function(...f){if(!0===Xt&&(Xt=!1,null===dn&&!0===Mt.get("logging_enabled")&&function(f,l){(0,ie.hu)(!l||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(Ft.logLevel=Ue.in.VERBOSE,dn=Ft.log.bind(Ft),l&&Mt.set("logging_enabled",!0)):"function"==typeof f?dn=f:(dn=null,Mt.remove("logging_enabled"))}(!0)),dn){const l=Nt.apply(null,f);dn(l)}},ot=function(f){return function(...l){Me(f,...l)}},_t=function(...f){const l="FIREBASE INTERNAL ERROR: "+Nt(...f);Ft.error(l)},ft=function(...f){const l=`FIREBASE FATAL ERROR: ${Nt(...f)}`;throw Ft.error(l),new Error(l)},tt=function(...f){const l="FIREBASE WARNING: "+Nt(...f);Ft.warn(l)},It=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Ht="[MIN_NAME]",xn="[MAX_NAME]",on=function(f,l){if(f===l)return 0;if(f===Ht||l===xn)return-1;if(l===Ht||f===xn)return 1;{const c=tn(f),_=tn(l);return null!==c?null!==_?c-_==0?f.length-l.length:c-_:-1:null!==_?1:f<l?-1:1}},qr=function(f,l){return f===l?0:f<l?-1:1},kn=function(f,l){if(l&&f in l)return l[f];throw new Error("Missing required key ("+f+") in object: "+(0,ie.Wl)(l))},gr=function(f){if("object"!=typeof f||null===f)return(0,ie.Wl)(f);const l=[];for(const _ in f)l.push(_);l.sort();let c="{";for(let _=0;_<l.length;_++)0!==_&&(c+=","),c+=(0,ie.Wl)(l[_]),c+=":",c+=gr(f[l[_]]);return c+="}",c},tr=function(f,l){const c=f.length;if(c<=l)return[f];const _=[];for(let S=0;S<c;S+=l)_.push(f.substring(S,S+l>c?c:S+l));return _};function un(f,l){for(const c in f)f.hasOwnProperty(c)&&l(c,f[c])}const it=function(f){(0,ie.hu)(!It(f),"Invalid JSON number");const _=1023;let S,L,Z,me,Oe;0===f?(L=0,Z=0,S=1/f==-1/0?1:0):(S=f<0,(f=Math.abs(f))>=Math.pow(2,1-_)?(me=Math.min(Math.floor(Math.log(f)/Math.LN2),_),L=me+_,Z=Math.round(f*Math.pow(2,52-me)-Math.pow(2,52))):(L=0,Z=Math.round(f/Math.pow(2,-1074))));const qe=[];for(Oe=52;Oe;Oe-=1)qe.push(Z%2?1:0),Z=Math.floor(Z/2);for(Oe=11;Oe;Oe-=1)qe.push(L%2?1:0),L=Math.floor(L/2);qe.push(S?1:0),qe.reverse();const Rt=qe.join("");let Gt="";for(Oe=0;Oe<64;Oe+=8){let Qt=parseInt(Rt.substr(Oe,8),2).toString(16);1===Qt.length&&(Qt="0"+Qt),Gt+=Qt}return Gt.toLowerCase()},ve=new RegExp("^-?(0*)\\d{1,10}$"),tn=function(f){if(ve.test(f)){const l=Number(f);if(l>=-2147483648&&l<=2147483647)return l}return null},hn=function(f){try{f()}catch(l){setTimeout(()=>{throw tt("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},zn=function(f,l){const c=setTimeout(f,l);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class mr{constructor(l,c){this.appName_=l,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(_=>this.appCheck=_)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((c,_)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(c,_):c(null)},0)})}addTokenChangeListener(l){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(_=>_.addTokenListener(l))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ir{constructor(l,c,_){this.appName_=l,this.firebaseOptions_=c,this.authProvider_=_,this.auth_=null,this.auth_=_.getImmediate({optional:!0}),this.auth_||_.onInit(S=>this.auth_=S)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(c=>c&&"auth/token-not-initialized"===c.code?(Me("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,_)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(c,_):c(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(c=>c.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(c=>c.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(l)}}let Ln=(()=>{class f{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const Zr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ge="websocket",at="long_polling";class St{constructor(l,c,_,S,L=!1,Z="",me=!1,Oe=!1){this.secure=c,this.namespace=_,this.webSocketOnly=S,this.nodeAdmin=L,this.persistenceKey=Z,this.includeNamespaceInQueryParams=me,this.isUsingEmulator=Oe,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lt.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Lt.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nn(f,l,c){let _;if((0,ie.hu)("string"==typeof l,"typeof type must == string"),(0,ie.hu)("object"==typeof c,"typeof params must == object"),l===Ge)_=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(l!==at)throw new Error("Unknown connection type: "+l);_=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function zt(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(c.ns=f.namespace);const S=[];return un(c,(L,Z)=>{S.push(L+"="+Z)}),_+S.join("&")}class Nr{constructor(){this.counters_={}}incrementCounter(l,c=1){(0,ie.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=c}get(){return(0,ie.p$)(this.counters_)}}const Xn={},Wn={};function hi(f){const l=f.toString();return Xn[l]||(Xn[l]=new Nr),Xn[l]}class br{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,c){this.closeAfterResponse=l,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,c){for(this.pendingResponses[l]=c;this.pendingResponses[this.currentResponseNum];){const _=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let S=0;S<_.length;++S)_[S]&&hn(()=>{this.onMessage_(_[S])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class se{constructor(l,c,_,S,L,Z,me){this.connId=l,this.repoInfo=c,this.applicationId=_,this.appCheckToken=S,this.authToken=L,this.transportSessionId=Z,this.lastSessionId=me,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ot(l),this.stats_=hi(c),this.urlFn=Oe=>(this.appCheckToken&&(Oe.ac=this.appCheckToken),nn(c,at,Oe))}open(l,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new br(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,ie.Yr)()||"complete"===document.readyState)f();else{let l=!1;const c=function(){document.body?l||(l=!0,f()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Se((...L)=>{const[Z,me,Oe,qe,Rt]=L;if(this.incrementIncomingBytes_(L),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===Z)this.id=me,this.password=Oe;else{if("close"!==Z)throw new Error("Unrecognized command received: "+Z);me?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(me,()=>{this.onClosed_()})):this.onClosed_()}},(...L)=>{const[Z,me]=L;this.incrementIncomingBytes_(L),this.myPacketOrderer.handleResponse(Z,me)},()=>{this.onClosed_()},this.urlFn);const _={start:"t"};_.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(_.cb=this.scriptTagHolder.uniqueCallbackIdentifier),_.v="5",this.transportSessionId&&(_.s=this.transportSessionId),this.lastSessionId&&(_.ls=this.lastSessionId),this.applicationId&&(_.p=this.applicationId),this.appCheckToken&&(_.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Zr.test(location.hostname)&&(_.r="f");const S=this.urlFn(_);this.log_("Connecting via long-poll to "+S),this.scriptTagHolder.addTag(S,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){se.forceAllow_=!0}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!se.forceAllow_&&(se.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const c=(0,ie.Wl)(l);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const _=(0,ie.h$)(c),S=tr(_,1840);for(let L=0;L<S.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[L]),this.curSegmentNum++}addDisconnectPingFrame(l,c){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const _={dframe:"t"};_.id=l,_.pw=c,this.myDisconnFrame.src=this.urlFn(_),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const c=(0,ie.Wl)(l).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Se{constructor(l,c,_,S){if(this.onDisconnect=_,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=l,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=At(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Se.createIFrame_();let L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(L='<script>document.domain="'+document.domain+'";<\/script>');const Z="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(Z),this.myIFrame.doc.close()}catch(me){Me("frame writing exception"),me.stack&&Me(me.stack),Me(me)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||Me("No IE domain setting required")}catch(c){const _=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+_+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,c){for(this.myID=l,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let c=this.urlFn(l),_="",S=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+_.length<=1870;){const Z=this.pendingSegs.shift();_=_+"&seg"+S+"="+Z.seg+"&ts"+S+"="+Z.ts+"&d"+S+"="+Z.d,S++}return c+=_,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(l,c,_){this.pendingSegs.push({seg:l,ts:c,d:_}),this.alive&&this.newRequest_()}addLongPollTag_(l,c){this.outstandingRequests.add(c);const _=()=>{this.outstandingRequests.delete(c),this.newRequest_()},S=setTimeout(_,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(S),_()})}addTag(l,c){(0,ie.Yr)()?this.doNodeLongPoll(l,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const _=this.myIFrame.doc.createElement("script");_.type="text/javascript",_.async=!0,_.src=l,_.onload=_.onreadystatechange=function(){const S=_.readyState;(!S||"loaded"===S||"complete"===S)&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),c())},_.onerror=()=>{Me("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(_)}catch(_){}},Math.floor(1))}}let yn=null;"undefined"!=typeof MozWebSocket?yn=MozWebSocket:"undefined"!=typeof WebSocket&&(yn=WebSocket);let rn=(()=>{class f{constructor(c,_,S,L,Z,me,Oe){this.connId=c,this.applicationId=S,this.appCheckToken=L,this.authToken=Z,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ot(this.connId),this.stats_=hi(_),this.connURL=f.connectionURL_(_,me,Oe,L,S),this.nodeAdmin=_.nodeAdmin}static connectionURL_(c,_,S,L,Z){const me={v:"5"};return!(0,ie.Yr)()&&"undefined"!=typeof location&&location.hostname&&Zr.test(location.hostname)&&(me.r="f"),_&&(me.s=_),S&&(me.ls=S),L&&(me.ac=L),Z&&(me.p=Z),nn(c,Ge,me)}open(c,_){this.onDisconnect=_,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lt.set("previous_websocket_failure",!0);try{let S;if((0,ie.Yr)()){S={headers:{"User-Agent":`Firebase/5/${ze}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Z=process.env,me=0===this.connURL.indexOf("wss://")?Z.HTTPS_PROXY||Z.https_proxy:Z.HTTP_PROXY||Z.http_proxy;me&&(S.proxy={origin:me})}this.mySock=new yn(this.connURL,[],S)}catch(S){this.log_("Error instantiating WebSocket.");const L=S.message||S.data;return L&&this.log_(L),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=S=>{this.handleIncomingFrame(S)},this.mySock.onerror=S=>{this.log_("WebSocket error.  Closing connection.");const L=S.message||S.data;L&&this.log_(L),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const S=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);S&&S.length>1&&parseFloat(S[1])<4.4&&(c=!0)}return!c&&null!==yn&&!f.forceDisallow_}static previouslyFailed(){return Lt.isInMemoryStorage||!0===Lt.get("previous_websocket_failure")}markConnectionHealthy(){Lt.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const _=this.frames.join("");this.frames=null;const S=(0,ie.cI)(_);this.onMessage(S)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const _=Number(c);if(!isNaN(_))return this.handleNewFrameCount_(_),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const _=c.data;if(this.bytesReceived+=_.length,this.stats_.incrementCounter("bytes_received",_.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(_);else{const S=this.extractFrameCount_(_);null!==S&&this.appendFrame_(S)}}send(c){this.resetKeepAlive();const _=(0,ie.Wl)(c);this.bytesSent+=_.length,this.stats_.incrementCounter("bytes_sent",_.length);const S=tr(_,16384);S.length>1&&this.sendString_(String(S.length));for(let L=0;L<S.length;L++)this.sendString_(S[L])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(_){this.log_("Exception thrown from WebSocket.send():",_.message||_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),$n=(()=>{class f{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[se,rn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const _=rn&&rn.isAvailable();let S=_&&!rn.previouslyFailed();if(c.webSocketOnly&&(_||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),S=!0),S)this.transports_=[rn];else{const L=this.transports_=[];for(const Z of f.ALL_TRANSPORTS)Z&&Z.isAvailable()&&L.push(Z);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class Ti{constructor(l,c,_,S,L,Z,me,Oe,qe,Rt){this.id=l,this.repoInfo_=c,this.applicationId_=_,this.appCheckToken_=S,this.authToken_=L,this.onMessage_=Z,this.onReady_=me,this.onDisconnect_=Oe,this.onKill_=qe,this.lastSessionId=Rt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ot("c:"+this.id+":"),this.transportManager_=new $n(c),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),_=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,_)},Math.floor(0));const S=l.healthyTimeout||0;S>0&&(this.healthyTimeout_=zn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(S)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return c=>{l===this.conn_?this.onConnectionLost_(c):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return c=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(c):l===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const c=l.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const c=kn("t",l),_=kn("d",l);if("c"===c)this.onSecondaryControl_(_);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(_)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const c=kn("t",l),_=kn("d",l);"c"===c?this.onControl_(_):"d"===c&&this.onDataMessage_(_)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const c=kn("t",l);if("d"in l){const _=l.d;if("h"===c){const S=Object.assign({},_);this.repoInfo_.isUsingEmulator&&(S.h=this.repoInfo_.host),this.onHandshake_(S)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(_):"r"===c?this.onReset_(_):"e"===c?_t("Server Error: "+_):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_t("Unknown control packet command: "+c)}}onHandshake_(l){const c=l.ts,_=l.v,S=l.h;this.sessionId=l.s,this.repoInfo_.host=S,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==_&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),_=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,_),zn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,c){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bs{put(l,c,_,S){}merge(l,c,_,S){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,c,_){}onDisconnectMerge(l,c,_){}onDisconnectCancel(l,c){}reportStats(l){}}class rr{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,ie.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...c){if(Array.isArray(this.listeners_[l])){const _=[...this.listeners_[l]];for(let S=0;S<_.length;S++)_[S].callback.apply(_[S].context,c)}}on(l,c,_){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:c,context:_});const S=this.getInitialEvent(l);S&&c.apply(_,S)}off(l,c,_){this.validateEventType_(l);const S=this.listeners_[l]||[];for(let L=0;L<S.length;L++)if(S[L].callback===c&&(!_||_===S[L].context))return void S.splice(L,1)}validateEventType_(l){(0,ie.hu)(this.allowedEvents_.find(c=>c===l),"Unknown event: "+l)}}class Ui extends rr{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ui}getInitialEvent(l){return(0,ie.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class Dr{constructor(l,c){if(void 0===c){this.pieces_=l.split("/");let _=0;for(let S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[_]=this.pieces_[S],_++);this.pieces_.length=_,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=c}toString(){let l="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(l+="/"+this.pieces_[c]);return l||"/"}}function wn(){return new Dr("")}function ar(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Oi(f){return f.pieces_.length-f.pieceNum_}function Ar(f){let l=f.pieceNum_;return l<f.pieces_.length&&l++,new Dr(f.pieces_,l)}function ai(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Ze(f,l=0){return f.pieces_.slice(f.pieceNum_+l)}function st(f){if(f.pieceNum_>=f.pieces_.length)return null;const l=[];for(let c=f.pieceNum_;c<f.pieces_.length-1;c++)l.push(f.pieces_[c]);return new Dr(l,0)}function mt(f,l){const c=[];for(let _=f.pieceNum_;_<f.pieces_.length;_++)c.push(f.pieces_[_]);if(l instanceof Dr)for(let _=l.pieceNum_;_<l.pieces_.length;_++)c.push(l.pieces_[_]);else{const _=l.split("/");for(let S=0;S<_.length;S++)_[S].length>0&&c.push(_[S])}return new Dr(c,0)}function kt(f){return f.pieceNum_>=f.pieces_.length}function bn(f,l){const c=ar(f),_=ar(l);if(null===c)return l;if(c===_)return bn(Ar(f),Ar(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+f+")")}function Rr(f,l){const c=Ze(f,0),_=Ze(l,0);for(let S=0;S<c.length&&S<_.length;S++){const L=on(c[S],_[S]);if(0!==L)return L}return c.length===_.length?0:c.length<_.length?-1:1}function fr(f,l){if(Oi(f)!==Oi(l))return!1;for(let c=f.pieceNum_,_=l.pieceNum_;c<=f.pieces_.length;c++,_++)if(f.pieces_[c]!==l.pieces_[_])return!1;return!0}function Tr(f,l){let c=f.pieceNum_,_=l.pieceNum_;if(Oi(f)>Oi(l))return!1;for(;c<f.pieces_.length;){if(f.pieces_[c]!==l.pieces_[_])return!1;++c,++_}return!0}class ui{constructor(l,c){this.errorPrefix_=c,this.parts_=Ze(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let _=0;_<this.parts_.length;_++)this.byteLength_+=(0,ie.ug)(this.parts_[_]);Wi(this)}}function Wi(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ds(f))}function Ds(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class oo extends rr{constructor(){let l,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",l="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const _=!document[l];_!==this.visible_&&(this.visible_=_,this.trigger("visible",_))},!1)}static getInstance(){return new oo}getInitialEvent(l){return(0,ie.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const Hi=1e3;let wo,ms=(()=>{class f extends bs{constructor(c,_,S,L,Z,me,Oe,qe){if(super(),this.repoInfo_=c,this.applicationId_=_,this.onDataUpdate_=S,this.onConnectStatus_=L,this.onServerInfoUpdate_=Z,this.authTokenProvider_=me,this.appCheckTokenProvider_=Oe,this.authOverride_=qe,this.id=f.nextPersistentConnectionId_++,this.log_=ot("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,qe&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oo.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Ui.getInstance().on("online",this.onOnline_,this)}sendRequest(c,_,S){const L=++this.requestNumber_,Z={r:L,a:c,b:_};this.log_((0,ie.Wl)(Z)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Z),S&&(this.requestCBHash_[L]=S)}get(c){this.initConnection_();const _=new ie.BH,S={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:S,onComplete:me=>{const Oe=me.d;"ok"===me.s?_.resolve(Oe):_.reject(Oe)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),_.promise}listen(c,_,S,L){this.initConnection_();const Z=c._queryIdentifier,me=c._path.toString();this.log_("Listen called for "+me+" "+Z),this.listens.has(me)||this.listens.set(me,new Map),(0,ie.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(me).has(Z),"listen() called twice for same path/queryId.");const Oe={onComplete:L,hashFn:_,query:c,tag:S};this.listens.get(me).set(Z,Oe),this.connected_&&this.sendListen_(Oe)}sendGet_(c){const _=this.outstandingGets_[c];this.sendRequest("g",_.request,S=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),_.onComplete&&_.onComplete(S)})}sendListen_(c){const _=c.query,S=_._path.toString(),L=_._queryIdentifier;this.log_("Listen on "+S+" for "+L);const Z={p:S};c.tag&&(Z.q=_._queryObject,Z.t=c.tag),Z.h=c.hashFn(),this.sendRequest("q",Z,Oe=>{const qe=Oe.d,Rt=Oe.s;f.warnOnListenWarnings_(qe,_),(this.listens.get(S)&&this.listens.get(S).get(L))===c&&(this.log_("listen response",Oe),"ok"!==Rt&&this.removeListen_(S,L),c.onComplete&&c.onComplete(Rt,qe))})}static warnOnListenWarnings_(c,_){if(c&&"object"==typeof c&&(0,ie.r3)(c,"w")){const S=(0,ie.DV)(c,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){const L='".indexOn": "'+_._queryParams.getIndex().toString()+'"',Z=_._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${L} at ${Z} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,ie.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,_=(0,ie.w9)(c)?"auth":"gauth",S={cred:c};null===this.authOverride_?S.noauth=!0:"object"==typeof this.authOverride_&&(S.authvar=this.authOverride_),this.sendRequest(_,S,L=>{const Z=L.s,me=L.d||"error";this.authToken_===c&&("ok"===Z?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(Z,me))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const _=c.s,S=c.d||"error";"ok"===_?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(_,S)})}unlisten(c,_){const S=c._path.toString(),L=c._queryIdentifier;this.log_("Unlisten called for "+S+" "+L),(0,ie.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,L)&&this.connected_&&this.sendUnlisten_(S,L,c._queryObject,_)}sendUnlisten_(c,_,S,L){this.log_("Unlisten on "+c+" for "+_);const Z={p:c};L&&(Z.q=S,Z.t=L),this.sendRequest("n",Z)}onDisconnectPut(c,_,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,_,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:_,onComplete:S})}onDisconnectMerge(c,_,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,_,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:_,onComplete:S})}onDisconnectCancel(c,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,_):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:_})}sendOnDisconnect_(c,_,S,L){const Z={p:_,d:S};this.log_("onDisconnect "+c,Z),this.sendRequest(c,Z,me=>{L&&setTimeout(()=>{L(me.s,me.d)},Math.floor(0))})}put(c,_,S,L){this.putInternal("p",c,_,S,L)}merge(c,_,S,L){this.putInternal("m",c,_,S,L)}putInternal(c,_,S,L,Z){this.initConnection_();const me={p:_,d:S};void 0!==Z&&(me.h=Z),this.outstandingPuts_.push({action:c,request:me,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+_)}sendPut_(c){const _=this.outstandingPuts_[c].action,S=this.outstandingPuts_[c].request,L=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(_,S,Z=>{this.log_(_+" response",Z),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),L&&L(Z.s,Z.d)})}reportStats(c){if(this.connected_){const _={c};this.log_("reportStats",_),this.sendRequest("s",_,S=>{"ok"!==S.s&&this.log_("reportStats","Error sending stats: "+S.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,ie.Wl)(c));const _=c.r,S=this.requestCBHash_[_];S&&(delete this.requestCBHash_[_],S(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,_){this.log_("handleServerMessage",c,_),"d"===c?this.onDataUpdate_(_.p,_.d,!1,_.t):"m"===c?this.onDataUpdate_(_.p,_.d,!0,_.t):"c"===c?this.onListenRevoked_(_.p,_.q):"ac"===c?this.onAuthRevoked_(_.s,_.d):"apc"===c?this.onAppCheckRevoked_(_.s,_.d):"sd"===c?this.onSecurityDebugPacket_(_):_t("Unrecognized action received from server: "+(0,ie.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,_){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=_,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let _=Math.max(0,this.reconnectDelay_-c);_=Math.random()*_,this.log_("Trying to reconnect in "+_+"ms"),this.scheduleConnect_(_),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,y.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const _=c.onDataMessage_.bind(c),S=c.onReady_.bind(c),L=c.onRealtimeDisconnect_.bind(c),Z=c.id+":"+f.nextConnectionId_++,me=c.lastSessionId;let Oe=!1,qe=null;const Rt=function(){qe?qe.close():(Oe=!0,L())};c.realtime_={close:Rt,sendRequest:function(Yn){(0,ie.hu)(qe,"sendRequest call when we're not connected not allowed."),qe.sendRequest(Yn)}};const Qt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Yn,Sr]=yield Promise.all([c.authTokenProvider_.getToken(Qt),c.appCheckTokenProvider_.getToken(Qt)]);Oe?Me("getToken() completed but was canceled"):(Me("getToken() completed. Creating connection."),c.authToken_=Yn&&Yn.accessToken,c.appCheckToken_=Sr&&Sr.token,qe=new Ti(Z,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,_,S,L,ds=>{tt(ds+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},me))}catch(Yn){c.log_("Failed to get token: "+Yn),Oe||(c.repoInfo_.nodeAdmin&&tt(Yn),Rt())}}})()}interrupt(c){Me("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Me("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const _=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:_})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const _=this.outstandingPuts_[c];_&&"h"in _.request&&_.queued&&(_.onComplete&&_.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,_){let S;S=_?_.map(Z=>gr(Z)).join("$"):"default";const L=this.removeListen_(c,S);L&&L.onComplete&&L.onComplete("permission_denied")}removeListen_(c,_){const S=new Dr(c).toString();let L;if(this.listens.has(S)){const Z=this.listens.get(S);L=Z.get(_),Z.delete(_),0===Z.size&&this.listens.delete(S)}else L=void 0;return L}onAuthRevoked_(c,_){Me("Auth token revoked: "+c+"/"+_),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,_){Me("App check token revoked: "+c+"/"+_),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const _ of c.values())this.sendListen_(_);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let _="js";(0,ie.Yr)()&&(_=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+_+"."+ze.replace(/\./g,"-")]=1,(0,ie.uI)()?c["framework.cordova"]=1:(0,ie.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Ui.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&c}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class kr{constructor(l,c){this.name=l,this.node=c}static Wrap(l,c){return new kr(l,c)}}class Qs{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,c){const _=new kr(Ht,l),S=new kr(Ht,c);return 0!==this.compare(_,S)}minPost(){return kr.MIN}}class ao extends Qs{static get __EMPTY_NODE(){return wo}static set __EMPTY_NODE(l){wo=l}compare(l,c){return on(l.name,c.name)}isDefinedOn(l){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,c){return!1}minPost(){return kr.MIN}maxPost(){return new kr(xn,wo)}makePost(l,c){return(0,ie.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new kr(l,wo)}toString(){return".key"}}const ki=new ao;class Ss{constructor(l,c,_,S,L=null){this.isReverse_=S,this.resultGenerator_=L,this.nodeStack_=[];let Z=1;for(;!l.isEmpty();)if(Z=c?_(l.key,c):1,S&&(Z*=-1),Z<0)l=this.isReverse_?l.left:l.right;else{if(0===Z){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,l=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Fs,zi=(()=>{class f{constructor(c,_,S,L,Z){this.key=c,this.value=_,this.color=null!=S?S:f.RED,this.left=null!=L?L:li.EMPTY_NODE,this.right=null!=Z?Z:li.EMPTY_NODE}copy(c,_,S,L,Z){return new f(null!=c?c:this.key,null!=_?_:this.value,null!=S?S:this.color,null!=L?L:this.left,null!=Z?Z:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,_,S){let L=this;const Z=S(c,L.key);return L=Z<0?L.copy(null,null,null,L.left.insert(c,_,S),null):0===Z?L.copy(null,_,null,null,null):L.copy(null,null,null,null,L.right.insert(c,_,S)),L.fixUp_()}removeMin_(){if(this.left.isEmpty())return li.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,_){let S,L;if(S=this,_(c,S.key)<0)!S.left.isEmpty()&&!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),S=S.copy(null,null,null,S.left.remove(c,_),null);else{if(S.left.isRed_()&&(S=S.rotateRight_()),!S.right.isEmpty()&&!S.right.isRed_()&&!S.right.left.isRed_()&&(S=S.moveRedRight_()),0===_(c,S.key)){if(S.right.isEmpty())return li.EMPTY_NODE;L=S.right.min_(),S=S.copy(L.key,L.value,null,null,S.right.removeMin_())}S=S.copy(null,null,null,null,S.right.remove(c,_))}return S.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),_=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,_)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class li{constructor(l,c=li.EMPTY_NODE){this.comparator_=l,this.root_=c}insert(l,c){return new li(this.comparator_,this.root_.insert(l,c,this.comparator_).copy(null,null,zi.BLACK,null,null))}remove(l){return new li(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,zi.BLACK,null,null))}get(l){let c,_=this.root_;for(;!_.isEmpty();){if(c=this.comparator_(l,_.key),0===c)return _.value;c<0?_=_.left:c>0&&(_=_.right)}return null}getPredecessorKey(l){let c,_=this.root_,S=null;for(;!_.isEmpty();){if(c=this.comparator_(l,_.key),0===c){if(_.left.isEmpty())return S?S.key:null;for(_=_.left;!_.right.isEmpty();)_=_.right;return _.key}c<0?_=_.left:c>0&&(S=_,_=_.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new Ss(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,c){return new Ss(this.root_,l,this.comparator_,!1,c)}getReverseIteratorFrom(l,c){return new Ss(this.root_,l,this.comparator_,!0,c)}getReverseIterator(l){return new Ss(this.root_,null,this.comparator_,!0,l)}}function Ho(f,l){return on(f.name,l.name)}function js(f,l){return on(f,l)}li.EMPTY_NODE=new class da{copy(l,c,_,S,L){return this}insert(l,c,_){return new zi(l,c,null)}remove(l,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const uo=function(f){return"number"==typeof f?"number:"+it(f):"string:"+f},Rs=function(f){if(f.isLeafNode()){const l=f.val();(0,ie.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,ie.r3)(l,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(f===Fs||f.isEmpty(),"priority of unexpected type.");(0,ie.hu)(f===Fs||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Co,Po,Hs,go=(()=>{class f{constructor(c,_=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=_,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rs(this.priorityNode_)}static set __childrenNodeConstructor(c){Co=c}static get __childrenNodeConstructor(){return Co}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new f(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return kt(c)?this:".priority"===ar(c)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,_){return null}updateImmediateChild(c,_){return".priority"===c?this.updatePriority(_):_.isEmpty()&&".priority"!==c?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,_).updatePriority(this.priorityNode_)}updateChild(c,_){const S=ar(c);return null===S?_:_.isEmpty()&&".priority"!==S?this:((0,ie.hu)(".priority"!==S||1===Oi(c),".priority must be the last token in a path"),this.updateImmediateChild(S,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ar(c),_)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,_){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+uo(this.priorityNode_.val())+":");const _=typeof this.value_;c+=_+":",c+="number"===_?it(this.value_):this.value_,this.lazyHash_=Qe(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===f.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof f.__childrenNodeConstructor?-1:((0,ie.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const _=typeof c.value_,S=typeof this.value_,L=f.VALUE_TYPE_ORDER.indexOf(_),Z=f.VALUE_TYPE_ORDER.indexOf(S);return(0,ie.hu)(L>=0,"Unknown leaf type: "+_),(0,ie.hu)(Z>=0,"Unknown leaf type: "+S),L===Z?"object"===S?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:Z-L}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const _=c;return this.value_===_.value_&&this.priorityNode_.equals(_.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const ni=new class Ms extends Qs{compare(l,c){const _=l.node.getPriority(),S=c.node.getPriority(),L=_.compareTo(S);return 0===L?on(l.name,c.name):L}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,c){return!l.getPriority().equals(c.getPriority())}minPost(){return kr.MIN}maxPost(){return new kr(xn,new go("[PRIORITY-POST]",Hs))}makePost(l,c){const _=Po(l);return new kr(c,new go("[PRIORITY-POST]",_))}toString(){return".priority"}},mo=Math.log(2);class lo{constructor(l){this.count=parseInt(Math.log(l+1)/mo,10),this.current_=this.count-1;const S=(L=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&S}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Wr=function(f,l,c,_){f.sort(l);const S=function(Oe,qe){const Rt=qe-Oe;let Gt,Qt;if(0===Rt)return null;if(1===Rt)return Gt=f[Oe],Qt=c?c(Gt):Gt,new zi(Qt,Gt.node,zi.BLACK,null,null);{const Yn=parseInt(Rt/2,10)+Oe,Sr=S(Oe,Yn),ds=S(Yn+1,qe);return Gt=f[Yn],Qt=c?c(Gt):Gt,new zi(Qt,Gt.node,zi.BLACK,Sr,ds)}},me=function(Oe){let qe=null,Rt=null,Gt=f.length;const Qt=function(Sr,ds){const Ta=Gt-Sr,so=Gt;Gt-=Sr;const Bi=S(Ta+1,so),ad=f[Ta],fp=c?c(ad):ad;Yn(new zi(fp,ad.node,ds,null,Bi))},Yn=function(Sr){qe?(qe.left=Sr,qe=Sr):(Rt=Sr,qe=Sr)};for(let Sr=0;Sr<Oe.count;++Sr){const ds=Oe.nextBitIsOne(),Ta=Math.pow(2,Oe.count-(Sr+1));ds?Qt(Ta,zi.BLACK):(Qt(Ta,zi.BLACK),Qt(Ta,zi.RED))}return Rt}(new lo(f.length));return new li(_||l,me)};let ns;const ys={};class xs{constructor(l,c){this.indexes_=l,this.indexSet_=c}static get Default(){return(0,ie.hu)(ys&&ni,"ChildrenNode.ts has not been loaded"),ns=ns||new xs({".priority":ys},{".priority":ni}),ns}get(l){const c=(0,ie.DV)(this.indexes_,l);if(!c)throw new Error("No index defined for "+l);return c instanceof li?c:null}hasIndex(l){return(0,ie.r3)(this.indexSet_,l.toString())}addIndex(l,c){(0,ie.hu)(l!==ki,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const _=[];let S=!1;const L=c.getIterator(kr.Wrap);let me,Z=L.getNext();for(;Z;)S=S||l.isDefinedOn(Z.node),_.push(Z),Z=L.getNext();me=S?Wr(_,l.getCompare()):ys;const Oe=l.toString(),qe=Object.assign({},this.indexSet_);qe[Oe]=l;const Rt=Object.assign({},this.indexes_);return Rt[Oe]=me,new xs(Rt,qe)}addToIndexes(l,c){const _=(0,ie.UI)(this.indexes_,(S,L)=>{const Z=(0,ie.DV)(this.indexSet_,L);if((0,ie.hu)(Z,"Missing index implementation for "+L),S===ys){if(Z.isDefinedOn(l.node)){const me=[],Oe=c.getIterator(kr.Wrap);let qe=Oe.getNext();for(;qe;)qe.name!==l.name&&me.push(qe),qe=Oe.getNext();return me.push(l),Wr(me,Z.getCompare())}return ys}{const me=c.get(l.name);let Oe=S;return me&&(Oe=Oe.remove(new kr(l.name,me))),Oe.insert(l,l.node)}});return new xs(_,this.indexSet_)}removeFromIndexes(l,c){const _=(0,ie.UI)(this.indexes_,S=>{if(S===ys)return S;{const L=c.get(l.name);return L?S.remove(new kr(l.name,L)):S}});return new xs(_,this.indexSet_)}}let Ei,F=(()=>{class f{constructor(c,_,S){this.children_=c,this.priorityNode_=_,this.indexMap_=S,this.lazyHash_=null,this.priorityNode_&&Rs(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ei||(Ei=new f(new li(js),null,xs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ei}updatePriority(c){return this.children_.isEmpty()?this:new f(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const _=this.children_.get(c);return null===_?Ei:_}}getChild(c){const _=ar(c);return null===_?this:this.getImmediateChild(_).getChild(Ar(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,_){if((0,ie.hu)(_,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(_);{const S=new kr(c,_);let L,Z;_.isEmpty()?(L=this.children_.remove(c),Z=this.indexMap_.removeFromIndexes(S,this.children_)):(L=this.children_.insert(c,_),Z=this.indexMap_.addToIndexes(S,this.children_));const me=L.isEmpty()?Ei:this.priorityNode_;return new f(L,me,Z)}}updateChild(c,_){const S=ar(c);if(null===S)return _;{(0,ie.hu)(".priority"!==ar(c)||1===Oi(c),".priority must be the last token in a path");const L=this.getImmediateChild(S).updateChild(Ar(c),_);return this.updateImmediateChild(S,L)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const _={};let S=0,L=0,Z=!0;if(this.forEachChild(ni,(me,Oe)=>{_[me]=Oe.val(c),S++,Z&&f.INTEGER_REGEXP_.test(me)?L=Math.max(L,Number(me)):Z=!1}),!c&&Z&&L<2*S){const me=[];for(const Oe in _)me[Oe]=_[Oe];return me}return c&&!this.getPriority().isEmpty()&&(_[".priority"]=this.getPriority().val()),_}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+uo(this.getPriority().val())+":"),this.forEachChild(ni,(_,S)=>{const L=S.hash();""!==L&&(c+=":"+_+":"+L)}),this.lazyHash_=""===c?"":Qe(c)}return this.lazyHash_}getPredecessorChildName(c,_,S){const L=this.resolveIndex_(S);if(L){const Z=L.getPredecessorKey(new kr(c,_));return Z?Z.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const _=this.resolveIndex_(c);if(_){const S=_.minKey();return S&&S.name}return this.children_.minKey()}getFirstChild(c){const _=this.getFirstChildName(c);return _?new kr(_,this.children_.get(_)):null}getLastChildName(c){const _=this.resolveIndex_(c);if(_){const S=_.maxKey();return S&&S.name}return this.children_.maxKey()}getLastChild(c){const _=this.getLastChildName(c);return _?new kr(_,this.children_.get(_)):null}forEachChild(c,_){const S=this.resolveIndex_(c);return S?S.inorderTraversal(L=>_(L.name,L.node)):this.children_.inorderTraversal(_)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,_){const S=this.resolveIndex_(_);if(S)return S.getIteratorFrom(c,L=>L);{const L=this.children_.getIteratorFrom(c.name,kr.Wrap);let Z=L.peek();for(;null!=Z&&_.compare(Z,c)<0;)L.getNext(),Z=L.peek();return L}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,_){const S=this.resolveIndex_(_);if(S)return S.getReverseIteratorFrom(c,L=>L);{const L=this.children_.getReverseIteratorFrom(c.name,kr.Wrap);let Z=L.peek();for(;null!=Z&&_.compare(Z,c)>0;)L.getNext(),Z=L.peek();return L}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===j?-1:0}withIndex(c){if(c===ki||this.indexMap_.hasIndex(c))return this;{const _=this.indexMap_.addIndex(c,this.children_);return new f(this.children_,this.priorityNode_,_)}}isIndexed(c){return c===ki||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const _=c;if(this.getPriority().equals(_.getPriority())){if(this.children_.count()===_.children_.count()){const S=this.getIterator(ni),L=_.getIterator(ni);let Z=S.getNext(),me=L.getNext();for(;Z&&me;){if(Z.name!==me.name||!Z.node.equals(me.node))return!1;Z=S.getNext(),me=L.getNext()}return null===Z&&null===me}return!1}return!1}}resolveIndex_(c){return c===ki?null:this.indexMap_.get(c.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const j=new class ae extends F{constructor(){super(new li(js),F.EMPTY_NODE,xs.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return F.EMPTY_NODE}isEmpty(){return!1}};function ke(f,l=null){if(null===f)return F.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(l=f[".priority"]),(0,ie.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new go(f,ke(l));if(f instanceof Array){let c=F.EMPTY_NODE;return un(f,(_,S)=>{if((0,ie.r3)(f,_)&&"."!==_.substring(0,1)){const L=ke(S);(L.isLeafNode()||!L.isEmpty())&&(c=c.updateImmediateChild(_,L))}}),c.updatePriority(ke(l))}{const c=[];let _=!1;if(un(f,(Z,me)=>{if("."!==Z.substring(0,1)){const Oe=ke(me);Oe.isEmpty()||(_=_||!Oe.getPriority().isEmpty(),c.push(new kr(Z,Oe)))}}),0===c.length)return F.EMPTY_NODE;const L=Wr(c,Ho,Z=>Z.name,js);if(_){const Z=Wr(c,ni.getCompare());return new F(L,ke(l),new xs({".priority":Z},{".priority":ni}))}return new F(L,ke(l),xs.Default)}}Object.defineProperties(kr,{MIN:{value:new kr(Ht,F.EMPTY_NODE)},MAX:{value:new kr(xn,j)}}),ao.__EMPTY_NODE=F.EMPTY_NODE,go.__childrenNodeConstructor=F,function As(f){Fs=f}(j),function $s(f){Hs=f}(j),function Ki(f){Po=f}(ke);class Tt extends Qs{constructor(l){super(),this.indexPath_=l,(0,ie.hu)(!kt(l)&&".priority"!==ar(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,c){const _=this.extractChild(l.node),S=this.extractChild(c.node),L=_.compareTo(S);return 0===L?on(l.name,c.name):L}makePost(l,c){const _=ke(l),S=F.EMPTY_NODE.updateChild(this.indexPath_,_);return new kr(c,S)}maxPost(){const l=F.EMPTY_NODE.updateChild(this.indexPath_,j);return new kr(xn,l)}toString(){return Ze(this.indexPath_,0).join("/")}}const Cn=new class Bt extends Qs{compare(l,c){const _=l.node.compareTo(c.node);return 0===_?on(l.name,c.name):_}isDefinedOn(l){return!0}indexedValueChanged(l,c){return!l.equals(c)}minPost(){return kr.MIN}maxPost(){return kr.MAX}makePost(l,c){const _=ke(l);return new kr(c,_)}toString(){return".value"}};function Fr(f){return{type:"value",snapshotNode:f}}function Vr(f,l){return{type:"child_added",snapshotNode:l,childName:f}}function yr(f,l){return{type:"child_removed",snapshotNode:l,childName:f}}function Mr(f,l,c){return{type:"child_changed",snapshotNode:l,childName:f,oldSnap:c}}class Si{constructor(l){this.index_=l}updateChild(l,c,_,S,L,Z){(0,ie.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const me=l.getImmediateChild(c);return me.getChild(S).equals(_.getChild(S))&&me.isEmpty()===_.isEmpty()||(null!=Z&&(_.isEmpty()?l.hasChild(c)?Z.trackChildChange(yr(c,me)):(0,ie.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):me.isEmpty()?Z.trackChildChange(Vr(c,_)):Z.trackChildChange(Mr(c,_,me))),l.isLeafNode()&&_.isEmpty())?l:l.updateImmediateChild(c,_).withIndex(this.index_)}updateFullNode(l,c,_){return null!=_&&(l.isLeafNode()||l.forEachChild(ni,(S,L)=>{c.hasChild(S)||_.trackChildChange(yr(S,L))}),c.isLeafNode()||c.forEachChild(ni,(S,L)=>{if(l.hasChild(S)){const Z=l.getImmediateChild(S);Z.equals(L)||_.trackChildChange(Mr(S,L,Z))}else _.trackChildChange(Vr(S,L))})),c.withIndex(this.index_)}updatePriority(l,c){return l.isEmpty()?F.EMPTY_NODE:l.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ii{constructor(l){this.indexedFilter_=new Si(l.getIndex()),this.index_=l.getIndex(),this.startPost_=ii.getStartPost_(l),this.endPost_=ii.getEndPost_(l),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),l)<=0:this.index_.compare(this.getStartPost(),l)<0,_=this.endIsInclusive_?this.index_.compare(l,this.getEndPost())<=0:this.index_.compare(l,this.getEndPost())<0;return c&&_}updateChild(l,c,_,S,L,Z){return this.matches(new kr(c,_))||(_=F.EMPTY_NODE),this.indexedFilter_.updateChild(l,c,_,S,L,Z)}updateFullNode(l,c,_){c.isLeafNode()&&(c=F.EMPTY_NODE);let S=c.withIndex(this.index_);S=S.updatePriority(F.EMPTY_NODE);const L=this;return c.forEachChild(ni,(Z,me)=>{L.matches(new kr(Z,me))||(S=S.updateImmediateChild(Z,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,S,_)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const c=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),c)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const c=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),c)}return l.getIndex().maxPost()}}class yo{constructor(l){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const _=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?_<=0:_<0},this.withinEndPost=c=>{const _=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?_<=0:_<0},this.rangedFilter_=new ii(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft(),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}updateChild(l,c,_,S,L,Z){return this.rangedFilter_.matches(new kr(c,_))||(_=F.EMPTY_NODE),l.getImmediateChild(c).equals(_)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,c,_,S,L,Z):this.fullLimitUpdateChild_(l,c,_,L,Z)}updateFullNode(l,c,_){let S;if(c.isLeafNode()||c.isEmpty())S=F.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let L;S=F.EMPTY_NODE.withIndex(this.index_),L=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let Z=0;for(;L.hasNext()&&Z<this.limit_;){const me=L.getNext();if(this.withinDirectionalStart(me)){if(!this.withinDirectionalEnd(me))break;S=S.updateImmediateChild(me.name,me.node),Z++}}}else{let L;S=c.withIndex(this.index_),S=S.updatePriority(F.EMPTY_NODE),L=this.reverse_?S.getReverseIterator(this.index_):S.getIterator(this.index_);let Z=0;for(;L.hasNext();){const me=L.getNext();Z<this.limit_&&this.withinDirectionalStart(me)&&this.withinDirectionalEnd(me)?Z++:S=S.updateImmediateChild(me.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,S,_)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,c,_,S,L){let Z;if(this.reverse_){const Gt=this.index_.getCompare();Z=(Qt,Yn)=>Gt(Yn,Qt)}else Z=this.index_.getCompare();const me=l;(0,ie.hu)(me.numChildren()===this.limit_,"");const Oe=new kr(c,_),qe=this.reverse_?me.getFirstChild(this.index_):me.getLastChild(this.index_),Rt=this.rangedFilter_.matches(Oe);if(me.hasChild(c)){const Gt=me.getImmediateChild(c);let Qt=S.getChildAfterChild(this.index_,qe,this.reverse_);for(;null!=Qt&&(Qt.name===c||me.hasChild(Qt.name));)Qt=S.getChildAfterChild(this.index_,Qt,this.reverse_);const Yn=null==Qt?1:Z(Qt,Oe);if(Rt&&!_.isEmpty()&&Yn>=0)return null!=L&&L.trackChildChange(Mr(c,_,Gt)),me.updateImmediateChild(c,_);{null!=L&&L.trackChildChange(yr(c,Gt));const ds=me.updateImmediateChild(c,F.EMPTY_NODE);return null!=Qt&&this.rangedFilter_.matches(Qt)?(null!=L&&L.trackChildChange(Vr(Qt.name,Qt.node)),ds.updateImmediateChild(Qt.name,Qt.node)):ds}}return _.isEmpty()?l:Rt&&Z(qe,Oe)>=0?(null!=L&&(L.trackChildChange(yr(qe.name,qe.node)),L.trackChildChange(Vr(c,_))),me.updateImmediateChild(c,_).updateImmediateChild(qe.name,F.EMPTY_NODE)):l}}class Fi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ni}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ht}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ni}copy(){const l=new Fi;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.startAfterSet_=this.startAfterSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.endBeforeSet_=this.endBeforeSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function ue(f){const l={};if(f.isDefault())return l;let c;if(f.index_===ni?c="$priority":f.index_===Cn?c="$value":f.index_===ki?c="$key":((0,ie.hu)(f.index_ instanceof Tt,"Unrecognized index type!"),c=f.index_.toString()),l.orderBy=(0,ie.Wl)(c),f.startSet_){const _=f.startAfterSet_?"startAfter":"startAt";l[_]=(0,ie.Wl)(f.indexStartValue_),f.startNameSet_&&(l[_]+=","+(0,ie.Wl)(f.indexStartName_))}if(f.endSet_){const _=f.endBeforeSet_?"endBefore":"endAt";l[_]=(0,ie.Wl)(f.indexEndValue_),f.endNameSet_&&(l[_]+=","+(0,ie.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?l.limitToFirst=f.limit_:l.limitToLast=f.limit_),l}function Ne(f){const l={};if(f.startSet_&&(l.sp=f.indexStartValue_,f.startNameSet_&&(l.sn=f.indexStartName_),l.sin=!f.startAfterSet_),f.endSet_&&(l.ep=f.indexEndValue_,f.endNameSet_&&(l.en=f.indexEndName_),l.ein=!f.endBeforeSet_),f.limitSet_){l.l=f.limit_;let c=f.viewFrom_;""===c&&(c=f.isViewFromLeft()?"l":"r"),l.vf=c}return f.index_!==ni&&(l.i=f.index_.toString()),l}class qt extends bs{constructor(l,c,_,S){super(),this.repoInfo_=l,this.onDataUpdate_=c,this.authTokenProvider_=_,this.appCheckTokenProvider_=S,this.log_=ot("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,c){return void 0!==c?"tag$"+c:((0,ie.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,c,_,S){const L=l._path.toString();this.log_("Listen called for "+L+" "+l._queryIdentifier);const Z=qt.getListenId_(l,_),me={};this.listens_[Z]=me;const Oe=ue(l._queryParams);this.restRequest_(L+".json",Oe,(qe,Rt)=>{let Gt=Rt;if(404===qe&&(Gt=null,qe=null),null===qe&&this.onDataUpdate_(L,Gt,!1,_),(0,ie.DV)(this.listens_,Z)===me){let Qt;Qt=qe?401===qe?"permission_denied":"rest_error:"+qe:"ok",S(Qt,null)}})}unlisten(l,c){const _=qt.getListenId_(l,c);delete this.listens_[_]}get(l){const c=ue(l._queryParams),_=l._path.toString(),S=new ie.BH;return this.restRequest_(_+".json",c,(L,Z)=>{let me=Z;404===L&&(me=null,L=null),null===L?(this.onDataUpdate_(_,me,!1,null),S.resolve(me)):S.reject(new Error(me))}),S.promise}refreshAuthToken(l){}restRequest_(l,c={},_){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([S,L])=>{S&&S.accessToken&&(c.auth=S.accessToken),L&&L.token&&(c.ac=L.token);const Z=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(c);this.log_("Sending REST request for "+Z);const me=new XMLHttpRequest;me.onreadystatechange=()=>{if(_&&4===me.readyState){this.log_("REST Response for "+Z+" received. status:",me.status,"response:",me.responseText);let Oe=null;if(me.status>=200&&me.status<300){try{Oe=(0,ie.cI)(me.responseText)}catch(qe){tt("Failed to parse JSON response for "+Z+": "+me.responseText)}_(null,Oe)}else 401!==me.status&&404!==me.status&&tt("Got unsuccessful REST response for "+Z+" Status: "+me.status),_(me.status);_=null}},me.open("GET",Z,!0),me.send()})}}class gi{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,c){this.rootNode_=this.rootNode_.updateChild(l,c)}}function z(){return{value:null,children:new Map}}function W(f,l,c){if(kt(l))f.value=c,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(l,c);else{const _=ar(l);f.children.has(_)||f.children.set(_,z()),W(f.children.get(_),l=Ar(l),c)}}function Ie(f,l,c){null!==f.value?c(l,f.value):function Fe(f,l){f.children.forEach((c,_)=>{l(_,c)})}(f,(_,S)=>{Ie(S,new Dr(l.toString()+"/"+_),c)})}class Ct{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),c=Object.assign({},l);return this.last_&&un(this.last_,(_,S)=>{c[_]=c[_]-S}),this.last_=l,c}}class cr{constructor(l,c){this.server_=c,this.statsToReport_={},this.statsListener_=new Ct(l);const _=1e4+2e4*Math.random();zn(this.reportStats_.bind(this),Math.floor(_))}reportStats_(){const l=this.statsListener_.get(),c={};let _=!1;un(l,(S,L)=>{L>0&&(0,ie.r3)(this.statsToReport_,S)&&(c[S]=L,_=!0)}),_&&this.server_.reportStats(c),zn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Kn=(()=>{return(f=Kn||(Kn={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Kn;var f})();function bi(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class Br{constructor(l,c,_){this.path=l,this.affectedTree=c,this.revert=_,this.type=Kn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(kt(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Dr(l));return new Br(wn(),c,this.revert)}}return(0,ie.hu)(ar(this.path)===l,"operationForChild called for unrelated child."),new Br(Ar(this.path),this.affectedTree,this.revert)}}class qi{constructor(l,c){this.source=l,this.path=c,this.type=Kn.LISTEN_COMPLETE}operationForChild(l){return kt(this.path)?new qi(this.source,wn()):new qi(this.source,Ar(this.path))}}class Ri{constructor(l,c,_){this.source=l,this.path=c,this.snap=_,this.type=Kn.OVERWRITE}operationForChild(l){return kt(this.path)?new Ri(this.source,wn(),this.snap.getImmediateChild(l)):new Ri(this.source,Ar(this.path),this.snap)}}class Ls{constructor(l,c,_){this.source=l,this.path=c,this.children=_,this.type=Kn.MERGE}operationForChild(l){if(kt(this.path)){const c=this.children.subtree(new Dr(l));return c.isEmpty()?null:c.value?new Ri(this.source,wn(),c.value):new Ls(this.source,wn(),c)}return(0,ie.hu)(ar(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new Ls(this.source,Ar(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class is{constructor(l,c,_){this.node_=l,this.fullyInitialized_=c,this.filtered_=_}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(kt(l))return this.isFullyInitialized()&&!this.filtered_;const c=ar(l);return this.isCompleteForChild(c)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class $i{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function Gs(f,l,c,_,S,L){const Z=_.filter(me=>me.type===c);Z.sort((me,Oe)=>function Xo(f,l,c){if(null==l.childName||null==c.childName)throw(0,ie.g5)("Should only compare child_ events.");const _=new kr(l.childName,l.snapshotNode),S=new kr(c.childName,c.snapshotNode);return f.index_.compare(_,S)}(f,me,Oe)),Z.forEach(me=>{const Oe=function Io(f,l,c){return"value"===l.type||"child_removed"===l.type||(l.prevName=c.getPredecessorChildName(l.childName,l.snapshotNode,f.index_)),l}(f,me,L);S.forEach(qe=>{qe.respondsTo(me.type)&&l.push(qe.createEvent(Oe,f.query_))})})}function Js(f,l){return{eventCache:f,serverCache:l}}function No(f,l,c,_){return Js(new is(l,c,_),f.serverCache)}function hs(f,l,c,_){return Js(f.eventCache,new is(l,c,_))}function ha(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function Oo(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let Ha;class xi{constructor(l,c=(()=>(Ha||(Ha=new li(qr)),Ha))()){this.value=l,this.children=c}static fromObject(l){let c=new xi(null);return un(l,(_,S)=>{c=c.set(new Dr(_),S)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,c){if(null!=this.value&&c(this.value))return{path:wn(),value:this.value};if(kt(l))return null;{const _=ar(l),S=this.children.get(_);if(null!==S){const L=S.findRootMostMatchingPathAndValue(Ar(l),c);return null!=L?{path:mt(new Dr(_),L.path),value:L.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(kt(l))return this;{const c=ar(l),_=this.children.get(c);return null!==_?_.subtree(Ar(l)):new xi(null)}}set(l,c){if(kt(l))return new xi(c,this.children);{const _=ar(l),L=(this.children.get(_)||new xi(null)).set(Ar(l),c),Z=this.children.insert(_,L);return new xi(this.value,Z)}}remove(l){if(kt(l))return this.children.isEmpty()?new xi(null):new xi(null,this.children);{const c=ar(l),_=this.children.get(c);if(_){const S=_.remove(Ar(l));let L;return L=S.isEmpty()?this.children.remove(c):this.children.insert(c,S),null===this.value&&L.isEmpty()?new xi(null):new xi(this.value,L)}return this}}get(l){if(kt(l))return this.value;{const c=ar(l),_=this.children.get(c);return _?_.get(Ar(l)):null}}setTree(l,c){if(kt(l))return c;{const _=ar(l),L=(this.children.get(_)||new xi(null)).setTree(Ar(l),c);let Z;return Z=L.isEmpty()?this.children.remove(_):this.children.insert(_,L),new xi(this.value,Z)}}fold(l){return this.fold_(wn(),l)}fold_(l,c){const _={};return this.children.inorderTraversal((S,L)=>{_[S]=L.fold_(mt(l,S),c)}),c(l,this.value,_)}findOnPath(l,c){return this.findOnPath_(l,wn(),c)}findOnPath_(l,c,_){const S=!!this.value&&_(c,this.value);if(S)return S;if(kt(l))return null;{const L=ar(l),Z=this.children.get(L);return Z?Z.findOnPath_(Ar(l),mt(c,L),_):null}}foreachOnPath(l,c){return this.foreachOnPath_(l,wn(),c)}foreachOnPath_(l,c,_){if(kt(l))return this;{this.value&&_(c,this.value);const S=ar(l),L=this.children.get(S);return L?L.foreachOnPath_(Ar(l),mt(c,S),_):new xi(null)}}foreach(l){this.foreach_(wn(),l)}foreach_(l,c){this.children.inorderTraversal((_,S)=>{S.foreach_(mt(l,_),c)}),this.value&&c(l,this.value)}foreachChild(l){this.children.inorderTraversal((c,_)=>{_.value&&l(c,_.value)})}}class co{constructor(l){this.writeTree_=l}static empty(){return new co(new xi(null))}}function ss(f,l,c){if(kt(l))return new co(new xi(c));{const _=f.writeTree_.findRootMostValueAndPath(l);if(null!=_){const S=_.path;let L=_.value;const Z=bn(S,l);return L=L.updateChild(Z,c),new co(f.writeTree_.set(S,L))}{const S=new xi(c),L=f.writeTree_.setTree(l,S);return new co(L)}}}function Es(f,l,c){let _=f;return un(c,(S,L)=>{_=ss(_,mt(l,S),L)}),_}function Pi(f,l){if(kt(l))return co.empty();{const c=f.writeTree_.setTree(l,new xi(null));return new co(c)}}function $o(f,l){return null!=Oa(f,l)}function Oa(f,l){const c=f.writeTree_.findRootMostValueAndPath(l);return null!=c?f.writeTree_.get(c.path).getChild(bn(c.path,l)):null}function fu(f){const l=[],c=f.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(ni,(_,S)=>{l.push(new kr(_,S))}):f.writeTree_.children.inorderTraversal((_,S)=>{null!=S.value&&l.push(new kr(_,S.value))}),l}function ta(f,l){if(kt(l))return f;{const c=Oa(f,l);return new co(null!=c?new xi(c):f.writeTree_.subtree(l))}}function pu(f){return f.writeTree_.isEmpty()}function To(f,l){return ws(wn(),f.writeTree_,l)}function ws(f,l,c){if(null!=l.value)return c.updateChild(f,l.value);{let _=null;return l.children.inorderTraversal((S,L)=>{".priority"===S?((0,ie.hu)(null!==L.value,"Priority writes must always be leaf nodes"),_=L.value):c=ws(mt(f,S),L,c)}),!c.getChild(f).isEmpty()&&null!==_&&(c=c.updateChild(mt(f,".priority"),_)),c}}function Zo(f,l){return Qo(l,f)}function Go(f,l){if(f.snap)return Tr(f.path,l);for(const c in f.children)if(f.children.hasOwnProperty(c)&&Tr(mt(f.path,c),l))return!0;return!1}function rl(f){return f.visible}function Uu(f,l,c){let _=co.empty();for(let S=0;S<f.length;++S){const L=f[S];if(l(L)){const Z=L.path;let me;if(L.snap)Tr(c,Z)?(me=bn(c,Z),_=ss(_,me,L.snap)):Tr(Z,c)&&(me=bn(Z,c),_=ss(_,wn(),L.snap.getChild(me)));else{if(!L.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(Tr(c,Z))me=bn(c,Z),_=Es(_,me,L.children);else if(Tr(Z,c))if(me=bn(Z,c),kt(me))_=Es(_,wn(),L.children);else{const Oe=(0,ie.DV)(L.children,ar(me));if(Oe){const qe=Oe.getChild(Ar(me));_=ss(_,wn(),qe)}}}}}return _}function bo(f,l,c,_,S){if(_||S){const L=ta(f.visibleWrites,l);return!S&&pu(L)?c:S||null!=c||$o(L,wn())?To(Uu(f.allWrites,function(qe){return(qe.visible||S)&&(!_||!~_.indexOf(qe.writeId))&&(Tr(qe.path,l)||Tr(l,qe.path))},l),c||F.EMPTY_NODE):null}{const L=Oa(f.visibleWrites,l);if(null!=L)return L;{const Z=ta(f.visibleWrites,l);return pu(Z)?c:null!=c||$o(Z,wn())?To(Z,c||F.EMPTY_NODE):null}}}function eo(f,l,c,_){return bo(f.writeTree,f.treePath,l,c,_)}function fs(f,l){return function Du(f,l,c){let _=F.EMPTY_NODE;const S=Oa(f.visibleWrites,l);if(S)return S.isLeafNode()||S.forEachChild(ni,(L,Z)=>{_=_.updateImmediateChild(L,Z)}),_;if(c){const L=ta(f.visibleWrites,l);return c.forEachChild(ni,(Z,me)=>{const Oe=To(ta(L,new Dr(Z)),me);_=_.updateImmediateChild(Z,Oe)}),fu(L).forEach(Z=>{_=_.updateImmediateChild(Z.name,Z.node)}),_}return fu(ta(f.visibleWrites,l)).forEach(Z=>{_=_.updateImmediateChild(Z.name,Z.node)}),_}(f.writeTree,f.treePath,l)}function _o(f,l,c,_){return function gu(f,l,c,_,S){(0,ie.hu)(_||S,"Either existingEventSnap or existingServerSnap must exist");const L=mt(l,c);if($o(f.visibleWrites,L))return null;{const Z=ta(f.visibleWrites,L);return pu(Z)?S.getChild(c):To(Z,S.getChild(c))}}(f.writeTree,f.treePath,l,c,_)}function fa(f,l){return function mu(f,l){return Oa(f.visibleWrites,l)}(f.writeTree,mt(f.treePath,l))}function Yo(f,l,c){return function Ja(f,l,c,_){const S=mt(l,c),L=Oa(f.visibleWrites,S);return null!=L?L:_.isCompleteForChild(c)?To(ta(f.visibleWrites,S),_.getNode().getImmediateChild(c)):null}(f.writeTree,f.treePath,l,c)}function yu(f,l){return Qo(mt(f.treePath,l),f.writeTree)}function Qo(f,l){return{treePath:f,writeTree:l}}class _u{constructor(){this.changeMap=new Map}trackChildChange(l){const c=l.type,_=l.childName;(0,ie.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==_,"Only non-priority child changes can be tracked.");const S=this.changeMap.get(_);if(S){const L=S.type;if("child_added"===c&&"child_removed"===L)this.changeMap.set(_,Mr(_,l.snapshotNode,S.snapshotNode));else if("child_removed"===c&&"child_added"===L)this.changeMap.delete(_);else if("child_removed"===c&&"child_changed"===L)this.changeMap.set(_,yr(_,S.oldSnap));else if("child_changed"===c&&"child_added"===L)this.changeMap.set(_,Vr(_,l.snapshotNode));else{if("child_changed"!==c||"child_changed"!==L)throw(0,ie.g5)("Illegal combination of changes: "+l+" occurred after "+S);this.changeMap.set(_,Mr(_,l.snapshotNode,S.oldSnap))}}else this.changeMap.set(_,l)}getChanges(){return Array.from(this.changeMap.values())}}const vu=new class Su{getCompleteChild(l){return null}getChildAfterChild(l,c,_){return null}};class pa{constructor(l,c,_=null){this.writes_=l,this.viewCache_=c,this.optCompleteServerCache_=_}getCompleteChild(l){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(l))return c.getNode().getImmediateChild(l);{const _=null!=this.optCompleteServerCache_?new is(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yo(this.writes_,l,_)}}getChildAfterChild(l,c,_){const S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Oo(this.viewCache_),L=function ka(f,l,c,_,S,L){return function nc(f,l,c,_,S,L,Z){let me;const Oe=ta(f.visibleWrites,l),qe=Oa(Oe,wn());if(null!=qe)me=qe;else{if(null==c)return[];me=To(Oe,c)}if(me=me.withIndex(Z),me.isEmpty()||me.isLeafNode())return[];{const Rt=[],Gt=Z.getCompare(),Qt=L?me.getReverseIteratorFrom(_,Z):me.getIteratorFrom(_,Z);let Yn=Qt.getNext();for(;Yn&&Rt.length<S;)0!==Gt(Yn,_)&&Rt.push(Yn),Yn=Qt.getNext();return Rt}}(f.writeTree,f.treePath,l,c,_,S,L)}(this.writes_,S,c,1,_,l);return 0===L.length?null:L[0]}}function Hu(f,l,c,_,S,L){const Z=l.eventCache;if(null!=fa(_,c))return l;{let me,Oe;if(kt(c))if((0,ie.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const qe=Oo(l),Gt=fs(_,qe instanceof F?qe:F.EMPTY_NODE);me=f.filter.updateFullNode(l.eventCache.getNode(),Gt,L)}else{const qe=eo(_,Oo(l));me=f.filter.updateFullNode(l.eventCache.getNode(),qe,L)}else{const qe=ar(c);if(".priority"===qe){(0,ie.hu)(1===Oi(c),"Can't have a priority with additional path components");const Rt=Z.getNode();Oe=l.serverCache.getNode();const Gt=_o(_,c,Rt,Oe);me=null!=Gt?f.filter.updatePriority(Rt,Gt):Z.getNode()}else{const Rt=Ar(c);let Gt;if(Z.isCompleteForChild(qe)){Oe=l.serverCache.getNode();const Qt=_o(_,c,Z.getNode(),Oe);Gt=null!=Qt?Z.getNode().getImmediateChild(qe).updateChild(Rt,Qt):Z.getNode().getImmediateChild(qe)}else Gt=Yo(_,qe,l.serverCache);me=null!=Gt?f.filter.updateChild(Z.getNode(),qe,Gt,Rt,S,L):Z.getNode()}}return No(l,me,Z.isFullyInitialized()||kt(c),f.filter.filtersNodes())}}function x(f,l,c,_,S,L,Z,me){const Oe=l.serverCache;let qe;const Rt=Z?f.filter:f.filter.getIndexedFilter();if(kt(c))qe=Rt.updateFullNode(Oe.getNode(),_,null);else if(Rt.filtersNodes()&&!Oe.isFiltered()){const Yn=Oe.getNode().updateChild(c,_);qe=Rt.updateFullNode(Oe.getNode(),Yn,null)}else{const Yn=ar(c);if(!Oe.isCompleteForPath(c)&&Oi(c)>1)return l;const Sr=Ar(c),Ta=Oe.getNode().getImmediateChild(Yn).updateChild(Sr,_);qe=".priority"===Yn?Rt.updatePriority(Oe.getNode(),Ta):Rt.updateChild(Oe.getNode(),Yn,Ta,Sr,vu,null)}const Gt=hs(l,qe,Oe.isFullyInitialized()||kt(c),Rt.filtersNodes());return Hu(f,Gt,c,S,new pa(S,Gt,L),me)}function b(f,l,c,_,S,L,Z){const me=l.eventCache;let Oe,qe;const Rt=new pa(S,l,L);if(kt(c))qe=f.filter.updateFullNode(l.eventCache.getNode(),_,Z),Oe=No(l,qe,!0,f.filter.filtersNodes());else{const Gt=ar(c);if(".priority"===Gt)qe=f.filter.updatePriority(l.eventCache.getNode(),_),Oe=No(l,qe,me.isFullyInitialized(),me.isFiltered());else{const Qt=Ar(c),Yn=me.getNode().getImmediateChild(Gt);let Sr;if(kt(Qt))Sr=_;else{const ds=Rt.getCompleteChild(Gt);Sr=null!=ds?".priority"===ai(Qt)&&ds.getChild(st(Qt)).isEmpty()?ds:ds.updateChild(Qt,_):F.EMPTY_NODE}Oe=Yn.equals(Sr)?l:No(l,f.filter.updateChild(me.getNode(),Gt,Sr,Qt,Rt,Z),me.isFullyInitialized(),f.filter.filtersNodes())}}return Oe}function I(f,l){return f.eventCache.isCompleteForChild(l)}function Y(f,l,c){return c.foreach((_,S)=>{l=l.updateChild(_,S)}),l}function le(f,l,c,_,S,L,Z,me){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let qe,Oe=l;qe=kt(c)?_:new xi(null).setTree(c,_);const Rt=l.serverCache.getNode();return qe.children.inorderTraversal((Gt,Qt)=>{if(Rt.hasChild(Gt)){const Sr=Y(0,l.serverCache.getNode().getImmediateChild(Gt),Qt);Oe=x(f,Oe,new Dr(Gt),Sr,S,L,Z,me)}}),qe.children.inorderTraversal((Gt,Qt)=>{const Yn=!l.serverCache.isCompleteForChild(Gt)&&null===Qt.value;if(!Rt.hasChild(Gt)&&!Yn){const ds=Y(0,l.serverCache.getNode().getImmediateChild(Gt),Qt);Oe=x(f,Oe,new Dr(Gt),ds,S,L,Z,me)}}),Oe}class en{constructor(l,c){this.query_=l,this.eventRegistrations_=[];const _=this.query_._queryParams,S=new Si(_.getIndex()),L=function ur(f){return f.loadsAllData()?new Si(f.getIndex()):f.hasLimit()?new yo(f):new ii(f)}(_);this.processor_=function Bu(f){return{filter:f}}(L);const Z=c.serverCache,me=c.eventCache,Oe=S.updateFullNode(F.EMPTY_NODE,Z.getNode(),null),qe=L.updateFullNode(F.EMPTY_NODE,me.getNode(),null),Rt=new is(Oe,Z.isFullyInitialized(),S.filtersNodes()),Gt=new is(qe,me.isFullyInitialized(),L.filtersNodes());this.viewCache_=Js(Gt,Rt),this.eventGenerator_=new $i(this.query_)}get query(){return this.query_}}function ln(f,l){const c=Oo(f.viewCache_);return c&&(f.query._queryParams.loadsAllData()||!kt(l)&&!c.getImmediateChild(ar(l)).isEmpty())?c.getChild(l):null}function gn(f){return 0===f.eventRegistrations_.length}function _n(f,l,c){const _=[];if(c){(0,ie.hu)(null==l,"A cancel should cancel all event registrations.");const S=f.query._path;f.eventRegistrations_.forEach(L=>{const Z=L.createCancelEvent(c,S);Z&&_.push(Z)})}if(l){let S=[];for(let L=0;L<f.eventRegistrations_.length;++L){const Z=f.eventRegistrations_[L];if(Z.matches(l)){if(l.hasAnyCallback()){S=S.concat(f.eventRegistrations_.slice(L+1));break}}else S.push(Z)}f.eventRegistrations_=S}else f.eventRegistrations_=[];return _}function yt(f,l,c,_){l.type===Kn.MERGE&&null!==l.source.queryId&&((0,ie.hu)(Oo(f.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(ha(f.viewCache_),"Missing event cache, even though we have a server cache"));const S=f.viewCache_,L=function ju(f,l,c,_,S){const L=new _u;let Z,me;if(c.type===Kn.OVERWRITE){const qe=c;qe.source.fromUser?Z=b(f,l,qe.path,qe.snap,_,S,L):((0,ie.hu)(qe.source.fromServer,"Unknown source."),me=qe.source.tagged||l.serverCache.isFiltered()&&!kt(qe.path),Z=x(f,l,qe.path,qe.snap,_,S,me,L))}else if(c.type===Kn.MERGE){const qe=c;qe.source.fromUser?Z=function U(f,l,c,_,S,L,Z){let me=l;return _.foreach((Oe,qe)=>{const Rt=mt(c,Oe);I(l,ar(Rt))&&(me=b(f,me,Rt,qe,S,L,Z))}),_.foreach((Oe,qe)=>{const Rt=mt(c,Oe);I(l,ar(Rt))||(me=b(f,me,Rt,qe,S,L,Z))}),me}(f,l,qe.path,qe.children,_,S,L):((0,ie.hu)(qe.source.fromServer,"Unknown source."),me=qe.source.tagged||l.serverCache.isFiltered(),Z=le(f,l,qe.path,qe.children,_,S,me,L))}else if(c.type===Kn.ACK_USER_WRITE){const qe=c;Z=qe.revert?function $e(f,l,c,_,S,L){let Z;if(null!=fa(_,c))return l;{const me=new pa(_,l,S),Oe=l.eventCache.getNode();let qe;if(kt(c)||".priority"===ar(c)){let Rt;if(l.serverCache.isFullyInitialized())Rt=eo(_,Oo(l));else{const Gt=l.serverCache.getNode();(0,ie.hu)(Gt instanceof F,"serverChildren would be complete if leaf node"),Rt=fs(_,Gt)}qe=f.filter.updateFullNode(Oe,Rt,L)}else{const Rt=ar(c);let Gt=Yo(_,Rt,l.serverCache);null==Gt&&l.serverCache.isCompleteForChild(Rt)&&(Gt=Oe.getImmediateChild(Rt)),qe=null!=Gt?f.filter.updateChild(Oe,Rt,Gt,Ar(c),me,L):l.eventCache.getNode().hasChild(Rt)?f.filter.updateChild(Oe,Rt,F.EMPTY_NODE,Ar(c),me,L):Oe,qe.isEmpty()&&l.serverCache.isFullyInitialized()&&(Z=eo(_,Oo(l)),Z.isLeafNode()&&(qe=f.filter.updateFullNode(qe,Z,L)))}return Z=l.serverCache.isFullyInitialized()||null!=fa(_,wn()),No(l,qe,Z,f.filter.filtersNodes())}}(f,l,qe.path,_,S,L):function Re(f,l,c,_,S,L,Z){if(null!=fa(S,c))return l;const me=l.serverCache.isFiltered(),Oe=l.serverCache;if(null!=_.value){if(kt(c)&&Oe.isFullyInitialized()||Oe.isCompleteForPath(c))return x(f,l,c,Oe.getNode().getChild(c),S,L,me,Z);if(kt(c)){let qe=new xi(null);return Oe.getNode().forEachChild(ki,(Rt,Gt)=>{qe=qe.set(new Dr(Rt),Gt)}),le(f,l,c,qe,S,L,me,Z)}return l}{let qe=new xi(null);return _.foreach((Rt,Gt)=>{const Qt=mt(c,Rt);Oe.isCompleteForPath(Qt)&&(qe=qe.set(Rt,Oe.getNode().getChild(Qt)))}),le(f,l,c,qe,S,L,me,Z)}}(f,l,qe.path,qe.affectedTree,_,S,L)}else{if(c.type!==Kn.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+c.type);Z=function We(f,l,c,_,S){const L=l.serverCache;return Hu(f,hs(l,L.getNode(),L.isFullyInitialized()||kt(c),L.isFiltered()),c,_,vu,S)}(f,l,c.path,_,L)}const Oe=L.getChanges();return function Fa(f,l,c){const _=l.eventCache;if(_.isFullyInitialized()){const S=_.getNode().isLeafNode()||_.getNode().isEmpty(),L=ha(f);(c.length>0||!f.eventCache.isFullyInitialized()||S&&!_.getNode().equals(L)||!_.getNode().getPriority().equals(L.getPriority()))&&c.push(Fr(ha(l)))}}(l,Z,Oe),{viewCache:Z,changes:Oe}}(f.processor_,S,l,c,_);return function Xa(f,l){(0,ie.hu)(l.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(l.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,L.viewCache),(0,ie.hu)(L.viewCache.serverCache.isFullyInitialized()||!S.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=L.viewCache,Qr(f,L.changes,L.viewCache.eventCache.getNode(),null)}function Qr(f,l,c,_){return function Zi(f,l,c,_){const S=[],L=[];return l.forEach(Z=>{"child_changed"===Z.type&&f.index_.indexedValueChanged(Z.oldSnap,Z.snapshotNode)&&L.push(function Mi(f,l){return{type:"child_moved",snapshotNode:l,childName:f}}(Z.childName,Z.snapshotNode))}),Gs(f,S,"child_removed",l,_,c),Gs(f,S,"child_added",l,_,c),Gs(f,S,"child_moved",L,_,c),Gs(f,S,"child_changed",l,_,c),Gs(f,S,"value",l,_,c),S}(f.eventGenerator_,l,c,_?[_]:f.eventRegistrations_)}let ra,dr;class ga{constructor(){this.views=new Map}}function Ga(f,l,c,_){const S=l.source.queryId;if(null!==S){const L=f.views.get(S);return(0,ie.hu)(null!=L,"SyncTree gave us an op for an invalid query."),yt(L,l,c,_)}{let L=[];for(const Z of f.views.values())L=L.concat(yt(Z,l,c,_));return L}}function Au(f,l,c,_,S){const Z=f.views.get(l._queryIdentifier);if(!Z){let me=eo(c,S?_:null),Oe=!1;me?Oe=!0:_ instanceof F?(me=fs(c,_),Oe=!1):(me=F.EMPTY_NODE,Oe=!1);const qe=Js(new is(me,Oe,!1),new is(_,S,!1));return new en(l,qe)}return Z}function yl(f){const l=[];for(const c of f.views.values())c.query._queryParams.loadsAllData()||l.push(c);return l}function eu(f,l){let c=null;for(const _ of f.views.values())c=c||ln(_,l);return c}function $r(f,l){return l._queryParams.loadsAllData()?os(f):f.views.get(l._queryIdentifier)}function tu(f,l){return null!=$r(f,l)}function ba(f){return null!=os(f)}function os(f){for(const l of f.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let Vs=1;class Yi{constructor(l){this.listenProvider_=l,this.syncPointTree_=new xi(null),this.pendingWriteTree_=function Xs(){return{visibleWrites:co.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function In(f,l,c,_,S){return function cs(f,l,c,_,S){(0,ie.hu)(_>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),f.allWrites.push({path:l,snap:c,writeId:_,visible:S}),S&&(f.visibleWrites=ss(f.visibleWrites,l,c)),f.lastWriteId=_}(f.pendingWriteTree_,l,c,_,S),S?Va(f,new Ri({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,c)):[]}function ia(f,l,c=!1){const _=function bu(f,l){for(let c=0;c<f.allWrites.length;c++){const _=f.allWrites[c];if(_.writeId===l)return _}return null}(f.pendingWriteTree_,l);if(function ho(f,l){const c=f.allWrites.findIndex(me=>me.writeId===l);(0,ie.hu)(c>=0,"removeWrite called with nonexistent writeId.");const _=f.allWrites[c];f.allWrites.splice(c,1);let S=_.visible,L=!1,Z=f.allWrites.length-1;for(;S&&Z>=0;){const me=f.allWrites[Z];me.visible&&(Z>=c&&Go(me,_.path)?S=!1:Tr(_.path,me.path)&&(L=!0)),Z--}return!!S&&(L?(function si(f){f.visibleWrites=Uu(f.allWrites,rl,wn()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(_.snap?f.visibleWrites=Pi(f.visibleWrites,_.path):un(_.children,Oe=>{f.visibleWrites=Pi(f.visibleWrites,mt(_.path,Oe))}),!0))}(f.pendingWriteTree_,l)){let L=new xi(null);return null!=_.snap?L=L.set(wn(),!0):un(_.children,Z=>{L=L.set(new Dr(Z),!0)}),Va(f,new Br(_.path,L,c))}return[]}function Cs(f,l,c){return Va(f,new Ri({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,c))}function ya(f,l,c,_,S=!1){const L=l._path,Z=f.syncPointTree_.get(L);let me=[];if(Z&&("default"===l._queryIdentifier||tu(Z,l))){const Oe=function ps(f,l,c,_){const S=l._queryIdentifier,L=[];let Z=[];const me=ba(f);if("default"===S)for(const[Oe,qe]of f.views.entries())Z=Z.concat(_n(qe,c,_)),gn(qe)&&(f.views.delete(Oe),qe.query._queryParams.loadsAllData()||L.push(qe.query));else{const Oe=f.views.get(S);Oe&&(Z=Z.concat(_n(Oe,c,_)),gn(Oe)&&(f.views.delete(S),Oe.query._queryParams.loadsAllData()||L.push(Oe.query)))}return me&&!ba(f)&&L.push(new(function jl(){return(0,ie.hu)(ra,"Reference.ts has not been loaded"),ra}())(l._repo,l._path)),{removed:L,events:Z}}(Z,l,c,_);(function $u(f){return 0===f.views.size})(Z)&&(f.syncPointTree_=f.syncPointTree_.remove(L));const qe=Oe.removed;if(me=Oe.events,!S){const Rt=-1!==qe.findIndex(Qt=>Qt._queryParams.loadsAllData()),Gt=f.syncPointTree_.findOnPath(L,(Qt,Yn)=>ba(Yn));if(Rt&&!Gt){const Qt=f.syncPointTree_.subtree(L);if(!Qt.isEmpty()){const Yn=function ic(f){return f.fold((l,c,_)=>{if(c&&ba(c))return[os(c)];{let S=[];return c&&(S=yl(c)),un(_,(L,Z)=>{S=S.concat(Z)}),S}})}(Qt);for(let Sr=0;Sr<Yn.length;++Sr){const ds=Yn[Sr],Ta=ds.query,so=vt(f,ds);f.listenProvider_.startListening(zo(Ta),za(f,Ta),so.hashFn,so.onComplete)}}}!Gt&&qe.length>0&&!_&&(Rt?f.listenProvider_.stopListening(zo(l),null):qe.forEach(Qt=>{const Yn=f.queryToTagMap.get(So(Qt));f.listenProvider_.stopListening(zo(Qt),Yn)}))}!function El(f,l){for(let c=0;c<l.length;++c){const _=l[c];if(!_._queryParams.loadsAllData()){const S=So(_),L=f.queryToTagMap.get(S);f.queryToTagMap.delete(S),f.tagToQueryMap.delete(L)}}}(f,qe)}return me}function Mu(f,l,c,_){const S=Eu(f,_);if(null!=S){const L=_a(S),Z=L.path,me=L.queryId,Oe=bn(Z,l);return sa(f,Z,new Ri(bi(me),Oe,c))}return[]}function Do(f,l,c,_=!1){const S=l._path;let L=null,Z=!1;f.syncPointTree_.foreachOnPath(S,(Qt,Yn)=>{const Sr=bn(Qt,S);L=L||eu(Yn,Sr),Z=Z||ba(Yn)});let Oe,me=f.syncPointTree_.get(S);me?(Z=Z||ba(me),L=L||eu(me,wn())):(me=new ga,f.syncPointTree_=f.syncPointTree_.set(S,me)),null!=L?Oe=!0:(Oe=!1,L=F.EMPTY_NODE,f.syncPointTree_.subtree(S).foreachChild((Yn,Sr)=>{const ds=eu(Sr,wn());ds&&(L=L.updateImmediateChild(Yn,ds))}));const qe=tu(me,l);if(!qe&&!l._queryParams.loadsAllData()){const Qt=So(l);(0,ie.hu)(!f.queryToTagMap.has(Qt),"View does not exist, but we have a tag");const Yn=function oa(){return Vs++}();f.queryToTagMap.set(Qt,Yn),f.tagToQueryMap.set(Yn,Qt)}let Gt=function rc(f,l,c,_,S,L){const Z=Au(f,l,_,S,L);return f.views.has(l._queryIdentifier)||f.views.set(l._queryIdentifier,Z),function na(f,l){f.eventRegistrations_.push(l)}(Z,c),function Zt(f,l){const c=f.viewCache_.eventCache,_=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(ni,(L,Z)=>{_.push(Vr(L,Z))}),c.isFullyInitialized()&&_.push(Fr(c.getNode())),Qr(f,_,c.getNode(),l)}(Z,c)}(me,l,c,Zo(f.pendingWriteTree_,S),L,Oe);if(!qe&&!Z&&!_){const Qt=$r(me,l);Gt=Gt.concat(function xu(f,l,c){const _=l._path,S=za(f,l),L=vt(f,c),Z=f.listenProvider_.startListening(zo(l),S,L.hashFn,L.onComplete),me=f.syncPointTree_.subtree(_);if(S)(0,ie.hu)(!ba(me.value),"If we're adding a query, it shouldn't be shadowed");else{const Oe=me.fold((qe,Rt,Gt)=>{if(!kt(qe)&&Rt&&ba(Rt))return[os(Rt).query];{let Qt=[];return Rt&&(Qt=Qt.concat(yl(Rt).map(Yn=>Yn.query))),un(Gt,(Yn,Sr)=>{Qt=Qt.concat(Sr)}),Qt}});for(let qe=0;qe<Oe.length;++qe){const Rt=Oe[qe];f.listenProvider_.stopListening(zo(Rt),za(f,Rt))}}return Z}(f,l,Qt))}return Gt}function Wu(f,l,c){const S=f.pendingWriteTree_,L=f.syncPointTree_.findOnPath(l,(Z,me)=>{const qe=eu(me,bn(Z,l));if(qe)return qe});return bo(S,l,L,c,!0)}function Va(f,l){return Ps(l,f.syncPointTree_,null,Zo(f.pendingWriteTree_,wn()))}function Ps(f,l,c,_){if(kt(f.path))return nu(f,l,c,_);{const S=l.get(wn());null==c&&null!=S&&(c=eu(S,wn()));let L=[];const Z=ar(f.path),me=f.operationForChild(Z),Oe=l.children.get(Z);if(Oe&&me){const qe=c?c.getImmediateChild(Z):null,Rt=yu(_,Z);L=L.concat(Ps(me,Oe,qe,Rt))}return S&&(L=L.concat(Ga(S,f,_,c))),L}}function nu(f,l,c,_){const S=l.get(wn());null==c&&null!=S&&(c=eu(S,wn()));let L=[];return l.children.inorderTraversal((Z,me)=>{const Oe=c?c.getImmediateChild(Z):null,qe=yu(_,Z),Rt=f.operationForChild(Z);Rt&&(L=L.concat(nu(Rt,me,Oe,qe)))}),S&&(L=L.concat(Ga(S,f,_,c))),L}function vt(f,l){const c=l.query,_=za(f,c);return{hashFn:()=>(function _r(f){return f.viewCache_.serverCache.getNode()}(l)||F.EMPTY_NODE).hash(),onComplete:S=>{if("ok"===S)return _?function Ru(f,l,c){const _=Eu(f,c);if(_){const S=_a(_),L=S.path,Z=S.queryId,me=bn(L,l);return sa(f,L,new qi(bi(Z),me))}return[]}(f,c._path,_):function zu(f,l){return Va(f,new qi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(f,c._path);{const L=function De(f,l){let c="Unknown Error";"too_big"===f?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?c="Client doesn't have permission to access the desired data.":"unavailable"===f&&(c="The service is unavailable");const _=new Error(f+" at "+l._path.toString()+": "+c);return _.code=f.toUpperCase(),_}(S,c);return ya(f,c,null,L)}}}}function za(f,l){const c=So(l);return f.queryToTagMap.get(c)}function So(f){return f._path.toString()+"$"+f._queryIdentifier}function Eu(f,l){return f.tagToQueryMap.get(l)}function _a(f){const l=f.indexOf("$");return(0,ie.hu)(-1!==l&&l<f.length-1,"Bad queryKey."),{queryId:f.substr(l+1),path:new Dr(f.substr(0,l))}}function sa(f,l,c){const _=f.syncPointTree_.get(l);return(0,ie.hu)(_,"Missing sync point for query tag that we're tracking"),Ga(_,c,Zo(f.pendingWriteTree_,l),null)}function zo(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function Ni(){return(0,ie.hu)(dr,"Reference.ts has not been loaded"),dr}())(f._repo,f._path):f}class Da{constructor(l){this.node_=l}getImmediateChild(l){const c=this.node_.getImmediateChild(l);return new Da(c)}node(){return this.node_}}class to{constructor(l,c){this.syncTree_=l,this.path_=c}getImmediateChild(l){const c=mt(this.path_,l);return new to(this.syncTree_,c)}node(){return Wu(this.syncTree_,this.path_)}}const Jo=function(f,l,c){return f&&"object"==typeof f?((0,ie.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?il(f[".sv"],l,c):"object"==typeof f[".sv"]?Ao(f[".sv"],l):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},il=function(f,l,c){if("timestamp"===f)return c.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+f)},Ao=function(f,l,c){f.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const _=f.increment;"number"!=typeof _&&(0,ie.hu)(!1,"Unexpected increment value: "+_);const S=l.node();if((0,ie.hu)(null!=S,"Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return _;const Z=S.getValue();return"number"!=typeof Z?_:Z+_},Sa=function(f,l,c,_){return Aa(l,new to(c,f),_)},Wa=function(f,l,c){return Aa(f,new Da(l),c)};function Aa(f,l,c){const _=f.getPriority().val(),S=Jo(_,l.getImmediateChild(".priority"),c);let L;if(f.isLeafNode()){const Z=f,me=Jo(Z.getValue(),l,c);return me!==Z.getValue()||S!==Z.getPriority().val()?new go(me,ke(S)):f}{const Z=f;return L=Z,S!==Z.getPriority().val()&&(L=L.updatePriority(new go(S))),Z.forEachChild(ni,(me,Oe)=>{const qe=Aa(Oe,l.getImmediateChild(me),c);qe!==Oe&&(L=L.updateImmediateChild(me,qe))}),L}}class Ua{constructor(l="",c=null,_={children:{},childCount:0}){this.name=l,this.parent=c,this.node=_}}function iu(f,l){let c=l instanceof Dr?l:new Dr(l),_=f,S=ar(c);for(;null!==S;){const L=(0,ie.DV)(_.node.children,S)||{children:{},childCount:0};_=new Ua(S,_,L),c=Ar(c),S=ar(c)}return _}function Ka(f){return f.node.value}function zs(f,l){f.node.value=l,sl(f)}function wl(f){return f.node.childCount>0}function Ku(f,l){un(f.node.children,(c,_)=>{l(new Ua(c,f,_))})}function qu(f,l,c,_){c&&!_&&l(f),Ku(f,S=>{qu(S,l,!0,_)}),c&&_&&l(f)}function Pu(f){return new Dr(null===f.parent?f.name:Pu(f.parent)+"/"+f.name)}function sl(f){null!==f.parent&&function Cl(f,l,c){const _=function wu(f){return void 0===Ka(f)&&!wl(f)}(c),S=(0,ie.r3)(f.node.children,l);_&&S?(delete f.node.children[l],f.node.childCount--,sl(f)):!_&&!S&&(f.node.children[l]=c.node,f.node.childCount++,sl(f))}(f.parent,f.name,f)}const Yu=/[\[\].#$\/\u0000-\u001F\u007F]/,Il=/[\[\].#$\u0000-\u001F\u007F]/,su=10485760,Nu=function(f){return"string"==typeof f&&0!==f.length&&!Yu.test(f)},q=function(f){return"string"==typeof f&&0!==f.length&&!Il.test(f)},re=function(f,l,c){const _=c instanceof Dr?new ui(c,f):c;if(void 0===l)throw new Error(f+"contains undefined "+Ds(_));if("function"==typeof l)throw new Error(f+"contains a function "+Ds(_)+" with contents = "+l.toString());if(It(l))throw new Error(f+"contains "+l.toString()+" "+Ds(_));if("string"==typeof l&&l.length>su/3&&(0,ie.ug)(l)>su)throw new Error(f+"contains a string greater than "+su+" utf8 bytes "+Ds(_)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let S=!1,L=!1;if(un(l,(Z,me)=>{if(".value"===Z)S=!0;else if(".priority"!==Z&&".sv"!==Z&&(L=!0,!Nu(Z)))throw new Error(f+" contains an invalid key ("+Z+") "+Ds(_)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ys(f,l){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(l),f.byteLength_+=(0,ie.ug)(l),Wi(f)})(_,Z),re(f,me,_),function vi(f){const l=f.parts_.pop();f.byteLength_-=(0,ie.ug)(l),f.parts_.length>0&&(f.byteLength_-=1)}(_)}),S&&L)throw new Error(f+' contains ".value" child '+Ds(_)+" in addition to actual children.")}},Le=function(f,l,c,_){if(_&&void 0===l)return;const S=(0,ie.gK)(f,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(S+" must be an object containing the children to replace.");const L=[];un(l,(Z,me)=>{const Oe=new Dr(Z);if(re(S,me,mt(c,Oe)),".priority"===ai(Oe)&&!function(f){return null===f||"string"==typeof f||"number"==typeof f&&!It(f)||f&&"object"==typeof f&&(0,ie.r3)(f,".sv")}(me))throw new Error(S+"contains an invalid value for '"+Oe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");L.push(Oe)}),function(f,l){let c,_;for(c=0;c<l.length;c++){_=l[c];const L=Ze(_);for(let Z=0;Z<L.length;Z++)if((".priority"!==L[Z]||Z!==L.length-1)&&!Nu(L[Z]))throw new Error(f+"contains an invalid key ("+L[Z]+") in path "+_.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(Rr);let S=null;for(c=0;c<l.length;c++){if(_=l[c],null!==S&&Tr(S,_))throw new Error(f+"contains a path "+S.toString()+" that is ancestor of another path "+_.toString());S=_}}(S,L)},jt=function(f,l,c,_){if(!(_&&void 0===c||q(c)))throw new Error((0,ie.gK)(f,l)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class ei{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bn(f,l){let c=null;for(let _=0;_<l.length;_++){const S=l[_],L=S.getPath();null!==c&&!fr(L,c.path)&&(f.eventLists_.push(c),c=null),null===c&&(c={events:[],path:L}),c.events.push(S)}c&&f.eventLists_.push(c)}function qn(f,l,c){Bn(f,c),Xi(f,_=>fr(_,l))}function Jr(f,l,c){Bn(f,c),Xi(f,_=>Tr(_,l)||Tr(l,_))}function Xi(f,l){f.recursionDepth_++;let c=!0;for(let _=0;_<f.eventLists_.length;_++){const S=f.eventLists_[_];S&&(l(S.path)?(ti(f.eventLists_[_]),f.eventLists_[_]=null):c=!1)}c&&(f.eventLists_=[]),f.recursionDepth_--}function ti(f){for(let l=0;l<f.events.length;l++){const c=f.events[l];if(null!==c){f.events[l]=null;const _=c.getEventRunner();dn&&Me("event: "+c.toString()),hn(_)}}}class Is{constructor(l,c,_,S){this.repoInfo_=l,this.forceRestClient_=c,this.authTokenProvider_=_,this.appCheckProvider_=S,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ei,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=z(),this.transactionQueueTree_=new Ua,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Di(f){const c=f.infoData_.getNode(new Dr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function mi(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:Di(f)})}function no(f,l,c,_,S){f.dataUpdateCount++;const L=new Dr(l);c=f.interceptServerDataCallback_?f.interceptServerDataCallback_(l,c):c;let Z=[];if(S)if(_){const Oe=(0,ie.UI)(c,qe=>ke(qe));Z=function _l(f,l,c,_){const S=Eu(f,_);if(S){const L=_a(S),Z=L.path,me=L.queryId,Oe=bn(Z,l),qe=xi.fromObject(c);return sa(f,Z,new Ls(bi(me),Oe,qe))}return[]}(f.serverSyncTree_,L,Oe,S)}else{const Oe=ke(c);Z=Mu(f.serverSyncTree_,L,Oe,S)}else if(_){const Oe=(0,ie.UI)(c,qe=>ke(qe));Z=function La(f,l,c){const _=xi.fromObject(c);return Va(f,new Ls({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,_))}(f.serverSyncTree_,L,Oe)}else{const Oe=ke(c);Z=Cs(f.serverSyncTree_,L,Oe)}let me=L;Z.length>0&&(me=Qn(f,L)),Jr(f.eventQueue_,me,Z)}function ro(f,l){Fo(f,"connected",l),!1===l&&function pr(f){we(f,"onDisconnectEvents");const l=mi(f),c=z();Ie(f.onDisconnect_,wn(),(S,L)=>{const Z=Sa(S,L,f.serverSyncTree_,l);W(c,S,Z)});let _=[];Ie(c,wn(),(S,L)=>{_=_.concat(Cs(f.serverSyncTree_,S,L));const Z=Cu(f,S);Qn(f,Z)}),f.onDisconnect_=z(),Jr(f.eventQueue_,wn(),_)}(f)}function Fo(f,l,c){const _=new Dr("/.info/"+l),S=ke(c);f.infoData_.updateSnapshot(_,S);const L=Cs(f.infoSyncTree_,_,S);Jr(f.eventQueue_,_,L)}function Lo(f){return f.nextWriteId_++}function D(f,l,c){let _;_=".info"===ar(l._path)?ya(f.infoSyncTree_,l,c):ya(f.serverSyncTree_,l,c),qn(f.eventQueue_,l._path,_)}function we(f,...l){let c="";f.persistentConnection_&&(c=f.persistentConnection_.id+":"),Me(c,...l)}function Be(f,l,c,_){l&&hn(()=>{if("ok"===c)l(null);else{const S=(c||"error").toUpperCase();let L=S;_&&(L+=": "+_);const Z=new Error(L);Z.code=S,l(Z)}})}function Ot(f,l,c){return Wu(f.serverSyncTree_,l,c)||F.EMPTY_NODE}function cn(f,l=f.transactionQueueTree_){if(l||Ts(f,l),Ka(l)){const c=Ro(f,l);(0,ie.hu)(c.length>0,"Sending zero length transaction queue"),c.every(S=>0===S.status)&&function mn(f,l,c){const _=c.map(qe=>qe.currentWriteId),S=Ot(f,l,_);let L=S;const Z=S.hash();for(let qe=0;qe<c.length;qe++){const Rt=c[qe];(0,ie.hu)(0===Rt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Rt.status=1,Rt.retryCount++;const Gt=bn(l,Rt.path);L=L.updateChild(Gt,Rt.currentOutputSnapshotRaw)}const me=L.val(!0),Oe=l;f.server_.put(Oe.toString(),me,qe=>{we(f,"transaction put response",{path:Oe.toString(),status:qe});let Rt=[];if("ok"===qe){const Gt=[];for(let Qt=0;Qt<c.length;Qt++)c[Qt].status=2,Rt=Rt.concat(ia(f.serverSyncTree_,c[Qt].currentWriteId)),c[Qt].onComplete&&Gt.push(()=>c[Qt].onComplete(null,!0,c[Qt].currentOutputSnapshotResolved)),c[Qt].unwatcher();Ts(f,iu(f.transactionQueueTree_,l)),cn(f,f.transactionQueueTree_),Jr(f.eventQueue_,l,Rt);for(let Qt=0;Qt<Gt.length;Qt++)hn(Gt[Qt])}else{if("datastale"===qe)for(let Gt=0;Gt<c.length;Gt++)c[Gt].status=3===c[Gt].status?4:0;else{tt("transaction at "+Oe.toString()+" failed: "+qe);for(let Gt=0;Gt<c.length;Gt++)c[Gt].status=4,c[Gt].abortReason=qe}Qn(f,l)}},Z)}(f,Pu(l),c)}else wl(l)&&Ku(l,c=>{cn(f,c)})}function Qn(f,l){const c=xr(f,l),_=Pu(c);return function Xr(f,l,c){if(0===l.length)return;const _=[];let S=[];const Z=l.filter(me=>0===me.status).map(me=>me.currentWriteId);for(let me=0;me<l.length;me++){const Oe=l[me],qe=bn(c,Oe.path);let Gt,Rt=!1;if((0,ie.hu)(null!==qe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Oe.status)Rt=!0,Gt=Oe.abortReason,S=S.concat(ia(f.serverSyncTree_,Oe.currentWriteId,!0));else if(0===Oe.status)if(Oe.retryCount>=25)Rt=!0,Gt="maxretry",S=S.concat(ia(f.serverSyncTree_,Oe.currentWriteId,!0));else{const Qt=Ot(f,Oe.path,Z);Oe.currentInputSnapshot=Qt;const Yn=l[me].update(Qt.val());if(void 0!==Yn){re("transaction failed: Data returned ",Yn,Oe.path);let Sr=ke(Yn);"object"==typeof Yn&&null!=Yn&&(0,ie.r3)(Yn,".priority")||(Sr=Sr.updatePriority(Qt.getPriority()));const Ta=Oe.currentWriteId,so=mi(f),Bi=Wa(Sr,Qt,so);Oe.currentOutputSnapshotRaw=Sr,Oe.currentOutputSnapshotResolved=Bi,Oe.currentWriteId=Lo(f),Z.splice(Z.indexOf(Ta),1),S=S.concat(In(f.serverSyncTree_,Oe.path,Bi,Oe.currentWriteId,Oe.applyLocally)),S=S.concat(ia(f.serverSyncTree_,Ta,!0))}else Rt=!0,Gt="nodata",S=S.concat(ia(f.serverSyncTree_,Oe.currentWriteId,!0))}Jr(f.eventQueue_,c,S),S=[],Rt&&(l[me].status=2,setTimeout(l[me].unwatcher,Math.floor(0)),l[me].onComplete&&_.push("nodata"===Gt?()=>l[me].onComplete(null,!1,l[me].currentInputSnapshot):()=>l[me].onComplete(new Error(Gt),!1,null)))}Ts(f,f.transactionQueueTree_);for(let me=0;me<_.length;me++)hn(_[me]);cn(f,f.transactionQueueTree_)}(f,Ro(f,c),_),_}function xr(f,l){let c,_=f.transactionQueueTree_;for(c=ar(l);null!==c&&void 0===Ka(_);)_=iu(_,c),c=ar(l=Ar(l));return _}function Ro(f,l){const c=[];return fo(f,l,c),c.sort((_,S)=>_.order-S.order),c}function fo(f,l,c){const _=Ka(l);if(_)for(let S=0;S<_.length;S++)c.push(_[S]);Ku(l,S=>{fo(f,S,c)})}function Ts(f,l){const c=Ka(l);if(c){let _=0;for(let S=0;S<c.length;S++)2!==c[S].status&&(c[_]=c[S],_++);c.length=_,zs(l,c.length>0?c:void 0)}Ku(l,_=>{Ts(f,_)})}function Cu(f,l){const c=Pu(xr(f,l)),_=iu(f.transactionQueueTree_,l);return function Zu(f,l,c){let _=c?f:f.parent;for(;null!==_;){if(l(_))return!0;_=_.parent}}(_,S=>{Gi(f,S)}),Gi(f,_),qu(_,S=>{Gi(f,S)}),c}function Gi(f,l){const c=Ka(l);if(c){const _=[];let S=[],L=-1;for(let Z=0;Z<c.length;Z++)3===c[Z].status||(1===c[Z].status?((0,ie.hu)(L===Z-1,"All SENT items should be at beginning of queue."),L=Z,c[Z].status=3,c[Z].abortReason="set"):((0,ie.hu)(0===c[Z].status,"Unexpected transaction status in abort"),c[Z].unwatcher(),S=S.concat(ia(f.serverSyncTree_,c[Z].currentWriteId,!0)),c[Z].onComplete&&_.push(c[Z].onComplete.bind(null,new Error("set"),!1,null))));-1===L?zs(l,void 0):c.length=L+1,Jr(f.eventQueue_,Pu(l),S);for(let Z=0;Z<_.length;Z++)hn(_[Z])}}const ol=function(f,l){const c=Hl(f),_=c.namespace;return"firebase.com"===c.domain&&ft(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!_||"undefined"===_)&&"localhost"!==c.domain&&ft("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new St(c.host,c.secure,_,"ws"===c.scheme||"wss"===c.scheme,l,"",_!==c.subdomain),path:new Dr(c.pathString)}},Hl=function(f){let l="",c="",_="",S="",L="",Z=!0,me="https",Oe=443;if("string"==typeof f){let qe=f.indexOf("//");qe>=0&&(me=f.substring(0,qe-1),f=f.substring(qe+2));let Rt=f.indexOf("/");-1===Rt&&(Rt=f.length);let Gt=f.indexOf("?");-1===Gt&&(Gt=f.length),l=f.substring(0,Math.min(Rt,Gt)),Rt<Gt&&(S=function Mo(f){let l="";const c=f.split("/");for(let _=0;_<c.length;_++)if(c[_].length>0){let S=c[_];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch(L){}l+="/"+S}return l}(f.substring(Rt,Gt)));const Qt=function Ba(f){const l={};"?"===f.charAt(0)&&(f=f.substring(1));for(const c of f.split("&")){if(0===c.length)continue;const _=c.split("=");2===_.length?l[decodeURIComponent(_[0])]=decodeURIComponent(_[1]):tt(`Invalid query segment '${c}' in query '${f}'`)}return l}(f.substring(Math.min(f.length,Gt)));qe=l.indexOf(":"),qe>=0?(Z="https"===me||"wss"===me,Oe=parseInt(l.substring(qe+1),10)):qe=l.length;const Yn=l.slice(0,qe);if("localhost"===Yn.toLowerCase())c="localhost";else if(Yn.split(".").length<=2)c=Yn;else{const Sr=l.indexOf(".");_=l.substring(0,Sr).toLowerCase(),c=l.substring(Sr+1),L=_}"ns"in Qt&&(L=Qt.ns)}return{host:l,port:Oe,domain:c,subdomain:_,secure:Z,scheme:me,pathString:S,namespace:L}};class yi{constructor(l,c,_,S){this.eventType=l,this.eventRegistration=c,this.snapshot=_,this.prevName=S}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Wl)(this.snapshot.exportVal())}}class Qi{constructor(l,c,_){this.eventRegistration=l,this.error=c,this.path=_}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ou{constructor(l,c){this.snapshotCallback=l,this.cancelCallback=c}onValue(l,c){this.snapshotCallback.call(null,l,c)}onCancel(l){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class wa{constructor(l,c,_,S){this._repo=l,this._path=c,this._queryParams=_,this._orderByCalled=S}get key(){return kt(this._path)?null:ai(this._path)}get ref(){return new Ma(this._repo,this._path)}get _queryIdentifier(){const l=Ne(this._queryParams),c=gr(l);return"{}"===c?"default":c}get _queryObject(){return Ne(this._queryParams)}isEqual(l){if(!((l=(0,ie.m9)(l))instanceof wa))return!1;const c=this._repo===l._repo,_=fr(this._path,l._path);return c&&_&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function rt(f){let l="";for(let c=f.pieceNum_;c<f.pieces_.length;c++)""!==f.pieces_[c]&&(l+="/"+encodeURIComponent(String(f.pieces_[c])));return l||"/"}(this._path)}}class Ma extends wa{constructor(l,c){super(l,c,new Fi,!1)}get parent(){const l=st(this._path);return null===l?null:new Ma(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class Ou{constructor(l,c,_){this._node=l,this.ref=c,this._index=_}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const c=new Dr(l),_=p(this.ref,l);return new Ou(this._node.getChild(c),_,ni)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(_,S)=>l(new Ou(S,p(this.ref,_),ni)))}hasChild(l){const c=new Dr(l);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Hd(f,l){return(f=(0,ie.m9)(f))._checkNotDeleted("ref"),void 0!==l?p(f._root,l):f._root}function p(f,l){return null===ar((f=(0,ie.m9)(f))._path)?(c=l,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),jt("child","path",c,!1)):jt("child","path",l,!1),new Ma(f._repo,mt(f._path,l));var c}function pe(f,l){(function(f,l){if(".info"===ar(l))throw new Error(f+" failed = Can't modify data under /.info/")})("set",(f=(0,ie.m9)(f))._path),function(f,l,c,_){_&&void 0===l||re((0,ie.gK)(f,"value"),l,c)}("set",l,f._path,!1);const c=new ie.BH;return function va(f,l,c,_,S){we(f,"set",{path:l.toString(),value:c,priority:_});const L=mi(f),Z=ke(c,_),me=Wu(f.serverSyncTree_,l),Oe=Wa(Z,me,L),qe=Lo(f),Rt=In(f.serverSyncTree_,l,Oe,qe,!0);Bn(f.eventQueue_,Rt),f.server_.put(l.toString(),Z.val(!0),(Qt,Yn)=>{const Sr="ok"===Qt;Sr||tt("set at "+l+" failed: "+Qt);const ds=ia(f.serverSyncTree_,qe,!Sr);Jr(f.eventQueue_,l,ds),Be(0,S,Qt,Yn)});const Gt=Cu(f,l);Qn(f,Gt),Jr(f.eventQueue_,Gt,[])}(f._repo,f._path,l,null,c.wrapCallback(()=>{})),c.promise}function fn(f,l){Le("update",l,f._path,!1);const c=new ie.BH;return function jn(f,l,c,_){we(f,"update",{path:l.toString(),value:c});let S=!0;const L=mi(f),Z={};if(un(c,(me,Oe)=>{S=!1,Z[me]=Sa(mt(l,me),ke(Oe),f.serverSyncTree_,L)}),S)Me("update() called with empty data.  Don't do anything."),Be(0,_,"ok",void 0);else{const me=Lo(f),Oe=function Gu(f,l,c,_){!function ko(f,l,c,_){(0,ie.hu)(_>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:l,children:c,writeId:_,visible:!0}),f.visibleWrites=Es(f.visibleWrites,l,c),f.lastWriteId=_}(f.pendingWriteTree_,l,c,_);const S=xi.fromObject(c);return Va(f,new Ls({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,S))}(f.serverSyncTree_,l,Z,me);Bn(f.eventQueue_,Oe),f.server_.merge(l.toString(),c,(qe,Rt)=>{const Gt="ok"===qe;Gt||tt("update at "+l+" failed: "+qe);const Qt=ia(f.serverSyncTree_,me,!Gt),Yn=Qt.length>0?Qn(f,l):l;Jr(f.eventQueue_,Yn,Qt),Be(0,_,qe,Rt)}),un(c,qe=>{const Rt=Cu(f,mt(l,qe));Qn(f,Rt)}),Jr(f.eventQueue_,l,[])}}(f._repo,f._path,l,c.wrapCallback(()=>{})),c.promise}function Fn(f){f=(0,ie.m9)(f);const l=new ou(()=>{}),c=new Cr(l);return function Vo(f,l,c){const _=function vl(f,l){const c=l._path;let _=null;f.syncPointTree_.foreachOnPath(c,(qe,Rt)=>{const Gt=bn(qe,c);_=_||eu(Rt,Gt)});let S=f.syncPointTree_.get(c);S?_=_||eu(S,wn()):(S=new ga,f.syncPointTree_=f.syncPointTree_.set(c,S));const L=null!=_,Z=L?new is(_,!0,!1):null;return function Zn(f){return ha(f.viewCache_)}(Au(S,l,Zo(f.pendingWriteTree_,l._path),L?Z.getNode():F.EMPTY_NODE,L))}(f.serverSyncTree_,l);return null!=_?Promise.resolve(_):f.server_.get(l).then(S=>{const L=ke(S).withIndex(l._queryParams.getIndex());let Z;if(Do(f.serverSyncTree_,l,c,!0),l._queryParams.loadsAllData())Z=Cs(f.serverSyncTree_,l._path,L);else{const me=za(f.serverSyncTree_,l);Z=Mu(f.serverSyncTree_,l._path,L,me)}return Jr(f.eventQueue_,l._path,Z),ya(f.serverSyncTree_,l,c,null,!0),L},S=>(we(f,"get for query "+(0,ie.Wl)(l)+" failed: "+S),Promise.reject(new Error(S))))}(f._repo,f,c).then(_=>new Ou(_,new Ma(f._repo,f._path),f._queryParams.getIndex()))}class Cr{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,c){const _=c._queryParams.getIndex();return new yi("value",this,new Ou(l.snapshotNode,new Ma(c._repo,c._path),_))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Qi(this,l,c):null}matches(l){return l instanceof Cr&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Pr{constructor(l,c){this.eventType=l,this.callbackContext=c}respondsTo(l){let c="children_added"===l?"child_added":l;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Qi(this,l,c):null}createEvent(l,c){(0,ie.hu)(null!=l.childName,"Child events should have a childName.");const _=p(new Ma(c._repo,c._path),l.childName),S=c._queryParams.getIndex();return new yi(l.type,this,new Ou(l.snapshotNode,_,S),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof Pr&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Li(f,l,c,_,S){let L;if("object"==typeof _&&(L=void 0,S=_),"function"==typeof _&&(L=_),S&&S.onlyOnce){const Oe=c,qe=(Rt,Gt)=>{D(f._repo,f,me),Oe(Rt,Gt)};qe.userCallback=c.userCallback,qe.context=c.context,c=qe}const Z=new ou(c,L||void 0),me="value"===l?new Cr(Z):new Pr(l,Z);return function Ks(f,l,c){let _;_=".info"===ar(l._path)?Do(f.infoSyncTree_,l,c):Do(f.serverSyncTree_,l,c),qn(f.eventQueue_,l._path,_)}(f._repo,f,me),()=>D(f._repo,f,me)}function aa(f,l,c,_){return Li(f,"value",l,c,_)}function al(f,l,c,_){return Li(f,"child_added",l,c,_)}function ac(f,l,c){let _=null;const S=c?new ou(c):null;"value"===l?_=new Cr(S):l&&(_=new Pr(l,S)),D(f._repo,f,_)}(function $a(f){(0,ie.hu)(!ra,"__referenceConstructor has already been defined"),ra=f})(Ma),function ma(f){(0,ie.hu)(!dr,"__referenceConstructor has already been defined"),dr=f}(Ma);const _i={};function Jh(f,l,c,_,S){let L=_||f.options.databaseURL;void 0===L&&(f.options.projectId||ft("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Me("Using default host for project ",f.options.projectId),L=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Oe,qe,Z=ol(L,S),me=Z.repoInfo;"undefined"!=typeof process&&process.env&&(qe=process.env.FIREBASE_DATABASE_EMULATOR_HOST),qe?(Oe=!0,L=`http://${qe}?ns=${me.namespace}`,Z=ol(L,S),me=Z.repoInfo):Oe=!Z.repoInfo.secure;const Rt=S&&Oe?new Ln(Ln.OWNER):new ir(f.name,f.options,l);(function(f,l){const c=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Nu(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==c.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),q(f)}(c))throw new Error((0,ie.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",Z),kt(Z.path)||ft("Database URL must point to the root of a Firebase Database (not including a child path).");const Gt=function ef(f,l,c,_){let S=_i[l.name];S||(S={},_i[l.name]=S);let L=S[f.toURLString()];return L&&ft("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new Is(f,false,c,_),S[f.toURLString()]=L,L}(me,f,Rt,new mr(f.name,c));return new fm(Gt,f)}class fm{constructor(l,c){this._repoInternal=l,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ra(f,l,c){if(f.stats_=hi(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new qt(f.repoInfo_,(_,S,L,Z)=>{no(f,_,S,L,Z)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>ro(f,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Wl)(c)}catch(_){throw new Error("Invalid authOverride provided: "+_)}}f.persistentConnection_=new ms(f.repoInfo_,l,(_,S,L,Z)=>{no(f,_,S,L,Z)},_=>{ro(f,_)},_=>{!function Ns(f,l){un(l,(c,_)=>{Fo(f,c,_)})}(f,_)},f.authTokenProvider_,f.appCheckProvider_,c),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(_=>{f.server_.refreshAuthToken(_)}),f.appCheckProvider_.addTokenChangeListener(_=>{f.server_.refreshAppCheckToken(_.token)}),f.statsReporter_=function hr(f,l){const c=f.toString();return Wn[c]||(Wn[c]=l()),Wn[c]}(f.repoInfo_,()=>new cr(f.stats_,f.server_)),f.infoData_=new gi,f.infoSyncTree_=new Yi({startListening:(_,S,L,Z)=>{let me=[];const Oe=f.infoData_.getNode(_._path);return Oe.isEmpty()||(me=Cs(f.infoSyncTree_,_._path,Oe),setTimeout(()=>{Z("ok")},0)),me},stopListening:()=>{}}),Fo(f,"connected",!1),f.serverSyncTree_=new Yi({startListening:(_,S,L,Z)=>(f.server_.listen(_,L,S,(me,Oe)=>{const qe=Z(me,Oe);Jr(f.eventQueue_,_._path,qe)}),[]),stopListening:(_,S)=>{f.server_.unlisten(_,S)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ma(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Xh(f,l){const c=_i[l];(!c||c[f.key]!==f)&&ft(`Database ${l}(${f.repoInfo_}) has already been deleted.`),function P(f){f.persistentConnection_&&f.persistentConnection_.interrupt("repo_interrupt")}(f),delete c[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&ft("Cannot call "+l+" on a deleted database.")}}function Pa(f=(0,B.getApp)(),l){const c=(0,B._getProvider)(f,"database").getImmediate({identifier:l});if(!c._instanceStarted){const _=(0,ie.P0)("database");_&&function dc(f,l,c,_={}){(f=(0,ie.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&ft("Cannot call useEmulator() after instance has already been initialized.");const S=f._repoInternal;let L;if(S.repoInfo_.nodeAdmin)_.mockUserToken&&ft('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new Ln(Ln.OWNER);else if(_.mockUserToken){const Z="string"==typeof _.mockUserToken?_.mockUserToken:(0,ie.Sg)(_.mockUserToken,f.app.options.projectId);L=new Ln(Z)}!function sd(f,l,c,_){f.repoInfo_=new St(`${l}:${c}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams,!0),_&&(f.authTokenProvider_=_)}(S,l,c,L)}(c,..._)}return c}ms.prototype.simpleListen=function(f,l){this.sendRequest("q",{p:f},l)},ms.prototype.echo=function(f,l){this.sendRequest("echo",{d:f},l)},function dp(f){(function lt(f){ze=f})(B.SDK_VERSION),(0,B._registerComponent)(new X.wA("database",(l,{instanceIdentifier:c})=>Jh(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,B.registerVersion)(Ke,"0.14.4",f),(0,B.registerVersion)(Ke,"0.14.4","esm2017")}()},2290:(pn,dt,$)=>{$.d(dt,{Rh:()=>gr,_W:()=>on});var y=$(5e3),B=$(1777),X=$(7579),ie=$(9808),Ue=$(2313);const Ke=["toast-component",""];function Xe(_e,De){if(1&_e){const ve=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){return y.CHM(ve),y.oxw().remove()}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function ze(_e,De){if(1&_e&&(y.ynx(0),y._uU(1),y.BQk()),2&_e){const ve=y.oxw(2);y.xp6(1),y.hij("[",ve.duplicatesCount+1,"]")}}function lt(_e,De){if(1&_e&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,ze,2,1,"ng-container",4),y.qZA()),2&_e){const ve=y.oxw();y.Tol(ve.options.titleClass),y.uIk("aria-label",ve.title),y.xp6(1),y.hij(" ",ve.title," "),y.xp6(1),y.Q6J("ngIf",ve.duplicatesCount)}}function be(_e,De){if(1&_e&&y._UZ(0,"div",7),2&_e){const ve=y.oxw();y.Tol(ve.options.messageClass),y.Q6J("innerHTML",ve.message,y.oJD)}}function Ce(_e,De){if(1&_e&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&_e){const ve=y.oxw();y.Tol(ve.options.messageClass),y.uIk("aria-label",ve.message),y.xp6(1),y.hij(" ",ve.message," ")}}function nt(_e,De){if(1&_e&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&_e){const ve=y.oxw();y.xp6(1),y.Udp("width",ve.width+"%")}}function Lt(_e,De){if(1&_e){const ve=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){return y.CHM(ve),y.oxw().remove()}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function Mt(_e,De){if(1&_e&&(y.ynx(0),y._uU(1),y.BQk()),2&_e){const ve=y.oxw(2);y.xp6(1),y.hij("[",ve.duplicatesCount+1,"]")}}function Ft(_e,De){if(1&_e&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,Mt,2,1,"ng-container",4),y.qZA()),2&_e){const ve=y.oxw();y.Tol(ve.options.titleClass),y.uIk("aria-label",ve.title),y.xp6(1),y.hij(" ",ve.title," "),y.xp6(1),y.Q6J("ngIf",ve.duplicatesCount)}}function At(_e,De){if(1&_e&&y._UZ(0,"div",7),2&_e){const ve=y.oxw();y.Tol(ve.options.messageClass),y.Q6J("innerHTML",ve.message,y.oJD)}}function Qe(_e,De){if(1&_e&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&_e){const ve=y.oxw();y.Tol(ve.options.messageClass),y.uIk("aria-label",ve.message),y.xp6(1),y.hij(" ",ve.message," ")}}function Nt(_e,De){if(1&_e&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&_e){const ve=y.oxw();y.xp6(1),y.Udp("width",ve.width+"%")}}class Ee{constructor(De,ve){this.component=De,this.injector=ve}attach(De,ve){return this._attachedHost=De,De.attach(this,ve)}detach(){const De=this._attachedHost;if(De)return this._attachedHost=void 0,De.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(De){this._attachedHost=De}}class ot{constructor(De,ve,xe,pt,tn,hn){this.toastId=De,this.config=ve,this.message=xe,this.title=pt,this.toastType=tn,this.toastRef=hn,this._onTap=new X.x,this._onAction=new X.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(De){this._onAction.next(De)}onAction(){return this._onAction.asObservable()}}const _t={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},ft=new y.OlP("ToastConfig");class tt{constructor(De){this._overlayRef=De,this.duplicatesCount=0,this._afterClosed=new X.x,this._activate=new X.x,this._manualClose=new X.x,this._resetTimeout=new X.x,this._countDuplicate=new X.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(De,ve){De&&this._resetTimeout.next(),ve&&this._countDuplicate.next(++this.duplicatesCount)}}class Vt{constructor(De,ve){this._toastPackage=De,this._parentInjector=ve}get(De,ve,xe){return De===ot?this._toastPackage:this._parentInjector.get(De,ve,xe)}}class It extends class Me{attach(De,ve){return this._attachedPortal=De,this.attachComponentPortal(De,ve)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(De){this._disposeFn=De}}{constructor(De,ve,xe){super(),this._hostDomElement=De,this._componentFactoryResolver=ve,this._appRef=xe}attachComponentPortal(De,ve){const xe=this._componentFactoryResolver.resolveComponentFactory(De.component);let pt;return pt=xe.create(De.injector),this._appRef.attachView(pt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(pt.hostView),pt.destroy()}),ve?this._hostDomElement.insertBefore(this._getComponentRootNode(pt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(pt)),pt}_getComponentRootNode(De){return De.hostView.rootNodes[0]}}class On{constructor(De){this._portalHost=De}attach(De,ve=!0){return this._portalHost.attach(De,ve)}detach(){return this._portalHost.detach()}}let Ht=(()=>{class _e{constructor(ve){this._document=ve}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const ve=this._document.createElement("div");ve.classList.add("overlay-container"),ve.setAttribute("aria-live","polite"),this._document.body.appendChild(ve),this._containerElement=ve}}return _e.\u0275fac=function(ve){return new(ve||_e)(y.LFG(ie.K0))},_e.\u0275prov=y.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})(),xn=(()=>{class _e{constructor(ve,xe,pt,tn){this._overlayContainer=ve,this._componentFactoryResolver=xe,this._appRef=pt,this._document=tn,this._paneElements=new Map}create(ve,xe){return this._createOverlayRef(this.getPaneElement(ve,xe))}getPaneElement(ve="",xe){return this._paneElements.get(xe)||this._paneElements.set(xe,{}),this._paneElements.get(xe)[ve]||(this._paneElements.get(xe)[ve]=this._createPaneElement(ve,xe)),this._paneElements.get(xe)[ve]}_createPaneElement(ve,xe){const pt=this._document.createElement("div");return pt.id="toast-container",pt.classList.add(ve),pt.classList.add("toast-container"),xe?xe.getContainerElement().appendChild(pt):this._overlayContainer.getContainerElement().appendChild(pt),pt}_createPortalHost(ve){return new It(ve,this._componentFactoryResolver,this._appRef)}_createOverlayRef(ve){return new On(this._createPortalHost(ve))}}return _e.\u0275fac=function(ve){return new(ve||_e)(y.LFG(Ht),y.LFG(y._Vd),y.LFG(y.z2F),y.LFG(ie.K0))},_e.\u0275prov=y.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})(),on=(()=>{class _e{constructor(ve,xe,pt,tn,hn){this.overlay=xe,this._injector=pt,this.sanitizer=tn,this.ngZone=hn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},ve.default),ve.config),ve.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},ve.default.iconClasses),ve.config.iconClasses))}show(ve,xe,pt={},tn=""){return this._preBuildNotification(tn,ve,xe,this.applyConfig(pt))}success(ve,xe,pt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",ve,xe,this.applyConfig(pt))}error(ve,xe,pt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",ve,xe,this.applyConfig(pt))}info(ve,xe,pt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",ve,xe,this.applyConfig(pt))}warning(ve,xe,pt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",ve,xe,this.applyConfig(pt))}clear(ve){for(const xe of this.toasts)if(void 0!==ve){if(xe.toastId===ve)return void xe.toastRef.manualClose()}else xe.toastRef.manualClose()}remove(ve){const xe=this._findToast(ve);if(!xe||(xe.activeToast.toastRef.close(),this.toasts.splice(xe.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const pt=this.toasts[this.currentlyActive].toastRef;pt.isInactive()||(this.currentlyActive=this.currentlyActive+1,pt.activate())}return!0}findDuplicate(ve="",xe="",pt,tn){const{includeTitleDuplicates:hn}=this.toastrConfig;for(const Dn of this.toasts){const zn=hn&&Dn.title===ve;if((!hn||zn)&&Dn.message===xe)return Dn.toastRef.onDuplicate(pt,tn),Dn}return null}applyConfig(ve={}){return Object.assign(Object.assign({},this.toastrConfig),ve)}_findToast(ve){for(let xe=0;xe<this.toasts.length;xe++)if(this.toasts[xe].toastId===ve)return{index:xe,activeToast:this.toasts[xe]};return null}_preBuildNotification(ve,xe,pt,tn){return tn.onActivateTick?this.ngZone.run(()=>this._buildNotification(ve,xe,pt,tn)):this._buildNotification(ve,xe,pt,tn)}_buildNotification(ve,xe,pt,tn){if(!tn.toastComponent)throw new Error("toastComponent required");const hn=this.findDuplicate(pt,xe,this.toastrConfig.resetTimeoutOnDuplicate&&tn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&pt||xe)&&this.toastrConfig.preventDuplicates&&null!==hn)return hn;this.previousToastMessage=xe;let Dn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Dn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const zn=this.overlay.create(tn.positionClass,this.overlayContainer);this.index=this.index+1;let mr=xe;xe&&tn.enableHtml&&(mr=this.sanitizer.sanitize(y.q3G.HTML,xe));const ir=new tt(zn),Ln=new ot(this.index,tn,mr,pt,ve,ir),Lr=new Vt(Ln,this._injector),En=new Ee(tn.toastComponent,Lr),nr=zn.attach(En,this.toastrConfig.newestOnTop);ir.componentInstance=nr.instance;const Pn={toastId:this.index,title:pt||"",message:xe||"",toastRef:ir,onShown:ir.afterActivate(),onHidden:ir.afterClosed(),onTap:Ln.onTap(),onAction:Ln.onAction(),portal:nr};return Dn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Pn.toastRef.activate()})),this.toasts.push(Pn),Pn}}return _e.\u0275fac=function(ve){return new(ve||_e)(y.LFG(ft),y.LFG(xn),y.LFG(y.zs3),y.LFG(Ue.H7),y.LFG(y.R0b))},_e.\u0275prov=y.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})(),qr=(()=>{class _e{constructor(ve,xe,pt){this.toastrService=ve,this.toastPackage=xe,this.ngZone=pt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=xe.message,this.title=xe.title,this.options=xe.config,this.originalTimeout=xe.config.timeOut,this.toastClasses=`${xe.toastType} ${xe.config.toastClass}`,this.sub=xe.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=xe.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=xe.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=xe.toastRef.countDuplicate().subscribe(tn=>{this.duplicatesCount=tn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const ve=(new Date).getTime();this.width=(this.hideTime-ve)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(ve,xe){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(ve),xe)):this.timeout=setTimeout(()=>ve(),xe)}outsideInterval(ve,xe){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(ve),xe)):this.intervalId=setInterval(()=>ve(),xe)}runInsideAngular(ve){this.ngZone?this.ngZone.run(()=>ve()):ve()}}return _e.\u0275fac=function(ve){return new(ve||_e)(y.Y36(on),y.Y36(ot),y.Y36(y.R0b))},_e.\u0275cmp=y.Xpm({type:_e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(ve,xe){1&ve&&y.NdJ("click",function(){return xe.tapToast()})("mouseenter",function(){return xe.stickAround()})("mouseleave",function(){return xe.delayedHideToast()}),2&ve&&(y.d8E("@flyInOut",xe.state),y.Tol(xe.toastClasses),y.Udp("display",xe.displayStyle))},attrs:Ke,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(ve,xe){1&ve&&(y.YNc(0,Xe,3,0,"button",0),y.YNc(1,lt,3,5,"div",1),y.YNc(2,be,1,3,"div",2),y.YNc(3,Ce,2,4,"div",3),y.YNc(4,nt,2,2,"div",4)),2&ve&&(y.Q6J("ngIf",xe.options.closeButton),y.xp6(1),y.Q6J("ngIf",xe.title),y.xp6(1),y.Q6J("ngIf",xe.message&&xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.message&&!xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.options.progressBar))},directives:[ie.O5],encapsulation:2,data:{animation:[(0,B.X$)("flyInOut",[(0,B.SB)("inactive",(0,B.oB)({opacity:0})),(0,B.SB)("active",(0,B.oB)({opacity:1})),(0,B.SB)("removed",(0,B.oB)({opacity:0})),(0,B.eR)("inactive => active",(0,B.jt)("{{ easeTime }}ms {{ easing }}")),(0,B.eR)("active => removed",(0,B.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),_e})();const kn=Object.assign(Object.assign({},_t),{toastComponent:qr});let gr=(()=>{class _e{static forRoot(ve={}){return{ngModule:_e,providers:[{provide:ft,useValue:{default:kn,config:ve}}]}}}return _e.\u0275fac=function(ve){return new(ve||_e)},_e.\u0275mod=y.oAB({type:_e}),_e.\u0275inj=y.cJS({imports:[[ie.ez]]}),_e})(),un=(()=>{class _e{constructor(ve,xe,pt){this.toastrService=ve,this.toastPackage=xe,this.appRef=pt,this.width=-1,this.toastClasses="",this.state="inactive",this.message=xe.message,this.title=xe.title,this.options=xe.config,this.originalTimeout=xe.config.timeOut,this.toastClasses=`${xe.toastType} ${xe.config.toastClass}`,this.sub=xe.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=xe.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=xe.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=xe.toastRef.countDuplicate().subscribe(tn=>{this.duplicatesCount=tn})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const ve=(new Date).getTime();this.width=(this.hideTime-ve)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return _e.\u0275fac=function(ve){return new(ve||_e)(y.Y36(on),y.Y36(ot),y.Y36(y.z2F))},_e.\u0275cmp=y.Xpm({type:_e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(ve,xe){1&ve&&y.NdJ("click",function(){return xe.tapToast()})("mouseenter",function(){return xe.stickAround()})("mouseleave",function(){return xe.delayedHideToast()}),2&ve&&(y.Tol(xe.toastClasses),y.Udp("display",xe.displayStyle))},attrs:Ke,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(ve,xe){1&ve&&(y.YNc(0,Lt,3,0,"button",0),y.YNc(1,Ft,3,5,"div",1),y.YNc(2,At,1,3,"div",2),y.YNc(3,Qe,2,4,"div",3),y.YNc(4,Nt,2,2,"div",4)),2&ve&&(y.Q6J("ngIf",xe.options.closeButton),y.xp6(1),y.Q6J("ngIf",xe.title),y.xp6(1),y.Q6J("ngIf",xe.message&&xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.message&&!xe.options.enableHtml),y.xp6(1),y.Q6J("ngIf",xe.options.progressBar))},directives:[ie.O5],encapsulation:2}),_e})();Object.assign(Object.assign({},_t),{toastComponent:un})},5861:(pn,dt,$)=>{function y(X,ie,Ue,Ke,Xe,ze,lt){try{var be=X[ze](lt),Ce=be.value}catch(nt){return void Ue(nt)}be.done?ie(Ce):Promise.resolve(Ce).then(Ke,Xe)}function B(X){return function(){var ie=this,Ue=arguments;return new Promise(function(Ke,Xe){var ze=X.apply(ie,Ue);function lt(Ce){y(ze,Ke,Xe,lt,be,"next",Ce)}function be(Ce){y(ze,Ke,Xe,lt,be,"throw",Ce)}lt(void 0)})}}$.d(dt,{Z:()=>B})},7582:(pn,dt,$)=>{function ie(it,Je){var _e={};for(var De in it)Object.prototype.hasOwnProperty.call(it,De)&&Je.indexOf(De)<0&&(_e[De]=it[De]);if(null!=it&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(De=Object.getOwnPropertySymbols(it);ve<De.length;ve++)Je.indexOf(De[ve])<0&&Object.prototype.propertyIsEnumerable.call(it,De[ve])&&(_e[De[ve]]=it[De[ve]])}return _e}function nt(it,Je,_e,De){return new(_e||(_e=Promise))(function(xe,pt){function tn(zn){try{Dn(De.next(zn))}catch(mr){pt(mr)}}function hn(zn){try{Dn(De.throw(zn))}catch(mr){pt(mr)}}function Dn(zn){zn.done?xe(zn.value):function ve(xe){return xe instanceof _e?xe:new _e(function(pt){pt(xe)})}(zn.value).then(tn,hn)}Dn((De=De.apply(it,Je||[])).next())})}function Ee(it){return this instanceof Ee?(this.v=it,this):new Ee(it)}function Me(it,Je,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,De=_e.apply(it,Je||[]),xe=[];return ve=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),tn("next"),tn("throw"),tn("return",function pt(Ln){return function(Lr){return Promise.resolve(Lr).then(Ln,mr)}}),ve[Symbol.asyncIterator]=function(){return this},ve;function tn(Ln,Lr){De[Ln]&&(ve[Ln]=function(En){return new Promise(function(nr,Pn){xe.push([Ln,En,nr,Pn])>1||hn(Ln,En)})},Lr&&(ve[Ln]=Lr(ve[Ln])))}function hn(Ln,Lr){try{!function Dn(Ln){Ln.value instanceof Ee?Promise.resolve(Ln.value.v).then(zn,mr):ir(xe[0][2],Ln)}(De[Ln](Lr))}catch(En){ir(xe[0][3],En)}}function zn(Ln){hn("next",Ln)}function mr(Ln){hn("throw",Ln)}function ir(Ln,Lr){Ln(Lr),xe.shift(),xe.length&&hn(xe[0][0],xe[0][1])}}function _t(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,Je=it[Symbol.asyncIterator];return Je?Je.call(it):(it=function At(it){var Je="function"==typeof Symbol&&Symbol.iterator,_e=Je&&it[Je],De=0;if(_e)return _e.call(it);if(it&&"number"==typeof it.length)return{next:function(){return it&&De>=it.length&&(it=void 0),{value:it&&it[De++],done:!it}}};throw new TypeError(Je?"Object is not iterable.":"Symbol.iterator is not defined.")}(it),_e={},De("next"),De("throw"),De("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function De(xe){_e[xe]=it[xe]&&function(pt){return new Promise(function(tn,hn){!function ve(xe,pt,tn,hn){Promise.resolve(hn).then(function(Dn){xe({value:Dn,done:tn})},pt)}(tn,hn,(pt=it[xe](pt)).done,pt.value)})}}}$.d(dt,{FC:()=>Me,KL:()=>_t,_T:()=>ie,mG:()=>nt,qq:()=>Ee}),"function"==typeof SuppressedError&&SuppressedError}},pn=>{pn(pn.s=359)}]);